!function(d){"use strict";d(".js-accordion-item").removeClass("no-js"),d.fn.accordionBlockItem=function(o){var t=d.extend({initiallyOpen:!1,autoClose:!0,clickToClose:!0,scroll:!1,scrollOffset:!1},o),n=250,e=window.location.hash.replace("#",""),l={};function i(){l.content.clearQueue().stop().slideDown(n,function(){t.scroll&&setTimeout(function(){d("html, body").animate({scrollTop:l.self.offset().top-t.scrollOffset},n)},n)}),c(),d(document).trigger("openAccordionItem",l)}function c(){l.self.addClass("is-open is-read"),l.controller.attr({"aria-expanded":"true"}),l.content.removeAttr("aria-hidden")}function s(){l.content.slideUp(n),a()}function a(){l.self.removeClass("is-open"),l.controller.attr({"aria-expanded":"false"}),l.content.attr({"aria-hidden":"true"})}function r(){t.autoClose&&l.self.hasClass("is-open")&&s()}return l.self=d(this),l.id=d(this).attr("id"),l.controller=d(this).children(".js-accordion-controller"),l.content=d("#"+l.controller.attr("aria-controls")),t.scrollOffset=0|Math.floor(parseInt(t.scrollOffset)),t.initiallyOpen?c():l.id===e?i():a(),l.controller.click(function(){return l.self.hasClass("is-open")?t.clickToClose&&s():i(),!1}),d(document).on("openAccordionItem",function(o,t){t!==l&&r()}),l.controller.keydown(function(o){var t=o.which;"BUTTON"!==l.controller.prop("tagName")&&(13!==t&&32!==t||d(this).click()),27===t&&r()}),d(window).on("hashchange",function(){if((e=window.location.hash.replace("#",""))===l.id){var o=d("#"+e);o.length&&o.hasClass("js-accordion-item")&&i()}}),this},d(window).on("load",function(){d(".js-accordion-item").each(function(){d(this).accordionBlockItem({initiallyOpen:d(this).data("initially-open"),autoClose:d(this).data("auto-close"),clickToClose:d(this).data("click-to-close"),scroll:d(this).data("scroll"),scrollOffset:d(this).data("scroll-offset")})})})}(jQuery);
