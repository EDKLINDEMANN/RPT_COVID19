var _ENGAGEYA_WIDGETS=_ENGAGEYA_WIDGETS||[],_ENG_is_google_tag_ran=_ENG_is_google_tag_ran||!1,_ENG_is_yandex_tag_ran=_ENG_is_yandex_tag_ran||!1,_ENG_is_sr_started_loading=_ENG_is_sr_started_loading||!1,_ENG_is_av_started_loading=_ENG_is_av_started_loading||!1,_ENG_is_prebid_js_loaded=_ENG_is_prebid_js_loaded||!1,_ENG_is_feed_js_loaded=_ENG_is_feed_js_loaded||!1,googletag=googletag||{};googletag.cmd=googletag.cmd||[];var _ENG_PARTNERS_SAVED_SESSION_IDS_TO_WIDGET_ID=_ENG_PARTNERS_SAVED_SESSION_IDS_TO_WIDGET_ID||new Map,_ENG_OPTOUT_MODAL_ELM=_ENG_OPTOUT_MODAL_ELM||null,_ENG_PAGE_SESSION_ID=_ENG_PAGE_SESSION_ID||"",ENGAGEYA=function(t){this.widget_wrapper_elm_id=t.wwei,this.pid=t.pid?t.pid:"",this.subid=t.subid?t.subid:"",this.publisher_id=t.pubid?t.pubid:"",this.website_id=t.webid?t.webid:"",this.widget_id=t.wid?t.wid:"",this.width=t.width||"",this.height=t.height||"",this.plr_elm_id=t.plreid,this.plr_type=t.plrtid||-1,this.show_on_pause=t.issop?t.issop:0,this.show_on_complete=t.issoc?t.issoc:0,this.show_on_idle=t.issoi?t.issoi:0,this.is_index_page=t.isidx?t.isidx:1,this.is_widget_autorun=t.isar?t.isar:0,this.is_video_widget=t.isvw?t.isvw:0,this.plr_wmode=t.pwmd?t.pwmd:"opaque",this.plr_func_name=t.pfn,this.origin=t.orig,this.input_url=t.iurl||null,this.feed_url="ext1-api.engageya.com/gas-api/feed.json",this.recs_url="recs.engageya.com/rec-api/getrecs.json",this.recs_url_premium="premium.engageya.com/rec-api/getrecs.json",this.multi_widgets_recs_url="recs.engageya.com/rec-api/get_mw_recs.json",this.pp_recs_url="recs3.engageya.com/rec-api/getrecs.json",this.is_do_pp_recs_call=!1,this.exclude_post_url="recs.engageya.com/rec-api/outpid.json",this.exclude_post_adn_url="recs.engageya.com/rec-api/outpidadn.json",this.event_url="recs.engageya.com/rec-api/event.json",this.default_imgs_url="widget.engageya.com/img/",this.aws_images_url="//engageya-eu-images9.s3-website-eu-west-1.amazonaws.com",this.cdn_images_url="//images9.engageya.com",this.widget_optout_url="//widget.engageya.com/optout/optout.html",this.google_tag_script_url="https://www.googletagservices.com/tag/js/gpt.js",this.prebid_js_url="//widget.engageya.com/prebid/prebid1.37.0.js",this.feed_js_url="//widget.engageya.com/feed/loader.js",this.default_video_post_btn="widget.engageya.com/img/vplay.png",this.doc_ready_called=!1,this.random_id=Math.ceil(1e17*Math.random()),this.cb="engageya_cb_"+this.random_id,this.num_of_slides=t.tnos||15,this.min_slides=2,this.jq=null,this.num_of_jq_attempts=50,this.find_wrapper_elm_retries=10,this.widget_idx=0,this.isNoConflictJquery=t.ncjqry||!1,this.scripts_elms=[],this.get_recs_states=[[],["BUFFERING","PLAYING"],[0,2,3],[1]],this.rec_types=["all","eng_inner","eng_ads","eng_outer"],this.widget_wrapper_elm=null,this.widget_add_data=null,this.is_widget_wrapper_dom_ready=!1,this.is_user_initiated_event=!1,this.data_json=null,this.is_real_imps_called=!1,this.visible_posts_and_types=[],this.load_time_start=(new Date).getTime(),this.widget_direction="left",this.widget_op_direction="right",this.click_pixels=t.cpxls?t.cpxls:"",this.premium_pub_ids=[158041],this.max_num_of_image_load_retries=6,this.image_load_retries_arr={},this.widget_ready_cb=t.wrcb||null,this.log_types={ALL:"ALL",WARNING:"WARNING",INFO:"INFO",ERROR:"ERROR"},this.log_printout=null,this.pp_recs_website_ids=[],this.total_slides=null,this.get_post_cb="_eng_gpcb_"+this.random_id,this.align_dims_post_ids=[-140621],this.num_of_align_dims_retries=20,this.is_multi_widgets=t.ismw||null,this.is_multi_widgets_initiator=!1,this.exclude_posts_reasons_arr=[{val:1,title:"Uninteresting"},{val:2,title:"Misleading"},{val:3,title:"Offensive"},{val:4,title:"Repetitive"},{val:5,title:"Other"}],this.is_show_exclude_box=!1,this.exclude_posts_box_default_thank_you="Thank You! <br> We will try not to show you this content anymore.",this.srPlayer=null,this.AVPlayer=null,this.externalAdditionalDataTypes={STREAM_RAIL:1,ANY_VIEW:3},this.extVideoTypeNames=["","srail","","aniview"],this.place_holders={WIDTH:"[WIDTH]",HEIGHT:"[HEIGHT]",PAGE_URL:"[PAGE_URL]",DNT:"[DO_NOT_TRACK]",CACHE_BUSTER:"[CACHE_BUSTER]",PAGE_TITLE:"[PAGE_TITLE]",SUB_ID:"[SUB_ID]",AD_URL:"[AD_URL]"},this.ext_video_dims={width:0,height:0},this.ext_video_options={},this.is_super_native=!1,this.ad_real_impression_pixels=[],this.ad_real_impression_js_pixels=[],this.ad_click_pixels=[],this.pixels_consts={ENG_PIXEL_TRACK_IMP:"ENG_PIXEL_TRACK_IMP",ENG_PIXEL_TRACK_RIMP:"ENG_PIXEL_TRACK_RIMP",ENG_PIXEL_TRACK_CLK:"ENG_PIXEL_TRACK_CLK",ENG_PIXEL_TRACK_IMP_JS:"ENG_PIXEL_TRACK_IMP_JS",ENG_PIXEL_TRACK_RIMP_JS:"ENG_PIXEL_TRACK_RIMP_JS",ENG_PIXEL_TRACK_CLK_JS:"ENG_PIXEL_TRACK_CLK_JS"},this.amp_widget_cb=t.ampwcb||null,this.is_amp_widget=t.isampw||!1,this.amp_caller_obj=t.ampobj||null,this.is_cancel_external_jquery_load_try=t.iscnclextjqry||!1,this.is_ext_video_loaded=!1,this.is_sr_blade=!1,this.is_yandx_ran=!1,this.prebid_ordered_bids=[],this.default_prebid_transform_instructions={0:{type:"string",bid_param:"title",rec_param:"title"},1:{type:"object",bid_param:["image","url"],rec_param:"thumbnail_path"},2:{type:"string",bid_param:"clickUrl",rec_param:"clickUrl"},3:{type:"array",bid_param:"impressionTrackers",addition:this.pixels_consts.ENG_PIXEL_TRACK_IMP,separator:"",rec_param:"impressionUrls"},4:{type:"array",bid_param:"clickTrackers",addition:this.pixels_consts.ENG_PIXEL_TRACK_CLK,separator:"",rec_param:"impressionUrls"},5:{type:"string",bid_param:"sponsoredBy",rec_param:"displayName"},6:{type:"string",bid_param:"cpm",rec_param:"cpm",obj:"bid"}},this.prebid_data=null,this.widget_slide_dims_for_prebid=null,this.widget_types={DEFAULT:1,PAGE_SESSION:2,FEED:3}};ENGAGEYA_MULTI_WIDGETS=function(t){ENGAGEYA.call(this,t),this.input_obj=t,this.multi_widget_ids=t.mwids,this.multi_widget_ids_arr=t.mwids.split(","),this.is_multi_widgets_initiator=!0};var ENGAGEYA_VIDEO=function(t){ENGAGEYA.call(this,t),this.video_types_const={VAST:"VAST",DIRECT:"DIRECT"},this.video_types=["",this.video_types_const.VAST,this.video_types_const.DIRECT],this.video_event_types={AD_START:"AS",AD_FIRST_QUARTILE:"FQ",AD_MID_POINT:"MP",AD_THIRD_QUARTILE:"TQ",AD_COMPLETE:"CO",AD_CLICK:"CLK",ALL_ADS_COMPLETED:"ALADCM",AD_TIMEOUT:"TOUT",ADS_READY:"ADRDY",AD_ERROR:"ADER"},this.auto_play="autoplay",this.is_muted=!0,this.load_on_view_percents=0,this.play_video_on_view_percents={top:20,bottom:0},this.pause_video_on_not_view_percents={top:1,bottom:1},this.is_video_was_on_view=!1,this.videojs_path="//widget.engageya.com/videojs/",this.videojs_js_files=["video.js","//imasdk.googleapis.com/js/sdkloader/ima3.js","videojs.as.js","videojs.ima.js"],this.videojs_css_files=["video-js.css","videojs.as.css","videojs.ima.css"],this.is_load_videojs_called=!1,this.is_video_js_fully_loaded=!1,this.is_video_should_be_paused=!1,this.is_display_controls=!0,this.is_video_tag_populated=!1,this.video_sources=[{src:"//widget.engageya.com/videojs/dummy_video.mp4",type:"video/mp4"}],this.is_close_player_when_ads_completed=!0,this.video_view_ratio=null,this.is_add_href=!1,this.skip_offest=-1,this.fire_click_events=[],this.is_unmute_on_mouse_over=!0,this.is_close_video_on_ad_timeout=!1,this.is_close_video_on_ad_error=!0,this.log_printout="ALL",this.video_volume=1,this.video_load_ad_timeout=5e3,this.is_window_active=!0,this.is_run_only_on_window_active=!0,this.preload="auto",this.ads_manager=null,this.ads_ready=!1,this.is_play_command_sent=!1};ENGAGEYA_VIDEO.prototype=new ENGAGEYA({}),ENGAGEYA_MULTI_WIDGETS.prototype=new ENGAGEYA({}),ENGAGEYA.prototype.run=function(){this.populate_page_session_id(),1==this.is_video_widget?this.attach_player_events():this.start_run()},ENGAGEYA.prototype.populate_page_session_id=function(){if(this.is_in_iframe()){this.add_message_listener();try{window.top.postMessage("eng_get_session_id",this.origin?this.origin:"*")}catch(t){}}else _ENG_PAGE_SESSION_ID=_ENG_PAGE_SESSION_ID||this.guid()},ENGAGEYA.prototype.add_message_listener=function(){var t=this;window.addEventListener("message",function(e){if(t.origin&&"*"!=t.origin&&e.origin!=t.origin)return console.log("ERROR:"),void console.log(e.origin+" different from "+t.origin);if(void 0===_ENG_PAGE_SESSION_ID||!_ENG_PAGE_SESSION_ID){var i=e.data;try{var _=i.split("^");_&&_.length>1&&"eng_page_session_id"==_[0]&&(_ENG_PAGE_SESSION_ID=_[1])}catch(e){}}})},ENGAGEYA.prototype.attach_player_events=function(){1==this.plr_type?this.attach_jwplayer_events():2==this.plr_type?this.attach_flowplayer_events():this.attach_generic_player_events(),1==this.is_widget_autorun&&this.start_run()},ENGAGEYA.prototype.attach_jwplayer_events=function(){var t=this;jwplayer(this.plr_elm_id).onPlay(function(){t.on_play_action()}),jwplayer(this.plr_elm_id).onBuffer(function(){t.on_play_action()}),jwplayer(this.plr_elm_id).onPause(function(){t.on_pause_action()}),jwplayer(this.plr_elm_id).onIdle(function(){t.on_idle_action()}),jwplayer(this.plr_elm_id).onComplete(function(){t.on_complete_action()}),this.plr_get_state_fnc=jwplayer(this.plr_elm_id).getState,this.state_events()},ENGAGEYA.prototype.attach_flowplayer_events=function(){var t=this,e=null;e=flowplayer(this.plr_elm_id)?flowplayer(this.plr_elm_id):flowplayer();try{e.onStart(function(){t.on_play_action()}),e.onLoad(function(){t.on_play_action()}),e.getClip().onResume(function(){t.on_play_action()}),e.getClip().onPause(function(){t.on_pause_action()}),e.getClip().onStop(function(){t.on_pause_action()}),e.getClip().onFinish(function(){t.on_complete_action()}),this.plr_get_state_fnc=e.getState}catch(i){e.bind("load",function(e,i){t.on_play_action()}),e.bind("click",function(e,i){t.is_user_initiated_event=!0}),e.bind("resume",function(e,i){t.on_play_action()}),e.bind("pause",function(e,i){t.is_user_initiated_event&&(t.on_pause_action(),t.is_user_initiated_event=!1)}),e.bind("stop",function(e,i){t.on_pause_action()}),e.bind("finish",function(e,i){t.on_complete_action()}),this.plr_get_state_fnc=function(){return 1}}this.state_events()},ENGAGEYA.prototype.attach_generic_player_events=function(){var t=this;try{var e=window[this.plr_func_name](this.plr_elm_id)}catch(t){}e=(e=e||window[this.plr_func_name])||document.getElementById(this.plr_elm_id);try{e.onStart(function(){t.on_play_action()})}catch(t){}try{e.onLoad(function(){t.on_play_action()})}catch(t){}try{e.onPlaying(function(){t.on_play_action()})}catch(t){}try{e.onplay=function(){t.on_play_action()}}catch(t){}try{e.onPlay(function(){t.on_play_action()})}catch(t){}try{e.onBuffer(function(){t.on_play_action()})}catch(t){}try{e.onResume(function(){t.on_play_action()})}catch(t){}try{e.onPause(function(){t.on_pause_action()})}catch(t){}try{e.onpause=function(){t.on_pause_action()}}catch(t){}try{e.onStop(function(){t.on_pause_action()})}catch(t){}try{e.onFinish(function(){t.on_complete_action()})}catch(t){}try{e.onended=function(){t.on_complete_action()}}catch(t){}try{e.onComplete(function(){t.on_complete_action()})}catch(t){}try{this.plr_get_state_fnc=e.getState||function(){return 1}}catch(t){}this.state_events()},ENGAGEYA.prototype.on_play_action=function(){this.hide_widget(this),this.start_run()},ENGAGEYA.prototype.on_pause_action=function(){1==this.show_on_pause&&this.is_widget_wrapper_dom_ready&&this.show_widget()},ENGAGEYA.prototype.on_idle_action=function(){1==this.show_on_idle&&this.show_widget()},ENGAGEYA.prototype.on_complete_action=function(){1==this.show_on_complete&&this.show_widget()},ENGAGEYA.prototype.state_events=function(){this.is_load_recs_state()&&this.start_run()},ENGAGEYA.prototype.is_load_recs_state=function(){var t=this.plr_get_state_fnc();return this.in_array(t,this.get_recs_states[this.plr_type])},ENGAGEYA.prototype.show_widget=function(){this.jq("#eng_recs_holder_"+this.random_id).fadeIn("slow"),this.align_widget_elements()},ENGAGEYA.prototype.hide_widget=function(t){try{this.jq("#eng_recs_holder_"+t.random_id).hide()}catch(t){}},ENGAGEYA.prototype.attach_widget_events=function(){try{var t=this;this.load_real_imps_events(),this.widget_imgs_events(),this.widget_clicks_events(),this.posts_exclusion_box_events(),this.jq("#eng_ww_close_"+this.random_id).click(function(){t.hide_widget(t)})}catch(t){console.log("ERROR - events:"),console.log(t)}},ENGAGEYA.prototype.create_generic_elms=function(){try{_ENG_OPTOUT_MODAL_ELM||(_ENG_OPTOUT_MODAL_ELM=this.generate_modal_elm("optout","","none"))}catch(t){console.log("ERROR - generic elms:"),console.log(t)}},ENGAGEYA.prototype.generate_modal_elm=function(t,e,i){var _="eng_modal_id_"+t,s="eng_modal_content_"+t,n="eng_modal_close_"+t,o=document.createElement("div");o.id=_;var a='<div id="'+s+'"><span id="'+n+'">&times;</span>'+(e||'<iframe frameborder="0" allowtransparency="true" style="width:100%!important;height:500px;overflow:scroll;"></iframe>')+"</div>",r="<style>#"+_+"{display:"+i+";position:fixed;z-index:9999;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:rgba(0,0,0,.4)}#"+s+"{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:10px;max-width:750px;background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;width:80%}#"+n+"{color:#aaa;float:right;font-size:28px;font-weight:700}#"+n+":focus,#"+n+":hover{color:#000;text-decoration:none;cursor:pointer}</style>";return o.innerHTML=a+r,document.getElementsByTagName("body")[0].append(o),document.getElementById(n).onclick=function(){o.style.display="none"},window.addEventListener("click",function(t){t.target==o&&(o.style.display="none")}),o},ENGAGEYA.prototype.widget_clicks_events=function(){this.attach_on_click_pixel_event(),this.attach_on_click_widget_optout_event()},ENGAGEYA.prototype.attach_on_click_widget_optout_event=function(){if(_ENG_OPTOUT_MODAL_ELM){var t=this;this.jq(this.widget_wrapper_elm).find(".eng_branding,.eng_m_branding").click(function(e){var i=t.jq(_ENG_OPTOUT_MODAL_ELM).find("iframe"),_=t.widget_optout_url+"?swebid="+t.website_id+"&ref="+t.get_page_url();return i.attr("src",_),t.jq(_ENG_OPTOUT_MODAL_ELM).fadeIn(),!1})}},ENGAGEYA.prototype.attach_on_click_pixel_event=function(){var t=this;if(t.click_pixels)try{for(var e=0;e<t.click_pixels.length;e++){for(var i=t.click_pixels[e],_=i.urls.split(";"),s="",n=0;n<_.length;n++)i.etype&&0!=i.etype?1==i.etype&&(s=_):s+='<img src="'+_[n]+'" style="display:none;" width="1px" height="1px" />';var o=".eng_widget_href,.eng_m_widget_href";if(0!=i.type){var a=t.rec_types[i.type];o=".eng_widget_href."+a+",.eng_m_widget_href."+a}i.etype&&0!=i.etype?1==i.etype&&t.get_recs_holder_elm().find(o).mousedown({pxls:s},function(t){try{for(var e=t.data.pxls,i=0;i<e.length;i++){var _=e[i],s=_.match("engcval_(.*?)['|\"],");if(s&&s.length>1){var n="engcval_"+s[1],o=".*?href=.*?"+s[1]+"=(.*?)&",a=this.outerHTML.match(o);if(a&&a[1]){var r=decodeURIComponent(a[1]);_=_.replace(n,r)}}ga("send",_)}}catch(t){console.log("ERROR - ga click event"),console.log(t)}}):t.get_recs_holder_elm().find(o).mousedown({pxls:s},function(e){t.jq(this).append(t.populate_place_holders(this,e.data.pxls))})}}catch(t){console.log("ERROR - click pixel"),console.log(t)}},ENGAGEYA.prototype.widget_imgs_events=function(){this.attach_on_img_error_event(),this.attach_on_hover_brand_img_event(),this.attach_on_img_load_event()},ENGAGEYA.prototype.attach_on_hover_brand_img_event=function(){var t=this,e=this.get_add_data("brnd");e&&e.imghvr&&t.get_recs_holder_elm().hover(function(){t.jq(this).find("#eng_brnd_img_"+t.widget_id).attr("src",e.imghvr)},function(){t.jq(this).find("#eng_brnd_img_"+t.widget_id).attr("src",e.img.src)}),e&&e.img2hvr&&t.get_recs_holder_elm().hover(function(){t.jq(this).find("#eng_brnd_img2_"+t.widget_id).attr("src",e.img2hvr)},function(){t.jq(this).find("#eng_brnd_img2_"+t.widget_id).attr("src",e.img2.src)})},ENGAGEYA.prototype.attach_on_img_load_event=function(){var t=this,e=function(){try{t.is_amp_widget&&t.amp_caller_obj&&t.amp_caller_obj.resizeAMPWidget(),t.is_run_ext_video_started||t.run_ext_video()}catch(t){}},i=t.get_recs_holder_elm().find(".eng_widget_img,.eng_m_widget_img");void 0!==i.error?i.load(e):i.on("load",e)},ENGAGEYA.prototype.attach_on_img_error_event=function(){var t=this,e=function(){try{var e=1*this.outerHTML.match(".*?_img_(.*?)_.*")[1],i=t.image_load_retries_arr[e];if(void 0===i&&(i=t.max_num_of_image_load_retries,t.image_load_retries_arr[e]=i),i<1)t.set_default_image(t,this);else{t.image_load_retries_arr[e]--;var _=this.src.match(".*?//.*?(/.*)")[1],s="";s=t.image_load_retries_arr[e]%2==0?t.aws_images_url+_:t.cdn_images_url+_;var n=this;window.setTimeout(function(){n.src=s+"?"+ +new Date},300)}}catch(e){console.log("ERROR:"),console.log(e),t.set_default_image(t,this)}},i=function(){var e=this.outerHTML.match(".*?_img_(.*?)_.*");if(e){e[1];t.jq(this).unbind("error")}},_=t.get_recs_holder_elm().find(".eng_widget_img,.eng_m_widget_img");void 0!==_.error?(_.error(e),_.load(i)):(_.on("error",e),_.on("load",i))},ENGAGEYA.prototype.set_default_image=function(t,e){var i=Math.floor(3*Math.random()+1),_=t.custom_default_image||"//"+t.default_imgs_url+"def/def_"+i+".jpg";t.jq(e).unbind("error").attr("src",_)},ENGAGEYA.prototype.start_run=function(){"complete"==document.readyState||"loaded"==document.readyState||"interactive"==document.readyState?this.doc_ready(this):this.inj_init_binding(this)},ENGAGEYA.prototype.generate_random_number=function(){return Math.ceil(1e7*Math.random())},ENGAGEYA.prototype.doc_ready=function(t){t.doc_ready_called||(t.doc_ready_called=!0,t.load_jQuery(),t.validate_jquery_loaded(this))},ENGAGEYA.prototype.validate_jquery_loaded=function(t){if(t.jq)t.inner_run();else if(window.jQuery)t.jq=window.jQuery,t.isNoConflictJquery&&console.log(jQuery.noConflict()),t.inner_run();else if(t.num_of_jq_attempts--,t.num_of_jq_attempts>0)return void window.setTimeout(function(){t.validate_jquery_loaded(t)},100)},ENGAGEYA.prototype.load_jQuery=function(){window.jQuery?this.jq=window.jQuery:this.is_cancel_external_jquery_load_try||this.append_script_to_head("//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js","")},ENGAGEYA_MULTI_WIDGETS.prototype.inner_run=function(t){for(var e=t||this,i=0;i<e.multi_widget_ids_arr.length;i++){var _=e.input_obj,s=e.multi_widget_ids_arr[i];_.wid=s,_.wwei=_.wweprfx+s,new ENGAGEYA(_).run()}window[e.cb]=function(t){for(var e=0;e<_ENGAGEYA_WIDGETS.length;e++)for(var i=0;i<t.length;i++)if(_ENGAGEYA_WIDGETS[e].widget_id==t[i].widget.id){var _=_ENGAGEYA_WIDGETS[e],s=t[i];s.rndid=_.random_id,window[_.cb](s)}};var n=e.get_page_url(),o=(e.get_lang(),e.get_page_ttl()),a=e.get_meta_content("keywords","content"),r=document.characterSet?document.characterSet:document.charset,d=e.guid(),l="https://"+e.multi_widgets_recs_url+"?cb="+e.cb+"&pubid="+e.publisher_id+"&webid="+e.website_id+"&mwids="+e.multi_widget_ids+"&recsnum="+e.num_of_slides+"&url="+n+"&cs="+r+"&subid="+e.subid+"&title="+o+"&kwrds="+a+"&sessionid="+d+"&rndid="+e.random_id+"&psid="+_ENG_PAGE_SESSION_ID;e.append_script_to_head(l,e.random_id),e.trigger_partners_header_bidding(d,e.multi_widget_ids)},ENGAGEYA.prototype.inner_run=function(t){var e=t||this;if(window[e.cb]=function(t){if(t&&t.recs.length>0){for(var e=null,i=!1,_=0;_<_ENGAGEYA_WIDGETS.length;_++)if(void 0!==t.rndid&&_ENGAGEYA_WIDGETS[_].random_id==t.rndid){e=_ENGAGEYA_WIDGETS[_],t.widget.id=_ENGAGEYA_WIDGETS[_].widget_id,i=!0;break}if(!i)for(_=0;_<_ENGAGEYA_WIDGETS.length;_++)if(_ENGAGEYA_WIDGETS[_].widget_id==t.widget.id){e=_ENGAGEYA_WIDGETS[_],i=!0;break}if(e){e.data_json=t,e.widget_id=t.widget.id;var s={widget:t.widget.additionalData||"{}",network:t.widget.anad||"{}"};e.populate_add_data(s),e.populate_widget_data(t),t.widget.widgetType&&t.widget.widgetType==e.widget_types.FEED?e.load_feed_loader_js():(e.reposition_widget(),e.build_layout(),e.add_player_wmode(),e.create_generic_elms(),e.attach_widget_events(),e.run_prebidjs(),e.run_criteo(),e.run_outbrain(),e.run_target(),e.run_google_tags(),e.run_yandex_tags(),e.run_posts_preview(),e.run_widget_alignments(),e.widget_ready())}}},e.widget_wrapper_elm=document.getElementById(e.widget_wrapper_elm_id),!e.widget_wrapper_elm)return e.find_wrapper_elm_retries>0?(e.find_wrapper_elm_retries--,void window.setTimeout(function(){e.inner_run(e)},50)):void console.log("INFO: Couldn't find element "+e.widget_wrapper_elm_id);e.create_placement(),e.is_widget_wrapper_dom_ready=!0;var i=e.get_page_url(),_=e.get_lang(),s=e.get_page_ttl(),n=e.get_meta_content("keywords","content"),o=document.characterSet?document.characterSet:document.charset,a="",r="";if(e.set_urls_for_pp(),!e.is_multi_widgets){if(1==e.is_index_page){e.is_premium()&&(e.recs_url=e.recs_url_premium);var d=e.guid();a="https://"+e.recs_url+"?cb="+e.cb+"&pubid="+e.publisher_id+"&webid="+e.website_id+"&wid="+e.widget_id+"&recsnum="+e.num_of_slides+"&url="+i+"&cs="+o+"&subid="+e.subid+"&title="+s+"&kwrds="+n+"&sessionid="+d+"&rndid="+e.random_id+"&psid="+_ENG_PAGE_SESSION_ID,r="https://"+e.pp_recs_url+"?cb=temp123&pubid="+e.publisher_id+"&webid="+e.website_id+"&wid="+e.widget_id+"&recsnum="+e.num_of_slides+"&url="+i+"&cs="+o+"&subid="+e.subid+"&title="+s+"&kwrds="+n+"&sessionid="+d+"&rndid="+e.random_id,e.trigger_partners_header_bidding(d,e.widget_id)}else{d=e.guid();a="https://"+e.feed_url+"?cb="+e.cb+"&format=json&action=paid&url="+i+"&count="+e.num_of_slides+"&min_count="+e.min_slides+"&is_xpath=0&lang="+_+"&cs="+o+"&pid="+e.pid+"&subid="+e.subid+"&title="+s+"&sessionid="+d+"&kwrds="+n,e.trigger_partners_header_bidding(d,e.widget_id)}e.append_script_to_head(a,e.random_id),e.is_do_pp_recs_call&&r&&(window.temp123=function(){},e.append_script_to_head(r,"temp_"+e.random_id))}e.feed_widget_req_url=a,_ENGAGEYA_WIDGETS.push(e)},ENGAGEYA.prototype.load_feed_loader_js=function(){var t=this;_ENG_is_feed_js_loaded?this.load_feed_widget():this.get_script(this.feed_js_url,function(e,i,_){_ENG_is_feed_js_loaded=!0,t.load_feed_widget()})},ENGAGEYA.prototype.load_feed_widget=function(){var t=this.get_feed_widget_instructions();initEngageyaInfiniteWidget(t)},ENGAGEYA.prototype.get_feed_widget_instructions=function(){var t={};return t.apiUrl=this.feed_widget_req_url,t.mountPoint=this.widget_wrapper_elm_id,t.widgetMaxWidth=800,t.data=this.data_json,t},ENGAGEYA.prototype.set_urls_for_pp=function(){this.in_array(this.website_id,this.pp_recs_website_ids)&&(this.recs_url=this.recs_url.replace("recs","recs2"),this.event_url=this.event_url.replace("recs","recs2"))},ENGAGEYA.prototype.load_real_imps_events=function(){var t=this.data_json.widget;if(t&&(1!=this.is_index_page||t.isRealImpressions)){var e,i=(e=this,function(){var t=e.is_elm_visible(e.widget_wrapper_elm);if(t&&!e.is_amp_widget){if(e.is_real_imps_called)return;e.is_real_imps_called=!0,1==e.is_index_page?e.fire_widget_real_impression_event(e):e.fire_real_impression_pixels()}return t});window.addEventListener?(addEventListener("DOMContentLoaded",i,!1),addEventListener("load",i,!1),addEventListener("scroll",i,!1),addEventListener("resize",i,!1)):window.attachEvent&&(attachEvent("onDOMContentLoaded",i),attachEvent("onload",i),attachEvent("onscroll",i),attachEvent("onresize",i))}},ENGAGEYA.prototype.fire_widget_real_impression_event=function(t){var e=t.data_json,i=t.visible_posts_and_types;if(i.length>0){for(var _="",s=0;s<i.length;s++)_+=i[s].pi+":"+i[s].pt,s!=i.length-1&&(_+=",");var n=(new Date).getTime()-t.load_time_start;t.fire_real_impression_pixels();var o=document.createElement("img");o.src="https://"+t.event_url+"?irid="+e.requestId+"&webid="+e.srcWebsiteId+"&wid="+e.srcWidgetId+"&spid="+e.srcPostId+"&tpids="+_+"&tti="+n+"&ucc="+e.requestGeoCountry,e.ipu&&e.guid&&(o.src+="&u="+e.guid);try{document.getElementsByTagName("head")[0].appendChild(o)}catch(t){console.log("ERROR - real imps:"),console.log(t)}}},ENGAGEYA.prototype.trigger_partners_header_bidding=function(t,e){"function"==typeof _ENG_PARTNERS_triggerHeaderBidding?_ENG_PARTNERS_triggerHeaderBidding(t,e):_ENG_PARTNERS_SAVED_SESSION_IDS_TO_WIDGET_ID.set(t,e)},ENGAGEYA.prototype.import_partners_header_bidding_libs=function(){this.append_script_to_head("//widget.engageya.com/eng_publishertag.js","eng_publishertag"),this.append_script_to_head("//widget.engageya.com/eng_trigger_server_bidding.js","eng_trigger_server_bidding")},ENGAGEYA.prototype.guid=function(){return function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}()},ENGAGEYA.prototype.run_prebidjs=function(){if(this.populate_prebid_data(),this.prebid_data){var t=this;_ENG_is_prebid_js_loaded?this.get_prebid_bids():this.get_script(this.prebid_js_url,function(e,i,_){_ENG_is_prebid_js_loaded=!0,t.get_prebid_bids()})}},ENGAGEYA.prototype.populate_prebid_data=function(){try{if(this.data_json&&this.data_json.prebidConfigStr){var t=JSON.parse(this.data_json.prebidConfigStr);if(t&&t.partners){this.prebid_data=t,this.prebid_data.partners_json=[];for(var e=0;e<t.partners.length;e++)this.prebid_data.partners_json.push(JSON.parse(t.partners[e]))}}}catch(t){console.log("ERROR:"),console.log(t)}},ENGAGEYA.prototype.get_prebid_bids=function(t){var e=this;if(void 0===t&&(t=10),!this.widget_slide_dims_for_prebid){if(t>0)return void window.setTimeout(function(){e.get_prebid_bids(--t)},100);this.widget_slide_dims_for_prebid={width:300,height:250}}var i=window.pbjs||{};i.que=i.que||[];var _=this.get_prebid_ad_units();i.que.push(function(){i.addAdUnits(_),i.requestBids({bidsBackHandler:function(t){e.handle_prebid_bid_responses(t)}})})},ENGAGEYA.prototype.handle_prebid_bid_responses=function(t){if(this.jq.isEmptyObject(t))console.log("No bid responses!");else{this.order_bids(t);var e=this.choose_recs_to_replace();if(e&&0!=e.length){var i=this.transform_bids_to_recommendations();this.replace_recs_if_possible(i,e)}else console.log("No chosen recs to replace!")}},ENGAGEYA.prototype.choose_recs_to_replace=function(){if(this.prebid_data&&this.prebid_data.partners){for(var t=this.prebid_data.partners_json[0]&&this.prebid_data.partners_json[0].maxAds?this.prebid_data.partners_json[0].maxAds:3,e=[],i=0;i<t;i++){var _=this.get_lowest_ecpm_rec();_&&_.ecpm>0&&e.push(_.index)}if(e.length<t&&this.prebid_data.partners_json[0]){var s=this.prebid_data.partners_json[0].defTls;if(s&&s.length>0)for(i=0;i<s.length&&e.length<t;i++)this.in_array(s[i],e)||e.push(s[i])}return e}},ENGAGEYA.prototype.get_lowest_ecpm_rec=function(){for(var t=null,e=0;e<this.data_json.recs.length;e++){var i=this.data_json.recs[e];i&&!i.isChosen&&(null==t?t=i:i.ecpm>t.ecpm&&((t=i).index=e+1))}return t.isChosen=!0,t},ENGAGEYA.prototype.replace_recs_if_possible=function(t,e){for(var i=0;i<e.length;i++){var _=e[i]-1;if(this.data_json.recs[_].ecpm<t[0].cpm&&(this.inject_rec_by_idx(t.pop(),_),0==t.length))break}},ENGAGEYA.prototype.inject_rec_by_idx=function(t,e){if(this.is_real_imps_called)console.info("real imp already called, skipping rec replace");else{var i=this,_=this.get_widget_slide_by_idx(e);try{if(_&&_.length>0){var s=_.clone(),n=this.get_title(t),o=s.find(".eng_widget_is");o.html(n);var a=s.find(".eng_widget_href"),r=t.clickUrl;a.attr("href",r),a.attr("title",n),a.attr("target","_blank"),a.mousedown(function(t){return this.href=r,!0});var d=s.find(".eng_widget_img");d.css("height",_.find(".eng_widget_img").height()),d.css("width","auto"),d.css("display","inline-block"),d.css("margin-bottom","0"),imageElmWrapper=d.parent(),imageElmWrapper.css("text-align","center"),imageElmWrapper.css("border","1px solid #ededed"),imageElmWrapper.css("box-sizing","border-box"),imageElmWrapper.css("margin-bottom","5px"),d.attr("src",t.thumbnail_path);var l=s.find(".eng_widget_dn");l&&l.length>0?l.val(t.displayName):this.jq('<span class="eng_widget_dn">'+t.displayName+"</span>").insertAfter(o),_.fadeOut("slow",function(){i.jq(this).replaceWith(s),s.hide().fadeIn("fast")}),this.remove_post_from_visible_posts_and_types(this.data_json.recs[e].postId);var p=this.get_impression_pixel_imgs_and_populate_other_pixel_types(t.impressionUrls);s.append(p)}}catch(t){console.log("ERROR:"),console.log(t)}}},ENGAGEYA.prototype.remove_post_from_visible_posts_and_types=function(t){for(var e=0;e<this.visible_posts_and_types.length;e++){if(this.visible_posts_and_types[e].pi==t){this.visible_posts_and_types.splice(e,1);break}}},ENGAGEYA.prototype.get_widget_slide_by_idx=function(t){var e="#eng_sw_"+t+"_"+this.widget_id,i="#eng_m_sw_"+t+"_"+this.widget_id;return this.jq(this.widget_wrapper_elm).find(e+","+i)},ENGAGEYA.prototype.transform_bids_to_recommendations=function(){for(var t=[],e=null;e=this.prebid_ordered_bids.pop();)e&&e.native?t.push(this.bid_to_rec(e)):(console.log("ERROR - Prebid:"),console.log("Bid is not native"));return t},ENGAGEYA.prototype.bid_to_rec=function(t,e){e||(e=this.default_prebid_transform_instructions);var i=null,_={};return this.jq.each(e,function(e,s){var n=s.type,o=s.bid_param,a=s.rec_param,r=s.addition,d=s.separator;switch(i="bid"==s.obj?t:t.native,n){case"string":_[a]=i[o];break;case"object":for(var l=null,p=0;p<o.length;p++)l=l?l[o[p]]:i[o[p]];_[a]=l;break;case"array":if(i[o])for(p=0;p<i[o].length;p++)_[a]||(_[a]=[]),_[a].push(i[o][p]+r+d)}}),_},ENGAGEYA.prototype.order_bids=function(t){var e=this;this.jq.each(t,function(t,i){i&&i.bids&&e.jq.each(i.bids,function(t,i){e.prebid_ordered_bids.push(i)})}),this.prebid_ordered_bids.sort(function(t,e){return t.cpm-e.cpm}),window.test=this.prebid_ordered_bids,console.log(window.test)},ENGAGEYA.prototype.get_prebid_ad_units=function(){var t=[];if(!this.prebid_data||!this.prebid_data.partners)return t;for(var e=0;e<this.prebid_data.partners.length;e++)try{var i=this.populate_prebid_placeholders(this.prebid_data.partners[e]),_=JSON.parse(i);_&&_.adUnits&&t.push(_.adUnits)}catch(t){console.log("ERROR:"),console.log(t)}return t},ENGAGEYA.prototype.populate_prebid_placeholders=function(t){return t=(t=(t=(t=t.replace('"{width}"',this.widget_slide_dims_for_prebid.width)).replace('"{height}"',this.widget_slide_dims_for_prebid.height)).replace("{widget_id}",this.widget_id)).replace("{website_id}",this.data_json.srcWebsiteId)},ENGAGEYA.prototype.run_criteo=function(){if(this.get_add_data("criteo")){var t=document.createElement("script");t.type="text/javascript",t.src="//widget.engageya.com/eng_crt_loader_new.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}},ENGAGEYA.prototype.run_outbrain=function(){var t=this.get_add_data("obrn");try{if(t){var e=t.geos.split(",");if(this.in_array("ALL",e)||this.in_array(this.data_json.requestGeoCountry,e)){var i=document.createElement("script");i.type="text/javascript",i.src="//widget.engageya.com/eng_ob_loader.js";var _=document.getElementsByTagName("script")[0];_.parentNode.insertBefore(i,_)}}}catch(t){console.log("ERROR:"),console.log(t)}},ENGAGEYA.prototype.run_target=function(){var t=this.get_add_data("trgt");try{if(t){var e=t.geos.split(",");if(this.in_array("ALL",e)||this.in_array(this.data_json.requestGeoCountry,e)){var i=document.createElement("script");i.type="text/javascript",i.src="//widget.engageya.com/eng_trgt_loader.js";var _=document.getElementsByTagName("script")[0];_.parentNode.insertBefore(i,_)}}}catch(t){console.log("ERROR:"),console.log(t)}},ENGAGEYA.prototype.run_yandex_tags=function(){if(this.yandex_tag&&!this.is_yandx_ran&&!_ENG_is_yandex_tag_ran){if(_ENG_is_yandex_tag_ran=!0,this.is_yandx_ran=!0,this.yandex_tag.url&&this.yandex_tag.url!=window.location.href)return;try{for(var t=this.yandex_tag.bid,e=this.yandex_tag.tls.split(","),i=0;i<e.length;i++){var _=this.get_slide_elm_by_idx(e[i]-1);if(_){var s="yandex_rtb_"+t+"-"+i;_.innerHTML='<div id="'+s+'"></div>',n=window,o=window.document,r=void 0,d=void 0,n[a="yandexContextAsyncCallbacks"]=n[a]||[],d=o.getElementsByTagName("script")[0],(r=o.createElement("script")).type="text/javascript",r.src="//an.yandex.ru/system/context.js",r.async=!0,d.parentNode.insertBefore(r,d),window.yandexContextAsyncCallbacks=window.yandexContextAsyncCallbacks||[],window.yandexContextAsyncCallbacks.push(function(){Ya.Context.AdvManager.render({blockId:t,renderTo:s,async:!0})})}}}catch(t){console.log("ERROR:"),console.log(t)}}var n,o,a,r,d},ENGAGEYA.prototype.run_google_tags=function(){if(this.google_tags&&!_ENG_is_google_tag_ran){_ENG_is_google_tag_ran=!0,this.append_script_to_head(this.google_tag_script_url,"");for(var t=0;t<this.google_tags.length;t++){var e=this.google_tags[t].gtn,i=this.google_tags[t].sys,_=this.google_tags[t].id,s=this.google_tags[t].idx,n=this.get_slide_elm_by_idx(s);n&&(n.id=_,n.innerHTML="",function(t,e,i){googletag.cmd.push(function(){googletag.defineSlot(t,[e],i).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.enableServices()})}(e,i,_),function(t){googletag.cmd.push(function(){googletag.display(t)})}(_))}}},ENGAGEYA.prototype.run_yandex_tag=function(){var t,e,i,_,s;if(97983!=this.widget_id||_ENG_is_yandex_tag_ran){if(110210==this.widget_id&&!_ENG_is_yandex_tag_ran){var n;_ENG_is_yandex_tag_ran=!0,(n=this.get_slide_elm_by_idx(5))&&(n.innerHTML='<div id="yandex_rtb_R-A-278832-1"></div>',function(t,e,i,_,s){t[i]=t[i]||[],t[i].push(function(){Ya.Context.AdvManager.render({blockId:"R-A-278832-1",renderTo:"yandex_rtb_R-A-278832-1",async:!0})}),s=e.getElementsByTagName("script")[0],(_=e.createElement("script")).type="text/javascript",_.src="//an.yandex.ru/system/context.js",_.async=!0,s.parentNode.insertBefore(_,s)}(window,window.document,"yandexContextAsyncCallbacks"))}}else _ENG_is_yandex_tag_ran=!0,(n=this.get_slide_elm_by_idx(3))&&(n.innerHTML='<div id="yandex_rtb_R-A-260176-1"></div>',t=window,e=window.document,t[i="yandexContextAsyncCallbacks"]=t[i]||[],t[i].push(function(){Ya.Context.AdvManager.render({blockId:"R-A-260176-1",renderTo:"yandex_rtb_R-A-260176-1",async:!0})}),s=e.getElementsByTagName("script")[0],(_=e.createElement("script")).type="text/javascript",_.src="//an.yandex.ru/system/context.js",_.async=!0,s.parentNode.insertBefore(_,s))},ENGAGEYA.prototype.run_posts_preview=function(){try{var t=document.referrer,e=[];if(__eng__ppids_brnd="",t&&-1!=t.indexOf("_eng_ppids")){var i=this.getQS(t);i&&i._eng_ppids&&(e=i._eng_ppids.split(","),__eng__ppids_brnd=i._eng_dname)}if(!e||0==e.length){var _=this.get_cookie("_eng_ppids");_&&(e=_.split(","));var s=this.get_cookie("_eng_dname");s&&(__eng__ppids_brnd=s)}e&&e.length>0&&this.get_posts_for_preview(e)}catch(t){}},ENGAGEYA.prototype.run_ext_video=function(t,e,i){this.is_run_ext_video_started=!0;var _=this;if(e=void 0===e?"":e,-1==(i=void 0===i?-1:i)&&this.data_json.widget&&this.data_json.widget.esaData&&(this.data_json.widget.esaData[this.externalAdditionalDataTypes.STREAM_RAIL]?(i=this.externalAdditionalDataTypes.STREAM_RAIL,e=this.data_json.widget.esaData[this.externalAdditionalDataTypes.STREAM_RAIL]):this.data_json.widget.esaData[this.externalAdditionalDataTypes.ANY_VIEW]&&(i=this.externalAdditionalDataTypes.ANY_VIEW,e=this.data_json.widget.esaData[this.externalAdditionalDataTypes.ANY_VIEW])),e&&-1!=i)if(this.set_ext_video_dims(),this.is_enough_space_for_ext_video())try{var s;this.set_ext_video_final_player_dims();try{s=JSON.parse(e)}catch(t){return console.log("ERROR:"),void console.log(t)}if(this.ext_video_options=s,!this.is_load_ext_video())return;this.is_ext_video_loaded=!0,this.ext_video_player_type=i;var n=this.jq(this.widget_wrapper_elm).find(".eng_branding,.eng_m_branding"),o=this.generate_ext_video_elm();n.length>0&&o&&(this.jq(o).insertBefore(n),i==this.externalAdditionalDataTypes.STREAM_RAIL?this.run_streamrail_video(s):i==this.externalAdditionalDataTypes.ANY_VIEW&&this.run_aniview_video(s))}catch(t){console.log("ERROR:"),console.log(t)}else{if(void 0===t&&(t=20),t<0)return;window.setTimeout(function(){_.run_ext_video(--t,e,i)},100)}},ENGAGEYA.prototype.run_aniview_video=function(t){this.populate_aniview_placeholders(t),this.run_aniview_ads(t)},ENGAGEYA.prototype.run_streamrail_video=function(t){this.populate_srail_placeholders(t),this.run_streamrail_ads(t)},ENGAGEYA.prototype.is_load_ext_video=function(){if(this.ext_video_options&&this.ext_video_options.pacingRatio){var t=1*this.ext_video_options.pacingRatio;if(Math.random()>t)return!1}return!this.is_widget_ext_video_already_loaded()},ENGAGEYA.prototype.is_widget_ext_video_already_loaded=function(){for(var t=0;t<_ENGAGEYA_WIDGETS.length;t++)if(_ENGAGEYA_WIDGETS[t].widget_id==this.widget_id&&_ENGAGEYA_WIDGETS[t].is_ext_video_loaded)return!0},ENGAGEYA.prototype.populate_aniview_placeholders=function(t){var e=this.jq("#"+this.get_ext_video_elm_id());t.height=e.height(),t.width=e.width(),t.position=this.get_ext_video_elm_id()},ENGAGEYA.prototype.populate_srail_placeholders=function(t){if(t&&t.macros)try{var e=this.jq("#"+this.get_ext_video_elm_id());t.macros.rand&&999==t.macros.rand&&(t.macros.rand=this.generate_random_number());var i=JSON.stringify(t.macros);i=(i=(i=(i=(i=(i=i.replace(this.place_holders.WIDTH,e.width())).replace(this.place_holders.HEIGHT,e.height())).replace(this.place_holders.DNT,document.location.hostname)).replace(this.place_holders.SUB_ID,this.widget_id)).replace(this.place_holders.PAGE_URL,this.get_page_url())).replace(this.place_holders.CACHE_BUSTER,this.generate_random_number()),t.macros=JSON.parse(i)}catch(t){console.log("ERROR:"),console.log(t)}},ENGAGEYA.prototype.is_enough_space_for_ext_video=function(){return this.ext_video_dims.height>=250&&this.ext_video_dims.width>=300},ENGAGEYA.prototype.set_ext_video_dims=function(){var t=this.jq(this.widget_wrapper_elm);if(t&&t.length>0){var e=t.find(".eng_asw,.eng_m_asw");e&&e.length>0&&(this.ext_video_dims.height=e.height(),this.ext_video_dims.width=e.width(),console.log("DIMS- Height: "+this.ext_video_dims.height+", Width: "+this.ext_video_dims.width))}},ENGAGEYA.prototype.set_ext_video_final_player_dims=function(){var t={width:this.ext_video_dims.width,height:Math.ceil(this.ext_video_dims.width/1.777777)};t.height>250?this.ext_video_dims.height>=t.height?this.ext_video_dims=t:this.ext_video_dims.width=Math.floor(1.777777*this.ext_video_dims.height):this.ext_video_dims={width:300,height:250}},ENGAGEYA.prototype.get_ext_video_elm_id=function(){return"eng_"+this.extVideoTypeNames[this.ext_video_player_type]+"_"+this.widget_id},ENGAGEYA.prototype.get_ext_video_wrapper_elm_id=function(){return"eng_w_"+this.extVideoTypeNames[this.ext_video_player_type]+"_"+this.widget_id},ENGAGEYA.prototype.run_aniview_ads=function(t){if(_ENG_is_av_started_loading)this.wait_for_aniview_init(t,20);else{_ENG_is_av_started_loading=!0;var e=this;!function(){var i=t;(new Image).src="https://track.aniview.com/track?pid="+i.publisherId+"&cid="+i.channelId+"&e=playerLoaded&cb="+Date.now();var _,s;_="https://player.aniview.com/script/6.1/aniview.js",(s=document.createElement("script")).src=_,s.onload=function(){e.init_aniview_player(i)},document.getElementsByTagName("head")[0].appendChild(s)}()}},ENGAGEYA.prototype.run_streamrail_ads=function(t){if(this.is_sr_blade=t&&t.playerId,_ENG_is_sr_started_loading)this.wait_for_srail_init(t,20);else{this.get_ext_video_elm_id();var e=this;_ENG_is_sr_started_loading=!0,window.srAsyncInit=function(){e.init_srail_player(t)};var i=this.is_sr_blade?"https://sdk.streamrail.com/blade/sr.bladex.js":"https://sdk.streamrail.com/player/sr.ads.js";!function(t,e,i,_){var s,n=t.getElementsByTagName(e)[0];t.getElementById(i)||((s=t.createElement(e)).id=i,s.src=_,n.parentNode.insertBefore(s,n))}(document,"script","streamrail-jssdk",i)}},ENGAGEYA.prototype.wait_for_aniview_init=function(t,e){if(console.log("retries: "+e),!(e<0)){var i=this;"undefined"==typeof avPlayer?window.setTimeout(function(){i.wait_for_aniview_init(t,--e)},100):i.init_aniview_player(t)}},ENGAGEYA.prototype.wait_for_srail_init=function(t,e){if(console.log("retries: "+e),!(e<0)){var i=this;"undefined"==typeof SR?window.setTimeout(function(){i.wait_for_srail_init(t,--e)},100):i.init_srail_player(t)}},ENGAGEYA.prototype.init_aniview_player=function(t){this.AVPlayer=new avPlayer(t),this.subscribe_avplayer_events(),this.AVPlayer.play()},ENGAGEYA.prototype.init_srail_player=function(t){var e=this.get_ext_video_elm_id();if(this.is_sr_blade){var i=this;SR(e,t).then(function(t){i.srPlayer=t,t.resize(i.ext_video_dims.width,i.ext_video_dims.height),i.subscribe_srplayer_events()})}else this.srPlayer=SR(e,t),this.subscribe_srplayer_events()},ENGAGEYA.prototype.subscribe_avplayer_events=function(){this.AVPlayer&&(this.attach_aniview_visibility_events(),this.attach_aniview_mouse_over_event(),this.attach_aniview_mouse_out_event())},ENGAGEYA.prototype.attach_aniview_visibility_events=function(){this.AVPlayer;var t=this;this.AVPlayer.onPlay=function(e){t.animate_show_ext_video_player()},this.AVPlayer.onPlay100=this.AVPlayer.onClose=function(e){t.animate_hide_ext_video_player()}},ENGAGEYA.prototype.subscribe_srplayer_events=function(){this.srPlayer&&(this.attach_srail_visibility_events(),this.attach_srail_mouse_over_event(),this.attach_srail_mouse_out_event())},ENGAGEYA.prototype.attach_srail_visibility_events=function(){var t=this.srPlayer,e=this;["AdImpression"].map(function(i){t.on(i,function(t){e.animate_show_ext_video_player()})}),["AdVideoComplete"].map(function(i){t.on(i,function(t){e.animate_hide_ext_video_player()})}),["AdVolumeChange"].map(function(e){t.on(e,function(t){})}),["stick"].map(function(i){t.on(i,function(t){var i=e.jq("#"+e.get_ext_video_elm_id());e.jq("#"+e.get_ext_video_wrapper_elm_id());i.css("z-index",999999999)})}),["unstick"].map(function(i){t.on(i,function(t){var i=e.jq("#"+e.get_ext_video_elm_id());e.jq("#"+e.get_ext_video_wrapper_elm_id());i.css("z-index",0)})})},ENGAGEYA.prototype.attach_aniview_mouse_over_event=function(){var t=this,e=this.ext_video_options;this.jq("#"+this.get_ext_video_elm_id()).mouseover(function(){e&&e.unmuteOnHover&&t.AVPlayer.unmute()})},ENGAGEYA.prototype.attach_srail_mouse_over_event=function(){var t=this,e=this.ext_video_options;this.jq("#"+this.get_ext_video_elm_id()).mouseover(function(){e&&e.unmuteOnHover&&(t.is_sr_blade?t.srPlayer.muted=!1:(t.srPlayer.muted(!1),t.srPlayer.volume(1)))})},ENGAGEYA.prototype.attach_aniview_mouse_out_event=function(){var t=this,e=this.ext_video_options;this.jq("#"+this.get_ext_video_elm_id()).mouseout(function(){!t.AVPlayer.muted&&e.unmuteOnHover&&t.AVPlayer.mute()})},ENGAGEYA.prototype.attach_srail_mouse_out_event=function(){var t=this,e=this.ext_video_options;this.jq("#"+this.get_ext_video_elm_id()).mouseout(function(){e.unmuteOnHover&&(t.is_sr_blade&&!t.srPlayer.muted?t.srPlayer.muted=!0:t.is_sr_blade||t.srPlayer.muted()||t.srPlayer.muted(!0))})},ENGAGEYA.prototype.animate_show_ext_video_player=function(){var t=this.jq("#"+this.get_ext_video_elm_id()),e=this.jq("#"+this.get_ext_video_wrapper_elm_id());t.css("z-index",0),e.css("border-bottom","1px solid #ccc"),e.css("paddingTop","10px"),e.css("paddingBottom","10px"),t.animate({marginTop:"0px",opacity:1},1e3)},ENGAGEYA.prototype.animate_hide_ext_video_player=function(){var t=this.jq("#"+this.get_ext_video_elm_id()),e=this.jq("#"+this.get_ext_video_wrapper_elm_id());t.animate({marginTop:"-"+this.ext_video_dims.height+"px",opacity:0},500,function(){e.hide()})},ENGAGEYA.prototype.generate_ext_video_elm=function(){var t=this.extVideoTypeNames[this.ext_video_player_type],e=document.createElement("div"),i="eng_"+t+"_"+this.widget_id;e.id=i,e.className="eng_"+t;var _=document.createElement("style");_.type="text/css";var s="#"+i+"{width:"+this.ext_video_dims.width+"px;height:"+this.ext_video_dims.height+"px;margin-top:-"+this.ext_video_dims.height+"px;}";_.styleSheet?_.styleSheet.cssText=s:_.appendChild(document.createTextNode(s));var n=document.createElement("div");return n.id="eng_w_"+t+"_"+this.widget_id,n.className="eng_w_"+t,n.appendChild(e),n.appendChild(_),n},ENGAGEYA.prototype.run_widget_alignments=function(){this.align_widget_text_height(),this.align_widget_dims()},ENGAGEYA.prototype.align_widget_text_height=function(){if(this.is_align_widget_text_height){var t=-1,e=this.jq(this.widget_wrapper_elm).find(".eng_inner .eng_widget_in,.eng_ads .eng_widget_in"),i=this;this.jq.each(e,function(e,_){i.jq(_).height()&&(t=Math.max(i.jq(_).height(),t))}),t>0&&this.jq(this.widget_wrapper_elm).find(".eng_inner .eng_widget_in,.eng_ads .eng_widget_in").css("min-height",t)}},ENGAGEYA.prototype.align_widget_dims=function(t){try{if(void 0===t&&(t=this.num_of_align_dims_retries),t<0)return;for(var e=!0,i=0;i<this.visible_posts_and_types.length;i++){var _=this.visible_posts_and_types[i];if(_&&_.pi&&this.in_array(_.pi,this.align_dims_post_ids)){e=!0;break}}if(e){var s=-1,n=-1,o=this.jq(this.widget_wrapper_elm).find(".eng_inner .eng_widget_img,.eng_inner .eng_m_widget_img"),a=this;o.length>0?(s=this.jq(o[0]).height(),n=this.jq(o[0]).width()):(o=this.jq(this.widget_wrapper_elm).find(".eng_widget_img,.eng_m_widget_img"),this.jq.each(o,function(t,e){a.jq(e).height()<300&&(s=Math.max(a.jq(e).height(),s),n=Math.max(a.jq(e).width(),n))})),s>50?(o=this.jq(this.widget_wrapper_elm).find(".eng_widget_img,.eng_m_widget_img"),this.widget_slide_dims_for_prebid={width:n,height:s},this.jq.each(o,function(t,e){var i=a.jq(e);i.height()!=s&&(i.height(s),a.is_hard_align_dims&&(i.css("cssText","height:"+s+"px !important;display:inline-block;"),i.width("auto"),i.parent().css("text-align","center"),i.css("margin","0 auto")))})):window.setTimeout(function(){a.align_widget_dims(--t)},100)}}catch(t){console.log("ERROR - widget align dims:"),console.log(t)}},ENGAGEYA.prototype.get_posts_for_preview=function(t){var e=this.shuffle_array(t);if(this.total_slides){window[this.get_post_cb]=function(t){var e=_ENGAGEYA_WIDGETS[0],i=e.jq(".eng_widget_href:not(.eng_test_ppid),.eng_m_widget_href:not(.eng_test_ppid)");if(i&&i.length>0){var _=e.jq(i[0]),s=_.find(".eng_widget_img, eng_m_widget_img"),n=_.find(".eng_widget_in,.eng_m_widget_in"),o=_.find(".eng_m_widget_in"),a=_.find(".eng_widget_is,.eng_m_widget_is"),r=_.find(".eng_widget_dn,.eng_m_widget_dn"),d=s.attr("src").match(".*_([0-9]*)..*");if(d&&d[1]){var l=d[1];_.attr("href",t.url),_.attr("onmousedown",""),a.text(t.title);var p=t.thumbnailPath.replace(/(.*_)([0-9]*)(\..*)/,"$1"+l+"$3");s.attr("src",p),_.addClass("eng_test_ppid");var h=decodeURIComponent(__eng__ppids_brnd);if(r&&r.length>0)r.text(h);else{var g=o&&o.length>0?"eng_m_widget_dn":"eng_widget_dn";n.append('<span class="'+g+'">'+h+"</span>")}}}console.log(t)};for(var i=Math.min(e.length,this.total_slides),_=0;_<i;_++){var s=e[_];this.append_script_to_head("https://recs.engageya.com/rec-api/getPost.json?cb="+this.get_post_cb+"&PostId="+s,"")}}},ENGAGEYA.prototype.shuffle_array=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),_=t[e];t[e]=t[i],t[i]=_}return t},ENGAGEYA.prototype.get_cookie=function(t){var e=document.cookie.match(RegExp("(?:^|;\\s*)"+t.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")+"=([^;]*)"));return e?e[1]:null},ENGAGEYA.prototype.get_slide_elm_by_idx=function(t){return document.getElementById("eng_sw_"+t+"_"+this.widget_id)||document.getElementById("eng_m_sw_"+t+"_"+this.widget_id)},ENGAGEYA.prototype.widget_ready=function(){this.widget_ready_cb&&this.widget_ready_cb(),this.amp_widget_cb&&this.amp_widget_cb(this)},ENGAGEYA.prototype.isShouldBeRTL=function(t){try{-1!=t.indexOf("&#")&&(t=this.decode_html(t));if(!t.match(/[\u0590-\u083F]|[\u08A0-\u08FF]|[\uFB1D-\uFDFF]|[\uFE70-\uFEFF]/gm))return!1}catch(e){console.log("ERROR: text direction - "+t)}return!0},ENGAGEYA.prototype.decode_html=function(t){try{return this.jq("<textarea/>").html(t).text()}catch(e){return t}},ENGAGEYA.prototype.external_is_amp_elm_visible=function(t){var e=t;try{return e.height>100}catch(t){return!1}},ENGAGEYA.prototype.is_elm_visible=function(t){var e=t.getBoundingClientRect();try{return e.bottom>100&&e.right>0&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.top<(window.innerHeight||document.documentElement.clientHeight)-100}catch(t){return!1}},ENGAGEYA.prototype.is_premium=function(){try{var t=this.publisher_id,e=this.premium_pub_ids;return!(!t||!this.in_array(t,e))}catch(t){return!1}},ENGAGEYA.prototype.populate_widget_data=function(t){try{var e=t.widget,i=e.layoutTypeId;this.widget_img_size=26==i?4:2,this.vertical_widget_img_size=null;var _=this.get_add_data("jsvls");_&&_.vcis&&this.is_mobile_conditions_satisfied()&&(this.vertical_widget_img_size=_.vcis),this.is_order_by_post_id&&this.sort_results_by_post_id(),3==e.returnRecsTypeId&&(this.is_super_native=!0)}catch(t){console.log("ERROR - widget data:"),console.log(t)}},ENGAGEYA.prototype.sort_results_by_post_id=function(){var t=this.data_json.srcWebsiteId,e=this.jq.extend({},this.data_json.recs),i=[];for(var _ in e)e[_].partner_id==t&&i.push(e[_]);i.sort(function(t,e){return e.postId-t.postId});for(var s=0;s<this.data_json.recs.length;s++){this.data_json.recs[s].partner_id==t&&i[s]&&(this.data_json.recs[s]=i[s])}},ENGAGEYA.prototype.reposition_widget=function(){if(this.widget_wrapper_positioning_obj){var t=this.widget_wrapper_positioning_obj.elm,e=this.widget_wrapper_positioning_obj.type;if(this.jq(t).length>0){var i=this.jq(this.widget_wrapper_elm).detach();switch(e){case 0:i.appendTo(t);break;case 1:i.prependTo(t);break;case 2:i.insertAfter(t);break;case 3:i.insertBefore(t);break;default:i.appendTo(t)}this.width=null,this.calculate_widget_wrapper_dims()}}},ENGAGEYA.prototype.populate_add_data=function(t){try{var e=JSON.parse(t.widget.replace(/\[rid\]/g,this.random_id)),i=JSON.parse(t.network.replace(/\[rid\]/g,this.random_id));!e.brnd&&i&&i.brnd&&(e.brnd=i.brnd),this.widget_add_data=e;var _=this.widget_add_data.jcss||{},s=this.widget_add_data.jsvls||{},n=this.widget_add_data.gtags,o=this.widget_add_data.yndx;this.is_show_exclude_box=s.issexbox||!1,this.slide_height=_.sh||(this.is_video_widget?150:115),this.slide_width=_.sw||(this.is_video_widget?200:140),this.slide_horz_margin=_.shm||10,this.widget_lpadding=_.wlp||(this.is_video_widget?15:0),this.widget_rpadding=_.wrp||(this.is_video_widget?15:0),this.widget_rmargin=_.wrm||(this.is_video_widget?2:0),this.widget_lmargin=_.wlm||(this.is_video_widget?2:0),this.slides_wrapper_lpadding=_.swlp||0,this.slides_wrapper_rpadding=_.swrp||0,this.slides_wrapper_lmargin=_.swlm||0,this.slides_wrapper_rmargin=_.swrm||0,this.slide_bpadding=_.sbp||(this.is_video_widget?15:5),this.slide_tpadding=_.stp||(this.is_video_widget?15:5),this.widget_txt_direction=_.wtdir||null,this.widget_img_size=s.cis||2,this.num_of_slides_a_row=s.spr||(this.is_video_widget?3:null),this.num_of_mobile_slides_a_row=s.mspr||(this.is_video_widget?3:null),this.is_cancel_click_bubble=s.iccb||!1,this.max_width_for_mobile=s.mwfm||420,this.is_vertical_mobile_widget=void 0===s.ivmw||0!=s.ivmw,this.is_force_vertical_layout=s.ifvl||!1,this.num_of_mobile_slides=s.noms||6,this.is_default_brand=!this.website_id||this.website_id<127432?s.isdb:void 0===s.isdb||0!=s.isdb,this.title_elm_type=s.ttlelm?s.ttlelm:"div",this.width=s.rplcwidth&&s.rplcwidthval&&s.rplcwidth==Math.floor(this.width)?s.rplcwidthval:this.width,this.widget_wrapper_positioning_obj=s.wwpo?s.wwpo:null,this.max_width_for_tablet_cls=s.mwftc||null,this.image_size_for_rec_num=s.cisfrm||null,this.is_order_by_post_id=s.iobpi||null,this.custom_default_image=s.cdi||null,this.is_description_span=s.idesc||null,this.is_links_open_new_window=s.inw||null,this.max_description_chars=s.mdc||1e3,this.max_mobile_description_chars=s.mmdc||1e3,this.max_abstract_chars=s.mabsc||500,this.max_mobile_abstract_chars=s.mmabsc||500,this.max_title_chars=s.mtc||100,this.max_mobile_title_chars=s.mmtc||150,this.postfix_for_cutted_description=null!=s.pfcd?s.pfcd:"...",this.postfix_for_cutted_title=null!=s.pfct?s.pfct:"...",this.postfix_for_cutted_abstract=null!=s.pfcabs?s.pfcabs:"...",this.is_meta_tags_span=s.imtag||null,this.is_default_images=!s.idi,this.is_align_widget_text_height=void 0!==s.iawth&&s.iawth,this.google_tags=n,this.yandex_tag=o,this.is_hard_align_dims=s.ihad||null,this.widget_elm_language=s.elng||null}catch(t){console.log("ERROR - additional data:"),console.log(t)}},ENGAGEYA.prototype.get_add_data=function(t){return this.widget_add_data&&this.widget_add_data[t]?this.widget_add_data[t]:null},ENGAGEYA.prototype.set_add_data=function(t,e){this.widget_add_data[t]=e},ENGAGEYA.prototype.add_player_wmode=function(){},ENGAGEYA.prototype.get_page_url=function(){if(this.input_url)return this.input_url;var t=document.location.href;return this.is_in_iframe()&&(t=document.referrer?document.referrer:t),t=encodeURIComponent(t)},ENGAGEYA.prototype.get_total_slides=function(t,e){for(var i=this.num_of_slides_a_row*t;i>e&&t>1;)t--,i=this.num_of_slides_a_row*t;return this.is_mobile_conditions_satisfied()&&(i=this.num_of_mobile_slides?this.num_of_mobile_slides:i),i=i>e?e:i},ENGAGEYA.prototype.get_script=function(t,e){this.jq.ajax({type:"GET",url:t,success:e,scriptCharset:"utf-8",dataType:"script",cache:!0})},ENGAGEYA.prototype.logger=function(t,e){this.log_printout&&(this.log_printout==this.log_types.ALL||this.in_array(t,this.log_printout))&&console.log(t+": "+e)},ENGAGEYA.prototype.generate_img_pixel=function(t){var e=document.createElement("img");e.width=1,e.height=1,e.src=t,this.widget_wrapper_elm.appendChild(e)},ENGAGEYA.prototype.is_mobile_conditions_satisfied=function(){return!!(!this.is_video_widget&&this.is_mobile()&&this.width<this.max_width_for_mobile)},ENGAGEYA.prototype.build_layout=function(){1==this.is_vertical_mobile_widget&&this.is_mobile_conditions_satisfied()||this.is_force_vertical_layout?this.build_vertical_layout():this.build_horizontal_layout()},ENGAGEYA.prototype.build_vertical_layout=function(){var t=this.data_json,e=Math.min(this.num_of_mobile_slides,t.recs.length);this.total_slides=e;var i=this.get_recs_holder_elm(),_="eng_m_top_ww_widget_"+this.random_id,s=this.get_tablet_cls(),n=this.get_mobile_device_OS(),o='<div class="eng_m_top_ww_widget'+(n?"_"+n:"")+s+'" id="'+_+'"><div class="eng_m_ww_widget" id="eng_m_ww_widget_'+this.widget_id+'">';this.populate_widget_directions();var a=this.get_default_css("MOBILE_VERTICAL",_);o+="<"+this.title_elm_type+' class="eng_m_ww_title" id="eng_m_ww_title_'+this.random_id+'"><span class="eng_m_ww_ttl_span1">'+t.widget.headerText+'</span><span class="eng_m_ww_ttl_span2"></span></'+this.title_elm_type+">"+('<div class="eng_m_asw" id="eng_m_asw_'+this.random_id+'">');for(var r=t.recs,d="",l=0;l<e;l++){var p=null;if(this.is_super_native){if(!r[l].sNAD)continue;try{p=JSON.parse(r[l].sNAD),r[l].sNPData=p}catch(t){console.log("ERROR"),console.log(t);continue}}var h=r[l].postId,g=r[l].recTypeDB,c=this.get_display_name(r[l],t.srcWebsiteId),u=this.get_link_name(r[l]);this.visible_posts_and_types.push({pi:h,pt:g});var m=this.is_video_post(r[l])?" eng_m_widget_vsw":"",w='<div id="eng_m_sw_'+l+"_"+this.widget_id+'" class="eng_m_widget_sw'+m+'">',v=this.get_rec_type(r[l]),f=this.get_thumb(t,r[l].thumbnail_path,r[l].category_id,l+1),E=f?"":" eng_m_no_img",y="";(f||this.is_default_images)&&(y='<div id="eng_m_img_w_'+l+"_"+this.widget_id+'" class="eng_m_widget_img_w"><img id="eng_m_img_'+l+"_"+this.widget_id+'" class="eng_m_widget_img" src="'+f+'" data-pin-no-hover="true" /></div>');var A='<a id="eng_m_href_'+l+"_"+this.widget_id+'" class="eng_m_widget_href '+v+E+'" ',b=this.is_video_widget?this.shorten(r[l].title,50):this.get_title(r[l]),G=this.get_description(r[l]),x=this.get_abstract(r[l]),N=this.get_meta_tag_obj(r[l]),j="";"rtl"!=this.widget_txt_direction||this.isShouldBeRTL(b)||(j='style="direction:ltr;text-align:left;"');var I='<div id="eng_m_in_'+l+"_"+this.widget_id+'" class="eng_m_widget_in" '+j+">",T='<span id="eng_m_is_'+l+"_"+this.widget_id+'" class="eng_m_widget_is">',Y=this.is_description_span||this.is_super_native&&G?'<span id="eng_m_isd_'+l+"_"+this.widget_id+'" class="eng_m_widget_isd">'+G+"</span>":"",R=x?'<h2 id="eng_m_isabs_'+l+"_"+this.widget_id+'" class="eng_m_widget_isabs">'+x+"</h2>":"",D=this.is_meta_tags_span&&N.label?'<span id="eng_m_mtg_'+l+"_"+this.widget_id+'" class="eng_m_widget_mtg mtg_m_'+N.id+'">'+N.label+"</span>":"",O=c?'<span id="eng_m_dn_'+l+"_"+this.widget_id+'" class="eng_m_widget_dn">':"",k=u?'<span id="eng_m_lt_'+l+"_"+this.widget_id+'" class="eng_m_widget_lt">':"",S=this.get_ad_brand(r[l]);d+=this.get_impression_pixel_imgs_and_populate_other_pixel_types(t.recs[l].impressionUrls),w+=(A+=this.get_click_defs(r[l],t.srcWebsiteId))+y+I+(T+=b+"</span>")+R+D+Y+(O+=c?c+"</span>":"")+(k+=u?u+"</span>":"")+S,o+=w+="</div></a></div>",o+=this.add_row_if_required(l+1,this.num_of_slides_a_row,e)}var L=this.get_widget_branding();o+='</div><div id="eng_m_brnd_'+this.widget_id+'" class="eng_m_branding">'+L+"</div></div>",o+=d+"</div>";var P=this.get_add_data("css")||"";widgetCss="<style>"+a+P+"</style>",i.html(widgetCss+o)},ENGAGEYA.prototype.build_horizontal_layout=function(){var t=this.data_json;this.calc_slides_dims();var e=t.widget.displayRows,i=this.get_total_slides(e,t.recs.length);this.total_slides=i;var _=this.get_recs_holder_elm(),s="eng_"+(this.is_mobile_conditions_satisfied()?"m_":"")+"top_ww_widget_"+this.random_id,n='<div class="eng_top_ww_widget'+this.get_tablet_cls()+'" id="'+s+'"><div class="eng_ww_widget" id="eng_ww_widget_'+this.widget_id+'">';this.populate_widget_directions();var o=this.get_default_css("DESKTOP_VIDEO",s),a=this.get_default_css("DESKTOP_NON_VIDEO",s),r=this.get_default_css("DESKTOP",s);r+=this.is_video_widget?o:a,n+="<"+this.title_elm_type+' class="eng_ww_title" id="eng_ww_title_'+this.random_id+'"><span class="eng_ww_ttl_span1">'+t.widget.headerText+'</span><span class="eng_ww_ttl_span2"></span></'+this.title_elm_type+">"+(this.is_video_widget?'<div class="eng_ww_close" id="eng_ww_close_'+this.random_id+'"><span>&times</span></div>':"")+('<div class="eng_asw" id="eng_asw_'+this.random_id+'">');for(var d=t.recs,l="",p=0;p<i;p++){var h=null;if(this.is_super_native){if(!d[p].sNAD)continue;try{h=JSON.parse(d[p].sNAD),d[p].sNPData=h}catch(t){console.log("ERROR"),console.log(t);continue}}var g=d[p].postId,c=d[p].recTypeDB,u=this.get_link_name(d[p]);this.visible_posts_and_types.push({pi:g,pt:c}),this.is_start_of_row(p,this.num_of_slides_a_row)&&(r+="#eng_sw_"+p+"_"+this.widget_id+"{margin-"+this.widget_direction+":0px !important;}");var m=this.is_video_post(d[p])?" eng_widget_vsw":"",w='<div id="eng_sw_'+p+"_"+this.widget_id+'" class="eng_widget_sw'+m+'">',v=this.get_rec_type(d[p]),f=this.get_thumb(t,d[p].thumbnail_path,d[p].category_id,p+1),E=f?"":" eng_no_img",y="",A=this.get_exclude_posts_box_elms(d[p]),b=A?'<span id="eng_user_exclude_btn'+p+"_"+this.widget_id+'" class="eng_user_exclude_btn"></span>':"",G=this.get_title(d[p]);(f||this.is_default_images)&&(y='<div id="eng_img_w_'+p+"_"+this.widget_id+'" class="eng_widget_img_w"><img id="eng_img_'+p+"_"+this.widget_id+'" class="eng_widget_img" alt="'+G+'" src="'+f+'" data-pin-no-hover="true" />'+b+"</div>");var x='<a id="eng_href_'+p+"_"+this.widget_id+'" class="eng_widget_href '+v+E+'" ',N=this.get_description(d[p]),j=this.get_abstract(d[p]),I=this.get_meta_tag_obj(d[p]),T="";"rtl"!=this.widget_txt_direction||this.isShouldBeRTL(G)||(T='style="direction:ltr;text-align:left;"');var Y='<div id="eng_in_'+p+"_"+this.widget_id+'" class="eng_widget_in" '+T+">",R='<span id="eng_is_'+p+"_"+this.widget_id+'" class="eng_widget_is">',D=this.is_description_span||this.is_super_native&&N?'<span id="eng_isd_'+p+"_"+this.widget_id+'" class="eng_widget_isd">'+N+"</span>":"",O=j?'<h2 id="eng_isabs_'+p+"_"+this.widget_id+'" class="eng_widget_isabs">'+j+"</h2>":"",k=this.is_meta_tags_span&&I.label?'<span id="eng_mtg_'+p+"_"+this.widget_id+'" class="eng_widget_mtg mtg_'+I.id+'">'+I.label+"</span>":"",S=this.get_display_name(d[p],t.srcWebsiteId),L=S?'<span id="eng_dn_'+p+"_"+this.widget_id+'" class="eng_widget_dn">':"",P=u?'<span id="eng_m_lt_'+p+"_"+this.widget_id+'" class="eng_m_widget_lt">':"",C=this.get_ad_brand(d[p]);if(l+=this.get_impression_pixel_imgs_and_populate_other_pixel_types(t.recs[p].impressionUrls),x+=this.get_click_defs(d[p],t.srcWebsiteId),R+=G+"</span>",L+=S?S+"</span>":"",P+=u?u+"</span>":"",this.is_super_native)w+=A+x+('<h1 id="eng_snttl_'+p+"_"+this.widget_id+'" class="eng_widget_snttl" '+T+">"+R+"</h1>")+O+y+Y+k+D+L+P+C;else w+=A+x+y+Y+R+k+D+L+P;n+=w+="</div></a></div>",n+=this.add_row_if_required(p+1,this.num_of_slides_a_row,i)}var q=this.get_widget_branding();n+='</div><div id="eng_brnd_'+this.widget_id+'" class="eng_branding">'+q+"</div></div>",n+=l+"</div>";var M=this.get_add_data("css")||"";widgetCss="<style>"+r+M+"</style>",_.html(widgetCss+n)},ENGAGEYA.prototype.get_exclude_posts_box_elms=function(t){if(!this.is_show_exclude_box&&(1!=this.data_json.ltid||"eng_inner"!=this.get_rec_type(t)))return"";var e='<div class="eng_excludebox_wrapper" data-id="'+t.postId+'">'+'<div class="eng_excludebox_title">Remove</div><div class="eng_excludebox_question_main"><div class="eng_excludebox_question"><div class="eng_excludebox_question_title">Tell us why?</div>';return e+=this.get_exclude_reasons_elms(),e+="</div></div></div>"},ENGAGEYA.prototype.get_exclude_reasons_elms=function(){for(var t="",e=0;e<this.exclude_posts_reasons_arr.length;e++){var i=this.exclude_posts_reasons_arr[e];t+='<label><input type="radio" name="excludeReason" class="eng_exclude_reason" value="'+i.val+'" onchange="this.checked = true;">'+i.title+"</label>",t+=e+1<this.exclude_posts_reasons_arr.length?"<br>":""}return t},ENGAGEYA.prototype.get_default_css=function(t,e){var i="",_=this.get_add_data("vpost"),s=_&&_.pimg?_.pimg:"//"+this.default_video_post_btn;switch(t){case"DESKTOP":i="#"+e+" .eng_top_ww_widget{}#"+e+" .eng_ww_widget{display:inline-block;direction:"+this.widget_txt_direction+";position:relative;margin-bottom:2px;margin-left:"+this.widget_lmargin+"px;margin-right:"+this.widget_rmargin+"px;text-align:center;padding-left:"+this.widget_lpadding+"px;padding-right:"+this.widget_rpadding+"px;padding-top:"+this.slide_tpadding+"px;padding-bottom:"+this.slide_bpadding+"px;}#"+e+" .eng_ww_title{text-align:"+this.widget_direction+";}#"+e+" .eng_ww_close{position:absolute;top:8px;"+this.widget_op_direction+":8px;cursor:pointer;font-size:22px;}#"+e+" .eng_asw{display:block;margin-left:"+this.slides_wrapper_lmargin+"px;margin-right:"+this.slides_wrapper_rmargin+"px;padding-left:"+this.slides_wrapper_lpadding+"px;padding-right:"+this.slides_wrapper_rpadding+"px;z-index:2;}#"+e+" .eng_widget_sw{width:"+this.slide_width+"px;text-align:"+this.widget_direction+";position:relative;display:inline-block;margin-"+this.widget_direction+":"+this.slide_horz_margin+"px;z-index:2;}#"+e+" .eng_widget_in{width:100%;}#"+e+" .eng_widget_is{}#"+e+" .eng_widget_dn{font-size:10px;text-decoration:none !important;display:inline-block;width:100%;}#"+e+" .eng_widget_img{width:100%;height:auto;border-radius:inherit;margin-bottom:5px;}#"+e+" .eng_widget_href{border-radius:inherit;}#"+e+" .eng_rows_seperator{height:10px;}#"+e+" .eng_branding{text-align:"+this.widget_op_direction+";margin:8px 0px 0px 0px;}#"+e+" .eng_branding a{color:#BBB;font-size:12px;font-family:arial;}#"+e+" .eng_user_exclude_btn{display:none;}#"+e+" .eng_widget_sw:hover .eng_user_exclude_btn{display:block;background:url(//widget.engageya.com/img/X4.jpg) no-repeat scroll 0 0 transparent;width:14px;height:14px;position:absolute;right:2px;top:2px;z-index:9000;}#"+e+" .eng_excludebox_question_main{background:#fff!important;font-family:Arial, Helvetica, sans-serif!important;font-weight:normal!important;font-size:12px!important;color:#000000!important;padding-bottom:5px!important;padding-top:5px!important;padding-right:7px!important;padding-left:12px!important;}#"+e+" .eng_excludebox_title{text-align:center;padding:8px 14px!important;font-weight:bold!important;border-bottom:1px solid #F8A649!important;font-family:Arial, Helvetica, sans-serif;font-size:12px!important;background:#F8A649!important;color:#fff!important;}#"+e+" .eng_excludebox_question_title{font-family:Arial, Helvetica, sans-serif!important;font-weight:normal!important;font-size:12px!important;color:#000000!important;margin-bottom:5px!important;}#"+e+" .eng_excludebox_question{font-family:Arial, Helvetica, sans-serif!important;font-weight:normal!important;font-size:12px!important;color:#000000!important;}#"+e+" .eng_excludebox_wrapper{z-index:1;display:none;background:#fff;position:absolute;top:15px;right:5px;height:160px;width:135px;}#"+e+" .eng_exclude_reason{vertical-align:top;}#"+e+" .eng_user_undo_btn{background:none!important;color:#000!important;font-family:Arial,Helvetica,sans-serif!important;font-size:10px!important;line-height:14px!important;font-weight:400!important;text-decoration:underline!important;position:absolute!important;right:15px!important;top:1px!important;}#"+e+" .eng_aniview,#"+e+" .eng_srail{position:relative;bottom:0px;left:0;right:0;opacity:0;z-index:-1;box-sizing:content-box;margin-left:auto;margin-right:auto;}#"+e+" .eng_w_aniview,#"+e+" .eng_w_srail{border-color:#ccc;box-sizing: content-box;}";break;case"DESKTOP_NON_VIDEO":i="#"+e+" .eng_ww_widget{color:#000;}#"+e+" .eng_widget_sw{vertical-align:top;margin-bottom:10px}#"+e+" .eng_widget_vsw .eng_widget_img_w::after{content:'';background-image: url("+s+");position:absolute;left:40%;top:42%;width:35px;height:26px;z-index:2;}#"+e+" .eng_widget_href{position:relative;display:block !important;visibility:visible !important;}#"+e+" .eng_widget_in{width:100%;line-height:1.4;}#"+e+" .eng_widget_dn{color:#CDCDCD;}#"+e+" .eng_ww_title{padding:0px;margin:0px 0px 5px 0px;}#"+e+" .eng_ww_ttl_span1{display:block;padding:5px 0px;float:none !important;}#"+e+" .eng_widget_img_w{position:relative;}#"+e+" .eng_widget_img{margin-bottom:5px;display:block;}";break;case"DESKTOP_VIDEO":i="#"+e+" .eng_ww_widget{background-color:rgba(1, 1, 1, 0.9);color:#FFF;}#"+e+" .eng_widget_in{position:absolute;background-color:rgba(36,36,36,0.8);color:#FFF;font-size:12px;line-height:normal !important;bottom:0px;}#"+e+" .eng_widget_sw{height:"+this.slide_height+"px;}#"+e+" .eng_widget_dn{}#"+e+" .eng_widget_is{display:block;padding: 2px 5px 2px 5px;}#"+e+" .eng_ww_title{padding:0px 0px 5px 0px;font-size:15px;}";break;case"MOBILE_VERTICAL":i="#"+e+" .eng_m_top_ww_widget{}#"+e+" .eng_m_ww_widget{display:inline-block;direction:"+this.widget_txt_direction+";position:relative;margin-bottom:2px;margin-left:"+this.widget_lmargin+"px;margin-right:"+this.widget_rmargin+"px;text-align:center;padding-left:"+this.widget_lpadding+"px;padding-right:"+this.widget_rpadding+"px;padding-top:"+this.slide_tpadding+"px;padding-bottom:"+this.slide_bpadding+"px;}#"+e+" .eng_m_ww_title{padding:0px 0px 5px 0px;text-align:"+this.widget_direction+";}#"+e+" .eng_m_asw{position:relative;display:block;margin-left:"+this.slides_wrapper_lmargin+"px;margin-right:"+this.slides_wrapper_rmargin+"px;padding-left:"+this.slides_wrapper_lpadding+"px;padding-right:"+this.slides_wrapper_rpadding+"px;z-index:2;}#"+e+" .eng_m_widget_sw{width:100%;padding-bottom:8px;z-index:2;}#"+e+" .eng_m_widget_vsw .eng_m_widget_img_w::after{content:'';background-image: url("+s+");position:absolute;"+this.widget_direction+":37%;top:42%;width:35px;height:26px;z-index:2;}#"+e+" .eng_m_widget_in{width:57%;display:inline-block;vertical-align:top;text-align:"+this.widget_direction+";}#"+e+" .eng_m_widget_is{line-height:1.4;}#"+e+" .eng_m_widget_dn{font-size:10px;padding:5px 5px 3px 0px;color:#999999;display:block;}#"+e+" .eng_m_widget_img_w{width:40%;margin-"+this.widget_op_direction+":3%;display:inline-block;position:relative;}#"+e+" .eng_m_widget_img{width:100%;}#"+e+" .eng_m_ww_ttl_span1{display:block;padding:5px 0px;float:none !important;}#"+e+" .eng_m_widget_href{border-radius:inherit;display:block !important;visibility:visible !important;}#"+e+" .eng_m_rows_seperator{height:8px;}#"+e+" .eng_m_branding{text-align:"+this.widget_op_direction+";margin:8px 0px 0px 0px;}#"+e+" .eng_aniview,#"+e+" .eng_srail{position:relative;bottom:0px;left:0;right:0;opacity:0;z-index:-1;box-sizing:content-box;margin-left:auto;margin-right:auto;}#"+e+" .eng_w_aniview,#"+e+" .eng_w_srail{border-color:#ccc;box-sizing: content-box;}#"+e+" .eng_m_branding a{color:#BBB;font-size:12px;font-family:arial;}";break;case"VIDEO_ONLY":i="#"+this.widget_wrapper_elm_id+"{visibility:hidden;}#"+e+" .eng_ww_widget{margin:0;padding:0;}#"+e+" .eng_widget_sw{margin:0px;}#"+e+" .eng_widget_in{display:none;}#"+e+" .eng_ww_close{padding:0px 7px;z-index:11111;background:#000;"+this.widget_op_direction+":0px;top:initial;color:#FFF;}#"+e+" .eng_ww_title{display:none;}"}return i},ENGAGEYA.prototype.get_description=function(t){if(t){var e=t.description;if(this.is_super_native){if(!t.sNPData||!t.sNPData.desc)return;e=t.sNPData.desc}try{var i;i=this.is_mobile_conditions_satisfied()?this.max_mobile_description_chars:this.max_description_chars,e&&e.length>i&&(e=e.replace("...",""),e=this.shorten_string(e,i),e+=this.postfix_for_cutted_description)}catch(t){console.log("ERROR"),console.log(t)}return e}},ENGAGEYA.prototype.get_abstract=function(t){if(t){var e="";if(this.is_super_native){if(!t.sNPData||!t.sNPData.abs)return;e=t.sNPData.abs;try{var i;i=this.is_mobile_conditions_satisfied()?this.max_mobile_abstract_chars:this.max_abstract_chars,e&&e.length>i&&(e=e.replace("...",""),e=this.shorten_string(e,i),e+=this.postfix_for_cutted_abstract)}catch(t){console.log("ERROR"),console.log(t)}}return e}},ENGAGEYA.prototype.get_ad_brand=function(t){if(!t)return"";var e="";if(this.is_super_native){var i="";try{if(t.sNPData&&t.sNPData.adbrnd&&(i=t.sNPData.adbrnd),!i)return"";var _=!1;i.href&&(_=!0,e+='<a id="eng_href_adbrnd_'+this.widget_id+'" class="eng_href_adbrnd" href="'+i.href+'" title="'+i.ttl+'" target=_blank">'),e+='<span id="eng_span_adbrnd_'+this.widget_id+'" class="eng_span_adbrnd">'+i.ttl,i.img&&(e+='<img src="'+i.img+'"/>'),e+="</span>",_&&(e+="</a>")}catch(t){console.log("ERROR"),console.log(t)}}return e},ENGAGEYA.prototype.get_title=function(t){if(t){var e=t.title;try{var i;i=this.is_mobile_conditions_satisfied()?this.max_mobile_title_chars:this.max_title_chars,e&&e.length>i&&(e=this.shorten_string(e,i),e+=this.postfix_for_cutted_title)}catch(t){console.log("ERROR"),console.log(t)}return e}},ENGAGEYA.prototype.shorten_string=function(t,e){var i=(t=(t=t.substring(0,e)).trim()).lastIndexOf(" "),_=(t=t.substring(0,i)).charAt(t.length-1);return","!=_&&"."!=_&&"-"!=_&&"|"!=_||(t=t.substring(0,t.length-1).trim()),t},ENGAGEYA.prototype.get_meta_tag_obj=function(t){if(t){var e={label:"",id:""};try{t.metatagLabels&&t.metatags&&(e.label=t.metatagLabels[0]||"",e.id=t.metatags.split(",")[0]||"",e.label=e.label.replace(/\^/g," "))}catch(t){console.log("ERROR"),console.log(t)}return e}},ENGAGEYA.prototype.get_click_defs=function(t,e){var i=this.get_href_target(t.partner_id,e),_=this.get_cancle_click_bubble(),s='onclick="'+_+'"',n=!!t.ajx,o="",a=t.clickUrl,r=this.array_to_csv(this.ad_click_pixels);this.ad_click_pixels=[];var d=this.get_rec_type(t)==this.rec_types[1]?"":'rel="nofollow" ';if(n)window.ajx_sprk_click=function(t){},o+=i+" "+d+'href="'+t.url+'" '+s+' title="'+t.title+'" onmousedown="_eng_do_async_click(\''+a+"');_eng_fire_async_pixels('"+r+"');"+_+'return true;">';else{if(this.is_in_iframe()){var l=this.get_page_url();l&&(a=a+"&cr="+(l=encodeURIComponent(decodeURIComponent(l))))}o+=i+" "+d+'href="'+t.url+'" data-orig-url="'+t.url+'" '+s+' title="'+t.title+'" onmousedown="_eng_fire_async_pixels(\''+r+"');this.href='"+a+"';"+_+'return true;">'}return o},ENGAGEYA.prototype.array_to_csv=function(t){for(var e="",i=0;i<t.length;i++)e+=t[i],i!=t.length-1&&(e+=",");return e},ENGAGEYA.prototype.get_rec_type=function(t){return"eng_"+t.recType.split("_")[1].toLowerCase()},ENGAGEYA.prototype.is_video_post=function(t){var e=!1,i=this.get_add_data("vpost");return i&&i.drgx&&(e=null!=t.url.match(i.drgx)),e},ENGAGEYA.prototype.get_impression_pixel_imgs_and_populate_other_pixel_types=function(t){var e="";if(t&&null!=t&&t.length>0)for(var i=0;i<t.length;i++)for(var _=t[i].split("^"),s=0;s<_.length;s++){var n=_[s];if(-1!=n.indexOf(this.pixels_consts.ENG_PIXEL_TRACK_RIMP_JS)){var o=n.replace(this.pixels_consts.ENG_PIXEL_TRACK_RIMP_JS,"");this.ad_real_impression_js_pixels.push(o)}else if(-1!=n.indexOf(this.pixels_consts.ENG_PIXEL_TRACK_CLK)){o=n.replace(this.pixels_consts.ENG_PIXEL_TRACK_CLK,"");this.ad_click_pixels.push(o)}else if(-1!=n.indexOf(this.pixels_consts.ENG_PIXEL_TRACK_RIMP)){o=n.replace(this.pixels_consts.ENG_PIXEL_TRACK_RIMP,"");this.ad_real_impression_pixels.push(o)}else if(-1!=n.indexOf(this.pixels_consts.ENG_PIXEL_TRACK_IMP_JS)){e+='<script src="'+(o=n.replace(this.pixels_consts.ENG_PIXEL_TRACK_IMP_JS,""))+'" type="text/javascript"/>'}else{e+='<img src="'+(o=n.replace(this.pixels_consts.ENG_PIXEL_TRACK_IMP,""))+'" style="display:none;" width="1px" height="1px" />';try{if(-1!=o.indexOf("mgid.com")){var a="https://recs.engageya.com/rec-api/widget/log.json?message="+("MGID tracker fired: "+o)+" | requestId: "+this.data_json.requestId+" | postID: "+this.data_json.srcPostId;this.jq.get(a,function(t){})}}catch(t){}}}return e},ENGAGEYA.prototype.get_display_name=function(t,e){try{var i="";t.partner_id!=e&&(i=this.shorten(t.displayName,30))}catch(t){console.log("ERROR"),console.log(t)}return i},ENGAGEYA.prototype.get_link_name=function(t){var e="";return this.is_super_native&&t.sNPData&&t.sNPData.lnkTtl&&(e=t.sNPData.lnkTtl),e},ENGAGEYA.prototype.populate_widget_directions=function(){this.widget_txt_direction=this.widget_txt_direction||this.get_recs_holder_elm().css("direction");var t="rtl"==this.widget_txt_direction;this.widget_direction=t?"right":"left",this.widget_op_direction=t?"left":"right"},ENGAGEYA.prototype.get_cancle_click_bubble=function(){return this.is_cancel_click_bubble?"event&&event.cancelBubble&&(event.cancelBubble=true);event&&event.stopPropagation&&(event.stopPropagation());":""},ENGAGEYA.prototype.get_recs_holder_elm=function(){var t=this.jq("#eng_recs_holder_"+this.random_id);return this.widget_elm_language&&t.attr("lang",this.widget_elm_language),t},ENGAGEYA.prototype.align_widget_elements=function(){this.align_widget_title()},ENGAGEYA.prototype.get_widget_branding=function(){var t="",e=null,i={img:"",img2:""};this.get_add_data("jsvls");if(this.is_default_brand){var _="//"+this.default_imgs_url;e=this.get_add_data("brnd")||{href:"//www.engageya.com",name:"",ttl:"Engageya",img:{src:_+"eng_logo.png",width:41,height:12},imghvr:_+"eng_logo_c.png",href2:"",name2:"",ttl2:"",img2:"",img2hvr:""},this.set_add_data("brnd",e)}else e=this.get_add_data("brnd")||{href:"",name:"",ttl:"",img:"",imghvr:"",adds:"",href2:"",name2:"",ttl2:"",img2:"",adds2:"",img2hvr:""};if(e.adds||(e.adds=""),e.img){var s=e.img;i.img='<img id="eng_brnd_img_'+this.widget_id+'" class="eng_brnd_img" src="'+s.src+'" width="'+s.width+'px" height="'+s.height+'px"/>'}if(e.img2){s=e.img2;i.img2='<img id="eng_brnd_img2_'+this.widget_id+'" class="eng_brnd_img2" src="'+s.src+'" width="'+s.width+'px" height="'+s.height+'px"/>'}return(e.name||e.img)&&(t='<a href="'+e.href+'" '+e.adds+' target="_blank" title="'+e.ttl+'">'+e.name+i.img+"</a>"),(e.name2||e.img2)&&(e.href2=e.href2||"",e.ttl2=e.ttl2||"",e.name2=e.name2||"",t+='<a href="'+e.href2+'" '+e.adds2+' target="_blank" title="'+e.ttl2+'">'+e.name2+i.img2+"</a>"),t},ENGAGEYA.prototype.is_mobile=function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}},ENGAGEYA.prototype.get_tablet_cls=function(){var t="";return this.is_tablet_conditions_satisfied()&&(t=" eng_tablet"),t},ENGAGEYA.prototype.is_tablet_conditions_satisfied=function(){return!!(this.is_mobile()&&!this.is_mobile_conditions_satisfied()&&this.max_width_for_tablet_cls&&this.max_width_for_tablet_cls>=this.width)},ENGAGEYA.prototype.get_mobile_device_OS=function(){if(this.is_mobile())return navigator.userAgent.match(/Android/i)?"android":navigator.userAgent.match(/iPhone|iPad|iPod/i)?"ios":"other"},ENGAGEYA.prototype.align_widget_title=function(){},ENGAGEYA.prototype.get_thumb=function(t,e,i,_){var s,n=this.widget_img_size,o=4,a=3;if(this.vertical_widget_img_size&&(n=this.vertical_widget_img_size,o=17),this.image_size_for_rec_num)if(o=17,this.image_size_for_rec_num.phone&&this.is_mobile_conditions_satisfied())for(var r=0;r<this.image_size_for_rec_num.phone.length;r++)this.image_size_for_rec_num.phone[r][0]==_&&(n=this.image_size_for_rec_num.phone[r][1]);else if(this.image_size_for_rec_num.tablet&&this.is_tablet_conditions_satisfied())for(r=0;r<this.image_size_for_rec_num.tablet.length;r++)this.image_size_for_rec_num.tablet[r][0]==_&&(n=this.image_size_for_rec_num.tablet[r][1]);else if(this.image_size_for_rec_num.desktop)for(r=0;r<this.image_size_for_rec_num.desktop.length;r++)this.image_size_for_rec_num.desktop[r][0]==_&&(n=this.image_size_for_rec_num.desktop[r][1]);if(e)for(r=1;r<=o;r++)if(r!=n&&-1!=(s=e.lastIndexOf("_"+r+"."))){r>=10&&(a=4),e=e.substr(0,s)+"_"+n+"."+e.substr(s+a);break}return e},ENGAGEYA.prototype.shorten=function(t,e){if(!t)return"";var i=t.length,_=t.indexOf(" ",e);return-1==_?i<=e?t:t.substring(0,e)+"...":(sS=t.substring(0,_),sS.length<i&&(sS+="..."),sS)},ENGAGEYA.prototype.click=function(t,e,i){return t.href=e,!0},ENGAGEYA.prototype.get_href_target=function(t,e){var i="";return t!=e||this.is_links_open_new_window?i='target="_blank"':this.is_in_iframe()&&(i=this.is_amp_widget?'target="_top"':'target="_parent"'),i},ENGAGEYA.prototype.is_in_iframe=function(){try{var t=window.self!==window.top}catch(e){t=!0}return t},ENGAGEYA.prototype.is_start_of_row=function(t,e){return t%e==0},ENGAGEYA.prototype.add_row_if_required=function(t,e,i){return t%e==0&&t!=i?'<div style="clear: both" class="eng_rows_seperator"></div>':""},ENGAGEYA.prototype.floor_figure=function(t,e){e||(e=2);var i=Math.pow(10,e);return(parseInt(t*i)/i).toFixed(e)},ENGAGEYA.prototype.calc_slides_dims=function(){try{var t=this.width-this.widget_lpadding-this.widget_rpadding-this.widget_rmargin-this.widget_lmargin-this.slides_wrapper_lpadding-this.slides_wrapper_rpadding-this.slides_wrapper_lmargin-this.slides_wrapper_rmargin,e=Math.floor(t/this.slide_width),i=Math.floor((t-(e-1)*this.slide_horz_margin)/this.slide_width);this.get_add_data("jsvls");this.is_mobile_conditions_satisfied()?this.num_of_slides_a_row=this.num_of_mobile_slides_a_row?this.num_of_mobile_slides_a_row:i:this.num_of_slides_a_row=this.num_of_slides_a_row?this.num_of_slides_a_row:i;var _=this.get_add_data("jcss");if(0==this.num_of_slides_a_row&&t>99&&(this.slide_width=t,this.num_of_slides_a_row=1),!this.is_video_widget&&this.num_of_slides_a_row>1&&(!_||!_.sw)){var s=(t-this.num_of_slides_a_row*this.slide_width-this.slide_horz_margin*(this.num_of_slides_a_row-1))/this.num_of_slides_a_row+this.slide_width;this.slide_width=this.floor_figure(s,2)}}catch(t){this.num_of_slides_a_row=1,console.log("ERROR"),console.log(t)}},ENGAGEYA.prototype.populate_required_fields=function(){this.calculate_widget_wrapper_dims()},ENGAGEYA.prototype.calculate_widget_wrapper_dims=function(){var t=1==this.is_video_widget?document.getElementById(this.plr_elm_id):this.widget_wrapper_elm,e=t=t||this.widget_wrapper_elm;this.width=this.width?this.width:this.jq(t).width();var i=this.get_exact_width(t);i&&(this.width=i),this.height=this.height?this.height:this.jq(t).height();try{for(;t&&(0===this.height||this.height<100)&&this.jq(t).parent();)t&&(t=this.jq(t).parent().get(0),this.height=this.jq(t).height());for(t=e;t&&(0===this.width||this.width<100)&&this.jq(t).parent();)(t=this.jq(t).parent().get(0))&&(this.width=this.jq(t).width(),i=this.get_exact_width(t),this.width=i||this.width)}catch(t){console.log("ERROR"),console.log(t)}},ENGAGEYA.prototype.get_exact_width=function(t){var e=this.jq(t)[0].getBoundingClientRect().width;return e&&Math.abs(e-this.width)>0&&Math.abs(e-this.width)<1?e:null},ENGAGEYA.prototype.create_placement=function(){this.populate_required_fields();var t=document.createElement("div");t.id="eng_recs_holder_"+this.random_id,t.className="eng_recs_holder",this.widget_wrapper_elm.appendChild(t);var e=document.createElement("style");e.type="text/css";var i=this.is_video_widget?"none":"block",_="#eng_recs_holder_"+this.random_id+" .eng_widget_sw:hover{zoom:1;filter:alpha(opacity=100);opacity:1;-webkit-filter: brightness(120%);filter: brightness(1.2);}#eng_recs_holder_"+this.random_id+" .eng_widget_sw{filter:alpha(opacity=90);opacity:0.9;}#eng_recs_holder_"+this.random_id+"{height:"+(this.height-40)+"px;-webkit-transform-style: preserve-3d;-moz-transform-style: preserve-3d;transform-style: preserve-3d;}#eng_top_ww_widget_"+this.random_id+"{position: relative;top: 50%;transform: translateY(-50%);width: 100%;}",s="";this.is_video_widget&&(this.jq(this.widget_wrapper_elm).parent().css("position","relative"),s+=_,s+=".eng_recs_holder{width: 100%;top:0px;position: absolute;text-align:center;z-index:999999;background-color: rgba(1, 1, 1, 0.6);}#eng_recs_holder_"+this.random_id+"{display:"+i+";}.eng_recs_holder a{text-decoration:none;}"),e.styleSheet?e.styleSheet.cssText=s:e.appendChild(document.createTextNode(s)),document.getElementsByTagName("head")[0].appendChild(e)},ENGAGEYA.prototype.get_page_ttl=function(){var t="",e=document.getElementsByTagName("title");if(e&&e.length>0)try{t=(t=e[0].innerText||e[0].textContent).substring(0,100).substring(0,t.lastIndexOf(" ")),t=encodeURIComponent(t)}catch(t){}return t},ENGAGEYA.prototype.get_meta_content=function(t,e){for(var i=document.getElementsByTagName("meta"),_="",s=0;s<i.length;s++)if(i[s].getAttribute("property")==t||i[s].getAttribute("name")==t){try{_=(_=i[s].getAttribute(e)).substring(0,200).substring(0,_.lastIndexOf(" ")),_=encodeURIComponent(_)}catch(t){}break}return _},ENGAGEYA.prototype.get_lang=function(){return window.navigator.userLanguage||window.navigator.language},ENGAGEYA.prototype.append_script_to_head=function(t,e){var i=document.createElement("script");i.type="text/javascript",i.id=e,i.src=t,i.charset="UTF-8",i.async=!0;var _=document.getElementsByTagName("head")[0];_.parentNode.insertBefore(i,_)},ENGAGEYA.prototype.append_link_to_head=function(t,e,i,_,s){var n=document.createElement("link");n.type=i,n.id=e,n.href=t,n.rel=_,n.async=s;var o=document.getElementsByTagName("head")[0];o.parentNode.insertBefore(n,o)},ENGAGEYA.prototype.getQS=function(t){var e=t.replace(/^[^\?]+\??/,""),i=new Object;if(!e)return i;for(var _=e.split(/[;&]/),s=0;s<_.length;s++){for(var n=_[s].replace(/(pid=.*)=.*/,"$1"),o=_[s].length-n.length,a=0;a<o;a++)n+="%3D";var r=n.split(/=(.*)/);if(r&&!(r.length<2)){var d=unescape(r[0]),l=r[1];l=l.replace(/\+/g," "),i[d]=l}}return i},ENGAGEYA.prototype.inj_init_binding=function(t){if(document.addEventListener)document.addEventListener("DOMContentLoaded",t.doc_ready(t),!1);else if(document.attachEvent){try{var e=null!=window.frameElement}catch(t){}if(document.documentElement.doScroll&&!e){!function e(){if(!called)try{document.documentElement.doScroll("left"),t.doc_ready(t)}catch(t){setTimeout(e,10)}}()}document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&t.doc_ready(t)})}},ENGAGEYA.prototype.in_array=function(t,e){for(var i in e)if(e[i]==t)return!0;return!1};var _eng_do_async_click=function(t){var e=document.createElement("script");e.type="text/javascript",e.src=t,document.getElementsByTagName("head")[0].appendChild(e)},_eng_fire_async_pixels=function(t){if(t)for(var e=t.split(","),i=0;i<e.length;i++){var _=e[i],s=document.createElement("img");s.src=_;try{document.getElementsByTagName("head")[0].appendChild(s)}catch(t){console.log("ERROR - click pixel:"),console.log(t)}}};ENGAGEYA.prototype.fire_real_impression_pixels=function(){for(var t=0;t<this.ad_real_impression_pixels.length;t++){var e=document.createElement("img");e.src=this.ad_real_impression_pixels[t];try{if(-1!=e.src.indexOf("mgid.com")){var i="https://recs.engageya.com/rec-api/widget/log.json?message="+("MGID real tracker fired: "+e.src)+" | requestId: "+this.data_json.requestId+" | postID: "+this.data_json.srcPostId;this.jq.get(i,function(t){})}}catch(t){}try{document.getElementsByTagName("head")[0].appendChild(e)}catch(t){console.log("ERROR - pixel:"),console.log(t)}}this.ad_real_impression_pixels=[],this.fire_real_impression_js_pixels()},ENGAGEYA.prototype.fire_real_impression_js_pixels=function(){for(var t=0;t<this.ad_real_impression_js_pixels.length;t++)try{this.append_script_to_head(this.ad_real_impression_js_pixels[t],"")}catch(t){console.log("ERROR - pixel:"),console.log(t)}this.ad_real_impression_js_pixels=[]},ENGAGEYA_VIDEO.prototype.attach_widget_events=function(){try{var t=this;this.load_real_imps_events(),this.load_video_view_events(),this.widget_imgs_events(),this.widget_clicks_events(),this.jq("#eng_ww_close_"+this.random_id).click(function(){t.get_videojs_obj().dispose(),t.close_video()})}catch(t){console.log("ERROR - events:"),console.log(t)}},ENGAGEYA.prototype.posts_exclusion_box_events=function(){var t=this;(this.is_show_exclude_box||1==this.data_json.ltid)&&(this.jq(this.widget_wrapper_elm).find(".eng_exclude_reason").click(function(e){var i=t.jq(this).parents(".eng_widget_sw");i.find(".eng_excludebox_question,.eng_user_exclude_btn").css("display","none");var _=i.find(".eng_excludebox_wrapper");_.css("height","100px"),i.find(".eng_excludebox_question_main").html(t.exclude_posts_box_default_thank_you),_.delay(2500).fadeOut(500,function(){});var s=_.attr("data-id"),n=t.jq(this).val();t.fire_exclude_event(s,n)}),this.jq(this.widget_wrapper_elm).find(".eng_user_exclude_btn").click(function(e){e.preventDefault();var i=t.jq(this).parents(".eng_widget_sw");t.jq(this).hasClass("eng_user_undo_btn")?(t.jq(this).toggleClass("eng_user_undo_btn"),i.find(".eng_excludebox_wrapper").css("display","none"),i.find(".eng_widget_in,.eng_widget_img").css("opacity","1"),t.jq(this).text("")):(t.jq(this).toggleClass("eng_user_undo_btn"),i.find(".eng_excludebox_wrapper").css("display","block"),i.find(".eng_widget_in,.eng_widget_img").css("opacity","0.3"),t.jq(this).text("Undo"))}))},ENGAGEYA.prototype.fire_exclude_event=function(t,e){if(t&&e){var i="https://"+(1==this.data_json.ltid?this.exclude_post_adn_url:this.exclude_post_url)+"?pid="+t+"&rsnid="+e;this.append_script_to_head(i)}},ENGAGEYA_VIDEO.prototype.visibility_load_video_js_event=function(t){(0==this.load_on_view_percents||this.is_elm_visible_conditions(t,this.load_on_view_percents,"above"))&&this.load_videojs()},ENGAGEYA_VIDEO.prototype.visibility_play_video_event=function(t){var e=0==this.play_video_on_view_percents.top||this.is_elm_visible_conditions(t,this.play_video_on_view_percents.top,"above"),i=0==this.play_video_on_view_percents.bottom||this.is_elm_visible_conditions(t,this.play_video_on_view_percents.bottom,"below");if(e&&i&&!this.is_video_should_be_paused){if(this.handle_video_widget_visibility(),this.is_play_command_sent)return;this.is_play_command_sent=!0;var _=this;window.setTimeout(function(){_.play_video(_)},150)}},ENGAGEYA_VIDEO.prototype.handle_video_widget_visibility=function(){this.is_video_was_on_view||(this.is_video_was_on_view=!0,this.show_video_widget())},ENGAGEYA_VIDEO.prototype.show_video_widget=function(){this.jq(this.widget_wrapper_elm).css({visibility:"visible",opacity:0}).animate({opacity:1},500)},ENGAGEYA_VIDEO.prototype.visibility_pause_video_event=function(t){var e=0!=this.pause_video_on_not_view_percents.top&&!this.is_elm_visible_conditions(t,this.pause_video_on_not_view_percents.top,"above"),i=0!=this.pause_video_on_not_view_percents.bottom&&!this.is_elm_visible_conditions(t,this.pause_video_on_not_view_percents.bottom,"below");!e&&!i&&this.is_window_active||this.is_play_command_sent?this.is_video_should_be_paused=!1:(this.is_video_should_be_paused=!0,this.pause_video())},ENGAGEYA_VIDEO.prototype.play_video=function(t){this.logger(this.log_types.INFO,"PLAYING VIDEO");try{this.ads_manager.resume()}catch(e){t.is_play_command_sent=!1}t.is_play_command_sent=!1},ENGAGEYA_VIDEO.prototype.pause_video=function(){this.logger(this.log_types.INFO,"PAUSING VIDEO");try{this.ads_manager.pause()}catch(t){}},ENGAGEYA_VIDEO.prototype.on_visibility_change=function(t){return function(){var e=t.widget_wrapper_elm;t.visibility_load_video_js_event(e),t.is_load_videojs_called&&t.populate_video_tag(),t.is_video_tag_populated&&t.ads_ready&&(t.visibility_pause_video_event(e),t.visibility_play_video_event(e))}},ENGAGEYA_VIDEO.prototype.set_window_active=function(t){return function(){t.is_run_only_on_window_active&&(t.is_window_active=!0),t.logger(t.log_types.INFO,"WINDOW ACTIVE")}},ENGAGEYA_VIDEO.prototype.set_window_blur=function(t){return function(){t.is_run_only_on_window_active&&(t.is_window_active=!1),t.logger(t.log_types.INFO,"WINDOW NON ACTIVE")}},ENGAGEYA_VIDEO.prototype.load_video_view_events=function(){var t=this.on_visibility_change(this),e=this.set_window_blur(this),i=this.set_window_active(this);window.addEventListener?(addEventListener("DOMContentLoaded",t,!1),addEventListener("load",t,!1),addEventListener("scroll",t,!1),addEventListener("resize",t,!1),addEventListener("focus",function(){i(),t()},!1),addEventListener("blur",function(){e(),t()},!1),addEventListener("touchstart",function(){t()},!1),addEventListener("click",function(){t()},!1)):window.attachEvent&&(attachEvent("onDOMContentLoaded",t),attachEvent("onload",t),attachEvent("onscroll",t),attachEvent("onresize",t),attachEvent("onfocus",function(){i(),t()}),attachEvent("onblur",function(){e(),t()})),t()},ENGAGEYA_VIDEO.prototype.get_video_js_scripts=function(t){var e=this;if(this.videojs_js_files[t]){console.log("LOADING JS FILE: "+this.videojs_js_files[t]);var i=-1==this.videojs_js_files[t].indexOf("//")?this.videojs_path+this.videojs_js_files[t]:this.videojs_js_files[t];this.get_script(i,function(i,_,s){t++,e.get_video_js_scripts(t)})}else this.is_video_js_fully_loaded=!0},ENGAGEYA_VIDEO.prototype.load_videojs=function(){if(!this.is_load_videojs_called){for(var t=0;t<this.videojs_css_files.length;t++)this.append_link_to_head(this.videojs_path+this.videojs_css_files[t],"","text/css","stylesheet",!0);this.get_video_js_scripts(0),this.is_load_videojs_called=!0,console.log("VIDEO JS STARTED LOADING")}},ENGAGEYA_VIDEO.prototype.is_elm_visible_conditions=function(t,e,i){e=e||0,i=i||"visible";var _=t.getBoundingClientRect(),s=Math.ceil(_.height)*e/100,n=window.innerHeight||document.documentElement.clientHeight,o=_.top<n-s&&_.top+_.height>=s,a=_.bottom>s;return"above"===i?o:"below"===i?a:!o&&!a},ENGAGEYA_VIDEO.prototype.get_total_slides=function(){return 1},ENGAGEYA_VIDEO.prototype.get_video_additional_data=function(t){var e={};if(!t.vMAD)return e;try{e=JSON.parse(t.vMAD.replace(/\[rid\]/g,this.random_id))}catch(t){console.log("ERROR:"),console.log(t)}return e},ENGAGEYA_VIDEO.prototype.build_layout=function(){this.build_video_layout()},ENGAGEYA_VIDEO.prototype.build_video_layout=function(){var t=this.data_json;this.calc_slides_dims();var e=t.widget.displayRows,i=this.get_total_slides(e,t.recs.length),_=this.get_recs_holder_elm(),s="eng_"+(this.is_mobile_conditions_satisfied()?"m_":"")+"top_ww_widget_"+this.random_id,n='<div class="eng_top_ww_widget'+this.get_tablet_cls()+'" id="'+s+'"><div class="eng_ww_widget" id="eng_ww_widget_'+this.widget_id+'">';this.populate_widget_directions();this.get_default_css("DESKTOP_VIDEO",s);var o=this.get_default_css("DESKTOP_NON_VIDEO",s),a=this.get_default_css("VIDEO_ONLY",s),r=this.get_default_css("DESKTOP",s);r+=o+a,n+="<"+this.title_elm_type+' class="eng_ww_title" id="eng_ww_title_'+this.random_id+'"><span class="eng_ww_ttl_span1">'+t.widget.headerText+'</span><span class="eng_ww_ttl_span2"></span></'+this.title_elm_type+">"+('<div class="eng_ww_close" id="eng_ww_close_'+this.random_id+'"><span>&times</span></div>')+('<div class="eng_asw" id="eng_asw_'+this.random_id+'">');for(var d=t.recs,l="",p=0;p<i;p++)if(d[p].vMUrl){this.populate_video_additional_data(d[p]);var h=d[p].postId,g=d[p].recTypeDB;this.visible_posts_and_types.push({pi:h,pt:g}),this.is_start_of_row(p,this.num_of_slides_a_row)&&(r+="#eng_sw_"+p+"_"+this.widget_id+"{margin-"+this.widget_direction+":0px !important;}");var c=this.is_video_post(d[p])?" eng_widget_vsw":"",u='<div id="eng_sw_'+p+"_"+this.widget_id+'" class="eng_widget_sw'+c+'">',m=this.get_rec_type(d[p]),w=this.get_thumb(t,d[p].thumbnail_path,d[p].category_id,p+1)?"":" eng_no_img",v='<div id="eng_video_w_'+this.random_id+'" class="eng_widget_video_w"></div>',f='<a id="eng_href_'+p+"_"+this.widget_id+'" class="eng_widget_href '+m+w+'" ',E=this.get_title(d[p]),y=this.get_description(d[p]),A=this.get_meta_tag_obj(d[p]),b="";"rtl"!=this.widget_txt_direction||this.isShouldBeRTL(E)||(b='style="direction:ltr;text-align:left;"');var G='<div id="eng_in_'+p+"_"+this.widget_id+'" class="eng_widget_in" '+b+">",x='<span id="eng_is_'+p+"_"+this.widget_id+'" class="eng_widget_is">',N=this.is_description_span?'<span id="eng_isd_'+p+"_"+this.widget_id+'" class="eng_widget_isd">'+y+"</span>":"",j=this.is_meta_tags_span&&A.label?'<span id="eng_mtg_'+p+"_"+this.widget_id+'" class="eng_widget_mtg mtg_'+A.id+'">'+A.label+"</span>":"",I=this.get_display_name(d[p],t.srcWebsiteId),T=I?'<span id="eng_dn_'+p+"_"+this.widget_id+'" class="eng_widget_dn">':"";l+=this.get_impression_pixel_imgs_and_populate_other_pixel_types(t.recs[p].impressionUrls),f+=this.get_click_defs(d[p],t.srcWebsiteId),this.is_add_href||(f=""),u+=f+v+G+(x+=E+"</span>")+j+N+(T+=I?I+"</span>":""),n+=u+="</div></a></div>",n+=this.add_row_if_required(p+1,this.num_of_slides_a_row,i)}var Y=this.get_widget_branding();n+='</div><div id="eng_brnd_'+this.widget_id+'" class="eng_branding">'+Y+"</div></div>",n+=l+"</div>";var R=this.get_add_data("css")||"";widgetCss="<style>"+r+R+"</style>",_.html(widgetCss+n)},ENGAGEYA_VIDEO.prototype.populate_video_additional_data=function(t){var e=this.get_video_additional_data(t);this.auto_play=0==e.autoply?"":this.auto_play,this.is_muted=void 0===e.ismute&&this.is_muted,this.load_on_view_percents=e.lovp||this.load_on_view_percents,this.play_video_on_view_percents=e.plyvovp||this.play_video_on_view_percents,this.pause_video_on_not_view_percents=e.psvonvp||this.pause_video_on_not_view_percents,this.is_display_controls=e.idc||this.is_display_controls,this.video_sources=e.vsrcs||this.video_sources,this.is_close_player_when_ads_completed=e.iscpwac||this.is_close_player_when_ads_completed,this.video_width=e.vw?e.vw:Math.floor(this.width),this.video_view_ratio=e.vvr?e.vvr:this.video_view_ratio,this.video_height=this.video_view_ratio?Math.floor(this.width/this.video_view_ratio):null,this.skip_offest=e.skpofst?e.skpofst:this.skip_offest,this.fire_click_events=e.fclkevts?e.fclkevts:this.fire_click_events,this.is_close_video_on_ad_timeout=e.icvoatout||this.is_close_video_on_ad_timeout,this.video_volume=e.vidvol||this.video_volume,this.video_load_ad_timeout=e.vladtout||this.video_load_ad_timeout,this.is_run_only_on_window_active=e.isroowa||this.is_run_only_on_window_active,this.preload=e.preld||this.preload,this.is_unmute_on_mouse_over=e.iuomo||this.is_unmute_on_mouse_over},ENGAGEYA_VIDEO.prototype.get_videojs_obj=function(){return videojs("#eng_video_"+this.random_id)},ENGAGEYA_VIDEO.prototype.get_videojs_wrapper_obj=function(){return this.jq("#eng_video_w_"+this.random_id)},ENGAGEYA_VIDEO.prototype.populate_video_tag=function(){try{if(!this.is_video_js_fully_loaded||1==this.is_video_tag_populated)return;var t,e=this.get_video_rec(),i=this.get_videojs_wrapper_obj();if(!i[0])return;t='<video id="eng_video_'+this.random_id+'" playsinline class="eng_video_'+this.widget_id+' video-js vjs-default-skin vjs-big-play-centered"></video>',i.html(t);var _=this.get_videojs_obj();_.autoplay(this.auto_play),_.preload(this.preload),_.width(this.video_width),this.video_view_ratio&&this.video_height?_.height(this.video_height):this.video_height=_.height(),_.src(this.video_sources),_.controls(this.is_display_controls),_.muted(this.is_muted),_.volume(this.video_volume),this.video_types[e.vMType]==this.video_types_const.VAST?(_.ima({id:"eng_video_"+this.random_id,adTagUrl:this.populate_place_holders(e.vMUrl)}),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE),_.ima.initializeAdDisplayContainer(),_.ima.adsRenderingSettings.loadVideoTimeout=this.video_load_ad_timeout,_.ima.requestAds(),this.attach_ad_error_event(),this.attach_ads_ready_event(),this.attach_mouse_move_events()):this.video_types[e.vMType],this.is_video_tag_populated=!0}catch(t){this.logger(this.log_types.ERROR,t)}},ENGAGEYA.prototype.populate_place_holders=function(t,e){try{if(-1!=e.indexOf(this.place_holders.AD_URL)){var i=this.jq(t).attr("data-orig-url");i&&(e=e.replace(this.place_holders.AD_URL,encodeURIComponent(i)))}}catch(t){console.log("ERROR - populate place holders:"),console.log(t)}return e},ENGAGEYA_VIDEO.prototype.populate_place_holders=function(t){return-1!=t.indexOf(this.place_holders.WIDTH)&&(t=t.replace(this.place_holders.WIDTH,Math.floor(this.video_width))),-1!=t.indexOf(this.place_holders.HEIGHT)&&(t=t.replace(this.place_holders.HEIGHT,Math.floor(this.video_height))),-1!=t.indexOf(this.place_holders.PAGE_URL)&&(t=t.replace(this.place_holders.PAGE_URL,this.get_page_url())),-1!=t.indexOf(this.place_holders.DNT)&&(t=t.replace(this.place_holders.DNT,document.location.hostname)),-1!=t.indexOf(this.place_holders.CACHE_BUSTER)&&(t=t.replace(this.place_holders.CACHE_BUSTER,this.generate_random_number())),-1!=t.indexOf(this.place_holders.PAGE_TITLE)&&(t=t.replace(this.place_holders.PAGE_TITLE,this.get_page_ttl())),t},ENGAGEYA_VIDEO.prototype.get_video_rec=function(){return this.data_json.recs[0]},ENGAGEYA_VIDEO.prototype.attach_mouse_move_events=function(){this.attach_mouse_over_event(),this.attach_mouse_out_event()},ENGAGEYA_VIDEO.prototype.attach_mouse_over_event=function(){var t=this;this.jq(this.widget_wrapper_elm).mouseover(function(){t.is_unmute_on_mouse_over&&t.is_muted&&(t.get_videojs_obj().muted(!1),t.logger(t.log_types.INFO,"VIDEO UNMUTED"))})},ENGAGEYA_VIDEO.prototype.attach_mouse_out_event=function(){var t=this;this.jq(this.widget_wrapper_elm).mouseout(function(){t.is_muted&&t.is_unmute_on_mouse_over&&(t.get_videojs_obj().muted(!0),t.logger(t.log_types.INFO,"VIDEO MUTED"))})},ENGAGEYA_VIDEO.prototype.attach_ads_events=function(){this.attach_ad_timeout_event(),this.attach_ad_clicked_event(),this.attach_ad_ended_event(),this.attach_ad_started_event()},ENGAGEYA_VIDEO.prototype.attach_after_ad_started_events=function(){this.attach_ad_firstQuartile_event(),this.attach_ad_midpoint_event(),this.attach_ad_thirdQuartile_event(),this.attach_ad_complete_event()},ENGAGEYA_VIDEO.prototype.attach_ad_complete_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(){t.fire_all_relevant_pixels(t.video_event_types.AD_COMPLETE),t.logger(t.log_types.INFO,"AD COMPLETED")})},ENGAGEYA_VIDEO.prototype.attach_ad_thirdQuartile_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,function(){t.fire_all_relevant_pixels(t.video_event_types.AD_THIRD_QUARTILE),t.logger(t.log_types.INFO,"AD THIRD QUARTILE")})},ENGAGEYA_VIDEO.prototype.attach_ad_midpoint_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.MIDPOINT,function(){t.fire_all_relevant_pixels(t.video_event_types.AD_MID_POINT),t.logger(t.log_types.INFO,"AD MID POINT")})},ENGAGEYA_VIDEO.prototype.attach_ad_firstQuartile_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,function(){t.fire_all_relevant_pixels(t.video_event_types.AD_FIRST_QUARTILE),t.logger(t.log_types.INFO,"AD FIRST QUARTILE")})},ENGAGEYA_VIDEO.prototype.attach_ad_ended_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){t.fire_all_relevant_pixels(t.video_event_types.ALL_ADS_COMPLETED),t.is_close_player_when_ads_completed&&t.close_video(),t.logger(t.log_types.INFO,"ALL ADS COMPLETED")})},ENGAGEYA_VIDEO.prototype.attach_ad_clicked_event=function(){var t=this;this.get_videojs_obj().on("click",function(){t.fire_all_relevant_pixels(t.video_event_types.AD_CLICK),t.logger(t.log_types.INFO,"AD CLICKED")})},ENGAGEYA_VIDEO.prototype.attach_ad_started_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.STARTED,function(){t.fire_all_relevant_pixels(t.video_event_types.AD_START),t.logger(t.log_types.INFO,"AD STARTED"),t.attach_after_ad_started_events()})},ENGAGEYA_VIDEO.prototype.attach_ads_ready_event=function(){var t=this;this.get_videojs_obj().on("adsready",function(){t.ads_manager=this.ima.adsManager,t.ads_ready=!0,t.fire_all_relevant_pixels(t.video_event_types.ADS_READY),t.logger(t.log_types.INFO,"ADS READY"),t.attach_ads_events()})},ENGAGEYA_VIDEO.prototype.attach_ad_timeout_event=function(){var t=this;this.get_videojs_obj().on("adtimeout",function(){t.fire_all_relevant_pixels(t.video_event_types.AD_TIMEOUT),t.is_close_video_on_ad_timeout&&t.close_video(),t.logger(t.log_types.INFO,"AD TIMEOUT")})},ENGAGEYA_VIDEO.prototype.attach_ad_error_event=function(){var t=this;this.get_videojs_obj().on("adserror",function(){t.ads_manager.destroy(),t.fire_all_relevant_pixels(t.video_event_types.AD_ERROR),t.is_close_video_on_ad_error&&t.close_video(),t.logger(t.log_types.INFO,"AD ERROR")})},ENGAGEYA_VIDEO.prototype.close_video=function(){this.jq(this.widget_wrapper_elm).hide("slow")},ENGAGEYA_VIDEO.prototype.get_video_sources_elemets=function(){var t="";if(this.video_sources)for(var e=0;e<this.video_sources.length;e++)t+='<source src="'+this.video_sources[e]+'" type="video/mp4">';return t},ENGAGEYA_VIDEO.prototype.fire_all_relevant_pixels=function(t){this.fire_clicks(t),this.fire_click_pixels(t)},ENGAGEYA_VIDEO.prototype.fire_clicks=function(t){var e=this.get_video_rec();if(e)for(var i=0;i<this.fire_click_events.length;i++)this.fire_click_events[i]==t&&(this.generate_img_pixel(e.clickUrl),this.logger(this.log_types.INFO,"FIRING PIXEL: "+e.clickUrl))},ENGAGEYA_VIDEO.prototype.fire_click_pixels=function(t){},ENGAGEYA_VIDEO.prototype.get_click_defs=function(t,e){var i=this.get_href_target(t.partner_id,e),_=this.get_cancle_click_bubble(),s='onclick="'+_+'"',n=(t.ajx,""),o="";o=o.replace("ecs1.engageya.com/gas-api","ecs3.engageya.com/rec-api");var a=this.get_video_additional_data(t);return window.ajx_sprk_click=function(t){},a.clkurl="//engageya.com",n+=i+' href="'+(a&&a.clkurl?a.clkurl:"javascript:void(0)")+'" '+s+" onmousedown=\"_eng_do_async_click('"+o+"');"+_+'return true;">'},ENGAGEYA_VIDEO.prototype.run_posts_preview=function(){},ENGAGEYA_VIDEO.prototype.calc_slides_dims=function(){var t=this.width-this.widget_lpadding-this.widget_rpadding-this.widget_rmargin-this.widget_lmargin-this.slides_wrapper_lpadding-this.slides_wrapper_rpadding-this.slides_wrapper_lmargin-this.slides_wrapper_rmargin;this.slide_width=t,this.num_of_slides_a_row=1},function(){var t=function(t,e){switch(t){case"createWidget":new ENGAGEYA(e).run();break;case"createVideoWidget":new ENGAGEYA_VIDEO(e).run();break;case"createMultiWidgets":new ENGAGEYA_MULTI_WIDGETS(e).run()}},e=window.EngageyaObject;window[e].l;for(var i in window[e].q){var _=window[e].q[i];t(_[0],_[1])}window[e]=t}();
