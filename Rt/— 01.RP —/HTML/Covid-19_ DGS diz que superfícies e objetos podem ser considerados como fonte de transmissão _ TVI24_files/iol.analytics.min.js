var IOLAnalytics=function(){const t={"iol.pt":"IOL","tvi.iol.pt":"TVI","tvi24.iol.pt":"TVI24","tviplayer.iol.pt":"TVIPLAYER","maisfutebol.iol.pt":"MAISFUTEBOL","selfie.iol.pt":"SELFIE","autoportal.iol.pt":"AUTOPORTAL","lux.iol.pt":"LUX"};var e,o,r,n,i,a,c,u,l,p,d,m,s,g,y=function(){e=$.cookie("analytics_origin"),$.removeCookie("analytics_origin",{domain:"iol.pt",path:"/"})},f=function(t){document.querySelector("meta[property='iol:ctags']").getAttribute("content"),o=document.querySelector("meta[property='iol:tags']").getAttribute("content"),r=document.querySelector("meta[property='iol:author']").getAttribute("content"),n=document.querySelector("meta[property='iol:content_type']").getAttribute("content"),i=document.querySelector("meta[property='iol:section']").getAttribute("content"),a=document.querySelector("meta[property='iol:platform']").getAttribute("content"),c=document.querySelector("meta[property='iol:adunit']").getAttribute("content"),l=document.querySelector("meta[property='iol:programme_name']").getAttribute("content"),p=document.querySelector("meta[property='iol:episode']").getAttribute("content"),d=document.querySelector("meta[property='iol:content']").getAttribute("content"),m=document.querySelector("meta[property='iol:content_title']").getAttribute("content"),s=document.querySelector("meta[property='iol:gtm']").getAttribute("content"),g=document.querySelector("meta[property='iol:project']").getAttribute("content"),u=e||`${v()}||Não Definido||Não Definido||Não Definido`},v=function(){var e=t[function(t){return t=(t=(t=(t=(t=(t=(t=t.replace("https://","")).replace("http://","")).substring(0,t.indexOf("/"))).replace("stg.","")).replace("dev.","")).replace("dev","")).replace("www.","")}(document.referrer)];return e||"Externo"},A=function(){dataLayer=[{Tipo_Conteudo:n,Titulo:b(m),Multimedia_Id:d,Episodio_Id:p,Programa_Nome:l,Autor:b(r),Tags:b(o),Plataforma:a,AdUnit:c,origem_interna:u}]},L=function(t,e){var o=`${g.toUpperCase()}||${i.toLowerCase()}||${n.toLowerCase()}||${t.toLowerCase()}`;if(e){var r=new Date;return r.setTime(r.getTime()+6e4),void $.cookie("analytics_origin",o,{expires:r,domain:"iol.pt",path:"/"})}return{origem_interna:o}},w=function(){!function(t,e,o,r,n){t[r]=t[r]||[],t[r].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=e.getElementsByTagName(o)[0],a=e.createElement(o);a.async=!0,a.src="//www.googletagmanager.com/gtm.js?id="+n,i.parentNode.insertBefore(a,i)}(window,document,"script","dataLayer",s)},b=function(t){var e=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"");if((e=encodeURIComponent(e)).length>150)for(e=e.substring(0,150);!T(e);)e=S(e);return decodeURIComponent(e)},T=function(t){try{return decodeURIComponent(t),!0}catch(t){return!1}},S=function(t){return t.substring(0,t.lastIndexOf("%"))};return{init:function(){y(),f(),A(),w()},activateListener:function(){$(document).ready(()=>{$("a:not(.not-measure, .already-measured)").each((t,e)=>{$(e).addClass("already-measured"),$(e).click(function(t){var e=$(this).data("iol-identity");if(!e){var o=$(this).parent(),r=$(o).parent();for(e=r.data("iol-identity");!r.attr("class")&&!e;)e=(r=$(r).parent()).data("iol-identity")}var a=e||r.attr("class").split(" ")[0],c=`${g.toUpperCase()}||${i?i.toLowerCase():"Não Definido"}||${n?n.toLowerCase():"Não Definido"}||${a.toLowerCase()}`,u=new Date;u.setTime(u.getTime()+6e4),$.cookie("analytics_origin",c,{expires:u,domain:"iol.pt",path:"/"})})})})},setInternalOrigin:function(t,e){var o=L(t,e);e||"undefined"!=typeof dataLayer&&o&&dataLayer.push(o)},updateVirtualPageView:function(t,e,o,r,n){var i={virtualPageURL:o,virtualPageTitle:r,event:"VirtualPageview"};if(n&&(i=$.extend(!0,{},i,n)),t){var a=L(t,e);!e&&origin&&(i=$.extend(!0,{},i,a))}dataLayer.push(i)}}}();