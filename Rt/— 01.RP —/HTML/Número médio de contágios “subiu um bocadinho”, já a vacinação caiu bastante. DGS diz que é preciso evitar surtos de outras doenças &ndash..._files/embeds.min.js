var playing=!1,colorMode="dark";!function(){"use strict";var n,t,e;function o(e,t){ga&&"function"==typeof ga&&ga("send",{hitType:"event",eventCategory:e,eventAction:"click",eventLabel:t})}function a(e,t){window.parent.postMessage({message:e,value:t,secret:n},"*"),window.parent.postMessage({sentinel:"amp",type:"embed-size",height:document.body.scrollHeight},"*")}function i(e){var t,n=e.target;!(t=n.hasAttribute("href")?n.getAttribute("href"):n.parentElement.getAttribute("href"))||e.ctrlKey||e.metaKey?e.preventDefault():(o("link-click","Read full article click"),a("link",t))}function d(){window.self!==window.top&&(clearTimeout(e),e=setTimeout(function(){a("iframe-height",Math.ceil(document.documentElement.offsetHeight))},100))}function c(){document.body&&a("height",Math.ceil(document.body.getBoundingClientRect().height)),a("requestColorMode",""),window.self!==window.top&&document.addEventListener("click",i)}if(document.querySelector&&window.addEventListener){!function e(){window.self===window.top||n||(n=window.location.hash.replace(/.*secret=([\d\w]{10}).*/,"$1"),clearTimeout(t),t=setTimeout(function(){e()},100))}(),document.body.hasAttribute("data-is-episode")&&"true"==document.body.getAttribute("data-is-episode")&&document.querySelector(".obs-audio-clip").addEventListener("click",function(){playing=0==playing?(a("player-play",data),!0):(a("player-pause",data),!1)}),document.documentElement.className=document.documentElement.className.replace(/\bno-js\b/,"")+" js",document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1),window.addEventListener("resize",d,!1);var s=setInterval(function(){c(),d()},1e3);setTimeout(function(){clearInterval(s)},3e3)}c(),window.onmessage=function(e){if(e.data.hasOwnProperty("event")){var t=document.querySelector("a");switch(e.data.event){case"audioPlay":playing=!0,t.classList.contains("playing")||t.classList.add("playing");break;case"audioEnd":case"audioPause":playing=!1,t.classList.contains("playing")&&t.classList.remove("playing");break;case"toggleColorScheme":"dark"==(colorMode=e.data.data.mode)?document.querySelector(".obs-oembed")&&document.querySelector(".obs-oembed").classList.add("dark"):document.querySelector(".obs-oembed")&&document.querySelector(".obs-oembed").classList.remove("dark");break;default:console.debug("command",e.data.event,"not recognized")}}}}();
//# sourceMappingURL=embeds.min.js.map
