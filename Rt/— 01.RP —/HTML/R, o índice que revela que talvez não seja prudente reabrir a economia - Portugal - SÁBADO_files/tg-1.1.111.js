!function r(s,a,c){function l(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return l(s[t][1][e]||e)},o,o.exports,r,s,a,c)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(o.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),o);function o(){this.isAborted=!1,this.onabort=null}n.AbortController=i},{}],2:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("./Errors"),a=e("./HttpClient"),c=e("./NodeHttpClient"),l=e("./XhrHttpClient"),u=(r=a.HttpClient,o(d,r),d.prototype.send=function(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new s.AbortError):e.method?e.url?this.httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},d.prototype.getCookieString=function(e){return this.httpClient.getCookieString(e)},d);function d(e){var t=r.call(this)||this;return"undefined"!=typeof XMLHttpRequest?t.httpClient=new l.XhrHttpClient(e):t.httpClient=new c.NodeHttpClient(e),t}n.DefaultHttpClient=u},{"./Errors":3,"./HttpClient":5,"./NodeHttpClient":15,"./XhrHttpClient":20}],3:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,s=(r=Error,o(a,r),a);function a(e,t){var n=this,i=this.constructor.prototype;return(n=r.call(this,e)||this).statusCode=t,n.__proto__=i,n}n.HttpError=s;var c,l=(c=Error,o(u,c),u);function u(e){void 0===e&&(e="A timeout occurred.");var t=this,n=this.constructor.prototype;return(t=c.call(this,e)||this).__proto__=n,t}n.TimeoutError=l;var d,h=(d=Error,o(p,d),p);function p(e){void 0===e&&(e="An abort occurred.");var t=this,n=this.constructor.prototype;return(t=d.call(this,e)||this).__proto__=n,t}n.AbortError=h},{}],4:[function(n,e,i){(function(l){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var u=n("./TextMessageFormat"),d=n("./Utils"),e=(t.prototype.writeHandshakeRequest=function(e){return u.TextMessageFormat.write(JSON.stringify(e))},t.prototype.parseHandshakeResponse=function(e){var t,n;if(d.isArrayBuffer(e)||void 0!==l&&e instanceof l){var i=new Uint8Array(e);if(-1===(r=i.indexOf(u.TextMessageFormat.RecordSeparatorCode)))throw new Error("Message is incomplete.");var o=r+1;t=String.fromCharCode.apply(null,i.slice(0,o)),n=i.byteLength>o?i.slice(o).buffer:null}else{var r,s=e;if(-1===(r=s.indexOf(u.TextMessageFormat.RecordSeparator)))throw new Error("Message is incomplete.");o=r+1,t=s.substring(0,o),n=s.length>o?s.substring(o):null}var a=u.TextMessageFormat.parse(t),c=JSON.parse(a[0]);if(c.type)throw new Error("Expected a handshake response from the server.");return[n,c]},t);function t(){}i.HandshakeProtocol=e}).call(this,n("buffer").Buffer)},{"./TextMessageFormat":17,"./Utils":18,buffer:23}],5:[function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(n,"__esModule",{value:!0});function o(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}n.HttpResponse=o;var r=(s.prototype.get=function(e,t){return this.send(i({},t,{method:"GET",url:e}))},s.prototype.post=function(e,t){return this.send(i({},t,{method:"POST",url:e}))},s.prototype.delete=function(e,t){return this.send(i({},t,{method:"DELETE",url:e}))},s.prototype.getCookieString=function(e){return""},s);function s(){}n.HttpClient=r},{}],6:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(r,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((c=c.apply(r,s||[])).next())})},h=this&&this.__generator||function(n,i){var o,r,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(s=2&t[0]?r.return:t[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,t[1])).done)return s;switch(r=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,r=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(n,a)}catch(e){t=[6,e],r=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./DefaultHttpClient"),p=e("./ILogger"),f=e("./ITransport"),u=e("./LongPollingTransport"),r=e("./ServerSentEventsTransport"),s=e("./Utils"),a=e("./WebSocketTransport"),c=null,l=null;if("undefined"==typeof window&&void 0!==e){var d="function"==typeof __webpack_require__?__non_webpack_require__:e;c=d("ws"),l=d("eventsource")}var g=(m.prototype.start=function(e){return e=e||f.TransferFormat.Binary,s.Arg.isIn(e,f.TransferFormat,"transferFormat"),this.logger.log(p.LogLevel.Debug,"Starting connection with transfer format '"+f.TransferFormat[e]+"'."),2!==this.connectionState?Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state.")):(this.connectionState=0,this.startPromise=this.startInternal(e),this.startPromise)},m.prototype.send=function(e){if(1!==this.connectionState)throw new Error("Cannot send data if the connection is not in the 'Connected' State.");return this.transport.send(e)},m.prototype.stop=function(t){return i(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:this.connectionState=2,this.stopError=t,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.startPromise];case 2:case 3:return e.sent(),[3,4];case 4:return this.transport?[4,this.transport.stop()]:[3,6];case 5:e.sent(),this.transport=void 0,e.label=6;case 6:return[2]}})})},m.prototype.startInternal=function(l){return i(this,void 0,void 0,function(){var n,i,o,t,r,s,a,c=this;return h(this,function(e){switch(e.label){case 0:n=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,e.label=1;case 1:return e.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==f.HttpTransportType.WebSockets?[3,3]:(this.transport=this.constructTransport(f.HttpTransportType.WebSockets),[4,this.transport.connect(n,l)]):[3,5];case 2:return e.sent(),[3,4];case 3:throw Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:i=null,o=0,t=function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,r.getNegotiationResponse(n)];case 1:if(i=e.sent(),2===r.connectionState)return[2,{value:void 0}];if(i.error)throw Error(i.error);if(i.ProtocolVersion)throw Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return i.url&&(n=i.url),i.accessToken&&(t=i.accessToken,r.accessTokenFactory=function(){return t}),o++,[2]}})},r=this,e.label=6;case 6:return[5,t()];case 7:if("object"==typeof(s=e.sent()))return[2,s.value];e.label=8;case 8:if(i.url&&o<100)return[3,6];e.label=9;case 9:if(100===o&&i.url)throw Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(n,this.options.transport,i,l)];case 10:e.sent(),e.label=11;case 11:return this.transport instanceof u.LongPollingTransport&&(this.features.inherentKeepAlive=!0),this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return c.stopConnection(e)},this.changeState(0,1),[3,13];case 12:throw a=e.sent(),this.logger.log(p.LogLevel.Error,"Failed to start the connection: "+a),this.connectionState=2,this.transport=void 0,a;case 13:return[2]}})})},m.prototype.getNegotiationResponse=function(a){return i(this,void 0,void 0,function(){var t,n,i,o,r,s;return h(this,function(e){switch(e.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(i=e.sent())&&((t={}).Authorization="Bearer "+i,n=t),e.label=2;case 2:o=this.resolveNegotiateUrl(a),this.logger.log(p.LogLevel.Debug,"Sending negotiation request: "+o+"."),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this.httpClient.post(o,{content:"",headers:n})];case 4:if(200!==(r=e.sent()).statusCode)throw Error("Unexpected status code returned from negotiate "+r.statusCode);return[2,JSON.parse(r.content)];case 5:throw s=e.sent(),this.logger.log(p.LogLevel.Error,"Failed to complete negotiation with the server: "+s),s;case 6:return[2]}})})},m.prototype.createConnectUrl=function(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+"id="+t:e},m.prototype.createTransport=function(c,l,u,d){return i(this,void 0,void 0,function(){var t,n,i,o,r,s,a;return h(this,function(e){switch(e.label){case 0:return t=this.createConnectUrl(c,u.connectionId),this.isITransport(l)?(this.logger.log(p.LogLevel.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,[4,this.transport.connect(t,d)]):[3,2];case 1:return e.sent(),this.changeState(0,1),[2];case 2:n=u.availableTransports||[],i=0,o=n,e.label=3;case 3:return i<o.length?(r=o[i],this.connectionState=0,"number"!=typeof(s=this.resolveTransport(r,l,d))?[3,8]:(this.transport=this.constructTransport(s),u.connectionId?[3,5]:[4,this.getNegotiationResponse(c)])):[3,9];case 4:u=e.sent(),t=this.createConnectUrl(c,u.connectionId),e.label=5;case 5:return e.trys.push([5,7,,8]),[4,this.transport.connect(t,d)];case 6:return e.sent(),this.changeState(0,1),[2];case 7:return a=e.sent(),this.logger.log(p.LogLevel.Error,"Failed to start the transport '"+f.HttpTransportType[s]+"': "+a),this.connectionState=2,u.connectionId=void 0,[3,8];case 8:return i++,[3,3];case 9:throw new Error("Unable to initialize any of the available transports.")}})})},m.prototype.constructTransport=function(e){switch(e){case f.HttpTransportType.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new a.WebSocketTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case f.HttpTransportType.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new r.ServerSentEventsTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case f.HttpTransportType.LongPolling:return new u.LongPollingTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+e+".")}},m.prototype.resolveTransport=function(e,t,n){var i,o,r=f.HttpTransportType[e.transport];if(null==r)this.logger.log(p.LogLevel.Debug,"Skipping transport '"+e.transport+"' because it is not supported by this client.");else{var s=e.transferFormats.map(function(e){return f.TransferFormat[e]});if(o=r,(i=t)&&0==(o&i))this.logger.log(p.LogLevel.Debug,"Skipping transport '"+f.HttpTransportType[r]+"' because it was disabled by the client.");else if(0<=s.indexOf(n)){if((r!==f.HttpTransportType.WebSockets||this.options.WebSocket)&&(r!==f.HttpTransportType.ServerSentEvents||this.options.EventSource))return this.logger.log(p.LogLevel.Debug,"Selecting transport '"+f.HttpTransportType[r]+"'."),r;this.logger.log(p.LogLevel.Debug,"Skipping transport '"+f.HttpTransportType[r]+"' because it is not supported in your environment.'")}else this.logger.log(p.LogLevel.Debug,"Skipping transport '"+f.HttpTransportType[r]+"' because it does not support the requested transfer format '"+f.TransferFormat[n]+"'.")}return null},m.prototype.isITransport=function(e){return e&&"object"==typeof e&&"connect"in e},m.prototype.changeState=function(e,t){return this.connectionState===e&&(this.connectionState=t,!0)},m.prototype.stopConnection=function(e){this.transport=void 0,(e=this.stopError||e)?this.logger.log(p.LogLevel.Error,"Connection disconnected with error '"+e+"'."):this.logger.log(p.LogLevel.Information,"Connection disconnected."),this.connectionState=2,this.onclose&&this.onclose(e)},m.prototype.resolveUrl=function(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if("undefined"==typeof window||!window||!window.document)throw new Error("Cannot resolve '"+e+"'.");var t=window.document.createElement("a");return t.href=e,this.logger.log(p.LogLevel.Information,"Normalizing '"+e+"' to '"+t.href+"'."),t.href},m.prototype.resolveNegotiateUrl=function(e){var t=e.indexOf("?"),n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",n+=-1===t?"":e.substring(t)},m);function m(e,t){void 0===t&&(t={}),this.features={},s.Arg.isRequired(e,"url"),this.logger=s.createLogger(t.logger),this.baseUrl=this.resolveUrl(e),(t=t||{}).logMessageContent=t.logMessageContent||!1;var n="undefined"==typeof window;n||"undefined"==typeof WebSocket||t.WebSocket?n&&!t.WebSocket&&c&&(t.WebSocket=c):t.WebSocket=WebSocket,n||"undefined"==typeof EventSource||t.EventSource?n&&!t.EventSource&&void 0!==l&&(t.EventSource=l):t.EventSource=EventSource,this.httpClient=t.httpClient||new o.DefaultHttpClient(this.logger),this.connectionState=2,this.options=t,this.onreceive=null,this.onclose=null}n.HttpConnection=g},{"./DefaultHttpClient":2,"./ILogger":10,"./ITransport":11,"./LongPollingTransport":14,"./ServerSentEventsTransport":16,"./Utils":18,"./WebSocketTransport":19}],7:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(r,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((c=c.apply(r,s||[])).next())})},o=this&&this.__generator||function(n,i){var o,r,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(s=2&t[0]?r.return:t[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,t[1])).done)return s;switch(r=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,r=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(n,a)}catch(e){t=[6,e],r=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r,s,a=e("./HandshakeProtocol"),c=e("./IHubProtocol"),l=e("./ILogger"),u=e("./Utils");(s=r=n.HubConnectionState||(n.HubConnectionState={}))[s.Disconnected=0]="Disconnected",s[s.Connected=1]="Connected";var d=(h.create=function(e,t,n){return new h(e,t,n)},Object.defineProperty(h.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),h.prototype.start=function(){return i(this,void 0,void 0,function(){var t,n,i=this;return o(this,function(e){switch(e.label){case 0:return t={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(l.LogLevel.Debug,"Starting HubConnection."),this.receivedHandshakeResponse=!1,n=new Promise(function(e,t){i.handshakeResolver=e,i.handshakeRejecter=t}),[4,this.connection.start(this.protocol.transferFormat)];case 1:return e.sent(),this.logger.log(l.LogLevel.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(t))];case 2:return e.sent(),this.logger.log(l.LogLevel.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,n];case 3:return e.sent(),this.connectionState=r.Connected,[2]}})})},h.prototype.stop=function(){return this.logger.log(l.LogLevel.Debug,"Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),this.connection.stop()},h.prototype.stream=function(e){for(var n=this,t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o,r=this.createStreamInvocation(e,t),s=new u.Subject;s.cancelCallback=function(){var e=n.createCancelInvocation(r.invocationId),t=n.protocol.writeMessage(e);return delete n.callbacks[r.invocationId],o.then(function(){return n.sendMessage(t)})},this.callbacks[r.invocationId]=function(e,t){t?s.error(t):e&&(e.type===c.MessageType.Completion?e.error?s.error(new Error(e.error)):s.complete():s.next(e.item))};var a=this.protocol.writeMessage(r);return o=this.sendMessage(a).catch(function(e){s.error(e),delete n.callbacks[r.invocationId]}),s},h.prototype.sendMessage=function(e){return this.resetKeepAliveInterval(),this.connection.send(e)},h.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this.createInvocation(e,t,!0),o=this.protocol.writeMessage(i);return this.sendMessage(o)},h.prototype.invoke=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this.createInvocation(e,n,!1);return new Promise(function(n,i){t.callbacks[o.invocationId]=function(e,t){t?i(t):e&&(e.type===c.MessageType.Completion?e.error?i(new Error(e.error)):n(e.result):i(new Error("Unexpected message type: "+e.type)))};var e=t.protocol.writeMessage(o);t.sendMessage(e).catch(function(e){i(e),delete t.callbacks[o.invocationId]})})},h.prototype.on=function(e,t){e&&t&&(e=e.toLowerCase(),this.methods[e]||(this.methods[e]=[]),-1===this.methods[e].indexOf(t)&&this.methods[e].push(t))},h.prototype.off=function(e,t){if(e){e=e.toLowerCase();var n=this.methods[e];if(n)if(t){var i=n.indexOf(t);-1!==i&&(n.splice(i,1),0===n.length&&delete this.methods[e])}else delete this.methods[e]}},h.prototype.onclose=function(e){e&&this.closedCallbacks.push(e)},h.prototype.processIncomingData=function(e){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(e=this.processHandshakeResponse(e),this.receivedHandshakeResponse=!0),e)for(var t=0,n=this.protocol.parseMessages(e,this.logger);t<n.length;t++){var i=n[t];switch(i.type){case c.MessageType.Invocation:this.invokeClientMethod(i);break;case c.MessageType.StreamItem:case c.MessageType.Completion:var o=this.callbacks[i.invocationId];null!=o&&(i.type===c.MessageType.Completion&&delete this.callbacks[i.invocationId],o(i));break;case c.MessageType.Ping:break;case c.MessageType.Close:this.logger.log(l.LogLevel.Information,"Close message received from server."),this.connection.stop(i.error?new Error("Server returned an error on close: "+i.error):void 0);break;default:this.logger.log(l.LogLevel.Warning,"Invalid message type: "+i.type+".")}}this.resetTimeoutPeriod()},h.prototype.processHandshakeResponse=function(e){var t,n,i;try{i=(t=this.handshakeProtocol.parseHandshakeResponse(e))[0],n=t[1]}catch(e){var o="Error parsing handshake response: "+e;this.logger.log(l.LogLevel.Error,o);var r=new Error(o);throw this.connection.stop(r),this.handshakeRejecter(r),r}if(n.error)throw o="Server returned handshake error: "+n.error,this.logger.log(l.LogLevel.Error,o),this.handshakeRejecter(o),this.connection.stop(new Error(o)),new Error(o);return this.logger.log(l.LogLevel.Debug,"Server handshake complete."),this.handshakeResolver(),i},h.prototype.resetKeepAliveInterval=function(){var e=this;this.cleanupPingTimer(),this.pingServerHandle=setTimeout(function(){return i(e,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:if(this.connectionState!==r.Connected)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}})})},this.keepAliveIntervalInMilliseconds)},h.prototype.resetTimeoutPeriod=function(){var e=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout(function(){return e.serverTimeout()},this.serverTimeoutInMilliseconds))},h.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},h.prototype.invokeClientMethod=function(t){var n=this,e=this.methods[t.target.toLowerCase()];if(e){if(e.forEach(function(e){return e.apply(n,t.arguments)}),t.invocationId){var i="Server requested a response, which is not supported in this version of the client.";this.logger.log(l.LogLevel.Error,i),this.connection.stop(new Error(i))}}else this.logger.log(l.LogLevel.Warning,"No client method with the name '"+t.target+"' found.")},h.prototype.connectionClosed=function(t){var n=this,i=this.callbacks;this.callbacks={},this.connectionState=r.Disconnected,this.handshakeRejecter&&this.handshakeRejecter(t),Object.keys(i).forEach(function(e){(0,i[e])(null,t||new Error("Invocation canceled due to connection being closed."))}),this.cleanupTimeout(),this.cleanupPingTimer(),this.closedCallbacks.forEach(function(e){return e.apply(n,[t])})},h.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},h.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},h.prototype.createInvocation=function(e,t,n){if(n)return{arguments:t,target:e,type:c.MessageType.Invocation};var i=this.id;return this.id++,{arguments:t,invocationId:i.toString(),target:e,type:c.MessageType.Invocation}},h.prototype.createStreamInvocation=function(e,t){var n=this.id;return this.id++,{arguments:t,invocationId:n.toString(),target:e,type:c.MessageType.StreamInvocation}},h.prototype.createCancelInvocation=function(e){return{invocationId:e,type:c.MessageType.CancelInvocation}},h);function h(e,t,n){var i=this;u.Arg.isRequired(e,"connection"),u.Arg.isRequired(t,"logger"),u.Arg.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.logger=t,this.protocol=n,this.connection=e,this.handshakeProtocol=new a.HandshakeProtocol,this.connection.onreceive=function(e){return i.processIncomingData(e)},this.connection.onclose=function(e){return i.connectionClosed(e)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.id=0,this.receivedHandshakeResponse=!1,this.connectionState=r.Disconnected,this.cachedPingMessage=this.protocol.writeMessage({type:c.MessageType.Ping})}n.HubConnection=d},{"./HandshakeProtocol":4,"./IHubProtocol":9,"./ILogger":10,"./Utils":18}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./HttpConnection"),o=e("./HubConnection"),r=e("./JsonHubProtocol"),s=e("./Loggers"),a=e("./Utils"),c=(l.prototype.configureLogging=function(e){return a.Arg.isRequired(e,"logging"),void 0!==e.log?this.logger=e:this.logger=new a.ConsoleLogger(e),this},l.prototype.withUrl=function(e,t){return a.Arg.isRequired(e,"url"),this.url=e,this.httpConnectionOptions="object"==typeof t?t:{transport:t},this},l.prototype.withHubProtocol=function(e){return a.Arg.isRequired(e,"protocol"),this.protocol=e,this},l.prototype.build=function(){var e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var t=new i.HttpConnection(this.url,e);return o.HubConnection.create(t,this.logger||s.NullLogger.instance,this.protocol||new r.JsonHubProtocol)},l);function l(){}n.HubConnectionBuilder=c},{"./HttpConnection":6,"./HubConnection":7,"./JsonHubProtocol":12,"./Loggers":13,"./Utils":18}],9:[function(e,t,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),(i=n.MessageType||(n.MessageType={}))[i.Invocation=1]="Invocation",i[i.StreamItem=2]="StreamItem",i[i.Completion=3]="Completion",i[i.StreamInvocation=4]="StreamInvocation",i[i.CancelInvocation=5]="CancelInvocation",i[i.Ping=6]="Ping",i[i.Close=7]="Close"},{}],10:[function(e,t,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),(i=n.LogLevel||(n.LogLevel={}))[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Information=2]="Information",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.None=6]="None"},{}],11:[function(e,t,n){"use strict";var i,o;Object.defineProperty(n,"__esModule",{value:!0}),(i=n.HttpTransportType||(n.HttpTransportType={}))[i.None=0]="None",i[i.WebSockets=1]="WebSockets",i[i.ServerSentEvents=2]="ServerSentEvents",i[i.LongPolling=4]="LongPolling",(o=n.TransferFormat||(n.TransferFormat={}))[o.Text=1]="Text",o[o.Binary=2]="Binary"},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./IHubProtocol"),c=e("./ILogger"),i=e("./ITransport"),l=e("./Loggers"),u=e("./TextMessageFormat"),o=(r.prototype.parseMessages=function(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=l.NullLogger.instance);for(var n=[],i=0,o=u.TextMessageFormat.parse(e);i<o.length;i++){var r=o[i],s=JSON.parse(r);if("number"!=typeof s.type)throw new Error("Invalid payload.");switch(s.type){case a.MessageType.Invocation:this.isInvocationMessage(s);break;case a.MessageType.StreamItem:this.isStreamItemMessage(s);break;case a.MessageType.Completion:this.isCompletionMessage(s);break;case a.MessageType.Ping:case a.MessageType.Close:break;default:t.log(c.LogLevel.Information,"Unknown message type '"+s.type+"' ignored.");continue}n.push(s)}return n},r.prototype.writeMessage=function(e){return u.TextMessageFormat.write(JSON.stringify(e))},r.prototype.isInvocationMessage=function(e){this.assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this.assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")},r.prototype.isStreamItemMessage=function(e){if(this.assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")},r.prototype.isCompletionMessage=function(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this.assertNotEmptyString(e.error,"Invalid payload for Completion message."),this.assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")},r.prototype.assertNotEmptyString=function(e,t){if("string"!=typeof e||""===e)throw new Error(t)},r);function r(){this.name="json",this.version=1,this.transferFormat=i.TransferFormat.Text}n.JsonHubProtocol=o},{"./IHubProtocol":9,"./ILogger":10,"./ITransport":11,"./Loggers":13,"./TextMessageFormat":17}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.log=function(e,t){},o.instance=new o,o);function o(){}n.NullLogger=i},{}],14:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(r,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((c=c.apply(r,s||[])).next())})},a=this&&this.__generator||function(n,i){var o,r,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(s=2&t[0]?r.return:t[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,t[1])).done)return s;switch(r=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,r=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(n,a)}catch(e){t=[6,e],r=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./AbortController"),c=e("./Errors"),l=e("./ILogger"),u=e("./ITransport"),d=e("./Utils"),r=(Object.defineProperty(s.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),s.prototype.connect=function(r,s){return i(this,void 0,void 0,function(){var t,n,i,o;return a(this,function(e){switch(e.label){case 0:if(d.Arg.isRequired(r,"url"),d.Arg.isRequired(s,"transferFormat"),d.Arg.isIn(s,u.TransferFormat,"transferFormat"),this.url=r,this.logger.log(l.LogLevel.Trace,"(LongPolling transport) Connecting."),s===u.TransferFormat.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return t={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},s===u.TransferFormat.Binary&&(t.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return n=e.sent(),this.updateHeaderToken(t,n),i=r+"&_="+Date.now(),this.logger.log(l.LogLevel.Trace,"(LongPolling transport) polling: "+i+"."),[4,this.httpClient.get(i,t)];case 2:return 200!==(o=e.sent()).statusCode?(this.logger.log(l.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+o.statusCode+"."),this.closeError=new c.HttpError(o.statusText||"",o.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,t),[2]}})})},s.prototype.getAccessToken=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,null]}})})},s.prototype.updateHeaderToken=function(e,t){e.headers||(e.headers={}),t?e.headers.Authorization="Bearer "+t:e.headers.Authorization&&delete e.headers.Authorization},s.prototype.poll=function(r,s){return i(this,void 0,void 0,function(){var t,n,i,o;return a(this,function(e){switch(e.label){case 0:e.trys.push([0,,8,9]),e.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:t=e.sent(),this.updateHeaderToken(s,t),e.label=3;case 3:return e.trys.push([3,5,,6]),n=r+"&_="+Date.now(),this.logger.log(l.LogLevel.Trace,"(LongPolling transport) polling: "+n+"."),[4,this.httpClient.get(n,s)];case 4:return 204===(i=e.sent()).statusCode?(this.logger.log(l.LogLevel.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==i.statusCode?(this.logger.log(l.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+i.statusCode+"."),this.closeError=new c.HttpError(i.statusText||"",i.statusCode),this.running=!1):i.content?(this.logger.log(l.LogLevel.Trace,"(LongPolling transport) data received. "+d.getDataDetail(i.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(i.content)):this.logger.log(l.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return o=e.sent(),this.running?o instanceof c.TimeoutError?this.logger.log(l.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=o,this.running=!1):this.logger.log(l.LogLevel.Trace,"(LongPolling transport) Poll errored after shutdown: "+o.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(l.LogLevel.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}})})},s.prototype.send=function(t){return i(this,void 0,void 0,function(){return a(this,function(e){return this.running?[2,d.sendMessage(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,t,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},s.prototype.stop=function(){return i(this,void 0,void 0,function(){var t,n;return a(this,function(e){switch(e.label){case 0:this.logger.log(l.LogLevel.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),e.label=1;case 1:return e.trys.push([1,,5,6]),[4,this.receiving];case 2:return e.sent(),this.logger.log(l.LogLevel.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),t={headers:{}},[4,this.getAccessToken()];case 3:return n=e.sent(),this.updateHeaderToken(t,n),[4,this.httpClient.delete(this.url,t)];case 4:return e.sent(),this.logger.log(l.LogLevel.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(l.LogLevel.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}})})},s.prototype.raiseOnClose=function(){if(this.onclose){var e="(LongPolling transport) Firing onclose event.";this.closeError&&(e+=" Error: "+this.closeError),this.logger.log(l.LogLevel.Trace,e),this.onclose(this.closeError)}},s);function s(e,t,n,i){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.pollAbort=new o.AbortController,this.logMessageContent=i,this.running=!1,this.onreceive=null,this.onclose=null}n.LongPollingTransport=r},{"./AbortController":1,"./Errors":3,"./ILogger":10,"./ITransport":11,"./Utils":18}],15:[function(p,e,f){(function(n){"use strict";var i,e=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(f,"__esModule",{value:!0});var o,c=p("./Errors"),l=p("./HttpClient"),u=p("./ILogger"),d=p("./Utils");if("undefined"==typeof XMLHttpRequest){var t="function"==typeof __webpack_require__?__non_webpack_require__:p;o=t("request")}var r,s=(r=l.HttpClient,e(h,r),h.prototype.send=function(r){var s=this;return new Promise(function(i,o){var e;e=d.isArrayBuffer(r.content)?n.from(r.content):r.content||"";var t=s.request(r.url,{body:e,encoding:"arraybuffer"===r.responseType?null:"utf8",headers:a({"X-Requested-With":"XMLHttpRequest"},r.headers),method:r.method,timeout:r.timeout},function(e,t,n){if(r.abortSignal&&(r.abortSignal.onabort=null),e)return"ETIMEDOUT"===e.code&&(s.logger.log(u.LogLevel.Warning,"Timeout from HTTP request."),o(new c.TimeoutError)),s.logger.log(u.LogLevel.Warning,"Error from HTTP request. "+e),void o(e);200<=t.statusCode&&t.statusCode<300?i(new l.HttpResponse(t.statusCode,t.statusMessage||"",n)):o(new c.HttpError(t.statusMessage||"",t.statusCode||0))});r.abortSignal&&(r.abortSignal.onabort=function(){t.abort(),o(new c.AbortError)})})},h.prototype.getCookieString=function(e){return this.cookieJar.getCookieString(e)},h);function h(e){var t=r.call(this)||this;if(void 0===o)throw new Error("The 'request' module could not be loaded.");return t.logger=e,t.cookieJar=o.jar(),t.request=o.defaults({jar:t.cookieJar}),t}f.NodeHttpClient=s}).call(this,p("buffer").Buffer)},{"./Errors":3,"./HttpClient":5,"./ILogger":10,"./Utils":18,buffer:23}],16:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(r,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((c=c.apply(r,s||[])).next())})},o=this&&this.__generator||function(n,i){var o,r,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(s=2&t[0]?r.return:t[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,t[1])).done)return s;switch(r=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,r=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(n,a)}catch(e){t=[6,e],r=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./ILogger"),l=e("./ITransport"),u=e("./Utils"),r=(s.prototype.connect=function(s,a){return i(this,void 0,void 0,function(){var t,r=this;return o(this,function(e){switch(e.label){case 0:return u.Arg.isRequired(s,"url"),u.Arg.isRequired(a,"transferFormat"),u.Arg.isIn(a,l.TransferFormat,"transferFormat"),this.logger.log(c.LogLevel.Trace,"(SSE transport) Connecting."),this.url=s,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(t=e.sent())&&(s+=(s.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(t)),e.label=2;case 2:return[2,new Promise(function(e,n){var i=!1;if(a===l.TransferFormat.Text){var t;if("undefined"!=typeof window)t=new r.eventSourceConstructor(s,{withCredentials:!0});else{var o=r.httpClient.getCookieString(s);t=new r.eventSourceConstructor(s,{withCredentials:!0,headers:{Cookie:o}})}try{t.onmessage=function(e){if(r.onreceive)try{r.logger.log(c.LogLevel.Trace,"(SSE transport) data received. "+u.getDataDetail(e.data,r.logMessageContent)+"."),r.onreceive(e.data)}catch(e){return void r.close(e)}},t.onerror=function(e){var t=new Error(e.data||"Error occurred");i?r.close(t):n(t)},t.onopen=function(){r.logger.log(c.LogLevel.Information,"SSE connected to "+r.url),r.eventSource=t,i=!0,e()}}catch(e){return void n(e)}}else n(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})]}})})},s.prototype.send=function(t){return i(this,void 0,void 0,function(){return o(this,function(e){return this.eventSource?[2,u.sendMessage(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,t,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},s.prototype.stop=function(){return this.close(),Promise.resolve()},s.prototype.close=function(e){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(e))},s);function s(e,t,n,i,o){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.logMessageContent=i,this.eventSourceConstructor=o,this.onreceive=null,this.onclose=null}n.ServerSentEventsTransport=r},{"./ILogger":10,"./ITransport":11,"./Utils":18}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.write=function(e){return""+e+o.RecordSeparator},o.parse=function(e){if(e[e.length-1]!==o.RecordSeparator)throw new Error("Message is incomplete.");var t=e.split(o.RecordSeparator);return t.pop(),t},o.RecordSeparatorCode=30,o.RecordSeparator=String.fromCharCode(o.RecordSeparatorCode),o);function o(){}n.TextMessageFormat=i},{}],18:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(r,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((c=c.apply(r,s||[])).next())})},p=this&&this.__generator||function(n,i){var o,r,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(s=2&t[0]?r.return:t[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,t[1])).done)return s;switch(r=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,r=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(n,a)}catch(e){t=[6,e],r=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var f=e("./ILogger"),o=e("./Loggers"),r=(s.isRequired=function(e,t){if(null==e)throw new Error("The '"+t+"' argument is required.")},s.isIn=function(e,t,n){if(!(e in t))throw new Error("Unknown "+n+" value: "+e+".")},s);function s(){}function g(e,t){var n="";return m(e)?(n="Binary data of length "+e.byteLength,t&&(n+=". Content: '"+a(e)+"'")):"string"==typeof e&&(n="String data of length "+e.length,t&&(n+=". Content: '"+e+"'")),n}function a(e){var t=new Uint8Array(e),n="";return t.forEach(function(e){n+="0x"+(e<16?"0":"")+e.toString(16)+" "}),n.substr(0,n.length-1)}function m(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}n.Arg=r,n.getDataDetail=g,n.formatArrayBuffer=a,n.isArrayBuffer=m,n.sendMessage=function(s,a,c,l,u,d,h){return i(this,void 0,void 0,function(){var t,n,i,o,r;return p(this,function(e){switch(e.label){case 0:return u?[4,u()]:[3,2];case 1:(i=e.sent())&&((t={}).Authorization="Bearer "+i,n=t),e.label=2;case 2:return s.log(f.LogLevel.Trace,"("+a+" transport) sending data. "+g(d,h)+"."),o=m(d)?"arraybuffer":"text",[4,c.post(l,{content:d,headers:n,responseType:o})];case 3:return r=e.sent(),s.log(f.LogLevel.Trace,"("+a+" transport) request complete. Response status: "+r.statusCode+"."),[2]}})})},n.createLogger=function(e){return void 0===e?new h(f.LogLevel.Information):null===e?o.NullLogger.instance:e.log?e:new h(e)};var c=(l.prototype.next=function(e){for(var t=0,n=this.observers;t<n.length;t++)n[t].next(e)},l.prototype.error=function(e){for(var t=0,n=this.observers;t<n.length;t++){var i=n[t];i.error&&i.error(e)}},l.prototype.complete=function(){for(var e=0,t=this.observers;e<t.length;e++){var n=t[e];n.complete&&n.complete()}},l.prototype.subscribe=function(e){return this.observers.push(e),new u(this,e)},l);function l(){this.observers=[]}n.Subject=c;var u=(d.prototype.dispose=function(){var e=this.subject.observers.indexOf(this.observer);-1<e&&this.subject.observers.splice(e,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch(function(e){})},d);function d(e,t){this.subject=e,this.observer=t}n.SubjectSubscription=u;var h=(v.prototype.log=function(e,t){if(e>=this.minimumLogLevel)switch(e){case f.LogLevel.Critical:case f.LogLevel.Error:console.error("["+(new Date).toISOString()+"] "+f.LogLevel[e]+": "+t);break;case f.LogLevel.Warning:console.warn("["+(new Date).toISOString()+"] "+f.LogLevel[e]+": "+t);break;case f.LogLevel.Information:console.info("["+(new Date).toISOString()+"] "+f.LogLevel[e]+": "+t);break;default:console.log("["+(new Date).toISOString()+"] "+f.LogLevel[e]+": "+t)}},v);function v(e){this.minimumLogLevel=e}n.ConsoleLogger=h},{"./ILogger":10,"./Loggers":13}],19:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(r,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((c=c.apply(r,s||[])).next())})},a=this&&this.__generator||function(n,i){var o,r,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(s=2&t[0]?r.return:t[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,t[1])).done)return s;switch(r=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,r=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(n,a)}catch(e){t=[6,e],r=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./ILogger"),l=e("./ITransport"),u=e("./Utils"),o=(r.prototype.connect=function(r,s){return i(this,void 0,void 0,function(){var t,o=this;return a(this,function(e){switch(e.label){case 0:return u.Arg.isRequired(r,"url"),u.Arg.isRequired(s,"transferFormat"),u.Arg.isIn(s,l.TransferFormat,"transferFormat"),this.logger.log(c.LogLevel.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(t=e.sent())&&(r+=(r.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(t)),e.label=2;case 2:return[2,new Promise(function(t,n){var i;r=r.replace(/^http/,"ws");var e=o.httpClient.getCookieString(r);"undefined"==typeof window&&e&&(i=new o.webSocketConstructor(r,void 0,{headers:{Cookie:""+e}})),i=i||new o.webSocketConstructor(r),s===l.TransferFormat.Binary&&(i.binaryType="arraybuffer"),i.onopen=function(e){o.logger.log(c.LogLevel.Information,"WebSocket connected to "+r+"."),o.webSocket=i,t()},i.onerror=function(e){var t=null;"undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent&&(t=e.error),n(t)},i.onmessage=function(e){o.logger.log(c.LogLevel.Trace,"(WebSockets transport) data received. "+u.getDataDetail(e.data,o.logMessageContent)+"."),o.onreceive&&o.onreceive(e.data)},i.onclose=function(e){return o.close(e)}})]}})})},r.prototype.send=function(e){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(c.LogLevel.Trace,"(WebSockets transport) sending data. "+u.getDataDetail(e,this.logMessageContent)+"."),this.webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},r.prototype.stop=function(){return this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0,this.close(void 0)),Promise.resolve()},r.prototype.close=function(e){this.logger.log(c.LogLevel.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!e||!1!==e.wasClean&&1e3===e.code?this.onclose():this.onclose(new Error("WebSocket closed with status code: "+e.code+" ("+e.reason+").")))},r);function r(e,t,n,i,o){this.logger=n,this.accessTokenFactory=t,this.logMessageContent=i,this.webSocketConstructor=o,this.httpClient=e,this.onreceive=null,this.onclose=null}n.WebSocketTransport=o},{"./ILogger":10,"./ITransport":11,"./Utils":18}],20:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("./Errors"),a=e("./HttpClient"),c=e("./ILogger"),l=(r=a.HttpClient,o(u,r),u.prototype.send=function(o){var r=this;return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new s.AbortError):o.method?o.url?new Promise(function(e,t){var n=new XMLHttpRequest;n.open(o.method,o.url,!0),n.withCredentials=!0,n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var i=o.headers;i&&Object.keys(i).forEach(function(e){n.setRequestHeader(e,i[e])}),o.responseType&&(n.responseType=o.responseType),o.abortSignal&&(o.abortSignal.onabort=function(){n.abort(),t(new s.AbortError)}),o.timeout&&(n.timeout=o.timeout),n.onload=function(){o.abortSignal&&(o.abortSignal.onabort=null),200<=n.status&&n.status<300?e(new a.HttpResponse(n.status,n.statusText,n.response||n.responseText)):t(new s.HttpError(n.statusText,n.status))},n.onerror=function(){r.logger.log(c.LogLevel.Warning,"Error from HTTP request. "+n.status+": "+n.statusText+"."),t(new s.HttpError(n.statusText,n.status))},n.ontimeout=function(){r.logger.log(c.LogLevel.Warning,"Timeout from HTTP request."),t(new s.TimeoutError)},n.send(o.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},u);function u(e){var t=r.call(this)||this;return t.logger=e,t}n.XhrHttpClient=l},{"./Errors":3,"./HttpClient":5,"./ILogger":10}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.VERSION="1.1.4";var i=e("./Errors");n.AbortError=i.AbortError,n.HttpError=i.HttpError,n.TimeoutError=i.TimeoutError;var o=e("./HttpClient");n.HttpClient=o.HttpClient,n.HttpResponse=o.HttpResponse;var r=e("./DefaultHttpClient");n.DefaultHttpClient=r.DefaultHttpClient;var s=e("./HubConnection");n.HubConnection=s.HubConnection,n.HubConnectionState=s.HubConnectionState;var a=e("./HubConnectionBuilder");n.HubConnectionBuilder=a.HubConnectionBuilder;var c=e("./IHubProtocol");n.MessageType=c.MessageType;var l=e("./ILogger");n.LogLevel=l.LogLevel;var u=e("./ITransport");n.HttpTransportType=u.HttpTransportType,n.TransferFormat=u.TransferFormat;var d=e("./Loggers");n.NullLogger=d.NullLogger;var h=e("./JsonHubProtocol");n.JsonHubProtocol=h.JsonHubProtocol},{"./DefaultHttpClient":2,"./Errors":3,"./HttpClient":5,"./HubConnection":7,"./HubConnectionBuilder":8,"./IHubProtocol":9,"./ILogger":10,"./ITransport":11,"./JsonHubProtocol":12,"./Loggers":13}],22:[function(e,t,n){"use strict";n.byteLength=function(e){var t=d(e),n=t[0],i=t[1];return 3*(n+i)/4-i},n.toByteArray=function(e){var t,n,i=d(e),o=i[0],r=i[1],s=new u(function(e,t){return 3*(e+t)/4-t}(o,r)),a=0,c=0<r?o-4:o;for(n=0;n<c;n+=4)t=l[e.charCodeAt(n)]<<18|l[e.charCodeAt(n+1)]<<12|l[e.charCodeAt(n+2)]<<6|l[e.charCodeAt(n+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;2===r&&(t=l[e.charCodeAt(n)]<<2|l[e.charCodeAt(n+1)]>>4,s[a++]=255&t);1===r&&(t=l[e.charCodeAt(n)]<<10|l[e.charCodeAt(n+1)]<<4|l[e.charCodeAt(n+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t);return s},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],r=0,s=n-i;r<s;r+=16383)o.push(c(e,r,s<r+16383?s:r+16383));1==i?(t=e[n-1],o.push(a[t>>2]+a[t<<4&63]+"==")):2==i&&(t=(e[n-2]<<8)+e[n-1],o.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return o.join("")};for(var a=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,r=i.length;o<r;++o)a[o]=i[o],l[i.charCodeAt(o)]=o;function d(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,o,r=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),r.push(a[(o=i)>>18&63]+a[o>>12&63]+a[o>>6&63]+a[63&o]);return r.join("")}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],23:[function(O,e,j){(function(d){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var i=O("base64-js"),r=O("ieee754"),e="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;j.Buffer=d,j.SlowBuffer=function(e){+e!=e&&(e=0);return d.alloc(+e)},j.INSPECT_MAX_BYTES=50;var n=2147483647;function s(e){if(n<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,d.prototype),t}function d(e,t,n){if("number"!=typeof e)return o(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}function o(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),i=s(n),o=i.write(e,t);o!==n&&(i=i.slice(0,o));return i}(e,t);if(ArrayBuffer.isView(e))return l(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return Object.setPrototypeOf(i,d.prototype),i}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return d.from(i,t,n);var o=function(e){if(d.isBuffer(e)){var t=0|u(e.length),n=s(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(void 0!==e.length)return"number"!=typeof e.length||B(e.length)?s(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return a(e),s(e<0?0:0|u(e))}function l(e){for(var t=e.length<0?0:0|u(e.length),n=s(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function u(e){if(n<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function h(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||R(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=2<arguments.length&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return _(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return x(e).length;default:if(o)return i?-1:_(e).length;t=(""+t).toLowerCase(),o=!0}}function p(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function f(e,t,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),B(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=d.from(t,i)),d.isBuffer(t))return 0===t.length?-1:g(e,t,n,i,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,i,o){var r,s=1,a=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a/=s=2,c/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var u=-1;for(r=n;r<a;r++)if(l(e,r)===l(t,-1===u?0:r-u)){if(-1===u&&(u=r),r-u+1===c)return u*s}else-1!==u&&(r-=r-u),u=-1}else for(a<n+c&&(n=a-c),r=n;0<=r;r--){for(var d=!0,h=0;h<c;h++)if(l(e,r+h)!==l(t,h)){d=!1;break}if(d)return r}return-1}function m(e,t,n,i){n=Number(n)||0;var o=e.length-n;(!i||o<(i=Number(i)))&&(i=o);var r=t.length;r/2<i&&(i=r/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(B(a))return s;e[n+s]=a}return s}function v(e,t,n,i){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function y(e,t,n,i){return U(function(e,t){for(var n,i,o,r=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,o=n%256,r.push(o),r.push(i);return r}(t,e.length-n),e,n,i)}function w(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function b(e,t,n){n=Math.min(e.length,n);for(var i=[],o=t;o<n;){var r,s,a,c,l=e[o],u=null,d=239<l?4:223<l?3:191<l?2:1;if(o+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(r=e[o+1]))&&127<(c=(31&l)<<6|63&r)&&(u=c);break;case 3:r=e[o+1],s=e[o+2],128==(192&r)&&128==(192&s)&&2047<(c=(15&l)<<12|(63&r)<<6|63&s)&&(c<55296||57343<c)&&(u=c);break;case 4:r=e[o+1],s=e[o+2],a=e[o+3],128==(192&r)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&l)<<18|(63&r)<<12|(63&s)<<6|63&a)&&c<1114112&&(u=c)}null===u?(u=65533,d=1):65535<u&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),o+=d}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=S));return n}(i)}j.kMaxLength=n,(d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=function(e,t,n){return o(e,t,n)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,n){return o=t,r=n,a(i=e),i<=0||void 0===o?s(i):"string"==typeof r?s(i).fill(o,r):s(i).fill(o);var i,o,r},d.allocUnsafe=function(e){return c(e)},d.allocUnsafeSlow=function(e){return c(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(R(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),R(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,o=0,r=Math.min(n,i);o<r;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var i=d.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var r=e[n];if(R(r,Uint8Array)&&(r=d.from(r)),!d.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(i,o),o+=r.length}return i},d.byteLength=h,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?b(this,0,e):function(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return b(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}.apply(this,arguments)},d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){var e="",t=j.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},e&&(d.prototype[e]=d.prototype.inspect),d.prototype.compare=function(e,t,n,i,o){if(R(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(o<=i&&n<=t)return 0;if(o<=i)return-1;if(n<=t)return 1;if(this===e)return 0;for(var r=(o>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(r,s),c=this.slice(i,o),l=e.slice(t,n),u=0;u<a;++u)if(c[u]!==l[u]){r=c[u],s=l[u];break}return r<s?-1:s<r?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return f(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return f(this,e,t,n,!1)},d.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var r,s,a,c,l,u,d=!1;;)switch(i){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return l=t,u=n,U(_(e,(c=this).length-l),c,l,u);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return v(this,e,t,n);case"base64":return r=this,s=t,a=n,U(x(e),r,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,n);default:if(d)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),d=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function T(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(127&e[o]);return i}function E(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}function I(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||i<n)&&(n=i);for(var o="",r=t;r<n;++r)o+=D[e[r]];return o}function C(e,t,n){for(var i=e.slice(t,n),o="",r=0;r<i.length;r+=2)o+=String.fromCharCode(i[r]+256*i[r+1]);return o}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,n,i,o,r){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<r)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function L(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function A(e,t,n,i,o){return t=+t,n>>>=0,o||L(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function P(e,t,n,i,o){return t=+t,n>>>=0,o||L(e,0,n,8),r.write(e,t,n,i,52,8),n+8}d.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,d.prototype),i},d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var i=this[e],o=1,r=0;++r<t&&(o*=256);)i+=this[e+r]*o;return i},d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var i=this[e+--t],o=1;0<t&&(o*=256);)i+=this[e+--t]*o;return i},d.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var i=this[e],o=1,r=0;++r<t&&(o*=256);)i+=this[e+r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var i=t,o=1,r=this[e+--i];0<i&&(o*=256);)r+=this[e+--i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},d.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),r.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),r.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),r.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),r.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||k(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,r=0;for(this[t]=255&e;++r<n&&(o*=256);)this[t+r]=e/o&255;return t+n},d.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||k(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,r=1;for(this[t+o]=255&e;0<=--o&&(r*=256);)this[t+o]=e/r&255;return t+n},d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var o=Math.pow(2,8*n-1);k(this,e,t,n,o-1,-o)}var r=0,s=1,a=0;for(this[t]=255&e;++r<n&&(s*=256);)e<0&&0===a&&0!==this[t+r-1]&&(a=1),this[t+r]=(e/s>>0)-a&255;return t+n},d.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var o=Math.pow(2,8*n-1);k(this,e,t,n,o-1,-o)}var r=n-1,s=1,a=0;for(this[t+r]=255&e;0<=--r&&(s*=256);)e<0&&0===a&&0!==this[t+r+1]&&(a=1),this[t+r]=(e/s>>0)-a&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,i){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,i||0===i||(i=this.length),t>=e.length&&(t=e.length),t=t||0,0<i&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,i);else if(this===e&&n<t&&t<i)for(var r=o-1;0<=r;--r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),t);return o},d.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!d.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var o=e.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var r;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(r=t;r<n;++r)this[r]=e;else{var s=d.isBuffer(e)?e:d.from(e,i),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=s[r%a]}return this};var t=/[^+/0-9A-Za-z-_]/g;function _(e,t){var n;t=t||1/0;for(var i=e.length,o=null,r=[],s=0;s<i;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&r.push(239,191,189);continue}if(s+1===i){-1<(t-=3)&&r.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&r.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&r.push(239,191,189);if(o=null,n<128){if(--t<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function x(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(t,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function R(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function B(e){return e!=e}var D=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var i=16*n,o=0;o<16;++o)t[i+o]=e[n]+e[o];return t}()}).call(this,O("buffer").Buffer)},{"base64-js":22,buffer:23,ieee754:25}],24:[function(V,n,i){(function(N,F){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var e,t;e=this,t=function(){"use strict";function c(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,t=void 0,o=void 0,s=function(e,t){h[i]=e,h[i+1]=t,2===(i+=2)&&(o?o(p):y())};var e="undefined"!=typeof window?window:void 0,r=e||{},a=r.MutationObserver||r.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==N&&"[object process]"==={}.toString.call(N),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(p,1)}}var h=new Array(1e3);function p(){for(var e=0;e<i;e+=2){(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0}i=0}var f,g,m,v,y=void 0;function w(e,t){var n=this,i=new this.constructor(T);void 0===i[S]&&D(i);var o=n._state;if(o){var r=arguments[o-1];s(function(){return R(o,i,r,n._result)})}else x(n,i,e,t);return i}function b(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(T);return L(t,e),t}y=l?function(){return N.nextTick(p)}:a?(g=0,m=new a(p),v=document.createTextNode(""),m.observe(v,{characterData:!0}),function(){v.data=g=++g%2}):u?((f=new MessageChannel).port1.onmessage=p,function(){return f.port2.postMessage(0)}):(void 0===e&&"function"==typeof V?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(p)}:d()}catch(e){return d()}}:d)();var S=Math.random().toString(36).substring(2);function T(){}var E=void 0,I=1,C=2;function M(e,i,o){s(function(t){var n=!1,e=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(o,i,function(e){n||(n=!0,(i!==e?L:P)(t,e))},function(e){n||(n=!0,_(t,e))},t._label);!n&&e&&(n=!0,_(t,e))},e)}function k(e,t,n){var i,o;t.constructor===e.constructor&&n===w&&t.constructor.resolve===b?(i=e,(o=t)._state===I?P(i,o._result):o._state===C?_(i,o._result):x(o,void 0,function(e){return L(i,e)},function(e){return _(i,e)})):void 0!==n&&c(n)?M(e,t,n):P(e,t)}function L(t,e){if(t===e)_(t,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(i=e),null===i||"object"!=o&&"function"!=o)P(t,e);else{var n=void 0;try{n=e.then}catch(e){return void _(t,e)}k(t,e,n)}var i,o}function A(e){e._onerror&&e._onerror(e._result),U(e)}function P(e,t){e._state===E&&(e._result=t,e._state=I,0!==e._subscribers.length&&s(U,e))}function _(e,t){e._state===E&&(e._state=C,e._result=t,s(A,e))}function x(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+I]=n,o[r+C]=i,0===r&&e._state&&s(U,e)}function U(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,o=void 0,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?R(n,i,o,r):o(r);e._subscribers.length=0}}function R(e,t,n,i){var o=c(n),r=void 0,s=void 0,a=!0;if(o){try{r=n(i)}catch(e){a=!1,s=e}if(t===r)return void _(t,new TypeError("A promises callback cannot return that same promise."))}else r=i;t._state!==E||(o&&a?L(t,r):!1===a?_(t,s):e===I?P(t,r):e===C&&_(t,r))}var B=0;function D(e){e[S]=B++,e._state=void 0,e._result=void 0,e._subscribers=[]}var O=(j.prototype._enumerate=function(e){for(var t=0;this._state===E&&t<e.length;t++)this._eachEntry(e[t],t)},j.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===b){var o=void 0,r=void 0,s=!1;try{o=t.then}catch(e){s=!0,r=e}if(o===w&&t._state!==E)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===H){var a=new n(T);s?_(a,r):k(a,t,o),this._willSettleAt(a,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},j.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===E&&(this._remaining--,e===C?_(i,n):this._result[t]=n),0===this._remaining&&P(i,this._result)},j.prototype._willSettleAt=function(e,t){var n=this;x(e,void 0,function(e){return n._settledAt(I,t,e)},function(e){return n._settledAt(C,t,e)})},j);function j(e,t){this._instanceConstructor=e,this.promise=new e(T),this.promise[S]||D(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&P(this.promise,this._result))):_(this.promise,new Error("Array Methods must be provided an Array"))}var H=(q.prototype.catch=function(e){return this.then(null,e)},q.prototype.finally=function(t){var n=this.constructor;return c(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},q);function q(e){this[S]=B++,this._result=this._state=void 0,this._subscribers=[],T!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(t,e){try{e(function(e){L(t,e)},function(e){_(t,e)})}catch(e){_(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return H.prototype.then=w,H.all=function(e){return new O(this,e).promise},H.race=function(o){var r=this;return n(o)?new r(function(e,t){for(var n=o.length,i=0;i<n;i++)r.resolve(o[i]).then(e,t)}):new r(function(e,t){return t(new TypeError("You must pass an array to race."))})},H.resolve=b,H.reject=function(e){var t=new this(T);return _(t,e),t},H._setScheduler=function(e){o=e},H._setAsap=function(e){s=e},H._asap=s,H.polyfill=function(){var e=void 0;if(void 0!==F)e=F;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=H},H.Promise=H},"object"==typeof i&&void 0!==n?n.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}).call(this,V("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:26}],25:[function(e,t,n){n.read=function(e,t,n,i,o){var r,s,a=8*o-i-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?o-1:0,h=n?-1:1,p=e[t+d];for(d+=h,r=p&(1<<-u)-1,p>>=-u,u+=a;0<u;r=256*r+e[t+d],d+=h,u-=8);for(s=r&(1<<-u)-1,r>>=-u,u+=i;0<u;s=256*s+e[t+d],d+=h,u-=8);if(0===r)r=1-l;else{if(r===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),r-=l}return(p?-1:1)*s*Math.pow(2,r-i)},n.write=function(e,t,n,i,o,r){var s,a,c,l=8*r-o-1,u=(1<<l)-1,d=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:r-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),2<=(t+=1<=s+d?h/c:h*Math.pow(2,1-d))*c&&(s++,c/=2),u<=s+d?(a=0,s=u):1<=s+d?(a=(t*c-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));8<=o;e[n+p]=255&a,p+=f,a/=256,o-=8);for(s=s<<o|a,l+=o;0<l;e[n+p]=255&s,p+=f,s/=256,l-=8);e[n+p-f]|=128*g}},{}],26:[function(e,t,n){var i,o,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(e){i=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var l,u=[],d=!1,h=-1;function p(){d&&l&&(d=!1,l.length?u=l.concat(u):h=-1,u.length&&f())}function f(){if(!d){var e=c(p);d=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,d=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new g(e,t)),1!==u.length||d||c(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./modules/AnalyticsRotationRulesManager"),o=e("./common/Utilities"),r=e("./common/Timers"),s=e("./common/EventManager"),a=e("./modules/BrowserStateTracker"),c=e("./modules/PlacementManager"),l=e("./modules/DynamicPlacements/Loader"),u=e("./common/Logging"),d=e("./modules/ExtensionCommunication"),h=e("./modules/API"),p=e("./modules/Demo"),f=e("./common/Parameters"),g=e("./modules/SAS"),m=e("./modules/RealtimeMessaging"),v=e("./modules/Messaging"),y=e("es6-promise"),w=e("./modules/customPolyfill"),b=e("./modules/SinglePageApplicationManager"),S=e("./modules/aps/aps"),T=e("./modules/DynamicPlacements/megafone/Megafone");if(y.polyfill(),w.CustomPolyfill.init(),(!document.all||document.addEventListener)&&window===window.top){r.start(),s.start();var E=new m.RealtimeMessaging(f.global);if(n.RtMessaging=new v.Messaging(E),E.waitForReadiness(function(){n.RtMessaging.initialize(E.errorLog)}),a.start(),l.start(),c.start(),n.analyticsRotationRulesManager=new i.AnalyticsRotationRulesManager(s),n.analyticsRotationRulesManager.start(),f.config.integrations.dfp)e("./modules/dfp/dfp").start();if(d.start(),h.start(),f.config.integrations.sas&&g.SAS.getSasApi(function(e){e?(u.info("Sas api loaded","MainModule"),new g.SAS(c,e,f.global,o.BrowserUtils,u).start()):u.info("Sas api not loaded","MainModule")}),(new p.DemoModule).run(),!1!==f.config.spa)new b.SinglePageApplicationManager(s).start();new S.AmazonPublisherServicesIntegration,T.Megafone.start(),s.postStart()}},{"./common/EventManager":28,"./common/Logging":29,"./common/Parameters":30,"./common/Timers":31,"./common/Utilities":32,"./modules/API":34,"./modules/AnalyticsRotationRulesManager":35,"./modules/BrowserStateTracker":36,"./modules/Demo":37,"./modules/DynamicPlacements/Loader":39,"./modules/DynamicPlacements/megafone/Megafone":44,"./modules/ExtensionCommunication":48,"./modules/Messaging":49,"./modules/PlacementManager":50,"./modules/RealtimeMessaging":51,"./modules/SAS":52,"./modules/SinglePageApplicationManager":53,"./modules/aps/aps":54,"./modules/customPolyfill":58,"./modules/dfp/dfp":60,"es6-promise":24}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Timers"),r=e("./Parameters"),i=e("./../interfaces/Enums"),s={},a={};function c(t){s[t]=function(e){h(t,e)}}function l(t){var n;s[t]=function(e){o.clear(n),n=o.timeout(function(){h(t,e)},100)}}function u(){window.addEventListener("keydown",s[6]),document.body.addEventListener("mousemove",s[0]),r.global.device!=i.DeviceType.Desktop&&(window.addEventListener("pageshow",s.pageshow),window.addEventListener("pagehide",s.pagehide)),document.hasFocus&&(document.hasFocus()?s[4](null):s[3](null))}function d(e,t){a[e]?a[e].push(t):a[e]=[t]}function h(e,t){if(a[e])for(var n=a[e].length;-1<--n;)a[e][n](t)}n.listen=d,n.unlisten=function(e,t){if(a[e]){var n=a[e].indexOf(t);-1<n&&a[e].splice(n,1)}},n.emit=h,n.start=function(){var t,n,i;c(3),c(4),c(7),l(1),l(2),l(5),c(6),s[0]=(i=!1,function(e){t==e.screenX||n==e.screenY||i||(t=e.screenX,n=e.screenY,i=!0,h(0,e),o.timeout(function(){i=!1},1e3))}),r.global.useExternalEvents?window.addEventListener("message",function(e){var t=JSON.parse(e.data);s[t.action]&&s[t.action](t)}):(window.addEventListener("scroll",s[1],!0),window.addEventListener("touchmove",s[1]),window.addEventListener("resize",s[2]),window.addEventListener("blur",s[3]),window.addEventListener("focus",s[4]),window.addEventListener("keypress",s[5]),window.addEventListener("click",s[7]))},n.postStart=function(){d(8,u),"complete"===document.readyState&&h(8,null),window.addEventListener("load",function(e){h(8,e)})}},{"./../interfaces/Enums":33,"./Parameters":30,"./Timers":31}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./Parameters"),s=e("./../interfaces/Enums");function i(e,t,n){if(((r.config.log||{}).level||s.LogLevel.None)>n)return!1;var i,o="["+(i=new Date).getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"] ["+t+"]"+e;if(!o.match((r.config.log||{}).filter||""))return!1;switch(n){case s.LogLevel.Info:return console.info(o),!0;case s.LogLevel.Warning:return console.warn(o),!0;case s.LogLevel.Error:return console.error(o),!0}return!1}n.info=function(e,t){return i(e,t,s.LogLevel.Info)},n.warn=function(e,t){return i(e,t,s.LogLevel.Warning)},n.error=function(e,t){return i(e,t,s.LogLevel.Error)}},{"./../interfaces/Enums":33,"./Parameters":30}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=e("../interfaces/Enums");n.config=window.__tgconf,n.global={appId:n.config.appId||"",session:n.config.sessionId||"0",context:n.config.contextId||"0",section:n.config.section||"",country:n.config.g_country,region:n.config.g_region,device:"Smartphone"===(i=n.config.d_type)?o.DeviceType.Mobile:"Tablet"===i?o.DeviceType.Tablet:o.DeviceType.Desktop,operatingSystem:n.config.d_os,browser:n.config.d_browser,rootPath:n.config.rootPath,messagingPath:n.config.messagingPath,device_name:n.config.d_type},n.updateConfiguration=function(e){n.config.sessionId=e.sessionId,n.config.contextId=e.contextId,n.config.section=e.section,n.config.znl=e.znl,n.config.dads=e.dads,n.global.session=e.sessionId,n.global.context=e.contextId,n.global.section=e.section}},{"../interfaces/Enums":33}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Utilities"),o={};function r(){var n=+new Date;i.foreach(o,function(e){var t=o[e];if(t)switch(t.type){case 0:t.timeElapsed+=n-t.lastTick,t.lastTick=n,t.timeElapsed>t.delay&&(t.callback(),delete o[e]);break;case 1:t.timeElapsed+=n-t.lastTick,t.lastTick=n,t.timeElapsed>t.delay&&(t.callback(),t.timeElapsed-=t.delay)}})}function s(e,t,n){var i=Math.floor(1e8*Math.random());return o[i]={callback:e,delay:t,timeElapsed:0,lastTick:+new Date,type:n},i}n.timeout=function(e,t){return s(e,t,0)},n.interval=function(e,t){return s(e,t,1)},n.clear=function(e){o[e]&&delete o[e]},n.start=function(){window.setInterval(r,100)}},{"./Utilities":32}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Parameters"),o=e("./Timers");function r(e){if(!e)return 0;var t=e.replace(/px/,"");return""==t||"auto"==t?0:parseInt(t)}function s(e,t){for(var n=t.length-1;-1<n;n--)-1<e.indexOf(t[n])||e.push(t[n]);return e}n.foreach=function(e,t){Object.keys(e).forEach(t)},n.filter=function(e,t){for(var n=[],i=e.length;-1<--i;)t(e[i])&&n.push(e[i]);return n},n.getViewport=function(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,top:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0}},n.getDocumentHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},n.extendCustomTargeting=function(e,t){for(var n in t)e[n]?e[n]=s(e[n],t[n]):e[n]=t[n];return e};var a,c,l=new RegExp("rect\\(((?:[0-9]*px\\s?)*)\\)");function u(e,t,n){var i="",o="";if(n)if("object"==typeof n)i="; expires="+n.toUTCString();else{var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toUTCString()}c&&(o="; domain="+c),document.cookie=e+"="+t+i+o+"; path=/; samesite=lax"}function d(e){u(e,"",-1)}n.getElementSize=function(e){if(e.style&&e.style.clip){var t=e.style.clip.replace(/,/g,"").match(l);if(t)return{width:r((t=t[1].split(" "))[1])-r(t[3]),height:r(t[2])-r(t[0])}}return{width:e.offsetWidth||r(e.style.width)||0,height:e.offsetHeight||r(e.style.height)||0}},n.setCssProperty=function(e,t,n,i){e.style.setProperty(t,n,i)},n.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},n.removeClass=function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)","g");e.className=e.className.replace(n," ").trim()},n.executeWhen=function(e,t){var n=5,i=o.interval(function(){if(n--,t())return e(),void o.clear(i);0==n&&o.clear(i)},1e3)},n.generateBeacon=function(e){e=e.replace(/\[RANDOM\]/g,Math.floor(1e8*Math.random()).toString());var t=document.createElement("img");t.onload=function(){document.body.removeChild(t)},t.setAttribute("style","width:0;height:0;display:none;"),t.setAttribute("src",e),document.body.appendChild(t)},a=n.Cookies||(n.Cookies={}),c=i.config.tld||"",a.IdleCookieName="___iat_idl",a.AdhesionDismissedCookieName="___iat_adhd",a.createCookie=function(e,t,n){window.__tgconf.isoo?d(e):window.__tgconf.cookies&&u(e,t,n)},a.eraseCookie=d,a.readCookie=function(e){e+="=";for(var t=document.cookie.split(";"),n=t.length;-1<--n;){var i=t[n].trim();if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""};var h=(p.getTopMostPageUrl=function(){var e=p.getTopMostWindow(),t="";if(e.isThirdPartyIFrame){var n=e.topWindow.document.referrer;t=n&&0!==n.length?n:e.topWindow.location.href}return e.isThirdPartyIFrame?t:e.topWindow.location.href},p.getTopMostWindow=function(){for(var e,t=!1,n=e=window;n!==window.top;){try{n.frameElement?e=n.parent:t=!0}catch(e){t=!0}n=n.parent}return{isThirdPartyIFrame:t,topWindow:e}},p.getTopMostHostname=function(){var e=p.getTopMostWindow(),t="";if(e.isThirdPartyIFrame){var n=e.topWindow.document.referrer;t=n&&0<n.length?p.sanitizeReferrer(n):e.topWindow.location.hostname}return e.isThirdPartyIFrame?t:e.topWindow.location.hostname},p.sanitizeReferrer=function(e){return(e=e.toLowerCase().replace("https://","").replace("http://","").split("/").shift()||"").split(":").shift()||""},p);function p(){}n.BrowserUtils=h;var f=(g.padRight=function(e,t,n){void 0===n&&(n=" ");for(var i=[],o=0;o<t;o++){var r=e.charAt(o);""===r?i.push(n):i.push(r)}return i.join("")},g);function g(){}n.StringUtils=f},{"./Parameters":30,"./Timers":31}],33:[function(e,t,n){"use strict";var i,o,r,s,a,c,l,u,d,h,p;Object.defineProperty(n,"__esModule",{value:!0}),(i=n.EntryState||(n.EntryState={}))[i.Request=0]="Request",i[i.Response=1]="Response",i[i.Blank=2]="Blank",(o=n.DeviceType||(n.DeviceType={}))[o.Desktop=0]="Desktop",o[o.Tablet=1]="Tablet",o[o.Mobile=2]="Mobile",(r=n.LogLevel||(n.LogLevel={}))[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.None=4]="None",(s=n.TimerType||(n.TimerType={}))[s.Timeout=0]="Timeout",s[s.Interval=1]="Interval",(a=n.EventType||(n.EventType={}))[a.MouseMove=0]="MouseMove",a[a.Scroll=1]="Scroll",a[a.Resize=2]="Resize",a[a.Blur=3]="Blur",a[a.Focus=4]="Focus",a[a.KeyPress=5]="KeyPress",a[a.KeyDown=6]="KeyDown",a[a.Click=7]="Click",a[a.PageLoad=8]="PageLoad",a[a.LocationChanged=9]="LocationChanged",a[a.MessageSent=10]="MessageSent",a[a.MessageReceived=11]="MessageReceived",a[a.MessagingConnected=12]="MessagingConnected",a[a.MessagingDisconnected=13]="MessagingDisconnected",a[a.TGI=14]="TGI",a[a.RealtimeDelivery=15]="RealtimeDelivery",a[a.DemoRedSquare=16]="DemoRedSquare",a[a.DemoReplaceAllAds=17]="DemoReplaceAllAds",a[a.StateChanged=18]="StateChanged",a[a.AdUnitCreated=19]="AdUnitCreated",a[a.AdUnitRemoved=20]="AdUnitRemoved",a[a.AdUnitViewState=21]="AdUnitViewState",a[a.BannerChanged=22]="BannerChanged",a[a.Passback=23]="Passback",(c=n.SendStatus||(n.SendStatus={}))[c.NotSent=0]="NotSent",c[c.Sent=1]="Sent",c[c.ReSent=2]="ReSent",(l=n.BrowserState||(n.BrowserState={}))[l.Unknown=-1]="Unknown",l[l.Inactive=0]="Inactive",l[l.Active=1]="Active",l[l.Idle=2]="Idle",(u=n.UnitViewState||(n.UnitViewState={}))[u.NotVisible=0]="NotVisible",u[u.Visible=1]="Visible",(d=n.AdUnitType||(n.AdUnitType={}))[d.normal=0]="normal",d[d.sticky=1]="sticky",d[d.overlay=2]="overlay",d[d.bottom=3]="bottom",d[d.side=4]="side",d[d.verification=5]="verification",d[d.megafone=6]="megafone",(h=n.SideBannerPosition||(n.SideBannerPosition={}))[h.None=0]="None",h[h.Top=1]="Top",h[h.Fixed=2]="Fixed",h[h.Bottom=3]="Bottom",(p=n.MessageType||(n.MessageType={}))[p.Status=0]="Status",p[p.Metadata=1]="Metadata",p[p.PotentialImpression=2]="PotentialImpression",p[p.PotentialViewable=3]="PotentialViewable",p[p.PotentialRotation=4]="PotentialRotation",p[p.PotentialRotationByRule=5]="PotentialRotationByRule"},{}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={};n.extend=function(e,t){i[e]=t},n.start=function(){window.__iat_api=i}},{}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.start=function(){this.eventManager.listen(19,this.onCreateAdUnit.bind(this))},o.prototype.onCreateAdUnit=function(e){if(e.analytics&&e.analytics.length&&!(e.dfpMapping&&0<e.dfpMapping.slot)){var t=e.dfpMapping&&e.dfpMapping.dfpAdUnit,n=e.analytics.map(function(e){return new a(t?"dfp":"sas",e.ruleId,e.impDur)}),i=this.adUnitAnalyticsMap[e.id]||new r;i.rules=n,this.adUnitAnalyticsMap[e.id]=i}},o.prototype.getPotentialRulesPerType=function(e){var t=this.getAnalyticsData(e);return t&&0!==t.rules.length?t.getRulesToEmit().reduce(function(e,t){return e[t.type]=e[t.type]||[],e[t.type].push(t.ruleId),e},Object.create([])):{}},o.prototype.acummullateTimeInView=function(e,t){var n=this.getAnalyticsData(e);return n?(n.totalTimeInView+=t,n.totalTimeInView):-1},o.prototype.getAnalyticsData=function(e){var t=this.adUnitAnalyticsMap[e.id];if(t)return t;var n=e.getOriginalId();return n?this.adUnitAnalyticsMap[n]:null},o);function o(e){this.eventManager=e,this.adUnitAnalyticsMap={}}n.AnalyticsRotationRulesManager=i;var r=(s.prototype.getRulesToEmit=function(){var t=this;return this.rules.filter(function(e){return e.shouldEmit(t.totalTimeInView)})},s);function s(){this.totalTimeInView=0,this.rules=[]}n.AdUnitAnalyticsData=r;var a=(c.prototype.shouldEmit=function(e){var t=Math.floor(e/this.impressionDuration)>this.rotation;return t&&this.rotation++,t},c);function c(e,t,n){this.type=e,this.ruleId=t,this.impressionDuration=1e3*(n||20),this.rotation=0}n.AnalyticsRotationRule=a},{}],36:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Parameters=require("./../common/Parameters"),Logger=require("./../common/Logging"),Utilities=require("./../common/Utilities"),Timers=require("./../common/Timers"),EventManager=require("./../common/EventManager"),Enums_1=require("./../interfaces/Enums"),client_1=require("../client"),config=Parameters.config.smc||{},currentState=Enums_1.BrowserState.Unknown,idleTimer,idleTimeout=1e3*(config.idleTimer||19),disconnectTimer,disconnectTimeout=1e3*(config.disconnectTimer||120),ignoreMove=!0,isWebView=!1;function getCurrentState(){return currentState}function getIsWebView(){return isWebView}function restartIdleTimer(){Timers.clear(idleTimer),idleTimer=Timers.timeout(function(){setState(Enums_1.BrowserState.Idle)},idleTimeout)}function restartDisconnectTimer(){disconnectTimer=Timers.timeout(function(){client_1.RtMessaging.disconnect()},disconnectTimeout)}function signalActivity(e){ignoreMove&&"mousemove"==e.type?ignoreMove=!1:currentState!=Enums_1.BrowserState.Inactive&&(restartIdleTimer(),setState(Enums_1.BrowserState.Active))}function focus(){currentState!=Enums_1.BrowserState.Inactive&&!isWebView||setState(Enums_1.BrowserState.Active)}function blur(){isWebView||setState(Enums_1.BrowserState.Inactive)}function setState(e){if(currentState!=e){switch(e){case Enums_1.BrowserState.Active:client_1.RtMessaging.isForcedDisconnected&&client_1.RtMessaging.connect(),Timers.clear(disconnectTimer),Utilities.Cookies.eraseCookie(Utilities.Cookies.IdleCookieName),restartIdleTimer();break;case Enums_1.BrowserState.Inactive:restartDisconnectTimer(),Timers.clear(idleTimer),Utilities.Cookies.eraseCookie(Utilities.Cookies.IdleCookieName);break;case Enums_1.BrowserState.Idle:restartDisconnectTimer(),Utilities.Cookies.createCookie(Utilities.Cookies.IdleCookieName,"1",1)}currentState=e,Logger.info("State changed to "+e,"StateManager"),EventManager.emit(18,e)}}function isUAwebView(){var userAgent=window.navigator.userAgent.toLowerCase(),ios=/iphone|ipod|ipad/.test(userAgent),retVal=!1;if(ios){var standalone=eval("window.navigator.standalone"),safari=/safari/.test(userAgent);!standalone&&safari||standalone&&!safari||standalone||safari||(retVal=!0)}else{var android=/android/.test(userAgent);if(android){var wvNewAndroid=/ wv/.test(userAgent),wvOldAndroid=/version\/[.0-9]*/.test(userAgent);(wvNewAndroid||wvOldAndroid)&&(retVal=!0)}else{var windowsPhone=/webview/.test(userAgent);windowsPhone&&(retVal=!0)}}return retVal}function start(){isWebView=isUAwebView(),EventManager.listen(4,focus),EventManager.listen(3,blur),EventManager.listen(1,signalActivity),EventManager.listen(0,signalActivity),EventManager.listen(5,signalActivity),EventManager.listen(6,signalActivity),EventManager.listen(7,signalActivity),document.hasFocus()||isWebView?setState(Utilities.Cookies.readCookie(Utilities.Cookies.IdleCookieName)?Enums_1.BrowserState.Idle:Enums_1.BrowserState.Active):setState(Enums_1.BrowserState.Inactive)}exports.getCurrentState=getCurrentState,exports.getIsWebView=getIsWebView,exports.start=start},{"../client":27,"./../common/EventManager":28,"./../common/Logging":29,"./../common/Parameters":30,"./../common/Timers":31,"./../common/Utilities":32,"./../interfaces/Enums":33}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./../common/EventManager"),o=e("./../common/Parameters"),r=e("./PlacementManager"),s=(a.prototype.run=function(){i.listen(16,this.onDemoRedSquareMessage),i.listen(17,this.onDemoReplaceAllAdsMessage)},a.prototype.onDemoRedSquareMessage=function(e){if(a.isTargeted(e)){var t=document.createElement("DIV");t.setAttribute("style",e.script),document.body.appendChild(t),setTimeout(function(){t.parentElement&&t.parentElement.removeChild(t)},1e3*e.duration)}},a.prototype.onDemoReplaceAllAdsMessage=function(s){a.isTargeted(s)&&r.getAdUnits().forEach(function(t){if(t.getCurrentEntry()){var e=t.element.getBoundingClientRect(),n=document.createElement("DIV");n.style.width=e.width+"px",n.style.height=e.height+"px",n.innerHTML=s.script;for(var i=[],o=0;o<t.element.children.length;o++){var r=t.element.children[o];"SCRIPT"===r.nodeName||-1<r.className.indexOf("tg-hidden")||(r.style.display="none",i.push(r))}t.element.appendChild(n),setTimeout(function(){t.element.removeChild(n);for(var e=0;e<i.length;e++)i[e].style.display="inline-block"},1e3*s.duration)}})},a.isTargeted=function(e){if(e.targeting&&e.targeting.geo){var t=e.targeting.geo.countryCode&&o.global.country!==e.targeting.geo.countryCode,n=e.targeting.geo.regionCode&&o.global.region!==e.targeting.geo.regionCode;if(t||n)return!1}return!0},a);function a(){}n.DemoModule=s},{"./../common/EventManager":28,"./../common/Parameters":30,"./PlacementManager":50}],38:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Utilities=require("../../common/Utilities"),Timers=require("../../common/Timers"),EventManager=require("../../common/EventManager"),PlacementManager=require("../PlacementManager"),utils_1=require("../dfp/utils"),confs={},adhesionContainer,adContainer,bottomMarginElement,overlayElements;function getDismissedState(){var e=Utilities.Cookies.readCookie(Utilities.Cookies.AdhesionDismissedCookieName);return e?JSON.parse(e):{}}function userHasClosed(e){return 1===getDismissedState()[e]}function closedByUser(e){if(e&&e.dismissedDuration&&!(e.dismissedDuration<=0)){var t=getDismissedState(),n=e.dismissedDuration/86400;t[e.adUnitId]=1,Utilities.Cookies.createCookie(Utilities.Cookies.AdhesionDismissedCookieName,JSON.stringify(t),n)}}function render(e){var t="";if(e.isTracking)t='<div id="tg-adhesion-bar-'+e.adUnitId+'" class="tg-adhesion-bar" style="position:fixed; bottom:0; left:0; right:0; width:100%; z-index: 2147483646;"><div class="tg-adhesion-banner id-'+e.adUnitId+'" style="margin: 0px auto; clear: both; width: '+e.size.width+"px; height: "+e.size.height+'px; "></div></div>',e.element.style.pointerEvents="none";else{t='<div id="tg-adhesion" style="'+("border-top: 1px solid #7d7d7d; background: #fff; max-width: inherit; width: 100%; height: "+(Math.min(e.size.height,100)+10)+"px; z-index: 2147483646; padding-top: 5px; position: fixed; margin: 0; bottom: "+e.bottomMargin+"px; left: 0; right: 0; box-sizing: border-box")+'">   <div id="tg-adhesion-close-button">       <button style="background-color: #fff; border: 1px solid #7d7d7d; border-bottom: 2px solid #fff; border-radius: 4px 4px 0 0; height: 24px; position: absolute; top: -23px; right: 0; display: block; padding: 2px 0 0 2px;">           <span style="position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); clip-path: polygon(0 0, 0 0, 0 0, 0 0);">Close</span>           <svg style="width: 20px; " viewBox="0 0 24 24" role="img" aria-hidden="true"><path d="M19, 6.41L17.59, 5L12, 10.59L6.41, 5L5, 6.41L10.59, 12L5, 17.59L6.41, 19L12, 13.41L17.59, 19L19, 17.59L13.41, 12L19, 6.41Z"></path></svg>       </button>   </div>   <div id="tg-adhesion-banner-id-'+e.adUnitId+'" class="tg-adhesion-banner id-'+e.adUnitId+'" style="margin:0 auto; text-align: center"></div></div>',e.element.style.display="none"}e.element.innerHTML=t,document.body.appendChild(e.element),e.id=PlacementManager.createAdUnit({id:parseInt(e.adUnitId),element:e.element.querySelector(".tg-adhesion-banner.id-"+e.adUnitId),scriptWindow:window,window:window}),confs[e.adUnitId]=e}function toogleVisibility(e,t){var n=PlacementManager.getAdUnit(e.id);n&&(t&&(!e.loaded||isOverlayDisplayed())||(t&&updateBottomMargin(),e.element.style.display=t?"block":"none",n.updateViewState(Utilities.getViewport())))}function onGetServedAdHeight(e,t){if(void 0===t&&(t=0),!adContainer||50===t)return e(0);var n=Utilities.getElementSize(adContainer).height;0!==n?e(n):Timers.timeout(function(){return onGetServedAdHeight(e,++t)},50)}function updateVerticalAlignment(e){if(adContainer){var t=0;50<Math.min(e.size.height,100)&&onGetServedAdHeight(function(e){0<e&&e<100&&(t=Math.round((100-e)/2))}),adContainer.style.marginTop=t+"px"}}function updateBottomMargin(){adhesionContainer&&bottomMarginElement&&(adhesionContainer.style.bottom=getBottomMargin()+"px")}function getBottomMargin(){if(!bottomMarginElement)return 0;var e=window.getComputedStyle(bottomMarginElement);if(e.opacity&&parseFloat(e.opacity)<.5)return 0;var t=bottomMarginElement.getBoundingClientRect(),n=window.getComputedStyle(bottomMarginElement).webkitTransform,i=new WebKitCSSMatrix(n).m42,o=t.top+i;if(o>window.innerHeight)return 0;if(0<i)return t.height;var r=window.innerHeight-o;return r>window.innerHeight||r>t.height?0:r}function bottomMarginProcessor(n){if(window.MutationObserver&&n.bottomMarginSelector&&(bottomMarginElement=document.querySelector(n.bottomMarginSelector))){n.bottomMargin=getBottomMargin();var i=new MutationObserver(function(e){e.forEach(function(e){if(!n.loaded||adhesionContainer){var t=parseFloat(window.getComputedStyle(bottomMarginElement).webkitTransitionDuration);0<(t=isNaN(t)?0:t)?window.setTimeout(function(){return updateBottomMargin()},Math.min(1e3*t,150)):updateBottomMargin()}else i.disconnect()})});i.observe(document.body,{attributes:!0}),i.observe(bottomMarginElement,{attributes:!0,subtree:!0})}}function isValidInViewport(e){var t=Utilities.getViewport(),n=!0;0<e.minimumScroll&&(!e.minimumScrollMaxViewportHeight||t.height<=e.minimumScrollMaxViewportHeight)&&(n=t.top>=e.minimumScroll);var i=!(0<e.footerProtectionHeight)||t.top+t.height+e.footerProtectionHeight<=Utilities.getDocumentHeight();return n&&i}function viewportHandler(){Object.keys(confs).forEach(function(e){var t=confs[e];t.isTracking||toogleVisibility(t,isValidInViewport(t))})}function close(e,t,n){void 0===n&&(n=!1),delete confs[e.adUnitId],document.body.removeChild(e.element),EventManager.unlisten(22,bannerLoadedHandler),EventManager.unlisten(23,bannerLoadedHandler),EventManager.unlisten(2,viewportHandler),EventManager.unlisten(1,viewportHandler),"user closed"===t&&closedByUser(e);var i=PlacementManager.getAdUnit(e.id);if(e.closeCallback&&window[e.closeCallback]&&"function"==typeof window[e.closeCallback]){var o=i?i.getCurrentEntry():null;window[e.closeCallback]({closeAction:t,slot:o?o.index:0})}if(i&&!n&&i.delete(),!e.isTracking&&adContainer){var r=adContainer.getAttribute("tg-zone");r&&r===e.id&&(overlayElements=bottomMarginElement=adContainer=adhesionContainer=void 0)}}function wireUpCloseEvent(t){Timers.timeout(function(){var e=t.element.querySelector("#tg-adhesion-close-button");e&&e.addEventListener("click",function(){close(t,"user closed")})},100)}function bannerLoadedHandler(t){var n=confs[t.adUnitId];if(n){var e=t.getCurrentEntry();e&&!e.isEmpty()?n.loaded?updateVerticalAlignment(n):(Utilities.foreach(confs,function(e){e===t.adUnitId||confs[e].isTracking||!confs[e].loaded||close(n,"only one ad unit allowed")}),t.isTrackingUnit||0!=t.currentEntryIndex||t.logPotentialImpression(),adhesionContainer=document.querySelector("#tg-adhesion"),adContainer=adhesionContainer.querySelector(".tg-adhesion-banner.id-"+n.adUnitId),n.loaded=!0,wireUpCloseEvent(n),onGetServedAdHeight(function(e){isValidInViewport(n)&&toogleVisibility(n,!0),updateVerticalAlignment(n)})):close(n,"no inventory")}}function deleteHandler(e){var t=confs[e.adUnitId];t&&close(t,"deleted",!0)}function isOverlayDisplayed(){if(overlayElements&&overlayElements.length)for(var e=0;e<overlayElements.length;e++){var t=Utilities.getElementSize(overlayElements[e]);if(0<t.width&&0<t.height)return 1}}function overlayProcessor(t){if(window.MutationObserver&&t.overlaySelector&&(overlayElements=document.querySelectorAll(t.overlaySelector))&&overlayElements.length){var n=new MutationObserver(function(e){e.forEach(function(){!t.loaded||adhesionContainer?toogleVisibility(t,!isOverlayDisplayed()):n.disconnect()})});n.observe(document.body,{attributes:!0});for(var e=0;e<overlayElements.length;e++)n.observe(overlayElements[e],{attributes:!0,subtree:!0})}}function evaluateLoadConditions(model){if(!model)return 1;if(model.selector){var isMatch=null!==document.querySelector(model.selector),cssSelectorResult=model.selectorMatch&&isMatch||!model.selectorMatch&&!isMatch;if(!cssSelectorResult)return}if(model.slotPath){var getValue_1=function(value){var mustEval=!model.slotPath.startsWith("/");return mustEval?eval(value):value},slotPath_1=utils_1.DfpUtils.getFinalSlotPath(getValue_1(model.slotPath));if(slotPath_1){var slots=window.googletag.pubads().getSlots().filter(function(e){return e.getAdUnitPath()===slotPath_1});if(slots=slots.filter(function(e){return!model.slotElementId||e.getSlotElementId()===getValue_1(model.slotElementId)}),0<slots.length&&null!==slots[0].getResponseInformation())return}}return 1}function create(e,t){if(!confs[e]&&t.conf.sizes&&t.conf.sizes[0]&&!userHasClosed(e)){var n={id:"will hold the full ad unit id, after creation",adUnitId:e,element:document.createElement("div"),size:t.conf.sizes.find(function(e){return e.height===Math.max.apply(Math,t.conf.sizes.map(function(e){return e.height}))}),footerProtectionHeight:t.conf.bottomHeight||0,closeCallback:t.conf.closeCallback,isTracking:t.tu,loaded:!1,overlaySelector:t.conf.overlaySelector,bottomMargin:0,bottomMarginSelector:t.conf.bottomMarginSelector,dismissedDuration:t.conf.dismissedDuration,minimumScroll:t.conf.minimumScroll||0,minimumScrollMaxViewportHeight:t.conf.minimumScrollMaxViewportHeight||0};Timers.timeout(function(){evaluateLoadConditions(t.conf.loadConditions)&&(n.bottomMarginSelector&&bottomMarginProcessor(n),render(n),n.overlaySelector&&overlayProcessor(n),t.tu||(EventManager.listen(2,viewportHandler),EventManager.listen(1,viewportHandler),EventManager.listen(22,bannerLoadedHandler),EventManager.listen(23,bannerLoadedHandler),EventManager.listen(20,deleteHandler)))},1e3*(t.conf.showDelay||1))}}exports.create=create},{"../../common/EventManager":28,"../../common/Timers":31,"../../common/Utilities":32,"../PlacementManager":50,"../dfp/utils":62}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../interfaces/Enums"),o=e("../../common/EventManager"),r=e("../../common/Parameters"),a=e("../../common/Utilities"),c=e("../PlacementManager"),s=e("./Sticky"),l=e("./Adhesion"),u=e("./SideBanner"),d=e("./Overlay"),h=e("./Verification"),p=e("./megafone/Megafone");function f(){if(window==window.top){var n=r.config.znl;a.foreach(n,function(e){var t=n[e];if(!t.dc||-1!=t.dc.toLowerCase().indexOf(i.DeviceType[r.global.device].toLowerCase()))switch(i.AdUnitType[t.type||"normal"]){case i.AdUnitType.normal:case i.AdUnitType.sticky:t.conf.containerElementSelector&&function(e,t){for(var n=document.querySelectorAll(t.conf.containerElementSelector),i=n.length;-1<--i;){var o=n[i];if(t.tu||"inside"!=t.conf.elementSelectorPosition){if(1===t.conf.sizes[0].width&&1===t.conf.sizes[0].height){var r=a.getElementSize(o);t.conf.sizes[0].width=r.width,t.conf.sizes[0].height=r.height}var s=document.createElement("div");"inside"==t.conf.elementSelectorPosition?o.insertBefore(s,o.firstChild):o.parentNode.insertBefore(s,"before"==t.conf.elementSelectorPosition?o:o.nextSibling),(o=s).style.width=t.conf.sizes[0].width+"px",s.style.height=t.conf.sizes[0].height+"px",s.style.clear="both",t.tu&&(s.style.position="absolute",s.style.pointerEvents="none")}c.createAdUnit({id:e,element:o,scriptWindow:window,window:window})}}(parseInt(e),t);break;case i.AdUnitType.bottom:l.create(e,t);break;case i.AdUnitType.side:t.conf&&t.conf.sizes&&t.conf.sizes.length&&u.create(e,t);break;case i.AdUnitType.overlay:d.create(e,t);break;case i.AdUnitType.verification:h.Verification.create(e,t);break;case i.AdUnitType.megafone:p.Megafone.create(e,t)}})}}n.start=function(){s.start(),o.listen(8,f)}},{"../../common/EventManager":28,"../../common/Parameters":30,"../../common/Utilities":32,"../../interfaces/Enums":33,"../PlacementManager":50,"./Adhesion":38,"./Overlay":40,"./SideBanner":41,"./Sticky":42,"./Verification":43,"./megafone/Megafone":44}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=e("../../interfaces/Enums"),r=e("../../common/EventManager"),s=e("../../common/Utilities"),a=e("../PlacementManager"),c=e("../../common/Parameters"),l=("https:"==window.location.protocol?"https:":"http:")+"//cdn.insurads.com/resources/";function u(){document.body.removeChild(i.background);var e=a.getAdUnit(i.id+".00");e&&e.delete()}function d(){i.overlayDiv.style.width=i.width+"px",i.overlayDiv.style.height=i.height+"px",i.overlayDiv.style.margin="0px auto",i.overlayDiv.style.position="relative",i.overlayDiv.style.padding="5px",i.overlayDiv.style.border="1px solid black",i.overlayDiv.style.backgroundColor=i.borderColor,i.overlayDiv.style.borderRadius=i.borderRadius+"px",i.overlayDiv.style.top=(s.getViewport().height-i.height)/2+"px",i.background.appendChild(i.overlayDiv),a.createAdUnit({id:parseInt(i.id),element:i.overlayDiv,window:window,scriptWindow:window})}function h(){i.background.style.position="fixed",i.background.style.top="0px",i.background.style.bottom="0px",i.background.style.left="0px",i.background.style.right="0px",i.background.style.backgroundColor=i.backgroundColor.replace(")",","+i.backgroundOpacity+")").replace("rgb","rgba"),i.background.style.zIndex="2147483647",i.background.style.display="none",i.background.addEventListener("click",u),document.body.appendChild(i.background),d(),i.close.src=l+"close-button.png",i.close.style.zIndex="2147483647",i.close.style.cursor="pointer",i.close.setAttribute("class","tgOverlay"),i.overlayDiv.appendChild(i.close),c.global.device==o.DeviceType.Desktop?(i.close.style.position="absolute",i.close.style.top="-10px",i.close.style.right="-10px",i.close.setAttribute("class","tgOverlay")):(i.close.style.position="fixed",i.close.style.top="10px",i.close.style.left="10px")}n.create=function(e,t){!i&&t.conf&&t.conf.sizes&&t.conf.sizes[0]&&(i={id:e,width:t.conf.sizes[0].width,height:t.conf.sizes[0].height,background:document.createElement("div"),overlayDiv:document.createElement("div"),close:document.createElement("img"),borderRadius:t.conf.borderRadius||5,borderColor:t.conf.borderColor||"white",backgroundColor:t.conf.backgroundColor||"rgb(0, 0, 0)",backgroundOpacity:t.conf.backgroundOpacity||.5},r.listen(22,function(e){if(e.adUnitId==i.id){var t=e.getCurrentEntry();t&&t.ol?(i.background.style.display="",e.onTGI=u):e.delete()}}),h())}},{"../../common/EventManager":28,"../../common/Parameters":30,"../../common/Utilities":32,"../../interfaces/Enums":33,"../PlacementManager":50}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../interfaces/Enums"),o=e("../../common/Utilities"),r=e("../PlacementManager"),s=e("../../common/EventManager"),a=(c.prototype.showAdZone=function(){if(this.element){this.element.style.display="block";var e=r.getAdUnit(this.id+".00");e&&e.updateViewState(o.getViewport())}else this.element=document.createElement("div"),this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.isTracking?this.element.style.pointerEvents="none":this.element.style.zIndex=this.zIndex,this.element.setAttribute("class","tg-wss tg-wss-"+this.position),document.body.appendChild(this.element),"absolute"==this.isSticky?(this.element.style.position="absolute",this.element.style.top=this.top+"px"):(window.addEventListener("scroll",this.checkPosition.bind(this)),this.checkPosition()),r.createAdUnit({id:parseInt(this.id),element:this.element,scriptWindow:window,window:window})},c.prototype.hideAdZone=function(){var e=r.getAdUnit(this.id+".00");e&&this.element&&(this.element.style.display="none",e.updateViewState(o.getViewport()))},c.prototype.checkPosition=function(){if(this.element){var e=o.getViewport();this.footerDist&&e.top+this.height>o.getDocumentHeight()-this.footerDist?this.currPos!=i.SideBannerPosition.Bottom&&(this.element.style.position="absolute",this.element.style.top="",this.element.style.bottom=this.footerDist+"px",this.element.offsetParent.style.position||(this.element.offsetParent.style.position="relative"),this.currPos=i.SideBannerPosition.Bottom):e.top+this.fixDist<this.top&&this.currPos!=i.SideBannerPosition.Top?(this.element.style.position="absolute",this.element.style.top=this.top+"px",this.element.style.bottom="",this.currPos=i.SideBannerPosition.Top):e.top+this.fixDist>=this.top&&this.currPos!=i.SideBannerPosition.Fixed&&(this.element.style.position="fixed",this.element.style.top=this.fixDist+"px",this.element.style.bottom="",this.currPos=i.SideBannerPosition.Fixed)}},c.prototype.findPosition=function(){for(var e=this.dockElem.offsetLeft,t=this.dockElem;t.offsetParent&&"BODY"!=t.offsetParent.nodeName.toUpperCase();)e+=(t=t.offsetParent).offsetLeft;return"left"==this.position?e-this.width-10+this.offset:e+10+o.getElementSize(this.dockElem).width+this.offset},c.prototype.reposition=function(){if(this.element){var e=this.findPosition();this.element.style.left=e+"px"}},c.prototype.fits=function(){return this.findPosition()>-1*this.width*(1-this.visibilityRatio)&&this.findPosition()<o.getViewport().width-this.width*this.visibilityRatio},c.prototype.onResize=function(){this.fits()?(this.showAdZone(),this.reposition()):this.hideAdZone()},c);function c(e,t){this.currPos=i.SideBannerPosition.None;var n=document.querySelector(t.conf.dockElementSelector);n&&(this.id=e,this.dockElem=n,this.position=t.conf.position||"right",this.width=t.conf.sizes[0].width,this.height=t.conf.sizes[0].height,this.visibilityRatio=(t.conf.visib||50)/100,this.offset=t.conf.horizontalOffset,this.zIndex=t.conf.zindex||"1",this.isSticky=t.conf.type||"dynamic",this.top=t.conf.initialTopOffset||0,this.footerDist=t.conf.footerDist||0,this.fixDist=t.conf.stickyTopOffset||0,this.isTracking=t.tu||!1,this.onResize(),s.listen(2,this.onResize.bind(this)))}n.create=function(e,t){var n=!0;if(t.conf.mustContainAdUnits&&0<t.conf.mustContainAdUnits.length){n=!1;for(var i=0;i<t.conf.mustContainAdUnits.length&&!(n=!!r.getAdUnit(e+".00"));i++);}if(t.conf.cannotContainAdUnits&&0<t.conf.cannotContainAdUnits.length&&n)for(i=0;i<t.conf.cannotContainAdUnits.length&&(n=!r.getAdUnit(e+".00"));i++);n&&new a(e,t)}},{"../../common/EventManager":28,"../../common/Utilities":32,"../../interfaces/Enums":33,"../PlacementManager":50}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../interfaces/Enums"),o=e("../../common/EventManager"),r=e("../../common/Parameters"),s=e("../../common/Utilities"),a={},c=[],l=!1;function u(e){var t={element:e.element,position:e.position,top:e.position.top,left:e.position.left,cssPosition:e.element.style.position,cssLeft:e.element.style.left?parseInt(e.element.style.left.substring(0,e.element.style.left.length-2)):0,cssWidth:e.element.style.width,cssTop:e.element.style.top,cssTextAlign:e.element.style.textAlign,cssMargin:e.element.style.margin,cssZIndex:e.element.style.zIndex,parent:e.element.parentNode,stickyOffsetTop:e.config.topOffset,bottomThreshold:e.config.bottomHeight,stickyZIndex:e.config.zindex,isSticky:!1,isAtBottom:!1,closed:!1,isTracking:e.isTrackingUnit};a[e.id]=t,d(),e.updateViewState(s.getViewport())}function d(){var n=s.getViewport(),i=s.getDocumentHeight();s.foreach(a,function(e){var t=a[e];t.isSticky||t.isAtBottom||(t.top=t.position.absTop,t.left=t.position.left),t.closed||(t.isSticky&&n.top+t.stickyOffsetTop<=t.top&&(t.element.style.position=t.cssPosition,t.element.style.left=t.cssLeft+"px",t.element.style.top=t.cssTop,t.element.style.width=t.cssWidth,t.element.style.textAlign=t.cssTextAlign,t.element.style.margin=t.cssMargin,t.isTracking||(t.element.style.zIndex=t.cssZIndex),t.isSticky=!1,t.isAtBottom=!1),t.isSticky&&i-n.top-t.stickyOffsetTop-t.position.height<t.bottomThreshold?(t.element.style.position="fixed",t.element.style.top="",t.element.style.bottom=t.bottomThreshold+"px",t.isTracking||(t.element.style.zIndex=t.stickyZIndex||"2147483647"),t.isSticky=!1,t.isAtBottom=!0):!t.isSticky&&n.top+t.stickyOffsetTop>t.top&&i-n.top-t.stickyOffsetTop-t.position.height>=t.bottomThreshold&&(t.element.style.position="fixed",t.element.style.bottom="",t.element.style.left=t.left+"px",t.element.style.top=t.stickyOffsetTop+"px",t.element.style.margin="0px",t.isTracking||(t.element.style.zIndex=t.stickyZIndex||"2147483647"),t.isSticky=!0,t.isAtBottom=!1))})}function h(){s.foreach(a,function(e){for(var t=a[e],n=t.parent.offsetLeft+t.cssLeft,i=t.parent;"HTML"!=i.nodeName&&i.offsetParent;)n+=(i=i.offsetParent).offsetLeft;t.position.left=n,t.isSticky&&(t.element.style.left=n+"px")})}function p(e){r.global.device!=i.DeviceType.Mobile&&e.type==i.AdUnitType.sticky&&(l?u(e):c.push(e))}function f(e){if(!l){var t=c.indexOf(e);-1<t&&c.splice(t,1)}}n.start=function(){o.listen(19,p),o.listen(20,f),o.listen(2,h),window.addEventListener("scroll",d),o.listen(8,function(){for(l=!0;0<c.length;)u(c.pop())})}},{"../../common/EventManager":28,"../../common/Parameters":30,"../../common/Utilities":32,"../../interfaces/Enums":33}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../common/Timers"),o=e("../../common/EventManager"),r=e("../PlacementManager"),s=(a.prototype.init=function(){this.container=document.createElement("div"),this.container.setAttribute("id","tg-verification"),this.container.style.width="1px",this.container.style.height="1px",this.show(!1),document.body.appendChild(this.container),this.id=r.createAdUnit({id:this.adUnitId,element:this.container,scriptWindow:window,window:window})},a.prototype.show=function(e){this.container.style.display=e?"block":"none"},a.prototype.delete=function(){document.body.removeChild(this.container),o.unlisten(22,this.bannerChangedHandler);var e=r.getAdUnit(this.id);e&&e.delete()},a.prototype.bannerChangedHandler=function(e){if(e.id===this.id){var t=e.getCurrentEntry();t&&!t.isEmpty()?e.disableRotation():this.delete()}},a.create=function(e,t){var n=this;i.timeout(function(){n.instance=new a(parseInt(e)),o.listen(22,n.instance.bannerChangedHandler.bind(n.instance))},1e3*(t.conf.showDelay||1))},a);function a(e){this.adUnitId=e,this.init()}n.Verification=s},{"../../common/EventManager":28,"../../common/Timers":31,"../PlacementManager":50}],44:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Timers=require("../../../common/Timers"),EventManager=require("../../../common/EventManager"),PlacementManager=require("../../PlacementManager"),Parameters=require("../../../common/Parameters"),Utilities=require("../../../common/Utilities"),SocialBar_1=require("./SocialBar"),Megafone=function(){function Megafone(e,t){this.adUnitId=0,this.id="",this.gxiLogged=!1,this.gxiLogTimer=0,this.viewTime=0,this.dismissed=!1,this.rendered=!1,this.socialLogTimer=0,this.adUnitId=parseInt(e.toString()),this.init(t)}return Megafone.prototype.init=function(e){this.container=document.createElement("div"),this.container.className="iat-rtsad",this.container.style.width="380px",this.container.style.height="100%",this.show(!1),document.body.appendChild(this.container),this.id=PlacementManager.createAdUnit({id:this.adUnitId,element:this.container,scriptWindow:window,window:window,realtimeDeliveryDemoLineId:e})},Megafone.prototype.injectScripts=function(){var _this=this,hostname=Utilities.BrowserUtils.getTopMostHostname(),baseUrl=0<=hostname.indexOf("trugaze.io")?"www.trugaze.io":"insurads.com",scripts=[{type:"facebook",url:"//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3"},{type:"twitter",url:"//platform.twitter.com/widgets.js",charset:"utf-8"},{type:"instagram",url:"//platform.instagram.com/en_US/embeds.js",defer:!0},{url:"//"+baseUrl+"/megafone/js/fastclick.js",condition:function(){return"full"===_this.model.socialBar.mode},onload:function(){eval('FastClick.attach(document.querySelector(".iat-rtsad"))')}}];scripts.filter(function(e){return!e.type||e.type===_this.model.post.type}).filter(function(e){return!e.condition||e.condition()}).forEach(function(e){var t=document.createElement("script");t.src=e.url,t.async=!0,e.defer&&(t.defer=!0),e.charset&&(t.charset=e.charset),e.onload&&(t.onload=e.onload),document.getElementsByTagName("head")[0].appendChild(t)});var linkTag=document.createElement("link");linkTag.setAttribute("rel","stylesheet"),linkTag.setAttribute("type","text/css"),linkTag.setAttribute("href","//"+baseUrl+"/megafone/css/main.css"),document.getElementsByTagName("head")[0].appendChild(linkTag)},Megafone.prototype.show=function(e){this.container.style.display=e?"block":"none",e?this.container.classList.remove("iat-rtsad-collapsed"):this.container.classList.add("iat-rtsad-collapsed")},Megafone.prototype.getContent=function(){var t="";this.model.hashTags.visible&&this.model.hashTags.tags.forEach(function(e){t+='<a href="'+e.url+'" target="_blank" class="iat-rtsad-btn">'+e.tag+"</a>"});var e="";this.model.socialBar.share.twitter&&(e+='<a href="'+this.model.socialBar.share.twitter+'" target="_blank" class="iat-rtsad-btn iat-rtsad-tweet" data-type="twitter">'+("twitter"===this.model.post.type?"Retweet":"Tweet")+"</a>"),this.model.socialBar.share.facebook&&(e+='<a href="'+this.model.socialBar.share.facebook+'" target="_blank" class="iat-rtsad-btn iat-rtsad-share" data-type="facebook">Share</a>');var n="",i="",o="";switch(this.model.post.type){case"facebook":o="basic"===this.model.post.mode?"":'data-show-text="true" data-show-captions="true"',n="iat-rtsad-embed-facebook",i='\n                        <div id="fb-root"></div>\n                        <div class="fb-video fb-post" data-href="'+this.model.post.url+'" data-width="350" data-autoplay="true" '+o+"></div>\n                    ";break;case"twitter":n="iat-rtsad-embed-twitter",i='\n                        <blockquote class="twitter-tweet" lang="en" data-conversation="none" '+(o="basic"===this.model.post.mode?'data-cards="hidden"':"")+'>\n                            <a href="'+this.model.post.url+'"></a>\n                        </blockquote>\n                ';break;case"instagram":n="iat-rtsad-embed-instagram",i='\n                        <blockquote class="instagram-media" data-instgrm-version="5" '+(o="basic"===this.model.post.mode?"":"data-instgrm-captioned")+'>\n                            <a href="'+this.model.post.url+'"></a>\n                        </blockquote>\n                '}var r="basic"===this.model.socialBar.mode?"":'\n            <div class="iat-rtsad-emoji-menu">\n                <div class="iat-rtsad-emoji-dropdown">\n                    <div class="iat-rtsad-emoji-dropdown-toggle">\n                        <div class="iat-rtsad-emoji-button"></div>\n                    </div>\n                    <div class="iat-rtsad-emoji-dropdown-menu">\n                        <div class="iat-rtsad-emoji-list">\n                            <div class="iat-rtsad-emoji-capsule">\n                                <div class="iat-rtsad-emoji iat-rtsad-emoji-1f44d" data-emojiCode="1f44d"></div>\n                            </div>\n                            <div class="iat-rtsad-emoji-capsule">\n                                <div class="iat-rtsad-emoji iat-rtsad-emoji-2764" data-emojiCode="2764"></div>\n                            </div>\n                            <div class="iat-rtsad-emoji-capsule">\n                                <div class="iat-rtsad-emoji iat-rtsad-emoji-1f600" data-emojiCode="1f600"></div>\n                            </div>\n                            <div class="iat-rtsad-emoji-capsule">\n                                <div class="iat-rtsad-emoji iat-rtsad-emoji-1f60d" data-emojiCode="1f60d"></div>\n                            </div>\n                            <div class="iat-rtsad-emoji-capsule">\n                                <div class="iat-rtsad-emoji iat-rtsad-emoji-1f60e" data-emojiCode="1f60e"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ';return'\n            <div class="iat-rtsad-unit">\n                <div class="iat-rtsad-unit-wrapper">\n                    <div class="iat-rtsad-branding">\n                        '+(this.model.post.logoVisible?'<a href="'+this.model.config.clickUrl+'" target="_blank" class="iat-rtsad-logo">\n                <img src="'+this.model.post.logoUrl+'">\n            </a>':"<span>&nbsp;</span>")+'\n                    </div>\n                    <div class="iat-rtsad-hashtag">\n                        '+t+'\n                    </div>\n\n                    <div class="iat-rtsad-post">\n                        <div class="iat-rtsad-embed '+n+'">\n                            '+i+'\n                        </div>\n                    </div>\n\n                    <div class="iat-rtsad-cta">\n                        '+r+"\n                        "+e+"\n                    </div>\n                    "+("basic"===this.model.socialBar.mode?"":'<div class="iat-rtsad-livemoji-container"></div>')+'\n                    <div class="iat-rtsad-controls">\n                        <div class="iat-rtsad-btn iat-rtsad-btn-minimize"><span></span></div>\n                    </div>\n                    <div class="iat-rtsad-powered-by"></div>\n                </div>\n            </div>\n        '},Megafone.prototype.renderDemoSite=function(){if(this.model.site){var e=document.querySelector(".site-placeholder > #url");e&&(e.src=this.model.site,e.style.display="block")}},Megafone.prototype.render=function(){var e=this;this.renderDemoSite(),this.container.innerHTML=this.getContent(),this.injectScripts(),Timers.timeout(function(){e.show(!0),Megafone.instance.container.querySelector(".iat-rtsad-btn.iat-rtsad-btn-minimize").addEventListener("click",Megafone.instance.closeHandler.bind(Megafone.instance)),e.socialBar=SocialBar_1.SocialBar.build(Megafone.instance.container,e.model),e.socialBar.onClick=e.socialBarClickHandler.bind(Megafone.instance);e.gxiLogTimer=Timers.interval(function(){e.viewTime+=200,e.viewTime>=1e3*e.model.config.gxiDuration&&Megafone.instance.logGxiImpression()},200);e.socialLogTimer=Timers.interval(function(){Megafone.instance.logSocialData()},2e3)},500),this.rendered=!0},Megafone.prototype.closeHandler=function(){!this.dismissed&&this.rendered&&(this.logGxiImpression(),this.logSocialData(),this.socialBar.destroy(),Timers.clear(this.socialLogTimer),this.show(!1),this.dismissed=!0)},Megafone.prototype.logGxiImpression=function(){var e=PlacementManager.getAdUnit(this.id);if(e){var t=e.getCurrentEntry();t&&(this.gxiLogged||(this.gxiLogged=!0,t.buildGxiImpressionLoggingRequest(this.viewTime),Timers.clear(this.gxiLogTimer)))}},Megafone.prototype.logSocialData=function(){var e=PlacementManager.getAdUnit(this.id);if(e){var t=e.getCurrentEntry();if(t){var n=this.socialBar.getAndResetCounters();"{}"!==n&&t.buildSocialDataLoggingRequest(n)}}},Megafone.prototype.socialBarClickHandler=function(){this.viewTime=1e3*this.model.config.gxiDuration},Megafone.prototype.bannerChangedHandler=function(e){var t=this;if(e.id===this.id){var n=e.getCurrentEntry();n&&!n.isEmpty()?(e.disableRotation(),Timers.timeout(function(){t.loadMegafoneModel(n),t.render()},1e3*(e.config.showDelay||0))):this.show(!1)}},Megafone.prototype.loadMegafoneModel=function(e){this.model=e.cd,this.model.config={clickUrl:e.cu,gxiDuration:e.gxiDuration,adUnitId:this.adUnitId,orderLineId:e.ol||0,creativeId:e.cid||0}},Megafone.getTargetedAdUnit=function(e){if(!e||!e.adUnits||!e.adUnits.length)return 0;var t=Parameters.global,n=e.adUnits.find(function(e){return e.applicationId===parseInt(t.appId)});if(!n)return 0;if(e.geo&&e.geo.values){var i=e.geo.allow&&0===e.geo.values.length||e.geo.values.find(function(e){return e.countryCode===t.country&&(!e.regionCode||e.regionCode===t.region)});if(!e.geo.allow&&i||e.geo.allow&&!i)return 0}if(e.tech&&e.tech.values&&e.tech.values.length){i=e.tech.allow&&0===e.tech.values.length||e.tech.values.find(function(e){return!(e.device&&e.device!==t.device_name||e.browser&&e.browser!==t.browser||e.os&&e.os!==t.operatingSystem)});if(!e.tech.allow&&i||e.tech.allow&&!i)return 0}return n.adUnitId},Megafone.create=function(e,t,n){this.instance=new Megafone(e,n),EventManager.listen(22,this.instance.bannerChangedHandler.bind(this.instance)),window.addEventListener("beforeunload",this.instance.closeHandler.bind(this.instance))},Megafone.start=function(){EventManager.listen(15,this.realtimeDeliveryHandler.bind(this))},Megafone.realtimeDeliveryHandler=function(e){var t=Megafone.instance&&"block"===Megafone.instance.container.style.display,n=Megafone.instance&&Megafone.instance.dismissed;if(!t&&!n){var i=this.getTargetedAdUnit(e);if(i){if(Megafone.instance){if(i!==Megafone.instance.adUnitId)return;var o=PlacementManager.getAdUnit(Megafone.instance.id);if(!o)return;return o.realtimeDeliveryDemoLineId=e.demoLineId||0,void o.nextBanner({ignoreInViewRequisite:!0,ignoreDoNotRotate:!0})}this.create(i,void 0,e.demoLineId)}}},Megafone}();exports.Megafone=Megafone},{"../../../common/EventManager":28,"../../../common/Parameters":30,"../../../common/Timers":31,"../../../common/Utilities":32,"../../PlacementManager":50,"./SocialBar":47}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../common/Parameters"),o=e("../../../common/Utilities"),r=(s.prototype.addField=function(e){this.fields[this.fields.length]=e},s.prototype.toString=function(){return this.fields.join(s.separator)},s.prototype.setType=function(e){this.fields[this.fields.length-1]=e},s.separator="|",s.version="1.0",s.workerType="o",s.action="mgfn",s);function s(e,t,n){this.fields=[],this.addField(s.version),this.addField(s.workerType),this.addField(o.StringUtils.padRight(s.action,6)),this.addField(i.global.session),this.addField(i.global.context),this.addField(o.StringUtils.padRight(i.global.appId,6)),this.addField(i.global.country),this.addField(i.global.section),this.addField(""),this.addField(e.toString()),this.addField(t.toString()),this.addField(n.toString()),this.addField(""),this.addField("xxxx")}n.Message=r},{"../../../common/Parameters":30,"../../../common/Utilities":32}],46:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(r,s,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((c=c.apply(r,s||[])).next())})},o=this&&this.__generator||function(n,i){var o,r,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(s=2&t[0]?r.return:t[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,t[1])).done)return s;switch(r=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,r=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(n,a)}catch(e){t=[6,e],r=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("@aspnet/signalr"),s=e("../../../common/Logging"),a=(c.prototype.start=function(){var e=this;this.waitForReadiness(function(){return i(e,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.connect()];case 1:return e.sent(),[2]}})})})},c.prototype.sendMessage=function(t){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return this.flushQueue(),this.isConnected?[3,2]:(this.messageBuffer.push(t),[4,this.connect()]);case 1:e.sent(),e.label=2;case 2:return this.log("Sending...: "+t),this.client.send("SendMessage",t),[2]}})})},c.prototype.disconnect=function(){this.client&&this.isConnected&&(this.log("Disconnecting..."),this.client.stop())},c.prototype.waitForReadiness=function(e){var t=this;if(!this.getConnectionUrlFromEndpoint)return this.connectionUrl=this.endpointUrl+this.connectionUrl,void e();try{var n=document.createElement("script");n.async=!0,n.src=this.endpointUrl+"/messaging/endpoint",n.onload=function(){window.websocket_server&&(t.connectionUrl=window.websocket_server+t.connectionUrl,e())},document.getElementsByTagName("head")[0].appendChild(n)}catch(e){this.log("Error getting url from endpoint: "+e)}},c.prototype.connect=function(){return i(this,void 0,void 0,function(){var t,n=this;return o(this,function(e){switch(e.label){case 0:if(this.isConnected)return[2];this.client=(new r.HubConnectionBuilder).withUrl(this.connectionUrl).build(),this.client.onclose(function(e){e?n.log("Error disconnecting: "+e):n.log("Disconnected"),n.isConnected=!1}),this.client.on("ReceiveMessage",function(e){n.log("ReceiveMessage: "+e),n.onReceiveMessage&&n.onReceiveMessage(e)}),this.client.on("Init",function(e){n.log("Init: "+e),n.onInit&&n.onInit(e)}),this.log("Connecting..."),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.client.start()];case 2:return e.sent(),this.log("Connected"),this.isConnected=!0,this.log("Initializing..."+this.orderLineId),this.client.send("Init",this.orderLineId).catch(function(e){return n.log("Error on init: "+e)}),[3,4];case 3:return t=e.sent(),this.log("Error connecting: "+t),[3,4];case 4:return[2]}})})},c.prototype.flushQueue=function(){var e=this;this.isConnected&&0!==this.messageBuffer.length&&(this.messageBuffer.slice().forEach(function(t){return i(e,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.sendMessage(t)];case 1:return e.sent(),[2]}})})}),this.messageBuffer=[])},c.prototype.log=function(e){this.debug&&s.info(e,"mgf-realtime-messaging")},c);function c(e,t){this.debug=!1,this.version="0.1",this.getConnectionUrlFromEndpoint=!1,this.isConnected=!1,this.messageBuffer=[],this.orderLineId=t,this.endpointUrl=e.messagingPath.replace("rt-pub","rt-mgf"),this.connectionUrl="/hub?appId="+e.appId+"&sId="+e.session+"&cId="+e.context+"&dev="+e.device_name+"&br="+e.browser+"&os="+e.operatingSystem+"&v="+this.version}n.MessagingProvider=a},{"../../../common/Logging":29,"@aspnet/signalr":21}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../common/Parameters"),o=e("../../../common/Timers"),r=e("./MessagingProvider"),s=e("./Message"),a=(c.build=function(e,t){return new c(e,t)},c.prototype.destroy=function(){this.provider&&this.provider.disconnect(),this.provider=void 0,this.emojiElements={},this.counters={},this.isReady=!1},c.prototype.getAndResetCounters=function(){var e=JSON.stringify(this.counters);return this.counters={},e},c.prototype.init=function(){var n=this;if("full"===this.mode){var t=this.container.querySelector(".iat-rtsad-emoji-dropdown > .iat-rtsad-emoji-dropdown-toggle");t.addEventListener("click",function(){return t.parentElement.classList.toggle("iat-rtsad-dropdown-open")}),this.container.addEventListener("click",function(e){e.target.closest(".iat-rtsad-emoji-menu")||t.parentElement.classList.remove("iat-rtsad-dropdown-open")});for(var e=this.container.querySelectorAll(".iat-rtsad-emoji-dropdown-menu .iat-rtsad-emoji-capsule"),i=0;i<e.length;i++)this.dropdownEmojiSetup(e[i])}var o=this.container.querySelectorAll(".iat-rtsad-cta a.iat-rtsad-btn"),r=function(e){var t=o[e];t.addEventListener("click",function(){n.sendMessage(n.actionReshareType+"."+t.getAttribute("data-type"))})};for(i=0;i<o.length;i++)r(i);this.isReady=!0},c.prototype.dropdownEmojiSetup=function(e){var n=this,i=e.querySelector(".iat-rtsad-emoji");this.emojiAnimationSetup(i),e.addEventListener("click",function(){n.animateEmoji(i);var e=i.getAttribute("data-emojiCode");n.livemojiSetup(e);var t=n.container.querySelector('.iat-rtsad-livemoji-container [data-emojiCode="'+e+'"]');n.incrementEmoji(t,e)})},c.prototype.animateEmoji=function(e){var t="iat-rtsad-bounce",n=t+"-again",i=e.classList.contains(t)?t:n,o=e.classList.contains(t)?n:t;e.classList.remove(i),e.classList.add(o)},c.prototype.emojiAnimationSetup=function(n){function e(e){e.stopPropagation();var t=n.classList.contains(i)?i:"iat-rtsad-bounce-again";n.classList.remove(t)}var i="iat-rtsad-bounce";n.addEventListener("webkitAnimationEnd",e),n.addEventListener("oanimationend",e),n.addEventListener("msAnimationEnd",e),n.addEventListener("animationend",e)},c.prototype.livemojiSetup=function(e){var t=this;if(this.validReactions.indexOf(e)<0)return!1;var n=this.getReactionFullKey(e);if(this.emojiElements[n])return!0;var i=document.createElement("div");i.className="iat-rtsad-livemoji",i.setAttribute("data-emojiCode",e),i.innerHTML='\n            <div class="iat-rtsad-livemoji-capsule">\n                <span class="iat-rtsad-livemoji-emoji iat-rtsad-emoji-'+e+'"></span>\n            </div>\n            <span class="iat-rtsad-livemoji-counter"></span>\n            ';var o=i.querySelector(".iat-rtsad-livemoji-capsule");function r(e){e.stopPropagation(),s.classList.remove("iat-rtsad-bounce-small")}this.emojiAnimationSetup(o),i.addEventListener("click",function(){t.incrementEmoji(i,e),t.animateEmoji(o)});var s=i.querySelector(".iat-rtsad-livemoji-emoji");return s.addEventListener("webkitAnimationEnd",r),s.addEventListener("oanimationend",r),s.addEventListener("msAnimationEnd",r),s.addEventListener("animationend",r),this.container.querySelector(".iat-rtsad-livemoji-container").appendChild(i),this.emojiElements[n]=i.querySelector(".iat-rtsad-livemoji-counter"),!0},c.prototype.incrementEmoji=function(e,t){this.sendMessage(this.getReactionFullKey(t)),e.querySelector(".iat-rtsad-livemoji-emoji").classList.add("iat-rtsad-bounce-small")},c.prototype.getReactionFullKey=function(e){return this.actionReactionType+"."+e},c.prototype.updateCounter=function(e,t){var n=e.split("."),i=n[n.length-1];if(i===this.randomReaction){var o=Math.floor(Math.random()*this.validReactions.length);i=this.validReactions[o],e=e.replace("."+this.randomReaction,"."+i)}if(this.livemojiSetup(i)&&this.emojiElements[e].innerHTML!==t){this.emojiElements[e].innerHTML=t;var r=this.emojiElements[e].previousElementSibling.querySelector(".iat-rtsad-livemoji-emoji");r&&r.classList.add("iat-rtsad-bounce-small")}this.someReactionExists=!0},c.prototype.sendMessage=function(e,t){void 0===t&&(t=!0),this.message.setType(e),this.provider&&this.provider.sendMessage(this.message.toString()),t&&(this.counters[e]=(this.counters[e]||0)+1,this.onClick&&this.onClick())},c.prototype.onInit=function(e){this.someReactionExists=!1,this.initResponse=e,this.waitForReadiness()},c.prototype.waitForReadiness=function(){var e=this;this.isReady?(this.processMessage(this.initResponse),this.someReactionExists||o.timeout(function(){e.someReactionExists||e.sendMessage(e.getReactionFullKey(e.randomReaction),!1)},5e3)):o.timeout(this.waitForReadiness,500)},c.prototype.processMessage=function(e){var t=this;try{var n=JSON.parse(e);if(!n[this.countersKeyField]||n[this.countersKeyField]!==this.orderLineId.toString())return;Object.keys(n).filter(function(e){return e!==t.countersKeyField&&e.indexOf("."+t.randomReaction)<0}).forEach(function(e){return t.updateCounter(e,n[e])});var i=this.getReactionFullKey(this.randomReaction);n[i]&&!this.someReactionExists&&this.updateCounter(i,"1")}catch(e){}},c);function c(e,t){var n=this;this.countersKeyField="orderLineId",this.actionReactionType="reaction",this.actionReshareType="reshare",this.validReactions=["1f44d","2764","1f600","1f60d","1f60e"],this.randomReaction="random",this.container=e,this.emojiElements={},this.counters={},this.orderLineId=t.config.orderLineId,this.mode=t.socialBar.mode,this.isReady=!1,this.provider=new r.MessagingProvider(i.global,t.config.orderLineId),this.provider.onInit=function(e){return n.onInit(e)},this.provider.onReceiveMessage=function(e){return n.processMessage(e)},this.provider.start(),this.message=new s.Message(t.config.adUnitId,t.config.creativeId,t.config.orderLineId),this.init()}n.SocialBar=a},{"../../../common/Parameters":30,"../../../common/Timers":31,"./Message":45,"./MessagingProvider":46}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o,r=e("../interfaces/Enums"),s=e("../common/EventManager"),a=e("../common/Timers"),c=e("./PlacementManager"),l=e("./BrowserStateTracker"),u=[];function d(){if(i||(o=o||a.interval(d,500),i=window.frames["TG-listener"]),i){for(;0!=u.length;)i.postMessage(u.shift(),"*");i.addEventListener("message",p),o&&a.clear(o)}}function h(e,t){var n={type:e,data:t};u.push(n),d()}function p(e){switch(e.data.action){case"changeBanner":var t=c.getAdUnit(e.data.adUnitId);t&&t.nextBanner({ignoreDoNotRotate:!0,ignoreInViewRequisite:!0,nextAd:{orderCreativeId:e.data.creative,orderLineId:e.data.line}})}}function f(e){h("adUnitRemoved",{id:e.id})}function g(e){var t=e.getCurrentEntry();t&&h("bannerChanged",{id:e.id,index:t.index,tgRotation:!!t.ol,creative:t.cid,order:t.o,orderLine:t.ol,orderType:t.ot,type:t.typ,impressionId:t.iid,market:t.m,creativeWidth:t.cw,creativeHeight:t.ch,rotation:e.doNotRotate?"Disabled":"Enabled",dfpMapping:y(e)})}function m(e){h("adUnitChanged",{id:e.id,shortId:e.adUnitId,sizes:e.sizes,instance:e.id.split(".")[1],configuration:e.config,customTargeting:e.ct,rotation:e.doNotRotate?"Disabled":"Enabled",isFirstPrint:e.isFirstPrint,isTracking:e.isTrackingUnit,visible:e.isInView(),width:e.position.width,height:e.position.height,dfpMapping:y(e)})}function v(e){h("engagementStatusChanged",{index:e,name:r.BrowserState[e]})}function y(e){if(e.dfpMapping)return{creativeWidth:e.dfpMapping.cw,creativeHeight:e.dfpMapping.ch,slot:e.dfpMapping.slot,impDur:e.dfpMapping.impDur,dnr:e.dfpMapping.dnr,dnrReason:e.dfpMapping.dnrReason}}function w(){h("cfg",window.__tgconf),v(l.getCurrentState())}n.start=function(){w(),s.listen(19,m),s.listen(21,m),s.listen(20,f),s.listen(22,g),s.listen(23,g),s.listen(18,v),s.listen(8,w)}},{"../common/EventManager":28,"../common/Timers":31,"../interfaces/Enums":33,"./BrowserStateTracker":36,"./PlacementManager":50}],49:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("./../common/EventManager"),a=e("./classes/Message"),c=e("../common/Utilities"),l=e("../common/Parameters"),u=e("./BrowserStateTracker"),d=(r=a.Message,o(h,r),h);function h(e){var t=r.call(this,0)||this;return t.addField(e.tracking.join(",")),t.addField(e.adUnits.join(",")),t.addField(e.creatives.join(",")),t.addField(e.lines.join(",")),t.addField(e.slots.join(",")),t.addField(""),t.addField(e.state.valueOf().toString()),t}var p,f=(p=a.Message,o(g,p),g);function g(e){var t=p.call(this,e.type)||this;return t.addField(e.id),t.addField(e.isTracking?"1":"0"),e.rules&&(t.addField(e.rules.type),t.addField(e.rules.ruleIds.join(","))),t}var m=(v.prototype.initialize=function(e){try{this.logError=e,this.mainConnection.onConnect=this.onConnect,this.mainConnection.onDisconnect=this.onDisconnect,this.mainConnection.onReceiveMessage=this.receiveMessage,this.mainConnection.connect()}catch(e){this.errorLog(e)}},Object.defineProperty(v.prototype,"isConnected",{get:function(){return this._isConnected},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"isForcedDisconnected",{get:function(){return this._forceDisconnect},enumerable:!0,configurable:!0}),v.prototype.connect=function(){try{this._forceDisconnect=!1,this.mainConnection.isConnected()||this.mainConnection.connect()}catch(e){this.errorLog(e)}},v.prototype.disconnect=function(){try{this.mainConnection.disconnect(),this._forceDisconnect=!0}catch(e){this.errorLog(e)}},v.prototype.sendStatusUpdate=function(e){this.flushQueue(),this.sendMessage(new d(e).toString(),!1)},v.prototype.sendPotentialLog=function(e,t){this.flushQueue(),this.sendMessage(new f(e).toString(),!0),2!==e.type&&3!==e.type||this.logToWebServices(2===e.type?"pimp":"pvimp",e.id,t)},v.prototype.sendMessage=function(t,n){var i=this;try{return this.isConnected?this.mainConnection.send(t).then(function(e){s.emit(10,{message:t,sent:1})}).catch(function(e){n&&i._messageBuffer.push(t)}):(n&&!this._forceDisconnect&&this._messageBuffer.push(t),void s.emit(10,{message:t,sent:0}))}catch(e){this.errorLog(e)}},v.prototype.flushQueue=function(){var t=this;if(this.isConnected&&0!=this._messageBuffer.length){var e=this._messageBuffer.slice();this._messageBuffer=[],e.forEach(function(e){t.sendMessage(e,!0)})}},v.prototype.errorLog=function(e){this.logError&&this.logError(e)},v.prototype.logToWebServices=function(e,t,n){if(!([""].indexOf(t)<0)){var i=(l.global.rootPath+"/maw/debug/"+e+"?auid=[AUID]&iiv=[IIV]&bs=[BS]&df=[DF]&iwv=[IWV]&wvs=[WVS]&requestId=[RANDOM]").replace("[AUID]",t).replace("[IIV]",n?"1":"0").replace("[BS]",u.getCurrentState().toString()).replace("[DF]",document.hasFocus()?"1":"0").replace("[IWV]",u.getIsWebView()?"1":"0").replace("[WVS]",u.getCurrentState().toString()).replace(/\[RANDOM\]/g,Math.floor(1e8*Math.random()).toString());c.generateBeacon(i)}},v);function v(e){var t=this;this.mainConnection=e,this._messageBuffer=[],this.receiveMessage=function(e){try{var t=JSON.parse(e);switch(t.action){case"tgiNotice":s.emit(14,t);break;case"show-square":s.emit(16,t);break;case"rotate-ads":s.emit(17,t);break;case"realtime-delivery":s.emit(15,t)}}catch(e){}},this.onConnect=function(){t._isConnected=!0,s.emit(12,+new Date)},this.onDisconnect=function(){t._isConnected=!1,s.emit(13,+new Date)}}n.Messaging=m},{"../common/Parameters":30,"../common/Utilities":32,"./../common/EventManager":28,"./BrowserStateTracker":36,"./classes/Message":57}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./../common/Parameters"),s=e("./../common/EventManager"),i=e("./BrowserStateTracker"),a=e("./classes/AdUnit"),c=e("./../interfaces/Enums"),l=e("./../common/Utilities"),u=e("./../common/Timers"),d=e("../client"),h={},p=[];function o(){var t=[];return l.foreach(h,function(e){t.push(h[e])}),t}function f(e){if(!e.id)return"";var t=(r.config.znl||{})[e.id.toString()]||{};if(t.dc&&-1==t.dc.toLowerCase().indexOf(c.DeviceType[r.global.device].toLowerCase()))return"";var n=-1,i=new RegExp("^"+e.id+"\\.(\\d{2})$");if(l.foreach(h,function(e){var t=i.exec(e);t&&(n=Math.max(n,parseInt(t[1])))}),99<++n)return"";var o=new a.AdUnit(e,t,n);return o.type==c.AdUnitType.overlay&&p.push(o.id),h[o.id]=o,r.config.dads&&o.disableRotation(),s.emit(19,o),o.id}function g(i){if(i.adUnitId){var e=h[i.adUnitId],t=e.getCurrentEntry();if(!t||!t.cid||t.cid<=0)return;t.buildTGIImpressionLoggingRequest(),e.onTGI()}else if(i.creativeId){l.foreach(h,function(e){var t=h[e],n=t.getCurrentEntry();n&&n.cid==i.creativeId&&(n.buildTGIImpressionLoggingRequest(),t.onTGI())})}}n.getAdUnits=o,n.createAdUnit=f;var m,v,y=100,w=1e3*(r.config.mpi||30);function b(){u.clear(v),v=u.timeout(function(){var o={state:i.getCurrentState(),tracking:[],adUnits:[],creatives:[],lines:[],slots:[]},r=l.filter(p,function(e){return h[e].isInView()==c.UnitViewState.Visible});l.foreach(h,function(e){var t=h[e];if(!t.isInternal){var n=t.isInView()&&(0==r.length||-1<r.indexOf(e));if(t.isTrackingUnit)o.tracking.push(e+(n?":1":":0"));else{var i=t.getCurrentEntry();o.adUnits.push(e+(n?":1":":0")),o.creatives.push(i&&i.cid?i.cid.toString():""),o.lines.push(i&&i.ol?i.ol.toString():""),o.slots.push(i?i.index:0)}}}),u.clear(m),d.RtMessaging.sendStatusUpdate(o),m=u.interval(function(){d.RtMessaging.sendStatusUpdate(o)},w)},y)}function S(){var t=!1,n=l.getViewport();l.foreach(h,function(e){t=h[e].updateViewState(n)||t}),t&&b()}n.deleteAdUnit=function(e){var t=h[e];delete h[e];var n=p.indexOf(e);-1<n&&p.splice(n,1),s.emit(20,t)},n.deleteAdUnits=function(){o().forEach(function(e){return e.delete()})},n.getAdUnit=function(e){return h[e]},n.start=function(){if(window.__tgunits)for(var e=window.__tgunits.length;-1<--e;)f(window.__tgunits[e]);window.__tgunits={push:f,length:0},s.listen(1,S),s.listen(2,S),s.listen(18,b),s.listen(12,b),s.listen(22,b),s.listen(20,b),s.listen(14,g)}},{"../client":27,"./../common/EventManager":28,"./../common/Parameters":30,"./../common/Timers":31,"./../common/Utilities":32,"./../interfaces/Enums":33,"./BrowserStateTracker":36,"./classes/AdUnit":55}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@aspnet/signalr"),o=e("./../common/Logging"),r=e("./../common/Utilities"),s=(a.prototype.initialize=function(){var t=this;this.client=(new i.HubConnectionBuilder).withUrl(this.connectionUrl,{logger:i.LogLevel.None}).build(),this.client.onclose(function(e){t.log("Connection Closed: "+e),t.connected=!1,t.onDisconnect&&t.onDisconnect(),t.mustReconnect&&t.connect()}),this.client.on("ReceiveMessage",function(e){t.log(e),t.onReceiveMessage&&t.onReceiveMessage(e)})},a.prototype.isConnected=function(){return this.connected},a.prototype.connect=function(){var t=this;this.isReady&&(this.initialize(),this.client&&(this.log("Connecting.."),this.mustReconnect=!0,this.client.start().then(function(){t.log("Connected"),t.connected=!0,t.reconnectTimeout=t.initialReconnectTimeout,t.onConnect&&t.onConnect()}).catch(function(e){t.log("Error on connect: "+e),t.log("Trying to connect again in "+t.reconnectTimeout+" seconds..."),setTimeout(function(){t.connect()},1e3*t.reconnectTimeout),t.reconnectTimeout*=2})))},a.prototype.disconnect=function(){var t=this;this.client&&this.isReady&&(this.mustReconnect=!1,this.client.stop().then(function(){t.log("Disconnected..")}).catch(function(e){t.log("Error on disconnect: "+e)}))},a.prototype.send=function(e){var i=this;return this.log("Sent: "+e),new Promise(function(t,n){if(i.isReady)try{i.client.send("SendMessage",e).then(function(e){return t()}).catch(function(e){return n(e)})}catch(e){n(e.message)}else n("provider not ready")})},a.prototype.errorLog=function(e){var t=e&&e.message?e.message:e,n=this.errorLogUrl+"?err="+encodeURIComponent(this.version+": "+t);r.generateBeacon(n)},a.prototype.waitForReadiness=function(e){var t=this;try{var n=document.createElement("script");n.async=!0,n.src=this.endpointUrl,n.onload=function(){window.websocket_server&&(t.setReady(window.websocket_server),e&&e())},document.getElementsByTagName("head")[0].appendChild(n)}catch(e){}},a.prototype.setReady=function(e){this.errorLogUrl=e+"/clienterrors",this.messagingUrl=e+"/hub",this.isReady=!0},a.prototype.initializeMetadata=function(e){this.endpointUrl=(e.messagingPath||this.defaultAddress)+"/messaging/endpoint",this.applicationId=e.appId,this.sessionId=e.session,this.contextId=e.context,this.device=e.device_name,this.browser=e.browser,this.operationSystem=e.operatingSystem},Object.defineProperty(a.prototype,"connectionUrl",{get:function(){return this.messagingUrl+"?appId="+this.applicationId+"&sId="+this.sessionId+"&cId="+this.contextId+"&dev="+this.device+"&br="+this.browser+"&os="+this.operationSystem+"&v="+this.version},enumerable:!0,configurable:!0}),a.prototype.log=function(e){o.info(e,"RealtimeMessaging")},a);function a(e){this.defaultAddress="https://messaging.insurads.com/rt-pub/node",this.version="0.1",this.initialReconnectTimeout=10,this.connected=!1,this.initializeMetadata(e),this.reconnectTimeout=this.initialReconnectTimeout,this.isReady=!1}n.RealtimeMessaging=s},{"./../common/Logging":29,"./../common/Utilities":32,"@aspnet/signalr":21}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(c.prototype.start=function(){window.addEventListener("message",this.messageListener.bind(this))},c.getPrintedInformationForTag=function(e){if(this.rendered_tags[e])return this.rendered_tags[e].sasRenderedTagInformation},c.getSasApi=function(e){var t=0,n=window.setInterval(function(){t+=200,window.sas&&window.sas.__smartLoaded&&(window.clearInterval(n),e&&e(window.sas)),1e4<=t&&(window.clearInterval(n),e&&e(null))},200)},c.prototype.createAdUnit=function(e){var t=e;if(t&&t.id&&!isNaN(t.id)){try{t.window=window,t.scriptWindow=window,t.element=document.getElementById(e.tagId)}catch(e){}t&&t.element&&(t.sasAdUnit=!0,this.placementManager.createAdUnit(t))}},c.prototype.handleRenderedTagMessage=function(e){if(e&&!c.rendered_tags[e.sasRenderedTagInformation.tagId.toString()]){var t={type:"rendered-tag-akw",tagId:e.sasRenderedTagInformation.tagId};c.rendered_tags[e.sasRenderedTagInformation.tagId.toString()]=e,window.postMessage(t,"*");for(var n=document.querySelectorAll("iframe[id^=sas_]"),i=0;i<n.length;i++)n[i].contentWindow.postMessage(t,"*");this.createAdUnit(e.mappingResponse)}},c.prototype.handleRefreshTagMessage=function(e){if(e){var t=void 0,n=void 0,i=document.getElementById(e.tagId).getAttribute("tg-zone"),o=this.placementManager.getAdUnit(i);if(o){o.delete();var r=c.getPrintedInformationForTag(e.tagId);r&&(t=r.creativeWidth+"x"+r.creativeHeight,n=r.insertionId),e.tagId&&delete c.rendered_tags[e.tagId],e.keywords=decodeURIComponent(e.keywords);var s="",a=e.keywords.trim();s=-1<a.indexOf("tgRotSlot")?a.replace(/tgRotSlot=[0-9]{1,}/g,"tgRotSlot="+e.slot):a+(a.endsWith(";")?"":";")+"tgRotSlot=0",t&&(-1==s.indexOf("tgPrevSize")?s+=(s.endsWith(";")?"":";")+"tgPrevSize="+t:s=s.replace(/tgPrevSize=\d+x\d+/,"tgPrevSize="+t)),n&&(-1==s.indexOf("tgPrevInsertion")?s+=(s.endsWith(";")?"":";")+"tgPrevInsertion="+n:s=s.replace(/tgPrevInsertion=\d+/,"tgPrevInsertion="+n)),s=s.replace(/\$[\w]+=[0-9\w]*;/g,""),this.sasApi.callAd(e.tagId,{target:s})}else this.logger.error("Unable to find unit for tag"+e.tagId,"SAS")}},c.prototype.handleRenderTagMessage=function(e){if(e&&e.formatId){var t=document.querySelector("#tg-adhesion > .tg-adhesion-banner");if(t){if(!e.siteId||!e.pageId)try{var n=window.sas_manager.noad.toString().toLowerCase(),i=n.substr(n.indexOf("?")+1).split("&");e.siteId=e.siteId||i.filter(function(e){return e.startsWith("siteid=")})[0].replace("siteid=",""),e.pageId=e.pageId||i.filter(function(e){return e.startsWith("pgid=")})[0].replace("pgid=",""),e.keywords=e.keywords||i.filter(function(e){return e.startsWith("tgt=")})[0].replace("tgt=","")}catch(e){}if(e.siteId&&e.pageId){var o="sas_"+e.formatId,r=document.createElement("div");r.setAttribute("id",o),t.appendChild(r),this.sasApi.call("onecall",{siteId:e.siteId,pageId:e.pageId,formatId:e.formatId,target:e.keywords}),this.sasApi.render(e.formatId)}}}},c.prototype.messageListener=function(e){if(e.data&&e.data.type)switch(e.data.type){case"render-tag":this.handleRenderTagMessage(e.data);break;case"rendered-tag":this.handleRenderedTagMessage(new o(e.data));break;case"refresh-tag":this.handleRefreshTagMessage(e.data)}},c.rendered_tags=window.__tg_sas_slots={},c);function c(e,t,n,i,o){this.placementManager=e,this.sasApi=t,this.parameters=n,this.browserUtils=i,this.logger=o}n.SAS=i;var o=function(e){this.mappingResponse=new u(e.mappingResponse),this.sasRenderedTagInformation=new r(e.sasInformation)},r=(s.prototype.getSlot=function(e){var t=e.match(/tgRotSlot=[0-9]{1,}/);return t?parseInt(t[0].split("=")[1]):0},s.prototype.tryParseInt=function(e){try{return parseInt(e)}catch(e){return 0}},s);function s(e){this.siteId=this.tryParseInt(e.siteId),this.insertionId=this.tryParseInt(e.insertionId),this.pageId=this.tryParseInt(e.pageId),this.tagId=e.tagId,this.formatId=this.tryParseInt(e.formatId),this.keywords=decodeURIComponent(e.keywords),this.creativeWidth=this.tryParseInt(e.creativeWidth),this.creativeHeight=this.tryParseInt(e.creativeHeight),this.campaignId=this.tryParseInt(e.campaignId),this.creativeId=this.tryParseInt(e.creativeId),this.slot=this.getSlot(this.keywords)}var a=(l.prototype.toNumber=function(e){return parseInt(e)},l);function l(e){void 0===e&&(e=null),e&&(this.siteId=this.toNumber(e.siteId),this.insertionId=this.toNumber(e.insertionId),this.pageId=this.toNumber(e.pageId),this.tagId=e.tagId,this.formatId=this.toNumber(e.formatId),this.keywords=e.keywords,this.creativeWidth=this.toNumber(e.creativeWidth),this.creativeHeight=this.toNumber(e.creativeHeight),this.campaignId=this.toNumber(e.campaignId),this.creativeId=this.toNumber(e.creativeId))}n.SasTagInformation=a;var u=function(e){this.id=e.unitId,this.cw=e.cw,this.ch=e.ch,this.impDur=e.dur,this.dnr=!e.rotate,this.dnrReason=e.observations,this.tagId=e.tagId,this.keywords=decodeURIComponent(e.keywords),this.slot=e.slot,this.analytics=e.analytics}},{}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../common/Parameters"),o=e("../modules/PlacementManager"),r=e("../common/Utilities"),s=e("../common/Timers"),a=e("./API"),c=(l.prototype.start=function(){a.extend("EventManager",this.eventManager),this.previousUrl=r.BrowserUtils.getTopMostPageUrl(),s.interval(this.checkLocationChanged.bind(this),500)},l.prototype.checkLocationChanged=function(){var e=r.BrowserUtils.getTopMostPageUrl();this.previousUrl!==e&&(this.previousUrl=e,this.performInitRequest())},l.prototype.getInitUrl=function(){return i.global.rootPath+"/init?appId="+i.config.publicId+"&h="+encodeURIComponent(r.BrowserUtils.getTopMostPageUrl())+"&ls=0&v=1.0&t="+ +new Date},l.prototype.performInitRequest=function(){var n=this,i=document.createElement("iframe");i.setAttribute("style","border-width:0px"),i.setAttribute("scrolling","no"),i.setAttribute("frameborder","no"),i.style.margin="0",i.style.display="none",i.style.width="0px",i.style.height="0px",i.src="about:blank",document.body.appendChild(i),i.contentWindow.handleResponse=function(){n.processInitResponse(i.contentWindow.__tgconf),i.parentElement&&i.parentElement.removeChild(i),window.top.__tginitcb&&window.top.__tginitcb()};var o=window.setInterval(function(){var e=i.contentDocument?i.contentDocument:i.contentWindow.document;if("complete"===e.readyState)try{var t=e.createElement("script");t.src=n.getInitUrl(),t.async=!0,t.onload=i.contentWindow.handleResponse,e.body.appendChild(t)}finally{window.clearInterval(o)}},10)},l.prototype.processInitResponse=function(e){e&&(o.deleteAdUnits(),i.updateConfiguration(e),this.eventManager.emit(8,null),this.eventManager.emit(9,null))},l);function l(e){this.eventManager=e}n.SinglePageApplicationManager=c},{"../common/Parameters":30,"../common/Timers":31,"../common/Utilities":32,"../modules/PlacementManager":50,"./API":34}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o,r=e("../API");(o=i=i||{}).NoBidRequestToUAM="0",o.NoResponseReceivedFromUAM="1",o.ResponseWithNoBidFromUAM="2";var s=(a.prototype.render=function(t){try{if(!(t.window&&t.path&&t.sizes&&t.sizes.length))return;this.loadAps(t.window),this.loadGpt(t.window,t.path,t.sizes)}catch(e){this.passback(t.window)}},a.prototype.passback=function(e){e.postMessage("TG-SP","*")},a.prototype.loadAps=function(e){var t=e.document.createElement("script");t.innerText='!function (a9, a, p, s, t, A, g) { if (a[a9]) return; function q(c, r) { a[a9]._Q.push([c, r]) } a[a9] = { init: function () { q("i", arguments) }, fetchBids: function () { q("f", arguments) }, setDisplayBids: function () { }, targetingKeys: function () { return [] }, _Q: [] }; A = p.createElement(s); A.async = !0; A.src = t; g = p.getElementsByTagName(s)[0]; g.parentNode.insertBefore(A, g) }("apstag", window, document, "script", "//c.amazon-adsystem.com/aax2/apstag.js")',e.document.getElementsByTagName("head")[0].appendChild(t),e.apstag.init({pubID:"6f354287-be81-4032-bf64-3a62262fb72f",adServer:"googletag"})},a.prototype.loadGpt=function(e,t,n){var i=this,o=e.document.createElement("script");o.async=!0,o.src="https://www.googletagservices.com/tag/js/gpt.js",o.onload=function(){i.defineSlotAndPerformBid(e,t,n)},e.document.getElementsByTagName("head")[0].appendChild(o)},a.prototype.defineSlotAndPerformBid=function(t,n,i){var o=this,r="div-gpt-ad-"+ +new Date+"-0",e=t.document.createElement("div");e.setAttribute("id",r),t.document.getElementsByTagName("body")[0].appendChild(e);var s=t.googletag||{};s.cmd=s.cmd||[],s.cmd.push(function(){var e=s.defineSlot(n,i,r);e?(e.addService(s.pubads()),s.pubads().enableSingleRequest(),s.pubads().disableInitialLoad(),s.enableServices(),o.makeBidRequest(t,e)):o.passback(t)})},a.prototype.makeBidRequest=function(t,n){var i=this,o=[];n.getSizes().forEach(function(e){o.push([e.getWidth(),e.getHeight()])}),t.apstag.fetchBids({slots:[{slotID:n.getSlotElementId(),slotName:n.getAdUnitPath(),sizes:o}],timeout:this.BID_TIMEOUT},function(e){switch((0<e.length?e[0]:{amznbid:"2"}).amznbid){case"0":case"1":case"2":i.passback(t);break;default:t.googletag.cmd.push(function(){t.apstag.setDisplayBids(),t.googletag.pubads().refresh([n])})}})},a);function a(){this.BID_TIMEOUT=2e3,r.extend("APS",this)}n.AmazonPublisherServicesIntegration=s},{"../API":34}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var I=e("../../interfaces/Enums"),s=e("../BrowserStateTracker"),C=e("../../common/Utilities"),u=e("../../common/Timers"),c=e("../../common/Parameters"),d=e("../../common/EventManager"),a=e("../PlacementManager"),h=e("./Entry"),l=e("../../common/Utilities"),o=e("../SAS"),i=e("../../client"),r=(Object.defineProperty(p.prototype,"doNotRotate",{get:function(){var e=this.getCurrentEntry();return this.dnr||e&&e.dnr||!1},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"isInternal",{get:function(){return this.type===I.AdUnitType.verification},enumerable:!0,configurable:!0}),p.prototype.getCurrentEntry=function(){return this.queue[this.currentEntryIndex]},p.prototype.disableRotation=function(){this.dnr=!0},p.prototype.logPotentialImpression=function(){this.isInternal||s.getIsWebView()&&s.getCurrentState()===I.BrowserState.Idle||(i.RtMessaging.sendPotentialLog({type:2,id:this.adUnitId,isTracking:this.isTrackingUnit},this.isInView()===I.UnitViewState.Visible),this.potImpCompleted=!0)},p.prototype.hasDoNotRotateAtt=function(){if(this.element.outerHTML.match("tg-dnr"))return!0;for(var e=this.element.querySelectorAll("iframe"),t=e.length;-1<--t;)try{if(e[t].contentDocument.body.outerHTML.match("tg-dnr"))return!0}catch(e){}return!1},p.prototype.getOriginalId=function(){return this.parentElement.getAttribute("tg-zone-original")},p.prototype.delete=function(){a.deleteAdUnit(this.id),c.global.device==I.DeviceType.Desktop&&(this.element.removeEventListener("mouseover",this.mouseOverHandler),this.element.removeEventListener("mouseout",this.mouseOutHandler)),d.unlisten(18,this.stateChangeHandler),this.timerCountHandler&&(u.clear(this.timerCountHandler),this.timerCountHandler=void 0)},p.prototype.isInView=function(){return this.pctInView<this.visibilityThreshold?I.UnitViewState.NotVisible:I.UnitViewState.Visible},p.prototype.updateThreshold=function(e,t){this.visibilityThreshold=242500<=e*t?30:50},p.prototype.updateViewState=function(e){var t,n,i,o,r,s,a,c=this,l=0,u=0,d=C.getElementSize(this.element),h=window.__tgTakeOvers&&0<=window.__tgTakeOvers.findIndex(function(e){return e.toString()==c.adUnitId}),p=d.width<10||d.height<10;if(window.blankSizes&&0<window.blankSizes.length&&(p=!1),h||this.isTrackingUnit||!p){var f=!1;do{try{if(r){var g=r;r=r.parent,i=g.frameElement}else r=this.unitWindow,i=this.element;var m=i.getBoundingClientRect(),v=i,y=void 0;for(s=v.ownerDocument.defaultView.getComputedStyle(v),a=v.getBoundingClientRect();"HTML"!=v.nodeName&&v.parentNode&&!this.notMeasurableReason;){if(v==y&&(y=void 0),this.type==I.AdUnitType.overlay||!s||"none"!=s.display&&"hidden"!=s.visibility||(f=!0),!y){var w=(m.top<a.top?a.top-m.top:0)+(m.bottom>a.bottom?m.bottom-a.bottom:0);"hidden"==s.overflowY&&.5<w/m.height&&(f=!0);var b=(m.left<a.left?a.left-m.left:0)+(m.right>a.right?m.right-a.right:0);"hidden"==s.overflowX&&.5<b/m.width&&(f=!0)}if(s&&"fixed"==s.position)break;y=y||(s&&"absolute"==s.position?v.offsetParent:null),s=(v=v.parentNode).ownerDocument.defaultView.getComputedStyle(v),a=v.getBoundingClientRect()}l+=m.top,u+=m.left}catch(e){this.notMeasurableReason="frames"}}while(r!=window&&!f);if(h)if(d.width=this.dfpMapping&&this.dfpMapping.cw||0,d.height=this.dfpMapping&&this.dfpMapping.ch||0,this.updateThreshold(d.width,d.height),"limited"===window.__tgTakeOverMode){var S=document.querySelector("body");l=S?S.getBoundingClientRect().top:0}else l=0;o=!h&&f?0:0<=l&&l+d.height<=e.height&&0<=u&&u+d.width<=e.width?100:(l+d.height<0||l>e.height)&&(u+d.width<0||u>e.width)?0:(n=d.height,l<0&&(n+=l),l+d.height>e.height&&(n+=e.height-l-d.height),t=d.width,u<0&&(t+=u),u+d.width>e.width&&(t+=e.width-u-d.width),Math.round(Math.max(0,n)*Math.max(t)/(d.height*d.width)*100)||0)}else o=0;var T=this.isInView();this.position.width=d.width,this.position.height=d.height,this.position.top=l,this.position.left=u,this.position.absTop=l+e.top,this.type===I.AdUnitType.verification?this.pctInView=100:this.pctInView=this.notMeasurableReason?0:o;var E=T!=this.isInView();return E&&this.onStateChange(),E},p.prototype.onStateChange=function(){var e=this.getCurrentEntry();d.emit(21,this),this.isInView()&&s.getCurrentState()==I.BrowserState.Active?!(-1<this.rotateIndexOnView)||this.hovering&&e?e&&e.startViewableLoggingTimer():this.loadNextSlot(this.rotateIndexOnView):this.isInView()&&s.getCurrentState()==I.BrowserState.Active||e&&e.stopViewableLoggingTimer()},p.prototype.timeCounter=function(){var t=this;if(!this.scriptWindow.document.body.contains(this.element)&&!document.body.contains(this.element)||!this.scriptWindow.top||this.unitWindow!=this.scriptWindow&&this.scriptWindow==this.scriptWindow.parent)this.delete();else{var e=+new Date;if(this.totalTime+=e-this.lastTick,this.isInView()&&I.BrowserState.Active==s.getCurrentState()){if(this.timeInView+=e-this.lastTick,this.isTrackingUnit||i.analyticsRotationRulesManager.acummullateTimeInView(this,e-this.lastTick),!this.isInternal&&this.potImpCompleted&&!this.potIabCompleted&&1e3<this.timeInView&&(i.RtMessaging.sendPotentialLog({type:3,id:this.adUnitId,isTracking:this.isTrackingUnit},this.isInView()===I.UnitViewState.Visible),this.potIabCompleted=!0),!this.isInternal&&this.potIabCompleted&&Math.floor(this.timeInView/this.impressionDuration)>this.potRotation&&(i.RtMessaging.sendPotentialLog({type:4,id:this.adUnitId,isTracking:this.isTrackingUnit},this.isInView()===I.UnitViewState.Visible),this.potRotation++),!this.isInternal&&this.potIabCompleted&&0<this.analytics.length){var n=i.analyticsRotationRulesManager.getPotentialRulesPerType(this);Object.keys(n).forEach(function(e){i.RtMessaging.sendPotentialLog({type:5,id:t.adUnitId,rules:{type:e,ruleIds:n[e]}},t.isInView()===I.UnitViewState.Visible)})}this.rotateOnClient&&this.timeInView>this.impressionDuration&&(this.rotateOnClient=!1,this.nextBanner())}this.maxImpressionDuration&&this.rotateOnClient&&this.totalTime>this.maxImpressionDuration&&(this.rotateOnClient=!1,this.nextBanner({ignoreInViewRequisite:!0})),this.lastTick=e}},p.prototype.onTGI=function(){var e=this.getCurrentEntry();e&&e.isGptInsideAdhesion()||this.nextBanner()},p.prototype.nextBanner=function(e){if(!this.isTrackingUnit){var t=!!e&&e.ignoreDoNotRotate;this.doNotRotate&&!t||this.newSlot(e)}},p.prototype.getMetaKeys=function(){var e={},t=document.querySelector?document.querySelector("meta[name='TG-Custom-Targeting']"):null;if(t)for(var n=t.content.replace(/\'/g,"").split(";"),i=n.length-1;-1<i;i--){var o=n[i].split("=");o[1]&&(e[o[0].toLowerCase()]=o[1].split("&"))}return e},p.prototype.getDfpPageKeys=function(){var e=c.config.integrations.dfp,t=e&&e.keyValues;if(!t||!t.length)return{};if(!window.googletag||!window.googletag.pubadsReady)return{};var n={},i=window.googletag.pubads();return i.getTargetingKeys().forEach(function(e){return n[e]=i.getTargeting(e)}),n},p.prototype.getCustomTarget=function(){var e=C.extendCustomTargeting(this.getMetaKeys(),this.ct);return e=C.extendCustomTargeting(e,this.getDfpPageKeys())},p.prototype.getSizes=function(){var e=this.sizes,t=e[0];if(c.global.device===I.DeviceType.Mobile)e=e.filter(function(e){return e[0]<=320});else{var n=[[320,50],[320,100],[300,50],[300,100]];e=e.filter(function(t){return!n.find(function(e){return e[0]===t[0]&&e[1]===t[1]})})}t&&!e.find(function(e){return e[0]===t[0]&&e[1]===t[1]})&&e.push(t);var i=C.getViewport().width;return e=e.filter(function(e){return e[0]<=i})},p.prototype.newSlot=function(e){var t=document.createElement("div");t.setAttribute("style","display:none;margin:0px auto;text-align:center !important;clear:both;position:relative;"),t.setAttribute("class","tg--slot tg--slot-"+this.queue.length),this.element.appendChild(t);var n,i,o=!!e&&e.ignoreInViewRequisite,r=new h.Entry(this,this.queue.length,t,o);e&&e.nextAd&&(n=e.nextAd.orderLineId,i=e.nextAd.orderCreativeId),this.queue.push(r),this.requestAd(r,i,n)},p.prototype.requestAd=function(e,t,n){var i=this,o=document.createElement("iframe");o.setAttribute("style","border-width:0px"),o.setAttribute("scrolling","no"),o.setAttribute("frameborder","no"),o.style.margin="0px auto",o.style.display="none",o.style.width="0px",o.style.height="0px",o.src="about:blank",e.container.appendChild(o);var r=c.config.rootPath+"/ad?auid="+this.adUnitId+"&sz="+encodeURIComponent(JSON.stringify(this.getSizes()))+"&dm="+(this.isFirstPrint&&0==e.index?1:2)+"&is="+e.index+"&sid="+c.global.session+"&s="+c.global.section+"&ct="+encodeURIComponent(JSON.stringify(this.getCustomTarget()))+"&h="+encodeURIComponent(l.BrowserUtils.getTopMostPageUrl())+"&ts="+ +new Date;(this.sasKeywords||this.sasTagId)&&(r+="&sasKeywords="+encodeURIComponent(this.sasKeywords)+"&sasTagId="+this.sasTagId),0<this.realtimeDeliveryDemoLineId&&(r+="&rddolid="+this.realtimeDeliveryDemoLineId),n&&t&&(r+="&olid="+n,r+="&ci="+(t||0));var s=this.getCurrentEntry();s&&s.ol&&0<s.ol&&(r+="&ll="+s.ol);var a=o.contentDocument?o.contentDocument:o.contentWindow.document;a.open(),o.contentWindow.handleResponse=function(){Array.isArray(o.contentWindow._tg)?e.updateWithResponse(o.contentWindow._tg,o.contentWindow._tgblk):e.updateWithBlankResponse(o.contentWindow._tgblk),e.state==I.EntryState.Blank?(i.onBlank(e),i.currentEntryIndex=e.index):e.index==i.queue.length-1&&i.loadNextSlot(e.index)};try{a.write("<html><head></head><body style='margin:0px;overflow:hidden;border:0px'><script type='text/javascript' src ='"+r+"'><\/script><script>var starter=setInterval(function(){if(window.handleResponse){window.handleResponse();clearInterval(starter);}},300);<\/script></body></html>")}catch(e){}a.close()},p.prototype.loadNextSlot=function(e){var t=this.getCurrentEntry(),n=this.queue[e],i=this.isInView()&&s.getCurrentState()==I.BrowserState.Active,o=t&&this.hovering;if(n.ignoreInViewRequisite||i&&!o)if(n.loadNextCreative()){var r=n.getBannerData();t&&t.stopViewableLoggingTimer(),this.changeVisibleSlot(n),this.currentEntryIndex=n.index,d.emit(22,this),r.ol<0?(n.buildPassbackLoggingRequest(r),0==n.index&&(this.rotateOnClient=!0)):(n.buildStdImpressionLoggingRequest(),n.startViewableLoggingTimer()),this.rotateIndexOnView=-1}else n.state==I.EntryState.Blank?this.onBlank(n):this.rotateIndexOnView=e;else this.rotateIndexOnView=e},p.prototype.showPriorEntry=function(){for(var e=this.queue.length-2;-1<e;e--){var t=this.queue[e];if(t.state!=I.EntryState.Blank&&t.container)return void C.setCssProperty(t.container,"display","block","important")}var n=this.element.getElementsByClassName("tg-hidden");for(e=n.length;-1<--e;)n[e].style.display="",C.removeClass(n[e],"tg-hidden")},p.prototype.changeVisibleSlot=function(e){for(var t=!1,n=this.currentEntryIndex;-1<n;n--){var i=this.queue[n];if(i.container){if(!t){t=!0;continue}i.container.parentNode==this.element&&this.element.removeChild(i.container)}}if(0<=this.currentEntryIndex){var o=this.element.childNodes;for(n=o.length;-1<--n;){var r=o[n];if(r.getAttribute){var s=r.getAttribute("class");"none"==r.style.display||s&&-1!=s.split(" ").indexOf("tgOverlay")||(C.setCssProperty(r,"display","none","important"),C.addClass(r,"tg-hidden"))}}}C.setCssProperty(e.container,"display","block","important")},p.prototype.onBlank=function(e){e.setBlank(),e.stopViewableLoggingTimer(),d.emit(22,this),e.buildBlankLoggingRequest(),this.showPriorEntry(),0==e.index&&(this.rotateOnClient=!0)},p.prototype.onMouseOver=function(){this.hovering=!0},p.prototype.onMouseOut=function(){this.hovering=!1,this.onStateChange()},p.prototype.getSlotSizes=function(e){var t=e.getSizes();if(t.length){for(var n=[],i=t.length;-1<--i;)try{n.push([t[i].getWidth(),t[i].getHeight()])}catch(e){}return n}},p.prototype.loadDfpCreative=function(e){var t=this;this.dfpMapping=e,this.sizes=[[e.cw,e.ch]];var n=this.unitWindow.googletag.pubads().getSlotIdMap()[this.element.id.replace("google_ads_iframe_","").replace("__container__","")];if(n){e.ct=n.getTargetingMap();var i=this.getSlotSizes(n);if(i&&0<i.length){if(0<this.sizes.length){var o=this.sizes[0];i=i.filter(function(e){return!(e[0]===o[0]&&e[1]===o[1])})}i.forEach(function(e){t.sizes.push(e)})}var r=n.getTargeting("tgRotSlot");e.slot=0<r.length?Number(r[0]):0}if(!this.isFirstPrint||e.eid){for(var s=e.slot;s--;)this.queue.push(new h.Entry(this,++this.currentEntryIndex));var a=new h.Entry(this,++this.currentEntryIndex,void 0,void 0);if(this.rotateOnClient=!e.dnr,this.queue.push(a),this.currentEntryIndex=a.index,d.emit(22,this),this.notMeasurableReason="",u.timeout(function(){a.checkNotMeasurable()},3e3),this.element.parentNode&&this.unitWindow.MutationObserver){var c=this,l=new MutationObserver(function(e){e.forEach(function(e){e.oldValue&&(0<=e.oldValue.indexOf("visibility")||0<=e.oldValue.indexOf("display"))&&c.updateViewState(C.getViewport())}),l.disconnect()});l.observe(this.element.parentNode,{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}this.onStateChange()}},p.prototype.loadSasCreative=function(e){if(this.dfpMapping=e,this.sizes=[[e.cw,e.ch]],e.tagId){var t=o.SAS.getPrintedInformationForTag(e.tagId);t&&(this.sasKeywords=encodeURIComponent(t.keywords),this.sasTagId=t.tagId)}if(!this.isFirstPrint){for(var n=e.slot;n--;)this.queue.push(new h.Entry(this,++this.currentEntryIndex));var i=new h.Entry(this,++this.currentEntryIndex,void 0,void 0);this.rotateOnClient=!e.dnr,this.queue.push(i),this.currentEntryIndex=i.index,d.emit(22,this),this.notMeasurableReason="",u.timeout(function(){i.checkNotMeasurable()},3e3),this.onStateChange()}},p.prototype.loadDfpCreativeOnAdhesion=function(e,t){var n=this;if(e.firstElementChild){this.dfpMapping=t,this.sizes=[[t.cw,t.ch]];var i=e.ownerDocument.defaultView.googletag.pubads().getSlotIdMap()[e.firstElementChild.id.replace("google_ads_iframe_","").replace("__container__","")];if(i){t.ct=i.getTargetingMap();var o=this.getSlotSizes(i);if(o&&0<o.length){if(0<this.sizes.length){var r=this.sizes[0];o=o.filter(function(e){return!(e[0]===r[0]&&e[1]===r[1])})}o.forEach(function(e){n.sizes.push(e)})}var s=i.getTargeting("tgRotSlot");t.slot=0<s.length?Number(s[0]):0}this.timeInView=0,this.potRotation=0,this.dnr=t.dnr||this.hasDoNotRotateAtt(),t.impDur&&0<t.impDur&&(this.impressionDuration=1e3*t.impDur),this.analytics=t.analytics||[],this.rotateOnClient=!t.dnr;var a=this.getCurrentEntry();a&&a.setAsGptInsideAdhesion(),d.emit(22,this),d.emit(19,this)}},p.findAdhesionAndLoadDfpCreative=function(e,t){var n=e.ownerDocument.defaultView.frameElement;if(n&&n.parentElement&&n.parentElement.parentElement){var i=n.parentElement.parentElement,o=i.getAttribute("id");if(o&&o.startsWith("tg-adhesion-banner-id-")){var r=i.getAttribute("TG-Zone");if(r){var s=a.getAdUnit(r);s&&s.loadDfpCreativeOnAdhesion(e,t)}}}},p.prototype.init=function(e){var t=C.getViewport();this.updateViewState(t),this.type==I.AdUnitType.bottom&&!this.isTrackingUnit||e.eid&&(!this.element.parentElement||"none"===this.element.parentElement.style.display)||this.logPotentialImpression(),d.listen(18,this.stateChangeHandler),this.element.setAttribute("TG-Zone",this.id),c.global.device==I.DeviceType.Desktop&&(this.element.addEventListener("mouseover",this.mouseOverHandler),this.element.addEventListener("mouseout",this.mouseOutHandler)),e.dfpAdUnit?this.loadDfpCreative(e):e.sasAdUnit&&this.loadSasCreative(e),this.isFirstPrint&&!e.eid?this.nextBanner({ignoreInViewRequisite:!0}):0==this.queue.length&&this.queue.push(new h.Entry(this,++this.currentEntryIndex)),this.timerCountHandler=u.interval(this.timeCounter.bind(this),500)},p);function p(e,t,n){this.hovering=!1,this.rotateIndexOnView=-1,this.totalTime=0,this.timeInView=0,this.queue=[],this.notMeasurableReason="",this.currentEntryIndex=-1,this.realtimeDeliveryDemoLineId=0,this.pctInView=0,this.visibilityThreshold=50,this.potImpCompleted=!1,this.potIabCompleted=!1,this.potRotation=0,this.stateChangeHandler=this.onStateChange.bind(this),this.mouseOverHandler=this.onMouseOver.bind(this),this.mouseOutHandler=this.onMouseOut.bind(this),this.id=e.id+"."+("0"+n).slice(-2),this.config=t.conf,this.adUnitId=e.id.toString(),this.type=t.type?I.AdUnitType[t.type]:I.AdUnitType.normal,this.element=e.element,this.parentElement=e.element.parentElement,this.ct=e.ct||{},this.sasKeywords="",this.sasTagId="",this.sizes=e.sizes||[],this.scriptWindow=e.scriptWindow,this.unitWindow=e.window,this.isTrackingUnit=t.tu||!1,this.isFirstPrint=t.fp||e.force_first||!1,this.rotateOnClient=!this.isFirstPrint,this.dnr=e.dnr||this.hasDoNotRotateAtt(),this.ignoreNotMeasurable=t.inm||!1,this.analytics=e.analytics||[],this.realtimeDeliveryDemoLineId=e.realtimeDeliveryDemoLineId||0,this.lastTick=+new Date,this.impressionDuration=1e3*(c.config.pid||20),this.maxImpressionDuration=1e3*(c.config.pmid||0),e.impDur&&0<e.impDur&&(this.impressionDuration=1e3*e.impDur),this.position={width:0,height:0,top:0,left:0,absTop:0},this.parentElement&&!this.parentElement.getAttribute("tg-zone-original")&&this.parentElement.setAttribute("tg-zone-original",this.id),this.init(e)}n.AdUnit=r},{"../../client":27,"../../common/EventManager":28,"../../common/Parameters":30,"../../common/Timers":31,"../../common/Utilities":32,"../../interfaces/Enums":33,"../BrowserStateTracker":36,"../PlacementManager":50,"../SAS":52,"./Entry":56}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../common/Utilities"),s=e("../../interfaces/Enums"),i=e("../BrowserStateTracker"),a=e("../../common/Timers"),o=e("../../common/Parameters"),c=e("../../common/EventManager"),l=(u.prototype.updateWithResponse=function(e,t){this.state=s.EntryState.Response,this.creativeWaterfall=e,this.blankRequest=t},u.prototype.updateWithBlankResponse=function(e){this.state=s.EntryState.Blank,this.blankRequest=e},u.prototype.isEmpty=function(){return!this.ol&&!this.adUnit.dfpMapping||"none"===this.container.style.display},u.prototype.setBlank=function(){this.state=s.EntryState.Blank,this.ol=void 0,this.cid=void 0},u.prototype.getBannerData=function(){return this.state==s.EntryState.Blank?{slot:this.index}:{ol:this.ol,cid:this.cid,slot:this.index}},u.prototype.setAsGptInsideAdhesion=function(){this.currentFrame.setAttribute("iat-gpt","1"),this.cid=void 0,this.ol=void 0},u.prototype.isGptInsideAdhesion=function(){return this.currentFrame&&"1"===this.currentFrame.getAttribute("iat-gpt")},u.prototype.passbackListener=function(e){try{"TG-SP"==e.data?(this.currentFrame.removeEventListener("message",this.passbackListener),r.setCssProperty(this.currentFrame,"display","none","important"),this.loadNextCreative()&&c.emit(23,this.adUnit)):"click"==e.data.action&&window.open(this.cu,"_blank")}catch(e){}},u.prototype.loadNextCreative=function(){var t=this;if(this.state==s.EntryState.Blank)return!1;var e=this.creativeWaterfall[this.nextCreativeIndex];if(!e)return this.setBlank(),r.setCssProperty(this.container,"display","none","important"),this.adUnit.onBlank(this),!1;if(this.nextCreativeIndex++,"json"!==e.typ){var n=document.createElement("iframe");(this.currentFrame=n).setAttribute("style","border-width:0px"),n.setAttribute("scrolling","no"),n.setAttribute("frameborder","no"),n.setAttribute("iat-market",e.m),n.style.margin="0px auto",n.style.overflow="visible",n.style.width=e.cw+"px",n.style.height=e.ch+"px",n.src="about:blank",this.container.appendChild(n);var i=n.contentDocument?n.contentDocument:n.contentWindow.document;i.open("text/html","replace"),n.contentWindow&&(n.contentWindow.addEventListener("message",function(e){return t.passbackListener(e)}),n.contentWindow._tg=e),i.write("<html><head></head><body style='margin:0px;overflow:hidden;border:0px'><script>"+e.cd+"<\/script></body></html>"),i.close()}var o=this.m;return this.cd=e.cd,this.iid=e.iid,this.ch=e.ch,this.cw=e.cw,this.m=e.m,this.ot=e.ot,this.dnr=e.dnr,this.cu=e.cu,this.typ=e.typ,this.gxiDuration=e.gxid,this.logData=!this.m||"House"==this.m,this.adUnit.updateThreshold(this.cw,this.ch),o&&this.m&&"House"!=o&&"House"!=this.m||(this.o=e.oid,this.ol=e.li||(0==e.is?-1:-2),this.cid=e.ci||(0==e.is?-1:-2),this.acid=e.acid),a.timeout(function(){t.checkNotMeasurable()},3e3),!0},u.prototype.buildBaseLoggingRequest=function(e){return o.global.rootPath+"/"+e+"?appid="+o.global.appId+"&auid="+this.adUnit.adUnitId+"&ts="+ +new Date+"&s="+o.global.section+"&sid="+o.global.session},u.prototype.buildBlankLoggingRequest=function(){if(this.blankRequest){var e=o.global.rootPath+"/lb?appid="+o.global.appId+"&auid="+this.adUnit.adUnitId+"&acid="+this.blankRequest.acid+"&iid="+this.blankRequest.iid+"&is="+this.blankRequest.is+"&m="+this.blankRequest.m+"&ts="+ +new Date+"&s="+o.global.section;r.generateBeacon(e)}},u.prototype.buildBaseImpressionLoggingRequest=function(e){var t=this.buildBaseLoggingRequest(e)+"&acid="+this.acid+"&iid="+this.iid+"&cw="+this.cw+"&ch="+this.ch+"&is="+this.index;return t+="passback"==e?"&m="+(-1<this.nextCreativeIndex?1:0):"&ci="+this.cid+"&olid="+this.ol+"&oid="+this.o},u.prototype.buildPassbackLoggingRequest=function(e){r.generateBeacon(this.buildBaseImpressionLoggingRequest("lpb"))},u.prototype.buildStdImpressionLoggingRequest=function(){if(this.iid&&this.logData){var e=this.buildBaseImpressionLoggingRequest("limp");r.generateBeacon(e)}},u.prototype.stopViewableLoggingTimer=function(){this.viewableTimer&&(a.clear(this.viewableTimer),this.viewableTimer=void 0)},u.prototype.startViewableLoggingTimer=function(){var e=this;!this.adUnit.isInView()||this.viewableTimer||this.viewableCompleted||i.getCurrentState()!=s.BrowserState.Active||!this.cid||this.cid<0||(this.viewableTimer=a.timeout(function(){e.viewableCompleted=!0,e.buildViewableImpressionLoggingRequest()},1e3))},u.prototype.buildViewableImpressionLoggingRequest=function(){if(this.iid&&this.logData){var e=this.buildBaseImpressionLoggingRequest("lvi");r.generateBeacon(e)}},u.prototype.buildTGIImpressionLoggingRequest=function(){if(this.iid&&this.logData){var e=this.buildBaseImpressionLoggingRequest("ltgi");r.generateBeacon(e)}},u.prototype.checkNotMeasurable=function(){this.adUnit.updateViewState(r.getViewport()),!this.adUnit.notMeasurableReason||this.adUnit.ignoreNotMeasurable||this.viewableCompleted||(this.viewableCompleted=!0,this.buildNotMeasurableLoggingRequest(),this.setBlank(),c.emit(22,this.adUnit))},u.prototype.buildNotMeasurableLoggingRequest=function(){var e=this.buildBaseImpressionLoggingRequest("notmeasurable");e+="&rs="+this.adUnit.notMeasurableReason,r.generateBeacon(e)},u.prototype.buildGxiImpressionLoggingRequest=function(e){if(this.iid&&this.logData){e=Math.round(e/1e3);var t=this.buildBaseImpressionLoggingRequest("lgxi");t+="&vt="+encodeURIComponent(btoa(e.toString())),r.generateBeacon(t)}},u.prototype.buildSocialDataLoggingRequest=function(e){if(this.iid&&this.logData){var t=this.buildBaseImpressionLoggingRequest("lsd");t+="&sd="+encodeURIComponent(btoa(e)),r.generateBeacon(t)}},u);function u(e,t,n,i){void 0===i&&(i=!1),this.startTimestamp=+new Date,this.creativeWaterfall=[],this.viewableCompleted=!1,this.nextCreativeIndex=0,this.adUnit=e,this.state=s.EntryState.Request,this.index=t,this.ignoreInViewRequisite=i,this.logData=!0,n?this.container=n:this.setBlank()}n.Entry=l},{"../../common/EventManager":28,"../../common/Parameters":30,"../../common/Timers":31,"../../common/Utilities":32,"../../interfaces/Enums":33,"../BrowserStateTracker":36}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../common/Parameters"),o=e("../../common/Utilities"),r=(s.prototype.addField=function(e){this.fields[this.fields.length]=e},s.prototype.toString=function(){return this.fields.join(s.separator)},s.prototype.getAction=function(e){switch(e){case 0:return"snap";case 1:return"cd";case 2:return"pimp";case 3:return"pvimp";case 4:return"ptgi";case 5:return"rrptgi"}},s.separator="|",s.version="1.0",s.workerType="p",s);function s(e){this.fields=[],this.addField(s.version),this.addField(s.workerType),this.addField(o.StringUtils.padRight(this.getAction(e),6)),this.addField(i.global.session),this.addField(i.global.context),this.addField(o.StringUtils.padRight(i.global.appId,6)),this.addField(i.global.country),this.addField(i.global.section)}n.Message=r},{"../../common/Parameters":30,"../../common/Utilities":32}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.init=function(){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],o=0;o<n;){var r=t[o];if(e.call(i,r,o,t))return r;o++}},configurable:!0,writable:!0})},o);function o(){}n.CustomPolyfill=i},{}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../API"),o=e("../../interfaces/Enums"),r=e("./utils"),s=e("../../common/Timers"),a=e("../../common/Parameters"),c=e("../PlacementManager"),l=e("./mapping-service"),u=(d.prototype.render=function(n){var i=this;try{if(!n||!n.window)return;this.waitForMainGpt(function(){var e=i.getSlotDivId(n.window),t=i.getSlot(e);t?i.refreshSlot(n,t):i.loadGptAndCreateSlot(n,e)||i.passback(n.window)})}catch(e){this.passback(n.window)}},d.prototype.waitForMainGpt=function(e,t){var n=this;if((t=t||0)<=5e3&&(!window.top.googletag||!window.top.googletag.pubadsReady))return t+=500,void s.timeout(function(){return n.waitForMainGpt(e,t)},500);e()},d.prototype.getSlotDivId=function(e){var t=e.frameElement.parentNode,n=t?t.parentNode:null;if(n)return(n.getAttribute("id")||"").replace("google_ads_iframe_","").replace("__container__","")},d.prototype.getSlot=function(e){if(e&&window.top.googletag&&window.top.googletag.pubadsReady)return window.top.googletag.pubads().getSlotIdMap()[e]},d.prototype.hasValidPath=function(e,t){if(!e||!t||""===e.trim())return!1;var n=e.split("/").filter(function(e){return""!==e.trim()});return!a.config.integrations||!a.config.integrations.dfp||n[0]!==a.config.integrations.dfp.networkCode||!!t.startsWith("tg-adhesion-banner-id-")},d.prototype.loadGptAndCreateSlot=function(e,t){var n=this;if(!this.hasValidPath(e.path,t))return!1;if(e.path=r.DfpUtils.getFinalSlotPath(e.path),e.sizes=this.getSizesForNewSlot(e),!e.path||!e.sizes||!e.sizes.length)return!1;var i=e.window.document.createElement("script");return i.async=!0,i.src="https://www.googletagservices.com/tag/js/gpt.js",i.onload=function(){n.createSlot(e)},e.window.document.getElementsByTagName("head")[0].appendChild(i),!0},d.prototype.createSlot=function(i){var o=this,t="div-gpt-ad-"+ +new Date+"-0",e=i.window.document.createElement("div");e.setAttribute("id",t),i.window.document.getElementsByTagName("body")[0].appendChild(e);var r=i.window.googletag||{};r.cmd=r.cmd||[],r.cmd.push(function(){var n=r.defineSlot(i.path,i.sizes,t).addService(r.pubads());o.setTargetingOnNewGpt(i);var e=o.getTargetingForNewSlot(i);e?n.updateTargetingFromMap(e):o.passback(i.window),r.pubads().enableSingleRequest(),r.pubads().disableInitialLoad(),r.enableServices(),r.pubads().addEventListener("slotRenderEnded",function(e){if(e.isEmpty)o.passback(i.window);else{if(e.size){var t=i.window.frameElement;t.style.width=e.size[0]+"px",t.style.height=e.size[1]+"px"}l.pushAdMappingRequest(n,e.size,!0,i.window)}}),r.pubads().refresh([n])})},d.prototype.getSizesForNewSlot=function(e){if(e.sizes){if(Array.isArray(e.sizes))return e.sizes;var t=o.DeviceType[a.global.device].toLowerCase(),n=e.sizes[t];return n=(n=n||e.sizes.default)||e.sizes.all}},d.prototype.setTargetingOnNewGpt=function(e){if(e.window.top.googletag&&e.window.top.googletag.pubadsReady){var t=e.window.top.googletag.pubads().getTargetingKeys();if(t&&t.length){var n=e.window.googletag.pubads(),i=e.window.top.googletag.pubads();t.forEach(function(e){n.setTargeting(e,i.getTargeting(e))})}}},d.prototype.getRotationIndexForNewSlot=function(e){var t=e.window.frameElement.parentNode,n=t?t.parentNode:null;if(n){var i=n.getAttribute("TG-Zone"),o=c.getAdUnit(i);if(o){var r=o.getCurrentEntry();if(r)return 0===r.index?0:Math.min(r.index,5)}}return-1},d.prototype.getTargetingForNewSlot=function(e){var t=this.getRotationIndexForNewSlot(e);if(-1!==t){var n={};if(e.customTarget)if("string"==typeof e.customTarget)try{n=JSON.parse(e.customTarget)}catch(e){}else n=e.customTarget;return 0<t&&(n.tgRotSlot=[t.toString()]),n}},d.prototype.refreshSlot=function(n,i){for(var e=n.suffixKeys||[],t=0;t<e.length;t++){for(var o=e[t],r=o[0],s=o[1],a=new RegExp("(("+s+")?$)","i"),c=i.getTargeting(r),l=c.length;-1<--l;)c[l]=c[l].replace(a,s);i.setTargeting(r,c)}var u=i.getTargeting("tgRotSlot"),d=Math.min(0<u.length?parseInt(u[0],void 0)+1:1,5);i.setTargeting("tgRotSlot",[d.toString()]);var h=this.getPrebidCode(n,i);if(h){var p=n.window.top.pbjs;p.que.push(function(){p.requestBids({timeout:p.getConfig().bidderTimeout,adUnitCodes:[h],bidsBackHandler:function(e,t){p.setTargetingForGPTAsync([h]),n.window.top.googletag.pubads().refresh([i],{changeCorrelator:!1})}})})}else n.window.top.googletag.pubads().refresh([i],{changeCorrelator:!1})},d.prototype.getPrebidCode=function(e,t){if(e.window.top.pbjs){var n=e.window.top.pbjs.adUnits;return 0<=n.findIndex(function(e){return e.code===t.getAdUnitPath()})?t.getAdUnitPath():0<=n.findIndex(function(e){return e.code===t.getSlotElementId()})?t.getSlotElementId():void 0}},d.prototype.passback=function(e){e.postMessage("TG-SP","*")},d);function d(){i.extend("DFP",this)}n.DfpIntegrationApi=u},{"../../common/Parameters":30,"../../common/Timers":31,"../../interfaces/Enums":33,"../API":34,"../PlacementManager":50,"./mapping-service":61,"./utils":62}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../common/Timers"),o=e("../../common/Parameters"),r=e("../../common/Logging"),s=e("./mapping-service"),a=e("./api");function c(t,e,n){try{if(t.getAdUnitPath().split("/").filter(function(e){return""!==e.trim()})[0]!==o.config.integrations.dfp.networkCode)return;s.pushAdMappingRequest(t,e,n)}catch(e){r.warn("Failed to create mapping request for "+t.getAdUnitPath()+" on page "+window.location.href,"loadSlot")}}function l(){window.googletag&&window.googletag.pubadsReady?(window.googletag.pubads().getSlots().forEach(function(e){c(e,void 0,!1)}),window.googletag.pubads().addEventListener("slotRenderEnded",function(e){c(e.slot,e.size,!0)})):i.timeout(l,500)}n.start=function(){o.config.integrations.dfp&&(l(),s.start()),new a.DfpIntegrationApi}},{"../../common/Logging":29,"../../common/Parameters":30,"../../common/Timers":31,"./api":59,"./mapping-service":61}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../common/Timers"),y=e("../../common/Utilities"),w=e("../../common/Parameters"),i=e("../PlacementManager"),o=e("../classes/AdUnit"),s=15,a=200,c=50,b={},S=[],l=window._mappingResponses=[];function u(){var e=[];try{for(;S.length&&e.length<s;){var t=S.pop();e.push(t)}if(!e.length)return;var n=w.global.rootPath+"/dfp/mapping/batch?h="+encodeURIComponent(y.BrowserUtils.getTopMostPageUrl())+"&appId="+w.global.appId+"&requests="+JSON.stringify(e),i=document.createElement("iframe");i.setAttribute("style","border-width:0px"),i.style.display="none",i.style.margin="0px auto",i.src="about:blank",document.body.appendChild(i);var o=window.setInterval(function(){var e=i.contentDocument?i.contentDocument:i.contentWindow?i.contentWindow.document:null;if(e&&"complete"===e.readyState)try{var t=e.createElement("script");t.type="text/javascript",t.src=n,e.body.appendChild(t)}finally{window.clearInterval(o)}},10)}catch(e){}finally{r.timeout(u,a)}}function d(e,t){var n=t.ownerDocument.defaultView;try{if(e.scriptWindow=n||void 0,n.frameElement){if(!n.frameElement.parentNode)return;e.element="DIV"==n.frameElement.parentNode.nodeName?n.frameElement.parentNode:n.frameElement.parentNode.parentNode,e.window=n.parent}else e.window=n||void 0,e.element=t;if(t.style.display||(t.style.display="inline-block"),e.containerScripts)for(var i=0;i<e.containerScripts.length;i++){var o=e.containerScripts[i];if(o){var r=document.createElement("IFRAME");r.setAttribute("style","border-width:0px"),r.setAttribute("scrolling","no"),r.setAttribute("frameborder","no"),r.style.margin="0px auto",r.style.display="none",r.style.width="0px",r.style.height="0px",r.src="about:blank",e.element.appendChild(r);var s=r.contentDocument?r.contentDocument:r.contentWindow?r.contentWindow.document:null;if(s){s.open();try{s.write("<html><head></head><body style='margin:0px;overflow:hidden;border:0px'><script type='text/javascript'><\/script><script>"+o+"<\/script></body></html>")}catch(e){}s.close()}}}return e}catch(e){return}}function h(){try{for(;l.length;){var e=l.pop();if(e&&e.eid&&e.id&&!isNaN(e.id)&&b[e.eid]){var t=b[e.eid],n=d(e,t.element);n&&(t.createAdUnit?(n.dfpAdUnit=!0,i.createAdUnit(n)):o.AdUnit.findAdhesionAndLoadDfpCreative(t.element,n))}}}finally{r.timeout(h,c)}}n.pushAdMappingRequest=function(e,t,n,i){var o=(i=i||window.top).document.getElementById(e.getSlotElementId());if((o=o&&o.querySelector("div[id^=google_ads_iframe_][id$=container__]"))&&(t=t||function(e,t){var n=t.querySelector("iframe[id$='"+e.getSlotId().getId()+"']");if(n&&(!n.style||"none"!==n.style.display)){var i=y.getElementSize(n);return 0===i.width&&(i.width=parseInt(n.getAttribute("width")||"0")),0===i.height&&(i.height=parseInt(n.getAttribute("height")||"0")),[i.width,i.height]}}(e,o),n||t)){var r,s,a=(s=function(t){var e=window.blankSizes||[];return t?void 0!==e.find(function(e){return e[0]===t[0]&&e[1]===t[1]}):void 0!==e.find(function(e){return 0===e[0]&&0===e[1]})}(r=t),r||s?s?1:2:0);if(a){var c=1==a,l=e.getResponseInformation(),u=!c&&l&&!l.creativeId,d=c||u||!l?void 0:l.lineItemId,h=c||u||!l?void 0:l.advertiserId,p=e.getTargeting("tgRotSlot"),f=e.getAdUnitPath(),g=e.getSlotId().getId().replace(f+"_","")+"-"+Math.floor(1e6*Math.random()).toString(),m=function(o,r){var e=w.config.integrations.dfp,t=e&&e.keyValues;if(!t||!t.length)return;var s={};return t.forEach(function(t){var e=o.getTargeting(t);e&&e.length&&(s[t]=e);var n=r.googletag.pubads(),i=n.getTargetingKeys().filter(function(e){return e===t&&!s[t]});i&&i.length&&n.getTargeting(i[0])&&(s[t]=n.getTargeting(i[0]))}),s}(e,i),v={eaup:f,eolid:d||void 0,advid:h||void 0,ct:m?encodeURIComponent(JSON.stringify(m).replace(new RegExp('"',"g"),"'")):void 0,w:c||!t?void 0:t[0],h:c||!t?void 0:t[1],tgRotSlot:0<p.length?p[0]:void 0,isda:u||void 0,isb:c||void 0,eId:g};b[g]={element:o,createAdUnit:i===window.top},S.push(v)}}},n.start=function(){r.timeout(u,a),r.timeout(h,c)}},{"../../common/Parameters":30,"../../common/Timers":31,"../../common/Utilities":32,"../PlacementManager":50,"../classes/AdUnit":55}],62:[function(e,t,n){"use strict";function a(o){for(var r=window.top.googletag.pubads().getSlots(),e=function(e){var t=r[e].getAdUnitPath().split("/").filter(function(e){return""!==e.trim()});if(o.startsWith("-")){var n=parseInt(o.substr(1));if(t.length>n)return{value:t[n]}}if(o.startsWith(">")){var i=parseInt(o.substr(1))+1;if(t.length>i)return{value:t.filter(function(e,t){return i<=t}).join("/")}}},t=0;t<r.length;t++){var n=e(t);if("object"==typeof n)return n.value}}Object.defineProperty(n,"__esModule",{value:!0}),(n.DfpUtils||(n.DfpUtils={})).getFinalSlotPath=function(e){if(e&&""!==e.trim()){var t=function(e){return-1<e.indexOf("[[")&&-1<e.indexOf("]]")};if(t(e)){for(var n=e.split("/").filter(function(e){return""!==e.trim()}),i=0;i<n.length;i++){var o=n[i];if(t(o)){var r=o.replace("[[","").replace("]]","").toUpperCase();if(r.startsWith("LEVEL")){var s=a(r.replace("LEVEL",""));s&&(o=s)}n[i]=o}}e="/"+n.join("/")}return e}}},{}]},{},[27]);