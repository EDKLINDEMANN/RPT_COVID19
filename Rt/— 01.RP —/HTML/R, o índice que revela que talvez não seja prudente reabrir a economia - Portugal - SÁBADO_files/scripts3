function live(){$(".icon-live").delay(1e3).fadeOut(1e3).delay(100).fadeIn(1e3)}function reposition(){var n=$(this),t=n.find(".modal-dialog");n.css("display","block");t.css("margin-top",Math.max(0,($(window).height()-t.height())/2))}function toggleIcon(n){$(n.target).prev(".panel-heading").find(".more-less").toggleClass("glyphicon-plus glyphicon-minus")}function addLoadEvent(n){var t=window.onload;window.onload=typeof onload!="function"?n:function(){t&&t();n()}}function prepareLayoutForAdsReturned(n){var t=n.slot.getSlotElementId();n.isEmpty||($("#"+t).parent().show(),$("#"+t).closest(".pub").show(),t.indexOf("div-gpt-ad-1480346849613-0")>-1&&$("#div-gpt-ad-1480346849613-0").length>0&&$("#div-gpt-ad-1480346849613-0").is(":visible")&&$("body").addClass("mastheadVisible"))}function ApplyFavoritesInEach(){var n=COF.cookies.get("Favorites"),t;COF.validate.isNullOrEmpty(n)||$(".guardar").length>0&&(t=n.toString().split("||"),$(t).each(function(){var t=this.toString(),n=$(".guardar[data-contentID='"+t+"']");typeof n!="undefined"&&$(n).each(function(){$(this).toggleClass("guardado");$(".ic_read-later").length>0&&$(this).toggleClass("ic_read-later_active")})}))}function renderPubLayer(n){var t=$("#"+n+" div[id^='div-gpt-ad-mrec-']");t.length>0&&COF.pubApi.renderMrecLayer(t)}function swReg(){COFPushNotifications.addConfigs({SITE_BASE_URL:GlobalVariables.ENV_URL,LABEL_ACTION_ID:"#ic_notificacoes",TEXT_CONTAINER_ID:"#ic_notificacoes .msg-notification",NOTIFICATION_BLOCK_ID:".notificacao",CONFIRM_BUTTON_ID:"#pushContinue",CANCEL_BUTTON_ID:".pushCancelRegister",ICON_URL:GlobalVariables.ENV_URL+"/i/pushnotifications/s100x100.png",BADGE_URL:GlobalVariables.ENV_URL+"/i/pushnotifications/notification_sab.png",MESSAGE_TITLE:"Notificações SÁBADO",HAS_POPUP_REGISTRATION:!0,FULL_SITE_SUBSCRIPTION:!1,VAPID_PUBLIC_KEY:GlobalVariables.pushnotifications.vapidPublicKey,SUBSCRIBE_CALLBACK:function(){COF.contagens.EventOnGoogleAnalytics("event","PushChrome","Register")},UNSUBSCRIBE_CALLBACK:function(){COF.contagens.EventOnGoogleAnalytics("event","PushChrome","Unregister")}});"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(function(n){initCOFPushNotifications.init(n)})}var share,favoritos,showVideo;!function(n,t,i,r){function h(){}function si(){return!1}function s(){return{html:e.documentElement,body:e.body,head:e.getElementsByTagName("head")[0],title:e.title}}function kt(t){var i;return"object"!=typeof t||n.each(t,function(r,u){/^[a-z]+_/.test(r)&&(i="",n.each(r.split("_"),function(n,t){i+=0<n?t.substr(0,1).toUpperCase()+t.substr(1):t}),t[i]=u,delete t[r])}),t}function ot(t){return-1<n.inArray(t,ui)?i[t.toUpperCase()]:t}function dt(t,i){for(var u,r=0;r<v._inst.length;r++)if(v._inst[r].id===i&&v._inst[r].type==t)return v._inst[r];this.type=t;this.id=i;this.readys=[];v._inst.push(this);u=this;n.extend(this,v[t]);n.getJSON(this.getUrl(),function(t){u.data=t;n.each(u.readys,function(n,t){t(u.data)});u.readys=[]});this.getMedia=function(n,t,i){function u(i){t(r["get_"+n](i))}i=i||h;var r=this;try{r.data?u(r.data):r.readys.push(u)}catch(u){i()}}}function gt(n){var t;for(var i in v)if((t=n&&v[i].reg&&n.match(v[i].reg))&&t.length)return{id:t[2],provider:i};return!1}function st(t){b.push(t);n.each(ei,function(n,i){i._options.theme!=t.name&&(i._initialized||i._options.theme)||(i.theme=t,i._init.call(i))})}function ht(t){return u.insertStyleTag(".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}","galleria-videoicon"),n(u.create("galleria-videoicon")).html("<i><\/i>").appendTo(t).click(function(){n(this).siblings("img").mouseup()})}function bt(t,i,r,f){var s,h=this.getOptions("easing"),c=this.getStageWidth(),e={left:c*(t.rewind?-1:1)},o={left:0};r?(e.opacity=0,o.opacity=1):e.opacity=1;n(t.next).css(e);u.animate(t.next,o,{duration:t.speed,complete:(s=n(t.next).add(t.prev),function(){i();s.css({left:0})}),queue:!1,easing:h});f&&(t.rewind=!t.rewind);t.prev&&(e={left:0},o={left:c*(t.rewind?1:-1)},r&&(e.opacity=1,o.opacity=0),n(t.prev).css(e),u.animate(t.prev,o,{duration:t.speed,queue:!1,easing:h,complete:function(){n(this).css("opacity",0)}}))}function et(t,i,r){var u={};r=r||"transition";n.each("webkit moz ms o".split(" "),function(){u["-"+this+"-"+r]=i});t.css(u)}function oi(n){et(n,"none","transition");i.WEBKIT&&i.TOUCH&&(et(n,"translate3d(0,0,0)","transform"),n.data("revert")&&(n.css(n.data("revert")),n.data("revert",null)))}var ct,it,ni,ti,lt,g,at,vt,yt,rt,nt,ut,e=t.document,k=n(e),c=n(t),d=Array.prototype,ii=!0,pt=!1,y=navigator.userAgent.toLowerCase(),ri=t.location.hash.replace(/#\//,""),ft=t.location.protocol,f=Math,o=function(){for(var n=3,t=e.createElement("div"),i=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->",i[0];);return 4<n?n:e.documentMode||r}(),tt=t.parent!==t.self,ui=(ut=[],n.each("data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image".split(" "),function(n,t){ut.push(t);/_/.test(t)&&ut.push(t.replace(/_/g,""))}),ut),v={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(){return"http://www.youtube.com/embed/"+this.id},getUrl:function(){return ft+"//gdata.youtube.com/feeds/api/videos/"+this.id+"?v=2&alt=json-in-script&callback=?"},get_thumb:function(n){return n.entry.media$group.media$thumbnail[2].url},get_image:function(n){return n.entry.yt$hd?ft+"//img.youtube.com/vi/"+this.id+"/maxresdefault.jpg":n.entry.media$group.media$thumbnail[3].url}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(){return"http://player.vimeo.com/video/"+this.id},getUrl:function(){return ft+"//vimeo.com/api/v2/video/"+this.id+".json?callback=?"},get_thumb:function(n){return n[0].thumbnail_medium},get_image:function(n){return n[0].thumbnail_large}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(){return ft+"//www.dailymotion.com/embed/video/"+this.id},getUrl:function(){return"https://api.dailymotion.com/video/"+this.id+"?fields=thumbnail_240_url,thumbnail_720_url&callback=?"},get_thumb:function(n){return n.thumbnail_240_url},get_image:function(n){return n.thumbnail_720_url}},_inst:[]},l={support:(nt=s().html,!tt&&(nt.requestFullscreen||nt.msRequestFullscreen||nt.mozRequestFullScreen||nt.webkitRequestFullScreen)),callback:h,enter:function(n,t,i){this.instance=n;this.callback=t||h;(i=i||s().html).requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(n){this.callback=n||h;e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){function n(){if(l.instance){var n=l.instance._fullscreen;e.fullscreen||e.mozFullScreen||e.webkitIsFullScreen||e.msFullscreenElement&&null!==e.msFullscreenElement?n._enter(l.callback):n._exit(l.callback)}}e.addEventListener("fullscreenchange",n,!1);e.addEventListener("MSFullscreenChange",n,!1);e.addEventListener("mozfullscreenchange",n,!1);e.addEventListener("webkitfullscreenchange",n,!1)}}},wt=[],w=[],fi=!1,a=!1,ei=[],b=[],u={clearTimer:function(t){n.each(i.get(),function(){this.clearTimer(t)})},addTimer:function(t){n.each(i.get(),function(){this.addTimer(t)})},array:function(n){return d.slice.call(n,0)},create:function(n,t){t=t||"div";var i=e.createElement(t);return i.className=n,i},removeFromArray:function(t,i){return n.each(t,function(n,r){if(r==i)return t.splice(n,1),!1}),t},getScriptPath:function(t){var i=(t=t||n("script:last").attr("src")).split("/");return 1==i.length?"":(i.pop(),i.join("/")+"/")},animate:(vt=function(n){var i,r="transition WebkitTransition MozTransition OTransition".split(" ");if(t.opera)return!1;for(i=0;r[i];i++)if(void 0!==n[r[i]])return r[i];return!1}((e.body||e.documentElement).style),yt={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[vt],rt={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},function(r,f,e){if(e=n.extend({duration:400,complete:h,stop:!1},e),r=n(r),!e.duration)return r.css(f),void e.complete.call(r[0]);var o,l,s,c;vt?(e.stop&&(r.off(yt),oi(r)),ct=!1,n.each(f,function(n,t){at=r.css(n);u.parseValue(at)!=u.parseValue(t)&&(ct=!0);r.css(n,at)}),ct?(it=[],ni=e.easing in rt?rt[e.easing]:rt._default,ti=" "+e.duration+"ms cubic-bezier("+ni.join(",")+")",t.setTimeout((o=r,l=yt,s=f,c=ti,function(){var t;o.one(l,(t=o,function(){oi(t);e.complete.call(t[0])}));i.WEBKIT&&i.TOUCH&&(lt={},g=[0,0,0],n.each(["left","top"],function(n,t){t in s&&(g[n]=u.parseValue(s[t])-u.parseValue(o.css(t))+"px",lt[t]=s[t],delete s[t])}),(g[0]||g[1])&&(o.data("revert",lt),it.push("-webkit-transform"+c),et(o,"translate3d("+g.join(",")+")","transform")));n.each(s,function(n){it.push(n+c)});et(o,it.join(","));o.css(s)}),2)):t.setTimeout(function(){e.complete.call(r[0])},e.duration)):r.animate(f,e)}),removeAlpha:function(n){if(n instanceof jQuery&&(n=n[0]),o<9&&n){var t=n.style,i=n.currentStyle,r=i&&i.filter||t.filter||"";/alpha/.test(r)&&(t.filter=r.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(t,i){(t=n(t)).attr("style")&&t.data("styles",t.attr("style")).removeAttr("style");t.css(i)},revertStyles:function(){n.each(u.array(arguments),function(t,i){(i=n(i)).removeAttr("style");i.attr("style","");i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(n){u.forceStyles(n,{position:"absolute",left:-1e4})},moveIn:function(){u.revertStyles.apply(u,u.array(arguments))},hide:function(t,i,r){var f,e,s;r=r||h;f=n(t);t=f[0];f.data("opacity")||f.data("opacity",f.css("opacity"));e={opacity:0};i?(s=o<9&&t?function(){u.removeAlpha(t);t.style.visibility="hidden";r.call(t)}:r,u.animate(t,e,{duration:i,complete:s,stop:!0})):o<9&&t?(u.removeAlpha(t),t.style.visibility="hidden"):f.css(e)},show:function(t,i,r){var f,e,s;r=r||h;f=n(t);t=f[0];e={opacity:parseFloat(f.data("opacity"))||1};i?(o<9&&(f.css("opacity",0),t.style.visibility="visible"),s=o<9&&t?function(){1==e.opacity&&u.removeAlpha(t);r.call(t)}:r,u.animate(t,e,{duration:i,complete:s,stop:!0})):o<9&&1==e.opacity&&t?(u.removeAlpha(t),t.style.visibility="visible"):f.css(e)},wait:function(r){i._waiters=i._waiters||[];r=n.extend({until:si,success:h,error:function(){i.raise("Could not complete wait function.")},timeout:3e3},r);var o,f,e,s=u.timestamp(),c=function(){return f=u.timestamp(),o=f-s,u.removeFromArray(i._waiters,e),r.until(o)?(r.success(),!1):"number"==typeof r.timeout&&f>=s+r.timeout?(r.error(),!1):void i._waiters.push(e=t.setTimeout(c,10))};i._waiters.push(e=t.setTimeout(c,10))},toggleQuality:function(n,t){(7===o||8===o)&&n&&"IMG"==n.nodeName.toUpperCase()&&(void 0===t&&(t="nearest-neighbor"===n.style.msInterpolationMode),n.style.msInterpolationMode=t?"bicubic":"nearest-neighbor")},insertStyleTag:function(t,i){var r,u;i&&n("#"+i).length||(r=e.createElement("style"),(i&&(r.id=i),s().head.appendChild(r),r.styleSheet)?r.styleSheet.cssText=t:(u=e.createTextNode(t),r.appendChild(u)))},loadScript:function(t,i){var u=!1,r=n("<script>").attr({src:t,async:!0}).get(0);r.onload=r.onreadystatechange=function(){u||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(u=!0,r.onload=r.onreadystatechange=null,"function"==typeof i&&i.call(this,this))};s().head.appendChild(r)},parseValue:function(n){if("number"==typeof n)return n;if("string"!=typeof n)return 0;var t=n.match(/\-?\d|\./g);return t&&t.constructor===Array?1*t.join(""):0},timestamp:function(){return(new Date).getTime()},loadCSS:function(t,f,c){var l,y,a,v;if(n("link[rel=stylesheet]").each(function(){if(new RegExp(t).test(this.href))return l=this,!1}),"function"==typeof f&&(c=f,f=r),c=c||h,l)return c.call(l,l),l;if(y=e.styleSheets.length,n("#"+f).length)n("#"+f).attr("href",t),y--;else if(l=n("<link>").attr({rel:"stylesheet",href:t,id:f}).get(0),a=n('link[rel="stylesheet"], style'),a.length?a.get(0).parentNode.insertBefore(l,a[0]):s().head.appendChild(l),o&&31<=y)return void i.raise("You have reached the browser stylesheet limit (31)",!0);return"function"==typeof c&&(v=n("<s>").attr("id","galleria-loader").hide().appendTo(s().body),u.wait({until:function(){return 1==v.height()},success:function(){v.remove();c.call(l,l)},error:function(){v.remove();i.raise("Theme CSS could not load after 20 sec. "+(i.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme at http://galleria.io/customer/."),!0)},timeout:5e3})),l}},p={active:!1,init:function(n,t,i){p.effects.hasOwnProperty(n)&&p.effects[n].call(this,t,i)},effects:{fade:function(t,i){n(t.next).css({opacity:0,left:0});u.animate(t.next,{opacity:1},{duration:t.speed,complete:i});t.prev&&(n(t.prev).css("opacity",1).show(),u.animate(t.prev,{opacity:0},{duration:t.speed}))},flash:function(t,i){n(t.next).css({opacity:0,left:0});t.prev?u.animate(t.prev,{opacity:0},{duration:t.speed/2,complete:function(){u.animate(t.next,{opacity:1},{duration:t.speed,complete:i})}}):u.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},pulse:function(t,i){t.prev&&n(t.prev).hide();n(t.next).css({opacity:0,left:0}).show();u.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},slide:function(){bt.apply(this,u.array(arguments))},fadeslide:function(){bt.apply(this,u.array(arguments).concat([!0]))},doorslide:function(){bt.apply(this,u.array(arguments).concat([!1,!0]))}}};l.listen();n.event.special["click:fast"]={propagate:!0,add:function(i){function u(n){if(n.touches&&n.touches.length){var t=n.touches[0];return{x:t.pageX,y:t.pageY}}}var r={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};n(this).data({clickstate:r,timer:0}).on("touchstart.fast",function(i){t.clearTimeout(n(this).data("timer"));n(this).data("clickstate",{touched:!0,touchdown:!0,coords:u(i.originalEvent),evObj:i})}).on("touchmove.fast",function(t){var r=u(t.originalEvent),i=n(this).data("clickstate");6<Math.max(Math.abs(i.coords.x-r.x),Math.abs(i.coords.y-r.y))&&n(this).data("clickstate",n.extend(i,{touchdown:!1}))}).on("touchend.fast",function(u){var f=n(this);f.data("clickstate").touchdown&&i.handler.call(this,u);f.data("timer",t.setTimeout(function(){f.data("clickstate",r)},400))}).on("click.fast",function(t){if(n(this).data("clickstate").touched)return!1;n(this).data("clickstate",r);i.handler.call(this,t)})},remove:function(){n(this).off("touchstart.fast touchmove.fast touchend.fast click.fast")}};c.on("orientationchange",function(){n(this).resize()});(i=function(){var h=this;this._options={};this._playing=!1;this._playtime=5e3;this._active=null;this._queue={length:0};this._data=[];this._dom={};this._thumbnails=[];this._layers=[];this._initialized=!1;this._firstrun=!1;this._stageWidth=0;this._stageHeight=0;this._target=r;this._binds=[];this._id=parseInt(1e4*f.random(),10);n.each("container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip".split(" "),function(n,t){h._dom[t]=u.create("galleria-"+t)});n.each("current total".split(" "),function(n,t){h._dom[t]=u.create("galleria-"+t,"span")});var g=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(n){var t=n.keyCode||n.which;t in g.map&&"function"==typeof g.map[t]&&g.map[t].call(h,n)},attach:function(n){var t,i;for(t in n)n.hasOwnProperty(t)&&((i=t.toUpperCase())in g.keys?g.map[g.keys[i]]=n[t]:g.map[i]=n[t]);g.bound||(g.bound=!0,k.on("keydown",g.press))},detach:function(){g.bound=!1;g.map={};k.off("keydown",g.press)}},nt=this._controls={0:r,1:r,active:0,swap:function(){nt.active=nt.active?0:1},getActive:function(){return h._options.swipe?nt.slides[h._active]:nt[nt.active]},getNext:function(){return h._options.swipe?nt.slides[h.getNext(h._active)]:nt[1-nt.active]},slides:[],frames:[],layers:[]},v=this._carousel={next:h.$("thumb-nav-right"),prev:h.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var t=0,i=0,r=[0];n.each(h._thumbnails,function(u,e){if(e.ready){t+=e.outerWidth||n(e.container).outerWidth(!0);var o=n(e.container).width();t+=o-f.floor(o);r[u+1]=t;i=f.max(i,e.outerHeight||n(e.container).outerHeight(!0))}});h.$("thumbnails").css({width:t,height:i});v.max=t;v.hooks=r;v.width=h.$("thumbnails-list").width();v.setClasses();h.$("thumbnails-container").toggleClass("galleria-carousel",t>v.width);v.width=h.$("thumbnails-list").width()},bindControls:function(){var n;v.next.on("click:fast",function(t){if(t.preventDefault(),"auto"===h._options.carouselSteps){for(n=v.current;n<v.hooks.length;n++)if(v.hooks[n]-v.hooks[v.current]>v.width){v.set(n-2);break}}else v.set(v.current+h._options.carouselSteps)});v.prev.on("click:fast",function(t){if(t.preventDefault(),"auto"===h._options.carouselSteps)for(n=v.current;0<=n;n--){if(v.hooks[v.current]-v.hooks[n]>v.width){v.set(n+2);break}if(0===n){v.set(0);break}}else v.set(v.current-h._options.carouselSteps)})},set:function(n){for(n=f.max(n,0);v.hooks[n-1]+v.width>=v.max&&0<=n;)n--;v.current=n;v.animate()},getLast:function(n){return(n||v.current)-1},follow:function(n){if(0!==n&&n!==v.hooks.length-2){for(var t=v.current;v.hooks[t]-v.hooks[v.current]<v.width&&t<=v.hooks.length;)t++;n-1<v.current?v.set(n-1):t<n+2&&v.set(n-t+v.current+2)}else v.set(n)},setClasses:function(){v.prev.toggleClass("disabled",!v.current);v.next.toggleClass("disabled",v.hooks[v.current]+v.width>=v.max)},animate:function(){v.setClasses();var t=-1*v.hooks[v.current];isNaN(t)||(h.$("thumbnails").css("left",function(){return n(this).css("left")}),u.animate(h.get("thumbnails"),{left:t},{duration:h._options.carouselSpeed,easing:h._options.easing,queue:!1}))}},d=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+h._id,swapTimer:"swap"+h._id,init:function(){d.initialized=!0;u.insertStyleTag(".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}","galleria-tooltip");h.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(n){var s=h.getMousePosition(n).x,e=h.getMousePosition(n).y,r=h.$("tooltip"),i=s,t=e,u=r.outerHeight(!0)+1,c=r.outerWidth(!0),o=u+15,l=h.$("container").width()-c-2,a=h.$("container").height()-u-2;isNaN(i)||isNaN(t)||(i+=10,t-=u+8,i=f.max(0,f.min(l,i)),t=f.max(0,f.min(a,t)),e<o&&(t=o),r.css({left:i,top:t}))},bind:function(t,r){if(!i.TOUCH){d.initialized||d.init();function u(){h.$("container").off("mousemove",d.move);h.clearTimer(d.timer);h.$("tooltip").stop().animate({opacity:0},200,function(){h.$("tooltip").hide();h.addTimer(d.swapTimer,function(){d.open=!1},1e3)})}function f(t,i){d.define(t,i);n(t).hover(function(){h.clearTimer(d.swapTimer);h.$("container").off("mousemove",d.move).on("mousemove",d.move).trigger("mousemove");d.show(t);h.addTimer(d.timer,function(){h.$("tooltip").stop().show().animate({opacity:1});d.open=!0},d.open?0:500)},u).click(u)}"string"==typeof r?f(t in h._dom?h.get(t):t,r):n.each(t,function(n,t){f(h.get(n),t)})}},show:function(i){var r=(i=n(i in h._dom?h.get(i):i)).data("tt"),u=function(n){var r;t.setTimeout((r=n,function(){d.move(r)}),10);i.off("mouseup",u)};(r="function"==typeof r?r():r)&&(h.$("tooltip").html(r.replace(/\s/,"&#160;")),i.on("mouseup",u))},define:function(t,i){if("function"!=typeof i){var r=i;i=function(){return r}}t=n(t in h._dom?h.get(t):t).data("tt",i);d.show(t)}},w=this._fullscreen={scrolled:0,crop:r,active:!1,prev:n(),beforeEnter:function(n){n()},beforeExit:function(n){n()},keymap:h._keyboard.map,parseCallback:function(t,i){return p.active?function(){"function"==typeof t&&t.call(h);var r=h._controls.getActive(),u=h._controls.getNext();h._scaleImage(u);h._scaleImage(r);i&&h._options.trueFullscreen&&n(r.container).add(u.container).trigger("transitionend")}:t},enter:function(n){w.beforeEnter(function(){n=w.parseCallback(n,!0);h._options.trueFullscreen&&l.support?(w.active=!0,u.forceStyles(h.get("container"),{width:"100%",height:"100%"}),h.rescale(),i.MAC?i.SAFARI&&/version\/[1-5]/.test(y)?(h.$("stage").css("opacity",0),t.setTimeout(function(){w.scale();h.$("stage").css("opacity",1)},4)):(h.$("container").css("opacity",0).addClass("fullscreen"),t.setTimeout(function(){w.scale();h.$("container").css("opacity",1)},50)):h.$("container").addClass("fullscreen"),c.resize(w.scale),l.enter(h,n,h.get("container"))):(w.scrolled=c.scrollTop(),i.TOUCH||t.scrollTo(0,0),w._enter(n))})},_enter:function(f){var g,nt,a,y;w.active=!0;tt&&(w.iframe=(nt=e.referrer,a=e.createElement("a"),y=t.location,a.href=nt,a.protocol!=y.protocol||a.hostname!=y.hostname||a.port!=y.port?(i.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(w.pd=t.parent.document,n(w.pd).find("iframe").each(function(){if((this.contentDocument||this.contentWindow.document)===e)return g=this,!1}),g)));u.hide(h.getActiveImage());tt&&w.iframe&&(w.iframe.scrolled=n(t.parent).scrollTop(),t.parent.scrollTo(0,0));var o=h.getData(),p=h._options,k=!h._options.trueFullscreen||!l.support,v={height:"100%",overflow:"hidden",margin:0,padding:0};if(k&&(h.$("container").addClass("fullscreen"),w.prev=h.$("container").prev(),w.prev.length||(w.parent=h.$("container").parent()),h.$("container").appendTo("body"),u.forceStyles(h.get("container"),{position:i.TOUCH?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),u.forceStyles(s().html,v),u.forceStyles(s().body,v)),tt&&w.iframe&&(u.forceStyles(w.pd.documentElement,v),u.forceStyles(w.pd.body,v),u.forceStyles(w.iframe,n.extend(v,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),w.keymap=n.extend({},h._keyboard.map),h.attachKeyboard({escape:h.exitFullscreen,right:h.next,left:h.prev}),w.crop=p.imageCrop,p.fullscreenCrop!=r&&(p.imageCrop=p.fullscreenCrop),o&&o.big&&o.image!==o.big){var it=new i.Picture,rt=it.isCached(o.big),b=h.getIndex(),ut=h._thumbnails[b];h.trigger({type:i.LOADSTART,cached:rt,rewind:!1,index:b,imageTarget:h.getActiveImage(),thumbTarget:ut,galleriaData:o});it.load(o.big,function(t){h._scaleImage(t,{complete:function(t){h.trigger({type:i.LOADFINISH,cached:rt,index:b,rewind:!1,imageTarget:t.image,thumbTarget:ut});var r=h._controls.getActive().image;r&&n(r).width(t.image.width).height(t.image.height).attr("style",n(t.image).attr("style")).attr("src",t.image.src)}})});var ft=h.getNext(b),et=new i.Picture,d=h.getData(ft);et.preload(h.isFullscreen()&&d.big?d.big:d.image)}h.rescale(function(){h.addTimer(!1,function(){k&&u.show(h.getActiveImage());"function"==typeof f&&f.call(h);h.rescale()},100);h.trigger(i.FULLSCREEN_ENTER)});k?c.resize(w.scale):u.show(h.getActiveImage())},scale:function(){h.rescale()},exit:function(n){w.beforeExit(function(){n=w.parseCallback(n);h._options.trueFullscreen&&l.support?l.exit(n):w._exit(n)})},_exit:function(n){var e,o,r,v,a,f;w.active=!1;e=!h._options.trueFullscreen||!l.support;o=h.$("container").removeClass("fullscreen");(w.parent?w.parent.prepend(o):o.insertAfter(w.prev),e)&&(u.hide(h.getActiveImage()),u.revertStyles(h.get("container"),s().html,s().body),i.TOUCH||t.scrollTo(0,w.scrolled),r=h._controls.frames[h._controls.active],r&&r.image&&(r.image.src=r.image.src));tt&&w.iframe&&(u.revertStyles(w.pd.documentElement,w.pd.body,w.iframe),w.iframe.scrolled&&t.parent.scrollTo(0,w.iframe.scrolled));h.detachKeyboard();h.attachKeyboard(w.keymap);h._options.imageCrop=w.crop;a=h.getData().big;f=h._controls.getActive().image;!h.getData().iframe&&f&&a&&a==f.src&&t.setTimeout((v=h.getData().image,function(){f.src=v}),1);h.rescale(function(){h.addTimer(!1,function(){e&&u.show(h.getActiveImage());"function"==typeof n&&n.call(h);c.trigger("resize")},50);h.trigger(i.FULLSCREEN_EXIT)});c.off("resize",w.scale)}},b=this._idle={trunk:[],bound:!1,active:!1,add:function(t,r,u,f){if(t&&!i.TOUCH){b.bound||b.addEvent();t=n(t);"boolean"==typeof u&&(f=u,u={});u=u||{};var e,o={};for(e in r)r.hasOwnProperty(e)&&(o[e]=t.css(e));t.data("idle",{from:n.extend(o,u),to:r,complete:!0,busy:!1});f?t.css(r):b.addTimer();b.trunk.push(t)}},remove:function(t){t=n(t);n.each(b.trunk,function(n,i){i&&i.length&&!i.not(t).length&&(t.css(t.data("idle").from),b.trunk.splice(n,1))});b.trunk.length||(b.removeEvent(),h.clearTimer(b.timer))},addEvent:function(){b.bound=!0;h.$("container").on("mousemove click",b.showAll);"hover"==h._options.idleMode&&h.$("container").on("mouseleave",b.hide)},removeEvent:function(){b.bound=!1;h.$("container").on("mousemove click",b.showAll);"hover"==h._options.idleMode&&h.$("container").off("mouseleave",b.hide)},addTimer:function(){"hover"!=h._options.idleMode&&h.addTimer("idle",function(){b.hide()},h._options.idleTime)},hide:function(){if(h._options.idleMode&&!1!==h.getIndex()){h.trigger(i.IDLE_ENTER);var t=b.trunk.length;n.each(b.trunk,function(n,i){var r=i.data("idle");r&&(i.data("idle").complete=!1,u.animate(i,r.to,{duration:h._options.idleSpeed,complete:function(){n==t-1&&(b.active=!1)}}))})}},showAll:function(){h.clearTimer("idle");n.each(b.trunk,function(n,t){b.show(t)})},show:function(t){var r=t.data("idle");b.active&&(r.busy||r.complete)||(r.busy=!0,h.trigger(i.IDLE_EXIT),h.clearTimer("idle"),u.animate(t,r.from,{duration:h._options.idleSpeed/2,complete:function(){b.active=!0;n(t).data("idle").busy=!1;n(t).data("idle").complete=!0}}));b.addTimer()}},a=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!a.initialized){a.initialized=!0;var r={},e=h._options,c="",t="position:absolute;",f="lightbox-",l={overlay:"position:fixed;display:none;opacity:"+e.overlayOpacity+";filter:alpha(opacity="+100*e.overlayOpacity+");top:0;left:0;width:100%;height:100%;background:"+e.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:t+"background:#000;width:100%;height:100%;",content:t+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:t+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:t+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:t+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:t+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:t+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:t+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:t+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},y={},v="";v=7<o?o<9?"background:#000;filter:alpha(opacity=0);":"background:rgba(0,0,0,0);":"z-index:99999";l.nextholder+=v;l.prevholder+=v;n.each(l,function(n,t){c+=".galleria-"+f+n+"{"+t+"}"});c+=".galleria-"+f+"box.iframe .galleria-"+f+"prevholder,.galleria-"+f+"box.iframe .galleria-"+f+"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}";u.insertStyleTag(c,"galleria-lightbox");n.each("overlay box content shadow title info close prevholder prev nextholder next counter image".split(" "),function(n,t){h.addElement("lightbox-"+t);r[t]=a.elems[t]=h.get("lightbox-"+t)});a.image=new i.Picture;n.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(t,i){var r=[];n.each(i.split(" "),function(n,t){r.push(f+t)});y[f+t]=r});h.append(y);n(r.image).append(a.image.container);n(s().body).append(r.overlay,r.box);n(r.close).on("click:fast",a.hide).html("&#215;").hover(function(){n(this).css("color","#bbb")},function(){n(this).css("color","#444")});n.each(["Prev","Next"],function(t,u){var f=n(r[u.toLowerCase()]).html(/v/.test(u)?"&#8249;&#160;":"&#160;&#8250;"),e=n(r[u.toLowerCase()+"holder"]);e.on("click:fast",function(){a["show"+u]()});o<8||i.TOUCH?f.show():e.hover(function(){f.show()},function(){f.stop().fadeOut(200)})});n(r.overlay).on("click:fast",a.hide);i.IPAD&&(h._options.lightboxTransitionSpeed=0)}},rescale:function(t){var l=f.min(c.width()-40,a.width),v=f.min(c.height()-60,a.height),r=f.min(l/a.width,v/a.height),e=f.round(a.width*r)+40,o=f.round(a.height*r)+60,s={width:e,height:o,"margin-top":-1*f.ceil(o/2),"margin-left":-1*f.ceil(e/2)};t?n(a.elems.box).css(s):n(a.elems.box).animate(s,{duration:h._options.lightboxTransitionSpeed,easing:h._options.easing,complete:function(){var t=a.image,r=h._options.lightboxFadeSpeed;h.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:t.image});n(t.container).show();n(t.image).animate({opacity:1},r);u.show(a.elems.info,r)}})},hide:function(){a.image.image=null;c.off("resize",a.rescale);n(a.elems.box).hide().find("iframe").remove();u.hide(a.elems.info);h.detachKeyboard();h.attachKeyboard(a.keymap);a.keymap=!1;u.hide(a.elems.overlay,200,function(){n(this).hide().css("opacity",h._options.overlayOpacity);h.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){a.show(h.getNext(a.active))},showPrev:function(){a.show(h.getPrev(a.active))},show:function(r){a.active=r="number"==typeof r?r:h.getIndex()||0;a.initialized||a.init();h.trigger(i.LIGHTBOX_OPEN);a.keymap||(a.keymap=n.extend({},h._keyboard.map),h.attachKeyboard({escape:a.hide,right:a.showNext,left:a.showPrev}));c.off("resize",a.rescale);var s,y,l,e=h.getData(r),p=h.getDataLength(),v=h.getNext(r);u.hide(a.elems.info);try{for(l=h._options.preload;0<l;l--)y=new i.Picture,s=h.getData(v),y.preload(s.big?s.big:s.image),v=h.getNext(v)}catch(s){}a.image.isIframe=e.iframe&&!e.image;n(a.elems.box).toggleClass("iframe",a.image.isIframe);n(a.image.container).find(".galleria-videoicon").remove();a.image.load(e.big||e.image||e.iframe,function(i){var u,s,l,w,v,y;i.isIframe?(u=n(t).width(),s=n(t).height(),i.video&&h._options.maxVideoSize&&(l=f.min(h._options.maxVideoSize/u,h._options.maxVideoSize/s),l<1&&(u*=l,s*=l)),a.width=u,a.height=s):(a.width=i.original.width,a.height=i.original.height);(n(i.image).css({width:i.isIframe?"100%":"100.1%",height:i.isIframe?"100%":"100.1%",top:0,bottom:0,zIndex:99998,opacity:0,visibility:"visible"}).parent().height("100%"),a.elems.title.innerHTML=e.title||"",a.elems.counter.innerHTML=r+1+" / "+p,c.resize(a.rescale),a.rescale(),e.image&&e.iframe)&&((n(a.elems.box).addClass("iframe"),e.video)&&(w=ht(i.container).hide(),t.setTimeout(function(){w.fadeIn(200)},200)),n(i.image).css("cursor","pointer").mouseup((v=e,y=i,function(t){n(a.image.container).find(".galleria-videoicon").remove();t.preventDefault();y.isIframe=!0;y.load(v.iframe+(v.video?"&autoplay=1":""),{width:"100%",height:o<8?n(a.image.container).height():"100%"})})))});n(a.elems.overlay).show().css("visibility","visible");n(a.elems.box).show()}},it=this._timer={trunk:{},add:function(n,i,r,u){if(n=n||(new Date).getTime(),u=u||!1,this.clear(n),u){var f=i;i=function(){f();it.add(n,i,r)}}this.trunk[n]=t.setTimeout(i,r)},clear:function(n){function r(n){t.clearTimeout(this.trunk[n]);delete this.trunk[n]}var i;if(n&&n in this.trunk)r.call(this,n);else if(void 0===n)for(i in this.trunk)this.trunk.hasOwnProperty(i)&&r.call(this,i)}};return this}).prototype={constructor:i,init:function(t,u){if(u=kt(u),this._original={target:t,options:u,data:null},this._target=this._dom.target=t.nodeName?t:n(t).get(0),this._original.html=this._target.innerHTML,w.push(this),this._target){if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:r,dummy:r,easing:"galleria",extend:function(){},fullscreenCrop:r,fullscreenDoubleTap:!0,fullscreenTransition:r,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:r,initialTransition:r,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:r,maxVideoSize:r,minScaleRatio:r,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:"auto",theme:null,thumbCrop:!0,thumbEventType:"click:fast",thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbPosition:"50%",thumbnails:!0,touchTransition:r,transition:"fade",transitionInitial:r,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:"",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,u&&(!1===u.debug&&(ii=!1),"number"==typeof u.imageTimeout&&u.imageTimeout,"string"==typeof u.dummy&&(pt=u.dummy),"string"==typeof u.theme&&(this._options.theme=u.theme)),n(this._target).children().hide(),i.QUIRK&&i.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."),b.length)if(this._options.theme){for(var f=0;f<b.length;f++)if(this._options.theme===b[f].name){this.theme=b[f];break}}else this.theme=b[0];return"object"==typeof this.theme?this._init():ei.push(this),this}i.raise("Target not found",!0)},_init:function(){function tt(n){return n.originalEvent.touches?n.originalEvent.touches[0]:n}var y,l,p,w,b,d,g,k,s=this,h=this._options,nt,v;return this._initialized?(i.raise("Init failed: Gallery instance already initialized."),this):(this._initialized=!0,!this.theme)?(i.raise("Init failed: No theme found.",!0),this):((n.extend(!0,h,this.theme.defaults,this._original.options,i.configure.options),h.swipe="enforced"==(y=h.swipe)||!1!==y&&"disabled"!=y&&!!i.TOUCH,h.swipe&&(h.clicknext=!1,h.imagePan=!1),"getContext"in(l=e.createElement("canvas"))?a=a||{elem:l,context:l.getContext("2d"),cache:{},length:0}:l=null,this.bind(i.DATA,function(){function r(){return s.$("stage").height()}var e,n;t.screen&&t.screen.width&&Array.prototype.forEach&&this._data.forEach(function(n){var i="devicePixelRatio"in t?t.devicePixelRatio:1;f.max(t.screen.width,t.screen.height)*i<1024&&(n.big=n.image)});this._original.data=this._data;this.get("total").innerHTML=this.getDataLength();e=this.$("container");s._options.height<2&&(s._userRatio=s._ratio=s._options.height);n={width:0,height:0};u.wait({until:function(){return n=s._getWH(),e.width(n.width).height(n.height),r()&&n.width&&50<n.height},success:function(){s._width=n.width;s._height=n.height;s._ratio=s._ratio||n.height/n.width;i.WEBKIT?t.setTimeout(function(){s._run()},1):s._run()},error:function(){r()?i.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+n.width+"px, height: "+n.height+"px.",!0):i.raise("Could not extract a stage height from the CSS. Traced height: "+r()+"px.",!0)},timeout:"number"==typeof this._options.wait&&this._options.wait})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),u.hide(this.$("counter").append(this.get("current"),e.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),u.hide(s.get("tooltip")),this.$("container").addClass([i.TOUCH?"touch":"notouch",this._options.variation,"galleria-theme-"+this.theme.name].join(" ")),this._options.swipe||n.each(new Array(2),function(t){var r=new i.Picture,f;n(r.container).css({position:"absolute",top:0,left:0}).prepend(s._layers[t]=n(u.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]);s.$("images").append(r.container);s._controls[t]=r;f=new i.Picture;f.isIframe=!0;n(f.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(r.container);s._controls.frames[t]=f}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),h.swipe&&(this.$("images").css({position:"absolute",top:0,left:0,width:0,height:"100%"}),this.finger=new i.Finger(this.get("stage"),{onchange:function(n){s.pause().show(n)},oncomplete:function(t){var i=f.max(0,f.min(parseInt(t,10),s.getDataLength()-1)),r=s.getData(i);n(s._thumbnails[i].container).addClass("active").siblings(".active").removeClass("active");r&&(s.$("images").find(".galleria-frame").css("opacity",0).hide().find("iframe").remove(),s._options.carousel&&s._options.carouselFollow&&s._carousel.follow(i))}}),this.bind(i.RESCALE,function(){this.finger.setup()}),this.$("stage").on("click",function(){var i=s.getData();if(i){if(i.iframe){s.isPlaying()&&s.pause();var u=s._controls.frames[s._active],f=s._stageWidth,e=s._stageHeight;return n(u.container).find("iframe").length?void 0:(n(u.container).css({width:f,height:e,opacity:0}).show().animate({opacity:1},200),void t.setTimeout(function(){u.load(i.iframe+(i.video?"&autoplay=1":""),{width:f,height:e},function(n){s.$("container").addClass("videoplay");n.scale({width:s._stageWidth,height:s._stageHeight,iframelimit:i.video?s._options.maxVideoSize:r})})},100))}i.link&&(s._options.popupLinks?t.open(i.link,"_blank"):t.location.href=i.link)}}),this.bind(i.IMAGE,function(t){var i;s.setCounter(t.index);s.setInfo(t.index);var r=this.getNext(),u=this.getPrev(),f=[u,r];f.push(this.getNext(r),this.getPrev(u),s._controls.slides.length-1);i=[];n.each(f,function(t,r){-1==n.inArray(r,i)&&i.push(r)});n.each(i,function(t,i){var r=s.getData(i),u=s._controls.slides[i],f=s.isFullscreen()&&r.big?r.big:r.image||r.iframe;r.iframe&&!r.image&&(u.isIframe=!0);u.ready||s._controls.slides[i].load(f,function(t){t.isIframe||n(t.image).css("visibility","hidden");s._scaleImage(t,{complete:function(t){t.isIframe||n(t.image).css({opacity:0,visibility:"visible"}).animate({opacity:1},200)}})})})})),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").on("click:fast",function(){h.pauseOnInteraction&&s.pause();var n=/right/.test(this.className)?"next":"prev";s[n]()}).on("click",function(n){n.preventDefault();(h.clicknext||h.swipe)&&n.stopPropagation()}),n.each(["info","counter","image-nav"],function(n,t){!1===h["show"+t.substr(0,1).toUpperCase()+t.substr(1).replace(/-/,"")]&&u.moveOut(s.get(t.toLowerCase()))}),this.load(),h.keepSource||o||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),h.carousel)&&(nt=0,v=h.show,this.bind(i.THUMBNAIL,function(){this.updateCarousel();++nt==this.getDataLength()&&"number"==typeof v&&0<v&&this._carousel.follow(v)})),h.responsive&&c.on("resize",function(){s.isFullscreen()||s.resize()}),h.fullscreenDoubleTap&&this.$("stage").on("touchstart",(s.$("stage").on("touchmove",function(){p=0}),function(n){if(!/(-left|-right)/.test(n.target.className)){if(k=u.timestamp(),w=tt(n).pageX,b=tt(n).pageY,n.originalEvent.touches.length<2&&k-p<300&&w-d<20&&b-g<20)return s.toggleFullscreen(),void n.preventDefault();p=k;d=w;g=b}})),n.each(i.on.binds,function(t,i){-1==n.inArray(i.hash,s._binds)&&s.bind(i.type,i.callback)}),this)},addTimer:function(){return this._timer.add.apply(this._timer,u.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,u.array(arguments)),this},_getWH:function(){var r,e=this.$("container"),o=this.$("target"),t=this,i={};return n.each(["width","height"],function(n,s){t._options[s]&&"number"==typeof t._options[s]?i[s]=t._options[s]:(r=[u.parseValue(e.css(s)),u.parseValue(o.css(s)),e[s](),o[s]()],t["_"+s]||r.splice(r.length,u.parseValue(e.css("min-"+s)),u.parseValue(o.css("min-"+s))),i[s]=f.max.apply(f,r))}),t._userRatio&&(i.height=i.width*t._userRatio),i},_createThumbnails:function(r){function p(n){return e.defaultView&&e.defaultView.getComputedStyle?e.defaultView.getComputedStyle(f.container,null)[n]:v.css(n)}function nt(t,r,u){return function(){n(u).append(t);c.trigger({type:i.THUMBNAIL,thumbTarget:t,index:r,galleriaData:c.getData(r)})}}function tt(t){s.pauseOnInteraction&&c.pause();var i=n(t.currentTarget).data("index");c.getIndex()!==i&&c.show(i);t.preventDefault()}function w(t,r){n(t.container).css("visibility","visible");c.trigger({type:i.THUMBNAIL,thumbTarget:t.image,index:t.data.order,galleriaData:c.getData(t.data.order)});"function"==typeof r&&r.call(c,t)}function b(t,i){t.scale({width:t.data.width,height:t.data.height,crop:s.thumbCrop,margin:s.thumbMargin,canvas:s.useCanvas,position:s.thumbPosition,complete:function(t){var r,f,e=["left","top"];c.getData(t.index);n.each(["Width","Height"],function(i,u){r=u.toLowerCase();!0===s.thumbCrop&&s.thumbCrop!==r||((f={})[r]=t[r],n(t.container).css(f),(f={})[e[i]]=0,n(t.image).css(f));t["outer"+u]=n(t.container)["outer"+u](!0)});u.toggleQuality(t.image,!0===s.thumbQuality||"auto"===s.thumbQuality&&t.original.width<3*t.width);s.thumbDisplayOrder&&!t.lazy?n.each(d,function(n,t){if(n===g&&t.ready&&!t.displayed)return g++,t.displayed=!0,void w(t,i)}):w(t,i)}})}this.get("total").innerHTML=this.getDataLength();var y,f,l,v,k,c=this,s=this._options,h=r?this._data.length-r.length:0,it=h,d=[],g=0,rt=o<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",ut=!!(k=c.$("thumbnails").find(".active")).length&&k.find("img").attr("src"),a="string"==typeof s.thumbnails?s.thumbnails.toLowerCase():null;for(r||(this._thumbnails=[],this.$("thumbnails").empty());this._data[h];h++)y=(l=this._data[h]).thumb||l.image,!0!==s.thumbnails&&"lazy"!=a||!l.thumb&&!l.image?l.iframe&&null!==a||"empty"===a||"numbers"===a?(f={container:u.create("galleria-image"),image:u.create("img","span"),ready:!0,data:{order:h}},"numbers"===a&&n(f.image).text(h+1),l.iframe&&n(f.image).addClass("iframe"),this.$("thumbnails").append(f.container),t.setTimeout(nt(f.image,h,f.container),50+20*h)):f={container:null,image:null}:((f=new i.Picture(h)).index=h,f.displayed=!1,f.lazy=!1,f.video=!1,this.$("thumbnails").append(f.container),(v=n(f.container)).css("visibility","hidden"),f.data={width:u.parseValue(p("width")),height:u.parseValue(p("height")),order:h,src:y},!0!==s.thumbCrop?v.css({width:"auto",height:"auto"}):v.css({width:f.data.width,height:f.data.height}),"lazy"==a?(v.addClass("lazy"),f.lazy=!0,f.load(rt,{height:f.data.height,width:f.data.width})):f.load(y,b),"all"===s.preload&&f.preload(l.image)),n(f.container).add(s.keepSource&&s.linkSourceImages?l.original:null).data("index",h).on(s.thumbEventType,tt).data("thumbload",b),ut===y&&n(f.container).addClass("active"),this._thumbnails.push(f);return d=this._thumbnails.slice(it),this},lazyLoad:function(t,i){var u=t.constructor==Array?t:[t],r=this,f=0;return n.each(u,function(t,e){if(!(e>r._thumbnails.length-1)){function s(){++f==u.length&&"function"==typeof i&&i.call(r)}var o=r._thumbnails[e],c=o.data,h=n(o.container).data("thumbload");o.video?h.call(r,o,s):o.load(c.src,function(n){h.call(r,n,s)})}}),this},lazyLoadChunks:function(n,i){var e=this.getDataLength(),r=0,o=0,s=[],u=[],h=this,f;for(i=i||0;r<e;r++)u.push(r),++o!=n&&r!=e-1||(s.push(u),o=0,u=[]);return f=function(n){var r=s.shift();r&&t.setTimeout(function(){h.lazyLoad(r,function(){f(!0)})},i&&n?i:0)},f(!1),this},_run:function(){var f=this;f._createThumbnails();u.wait({timeout:1e4,until:function(){return i.OPERA&&f.$("stage").css("display","inline-block"),f._stageWidth=f.$("stage").width(),f._stageHeight=f.$("stage").height(),f._stageWidth&&50<f._stageHeight},success:function(){if(wt.push(f),f._options.swipe){var e=f.$("images").width(f.getDataLength()*f._stageWidth);n.each(new Array(f.getDataLength()),function(t){var r=new i.Picture,s=f.getData(t),o;n(r.container).css({position:"absolute",top:0,left:f._stageWidth*t}).prepend(f._layers[t]=n(u.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(e);s.video&&ht(r.container);f._controls.slides.push(r);o=new i.Picture;o.isIframe=!0;n(o.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(r.container);f._controls.frames.push(o)});f.finger.setup()}if(u.show(f.get("counter")),f._options.carousel&&f._carousel.bindControls(),f._options.autoplay&&(f.pause(),"number"==typeof f._options.autoplay&&(f._playtime=f._options.autoplay),f._playing=!0),f._firstrun)return f._options.autoplay&&f.trigger(i.PLAY),void("number"==typeof f._options.show&&f.show(f._options.show));f._firstrun=!0;i.History&&i.History.change(function(n){isNaN(n)?t.history.go(-1):f.show(n,r,!0)});f.trigger(i.READY);f.theme.init.call(f,f._options);n.each(i.ready.callbacks,function(n,t){"function"==typeof t&&t.call(f,f._options)});f._options.extend.call(f,f._options);/^[0-9]{1,4}$/.test(ri)&&i.History?f.show(ri,r,!0):f._data[f._options.show]&&f.show(f._options.show);f._options.autoplay&&f.trigger(i.PLAY)},error:function(){i.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+f._stageWidth+"px, height: "+f._stageHeight+"px.",!0)}})},load:function(t,r,u){var o=this,e=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),"function"==typeof r&&(u=r,r=null),t=t||e.dataSource,r=r||e.dataSelector,u=u||e.dataConfig,n.isPlainObject(t)&&(t=[t]),n.isArray(t)?this.validate(t)?this._data=t:i.raise("Load failed: JSON Array not valid."):(r+=",.video,.iframe",n(t).find(r).each(function(t,i){i=n(i);var r={},e=i.parent(),f=e.attr("href"),s=e.attr("rel");f&&("IMG"==i[0].nodeName||i.hasClass("video"))&&gt(f)?r.video=f:f&&i.hasClass("iframe")?r.iframe=f:r.image=r.big=f;s&&(r.big=s);n.each("big title description link layer image".split(" "),function(n,t){i.data(t)&&(r[t]=i.data(t).toString())});r.big||(r.big=r.image);o._data.push(n.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},r,u(i)))})),"function"==typeof e.dataSort?d.sort.call(this._data,e.dataSort):"random"==e.dataSort&&this._data.sort(function(){return f.round(f.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(t){function f(){var i=!0;n.each(u._data,function(n,t){if(t.loading)return i=!1});i&&!e&&(e=!0,t.call(u))}var i,u=this,e=!1;return n.each(this._data,function(t,e){if(i=u._data[t],"thumb"in e==!1&&(i.thumb=e.image),e.big||(i.big=e.image),"video"in e){var o=gt(e.video);o&&(i.iframe=new dt(o.provider,o.id).embed()+function(){if("object"!=typeof u._options[o.provider])return"";var t=[];return n.each(u._options[o.provider],function(n,i){t.push(n+"="+i)}),"youtube"==o.provider&&(t=["wmode=opaque"].concat(t)),"?"+t.join("&")}(),i.thumb&&i.image||n.each(["thumb","image"],function(n,t){if("image"!=t||u._options.videoPoster){var e,s,h=new dt(o.provider,o.id);i[t]||(i.loading=!0,h.getMedia(t,(e=i,s=t,function(n){e[s]=n;"image"!=s||e.big||(e.big=e.image);delete e.loading;f()})))}else i.image=r}))}}),f(),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").off("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),u.removeFromArray(w,this),u.removeFromArray(wt,this),i._waiters.length&&n.each(i._waiters,function(n,i){i&&t.clearTimeout(i)}),this},splice:function(){var n=this,i=u.array(arguments);return t.setTimeout(function(){d.splice.apply(n._data,i);n._parseData(function(){n._createThumbnails()})},2),n},push:function(){var i=this,n=u.array(arguments);return 1==n.length&&n[0].constructor==Array&&(n=n[0]),t.setTimeout(function(){d.push.apply(i._data,n);i._parseData(function(){i._createThumbnails(n)})},2),i},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(n,t){return n=ot(n),this.$("container").on(n,this.proxy(t)),this},unbind:function(n){return n=ot(n),this.$("container").off(n),this},trigger:function(t){return t="object"==typeof t?n.extend(t,{scope:this}):{type:ot(t),scope:this},this.$("container").trigger(t),this},addIdleState:function(){return this._idle.add.apply(this._idle,u.array(arguments)),this},removeIdleState:function(){return this._idle.remove.apply(this._idle,u.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(){return this._fullscreen.enter.apply(this,u.array(arguments)),this},exitFullscreen:function(){return this._fullscreen.exit.apply(this,u.array(arguments)),this},toggleFullscreen:function(){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,u.array(arguments)),this},bindTooltip:function(){return this._tooltip.bind.apply(this._tooltip,u.array(arguments)),this},defineTooltip:function(){return this._tooltip.define.apply(this._tooltip,u.array(arguments)),this},refreshTooltip:function(){return this._tooltip.show.apply(this._tooltip,u.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,u.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,u.array(arguments)),this},hasVariation:function(t){return-1<n.inArray(t,this._options.variation.split(/\s+/))},getActiveImage:function(){var n=this._getActive();return n?n.image:r},getActiveThumb:function(){return this._thumbnails[this._active].image||r},getMousePosition:function(n){return{x:n.pageX-this.$("container").offset().left,y:n.pageY-this.$("container").offset().top}},addPan:function(t){if(!1!==this._options.imageCrop){t=n(t||this.getActiveImage());function v(n,i,u){if(0<n&&(r=f.round(f.max(-1*n,f.min(0,i))),k!==r))if(k=r,8===o)t.parent()["scroll"+u](-1*r);else{var e={};e[u.toLowerCase()]=r;t.css(e)}}function y(n){u.timestamp()-d<50||(b=!0,p=i.getMousePosition(n).x,w=i.getMousePosition(n).y)}var i=this,p=t.width()/2,w=t.height()/2,h=parseInt(t.css("left"),10),c=parseInt(t.css("top"),10),e=h||0,s=c||0,l=0,a=0,b=!1,d=u.timestamp(),k=0,r=0;return 8===o&&(t.parent().scrollTop(-1*s).scrollLeft(-1*e),t.css({top:0,left:0})),this.$("stage").off("mousemove",y).on("mousemove",y),this.addTimer("pan"+i._id,function(){b&&(l=t.width()-i._stageWidth,a=t.height()-i._stageHeight,h=p/i._stageWidth*l*-1,c=w/i._stageHeight*a*-1,e+=(h-e)/i._options.imagePanSmoothness,s+=(c-s)/i._options.imagePanSmoothness,v(a,s,"Top"),v(l,e,"Left"))},50,!0),this}},proxy:function(n,t){return"function"!=typeof n?h:(t=t||this,function(){return n.apply(t,u.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$("stage").off("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(){var t=this._dom;return n.each(u.array(arguments),function(n,i){t[i]=u.create("galleria-"+i)}),this},attachKeyboard:function(){return this._keyboard.attach.apply(this._keyboard,u.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,u.array(arguments)),this},appendChild:function(n,t){return this.$(n).append(this.get(t)||t),this},prependChild:function(n,t){return this.$(n).prepend(this.get(t)||t),this},remove:function(){return this.$(u.array(arguments).join(",")).remove(),this},append:function(n){var t,i;for(t in n)if(n.hasOwnProperty(t))if(n[t].constructor===Array)for(i=0;n[t][i];i++)this.appendChild(t,n[t][i]);else this.appendChild(t,n[t]);return this},_scaleImage:function(t,i){if(t=t||this._controls.getActive()){function r(t){n(t.container).children(":first").css({top:f.max(0,u.parseValue(t.image.style.top)),left:f.max(0,u.parseValue(t.image.style.left)),width:u.parseValue(t.image.width),height:u.parseValue(t.image.height)})}var e;return i=n.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&!0!==this._options.imageCrop?"function"==typeof i.complete?(e=i.complete,i.complete=function(){e.call(t,t);r(t)}):i.complete=r:n(t.container).children(":first").css({top:0,left:0}),t.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(t,i){"function"==typeof t&&(i=t,t=r);t=n.extend({width:0,height:0},t);var f=this,u=this.$("container");return n.each(t,function(n,i){i||(u[n]("auto"),t[n]=f._getWH()[n])}),n.each(t,function(n,t){u[n](t)}),this.rescale(i)},rescale:function(t,u,f){var e=this;return"function"==typeof t&&(f=t,t=r),function(){e._stageWidth=t||e.$("stage").width();e._stageHeight=u||e.$("stage").height();e._options.swipe?(n.each(e._controls.slides,function(t,i){e._scaleImage(i);n(i.container).css("left",e._stageWidth*t)}),e.$("images").css("width",e._stageWidth*e.getDataLength())):e._scaleImage();e._options.carousel&&e.updateCarousel();e._controls.frames[e._controls.active]&&e._controls.frames[e._controls.active].scale({width:e._stageWidth,height:e._stageHeight,iframelimit:e._options.maxVideoSize});e.trigger(i.RESCALE);"function"==typeof f&&f.call(e)}.call(e),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var u,t,n,r=this.getNext();try{for(t=this._options.preload;0<t;t--)u=new i.Picture,n=this.getData(r),u.preload(this.isFullscreen()&&n.big?n.big:n.image),r=this.getNext(r)}catch(u){}}},show:function(r,u,e){var v=this._options.swipe,o,s;if(v||!(3<this._queue.length||!1===r||!this._options.queue&&this._queue.stalled)){if(r=f.max(0,f.min(parseInt(r,10),this.getDataLength()-1)),u=void 0!==u?!!u:r<this.getIndex(),(e=e||!1)||!i.History){if(this.finger&&r!==this._active&&(this.finger.to=-r*this.finger.width,this.finger.index=r),this._active=r,v){if(o=this.getData(r),s=this,!o)return;var l=this.isFullscreen()&&o.big?o.big:o.image||o.iframe,h=this._controls.slides[r],y=h.isCached(l),p=this._thumbnails[r],c={cached:y,index:r,rewind:u,imageTarget:h.image,thumbTarget:p.image,galleriaData:o};this.trigger(n.extend(c,{type:i.LOADSTART}));s.$("container").removeClass("videoplay");function a(){s._layers[r].innerHTML=s.getData().layer||"";s.trigger(n.extend(c,{type:i.LOADFINISH}));s._playCheck()}s._preload();t.setTimeout(function(){h.ready&&n(h.image).attr("src")==l?(s.trigger(n.extend(c,{type:i.IMAGE})),a()):(o.iframe&&!o.image&&(h.isIframe=!0),h.load(l,function(t){c.imageTarget=t.image;s._scaleImage(t,a).trigger(n.extend(c,{type:i.IMAGE}));a()}))},100)}else d.push.call(this._queue,{index:r,rewind:u}),this._queue.stalled||this._show();return this}i.History.set(r.toString())}},_show:function(){var f=this,o=this._queue[0],e=this.getData(o.index),s,c,a,k,g,v;if(e){function nt(){n(h.image).trigger("mouseup")}var y=this.isFullscreen()&&e.big?e.big:e.image||e.iframe,l=this._controls.getActive(),h=this._controls.getNext(),w=h.isCached(y),b=this._thumbnails[o.index];f.$("container").toggleClass("iframe",!!e.isIframe).removeClass("videoplay");v=(s=e,c=h,a=l,k=o,g=b,function(){p.active=!1;u.toggleQuality(c.image,f._options.imageQuality);f._layers[f._controls.active].innerHTML="";n(a.container).css({zIndex:0,opacity:0}).show();n(a.container).find("iframe, .galleria-videoicon").remove();n(f._controls.frames[f._controls.active].container).hide();n(c.container).css({zIndex:1,left:0,top:0}).show();f._controls.swap();f._options.imagePan&&f.addPan(c.image);(s.iframe&&s.image||s.link||f._options.lightbox||f._options.clicknext)&&n(c.image).css({cursor:"pointer"}).on("mouseup",function(u){if(!("number"==typeof u.which&&1<u.which)){if(s.iframe){f.isPlaying()&&f.pause();var e=f._controls.frames[f._controls.active],o=f._stageWidth,h=f._stageHeight;return n(e.container).css({width:o,height:h,opacity:0}).show().animate({opacity:1},200),void t.setTimeout(function(){e.load(s.iframe+(s.video?"&autoplay=1":""),{width:o,height:h},function(n){f.$("container").addClass("videoplay");n.scale({width:f._stageWidth,height:f._stageHeight,iframelimit:s.video?f._options.maxVideoSize:r})})},100)}if(f._options.clicknext&&!i.TOUCH)return f._options.pauseOnInteraction&&f.pause(),void f.next();s.link?f._options.popupLinks?t.open(s.link,"_blank"):t.location.href=s.link:f._options.lightbox&&f.openLightbox()}});f._playCheck();f.trigger({type:i.IMAGE,index:k.index,imageTarget:c.image,thumbTarget:g.image,galleriaData:s});d.shift.call(f._queue);f._queue.stalled=!1;f._queue.length&&f._show()});this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(o.index);f._preload();u.show(h.container);h.isIframe=e.iframe&&!e.image;n(f._thumbnails[o.index].container).addClass("active").siblings(".active").removeClass("active");f.trigger({type:i.LOADSTART,cached:w,index:o.index,rewind:o.rewind,imageTarget:h.image,thumbTarget:b.image,galleriaData:e});f._queue.stalled=!0;h.load(y,function(t){var s=n(f._layers[1-f._controls.active]).html(e.layer||"").hide();f._scaleImage(t,{complete:function(t){var h,c;"image"in l&&u.toggleQuality(l.image,!1);u.toggleQuality(t.image,!1);f.removePan();f.setInfo(o.index);f.setCounter(o.index);e.layer&&(s.show(),(e.iframe&&e.image||e.link||f._options.lightbox||f._options.clicknext)&&s.css("cursor","pointer").off("mouseup").mouseup(nt));e.video&&e.image&&ht(t.container);h=f._options.transition;(n.each({initial:null===l.image,touch:i.TOUCH,fullscreen:f.isFullscreen()},function(n,t){if(t&&f._options[n+"Transition"]!==r)return h=f._options[n+"Transition"],!1}),h in p.effects==!1)?v():(c={prev:l.container,next:t.container,rewind:o.rewind,speed:f._options.transitionSpeed||400},p.active=!0,p.init.call(f,h,c,v));f.trigger({type:i.LOADFINISH,cached:w,index:o.index,rewind:o.rewind,imageTarget:t.image,thumbTarget:f._thumbnails[o.index].image,galleriaData:f.getData(o.index)})}})})}},getNext:function(n){return(n="number"==typeof n?n:this.getIndex())===this.getDataLength()-1?0:n+1},getPrev:function(n){return 0===(n="number"==typeof n?n:this.getIndex())?this.getDataLength()-1:n-1},next:function(){return 1<this.getDataLength()&&this.show(this.getNext(),!1),this},prev:function(){return 1<this.getDataLength()&&this.show(this.getPrev(),!0),this},get:function(n){return n in this._dom?this._dom[n]:null},getData:function(n){return n in this._data?this._data[n]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return"number"==typeof this._active&&this._active},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(n){return void 0===n?this._options:this._options[n]},setOptions:function(t,i){return"object"==typeof t?n.extend(this._options,t):this._options[t]=i,this},play:function(n){return this._playing=!0,this._playtime=n||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(n){return this._playing?this.pause():this.play(n)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var n=this,t=0,o=u.timestamp(),r="play"+this._id,e;this._playing&&(this.clearTimer(r),e=function(){if((t=u.timestamp()-o)>=n._playtime&&n._playing)return n.clearTimer(r),void n.next();n._playing&&(n.trigger({type:i.PROGRESS,percent:f.ceil(t/n._playtime*100),seconds:f.floor(t/1e3),milliseconds:t}),n.addTimer(r,e,20))},n.addTimer(r,e,20))},setPlaytime:function(n){return this._playtime=n,this},setIndex:function(n){return this._active=n,this},setCounter:function(n){if("number"==typeof n?n++:void 0===n&&(n=this.getIndex()+1),this.get("current").innerHTML=n,o){var t=this.$("counter"),i=t.css("opacity");1===parseInt(i,10)?u.removeAlpha(t[0]):this.$("counter").css("opacity",i)}return this},setInfo:function(t){var r=this,i=this.getData(t);return n.each(["title","description"],function(n,t){var u=r.$("info-"+t);i[t]?u[i[t].length?"show":"hide"]().html(i[t]):u.empty().hide()}),this},hasInfo:function(n){for(var i="title description".split(" "),t=0;i[t];t++)if(this.getData(n)[i[t]])return!0;return!1},jQuery:function(t){var r=this,u=[],i;return n.each(t.split(","),function(t,i){i=n.trim(i);r.get(i)&&u.push(i)}),i=n(r.get(u.shift())),n.each(u,function(n,t){i=i.add(r.get(t))}),i},$:function(){return this.jQuery.apply(this,u.array(arguments))}};n.each(ui,function(n,t){var r=/_/.test(t)?t.replace(/_/g,""):t;i[t.toUpperCase()]="galleria."+r});n.extend(i,{IE9:9===o,IE8:8===o,IE7:7===o,IE6:6===o,IE:o,WEBKIT:/webkit/.test(y),CHROME:/chrome/.test(y),SAFARI:/safari/.test(y)&&!/chrome/.test(y),QUIRK:o&&e.compatMode&&"BackCompat"===e.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!t.opera,IPHONE:/iphone/.test(y),IPAD:/ipad/.test(y),ANDROID:/android/.test(y),TOUCH:"ontouchstart"in e});i.addTheme=function(r){r.name||i.raise("No theme name specified");r.defaults="object"!=typeof r.defaults?{}:kt(r.defaults);var f=!1;return"string"==typeof r.css?(n("link").each(function(n,t){if(new RegExp(r.css).test(t.href))return f=!0,st(r),!1}),f||n(function(){var o=0,e=function(){n("script").each(function(n,i){new RegExp("galleria\\."+r.name.toLowerCase()+"\\.").test(i.src)&&(f=i.src.replace(/[^\/]*$/,"")+r.css,t.setTimeout(function(){u.loadCSS(f,"galleria-theme-"+r.name,function(){st(r)})},1))});f||(5<o++?i.raise("No theme CSS loaded"):t.setTimeout(e,500))};e()})):st(r),r};i.loadTheme=function(r){if(!n("script").filter(function(){return n(this).attr("src")==r}).length){var e,f=!1;return n(t).load(function(){f||(e=t.setTimeout(function(){f||i.raise("Galleria had problems loading theme at "+r+". Please check theme path or load manually.",!0)},2e4))}),u.loadScript(r,function(){f=!0;t.clearTimeout(e)}),i}};i.get=function(n){return w[n]?w[n]:"number"!=typeof n?w:void i.raise("Gallery index "+n+" not found")};i.configure=function(t,r){var u={};return"string"==typeof t&&r?(u[t]=r,t=u):n.extend(u,t),i.configure.options=u,n.each(i.get(),function(n,t){t.setOptions(u)}),i};i.configure.options={};i.on=function(t,r){if(t){var f=t+(r=r||h).toString().replace(/\s/g,"")+u.timestamp();return n.each(i.get(),function(n,i){i._binds.push(f);i.bind(t,r)}),i.on.binds.push({type:t,callback:r,hash:f}),i}};i.on.binds=[];i.run=function(t,r){return n.isFunction(r)&&(r={extend:r}),n(t||"#galleria").galleria(r),i};i.addTransition=function(n,t){return p.effects[n]=t,i};i.utils=u;i.log=function(){var i=u.array(arguments);if(!("console"in t&&"log"in t.console))return t.alert(i.join("<br>"));try{return t.console.log.apply(t.console,i)}catch(r){n.each(i,function(){t.console.log(this)})}};i.ready=function(t){return"function"!=typeof t||(n.each(wt,function(n,i){t.call(i,i._options)}),i.ready.callbacks.push(t)),i};i.ready.callbacks=[];i.raise=function(t,i){function r(t){var r='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+';">'+(i?"<strong>"+u+": <\/strong>":"")+t+"<\/div>";n.each(w,function(){var n=this.$("errors"),t=this.$("target");n.length||(t.css("position","relative"),n=this.addElement("errors").appendChild("target","errors").$("errors").css(f));n.append(r)});w.length||n("<div>").css(n.extend(f,{position:"fixed"})).append(r).appendTo(s().body)}var u=i?"Fatal error":"Error",f={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5};if(ii){if(r(t),i)throw new Error(u+": "+t);}else if(i){if(fi)return;i=!(fi=!0);r("Gallery could not load.")}};i.version=1.41;i.getLoadedThemes=function(){return n.map(b,function(n){return n.name})};i.requires=function(n,t){return t=t||"You need to upgrade Galleria to version "+n+" to use one or more components.",i.version<n&&i.raise(t,!0),i};i.Picture=function(t){this.id=t||null;this.image=null;this.container=u.create("galleria-image");n(this.container).css({overflow:"hidden",position:"relative"});this.original={width:0,height:0};this.ready=!1;this.isIframe=!1};i.Picture.prototype={cache:{},show:function(){u.show(this.image)},hide:function(){u.moveOut(this.image)},clear:function(){this.image=null},isCached:function(n){return!!this.cache[n]},preload:function(t){var i,r;n(new Image).load((i=t,r=this.cache,function(){r[i]=i})).attr("src",t)},load:function(r,f,e){var h,y,s,c;if("function"==typeof f&&(e=f,f=null),this.isIframe)return h="if"+(new Date).getTime(),y=this.image=n("<iframe>",{src:r,frameborder:0,id:h,allowfullscreen:!0,css:{visibility:"hidden"}})[0],f&&n(y).css(f),n(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),n("#"+h).load((s=this,c=e,function(){t.setTimeout(function(){n(s.image).css("visibility","visible");"function"==typeof c&&c.call(s,s)},10)})),this.container;this.image=new Image;i.IE8&&n(this.image).css("filter","inherit");i.IE||i.CHROME||i.SAFARI||n(this.image).css("image-rendering","optimizequality");var o,l,a,p=!1,w=!1,b=n(this.container),v=n(this.image),k=(o=this,l=e,a=r,function(){function e(){n(this).off("load");o.original=f||{height:this.height,width:this.width};i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform="translate3d(0,0,0)");b.append(this);o.cache[a]=a;"function"==typeof l&&t.setTimeout(function(){l.call(o,o)},1)}var r;this.width&&this.height?e.call(this):(r=this,u.wait({until:function(){return r.width&&r.height},success:function(){e.call(r)},error:function(){w?i.raise("Could not extract width/height from image: "+r.src+". Traced measures: width:"+r.width+"px, height: "+r.height+"px."):(n(new Image).load(k).attr("src",r.src),w=!0)},timeout:100}))});return b.find("iframe,img").remove(),v.css("display","block"),u.hide(this.image),n.each("minWidth minHeight maxWidth maxHeight".split(" "),function(n,t){v.css(t,/min/.test(t)?"0":"none")}),v.load(k).on("error",function(){var e,f;p?pt?n(this).attr("src",pt):i.raise("Image not found: "+r):(p=!0,t.setTimeout((e=n(this),f=r,function(){e.attr("src",f+(-1<f.indexOf("?")?"&":"?")+u.timestamp())}),50))}).attr("src",r),this.container},scale:function(t){var e=this,p,w,o,s,y,c,l,b,v;if(t=n.extend({width:0,height:0,min:r,max:r,margin:0,complete:h,position:"center",crop:!1,canvas:!1,iframelimit:r},t),this.isIframe){o=t.width;s=t.height;t.iframelimit&&(y=f.min(t.iframelimit/o,t.iframelimit/s),y<1?(p=o*y,w=s*y,n(this.image).css({top:s/2-w/2,left:o/2-p/2,position:"absolute"})):n(this.image).css({top:0,left:0}));n(this.image).width(p||o).height(w||s).removeAttr("width").removeAttr("height");n(this.container).width(o).height(s);t.complete.call(e,e);try{this.image.contentWindow&&n(this.image.contentWindow).trigger("resize")}catch(p){}return this.container}return this.image?(v=n(e.container),u.wait({until:function(){return c=t.width||v.width()||u.parseValue(v.css("width")),l=t.height||v.height()||u.parseValue(v.css("height")),c&&l},success:function(){function w(t,i,r){var o=0,s,h;return/\%/.test(t)?(s=parseInt(t,10)/100,h=e.image[i]||n(e.image)[i](),o=f.ceil(-1*h*s+r*s)):o=u.parseValue(t),o}var o=(c-2*t.margin)/e.original.width,s=(l-2*t.margin)/e.original.height,h=f.min(o,s),v=f.max(o,s),r={"true":v,width:o,height:s,"false":h,landscape:e.original.width>e.original.height?v:h,portrait:e.original.width<e.original.height?v:h}[t.crop.toString()],y="";t.max&&(r=f.min(t.max,r));t.min&&(r=f.max(t.min,r));n.each(["width","height"],function(t,i){n(e.image)[i](e[i]=e.image[i]=f.round(e.original[i]*r))});n(e.container).width(c).height(l);t.canvas&&a&&(a.elem.width=e.width,a.elem.height=e.height,y=e.image.src+":"+e.width+"x"+e.height,e.image.src=a.cache[y]||function(n){a.context.drawImage(e.image,0,0,e.original.width*r,e.original.height*r);try{return b=a.elem.toDataURL(),a.length+=b.length,a.cache[n]=b}catch(n){return e.image.src}}(y));var i={},p={},k={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};n.each(t.position.toLowerCase().split(" "),function(n,t){"center"===t&&(t="50%");i[n?"top":"left"]=t});n.each(i,function(t,i){k.hasOwnProperty(i)&&n.extend(p,k[i])});i=i.top?n.extend(i,p):p;i=n.extend({top:"50%",left:"50%"},i);n(e.image).css({position:"absolute",top:w(i.top,"height",l),left:w(i.left,"width",c)});e.show();e.ready=!0;t.complete.call(e,e)},error:function(){i.raise("Could not scale image: "+e.image.src)},timeout:1e3}),this):this.container}};n.extend(n.easing,{galleria:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i},galleriaIn:function(n,t,i,r,u){return r*(t/=u)*t+i},galleriaOut:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i}});i.Finger=function(){function u(i,r){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(n,t,i,r,u){return-r*((t=t/u-1)*t*t*t-1)+i}},this.easeout=function(n,t,i,r,u){return r*((t=t/u-1)*t*t*t*t+1)+i},i.children.length){var u=this;n.extend(this.config,r);this.elem=i;this.child=i.children[0];this.to=this.pos=0;this.touching=!1;this.start={};this.index=this.config.start;this.anim=0;this.easing=this.config.easing;o||(this.child.style.position="absolute",this.elem.style.position="relative");n.each(["ontouchstart","ontouchmove","ontouchend","setup"],function(n,t){var i;u[t]=(i=u[t],function(){i.apply(u,arguments)})});this.setX=function(){var n=u.child.style;o?n.MozTransform=n.webkitTransform=n.transform="translate3d("+u.pos+"px,0,0)":n.left=u.pos+"px"};n(i).on("touchstart",this.ontouchstart);n(t).on("resize",this.setup);n(t).on("orientationchange",this.setup);this.setup(),function i(){h(i);u.loop.call(u)}()}}f.abs;var r,o=i.HAS3D=function(){var u,f,i=e.createElement("p"),r=["webkit","O","ms","Moz",""],t=0,o="transform";for(s().html.insertBefore(i,null);r[t];t++)f=r[t]?r[t]+"Transform":o,void 0!==i.style[f]&&(i.style[f]="translate3d(1px,1px,1px)",u=n(i).css(r[t]?"-"+r[t].toLowerCase()+"-"+o:o));return s().html.removeChild(i),void 0!==u&&0<u.length&&"none"!==u}(),h=(r="RequestAnimationFrame",t.requestAnimationFrame||t["webkit"+r]||t["moz"+r]||t["o"+r]||t["ms"+r]||function(n){t.setTimeout(n,1e3/60)});return u.prototype={constructor:u,setup:function(){this.width=n(this.elem).width();this.length=f.ceil(n(this.child).width()/this.width);0!==this.index&&(this.index=f.max(0,f.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(n){this.pos=n;this.to=n},ontouchstart:function(n){var t=n.originalEvent.touches;this.start={pageX:t[0].pageX,pageY:t[0].pageY,time:+new Date};this.isScrolling=null;this.touching=!0;this.deltaX=0;k.on("touchmove",this.ontouchmove);k.on("touchend",this.ontouchend)},ontouchmove:function(n){var t=n.originalEvent.touches;t&&1<t.length||n.scale&&1!==n.scale||(this.deltaX=t[0].pageX-this.start.pageX,null===this.isScrolling&&(this.isScrolling=!!(this.isScrolling||f.abs(this.deltaX)<f.abs(t[0].pageY-this.start.pageY))),this.isScrolling||(n.preventDefault(),this.deltaX/=!this.index&&0<this.deltaX||this.index==this.length-1&&this.deltaX<0?f.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),n.stopPropagation())},ontouchend:function(){this.touching=!1;var n=+new Date-this.start.time<250&&40<f.abs(this.deltaX)||f.abs(this.deltaX)>this.width/2,t=!this.index&&0<this.deltaX||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(n&&!t?this.deltaX<0?1:-1:0));k.off("touchmove",this.ontouchmove);k.off("touchend",this.ontouchend)},show:function(n){n!=this.index?this.config.onchange.call(this,n):this.to=-n*this.width},moveTo:function(n){n!=this.index&&(this.pos=this.to=-n*this.width,this.index=n)},loop:function(){var n=this.to-this.pos,r=1,t,i;if(this.width&&n&&(r=f.max(.5,f.min(1.5,f.abs(n/this.width)))),this.touching||f.abs(n)<=1)this.pos=this.to,n=0,this.anim&&!this.touching&&this.config.oncomplete(this.index),this.anim=0,this.easing=this.config.easing;else{if(this.anim||(this.anim={start:this.pos,time:+new Date,distance:n,factor:r,destination:this.to}),t=+new Date-this.anim.time,i=this.config.duration*this.anim.factor,i<t||this.anim.destination!=this.to)return this.anim=0,void(this.easing=this.easeout);this.pos=this.easing(null,t,this.anim.start,this.anim.distance,i)}this.setX()}},u}();n.fn.galleria=function(t){var r=this.selector;return n(this).length?this.each(function(){n.data(this,"galleria")&&(n.data(this,"galleria").destroy(),n(this).find("*").hide());n.data(this,"galleria",(new i).init(this,t))}):(n(function(){n(r).length?n(r).galleria(t):i.utils.wait({until:function(){return n(r).length},success:function(){n(r).galleria(t)},error:function(){i.raise('Init failed: Galleria could not find the element "'+r+'".')},timeout:5e3})}),this)};"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=i:(t.Galleria=i,"function"==typeof define&&define.amd&&define("galleria",["jquery"],function(){return i}))}(jQuery,this),function(n,t,i,r){var e=t.document,k=n(e),h=n(t),d=Array.prototype,et=!0,yt=3e4,tt=!1,y=navigator.userAgent.toLowerCase(),ot=t.location.hash.replace(/#\//,""),g=t.location.protocol=="file:"?"http:":t.location.protocol,f=Math,c=function(){},pt=function(){return!1},o=function(){var n=3,t=e.createElement("div"),i=t.getElementsByTagName("i");do t.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->";while(i[0]);return n>4?n:e.documentMode||r}(),s=function(){return{html:e.documentElement,body:e.body,head:e.getElementsByTagName("head")[0],title:e.title}},nt=t.parent!==t.self,wt="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",st=function(){var t=[];return n.each(wt.split(" "),function(n,i){t.push(i);/_/.test(i)&&t.push(i.replace(/_/g,""))}),t}(),ht=function(t){var i;return typeof t!="object"?t:(n.each(t,function(r,u){/^[a-z]+_/.test(r)&&(i="",n.each(r.split("_"),function(n,t){i+=n>0?t.substr(0,1).toUpperCase()+t.substr(1):t}),t[i]=u,delete t[r])}),t)},it=function(t){return n.inArray(t,st)>-1?i[t.toUpperCase()]:t},v={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(){return g+"//www.youtube.com/embed/"+this.id},get_thumb:function(){return g+"//img.youtube.com/vi/"+this.id+"/default.jpg"},get_image:function(){return g+"//img.youtube.com/vi/"+this.id+"/hqdefault.jpg"}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(){return g+"//player.vimeo.com/video/"+this.id},getUrl:function(){return g+"//vimeo.com/api/v2/video/"+this.id+".json?callback=?"},get_thumb:function(n){return n[0].thumbnail_medium},get_image:function(n){return n[0].thumbnail_large}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(){return g+"//www.dailymotion.com/embed/video/"+this.id},getUrl:function(){return"https://api.dailymotion.com/video/"+this.id+"?fields=thumbnail_240_url,thumbnail_720_url&callback=?"},get_thumb:function(n){return n.thumbnail_240_url},get_image:function(n){return n.thumbnail_720_url}},_inst:[]},ct=function(i,r){for(var f,u=0;u<v._inst.length;u++)if(v._inst[u].id===r&&v._inst[u].type==i)return v._inst[u];this.type=i;this.id=r;this.readys=[];v._inst.push(this);f=this;n.extend(this,v[i]);_videoThumbs=function(t){f.data=t;n.each(f.readys,function(n,t){t(f.data)});f.readys=[]};this.hasOwnProperty("getUrl")?n.getJSON(this.getUrl(),_videoThumbs):t.setTimeout(_videoThumbs,400);this.getMedia=function(n,t,i){i=i||c;var r=this,u=function(i){t(r["get_"+n](i))};try{r.data?u(r.data):r.readys.push(u)}catch(f){i()}}},lt=function(n){var t;for(var i in v)if(t=n&&v[i].reg&&n.match(v[i].reg),t&&t.length)return{id:t[2],provider:i};return!1},l={support:function(){var n=s().html;return!nt&&(n.requestFullscreen||n.msRequestFullscreen||n.mozRequestFullScreen||n.webkitRequestFullScreen)}(),callback:c,enter:function(n,t,i){this.instance=n;this.callback=t||c;i=i||s().html;i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(n){this.callback=n||c;e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var n=function(){if(l.instance){var n=l.instance._fullscreen;e.fullscreen||e.mozFullScreen||e.webkitIsFullScreen||e.msFullscreenElement&&e.msFullscreenElement!==null?n._enter(l.callback):n._exit(l.callback)}};e.addEventListener("fullscreenchange",n,!1);e.addEventListener("MSFullscreenChange",n,!1);e.addEventListener("mozfullscreenchange",n,!1);e.addEventListener("webkitfullscreenchange",n,!1)}}},rt=[],w=[],at=!1,a=!1,vt=[],b=[],ut=function(t){b.push(t);n.each(vt,function(n,i){i._options.theme!=t.name&&(i._initialized||i._options.theme)||(i.theme=t,i._init.call(i))})},u=function(){return{clearTimer:function(t){n.each(i.get(),function(){this.clearTimer(t)})},addTimer:function(t){n.each(i.get(),function(){this.addTimer(t)})},array:function(n){return d.slice.call(n,0)},create:function(n,t){t=t||"div";var i=e.createElement(t);return i.className=n,i},removeFromArray:function(t,i){return n.each(t,function(n,r){if(r==i)return t.splice(n,1),!1}),t},getScriptPath:function(t){t=t||n("script:last").attr("src");var i=t.split("/");return i.length==1?"":(i.pop(),i.join("/")+"/")},animate:function(){var v=function(n){var r="transition WebkitTransition MozTransition OTransition".split(" "),i;if(t.opera)return!1;for(i=0;r[i];i++)if(typeof n[r[i]]!="undefined")return r[i];return!1}((e.body||e.documentElement).style),y={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[v],s={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},f=function(t,i,r){var u={};r=r||"transition";n.each("webkit moz ms o".split(" "),function(){u["-"+this+"-"+r]=i});t.css(u)},p=function(n){f(n,"none","transition");i.WEBKIT&&i.TOUCH&&(f(n,"translate3d(0,0,0)","transform"),n.data("revert")&&(n.css(n.data("revert")),n.data("revert",null)))},h,o,w,b,l,r,a;return function(e,k,d){if(d=n.extend({duration:400,complete:c,stop:!1},d),e=n(e),!d.duration){e.css(k);d.complete.call(e[0]);return}if(!v){e.animate(k,d);return}if(d.stop&&(e.off(y),p(e)),h=!1,n.each(k,function(n,t){a=e.css(n);u.parseValue(a)!=u.parseValue(t)&&(h=!0);e.css(n,a)}),!h){t.setTimeout(function(){d.complete.call(e[0])},d.duration);return}o=[];w=d.easing in s?s[d.easing]:s._default;b=" "+d.duration+"ms cubic-bezier("+w.join(",")+")";t.setTimeout(function(t,e,s,h){return function(){t.one(e,function(n){return function(){p(n);d.complete.call(n[0])}}(t));i.WEBKIT&&i.TOUCH&&(l={},r=[0,0,0],n.each(["left","top"],function(n,i){i in s&&(r[n]=u.parseValue(s[i])-u.parseValue(t.css(i))+"px",l[i]=s[i],delete s[i])}),(r[0]||r[1])&&(t.data("revert",l),o.push("-webkit-transform"+h),f(t,"translate3d("+r.join(",")+")","transform")));n.each(s,function(n){o.push(n+h)});f(t,o.join(","));t.css(s)}}(e,y,k,b),2)}}(),removeAlpha:function(n){if(n instanceof jQuery&&(n=n[0]),o<9&&n){var t=n.style,i=n.currentStyle,r=i&&i.filter||t.filter||"";/alpha/.test(r)&&(t.filter=r.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(t,i){t=n(t);t.attr("style")&&t.data("styles",t.attr("style")).removeAttr("style");t.css(i)},revertStyles:function(){n.each(u.array(arguments),function(t,i){i=n(i);i.removeAttr("style");i.attr("style","");i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(n){u.forceStyles(n,{position:"absolute",left:-1e4})},moveIn:function(){u.revertStyles.apply(u,u.array(arguments))},hide:function(t,i,r){var f,e,s;r=r||c;f=n(t);t=f[0];f.data("opacity")||f.data("opacity",f.css("opacity"));e={opacity:0};i?(s=o<9&&t?function(){u.removeAlpha(t);t.style.visibility="hidden";r.call(t)}:r,u.animate(t,e,{duration:i,complete:s,stop:!0})):o<9&&t?(u.removeAlpha(t),t.style.visibility="hidden"):f.css(e)},show:function(t,i,r){var f,s,e,h;r=r||c;f=n(t);t=f[0];s=parseFloat(f.data("opacity"))||1;e={opacity:s};i?(o<9&&(f.css("opacity",0),t.style.visibility="visible"),h=o<9&&t?function(){e.opacity==1&&u.removeAlpha(t);r.call(t)}:r,u.animate(t,e,{duration:i,complete:h,stop:!0})):o<9&&e.opacity==1&&t?(u.removeAlpha(t),t.style.visibility="visible"):f.css(e)},wait:function(r){i._waiters=i._waiters||[];r=n.extend({until:pt,success:c,error:function(){i.raise("Could not complete wait function.")},timeout:3e3},r);var o=u.timestamp(),s,f,e,h=function(){if(f=u.timestamp(),s=f-o,u.removeFromArray(i._waiters,e),r.until(s))return r.success(),!1;if(typeof r.timeout=="number"&&f>=o+r.timeout)return r.error(),!1;i._waiters.push(e=t.setTimeout(h,10))};i._waiters.push(e=t.setTimeout(h,10))},toggleQuality:function(n,t){(o===7||o===8)&&n&&n.nodeName.toUpperCase()=="IMG"&&(typeof t=="undefined"&&(t=n.style.msInterpolationMode==="nearest-neighbor"),n.style.msInterpolationMode=t?"bicubic":"nearest-neighbor")},insertStyleTag:function(t,i){var r,u;i&&n("#"+i).length||(r=e.createElement("style"),i&&(r.id=i),s().head.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:(u=e.createTextNode(t),r.appendChild(u)))},loadScript:function(t,i){var u=!1,r=n("<script>").attr({src:t,async:!0}).get(0);r.onload=r.onreadystatechange=function(){u||this.readyState&&this.readyState!=="loaded"&&this.readyState!=="complete"||(u=!0,r.onload=r.onreadystatechange=null,typeof i=="function"&&i.call(this,this))};s().head.appendChild(r)},parseValue:function(n){if(typeof n=="number")return n;if(typeof n=="string"){var t=n.match(/\-?\d|\./g);return t&&t.constructor===Array?t.join("")*1:0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(t,f,h){var l,y,a,v;if(n("link[rel=stylesheet]").each(function(){if(new RegExp(t).test(this.href))return l=this,!1}),typeof f=="function"&&(h=f,f=r),h=h||c,l)return h.call(l,l),l;if(y=e.styleSheets.length,n("#"+f).length)n("#"+f).attr("href",t),y--;else if(l=n("<link>").attr({rel:"stylesheet",href:t,id:f}).get(0),a=n('link[rel="stylesheet"], style'),a.length?a.get(0).parentNode.insertBefore(l,a[0]):s().head.appendChild(l),o&&y>=31){i.raise("You have reached the browser stylesheet limit (31)",!0);return}return typeof h=="function"&&(v=n("<s>").attr("id","galleria-loader").hide().appendTo(s().body),u.wait({until:function(){return v.height()>0},success:function(){v.remove();h.call(l,l)},error:function(){v.remove();i.raise("Theme CSS could not load after 20 sec. "+(i.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme at http://galleria.io/customer/."),!0)},timeout:5e3})),l}}}(),ft=function(t){return u.insertStyleTag(".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}","galleria-videoicon"),n(u.create("galleria-videoicon")).html("<i><\/i>").appendTo(t).click(function(){n(this).siblings("img").mouseup()})},p=function(){var t=function(t,i,r,f){var s=this.getOptions("easing"),h=this.getStageWidth(),e={left:h*(t.rewind?-1:1)},o={left:0};r?(e.opacity=0,o.opacity=1):e.opacity=1;n(t.next).css(e);u.animate(t.next,o,{duration:t.speed,complete:function(n){return function(){i();n.css({left:0})}}(n(t.next).add(t.prev)),queue:!1,easing:s});f&&(t.rewind=!t.rewind);t.prev&&(e={left:0},o={left:h*(t.rewind?1:-1)},r&&(e.opacity=1,o.opacity=0),n(t.prev).css(e),u.animate(t.prev,o,{duration:t.speed,queue:!1,easing:s,complete:function(){n(this).css("opacity",0)}}))};return{active:!1,init:function(n,t,i){p.effects.hasOwnProperty(n)&&p.effects[n].call(this,t,i)},effects:{fade:function(t,i){n(t.next).css({opacity:0,left:0});u.animate(t.next,{opacity:1},{duration:t.speed,complete:i});t.prev&&(n(t.prev).css("opacity",1).show(),u.animate(t.prev,{opacity:0},{duration:t.speed}))},flash:function(t,i){n(t.next).css({opacity:0,left:0});t.prev?u.animate(t.prev,{opacity:0},{duration:t.speed/2,complete:function(){u.animate(t.next,{opacity:1},{duration:t.speed,complete:i})}}):u.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},pulse:function(t,i){t.prev&&n(t.prev).hide();n(t.next).css({opacity:0,left:0}).show();u.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},slide:function(){t.apply(this,u.array(arguments))},fadeslide:function(){t.apply(this,u.array(arguments).concat([!0]))},doorslide:function(){t.apply(this,u.array(arguments).concat([!1,!0]))}}}}();l.listen();n.event.special["click:fast"]={propagate:!0,add:function(i){var u=function(n){if(n.touches&&n.touches.length){var t=n.touches[0];return{x:t.pageX,y:t.pageY}}},r={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};n(this).data({clickstate:r,timer:0}).on("touchstart.fast",function(i){t.clearTimeout(n(this).data("timer"));n(this).data("clickstate",{touched:!0,touchdown:!0,coords:u(i.originalEvent),evObj:i})}).on("touchmove.fast",function(t){var r=u(t.originalEvent),i=n(this).data("clickstate"),f=Math.max(Math.abs(i.coords.x-r.x),Math.abs(i.coords.y-r.y));f>6&&n(this).data("clickstate",n.extend(i,{touchdown:!1}))}).on("touchend.fast",function(u){var f=n(this),e=f.data("clickstate");e.touchdown&&i.handler.call(this,u);f.data("timer",t.setTimeout(function(){f.data("clickstate",r)},400))}).on("click.fast",function(t){var u=n(this).data("clickstate");if(u.touched)return!1;n(this).data("clickstate",r);i.handler.call(this,t)})},remove:function(){n(this).off("touchstart.fast touchmove.fast touchend.fast click.fast")}};h.on("orientationchange",function(){n(this).resize()});i=function(){var c=this,it,rt;this._options={};this._playing=!1;this._playtime=5e3;this._active=null;this._queue={length:0};this._data=[];this._dom={};this._thumbnails=[];this._layers=[];this._initialized=!1;this._firstrun=!1;this._stageWidth=0;this._stageHeight=0;this._target=r;this._binds=[];this._id=parseInt(f.random()*1e4,10);it="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip";rt="current total";n.each(it.split(" "),function(n,t){c._dom[t]=u.create("galleria-"+t)});n.each(rt.split(" "),function(n,t){c._dom[t]=u.create("galleria-"+t,"span")});var g=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(n){var t=n.keyCode||n.which;t in g.map&&typeof g.map[t]=="function"&&g.map[t].call(c,n)},attach:function(n){var t,i;for(t in n)n.hasOwnProperty(t)&&(i=t.toUpperCase(),i in g.keys?g.map[g.keys[i]]=n[t]:g.map[i]=n[t]);if(!g.bound){g.bound=!0;k.on("keydown",g.press)}},detach:function(){g.bound=!1;g.map={};k.off("keydown",g.press)}},tt=this._controls={0:r,1:r,active:0,swap:function(){tt.active=tt.active?0:1},getActive:function(){return c._options.swipe?tt.slides[c._active]:tt[tt.active]},getNext:function(){return c._options.swipe?tt.slides[c.getNext(c._active)]:tt[1-tt.active]},slides:[],frames:[],layers:[]},v=this._carousel={next:c.$("thumb-nav-right"),prev:c.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var t=0,i=0,r=[0];n.each(c._thumbnails,function(u,e){if(e.ready){t+=e.outerWidth||n(e.container).outerWidth(!0);var o=n(e.container).width();t+=o-f.floor(o);r[u+1]=t;i=f.max(i,e.outerHeight||n(e.container).outerHeight(!0))}});c.$("thumbnails").css({width:t,height:i});v.max=t;v.hooks=r;v.width=c.$("thumbnails-list").width();v.setClasses();c.$("thumbnails-container").toggleClass("galleria-carousel",t>v.width);v.width=c.$("thumbnails-list").width()},bindControls:function(){var n;v.next.on("click:fast",function(t){if(t.preventDefault(),c._options.carouselSteps==="auto"){for(n=v.current;n<v.hooks.length;n++)if(v.hooks[n]-v.hooks[v.current]>v.width){v.set(n-2);break}}else v.set(v.current+c._options.carouselSteps)});v.prev.on("click:fast",function(t){if(t.preventDefault(),c._options.carouselSteps==="auto"){for(n=v.current;n>=0;n--)if(v.hooks[v.current]-v.hooks[n]>v.width){v.set(n+2);break}else if(n===0){v.set(0);break}}else v.set(v.current-c._options.carouselSteps)})},set:function(n){for(n=f.max(n,0);v.hooks[n-1]+v.width>=v.max&&n>=0;)n--;v.current=n;v.animate()},getLast:function(n){return(n||v.current)-1},follow:function(n){if(n===0||n===v.hooks.length-2){v.set(n);return}for(var t=v.current;v.hooks[t]-v.hooks[v.current]<v.width&&t<=v.hooks.length;)t++;n-1<v.current?v.set(n-1):n+2>t&&v.set(n-t+v.current+2)},setClasses:function(){v.prev.toggleClass("disabled",!v.current);v.next.toggleClass("disabled",v.hooks[v.current]+v.width>=v.max)},animate:function(){v.setClasses();var t=v.hooks[v.current]*-1;isNaN(t)||(c.$("thumbnails").css("left",function(){return n(this).css("left")}),u.animate(c.get("thumbnails"),{left:t},{duration:c._options.carouselSpeed,easing:c._options.easing,queue:!1}))}},d=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+c._id,swapTimer:"swap"+c._id,init:function(){d.initialized=!0;u.insertStyleTag(".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}","galleria-tooltip");c.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(n){var s=c.getMousePosition(n).x,e=c.getMousePosition(n).y,r=c.$("tooltip"),i=s,t=e,u=r.outerHeight(!0)+1,h=r.outerWidth(!0),o=u+15,l=c.$("container").width()-h-2,a=c.$("container").height()-u-2;isNaN(i)||isNaN(t)||(i+=10,t-=u+8,i=f.max(0,f.min(l,i)),t=f.max(0,f.min(a,t)),e<o&&(t=o),r.css({left:i,top:t}))},bind:function(t,r){if(!i.TOUCH){d.initialized||d.init();var u=function(){c.$("container").off("mousemove",d.move);c.clearTimer(d.timer);c.$("tooltip").stop().animate({opacity:0},200,function(){c.$("tooltip").hide();c.addTimer(d.swapTimer,function(){d.open=!1},1e3)})},f=function(t,i){d.define(t,i);n(t).hover(function(){c.clearTimer(d.swapTimer);c.$("container").off("mousemove",d.move).on("mousemove",d.move).trigger("mousemove");d.show(t);c.addTimer(d.timer,function(){c.$("tooltip").stop().show().animate({opacity:1});d.open=!0},d.open?0:500)},u).click(u)};typeof r=="string"?f(t in c._dom?c.get(t):t,r):n.each(t,function(n,t){f(c.get(n),t)})}},show:function(i){i=n(i in c._dom?c.get(i):i);var r=i.data("tt"),u=function(n){t.setTimeout(function(n){return function(){d.move(n)}}(n),10);i.off("mouseup",u)};if(r=typeof r=="function"?r():r,r){c.$("tooltip").html(r.replace(/\s/,"&#160;"));i.on("mouseup",u)}},define:function(t,i){if(typeof i!="function"){var r=i;i=function(){return r}}t=n(t in c._dom?c.get(t):t).data("tt",i);d.show(t)}},w=this._fullscreen={scrolled:0,crop:r,active:!1,prev:n(),beforeEnter:function(n){n()},beforeExit:function(n){n()},keymap:c._keyboard.map,parseCallback:function(t,i){return p.active?function(){typeof t=="function"&&t.call(c);var r=c._controls.getActive(),u=c._controls.getNext();c._scaleImage(u);c._scaleImage(r);i&&c._options.trueFullscreen&&n(r.container).add(u.container).trigger("transitionend")}:t},enter:function(n){w.beforeEnter(function(){n=w.parseCallback(n,!0);c._options.trueFullscreen&&l.support?(w.active=!0,u.forceStyles(c.get("container"),{width:"100%",height:"100%"}),c.rescale(),i.MAC?i.SAFARI&&/version\/[1-5]/.test(y)?(c.$("stage").css("opacity",0),t.setTimeout(function(){w.scale();c.$("stage").css("opacity",1)},4)):(c.$("container").css("opacity",0).addClass("fullscreen"),t.setTimeout(function(){w.scale();c.$("container").css("opacity",1)},50)):c.$("container").addClass("fullscreen"),h.resize(w.scale),l.enter(c,n,c.get("container"))):(w.scrolled=h.scrollTop(),i.TOUCH||t.scrollTo(0,0),w._enter(n))})},_enter:function(f){w.active=!0;nt&&(w.iframe=function(){var f,o=e.referrer,r=e.createElement("a"),u=t.location;return(r.href=o,r.protocol!=u.protocol||r.hostname!=u.hostname||r.port!=u.port)?(i.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(w.pd=t.parent.document,n(w.pd).find("iframe").each(function(){var n=this.contentDocument||this.contentWindow.document;if(n===e)return f=this,!1}),f)}());u.hide(c.getActiveImage());nt&&w.iframe&&(w.iframe.scrolled=n(t.parent).scrollTop(),t.parent.scrollTo(0,0));var o=c.getData(),v=c._options,p=!c._options.trueFullscreen||!l.support,a={height:"100%",overflow:"hidden",margin:0,padding:0};if(p&&(c.$("container").addClass("fullscreen"),w.prev=c.$("container").prev(),w.prev.length||(w.parent=c.$("container").parent()),c.$("container").appendTo("body"),u.forceStyles(c.get("container"),{position:i.TOUCH?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),u.forceStyles(s().html,a),u.forceStyles(s().body,a)),nt&&w.iframe&&(u.forceStyles(w.pd.documentElement,a),u.forceStyles(w.pd.body,a),u.forceStyles(w.iframe,n.extend(a,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),w.keymap=n.extend({},c._keyboard.map),c.attachKeyboard({escape:c.exitFullscreen,right:c.next,left:c.prev}),w.crop=v.imageCrop,v.fullscreenCrop!=r&&(v.imageCrop=v.fullscreenCrop),o&&o.big&&o.image!==o.big){var k=new i.Picture,d=k.isCached(o.big),y=c.getIndex(),g=c._thumbnails[y];c.trigger({type:i.LOADSTART,cached:d,rewind:!1,index:y,imageTarget:c.getActiveImage(),thumbTarget:g,galleriaData:o});k.load(o.big,function(t){c._scaleImage(t,{complete:function(t){c.trigger({type:i.LOADFINISH,cached:d,index:y,rewind:!1,imageTarget:t.image,thumbTarget:g});var r=c._controls.getActive().image;r&&n(r).width(t.image.width).height(t.image.height).attr("style",n(t.image).attr("style")).attr("src",t.image.src)}})});var tt=c.getNext(y),it=new i.Picture,b=c.getData(tt);it.preload(c.isFullscreen()&&b.big?b.big:b.image)}c.rescale(function(){c.addTimer(!1,function(){p&&u.show(c.getActiveImage());typeof f=="function"&&f.call(c);c.rescale()},100);c.trigger(i.FULLSCREEN_ENTER)});p?h.resize(w.scale):u.show(c.getActiveImage())},scale:function(){c.rescale()},exit:function(n){w.beforeExit(function(){n=w.parseCallback(n);c._options.trueFullscreen&&l.support?l.exit(n):w._exit(n)})},_exit:function(n){var e,o,r,a,f;w.active=!1;e=!c._options.trueFullscreen||!l.support;o=c.$("container").removeClass("fullscreen");w.parent?w.parent.prepend(o):o.insertAfter(w.prev);e&&(u.hide(c.getActiveImage()),u.revertStyles(c.get("container"),s().html,s().body),i.TOUCH||t.scrollTo(0,w.scrolled),r=c._controls.frames[c._controls.active],r&&r.image&&(r.image.src=r.image.src));nt&&w.iframe&&(u.revertStyles(w.pd.documentElement,w.pd.body,w.iframe),w.iframe.scrolled&&t.parent.scrollTo(0,w.iframe.scrolled));c.detachKeyboard();c.attachKeyboard(w.keymap);c._options.imageCrop=w.crop;a=c.getData().big;f=c._controls.getActive().image;!c.getData().iframe&&f&&a&&a==f.src&&t.setTimeout(function(n){return function(){f.src=n}}(c.getData().image),1);c.rescale(function(){c.addTimer(!1,function(){e&&u.show(c.getActiveImage());typeof n=="function"&&n.call(c);h.trigger("resize")},50);c.trigger(i.FULLSCREEN_EXIT)});h.off("resize",w.scale)}},b=this._idle={trunk:[],bound:!1,active:!1,add:function(t,r,u,f){if(t&&!i.TOUCH){b.bound||b.addEvent();t=n(t);typeof u=="boolean"&&(f=u,u={});u=u||{};var o={};for(var e in r)r.hasOwnProperty(e)&&(o[e]=t.css(e));t.data("idle",{from:n.extend(o,u),to:r,complete:!0,busy:!1});f?t.css(r):b.addTimer();b.trunk.push(t)}},remove:function(t){t=n(t);n.each(b.trunk,function(n,i){i&&i.length&&!i.not(t).length&&(t.css(t.data("idle").from),b.trunk.splice(n,1))});b.trunk.length||(b.removeEvent(),c.clearTimer(b.timer))},addEvent:function(){b.bound=!0;c.$("container").on("mousemove click",b.showAll);if(c._options.idleMode=="hover")c.$("container").on("mouseleave",b.hide)},removeEvent:function(){b.bound=!1;c.$("container").on("mousemove click",b.showAll);c._options.idleMode=="hover"&&c.$("container").off("mouseleave",b.hide)},addTimer:function(){c._options.idleMode!="hover"&&c.addTimer("idle",function(){b.hide()},c._options.idleTime)},hide:function(){if(c._options.idleMode&&c.getIndex()!==!1){c.trigger(i.IDLE_ENTER);var t=b.trunk.length;n.each(b.trunk,function(n,i){var r=i.data("idle");r&&(i.data("idle").complete=!1,u.animate(i,r.to,{duration:c._options.idleSpeed,complete:function(){n==t-1&&(b.active=!1)}}))})}},showAll:function(){c.clearTimer("idle");n.each(b.trunk,function(n,t){b.show(t)})},show:function(t){var r=t.data("idle");b.active&&(r.busy||r.complete)||(r.busy=!0,c.trigger(i.IDLE_EXIT),c.clearTimer("idle"),u.animate(t,r.from,{duration:c._options.idleSpeed/2,complete:function(){b.active=!0;n(t).data("idle").busy=!1;n(t).data("idle").complete=!0}}));b.addTimer()}},a=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!a.initialized){a.initialized=!0;var r={},e=c._options,h="",t="position:absolute;",f="lightbox-",l={overlay:"position:fixed;display:none;opacity:"+e.overlayOpacity+";filter:alpha(opacity="+e.overlayOpacity*100+");top:0;left:0;width:100%;height:100%;background:"+e.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:t+"background:#000;width:100%;height:100%;",content:t+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:t+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:t+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:t+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:t+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:t+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:t+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:t+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},p=function(t){return t.hover(function(){n(this).css("color","#bbb")},function(){n(this).css("color","#444")})},y={},v="";v=o>7?o<9?"background:#000;filter:alpha(opacity=0);":"background:rgba(0,0,0,0);":"z-index:99999";l.nextholder+=v;l.prevholder+=v;n.each(l,function(n,t){h+=".galleria-"+f+n+"{"+t+"}"});h+=".galleria-"+f+"box.iframe .galleria-"+f+"prevholder,.galleria-"+f+"box.iframe .galleria-"+f+"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}";u.insertStyleTag(h,"galleria-lightbox");n.each("overlay box content shadow title info close prevholder prev nextholder next counter image".split(" "),function(n,t){c.addElement("lightbox-"+t);r[t]=a.elems[t]=c.get("lightbox-"+t)});a.image=new i.Picture;n.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(t,i){var r=[];n.each(i.split(" "),function(n,t){r.push(f+t)});y[f+t]=r});c.append(y);n(r.image).append(a.image.container);n(s().body).append(r.overlay,r.box);p(n(r.close).on("click:fast",a.hide).html("&#215;"));n.each(["Prev","Next"],function(t,u){var f=n(r[u.toLowerCase()]).html(/v/.test(u)?"&#8249;&#160;":"&#160;&#8250;"),e=n(r[u.toLowerCase()+"holder"]);e.on("click:fast",function(){a["show"+u]()});if(o<8||i.TOUCH){f.show();return}e.hover(function(){f.show()},function(){f.stop().fadeOut(200)})});n(r.overlay).on("click:fast",a.hide);i.IPAD&&(c._options.lightboxTransitionSpeed=0)}},rescale:function(t){var l=f.min(h.width()-40,a.width),v=f.min(h.height()-60,a.height),r=f.min(l/a.width,v/a.height),e=f.round(a.width*r)+40,o=f.round(a.height*r)+60,s={width:e,height:o,"margin-top":f.ceil(o/2)*-1,"margin-left":f.ceil(e/2)*-1};t?n(a.elems.box).css(s):n(a.elems.box).animate(s,{duration:c._options.lightboxTransitionSpeed,easing:c._options.easing,complete:function(){var t=a.image,r=c._options.lightboxFadeSpeed;c.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:t.image});n(t.container).show();n(t.image).animate({opacity:1},r);u.show(a.elems.info,r)}})},hide:function(){a.image.image=null;h.off("resize",a.rescale);n(a.elems.box).hide().find("iframe").remove();u.hide(a.elems.info);c.detachKeyboard();c.attachKeyboard(a.keymap);a.keymap=!1;u.hide(a.elems.overlay,200,function(){n(this).hide().css("opacity",c._options.overlayOpacity);c.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){a.show(c.getNext(a.active))},showPrev:function(){a.show(c.getPrev(a.active))},show:function(r){a.active=r=typeof r=="number"?r:c.getIndex()||0;a.initialized||a.init();c.trigger(i.LIGHTBOX_OPEN);a.keymap||(a.keymap=n.extend({},c._keyboard.map),c.attachKeyboard({escape:a.hide,right:a.showNext,left:a.showPrev}));h.off("resize",a.rescale);var e=c.getData(r),p=c.getDataLength(),l=c.getNext(r),s,y,v;u.hide(a.elems.info);try{for(v=c._options.preload;v>0;v--)y=new i.Picture,s=c.getData(l),y.preload(s.big?s.big:s.image),l=c.getNext(l)}catch(w){}a.image.isIframe=e.iframe&&!e.image;n(a.elems.box).toggleClass("iframe",a.image.isIframe);n(a.image.container).find(".galleria-videoicon").remove();a.image.load(e.big||e.image||e.iframe,function(i){var u,s,l,v;i.isIframe?(u=n(t).width(),s=n(t).height(),i.video&&c._options.maxVideoSize&&(l=f.min(c._options.maxVideoSize/u,c._options.maxVideoSize/s),l<1&&(u*=l,s*=l)),a.width=u,a.height=s):(a.width=i.original.width,a.height=i.original.height);n(i.image).css({width:i.isIframe?"100%":"100.1%",height:i.isIframe?"100%":"100.1%",top:0,bottom:0,zIndex:99998,opacity:0,visibility:"visible"}).parent().height("100%");a.elems.title.innerHTML=e.title||"";a.elems.counter.innerHTML=r+1+" / "+p;h.resize(a.rescale);a.rescale();e.image&&e.iframe&&(n(a.elems.box).addClass("iframe"),e.video&&(v=ft(i.container).hide(),t.setTimeout(function(){v.fadeIn(200)},200)),n(i.image).css("cursor","pointer").mouseup(function(t,i){return function(r){n(a.image.container).find(".galleria-videoicon").remove();r.preventDefault();i.isIframe=!0;i.load(t.iframe+(t.video?"&autoplay=1":""),{width:"100%",height:o<8?n(a.image.container).height():"100%"})}}(e,i)))});n(a.elems.overlay).show().css("visibility","visible");n(a.elems.box).show()}},ut=this._timer={trunk:{},add:function(n,i,r,u){if(n=n||(new Date).getTime(),u=u||!1,this.clear(n),u){var f=i;i=function(){f();ut.add(n,i,r)}}this.trunk[n]=t.setTimeout(i,r)},clear:function(n){var r=function(n){t.clearTimeout(this.trunk[n]);delete this.trunk[n]},i;if(!!n&&n in this.trunk)r.call(this,n);else if(typeof n=="undefined")for(i in this.trunk)this.trunk.hasOwnProperty(i)&&r.call(this,i)}};return this};i.prototype={constructor:i,init:function(t,u){if(u=ht(u),this._original={target:t,options:u,data:null},this._target=this._dom.target=t.nodeName?t:n(t).get(0),this._original.html=this._target.innerHTML,w.push(this),!this._target){i.raise("Target not found",!0);return}if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:r,dummy:r,easing:"galleria",extend:function(){},fullscreenCrop:r,fullscreenDoubleTap:!0,fullscreenTransition:r,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:r,initialTransition:r,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:r,maxVideoSize:r,minScaleRatio:r,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:"auto",theme:null,thumbCrop:!0,thumbEventType:"click:fast",thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbPosition:"50%",thumbnails:!0,touchTransition:r,transition:"fade",transitionInitial:r,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:"",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,u&&(u.debug===!1&&(et=!1),typeof u.imageTimeout=="number"&&(yt=u.imageTimeout),typeof u.dummy=="string"&&(tt=u.dummy),typeof u.theme=="string"&&(this._options.theme=u.theme)),n(this._target).children().hide(),i.QUIRK&&i.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."),b.length)if(this._options.theme){for(var f=0;f<b.length;f++)if(this._options.theme===b[f].name){this.theme=b[f];break}}else this.theme=b[0];return typeof this.theme=="object"?this._init():vt.push(this),this},_init:function(){var s=this,c=this._options,v,l;if(this._initialized)return i.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!this.theme)return i.raise("Init failed: No theme found.",!0),this;if(n.extend(!0,c,this.theme.defaults,this._original.options,i.configure.options),c.swipe=function(n){return n=="enforced"?!0:n===!1||n=="disabled"?!1:!!i.TOUCH}(c.swipe),c.swipe&&(c.clicknext=!1,c.imagePan=!1),function(n){if(!("getContext"in n)){n=null;return}a=a||{elem:n,context:n.getContext("2d"),cache:{},length:0}}(e.createElement("canvas")),this.bind(i.DATA,function(){var e,n,r;t.screen&&t.screen.width&&Array.prototype.forEach&&this._data.forEach(function(n){var i="devicePixelRatio"in t?t.devicePixelRatio:1,r=f.max(t.screen.width,t.screen.height);r*i<1024&&(n.big=n.image)});this._original.data=this._data;this.get("total").innerHTML=this.getDataLength();e=this.$("container");s._options.height<2&&(s._userRatio=s._ratio=s._options.height);n={width:0,height:0};r=function(){return s.$("stage").height()};u.wait({until:function(){return n=s._getWH(),e.width(n.width).height(n.height),r()&&n.width&&n.height>50},success:function(){s._width=n.width;s._height=n.height;s._ratio=s._ratio||n.height/n.width;i.WEBKIT?t.setTimeout(function(){s._run()},1):s._run()},error:function(){r()?i.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+n.width+"px, height: "+n.height+"px.",!0):i.raise("Could not extract a stage height from the CSS. Traced height: "+r()+"px.",!0)},timeout:typeof this._options.wait=="number"?this._options.wait:!1})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),u.hide(this.$("counter").append(this.get("current"),e.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),u.hide(s.get("tooltip")),this.$("container").addClass([i.TOUCH?"touch":"notouch",this._options.variation,"galleria-theme-"+this.theme.name].join(" ")),this._options.swipe||n.each(new Array(2),function(t){var r=new i.Picture,f;n(r.container).css({position:"absolute",top:0,left:0}).prepend(s._layers[t]=n(u.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]);s.$("images").append(r.container);s._controls[t]=r;f=new i.Picture;f.isIframe=!0;n(f.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(r.container);s._controls.frames[t]=f}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),c.swipe){this.$("images").css({position:"absolute",top:0,left:0,width:0,height:"100%"});this.finger=new i.Finger(this.get("stage"),{onchange:function(n){s.pause().show(n)},oncomplete:function(t){var i=f.max(0,f.min(parseInt(t,10),s.getDataLength()-1)),r=s.getData(i);(n(s._thumbnails[i].container).addClass("active").siblings(".active").removeClass("active"),r)&&(s.$("images").find(".galleria-frame").css("opacity",0).hide().find("iframe").remove(),s._options.carousel&&s._options.carouselFollow&&s._carousel.follow(i))}});this.bind(i.RESCALE,function(){this.finger.setup()});this.$("stage").on("click",function(){var i=s.getData(),o;if(i){if(i.iframe){s.isPlaying()&&s.pause();var u=s._controls.frames[s._active],f=s._stageWidth,e=s._stageHeight;if(n(u.container).find("iframe").length)return;n(u.container).css({width:f,height:e,opacity:0}).show().animate({opacity:1},200);t.setTimeout(function(){u.load(i.iframe+(i.video?"&autoplay=1":""),{width:f,height:e},function(n){s.$("container").addClass("videoplay");n.scale({width:s._stageWidth,height:s._stageHeight,iframelimit:i.video?s._options.maxVideoSize:r})})},100);return}if(i.link){s._options.popupLinks?o=t.open(i.link,"_blank"):t.location.href=i.link;return}}});this.bind(i.IMAGE,function(t){var i;s.setCounter(t.index);s.setInfo(t.index);var r=this.getNext(),u=this.getPrev(),f=[u,r];f.push(this.getNext(r),this.getPrev(u),s._controls.slides.length-1);i=[];n.each(f,function(t,r){n.inArray(r,i)==-1&&i.push(r)});n.each(i,function(t,i){var r=s.getData(i),u=s._controls.slides[i],f=s.isFullscreen()&&r.big?r.big:r.image||r.iframe;r.iframe&&!r.image&&(u.isIframe=!0);u.ready||s._controls.slides[i].load(f,function(t){t.isIframe||n(t.image).css("visibility","hidden");s._scaleImage(t,{complete:function(t){t.isIframe||n(t.image).css({opacity:0,visibility:"visible"}).animate({opacity:1},200)}})})})})}this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"});this.$("image-nav-right, image-nav-left").on("click:fast",function(){c.pauseOnInteraction&&s.pause();var n=/right/.test(this.className)?"next":"prev";s[n]()}).on("click",function(n){n.preventDefault();(c.clicknext||c.swipe)&&n.stopPropagation()});if(n.each(["info","counter","image-nav"],function(n,t){c["show"+t.substr(0,1).toUpperCase()+t.substr(1).replace(/-/,"")]===!1&&u.moveOut(s.get(t.toLowerCase()))}),this.load(),c.keepSource||o||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),c.carousel&&(v=0,l=c.show,this.bind(i.THUMBNAIL,function(){this.updateCarousel();++v==this.getDataLength()&&typeof l=="number"&&l>0&&this._carousel.follow(l)})),c.responsive)h.on("resize",function(){s.isFullscreen()||s.resize()});if(c.fullscreenDoubleTap)this.$("stage").on("touchstart",function(){var n,t,i,f,e,r,o=function(n){return n.originalEvent.touches?n.originalEvent.touches[0]:n};s.$("stage").on("touchmove",function(){n=0});return function(h){if(!/(-left|-right)/.test(h.target.className)){if(r=u.timestamp(),t=o(h).pageX,i=o(h).pageY,h.originalEvent.touches.length<2&&r-n<300&&t-f<20&&i-e<20){s.toggleFullscreen();h.preventDefault();return}n=r;f=t;e=i}}}());return n.each(i.on.binds,function(t,i){n.inArray(i.hash,s._binds)==-1&&s.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,u.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,u.array(arguments)),this},_getWH:function(){var e=this.$("container"),o=this.$("target"),t=this,i={},r;return n.each(["width","height"],function(n,s){t._options[s]&&typeof t._options[s]=="number"?i[s]=t._options[s]:(r=[u.parseValue(e.css(s)),u.parseValue(o.css(s)),e[s](),o[s]()],t["_"+s]||r.splice(r.length,u.parseValue(e.css("min-"+s)),u.parseValue(o.css("min-"+s))),i[s]=f.max.apply(f,r))}),t._userRatio&&(i.height=i.width*t._userRatio),i},_createThumbnails:function(r){this.get("total").innerHTML=this.getDataLength();var y,f,l,a,c=this,s=this._options,h=r?this._data.length-r.length:0,g=h,p=[],w=0,nt=o<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",tt=function(){var n=c.$("thumbnails").find(".active");return n.length?n.find("img").attr("src"):!1}(),v=typeof s.thumbnails=="string"?s.thumbnails.toLowerCase():null,b=function(n){return e.defaultView&&e.defaultView.getComputedStyle?e.defaultView.getComputedStyle(f.container,null)[n]:a.css(n)},it=function(t,r,u){return function(){n(u).append(t);c.trigger({type:i.THUMBNAIL,thumbTarget:t,index:r,galleriaData:c.getData(r)})}},rt=function(t){s.pauseOnInteraction&&c.pause();var i=n(t.currentTarget).data("index");c.getIndex()!==i&&c.show(i);t.preventDefault()},k=function(t,r){n(t.container).css("visibility","visible");c.trigger({type:i.THUMBNAIL,thumbTarget:t.image,index:t.data.order,galleriaData:c.getData(t.data.order)});typeof r=="function"&&r.call(c,t)},d=function(t,i){t.scale({width:t.data.width,height:t.data.height,crop:s.thumbCrop,margin:s.thumbMargin,canvas:s.useCanvas,position:s.thumbPosition,complete:function(t){var e=["left","top"],f,r,o=c.getData(t.index);n.each(["Width","Height"],function(i,u){f=u.toLowerCase();(s.thumbCrop!==!0||s.thumbCrop===f)&&(r={},r[f]=t[f],n(t.container).css(r),r={},r[e[i]]=0,n(t.image).css(r));t["outer"+u]=n(t.container)["outer"+u](!0)});u.toggleQuality(t.image,s.thumbQuality===!0||s.thumbQuality==="auto"&&t.original.width<t.width*3);s.thumbDisplayOrder&&!t.lazy?n.each(p,function(n,t){if(n===w&&t.ready&&!t.displayed){w++;t.displayed=!0;k(t,i);return}}):k(t,i)}})};for(r||(this._thumbnails=[],this.$("thumbnails").empty());this._data[h];h++)l=this._data[h],y=l.thumb||l.image,(s.thumbnails===!0||v=="lazy")&&(l.thumb||l.image)?(f=new i.Picture(h),f.index=h,f.displayed=!1,f.lazy=!1,f.video=!1,this.$("thumbnails").append(f.container),a=n(f.container),a.css("visibility","hidden"),f.data={width:u.parseValue(b("width")),height:u.parseValue(b("height")),order:h,src:y},s.thumbCrop!==!0?a.css({width:"auto",height:"auto"}):a.css({width:f.data.width,height:f.data.height}),v=="lazy"?(a.addClass("lazy"),f.lazy=!0,f.load(nt,{height:f.data.height,width:f.data.width})):f.load(y,d),s.preload==="all"&&f.preload(l.image)):l.iframe&&v!==null||v==="empty"||v==="numbers"?(f={container:u.create("galleria-image"),image:u.create("img","span"),ready:!0,data:{order:h}},v==="numbers"&&n(f.image).text(h+1),l.iframe&&n(f.image).addClass("iframe"),this.$("thumbnails").append(f.container),t.setTimeout(it(f.image,h,f.container),50+h*20)):f={container:null,image:null},n(f.container).add(s.keepSource&&s.linkSourceImages?l.original:null).data("index",h).on(s.thumbEventType,rt).data("thumbload",d),tt===y&&n(f.container).addClass("active"),this._thumbnails.push(f);return p=this._thumbnails.slice(g),this},lazyLoad:function(t,i){var u=t.constructor==Array?t:[t],r=this,f=0;return n.each(u,function(t,e){if(!(e>r._thumbnails.length-1)){var o=r._thumbnails[e],c=o.data,s=function(){++f==u.length&&typeof i=="function"&&i.call(r)},h=n(o.container).data("thumbload");o.video?h.call(r,o,s):o.load(c.src,function(n){h.call(r,n,s)})}}),this},lazyLoadChunks:function(n,i){var e=this.getDataLength(),r=0,o=0,s=[],u=[],h=this,f;for(i=i||0;r<e;r++)u.push(r),(++o==n||r==e-1)&&(s.push(u),o=0,u=[]);return f=function(n){var r=s.shift();r&&t.setTimeout(function(){h.lazyLoad(r,function(){f(!0)})},i&&n?i:0)},f(!1),this},_run:function(){var f=this;f._createThumbnails();u.wait({timeout:1e4,until:function(){return i.OPERA&&f.$("stage").css("display","inline-block"),f._stageWidth=f.$("stage").width(),f._stageHeight=f.$("stage").height(),f._stageWidth&&f._stageHeight>50},success:function(){if(rt.push(f),f._options.swipe){var e=f.$("images").width(f.getDataLength()*f._stageWidth);n.each(new Array(f.getDataLength()),function(t){var r=new i.Picture,s=f.getData(t),o;n(r.container).css({position:"absolute",top:0,left:f._stageWidth*t}).prepend(f._layers[t]=n(u.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(e);s.video&&ft(r.container);f._controls.slides.push(r);o=new i.Picture;o.isIframe=!0;n(o.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(r.container);f._controls.frames.push(o)});f.finger.setup()}if(u.show(f.get("counter")),f._options.carousel&&f._carousel.bindControls(),f._options.autoplay&&(f.pause(),typeof f._options.autoplay=="number"&&(f._playtime=f._options.autoplay),f._playing=!0),f._firstrun){f._options.autoplay&&f.trigger(i.PLAY);typeof f._options.show=="number"&&f.show(f._options.show);return}f._firstrun=!0;i.History&&i.History.change(function(n){isNaN(n)?t.history.go(-1):f.show(n,r,!0)});f.trigger(i.READY);f.theme.init.call(f,f._options);n.each(i.ready.callbacks,function(n,t){typeof t=="function"&&t.call(f,f._options)});f._options.extend.call(f,f._options);/^[0-9]{1,4}$/.test(ot)&&i.History?f.show(ot,r,!0):f._data[f._options.show]&&f.show(f._options.show);f._options.autoplay&&f.trigger(i.PLAY)},error:function(){i.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+f._stageWidth+"px, height: "+f._stageHeight+"px.",!0)}})},load:function(t,r,u){var o=this,e=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),typeof r=="function"&&(u=r,r=null),t=t||e.dataSource,r=r||e.dataSelector,u=u||e.dataConfig,n.isPlainObject(t)&&(t=[t]),n.isArray(t)?this.validate(t)?this._data=t:i.raise("Load failed: JSON Array not valid."):(r+=",.video,.iframe",n(t).find(r).each(function(t,i){i=n(i);var r={},e=i.parent(),f=e.attr("href"),s=e.attr("rel");f&&(i[0].nodeName=="IMG"||i.hasClass("video"))&&lt(f)?r.video=f:f&&i.hasClass("iframe")?r.iframe=f:r.image=r.big=f;s&&(r.big=s);n.each("big title description link layer image".split(" "),function(n,t){i.data(t)&&(r[t]=i.data(t).toString())});r.big||(r.big=r.image);o._data.push(n.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},r,u(i)))})),typeof e.dataSort=="function"?d.sort.call(this._data,e.dataSort):e.dataSort=="random"&&this._data.sort(function(){return f.round(f.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(t){var u=this,i,f=!1,e=function(){var i=!0;n.each(u._data,function(n,t){if(t.loading)return i=!1,!1});i&&!f&&(f=!0,t.call(u))};return n.each(this._data,function(t,f){if(i=u._data[t],"thumb"in f==!1&&(i.thumb=f.image),f.big||(i.big=f.image),"video"in f){var o=lt(f.video);o&&(i.iframe=new ct(o.provider,o.id).embed()+function(){if(typeof u._options[o.provider]=="object"){var t=[];return n.each(u._options[o.provider],function(n,i){t.push(n+"="+i)}),o.provider=="youtube"&&(t=["wmode=opaque"].concat(t)),"?"+t.join("&")}return""}(),i.thumb&&i.image||n.each(["thumb","image"],function(n,t){if(t=="image"&&!u._options.videoPoster){i.image=r;return}var f=new ct(o.provider,o.id);i[t]||(i.loading=!0,f.getMedia(t,function(n,t){return function(i){n[t]=i;t!="image"||n.big||(n.big=n.image);delete n.loading;e()}}(i,t)))}))}}),e(),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").off("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),u.removeFromArray(w,this),u.removeFromArray(rt,this),i._waiters.length&&n.each(i._waiters,function(n,i){i&&t.clearTimeout(i)}),this},splice:function(){var n=this,i=u.array(arguments);return t.setTimeout(function(){d.splice.apply(n._data,i);n._parseData(function(){n._createThumbnails()})},2),n},push:function(){var i=this,n=u.array(arguments);return n.length==1&&n[0].constructor==Array&&(n=n[0]),t.setTimeout(function(){d.push.apply(i._data,n);i._parseData(function(){i._createThumbnails(n)})},2),i},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(n,t){n=it(n);this.$("container").on(n,this.proxy(t));return this},unbind:function(n){return n=it(n),this.$("container").off(n),this},trigger:function(t){return t=typeof t=="object"?n.extend(t,{scope:this}):{type:it(t),scope:this},this.$("container").trigger(t),this},addIdleState:function(){return this._idle.add.apply(this._idle,u.array(arguments)),this},removeIdleState:function(){return this._idle.remove.apply(this._idle,u.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(){return this._fullscreen.enter.apply(this,u.array(arguments)),this},exitFullscreen:function(){return this._fullscreen.exit.apply(this,u.array(arguments)),this},toggleFullscreen:function(){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,u.array(arguments)),this},bindTooltip:function(){return this._tooltip.bind.apply(this._tooltip,u.array(arguments)),this},defineTooltip:function(){return this._tooltip.define.apply(this._tooltip,u.array(arguments)),this},refreshTooltip:function(){return this._tooltip.show.apply(this._tooltip,u.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,u.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,u.array(arguments)),this},hasVariation:function(t){return n.inArray(t,this._options.variation.split(/\s+/))>-1},getActiveImage:function(){var n=this._getActive();return n?n.image:r},getActiveThumb:function(){return this._thumbnails[this._active].image||r},getMousePosition:function(n){return{x:n.pageX-this.$("container").offset().left,y:n.pageY-this.$("container").offset().top}},addPan:function(t){if(this._options.imageCrop!==!1){t=n(t||this.getActiveImage());var i=this,v=t.width()/2,y=t.height()/2,h=parseInt(t.css("left"),10),c=parseInt(t.css("top"),10),e=h||0,s=c||0,l=0,a=0,p=!1,d=u.timestamp(),w=0,r=0,b=function(n,i,u){if(n>0&&(r=f.round(f.max(n*-1,f.min(0,i))),w!==r))if(w=r,o===8)t.parent()["scroll"+u](r*-1);else{var e={};e[u.toLowerCase()]=r;t.css(e)}},k=function(n){u.timestamp()-d<50||(p=!0,v=i.getMousePosition(n).x,y=i.getMousePosition(n).y)},g=function(){p&&(l=t.width()-i._stageWidth,a=t.height()-i._stageHeight,h=v/i._stageWidth*l*-1,c=y/i._stageHeight*a*-1,e+=(h-e)/i._options.imagePanSmoothness,s+=(c-s)/i._options.imagePanSmoothness,b(a,s,"Top"),b(l,e,"Left"))};o===8&&(t.parent().scrollTop(s*-1).scrollLeft(e*-1),t.css({top:0,left:0}));this.$("stage").off("mousemove",k).on("mousemove",k);return this.addTimer("pan"+i._id,g,50,!0),this}},proxy:function(n,t){return typeof n!="function"?c:(t=t||this,function(){return n.apply(t,u.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$("stage").off("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(){var t=this._dom;return n.each(u.array(arguments),function(n,i){t[i]=u.create("galleria-"+i)}),this},attachKeyboard:function(){return this._keyboard.attach.apply(this._keyboard,u.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,u.array(arguments)),this},appendChild:function(n,t){return this.$(n).append(this.get(t)||t),this},prependChild:function(n,t){return this.$(n).prepend(this.get(t)||t),this},remove:function(){return this.$(u.array(arguments).join(",")).remove(),this},append:function(n){var t,i;for(t in n)if(n.hasOwnProperty(t))if(n[t].constructor===Array)for(i=0;n[t][i];i++)this.appendChild(t,n[t][i]);else this.appendChild(t,n[t]);return this},_scaleImage:function(t,i){if(t=t||this._controls.getActive(),t){var r,e=function(t){n(t.container).children(":first").css({top:f.max(0,u.parseValue(t.image.style.top)),left:f.max(0,u.parseValue(t.image.style.left)),width:u.parseValue(t.image.width),height:u.parseValue(t.image.height)})};return i=n.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&this._options.imageCrop!==!0?typeof i.complete=="function"?(r=i.complete,i.complete=function(){r.call(t,t);e(t)}):i.complete=e:n(t.container).children(":first").css({top:0,left:0}),t.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(t,i){typeof t=="function"&&(i=t,t=r);t=n.extend({width:0,height:0},t);var f=this,u=this.$("container");return n.each(t,function(n,i){i||(u[n]("auto"),t[n]=f._getWH()[n])}),n.each(t,function(n,t){u[n](t)}),this.rescale(i)},rescale:function(t,u,f){var e=this,o;return typeof t=="function"&&(f=t,t=r),o=function(){e._stageWidth=t||e.$("stage").width();e._stageHeight=u||e.$("stage").height();e._options.swipe?(n.each(e._controls.slides,function(t,i){e._scaleImage(i);n(i.container).css("left",e._stageWidth*t)}),e.$("images").css("width",e._stageWidth*e.getDataLength())):e._scaleImage();e._options.carousel&&e.updateCarousel();var r=e._controls.frames[e._controls.active];r&&e._controls.frames[e._controls.active].scale({width:e._stageWidth,height:e._stageHeight,iframelimit:e._options.maxVideoSize});e.trigger(i.RESCALE);typeof f=="function"&&f.call(e)},o.call(e),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var u,t,r=this.getNext(),n;try{for(t=this._options.preload;t>0;t--)u=new i.Picture,n=this.getData(r),u.preload(this.isFullscreen()&&n.big?n.big:n.image),r=this.getNext(r)}catch(f){}}},show:function(r,u,e){var v=this._options.swipe,o,s,l;if(v||!(this._queue.length>3||r===!1||!this._options.queue&&this._queue.stalled)){if(r=f.max(0,f.min(parseInt(r,10),this.getDataLength()-1)),u=typeof u!="undefined"?!!u:r<this.getIndex(),e=e||!1,!e&&i.History){i.History.set(r.toString());return}if(this.finger&&r!==this._active&&(this.finger.to=-(r*this.finger.width),this.finger.index=r),this._active=r,v){if(o=this.getData(r),s=this,!o)return;var a=this.isFullscreen()&&o.big?o.big:o.image||o.iframe,h=this._controls.slides[r],y=h.isCached(a),p=this._thumbnails[r],c={cached:y,index:r,rewind:u,imageTarget:h.image,thumbTarget:p.image,galleriaData:o};this.trigger(n.extend(c,{type:i.LOADSTART}));s.$("container").removeClass("videoplay");l=function(){s._layers[r].innerHTML=s.getData().layer||"";s.trigger(n.extend(c,{type:i.LOADFINISH}));s._playCheck()};s._preload();t.setTimeout(function(){h.ready&&n(h.image).attr("src")==a?(s.trigger(n.extend(c,{type:i.IMAGE})),l()):(o.iframe&&!o.image&&(h.isIframe=!0),h.load(a,function(t){c.imageTarget=t.image;s._scaleImage(t,l).trigger(n.extend(c,{type:i.IMAGE}));l()}))},100)}else d.push.call(this._queue,{index:r,rewind:u}),this._queue.stalled||this._show();return this}},_show:function(){var f=this,o=this._queue[0],e=this.getData(o.index),c;if(e){var l=this.isFullscreen()&&e.big?e.big:e.image||e.iframe,h=this._controls.getActive(),s=this._controls.getNext(),a=s.isCached(l),v=this._thumbnails[o.index],y=function(){n(s.image).trigger("mouseup")};f.$("container").toggleClass("iframe",!!e.isIframe).removeClass("videoplay");c=function(e,o,s,h,c){return function(){var l;if(p.active=!1,u.toggleQuality(o.image,f._options.imageQuality),f._layers[f._controls.active].innerHTML="",n(s.container).css({zIndex:0,opacity:0}).show(),n(s.container).find("iframe, .galleria-videoicon").remove(),n(f._controls.frames[f._controls.active].container).hide(),n(o.container).css({zIndex:1,left:0,top:0}).show(),f._controls.swap(),f._options.imagePan&&f.addPan(o.image),e.iframe&&e.image||e.link||f._options.lightbox||f._options.clicknext)n(o.image).css({cursor:"pointer"}).on("mouseup",function(u){if(typeof u.which!="number"||!(u.which>1)){if(e.iframe){f.isPlaying()&&f.pause();var o=f._controls.frames[f._controls.active],s=f._stageWidth,h=f._stageHeight;n(o.container).css({width:s,height:h,opacity:0}).show().animate({opacity:1},200);t.setTimeout(function(){o.load(e.iframe+(e.video?"&autoplay=1":""),{width:s,height:h},function(n){f.$("container").addClass("videoplay");n.scale({width:f._stageWidth,height:f._stageHeight,iframelimit:e.video?f._options.maxVideoSize:r})})},100);return}if(f._options.clicknext&&!i.TOUCH){f._options.pauseOnInteraction&&f.pause();f.next();return}if(e.link){f._options.popupLinks?l=t.open(e.link,"_blank"):t.location.href=e.link;return}f._options.lightbox&&f.openLightbox()}});f._playCheck();f.trigger({type:i.IMAGE,index:h.index,imageTarget:o.image,thumbTarget:c.image,galleriaData:e});d.shift.call(f._queue);f._queue.stalled=!1;f._queue.length&&f._show()}}(e,s,h,o,v);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(o.index);f._preload();u.show(s.container);s.isIframe=e.iframe&&!e.image;n(f._thumbnails[o.index].container).addClass("active").siblings(".active").removeClass("active");f.trigger({type:i.LOADSTART,cached:a,index:o.index,rewind:o.rewind,imageTarget:s.image,thumbTarget:v.image,galleriaData:e});f._queue.stalled=!0;s.load(l,function(t){var s=n(f._layers[1-f._controls.active]).html(e.layer||"").hide();f._scaleImage(t,{complete:function(t){var l,v;"image"in h&&u.toggleQuality(h.image,!1);u.toggleQuality(t.image,!1);f.removePan();f.setInfo(o.index);f.setCounter(o.index);e.layer&&(s.show(),(e.iframe&&e.image||e.link||f._options.lightbox||f._options.clicknext)&&s.css("cursor","pointer").off("mouseup").mouseup(y));e.video&&e.image&&ft(t.container);l=f._options.transition;n.each({initial:h.image===null,touch:i.TOUCH,fullscreen:f.isFullscreen()},function(n,t){if(t&&f._options[n+"Transition"]!==r)return l=f._options[n+"Transition"],!1});l in p.effects==!1?c():(v={prev:h.container,next:t.container,rewind:o.rewind,speed:f._options.transitionSpeed||400},p.active=!0,p.init.call(f,l,v,c));f.trigger({type:i.LOADFINISH,cached:a,index:o.index,rewind:o.rewind,imageTarget:t.image,thumbTarget:f._thumbnails[o.index].image,galleriaData:f.getData(o.index)})}})})}},getNext:function(n){return n=typeof n=="number"?n:this.getIndex(),n===this.getDataLength()-1?0:n+1},getPrev:function(n){return n=typeof n=="number"?n:this.getIndex(),n===0?this.getDataLength()-1:n-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(n){return n in this._dom?this._dom[n]:null},getData:function(n){return n in this._data?this._data[n]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return typeof this._active=="number"?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(n){return typeof n=="undefined"?this._options:this._options[n]},setOptions:function(t,i){return typeof t=="object"?n.extend(this._options,t):this._options[t]=i,this},play:function(n){return this._playing=!0,this._playtime=n||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(n){return this._playing?this.pause():this.play(n)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var n=this,t=0,o=20,s=u.timestamp(),r="play"+this._id,e;this._playing&&(this.clearTimer(r),e=function(){if(t=u.timestamp()-s,t>=n._playtime&&n._playing){n.clearTimer(r);n.next();return}n._playing&&(n.trigger({type:i.PROGRESS,percent:f.ceil(t/n._playtime*100),seconds:f.floor(t/1e3),milliseconds:t}),n.addTimer(r,e,o))},n.addTimer(r,e,o))},setPlaytime:function(n){return this._playtime=n,this},setIndex:function(n){return this._active=n,this},setCounter:function(n){if(typeof n=="number"?n++:typeof n=="undefined"&&(n=this.getIndex()+1),this.get("current").innerHTML=n,o){var t=this.$("counter"),i=t.css("opacity");parseInt(i,10)===1?u.removeAlpha(t[0]):this.$("counter").css("opacity",i)}return this},setInfo:function(t){var r=this,i=this.getData(t);return n.each(["title","description"],function(n,t){var u=r.$("info-"+t);i[t]?u[i[t].length?"show":"hide"]().html(i[t]):u.empty().hide()}),this},hasInfo:function(n){for(var i="title description".split(" "),t=0;i[t];t++)if(!!this.getData(n)[i[t]])return!0;return!1},jQuery:function(t){var r=this,u=[],i;return n.each(t.split(","),function(t,i){i=n.trim(i);r.get(i)&&u.push(i)}),i=n(r.get(u.shift())),n.each(u,function(n,t){i=i.add(r.get(t))}),i},$:function(){return this.jQuery.apply(this,u.array(arguments))}};n.each(st,function(n,t){var r=/_/.test(t)?t.replace(/_/g,""):t;i[t.toUpperCase()]="galleria."+r});n.extend(i,{IE9:o===9,IE8:o===8,IE7:o===7,IE6:o===6,IE:o,WEBKIT:/webkit/.test(y),CHROME:/chrome/.test(y),SAFARI:/safari/.test(y)&&!/chrome/.test(y),QUIRK:o&&e.compatMode&&e.compatMode==="BackCompat",MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!t.opera,IPHONE:/iphone/.test(y),IPAD:/ipad/.test(y),ANDROID:/android/.test(y),TOUCH:"ontouchstart"in e});i.addTheme=function(r){r.name||i.raise("No theme name specified");r.defaults=typeof r.defaults!="object"?{}:ht(r.defaults);var f=!1,e,o;return typeof r.css=="string"?(n("link").each(function(n,t){return e=new RegExp(r.css),e.test(t.href)?(f=!0,ut(r),!1):void 0}),f||n(function(){var h=0,s=function(){n("script").each(function(n,i){e=new RegExp("galleria\\."+r.name.toLowerCase()+"\\.");o=new RegExp("galleria\\.io\\/theme\\/"+r.name.toLowerCase()+"\\/(\\d*\\.*)?(\\d*\\.*)?(\\d*\\/)?js");(e.test(i.src)||o.test(i.src))&&(f=i.src.replace(/[^\/]*$/,"")+r.css,t.setTimeout(function(){u.loadCSS(f,"galleria-theme-"+r.name,function(){ut(r)})},1))});f||(h++>5?i.raise("No theme CSS loaded"):t.setTimeout(s,500))};s()})):ut(r),r};i.loadTheme=function(r){if(!n("script").filter(function(){return n(this).attr("src")==r}).length){var f=!1,e;n(t).on("load",function(){f||(e=t.setTimeout(function(){f||i.raise("Galleria had problems loading theme at "+r+". Please check theme path or load manually.",!0)},2e4))});return u.loadScript(r,function(){f=!0;t.clearTimeout(e)}),i}};i.get=function(n){if(!w[n]){if(typeof n!="number")return w;i.raise("Gallery index "+n+" not found")}else return w[n]};i.configure=function(t,r){var u={};return typeof t=="string"&&r?(u[t]=r,t=u):n.extend(u,t),i.configure.options=u,n.each(i.get(),function(n,t){t.setOptions(u)}),i};i.configure.options={};i.on=function(t,r){if(t){r=r||c;var f=t+r.toString().replace(/\s/g,"")+u.timestamp();return n.each(i.get(),function(n,i){i._binds.push(f);i.bind(t,r)}),i.on.binds.push({type:t,callback:r,hash:f}),i}};i.on.binds=[];i.run=function(t,r){return n.isFunction(r)&&(r={extend:r}),n(t||"#galleria").galleria(r),i};i.addTransition=function(n,t){return p.effects[n]=t,i};i.utils=u;i.log=function(){var i=u.array(arguments);if("console"in t&&"log"in t.console)try{return t.console.log.apply(t.console,i)}catch(r){n.each(i,function(){t.console.log(this)})}else return t.alert(i.join("<br>"))};i.ready=function(t){return typeof t!="function"?i:(n.each(rt,function(n,i){t.call(i,i._options)}),i.ready.callbacks.push(t),i)};i.ready.callbacks=[];i.raise=function(t,i){var r=i?"Fatal error":"Error",u={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},f=function(t){var f='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+';">'+(i?"<strong>"+r+": <\/strong>":"")+t+"<\/div>";n.each(w,function(){var n=this.$("errors"),t=this.$("target");n.length||(t.css("position","relative"),n=this.addElement("errors").appendChild("target","errors").$("errors").css(u));n.append(f)});w.length||n("<div>").css(n.extend(u,{position:"fixed"})).append(f).appendTo(s().body)};if(et){if(f(t),i)throw new Error(r+": "+t);}else if(i){if(at)return;at=!0;i=!1;f("Gallery could not load.")}};i.version=1.51;i.getLoadedThemes=function(){return n.map(b,function(n){return n.name})};i.requires=function(n,t){return t=t||"You need to upgrade Galleria to version "+n+" to use one or more components.",i.version<n&&i.raise(t,!0),i};i.Picture=function(t){this.id=t||null;this.image=null;this.container=u.create("galleria-image");n(this.container).css({overflow:"hidden",position:"relative"});this.original={width:0,height:0};this.ready=!1;this.isIframe=!1};i.Picture.prototype={cache:{},show:function(){u.show(this.image)},hide:function(){u.moveOut(this.image)},clear:function(){this.image=null},isCached:function(n){return!!this.cache[n]},preload:function(t){n(new Image).on("load",function(n,t){return function(){t[n]=n}}(t,this.cache)).attr("src",t)},load:function(r,f,e){var o,h;if(typeof f=="function"&&(e=f,f=null),this.isIframe){o="if"+(new Date).getTime();h=this.image=n("<iframe>",{src:r,frameborder:0,id:o,allowfullscreen:!0,css:{visibility:"hidden"}})[0];f&&n(h).css(f);n(this.container).find("iframe,img").remove();this.container.appendChild(this.image);n("#"+o).on("load",function(i,r){return function(){t.setTimeout(function(){n(i.image).css("visibility","visible");typeof r=="function"&&r.call(i,i)},10)}}(this,e));return this.container}this.image=new Image;i.IE8&&n(this.image).css("filter","inherit");i.IE||i.CHROME||i.SAFARI||n(this.image).css("image-rendering","optimizequality");var c=!1,l=!1,a=n(this.container),s=n(this.image),y=function(){c?tt?n(this).attr("src",tt):i.raise("Image not found: "+r):(c=!0,t.setTimeout(function(n,t){return function(){n.attr("src",t+(t.indexOf("?")>-1?"&":"?")+u.timestamp())}}(n(this),r),50))},v=function(r,e,o){return function(){var s=function(){n(this).off("load");r.original=f||{height:this.height,width:this.width};i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform="translate3d(0,0,0)");a.append(this);r.cache[o]=o;typeof e=="function"&&t.setTimeout(function(){e.call(r,r)},1)};this.width&&this.height?s.call(this):function(t){u.wait({until:function(){return t.width&&t.height},success:function(){s.call(t)},error:function(){l?i.raise("Could not extract width/height from image: "+t.src+". Traced measures: width:"+t.width+"px, height: "+t.height+"px."):(n(new Image).on("load",v).attr("src",t.src),l=!0)},timeout:100})}(this)}}(this,e,r);return a.find("iframe,img").remove(),s.css("display","block"),u.hide(this.image),n.each("minWidth minHeight maxWidth maxHeight".split(" "),function(n,t){s.css(t,/min/.test(t)?"0":"none")}),s.on("load",v).on("error",y).attr("src",r),this.container},scale:function(t){var e=this,o,s,w,b,y,h,l,v,p;if(t=n.extend({width:0,height:0,min:r,max:r,margin:0,complete:c,position:"center",crop:!1,canvas:!1,iframelimit:r},t),this.isIframe){o=t.width;s=t.height;t.iframelimit&&(y=f.min(t.iframelimit/o,t.iframelimit/s),y<1?(w=o*y,b=s*y,n(this.image).css({top:s/2-b/2,left:o/2-w/2,position:"absolute"})):n(this.image).css({top:0,left:0}));n(this.image).width(w||o).height(b||s).removeAttr("width").removeAttr("height");n(this.container).width(o).height(s);t.complete.call(e,e);try{this.image.contentWindow&&n(this.image.contentWindow).trigger("resize")}catch(k){}return this.container}return this.image?(v=n(e.container),u.wait({until:function(){return h=t.width||v.width()||u.parseValue(v.css("width")),l=t.height||v.height()||u.parseValue(v.css("height")),h&&l},success:function(){var o=(h-t.margin*2)/e.original.width,s=(l-t.margin*2)/e.original.height,c=f.min(o,s),v=f.max(o,s),d={"true":v,width:o,height:s,"false":c,landscape:e.original.width>e.original.height?v:c,portrait:e.original.width<e.original.height?v:c},r=d[t.crop.toString()],y="";t.max&&(r=f.min(t.max,r));t.min&&(r=f.max(t.min,r));n.each(["width","height"],function(t,i){n(e.image)[i](e[i]=e.image[i]=f.round(e.original[i]*r))});n(e.container).width(h).height(l);t.canvas&&a&&(a.elem.width=e.width,a.elem.height=e.height,y=e.image.src+":"+e.width+"x"+e.height,e.image.src=a.cache[y]||function(n){a.context.drawImage(e.image,0,0,e.original.width*r,e.original.height*r);try{return p=a.elem.toDataURL(),a.length+=p.length,a.cache[n]=p,p}catch(t){return e.image.src}}(y));var i={},w={},b=function(t,i,r){var o=0,s,h;return/\%/.test(t)?(s=parseInt(t,10)/100,h=e.image[i]||n(e.image)[i](),o=f.ceil(h*-1*s+r*s)):o=u.parseValue(t),o},k={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};n.each(t.position.toLowerCase().split(" "),function(n,t){t==="center"&&(t="50%");i[n?"top":"left"]=t});n.each(i,function(t,i){k.hasOwnProperty(i)&&n.extend(w,k[i])});i=i.top?n.extend(i,w):w;i=n.extend({top:"50%",left:"50%"},i);n(e.image).css({position:"absolute",top:b(i.top,"height",l),left:b(i.left,"width",h)});e.show();e.ready=!0;t.complete.call(e,e)},error:function(){i.raise("Could not scale image: "+e.image.src)},timeout:1e3}),this):this.container}};n.extend(n.easing,{galleria:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i},galleriaIn:function(n,t,i,r,u){return r*(t/=u)*t+i},galleriaOut:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i}});i.Finger=function(){var h=f.abs,u=i.HAS3D=function(){var i=e.createElement("p"),u,r=["webkit","O","ms","Moz",""],f,t=0,o="transform";for(s().html.insertBefore(i,null);r[t];t++)f=r[t]?r[t]+"Transform":o,i.style[f]!==undefined&&(i.style[f]="translate3d(1px,1px,1px)",u=n(i).css(r[t]?"-"+r[t].toLowerCase()+"-"+o:o));return s().html.removeChild(i),u!==undefined&&u.length>0&&u!=="none"}(),o=function(){var n="RequestAnimationFrame";return t.requestAnimationFrame||t["webkit"+n]||t["moz"+n]||t["o"+n]||t["ms"+n]||function(n){t.setTimeout(n,1e3/60)}}(),r=function(i,r){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(n,t,i,r,u){return-r*((t=t/u-1)*t*t*t-1)+i}},this.easeout=function(n,t,i,r,u){return r*((t=t/u-1)*t*t*t*t+1)+i},i.children.length){var f=this;n.extend(this.config,r);this.elem=i;this.child=i.children[0];this.to=this.pos=0;this.touching=!1;this.start={};this.index=this.config.start;this.anim=0;this.easing=this.config.easing;u||(this.child.style.position="absolute",this.elem.style.position="relative");n.each(["ontouchstart","ontouchmove","ontouchend","setup"],function(n,t){f[t]=function(n){return function(){n.apply(f,arguments)}}(f[t])});this.setX=function(){var n=f.child.style;if(!u){n.left=f.pos+"px";return}n.MozTransform=n.webkitTransform=n.transform="translate3d("+f.pos+"px,0,0)";return};n(i).on("touchstart",this.ontouchstart);n(t).on("resize",this.setup);n(t).on("orientationchange",this.setup);this.setup(),function e(){o(e);f.loop.call(f)}()}};return r.prototype={constructor:r,setup:function(){this.width=n(this.elem).width();this.length=f.ceil(n(this.child).width()/this.width);this.index!==0&&(this.index=f.max(0,f.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(n){this.pos=n;this.to=n},ontouchstart:function(n){var t=n.originalEvent.touches;this.start={pageX:t[0].pageX,pageY:t[0].pageY,time:+new Date};this.isScrolling=null;this.touching=!0;this.deltaX=0;k.on("touchmove",this.ontouchmove);k.on("touchend",this.ontouchend)},ontouchmove:function(n){var t=n.originalEvent.touches;t&&t.length>1||n.scale&&n.scale!==1||(this.deltaX=t[0].pageX-this.start.pageX,this.isScrolling===null&&(this.isScrolling=!!(this.isScrolling||f.abs(this.deltaX)<f.abs(t[0].pageY-this.start.pageY))),this.isScrolling||(n.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?f.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),n.stopPropagation())},ontouchend:function(){this.touching=!1;var n=+new Date-this.start.time<250&&f.abs(this.deltaX)>40||f.abs(this.deltaX)>this.width/2,t=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(n&&!t?this.deltaX<0?1:-1:0));k.off("touchmove",this.ontouchmove);k.off("touchend",this.ontouchend)},show:function(n){n!=this.index?this.config.onchange.call(this,n):this.to=-(n*this.width)},moveTo:function(n){n!=this.index&&(this.pos=this.to=-(n*this.width),this.index=n)},loop:function(){var n=this.to-this.pos,r=1,t,i;if(this.width&&n&&(r=f.max(.5,f.min(1.5,f.abs(n/this.width)))),this.touching||f.abs(n)<=1){if(this.pos=this.to,n=0,this.anim&&!this.touching)this.config.oncomplete(this.index);this.anim=0;this.easing=this.config.easing}else{if(this.anim||(this.anim={start:this.pos,time:+new Date,distance:n,factor:r,destination:this.to}),t=+new Date-this.anim.time,i=this.config.duration*this.anim.factor,t>i||this.anim.destination!=this.to){this.anim=0;this.easing=this.easeout;return}this.pos=this.easing(null,t,this.anim.start,this.anim.distance,i)}this.setX()}},r}();n.fn.galleria=function(t){var r=this.selector;return n(this).length?this.each(function(){n.data(this,"galleria")&&(n.data(this,"galleria").destroy(),n(this).find("*").hide());n.data(this,"galleria",(new i).init(this,t))}):(n(function(){n(r).length?n(r).galleria(t):i.utils.wait({until:function(){return n(r).length},success:function(){n(r).galleria(t)},error:function(){i.raise('Init failed: Galleria could not find the element "'+r+'".')},timeout:5e3})}),this)};typeof module=="object"&&module&&typeof module.exports=="object"?module.exports=i:(t.Galleria=i,typeof define=="function"&&define.amd&&define("galleria",["jquery"],function(){return i}))}(jQuery,this);!function(n){"use strict";var t=function(t,i){this.options=i;this.$tabs=n(t);this._accordionVisible=!1;this._initAccordion();this._checkStateOnResize();var r=this;setTimeout(function(){r.checkState()},0)};t.DEFAULTS={accordionClass:"visible-xs",tabsClass:"hidden-xs",accordionTemplate:function(n,t,i,r){return'<div class="panel panel-default">   <div class="panel-heading">      <h4 class="panel-title">      <\/h4>   <\/div>   <div id="'+t+'" class="panel-collapse collapse '+(r?"in":"")+'">       <div class="panel-body js-tabcollapse-panel-body">       <\/div>   <\/div><\/div>'}};t.prototype.checkState=function(){this.$tabs.is(":visible")&&this._accordionVisible?(this.showTabs(),this._accordionVisible=!1):this.$accordion.is(":visible")&&!this._accordionVisible&&(this.showAccordion(),this._accordionVisible=!0)};t.prototype.showTabs=function(){var u=this,t,i,r;this.$tabs.trigger(n.Event("show-tabs.bs.tabcollapse"));t=this.$accordion.find(".js-tabcollapse-panel-heading").detach();t.each(function(){var i=n(this),t=i.data("bs.tabcollapse.parentLi"),r=u._panelHeadingToTabHeading(i);t.removeClass("active");t.parent().hasClass("dropdown-menu")&&!t.siblings("li").hasClass("active")&&t.parent().parent().removeClass("active");r.hasClass("collapsed")?r.removeClass("collapsed"):(t.addClass("active"),t.parent().hasClass("dropdown-menu")&&t.parent().parent().addClass("active"));t.append(i)});n("li").hasClass("active")||n("li").first().addClass("active");i=this.$accordion.find(".js-tabcollapse-panel-body");i.each(function(){var t=n(this),i=t.data("bs.tabcollapse.tabpane");i.append(t.contents().detach())});this.$accordion.html("");this.options.updateLinks&&(r=this.getTabContentElement(),r.find('[data-toggle-was="tab"], [data-toggle-was="pill"]').each(function(){var t=n(this),i=t.attr("href").replace(/-collapse$/g,"");t.attr({"data-toggle":t.attr("data-toggle-was"),"data-toggle-was":"","data-parent":"",href:i})}));this.$tabs.trigger(n.Event("shown-tabs.bs.tabcollapse"))};t.prototype.getTabContentElement=function(){var t=n(this.options.tabContentSelector);return t.length===0&&(t=this.$tabs.siblings(".tab-content")),t};t.prototype.showAccordion=function(){var i,t,r,u;this.$tabs.trigger(n.Event("show-accordion.bs.tabcollapse"));i=this.$tabs.find('li:not(.dropdown) [data-toggle="tab"], li:not(.dropdown) [data-toggle="pill"]');t=this;i.each(function(){var i=n(this),r=i.parent();i.data("bs.tabcollapse.parentLi",r);t.$accordion.append(t._createAccordionGroup(t.$accordion.attr("id"),i.detach()))});this.options.updateLinks&&(r=this.$accordion.attr("id"),u=this.$accordion.find(".js-tabcollapse-panel-body"),u.find('[data-toggle="tab"], [data-toggle="pill"]').each(function(){var t=n(this),i=t.attr("href")+"-collapse";t.attr({"data-toggle-was":t.attr("data-toggle"),"data-toggle":"collapse","data-parent":"#"+r,href:i})}));this.$tabs.trigger(n.Event("shown-accordion.bs.tabcollapse"))};t.prototype._panelHeadingToTabHeading=function(n){var t=n.attr("href").replace(/-collapse$/g,"");return n.attr({"data-toggle":"tab",href:t,"data-parent":""}),n};t.prototype._tabHeadingToPanelHeading=function(n,t,i,r){return n.addClass("js-tabcollapse-panel-heading "+(r?"":"collapsed")),n.attr({"data-toggle":"collapse","data-parent":"#"+i,href:"#"+t}),n};t.prototype._checkStateOnResize=function(){var t=this;n(window).resize(function(){clearTimeout(t._resizeTimeout);t._resizeTimeout=setTimeout(function(){t.checkState()},100)})};t.prototype._initAccordion=function(){var i=function(){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},t=this.$tabs.attr("id"),r=(t?t:i())+"-accordion";this.$accordion=n('<div class="panel-group '+this.options.accordionClass+'" id="'+r+'"><\/div>');this.$tabs.after(this.$accordion);this.$tabs.addClass(this.options.tabsClass);this.getTabContentElement().addClass(this.options.tabsClass)};t.prototype._createAccordionGroup=function(t,i){var r=i.attr("data-target"),e=i.data("bs.tabcollapse.parentLi").is(".active");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var u=n(r),o=u.attr("id")+"-collapse",f=n(this.options.accordionTemplate(i,o,t,e));return f.find(".panel-heading > .panel-title").append(this._tabHeadingToPanelHeading(i,o,t,e)),f.find(".panel-body").append(u.contents().detach()).data("bs.tabcollapse.tabpane",u),f};n.fn.tabCollapse=function(i){return this.each(function(){var r=n(this),u=r.data("bs.tabcollapse"),f=n.extend({},t.DEFAULTS,r.data(),typeof i=="object"&&i);u||r.data("bs.tabcollapse",new t(this,f))})};n.fn.tabCollapse.Constructor=t}(window.jQuery);var previousScroll=0,jRes=jRespond([{label:"mobile",enter:0,exit:767},{label:"tablet",enter:768,exit:991},{label:"pc",enter:992,exit:1e4}]),in_version="";jRes.addFunc([{breakpoint:"mobile",enter:function(){in_version="mobile";$(this).find("body").removeClass("moldura");$(".linhacapas").each(function(){$(this).find(".bloco").height("auto")})},exit:function(){}},{breakpoint:"tablet",enter:function(){in_version="tablet";$(document).ready(function(){$(".linhacapas").each(function(){var n=0;$(this).find(".bloco").each(function(){$(this).height()>n&&(n=$(this).height())});$(this).find(".bloco").height(n)});$(this).find("body").removeClass("moldura")})},exit:function(){}},{breakpoint:"pc",enter:function(){in_version="pc";$(document).ready(function(){$(".linhacapas").each(function(){var n=0;$(this).find(".bloco").each(function(){$(this).height()>n&&(n=$(this).height())});$(this).find(".bloco").height(n)});$(".linhacanalopiniao").each(function(){var n=0;$(this).find(".blococanalopiniao").each(function(){$(this).height()>n&&(n=$(this).height())});$(this).find(".blococanalopiniao").height(n)})})},exit:function(){}}]);$(document).ready(function(){var i,r,t,n;if(setInterval(live,500),$(".blocoDestaques").length>0&&$(".blocoDestaques").slick({lazyLoad:"ondemand",infinite:!0,speed:300,slidesToShow:5,slidesToScroll:5,dots:!1,arrows:!0,responsive:[{breakpoint:1199,settings:{slidesToShow:4,slidesToScroll:4,infinite:!0,dots:!1}}]}),$(".blocoDestaques").length>0&&$(".bl_galeria").slick({lazyLoad:"ondemand",infinite:!0,speed:300,slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!0}),$(".carrosel_opiniao").length>0&&$(".carrosel_opiniao").slick({dots:!1,infinite:!0,speed:600,slidesToShow:5,slidesToScroll:5,adaptiveHeight:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:4,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:3,dots:!1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,dots:!1}}]}),$(".carrosel_cronista").length>0&&$(".carrosel_cronista").slick({dots:!1,infinite:!0,speed:600,slidesToShow:3,slidesToScroll:3,adaptiveHeight:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,dots:!1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,dots:!1}}]}),$(".carrosel_convidados").length>0&&$(".carrosel_convidados").slick({dots:!1,infinite:!0,speed:600,slidesToShow:5,slidesToScroll:5,adaptiveHeight:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:4,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:3,dots:!1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,dots:!1}}]}),$(".carrosel_convidados1").length>0&&$(".carrosel_convidados1").slick({dots:!1,infinite:!0,speed:600,slidesToShow:3,slidesToScroll:3,adaptiveHeight:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,dots:!1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,dots:!1}}]}),$("#fotoscarr").length>0&&$("#fotoscarr").slick({dots:!1,infinite:!0,speed:600,slidesToShow:3,slidesToScroll:3,adaptiveHeight:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:3,dots:!1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,dots:!1}}]}),$("#carroselvideos").length>0&&$("#carroselvideos").slick({dots:!1,infinite:!0,speed:600,slidesToShow:3,slidesToScroll:3,adaptiveHeight:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:3,dots:!1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,dots:!1}}]}),$("#fotogaleria").length>0){$("#fotogaleria").slick({dots:!1,infinite:!0,speed:600,slidesToShow:1,slidesToScroll:1,fade:!0,adaptiveHeight:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,dots:!1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,dots:!1}}]});i=$(".pagingInfo");r=$("#fotogaleria");r.on("init reInit afterChange",function(n,t,r){var u=(r?r:0)+1;i.html("Foto <span>"+u+"<\/span> de <span>"+t.slideCount+"<\/span>")})}$(".especialcarrossel").length>0&&$(".especialcarrossel").slick({dots:!1,infinite:!0,speed:600,slidesToShow:4,slidesToScroll:4,adaptiveHeight:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,dots:!1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,dots:!1}}]});$(window).scroll(function(){$(window).scrollTop()>=46?$("header").addClass("fixed-header"):$("header").removeClass("fixed-header");$(window).scrollTop()>1?$(".blocoHeader").addClass("stuckbr"):$(".blocoHeader").removeClass("stuckbr");var n=$(this).scrollTop();n>previousScroll?$(".header_gps").hide():$(".header_gps").show();previousScroll=n});$(".panel-group").on("hidden.bs.collapse",toggleIcon);$(".panel-group").on("shown.bs.collapse",toggleIcon);$(window).scrollTop()>1?$(".blocoHeader").addClass("stuckbr"):$(".blocoHeader").removeClass("stuckbr");$("body").addClass("cookies");t=$(".pushmenu-left");$("#nav_list").click(function(){$(".pushmenu-push").toggleClass("pushmenu-push-toright");t.toggleClass("pushmenu-open");in_version!="mobile"&&$(this).toggleClass("active")});$("#nav_list1").click(function(){$(".pushmenu-push").toggleClass("pushmenu-push-toright");t.toggleClass("pushmenu-open");in_version!="mobile"&&$(this).toggleClass("active")});navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&$("body").css("-webkit-text-stroke","0.1px");$(".modal").on("show.bs.modal",reposition);$(window).on("resize",function(){$(".modal:visible").each(reposition)});if($("#myCarousel").length>0){n=!1;$("#myCarousel").carousel({interval:4e3}).on("click",".list-group li",function(){n=!0;$(".list-group li").removeClass("active");$(this).addClass("active")}).on("slid.bs.carousel",function(){var i,t,r;n||(i=$(".list-group").children().length-1,t=$(".list-group li.active"),t.removeClass("active").next().addClass("active"),r=parseInt(t.data("slide-to")),i==r&&$(".list-group li").first().addClass("active"));n=!1})}$(".sabermais").length>0&&$(".sabermais").click(function(){$(".sabermais").parent().removeClass("assinaturaselect");$(this).attr("aria-expanded","true")?$(this).parent().addClass("assinaturaselect"):$(this).parent().removeClass("assinaturaselect")});$(".AssinManchete").length>0&&$(".AssinManchete").slick({lazyLoad:"ondemand",slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!1,fade:!0,infinite:!0,autoplay:!0,autoplaySpeed:2e3,adaptiveHeight:!1,asNavFor:".assinaNav",responsive:[{breakpoint:992,settings:{adaptiveHeight:!0}},{breakpoint:767,settings:{adaptiveHeight:!0,autoplay:!1}}]});$(".assinaNav").length>0&&$(".assinaNav").slick({slidesToShow:3,slidesToScroll:1,asNavFor:".AssinManchete",dots:!1,arrows:!1,centerMode:!1,infinite:!0,rows:1,slidesPerRow:3,vertical:!0,focusOnSelect:!0,responsive:[{breakpoint:1200,settings:{rows:1,slidesPerRow:3,vertical:!0}},{breakpoint:992,settings:{vertical:!1,rows:1,slidesPerRow:3}},{breakpoint:767,settings:{vertical:!1,rows:1,slidesPerRow:3,autoplay:!1}}]});$(".brindescampanhas").length>0&&$(".brindescampanhas").slick({infinite:!0,autoplay:!0,autoplaySpeed:2e3,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!1,dots:!0,arrows:!1,fade:!0,cssEase:"linear"})});$(document).on("click",".icon-lupa",function(){$(".pesquisa_hidden").fadeIn()});$(document).on("click",".fechar_pesquisa",function(){$(".pesquisa_hidden").fadeOut()});$(document).on("click",".btClose_cookies",function(){$(".cookiesBox").slideToggle();$("body").removeClass("cookies")});$(window).on("load",function(){var n=$("#myCarousel .carousel-inner").innerHeight(),t=$("#myCarousel .item").length,i=Math.round(n/t+1);$("#myCarousel .list-group-item").outerHeight(i)});$("#selectMenu").length>0&&(document.getElementById("selectMenu").onchange=function(){this.selectedIndex!==0&&(window.location.href=this.value)});$(window).scroll(function(){$(this).scrollTop()>46?$("body").addClass("scrollingPage"):$("body").removeClass("scrollingPage")});$(document).ready(function(){$(".b-lazy").length>0&&(bLazy=new Blazy({offset:500,breakpoints:[{width:767,src:"data-src-m"},{width:991,src:"data-src-t"}]}))});var COFPushNotifications={_reg:null,appState:{touched:!1,uid:!1,_setUid:function(){COFPushNotifications.appState.uid=COFPushNotifications.createGuid()},_lastUid:!1},config:{LABEL_ACTION_ID:"",TEXT_CONTAINER_ID:"",NOTIFICATION_BLOCK_ID:"",CONFIRM_BUTTON_ID:"",CANCEL_BUTTON_ID:"",ICON_URL:"",BADGE_URL:"",MESSAGE_TITLE:"",HAS_POPUP_REGISTRATION:!0,FULL_SITE_SUBSCRIPTION:!1,SITE_BASE_URL:null,VAPID_PUBLIC_KEY:null,SUBSCRIBE_CALLBACK:null,UNSUBSCRIBE_CALLBACK:null,SITE_PUSHNOTIFICATIONS_COOKIE:"SitePushNotifications",WARNING_PUSHNOTIFICATIONS_COOKIE:"PushWarning",SITE_PUSHNOTIFICATIONS_VAPID_COOKIE:"PushNotificationsv2",SSO_LOGIN_TOKEN_COOKIE:"cof_site_user",DEBUG:!0,environment:function(){if(null!==this._environment)return this._environment;var n="PROD",t=window.location.hostname;return-1<t.indexOf(".stg.")?n="STG":(-1<t.indexOf(".local.")||-1<t.indexOf("localhost"))&&(n="DEV"),"PROD"===n&&(COFPushNotifications.config.DEBUG=!1),this._environment=n},_environment:null,_sitePushNotificationsValue:null,_sitePushNotificationsVapidValue:null,_warningPushNotificationsValue:null},isDebuggable:function(){var n=!1;return COFPushNotifications.config.DEBUG&&"PROD"!==COFPushNotifications.config.environment()&&(n=!0),this._isDebuggable=n},_isDebuggable:null,addConfigs:function(n){if("object"==typeof n)for(var t in n)this.config[t]=n[t];COFPushNotifications.appState.touched=!0;"PROD"==COFPushNotifications.config.environment()&&(COFPushNotifications.config.DEBUG=!1,null!==COFPushNotifications.config.SITE_BASE_URL.STG&&console.error("O valor SITE_BASE_URL.STG não deve estar configurado para aplicações em produção. Por favor remova."),null!==COFPushNotifications.config.SITE_BASE_URL.DEV&&console.error("O valor SITE_BASE_URL.DEV não deve estar configurado para aplicações em produção. Por favor remova."))},content:{info:"Faz load das variáveis necessárias",PRIMARY_AREA_NAME:"HOMEPAGE",where:function(){if(null!==COFPushNotifications.content._where&&!1!==COFPushNotifications.appState.touched)return COFPushNotifications.content._where;var n="HOMEPAGE";return void 0!==COFPushNotifications.content.areaId&&void 0===COFPushNotifications.content.contentID&&"HOMEPAGE"!==COFPushNotifications.content.areaName?n="CANAL":void 0!==COFPushNotifications.content.contentID&&""!==COFPushNotifications.content.contentID&&(n="DETALHE"),COFPushNotifications.content._where=n},_where:null,getAndSetValues:function(){COFPushNotifications.config._sitePushNotificationsValue=COFPushNotifications.cookies.get(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_COOKIE,!0);COFPushNotifications.config._sitePushNotificationsVapidValue=COFPushNotifications.cookies.get(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_VAPID_COOKIE,!0);COFPushNotifications.config._warningPushNotificationsValue=COFPushNotifications.cookies.get(COFPushNotifications.config.WARNING_PUSHNOTIFICATIONS_COOKIE,!0);COFPushNotifications.config._sitePushNotificationsValue=null!=COFPushNotifications.config._sitePushNotificationsValue?COFPushNotifications.config._sitePushNotificationsValue.toLowerCase():null;COFPushNotifications.config._sitePushNotificationsVapidValue=null!=COFPushNotifications.config._sitePushNotificationsVapidValue?COFPushNotifications.config._sitePushNotificationsVapidValue.toLowerCase():null;COFPushNotifications.config._warningPushNotificationsValue=null!=COFPushNotifications.config._warningPushNotificationsValue?COFPushNotifications.config._warningPushNotificationsValue.toLowerCase():null;"undefined"!=typeof $_fields&&(COFPushNotifications.content.areaId=$_fields.AreaID,COFPushNotifications.content.areaName=$_fields.AreaName,COFPushNotifications.content.contentID=$_fields.ContentID)}},cookies:{get:function(n,t){for(var i,r="",f=n+"=",e=document.cookie.split(";"),u=0;u<e.length;u++){for(i=e[u];" "==i.charAt(0);)i=i.substring(1,i.length);0==i.indexOf(f)&&(r=i.substring(f.length,i.length))}return!t||COFPushNotifications.validate.isNullOrEmpty(r)||COFPushNotifications.validate.isNullOrEmpty(r)?t||COFPushNotifications.validate.isNullOrEmpty(r)?null:r:decodeURIComponent(r).replace(new RegExp(/\+/g)," ")},getPreferingLocalStorage:function(n,t){if(!window.localStorage)return COFPushNotifications.cookies.get(n,t);var i=window.localStorage.getItem(n);return t&&!COFPushNotifications.validate.isNullOrEmpty(i)?decodeURIComponent(i).replace(new RegExp(/\+/g)," "):t||COFPushNotifications.validate.isNullOrEmpty(i)?null:i},set:function(n,t,i,r){var f="",u=new Date;f=i?null!=i?(u.setTime(u.getTime()+864e5*i),"; expires="+u.toGMTString()):";":r?null!=r?(u.setTime(u.getTime()+6e4*r),"; expires="+u.toGMTString()):";":"";document.cookie=n+"="+t+f+"; path=/"},setPreferingLocalStorage:function(n,t,i,r){if(!window.localStorage)return COFPushNotifications.cookies.set(n,t,i,r);localStorage.setItem(n,t)}},validate:{isNullOrEmpty:function(n){return void 0===n||null==n||"undefined"==n||""==n},isValidBrowser:function(){return-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&navigator.userAgent.toLowerCase().indexOf("edge")<0},isValidSubscription:function(n){var t=JSON.parse(n);return!COFPushNotifications.validate.isNullOrEmpty(t.keys)}},utils:{getSubscription:function(){return navigator.serviceWorker.ready.then(function(n){return n.pushManager.getSubscription()})},urlBase64ToUint8Array:function(n){for(var u=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(u),r=new Uint8Array(i.length),t=0;t<i.length;++t)r[t]=i.charCodeAt(t);return r},getLoggedUserToken:function(){return COFPushNotifications.cookies.get(COFPushNotifications.config.SSO_LOGIN_TOKEN_COOKIE)}},check:function(){COFPushNotifications.validate.isValidBrowser()?"HOMEPAGE"===COFPushNotifications.content.where()||COFPushNotifications.config.FULL_SITE_SUBSCRIPTION?"true"!==COFPushNotifications.config._warningPushNotificationsValue||"true"===COFPushNotifications.config._warningPushNotificationsValue&&"true"===COFPushNotifications.config._sitePushNotificationsVapidValue?COFPushNotifications.utils.getSubscription().then(function(n){n?"true"!==COFPushNotifications.config._sitePushNotificationsVapidValue?COFPushNotifications.resubscribe():COFPushNotifications.config.HAS_POPUP_REGISTRATION?($(COFPushNotifications.config.LABEL_ACTION_ID).addClass("pushnotificationsfixed"),$(COFPushNotifications.config.LABEL_ACTION_ID).attr("data-action","unsubscribe"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Remover notificações"),$(COFPushNotifications.config.LABEL_ACTION_ID).show()):($(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Deseja remover notificações"),$(COFPushNotifications.config.CANCEL_BUTTON_ID).attr("data-action","unsubscribe"),$(COFPushNotifications.config.CONFIRM_BUTTON_ID).attr("data-action","unsubscribe")):"true"!==COFPushNotifications.config._sitePushNotificationsVapidValue&&"true"!==COFPushNotifications.config._sitePushNotificationsValue?(setTimeout(function(){$(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).show()},2e3),COFPushNotifications.config.HAS_POPUP_REGISTRATION&&($(COFPushNotifications.config.LABEL_ACTION_ID).addClass("pushnotificationsfixed"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Subscrever notificações"),$(COFPushNotifications.config.LABEL_ACTION_ID).attr("data-action","subscribe"))):COFPushNotifications.subscribe(!1)}):COFPushNotifications.config.HAS_POPUP_REGISTRATION&&($(COFPushNotifications.config.LABEL_ACTION_ID).addClass("pushnotificationsfixed"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Subscrever notificações"),$(COFPushNotifications.config.LABEL_ACTION_ID).attr("data-action","subscribe"),$(COFPushNotifications.config.LABEL_ACTION_ID).show()):(COFPushNotifications.config.HAS_POPUP_REGISTRATION&&$(COFPushNotifications.config.LABEL_ACTION_ID).remove(),$(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).remove(),"true"!==COFPushNotifications.config._sitePushNotificationsValue&&"true"!==COFPushNotifications.config._sitePushNotificationsVapidValue||COFPushNotifications.utils.getSubscription().then(function(n){n?"true"!==COFPushNotifications.config._sitePushNotificationsVapidValue&&COFPushNotifications.resubscribe():COFPushNotifications.subscribe(!1)})):(COFPushNotifications.config.HAS_POPUP_REGISTRATION&&$(COFPushNotifications.config.LABEL_ACTION_ID).remove(),$(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).remove())},bindEvents:function(){COFPushNotifications.config.HAS_POPUP_REGISTRATION&&($(document).on("mouseenter",COFPushNotifications.config.LABEL_ACTION_ID,function(){$(COFPushNotifications.config.TEXT_CONTAINER_ID).fadeIn()}),$(document).on("mouseleave",COFPushNotifications.config.LABEL_ACTION_ID,function(){$(COFPushNotifications.config.TEXT_CONTAINER_ID).fadeOut()}),$(document).on("click",COFPushNotifications.config.LABEL_ACTION_ID,function(){var n=$(COFPushNotifications.config.LABEL_ACTION_ID).attr("data-action");"subscribe"==n?COFPushNotifications.subscribe(!0):"unsubscribe"==n&&COFPushNotifications.unsubscribe()}));$(document).on("click",COFPushNotifications.config.CONFIRM_BUTTON_ID,function(){COFPushNotifications.config.HAS_POPUP_REGISTRATION?($(".notificacao").remove(),COFPushNotifications.subscribe(!0)):($(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).removeClass("notificacaoBloqueada"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Deseja receber notificações"),"subscribe"==$(this).attr("data-action")?COFPushNotifications.subscribe(!0):"unsubscribe"==$(this).attr("data-action")&&COFPushNotifications.unsubscribe())});$(document).on("click",COFPushNotifications.config.CANCEL_BUTTON_ID,function(){COFPushNotifications.config.HAS_POPUP_REGISTRATION&&$(COFPushNotifications.config.LABEL_ACTION_ID).show();(COFPushNotifications.config.HAS_POPUP_REGISTRATION||"subscribe"==$(this).attr("data-action"))&&$(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).remove();COFPushNotifications.cookies.set(COFPushNotifications.config.WARNING_PUSHNOTIFICATIONS_COOKIE,"true",1)})},subscribe:function(n){null==n&&(n=!0);var t=COFPushNotifications.utils.urlBase64ToUint8Array(COFPushNotifications.config.VAPID_PUBLIC_KEY);COFPushNotifications._reg.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t}).then(function(t){var r=JSON.stringify(t),i;!COFPushNotifications.validate.isNullOrEmpty(r)&&COFPushNotifications.validate.isValidSubscription(r)&&(i=COFPushNotifications.utils.getLoggedUserToken(),null===i&&(i=""),fetch("/PushNotifications/Register",{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"vapidKey="+r+"&loginToken="+i}).then(function(t){"OK"===t.statusText?(Notification.requestPermission(function(t){"granted"===t&&navigator.serviceWorker.ready.then(function(t){n&&t.showNotification(COFPushNotifications.config.MESSAGE_TITLE,{body:"Obrigado pela sua subscrição",icon:COFPushNotifications.config.ICON_URL,badge:COFPushNotifications.config.ICON_URL})})}),null!==COFPushNotifications.config.SUBSCRIBE_CALLBACK&&COFPushNotifications.config.SUBSCRIBE_CALLBACK instanceof Function&&COFPushNotifications.config.SUBSCRIBE_CALLBACK(),COFPushNotifications.cookies.set(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_VAPID_COOKIE,"true",2038),COFPushNotifications.config.HAS_POPUP_REGISTRATION?($(COFPushNotifications.config.LABEL_ACTION_ID).addClass("pushnotificationsfixed"),$(COFPushNotifications.config.LABEL_ACTION_ID).attr("data-action","unsubscribe"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Remover notificações"),$(COFPushNotifications.config.LABEL_ACTION_ID).show()):($(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).hide(),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Deseja remover notificações"),$(COFPushNotifications.config.CANCEL_BUTTON_ID).attr("data-action","unsubscribe"),$(COFPushNotifications.config.CONFIRM_BUTTON_ID).attr("data-action","unsubscribe"))):COFPushNotifications.config.HAS_POPUP_REGISTRATION||$(COFPushNotifications.config.TEXT_CONTAINER_ID).html("<span class='titulo'>Erro ao remover subscrição. Tente novamente<\/span>")}))})},unsubscribe:function(){COFPushNotifications._reg.pushManager.getSubscription().then(function(n){if(null!=n)return n.unsubscribe().then(function(){var t=n.endpoint;fetch("/PushNotifications/Unregister",{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"registrationID="+t}).then(function(n){"OK"===n.statusText?(null!==COFPushNotifications.config.UNSUBSCRIBE_CALLBACK&&COFPushNotifications.config.UNSUBSCRIBE_CALLBACK instanceof Function&&COFPushNotifications.config.UNSUBSCRIBE_CALLBACK(),COFPushNotifications.cookies.set(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_COOKIE,"",-1),COFPushNotifications.cookies.set(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_VAPID_COOKIE,"",-1),COFPushNotifications.config.HAS_POPUP_REGISTRATION?($(COFPushNotifications.config.LABEL_ACTION_ID).addClass("pushnotificationsfixed").attr("data-action","subscribe"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Subscrever notificações"),$(COFPushNotifications.config.LABEL_ACTION_ID).show()):($(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).hide(),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Subscrever notificações"),$(COFPushNotifications.config.CANCEL_BUTTON_ID).attr("data-action","subscribe"),$(COFPushNotifications.config.CONFIRM_BUTTON_ID).attr("data-action","subscribe"))):COFPushNotifications.config.HAS_POPUP_REGISTRATION||$(COFPushNotifications.config.TEXT_CONTAINER_ID).html("<span class='titulo'>Erro ao remover subscrição. Tente novamente<\/span>")})})})},resubscribe:function(){COFPushNotifications._reg.pushManager.getSubscription().then(function(n){if(null!=n)return n.unsubscribe().then(function(){var t=n.endpoint.slice(n.endpoint.lastIndexOf("/")+1);fetch("/PushNotifications/Unregister",{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"registrationID="+t}).then(function(){COFPushNotifications.cookies.set(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_COOKIE,"",-1);COFPushNotifications.cookies.set("PushNotifications","",-1);COFPushNotifications.subscribe(!1)})});COFPushNotifications.subscribe(!1)})}},initCOFPushNotifications={init:function(n){COFPushNotifications._reg=n;COFPushNotifications.content.getAndSetValues();COFPushNotifications.check();COFPushNotifications.bindEvents()}},COFPushNotifications={_reg:null,appState:{touched:!1,uid:!1,_setUid:function(){COFPushNotifications.appState.uid=COFPushNotifications.createGuid()},_lastUid:!1},config:{LABEL_ACTION_ID:"",TEXT_CONTAINER_ID:"",NOTIFICATION_BLOCK_ID:"",CONFIRM_BUTTON_ID:"",CANCEL_BUTTON_ID:"",ICON_URL:"",BADGE_URL:"",MESSAGE_TITLE:"",HAS_POPUP_REGISTRATION:!0,FULL_SITE_SUBSCRIPTION:!1,SITE_BASE_URL:null,VAPID_PUBLIC_KEY:null,SUBSCRIBE_CALLBACK:null,UNSUBSCRIBE_CALLBACK:null,SITE_PUSHNOTIFICATIONS_COOKIE:"SitePushNotifications",WARNING_PUSHNOTIFICATIONS_COOKIE:"PushWarning",SITE_PUSHNOTIFICATIONS_VAPID_COOKIE:"PushNotificationsv2",SSO_LOGIN_TOKEN_COOKIE:"cof_site_user",DEBUG:!0,environment:function(){if(null!==this._environment)return this._environment;var n="PROD",t=window.location.hostname;return-1<t.indexOf(".stg.")?n="STG":(-1<t.indexOf(".local.")||-1<t.indexOf("localhost"))&&(n="DEV"),"PROD"===n&&(COFPushNotifications.config.DEBUG=!1),this._environment=n},_environment:null,_sitePushNotificationsValue:null,_sitePushNotificationsVapidValue:null,_warningPushNotificationsValue:null},isDebuggable:function(){var n=!1;return COFPushNotifications.config.DEBUG&&"PROD"!==COFPushNotifications.config.environment()&&(n=!0),this._isDebuggable=n},_isDebuggable:null,addConfigs:function(n){if("object"==typeof n)for(var t in n)this.config[t]=n[t];COFPushNotifications.appState.touched=!0;"PROD"==COFPushNotifications.config.environment()&&(COFPushNotifications.config.DEBUG=!1,null!=COFPushNotifications.config.SITE_BASE_URL.STG&&console.error("O valor SITE_BASE_URL.STG não deve estar configurado para aplicações em produção. Por favor remova."),null!=COFPushNotifications.config.SITE_BASE_URL.DEV&&console.error("O valor SITE_BASE_URL.DEV não deve estar configurado para aplicações em produção. Por favor remova."))},content:{info:"Faz load das variáveis necessárias",PRIMARY_AREA_NAME:"HOMEPAGE",where:function(){if(null!==COFPushNotifications.content._where&&!1!==COFPushNotifications.appState.touched)return COFPushNotifications.content._where;var n="HOMEPAGE";return void 0!==COFPushNotifications.content.areaId&&void 0===COFPushNotifications.content.contentID&&"HOMEPAGE"!==COFPushNotifications.content.areaName?n="CANAL":void 0!==COFPushNotifications.content.contentID&&""!==COFPushNotifications.content.contentID&&(n="DETALHE"),COFPushNotifications.content._where=n},_where:null,getAndSetValues:function(){COFPushNotifications.config._sitePushNotificationsValue=COFPushNotifications.cookies.get(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_COOKIE,!0);COFPushNotifications.config._sitePushNotificationsVapidValue=COFPushNotifications.cookies.get(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_VAPID_COOKIE,!0);COFPushNotifications.config._warningPushNotificationsValue=COFPushNotifications.cookies.get(COFPushNotifications.config.WARNING_PUSHNOTIFICATIONS_COOKIE,!0);COFPushNotifications.config._sitePushNotificationsValue=null!=COFPushNotifications.config._sitePushNotificationsValue?COFPushNotifications.config._sitePushNotificationsValue.toLowerCase():null;COFPushNotifications.config._sitePushNotificationsVapidValue=null!=COFPushNotifications.config._sitePushNotificationsVapidValue?COFPushNotifications.config._sitePushNotificationsVapidValue.toLowerCase():null;COFPushNotifications.config._warningPushNotificationsValue=null!=COFPushNotifications.config._warningPushNotificationsValue?COFPushNotifications.config._warningPushNotificationsValue.toLowerCase():null;"undefined"!=typeof $_fields&&(COFPushNotifications.content.areaId=$_fields.AreaID,COFPushNotifications.content.areaName=$_fields.AreaName,COFPushNotifications.content.contentID=$_fields.ContentID)}},cookies:{get:function(n,t){for(var i,r="",f=n+"=",e=document.cookie.split(";"),u=0;u<e.length;u++){for(i=e[u];" "==i.charAt(0);)i=i.substring(1,i.length);0==i.indexOf(f)&&(r=i.substring(f.length,i.length))}return!t||COFPushNotifications.validate.isNullOrEmpty(r)||COFPushNotifications.validate.isNullOrEmpty(r)?t||COFPushNotifications.validate.isNullOrEmpty(r)?null:r:decodeURIComponent(r).replace(new RegExp(/\+/g)," ")},getPreferingLocalStorage:function(n,t){if(!window.localStorage)return COFPushNotifications.cookies.get(n,t);var i=window.localStorage.getItem(n);return t&&!COFPushNotifications.validate.isNullOrEmpty(i)?decodeURIComponent(i).replace(new RegExp(/\+/g)," "):t||COFPushNotifications.validate.isNullOrEmpty(i)?null:i},set:function(n,t,i,r){var f="",u=new Date;f=i?null!=i?(u.setTime(u.getTime()+864e5*i),"; expires="+u.toGMTString()):";":r?null!=r?(u.setTime(u.getTime()+6e4*r),"; expires="+u.toGMTString()):";":"";document.cookie=n+"="+t+f+"; path=/"},setPreferingLocalStorage:function(n,t,i,r){if(!window.localStorage)return COFPushNotifications.cookies.set(n,t,i,r);localStorage.setItem(n,t)}},validate:{isNullOrEmpty:function(n){return void 0===n||null==n||"undefined"==n||""==n},isValidBrowser:function(){return-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&navigator.userAgent.toLowerCase().indexOf("edge")<0},isValidSubscription:function(n){var t=JSON.parse(n);return!COFPushNotifications.validate.isNullOrEmpty(t.keys)}},utils:{getSubscription:function(){return navigator.serviceWorker.ready.then(function(n){return n.pushManager.getSubscription()})},urlBase64ToUint8Array:function(n){for(var u=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(u),r=new Uint8Array(i.length),t=0;t<i.length;++t)r[t]=i.charCodeAt(t);return r},getLoggedUserToken:function(){return COFPushNotifications.cookies.get(COFPushNotifications.config.SSO_LOGIN_TOKEN_COOKIE)}},check:function(){COFPushNotifications.validate.isValidBrowser()?"HOMEPAGE"===COFPushNotifications.content.where()||COFPushNotifications.config.FULL_SITE_SUBSCRIPTION?"true"!==COFPushNotifications.config._warningPushNotificationsValue||"true"===COFPushNotifications.config._warningPushNotificationsValue&&"true"===COFPushNotifications.config._sitePushNotificationsVapidValue?COFPushNotifications.utils.getSubscription().then(function(n){n?"true"!==COFPushNotifications.config._sitePushNotificationsVapidValue?COFPushNotifications.resubscribe():COFPushNotifications.config.HAS_POPUP_REGISTRATION?($(COFPushNotifications.config.LABEL_ACTION_ID).addClass("pushnotificationsfixed"),$(COFPushNotifications.config.LABEL_ACTION_ID).attr("data-action","unsubscribe"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Remover notificações"),$(COFPushNotifications.config.LABEL_ACTION_ID).show()):($(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Deseja remover notificações"),$(COFPushNotifications.config.CANCEL_BUTTON_ID).attr("data-action","unsubscribe"),$(COFPushNotifications.config.CONFIRM_BUTTON_ID).attr("data-action","unsubscribe")):"true"!==COFPushNotifications.config._sitePushNotificationsVapidValue&&"true"!==COFPushNotifications.config._sitePushNotificationsValue?(setTimeout(function(){$(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).show()},2e3),COFPushNotifications.config.HAS_POPUP_REGISTRATION&&($(COFPushNotifications.config.LABEL_ACTION_ID).addClass("pushnotificationsfixed"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Subscrever notificações"),$(COFPushNotifications.config.LABEL_ACTION_ID).attr("data-action","subscribe"))):COFPushNotifications.subscribe(!1)}):COFPushNotifications.config.HAS_POPUP_REGISTRATION&&($(COFPushNotifications.config.LABEL_ACTION_ID).addClass("pushnotificationsfixed"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Subscrever notificações"),$(COFPushNotifications.config.LABEL_ACTION_ID).attr("data-action","subscribe"),$(COFPushNotifications.config.LABEL_ACTION_ID).show()):(COFPushNotifications.config.HAS_POPUP_REGISTRATION&&$(COFPushNotifications.config.LABEL_ACTION_ID).remove(),$(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).remove(),"true"!==COFPushNotifications.config._sitePushNotificationsValue&&"true"!==COFPushNotifications.config._sitePushNotificationsVapidValue||COFPushNotifications.utils.getSubscription().then(function(n){n?"true"!==COFPushNotifications.config._sitePushNotificationsVapidValue&&COFPushNotifications.resubscribe():COFPushNotifications.subscribe(!1)})):(COFPushNotifications.config.HAS_POPUP_REGISTRATION&&$(COFPushNotifications.config.LABEL_ACTION_ID).remove(),$(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).remove())},bindEvents:function(){COFPushNotifications.config.HAS_POPUP_REGISTRATION&&($(document).on("mouseenter",COFPushNotifications.config.LABEL_ACTION_ID,function(){$(COFPushNotifications.config.TEXT_CONTAINER_ID).fadeIn()}),$(document).on("mouseleave",COFPushNotifications.config.LABEL_ACTION_ID,function(){$(COFPushNotifications.config.TEXT_CONTAINER_ID).fadeOut()}),$(document).on("click",COFPushNotifications.config.LABEL_ACTION_ID,function(){var n=$(COFPushNotifications.config.LABEL_ACTION_ID).attr("data-action");"subscribe"==n?COFPushNotifications.subscribe(!0):"unsubscribe"==n&&COFPushNotifications.unsubscribe()}));$(document).on("click",COFPushNotifications.config.CONFIRM_BUTTON_ID,function(){COFPushNotifications.config.HAS_POPUP_REGISTRATION?($(".notificacao").remove(),COFPushNotifications.subscribe(!0)):($(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).removeClass("notificacaoBloqueada"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Deseja receber notificações"),"subscribe"==$(this).attr("data-action")?COFPushNotifications.subscribe(!0):"unsubscribe"==$(this).attr("data-action")&&COFPushNotifications.unsubscribe())});$(document).on("click",COFPushNotifications.config.CANCEL_BUTTON_ID,function(){COFPushNotifications.config.HAS_POPUP_REGISTRATION&&$(COFPushNotifications.config.LABEL_ACTION_ID).show();(COFPushNotifications.config.HAS_POPUP_REGISTRATION||"subscribe"==$(this).attr("data-action"))&&$(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).remove();COFPushNotifications.cookies.set(COFPushNotifications.config.WARNING_PUSHNOTIFICATIONS_COOKIE,"true",1)})},subscribe:function(n){null==n&&(n=!0);var t=COFPushNotifications.utils.urlBase64ToUint8Array(COFPushNotifications.config.VAPID_PUBLIC_KEY);COFPushNotifications._reg.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t}).then(function(t){var r=JSON.stringify(t),i;!COFPushNotifications.validate.isNullOrEmpty(r)&&COFPushNotifications.validate.isValidSubscription(r)&&(i=COFPushNotifications.utils.getLoggedUserToken(),null===i&&(i=""),fetch("/PushNotifications/Register",{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"vapidKey="+r+"&loginToken="+i}).then(function(t){"OK"===t.statusText?(Notification.requestPermission(function(t){"granted"===t&&navigator.serviceWorker.ready.then(function(t){n&&t.showNotification(COFPushNotifications.config.MESSAGE_TITLE,{body:"Obrigado pela sua subscrição",icon:COFPushNotifications.config.ICON_URL,badge:COFPushNotifications.config.ICON_URL})})}),null!==COFPushNotifications.config.SUBSCRIBE_CALLBACK&&COFPushNotifications.config.SUBSCRIBE_CALLBACK instanceof Function&&COFPushNotifications.config.SUBSCRIBE_CALLBACK(),COFPushNotifications.cookies.set(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_VAPID_COOKIE,"true",2038),COFPushNotifications.config.HAS_POPUP_REGISTRATION?($(COFPushNotifications.config.LABEL_ACTION_ID).addClass("pushnotificationsfixed"),$(COFPushNotifications.config.LABEL_ACTION_ID).attr("data-action","unsubscribe"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Remover notificações"),$(COFPushNotifications.config.LABEL_ACTION_ID).show()):($(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).hide(),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Deseja remover notificações"),$(COFPushNotifications.config.CANCEL_BUTTON_ID).attr("data-action","unsubscribe"),$(COFPushNotifications.config.CONFIRM_BUTTON_ID).attr("data-action","unsubscribe"))):COFPushNotifications.config.HAS_POPUP_REGISTRATION||$(COFPushNotifications.config.TEXT_CONTAINER_ID).html("<span class='titulo'>Erro ao remover subscrição. Tente novamente<\/span>")}))})},unsubscribe:function(){COFPushNotifications._reg.pushManager.getSubscription().then(function(n){if(null!=n)return n.unsubscribe().then(function(){var t=n.endpoint;fetch("/PushNotifications/Unregister",{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"registrationID="+t}).then(function(n){"OK"===n.statusText?(null!==COFPushNotifications.config.UNSUBSCRIBE_CALLBACK&&COFPushNotifications.config.UNSUBSCRIBE_CALLBACK instanceof Function&&COFPushNotifications.config.UNSUBSCRIBE_CALLBACK(),COFPushNotifications.cookies.set(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_COOKIE,"",-1),COFPushNotifications.cookies.set(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_VAPID_COOKIE,"",-1),COFPushNotifications.config.HAS_POPUP_REGISTRATION?($(COFPushNotifications.config.LABEL_ACTION_ID).addClass("pushnotificationsfixed").attr("data-action","subscribe"),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Subscrever notificações"),$(COFPushNotifications.config.LABEL_ACTION_ID).show()):($(COFPushNotifications.config.NOTIFICATION_BLOCK_ID).hide(),$(COFPushNotifications.config.TEXT_CONTAINER_ID).text("Subscrever notificações"),$(COFPushNotifications.config.CANCEL_BUTTON_ID).attr("data-action","subscribe"),$(COFPushNotifications.config.CONFIRM_BUTTON_ID).attr("data-action","subscribe"))):COFPushNotifications.config.HAS_POPUP_REGISTRATION||$(COFPushNotifications.config.TEXT_CONTAINER_ID).html("<span class='titulo'>Erro ao remover subscrição. Tente novamente<\/span>")})})})},resubscribe:function(){COFPushNotifications._reg.pushManager.getSubscription().then(function(n){if(null!=n)return n.unsubscribe().then(function(){var t=n.endpoint.slice(n.endpoint.lastIndexOf("/")+1);fetch("/PushNotifications/Unregister",{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"registrationID="+t}).then(function(){COFPushNotifications.cookies.set(COFPushNotifications.config.SITE_PUSHNOTIFICATIONS_COOKIE,"",-1);COFPushNotifications.cookies.set("PushNotifications","",-1);COFPushNotifications.subscribe(!1)})});COFPushNotifications.subscribe(!1)})}},initCOFPushNotifications={init:function(n){COFPushNotifications._reg=n;COFPushNotifications.content.getAndSetValues();COFPushNotifications.check();COFPushNotifications.bindEvents()}};COF.addConfigs({IMG_LOADING:"/i/ajax-loader.gif",COOKIE_SSO:"userInfoSSO",CONTAGENS:!0,DEBUG:!0,VIDEO_TEST_URL:"https://www.sabado.pt"});COF.config.SITE_BASE_URL.PROD="https://www.sabado.pt";COF.content.getAndSetValues();COF.loading=function(n){n.hasClass("loading_")?(n.html(""),n.removeClass("loading_")):(n.html('<div class="loading_bubblingG"> <span id="bubblingG_1"> <\/span> <span id="bubblingG_2"> <\/span> <span id="bubblingG_3"> <\/span> <\/div>'),n.addClass("loading_"))};COF.addConfigs({DEBUG:!0});COF.content.getAndSetValues();COF.config.AjaxContainers={};share=function(){function i(t,i,r){n.SetValues(t);typeof n.url!="undefined"&&(typeof n.local!="undefined"?COF.contagens.EventOnGoogleAnalytics("social",i,"share",n.url,n.local):COF.contagens.EventOnGoogleAnalytics("social",i,"share",n.url),typeof r=="function"&&r(),n.setHits!="0"&&COF.config.CONTAGENS===!0&&COF.contagens.HitAndShare(n.contentID,n.areaID,n.contentType,"",i,n.url))}function a(n){var t="&";return n.indexOf("http")==-1&&(n.indexOf("/")>0&&(n="/"+n),n=window.location.origin+n,n.indexOf("?")==-1&&(t="?"),n=n+t),n}var t={FACEBOOK:{binder:".share_facebook, .facebook",utm:""},TWITTER:{binder:".share_twitter, .twitter",utm:"utm_medium=Social&utm_source=Twitter&utm_campaign=BotoesSite&utm_content=twitter"},GOOGLE_PLUS:{binder:".share_google, .google",utm:"utm_medium=Social&utm_source=GooglePlus&utm_campaign=BotoesSite&utm_content=googleplus"},WHATSAPP:{binder:".share_whatsapp, .phone",utm:"utm_medium=Social&utm_source=Whatsapp&utm_campaign=BotoesSite&utm_content=whatsapp"},LINKEDIN:{binder:".share_linkedin, .linkedin, .Infli",utm:"utm_medium=Social&utm_source=LinkedIn&utm_campaign=BotoesSite&utm_content=linkedin"},PINTREST:{binder:".Infpin"}},n={url:"",local:"",setHits:"",contentID:0,contentType:"Articles",areaID:0,text:"",media:""},u=function(){$(document).on("click",t.FACEBOOK.binder,function(){n.SetValues($(this));i($(this),"facebook",function(){var i=n.url+t.FACEBOOK.utm;COF.social.facebookShare(i)})})},f=function(){$(document).on("click",t.TWITTER.binder,function(){i($(this),"twitter",function(){COF.social.config.providers.TWITTER.screenName="revistasabado";var i=n.url+t.TWITTER.utm;COF.social.twitterShare(i)})})},r=function(){$(document).on("click",t.PINTREST.binder,function(){i($(this),"pintrest",function(){typeof n.url!="undefined"&&n.media!=""&&COF.social.pintRestShare(n.url,n.media)})})},e=function(){$(document).on("click",t.WHATSAPP.binder,function(){i($(this),"whatsapp",function(){var i=n.url+t.WHATSAPP.utm;COF.social.whatsApp(i)})})},o=function(){$(document).on("click",t.GOOGLE_PLUS.binder,function(){i($(this),"googleplus",function(){var i=n.url+t.GOOGLE_PLUS.utm;COF.social.googlePlus(i)})})},s=function(){$(document).on("click",t.LINKEDIN.binder,function(){i($(this),"linkedin",function(){var i=n.url+t.LINKEDIN.utm;COF.social.linkedInShare(i)})})},h=function(){$(document).on("click",".socialShare .email , .socialShareScroll .email, #shareThisModal .email",function(){n.SetValues($(this));typeof n.local!="undefined"?COF.contagens.EventOnGoogleAnalytics("event","User","Enviar Noticia",n.local):typeof n.url!="undefined"&&COF.contagens.EventOnGoogleAnalytics("nao-social","email","send",n.url)})},c=function(){$(document).on("click",".imprimir a",function(){var n,t;window.print();n=$(this).attr("data-url");n=a(n);t=$(this).attr("data-local");typeof t!="undefined"?COF.contagens.EventOnGoogleAnalytics("event","User","Imprimir Noticia",t):COF.contagens.EventOnGoogleAnalytics("nao-social","imprimirnot","print",n)})},l=function(){$(document).on("click",".commentsBtn",function(){var n=$(this).attr("data-local");typeof n!="undefined"&&COF.contagens.EventOnGoogleAnalytics("event","User","Fazer Comentário",n)})},v;return n.SetValues=function(n){this.url=typeof n.attr("data-url")!="undefined"?a(n.attr("data-url")):document.location.href;typeof n.attr("data-local")!="undefined"&&(this.local=n.attr("data-local"));typeof n.attr("data-hits")!="undefined"&&(this.setHits=n.attr("data-hits"));typeof n.attr("data-contentid")!="undefined"?this.contentID=n.attr("data-contentid"):typeof COF.content.contentID!="undefined"&&(this.contentID=COF.content.contentID);typeof n.attr("data-contentType")!="undefined"?this.contentType=n.attr("data-contentType"):typeof COF.content.contentTypeName!="undefined"&&(this.contentType=COF.content.contentTypeName);typeof n.attr("data-areaid")!="undefined"?this.areaID=n.attr("data-areaid"):typeof COF.content.areaId!="undefined"&&(this.areaID=COF.content.areaId);typeof n.attr("data-text")!="undefined"&&(this.text=n.attr("data-text"));typeof n.attr("data-media")!="undefined"&&(this.media=n.attr("data-media"))},v=function(){u();f();r();e();o();s();h();c();l()},{init:v(),shareFacebook:u,shareTwitter:f,sharePintRest:r,sharePintRest:r,shareWhatsApp:e,shareGooglePlus:o,shareLinkedIn:s,enviarEmail:h,imprimirNoticia:c,comentGAs:l}}();favoritos=function(){function n(){$(document).on("click",".guardar",function(){var t,r,i,n,u,f;if($(this).attr("class").indexOf("guardado")>=0)return!1;if(!COF.isUserLoggedIn())return $("#guardarNoticia").modal("show"),!1;if(t=$(this).attr("data-url"),r=$(this).attr("data-local"),t!=""&&t!=undefined){if(i=$(this).data("contentid"),COF.validate.isNullOrEmpty(i))return;if(typeof r!="undefined"?COF.contagens.EventOnGoogleAnalytics("event","User","Guardar Noticia",r):COF.contagens.EventOnGoogleAnalytics("event","User","Guardar noticia",t),CofinaSSOApi.addNewsToFavourites(t),n=COF.cookies.get("Favorites"),n==null&&(n=""),u=i.toString().concat("||"),!COF.validate.isNullOrEmpty(n)&&n.indexOf(u)>=0)return;n+=u;COF.cookies.set("Favorites",n,365);f=$(".guardar[data-contentid='"+i+"']");$(f).each(function(){$(this).removeClass("guardar");$(this).addClass("guardado");$(".ic_read-later").length>0&&$(this).toggleClass("ic_read-later_active")})}})}function t(){$(document).on("click",".guardado",function(){var u=$(this).data("url"),t=$(this).data("contentid"),n,i,r;u!=""&&t!=""&&(n=COF.cookies.get("Favorites"),n!=null&&(i=n.toString().replace(t+"||",""),COF.cookies.set("Favorites",i,365)),r=$(".saved[data-contentID='"+contentID+"']"),$(r).each(function(){$(this).removeClass("guardar");$(this).addClass("guardado");$(".ic_read-later").length>0&&$(this).toggleClass("ic_read-later_active")}))})}return{add:n(),remove:t()}}();ApplyFavoritesInEach();$(".selectbox").on("change",function(){var n=$(this).prop("selectedIndex"),t=$(".selectbox")["0"][n].value;window.location=t});var AlertasDetalhe=function(){function n(){if($("#alertas").length>0)$(document).on("click","#alertas ul li a",function(){if(!COF.isUserLoggedIn())return $("#guardarNoticia").modal("show"),!1})}function t(){var n,t;if($("#alertas").length>0){if(n=COF.cookies.get("WordAlerts"),COF.validate.isNullOrEmpty(n))return;n=decodeURIComponent(n);n=n.replace(/[+]/g," ");t=$($.parseHTML(n)[0]).text().toLowerCase().split(",");t=$.map(t,$.trim);$("#alertas ul li").each(function(){var i=$(this).text().toLowerCase().trim(),n;t.indexOf(i)>=0&&(n=$(this).find("a"),n.addClass("alertaSubscrito"),n.attr("href",n.attr("href").replace("/subscribealertasdetalhe/","/unsubscribealertasdetalhe/")))})}}return{setModalAlerts:n,setUserAlerts:t}}(),comments=function(){function n(){var n=$("#CommentsMaxLength").val()||300;COF.countCharacters("#resposta_","#caracteres_",n)}function t(){COF.isUserLoggedIn()||($(".btResponder").remove(),$(COF.config.AjaxContainers.commentsReplyFormContainer).remove())}return{countCaracteres:n(),removeReplyButtonsForUnloggedUsers:t()}}(),loadContagensHP=function(){var n=function(n){$.ajax({url:"MaisComentadas",cache:!1,type:"POST"}).done(function(t){$("#"+n).append(t)})},t=function(n){$.ajax({url:"MaisPartilhadas",cache:!1,type:"POST"}).done(function(t){$("#"+n).append(t)})},i=function(){n("mc");t("mp")};return{init:i}}();$(function(){COF.content.where()=="DETALHE"&&(AlertasDetalhe.setModalAlerts(),AlertasDetalhe.setUserAlerts(),$("#printsectionModal").length>0&&($("#printsectionModal").clone().attr("id","printsection").appendTo("body"),$("#printsection").css("display","none")),$("a[data-target='#shareThisModal']").click(function(){var n=$(this).attr("data-local");$("#shareThisModal a[data-local]").each(function(){$(this).attr("data-local",n)})}));COF.cookies.get("avisoCookiesSabado2018")!="1"&&($("body").addClass("cookies"),COF.cookies.set("avisoCookiesSabado2018",1,365),$(".cookiesBox").show(),$(".closeCookies").click(function(){$(".cookiesBox").hide();$("body").removeClass("cookies")}));$("#mc").length>0&&$("#mp").length>0&&loadContagensHP.init()});showVideo=function(){var n=function(){$(document).on("click",".showVideo",function(){var i,n,r,t;if(console.log(this),i=$(this).attr("data-videoid"),$('figure[data-videoid="'+i+'"]').hide(),n=$("#hiddedVideo-"+i),n.find("video.jw-video").length>0&&typeof jwplayer!="undefined"){r=$(n).children().attr("id");n.show();jwplayer(r).play();return}if(t=n.children().attr("src"),typeof t=="undefined"||t==null){n.show();return}t.indexOf("&as=1")===-1&&(t=t+"&as=1");n.children().attr("src",t);n.show()});$(document).on("click",".showVideoCStudio",function(){var i,t,n;console.log(this);i=$(this).attr("data-videoid");$('figure[data-videoid="'+i+'"]').hide();t=$("#hiddedVideo-"+i);n=t.find(".mainVideo_zone").children().attr("src");n.indexOf("&as=1")===-1&&(n=n+"&as=1");t.find(".mainVideo_zone").children().attr("src",n);t.show()})};return{show:n()}}();$(".blocoDestaques").on("init",function(){$(this).css("visibility","visible").hide().fadeIn("slow")});if($("#blococapas").length>0){$("#modalHD").on("show.bs.modal",function(){COF.contagens.RefreshAllAnalytics()});$("#modalgpsHD").on("show.bs.modal",function(){COF.contagens.RefreshAllAnalytics()});$(document).on("click",".openHDCapa",function(){var n=$("#iframeModal").attr("data-src");n!==undefined&&n!=""&&$("#iframeModal").attr("src",n);renderPubLayer("modalHD")});$(document).on("click",".openHDCapaGPS",function(){var n=$("#iframeModalGPS").attr("data-src");n!==undefined&&n!=""&&$("#iframeModalGPS").attr("src",n);renderPubLayer("modalgpsHD")});function getCapa(){window.location.href=$("#sel1").find(":selected").val()}}$(document).ready(function(){$('input[type="radio"]').click(function(){$(this).attr("value")=="estudante"&&($(".bot-upload").show(),$("#escola").hide());$(this).attr("value")=="professor"&&($("#bot-upload").hide(),$("#escola").show())})});$(document).on("click",".btnLerMais",function(){COF.contagens.EventOnGoogleAnalytics("event","User","ContinuarLer","");COF.contagens.EventOnNetscope(COF.contagens.runtime.NetscopeEvent);COF.contagens.EventOnPiwik(COF.contagens.runtime.PiwikUrlPagetitle,COF.contagens.runtime.PiwikUrl,COF.contagens.runtime.PiwikContentType,COF.contagens.runtime.PiwikPremium)});COF.galleria.onImageChange(function(n){var t=$(n.currentTarget).parent().attr("data-id");t==$(".galeria:first").data("id")&&(COF.contagens.runtime.PiwikContentType="Foto_Not",COF.contagens.RefreshAllAnalytics())});window.onbeforeprint=renderPubLayer("printContent");$(document).ready(function(){$("*[data-ga-category]").on("click",function(){var n="";n=this.dataset.gaTarget!==undefined&&this.dataset.gaTarget!=""?this.dataset.gaTarget:window.location.href;this.dataset.gaCategory!==undefined&&this.dataset.gaAction!==undefined&&COF.contagens.EventOnGoogleAnalytics("event",this.dataset.gaCategory,this.dataset.gaAction,n)});$("input, textarea").keydown(function(n){if(n.which==9){var t="";this.parentNode.dataset.gaTarget!==undefined&&(t=this.parentNode.dataset.gaTarget);this.parentNode.dataset.gaCategory!==undefined&&this.parentNode.dataset.gaAction!==undefined&&COF.contagens.EventOnGoogleAnalytics("event",this.parentNode.dataset.gaCategory,this.parentNode.dataset.gaAction,t)}})});addLoadEvent(swReg)