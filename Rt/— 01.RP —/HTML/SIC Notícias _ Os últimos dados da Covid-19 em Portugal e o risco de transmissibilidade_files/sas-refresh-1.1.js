!function(r,e){var a=r.document,o=r.sas||{},t=!1,n=function(){t&&console.log(arguments)},i=function(){return"ontouchstart"in r},d=i()?5:10,s=5;if(n(e),!(e&&e.hasOwnProperty("tagId")&&a.getElementById(e.tagId)&&e.hasOwnProperty("keyword1")&&e.hasOwnProperty("keyword2")&&e.hasOwnProperty("formatId")))return void n("backup exit - error in the config");if(e.duration=e.hasOwnProperty("duration")&&Number(e.duration)>d?Number(e.duration):d,e.area=!e.hasOwnProperty("area")||Number(e.area)>100||Number(e.area)<0?50:Number(e.area),e.capping=!e.hasOwnProperty("capping")||Number(e.capping)>s?s:Number(e.capping),e.tagId=String(e.tagId),e.keyword1=Number(e.keyword1),e.keyword2=String(e.keyword2),e.formatId=Number(e.formatId),e.keyword1>=e.capping)return void n("backup exit - capping limit");var u=function(r){var a=new o.utils.Latch(["creaLoaded","viewabilityLoaded"]);a.addListener(function(r){o.viewability.register(r,function(){n("viewable "+e.duration+" - refresh format"),n("old target",e.keyword2),e.keyword2.indexOf("refsh_no=")>-1?(n("refsh_no key already exists"),e.keyword2=e.keyword2.replace("refsh_no="+e.keyword1,"refsh_no="+ ++e.keyword1)):(n("no refsh_no key"),e.keyword2+=";refsh_no=1;refsh_tm="+e.duration+";"),n("new target",e.keyword2),o.refresh(e.formatId,{target:e.keyword2})},{duration:e.duration,area:e.area,onError:function(){n("viewable error")}})}),a.notify("creaLoaded",r),o.utils.loadScriptCdn("diff/templates/js/sas/sas-viewability-1.4.js",{onLoad:function(){a.notify("viewabilityLoaded")}})};u(a.getElementById(e.tagId))}(window.top,window.sasRefreshConf);