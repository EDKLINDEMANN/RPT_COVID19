var sas=window.sas||{};!function(){var e=window;"undefined"!=typeof window.inDapIF&&window.inDapIF&&(e=window.parent),sas.viewability=sas.viewability||{};var t=100,n=!1,i=[],o=50,r=1,a=!0,s=function(){},l={HIDDEN:1,SEMI_VISIBLE:2,VISIBLE:3};sas.events.addEvent(e,"focus",function(){a=!0}),sas.events.addEvent(e,"blur",function(){a=!1});var u={NOT_IN_IFRAME:1,FRIENDLY_IFRAME:2,CROSS_DOMAIN_IFRAME:3,WRONG_SIZE:4},d=function(t){var n={status:u.NOT_IN_IFRAME,element:t};if("undefined"!=typeof inDapIF&&window.inDapIF){n.status=u.FRIENDLY_IFRAME;try{for(var i=t,o=e;null!=o&&o.top!==o.self;){if(I(o.frameElement)<I(i)){n.status=u.WRONG_SIZE;break}i=o.frameElement,o=o.parent}n.element=i}catch(r){n.status=u.CROSS_DOMAIN_IFRAME}}return n};sas.viewability.register=function(a,l,c){if(null!=a&&null!=l){c=c||{},c.duration=c.duration||r,c.area=c.area||o,c.triggerOnce=null!=c.triggerOnce?c.triggerOnce:!0,c.onHidden=c.onHidden||s,c.onSemiVisible=c.onSemiVisible||s,c.onVisible=c.onVisible||s,c.onError=c.onError||s,c.refreshMode=c.refreshMode||s;var I=d(a);if(I.status===u.CROSS_DOMAIN_IFRAME||u.status===u.WRONG_SIZE)return void c.onError();a=I.element,i.push({element:a,callback:l,options:c,tick:0,requiredTick:Math.round(1e3*c.duration/t)+1}),n||(n=!0,e.setInterval(function(){for(var e=0;e<i.length;e++)f(i[e])},t))}};var f=function(e){if(!e.disabled){var t=c(e);switch(t){case l.HIDDEN:e.options.refreshMode||(e.tick=0),e.state!==t&&e.options.onHidden(e.element);break;case l.SEMI_VISIBLE:e.options.refreshMode||(e.tick=0),e.state!==t&&e.options.onSemiVisible(e.element);break;case l.VISIBLE:e.tick++,e.state!==t&&e.options.onVisible(e.element);break;default:return}e.state=t,e.tick===e.requiredTick&&(e.callback(),e.tick=0,e.options.triggerOnce&&(e.disabled=!0))}},c=function(e){if(!a)return l.HIDDEN;var t=g(e.element);return t>=e.options.area?l.VISIBLE:0>=t?l.HIDDEN:l.SEMI_VISIBLE},I=function(e){var t=e.getBoundingClientRect();return(t.right-t.left)*(t.bottom-t.top)},g=function(e){var t=e.ownerDocument,n=t.defaultView||t.parentWindow,i=null!=n.innerWidth?n.innerWidth:t.documentElement.clientWidth,o=null!=n.innerHeight?n.innerHeight:t.documentElement.clientHeight,r=m(e),a=(r.right-r.left)*(r.bottom-r.top);if(0===a)return 0;var s=Math.max(0,Math.min(r.bottom,o)-Math.max(0,r.top)),l=Math.max(0,Math.min(r.right,i)-Math.max(0,r.left));return Math.round(s*l*100/a)},m=function(t){var n,i,o,r,a=!1;if(n=t.getBoundingClientRect().left,i=t.getBoundingClientRect().right,e.getComputedStyle)if("absolute"===e.getComputedStyle(t).position){o=0;var s=t;if(s.offsetParent)do"fixed"===e.getComputedStyle(s).position&&(a=!0),o+=s.offsetTop,s=s.offsetParent;while(s);a||(o=o-e.scrollY||0),r=o+t.clientHeight}else o=t.getBoundingClientRect().top,r=t.getBoundingClientRect().bottom;else o=t.getBoundingClientRect().top,r=t.getBoundingClientRect().bottom;return{top:o,left:n,right:i,bottom:r}}}();