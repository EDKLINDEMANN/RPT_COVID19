!function(SV_VERSION,SV_DOMAIN,SV_KIND,SV_ENV,SV_PORT){window.SAPO="undefined"==typeof SAPO?{}:window.SAPO,SAPO.namespace=function(a){if(!a||!a.length)return null;for(var b=a.split("."),c=SAPO,d="SAPO"===b[0]?1:0;d<b.length;++d)c[b[d]]=c[b[d]]||{},c=c[b[d]];return c},SAPO.verify=function(a,b){if(a){for(var c=a.split("."),d=SAPO,e="SAPO"===c[0]?1:0,f=c.length;f>e;e++)if(d=d[c[e]],!d)throw new Error("SAPO.verify: "+a+" not found");if(b){"function"==typeof d&&(d=d.prototype);var g=String(d.version).match(/\d+/g)||[0],h=String(b).match(/\d+/g)||[0];for(e=0,f=Math.min(g.length,h.length);f>e;e++)if(g[e]<h[e])throw new Error("SAPO.verify: "+a+" has low version ("+d.version+" < "+b+")");if(g.length<h.length)throw new Error("SAPO.verify: "+a+" has low version ("+d.version+" < "+b+")")}}},SAPO.Class=function(a,b,c){var d=function(){if(!this.__dont_init){if(this===window||!this)throw new Error('Call "new '+a+'(...);"');if(d["abstract"])throw new Error("Abstract class: don't instantiate");if(b){var e=b["abstract"];e&&(b["abstract"]=!1),b.apply(this,arguments),e&&(b["abstract"]=e)}c&&"function"==typeof c.init&&c.init.apply(this,arguments)}};return d.name=d.displayName=a,d["abstract"]=c["abstract"],b&&(b.prototype.__dont_init=1,d.prototype=new b,delete b.prototype.__dont_init),d.prototype.toString=function(){return"[object "+a+"]"},c&&SAPO.extendObj(d.prototype,c),d},SAPO.safeCall=function(a,b){function c(a){setTimeout(function(){throw a.message&&(a.message+="\n"+(a.stacktrace||a.stack||"")),a},1)}if(null===a&&(a=window),"string"==typeof b&&"function"==typeof a[b])try{return a[b].apply(a,[].slice.call(arguments,2))}catch(d){c(d)}else if("function"==typeof b)try{return b.apply(a,[].slice.call(arguments,2))}catch(d){c(d)}else if("function"==typeof a)try{return a.apply(window,[].slice.call(arguments,1))}catch(d){c(d)}},window.s$=function(a){if(arguments.length>1){for(var b=0,c=[],d=arguments.length;d>b;b++)c.push(s$(arguments[b]));return c}return"string"==typeof a&&(a=document.getElementById(a)),a},Function.prototype.bindObj=function(){if(arguments.length<2&&void 0===arguments[0])return this;for(var a=this,b=[],c=0,d=arguments.length;d>c;c++)b.push(arguments[c]);var e=b.shift(),f=function(){return a.apply(e,b.concat(function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b}(arguments)))};return f.toString=function(){return String(a)},f.name=f.displayName=a.name,f},Function.prototype.bindObjEvent=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b.push(arguments[c]);var d=b.shift();return function(c){return a.apply(d,[c||window.event].concat(b))}},Object.extend=function(a,b){for(var c in b)a[c]=b[c];return a},SAPO.extendObj=function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},"undefined"==typeof SAPO.Browser&&(SAPO.Browser={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,init:function(){this.detectBrowser(),this.setDimensions(),this.setReferrer()},setDimensions:function(){var a=0,b=0;"number"==typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(a=document.body.clientWidth,b=document.body.clientHeight),this.windowWidth=a,this.windowHeight=b},setReferrer:function(){this.referrer=void 0!==document.referrer&&document.referrer.length>0?window.escape(document.referrer):!1},detectBrowser:function(){var a=navigator.userAgent;if(this.userAgent=a,a=a.toLowerCase(),new RegExp("applewebkit/").test(a))new RegExp("chrome/").test(a)?(this.CHROME=!0,this.model="chrome",this.version=a.replace(new RegExp("(.*)chrome/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit"):(this.SAFARI=!0,this.model="safari",this.version=a.replace(new RegExp("(.*)applewebkit/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit");else if(new RegExp("opera").test(a))this.OPERA=!0,this.model="opera",this.version=a.replace(new RegExp("(.*)opera.([^\\s$]+)(.*)"),"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(new RegExp("konqueror").test(a))this.KONQUEROR=!0,this.model="konqueror",this.version=a.replace(new RegExp("(.*)konqueror/([^;]+);(.*)"),"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if(/(msie|trident)/i.test(a))this.IE=!0,this.model="ie",this.version=/rv:((?:\d|\.)+)/.test(a)?a.match(/rv:((?:\d|\.)+)/)[1]:a.replace(/(.*)\smsie\s([^;]+);(.*)/,"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(new RegExp("gecko").test(a)){this.GECKO=!0;var b=new RegExp("(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\\-meleon|seamonkey|netscape|songbird|sylera)");if(b.test(a))this.model=a.match(b)[1],this.version=a.replace(new RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2"),this.cssPrefix="-moz-",this.domPrefix="Moz";else{this.model="mozilla";var c=new RegExp("(.*)rv:([^)]+)(.*)");c.test(a)&&(this.version=a.replace(c,"$2")),this.cssPrefix="-moz-",this.domPrefix="Moz"}}},debug:function(){var a="known browsers: (ie, gecko, opera, safari, konqueror) \n";a+=[this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n",a+="model -> "+this.model+"\n",a+="version -> "+this.version+"\n",a+="\n",a+="original UA -> "+this.userAgent,alert(a)}},SAPO.Browser.init()),SAPO.logReferer=function(a){var b=SAPO.extendObj({s:"js.sapo.pt",swakt:"59a97a5f-0924-3720-a62e-0c44d9ea4f16",pg:!1,swasection:!1,swasubsection:"",dc:"",ref:!1,etype:"libsapojs-view",swav:"1",swauv:"1",bcs:"1",bsr:"1",bul:"1",bje:"1",bfl:"1",debug:!1},arguments[1]||{});if("undefined"!=typeof a&&null!==a){b.pg||(b.pg=a),b.swasection||(b.swasection=a),b.ref||(b.ref=location.href);var c="http://wa.sl.pt/wa.gif?",d="https://wa.sl.pt/wa.gif?",e=["pg="+encodeURIComponent(b.pg),"swasection="+encodeURIComponent(b.swasection),"swasubsection="+encodeURIComponent(b.swasubsection),"dc="+encodeURIComponent(b.dc),"s="+b.s,"ref="+encodeURIComponent(b.ref),"swakt="+b.swakt,"etype="+encodeURIComponent(b.etype),"swav="+encodeURIComponent(b.swav),"swauv="+encodeURIComponent(b.swauv),"bcs="+encodeURIComponent(b.bcs),"bsr="+encodeURIComponent(b.bsr),"bul="+encodeURIComponent(b.bul),"bje="+encodeURIComponent(b.bje),"bfl="+encodeURIComponent(b.bfl),""],f="https:"===location.protocol?d:c,g=new Image;g.src=f+e.join("&")}},SAPO._require=function(a,b){if("string"==typeof a){var c=document.createElement("script");c.type="text/javascript";var d=document.getElementsByTagName("HEAD");d.length>0&&d[0].appendChild(c),document.addEventListener?c.onload=function(){"undefined"!=typeof b&&b()}:c.onreadystatechange=function(){"loaded"===this.readyState&&"undefined"!=typeof b&&b()},c.src=a}},SAPO.require=function(a,b){var c=[],d=[],e=function(a){return"string"==typeof a&&/^SAPO\./.test(a)?!0:!1},f=function(a){return"object"==typeof a&&a.constructor===Object&&"string"==typeof a.uri?!0:!1},g=function(a){return"object"==typeof a&&a.constructor===Array?!0:!1},h=function(a){var b=a.split("."),c=b.join("/");return"http://js.sapo.pt/"+c+"/"},i=function(a){return a.uri},j=function(a,b){if("undefined"!=typeof a){for(var c=a.split("."),d=window,e=0,f=c.length;f>e;e++){if("undefined"==typeof d[c[e]])return!1;d=d[c[e]]}return"undefined"!=typeof b&&null!==b&&"undefined"!=typeof d.version?d.version===b?!0:!1:!0}},k=function(){d.length>1?(SAPO._require(d[0],k),d.splice(0,1)):1===d.length?("undefined"!=typeof b?SAPO._require(d[0],b):SAPO._require(d[0]),d.splice(0,1)):0===d.length&&"undefined"!=typeof b&&b()};if("undefined"!=typeof a){var l=!1;if("string"==typeof a)e(a)?j(a)||d.push(h(a)):d.push(a);else for(var m=0,n=a.length;n>m;m++)l=a[m],e(l)?j(l)||(c.push(l),d.push(h(l))):g(l)?l.length>0&&e(l[0])&&(j(l[0])||d.push(2===l.length?h(l[0])+l[1]+"/":h(l[0]))):"string"==typeof l?d.push(l):f(l)&&("string"==typeof l.check?"string"==typeof l.version?j(l.check,l.version)||d.push(i(l)):j(l.check)||d.push(i(l)):d.push(i(l)));if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[2]===!0){for(var o=0,p=d.length;p>o;o++)SAPO._require(d[o]);return void("undefined"!=typeof b&&b())}k()}else k()}},function(){if(SAPO.namespace("Communication"),"undefined"==typeof SAPO.Communication.JsonP){var a=function(a,b){this.init(a,b)},b=function(a){return function(){delete SAPO.Communication.JsonP[a]}};a.version="0.1",a.prototype={init:function(a,c){if(this.options=SAPO.extendObj({onComplete:void 0,onFailure:void 0,onAbort:void 0,failureObj:{},timeout:10,params:{},callbackParam:"jsoncallback",internalCallback:"_cb",randVar:!1},c||{}),this.options.randVar!==!1)this.randVar=this.options.randVar;else do this.randVar=parseInt(1e6*Math.random(),10);while(SAPO.Communication.JsonP[this.options.internalCallback+this.randVar]);if(this.options.internalCallback+=this.randVar,this.uri=a,"string"!=typeof this.uri)throw"Please define an URI";if("function"!=typeof this.options.onComplete)throw"please define a callback function on option onComplete!";SAPO.Communication.JsonP[this.options.internalCallback]=function(){clearTimeout(this.timeout),SAPO.Communication.JsonP[this.options.internalCallback]=b(this.options.internalCallback),this._removeScriptTag(),this.aborted||this.options.onComplete(arguments[0]),this.aborted=!1}.bindObj(this),this._addScriptTag()},_addParamsToGet:function(a,b){var c,d,e,f=-1!==a.indexOf("?"),g=[a];for(d in b)b.hasOwnProperty(d)&&(f?c="&":(c="?",f=!0),e=b[d],"number"==typeof e||e||(e=""),g=g.concat([c,d,"=",encodeURIComponent(e)]));return g.join("")},_getScriptContainer:function(){var a=document.getElementsByTagName("head");if(0===a.length){var b=document.getElementsByTagName("script");return b[0]}return a[0]},_addScriptTag:function(){this.options.params[this.options.callbackParam]="SAPO.Communication.JsonP."+this.options.internalCallback,this.options.params.rnd_seed=this.randVar,this.uri=this._addParamsToGet(this.uri,this.options.params);var a=document.createElement("script");a.type="text/javascript",a.src=this.uri;var b=this._getScriptContainer();b.appendChild(a),this.timeout=setTimeout(this._requestFailed.bindObj(this),1e3*this.options.timeout)},_requestFailed:function(){SAPO.Communication.JsonP[this.options.internalCallback]=b(this.options.internalCallback),this._removeScriptTag(),"function"==typeof this.options.onFailure&&this.options.onFailure(this.options.failureObj)},_removeScriptTag:function(){for(var a,b=document.getElementsByTagName("script"),c=0,d=b.length;d>c;++c)if(a=b[c],a.src===this.uri)return void a.parentNode.removeChild(a)},abort:function(){var a=this.options.onAbort;return this.aborted=!0,a&&"function"==typeof a?a():void 0}},SAPO.Communication.JsonP=a}}(),SAPO.namespace("Communication"),SAPO.Communication.Ajax=function(a,b){this.init(a,b)},SAPO.Communication.Ajax.version=2.1,SAPO.Communication.Ajax.globalOptions={parameters:{},requestHeaders:{}};var xMLHttpRequestWithCredentials="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;SAPO.Communication.Ajax.prototype={version:SAPO.Communication.Ajax.version,init:function(a,b){if(!a)throw new Error("WRONG_ARGUMENTS_ERR");var c=SAPO.extendObj({asynchronous:!0,method:"POST",parameters:null,timeout:0,delay:0,postBody:"",contentType:"application/x-www-form-urlencoded",requestHeaders:null,onComplete:null,onSuccess:null,onFailure:null,onException:null,onHeaders:null,onCreate:null,onInit:null,onTimeout:null,sanitizeJSON:!1,evalJS:!0,xhrProxy:"",cors:!1,debug:!1,useCredentials:!1,signRequest:!1},SAPO.Communication.Ajax.globalOptions);if(b&&"object"==typeof b){if(c=SAPO.extendObj(c,b),"object"==typeof b.parameters)c.parameters=SAPO.extendObj(SAPO.extendObj({},SAPO.Communication.Ajax.globalOptions.parameters),b.parameters);else if(null!=b.parameters){var d=this.paramsObjToStr(SAPO.Communication.Ajax.globalOptions.parameters);d&&(c.parameters=b.parameters+"&"+d)}c.requestHeaders=SAPO.extendObj({},SAPO.Communication.Ajax.globalOptions.requestHeaders),c.requestHeaders=SAPO.extendObj(c.requestHeaders,b.requestHeaders)}this.options=c,this.safeCall("onInit");var e=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");e.href=a,this.url=a,this.isHTTP=e.protocol.match(/^https?:$/i)&&!0,this.requestHasBody=c.method.search(/^get|head$/i)<0,this.isCrossDomain=this.isHTTP&&"widget:"!=location.protocol&&"object"!=typeof window.widget?location.protocol!=e.protocol||location.host.split(":")[0]!=e.host.split(":")[0]:!1,this.options.cors&&(this.isCrossDomain=!1),this.transport=this.getTransport(),this.request()},getTransport:function(){if(!xMLHttpRequestWithCredentials&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"==typeof ActiveXObject)return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var a={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1","Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-SAPO-Version":"0.1"};if(this.options.cors&&(this.options.signRequest||delete a["X-Requested-With"],delete a["X-SAPO-Version"]),this.options.requestHeaders&&"object"==typeof this.options.requestHeaders)for(var b in this.options.requestHeaders)a[b]=this.options.requestHeaders[b];this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(a.Connection="close");for(var c in a)a.hasOwnProperty(c)&&this.transport.setRequestHeader(c,a[c])}catch(d){}},paramsObjToStr:function(a){var b,c,d,e,f=[];if("object"!=typeof a)return a;for(d in a)if(a.hasOwnProperty(d))if(e=a[d],"[object Array]"!==Object.prototype.toString.call(e)||isNaN(e.length))f=f.concat([encodeURIComponent(d),"=",encodeURIComponent(e),"&"]);else for(b=0,c=e.length;c>b;b++)f=f.concat([encodeURIComponent(d),"=",encodeURIComponent(e[b]),"&"]);return f.length>0&&f.pop(),f.join("")},setParams:function(){var a=null,b=this.options.parameters;a="object"==typeof b?this.paramsObjToStr(b):""+b,a&&(this.url=this.url.indexOf("?")>-1?this.url.split("#")[0]+"&"+a:this.url.split("#")[0]+"?"+a)},getHeader:function(a){if(this.usingXDomainReq&&"Content-Type"===a)return this.transport.contentType;try{return this.transport.getResponseHeader(a)}catch(b){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(a){return null}},getResponse:function(){var a=this.transport,b={headerJSON:null,responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:a,timeTaken:new Date-this.startTime,requestedUrl:this.url};b.readyState=a.readyState;try{b.responseText=a.responseText}catch(c){}try{b.responseXML=a.responseXML}catch(c){}try{b.status=a.status}catch(c){b.status=0}try{b.statusText=a.statusText}catch(c){b.statusText=""}return b},abort:function(){if(this.transport){clearTimeout(this.delayTimeout),clearTimeout(this.stoTimeout);try{this.transport.abort()}catch(a){}this.finish()}},runStateChange:function(){var a=this.transport.readyState;if(3===a)this.isHTTP&&this.safeCall("onHeaders");else if(4===a||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())return void(this.delayTimeout=setTimeout(this.runStateChange.bindObj(this),this.options.delay+this.startTime-(new Date).getTime()));var b,c=this.transport.responseText,d=this.getResponse(),e=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"),clearTimeout(this.stoTimeout),0===e?this.isHTTP?this.safeCall("onException",this.makeError(18,"NETWORK_ERR")):e=c?200:404:304===e&&(e=200);var f=this.usingXDomainReq||e>=200&&300>e,g=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(g.indexOf("application/json")>=0||"force"===this.options.evalJS))try{b=this.evalJSON(c,this.sanitizeJSON),b&&(c=d.responseJSON=b)}catch(h){f&&this.safeCall("onException",h)}if(this.usingXDomainReq&&-1!==g.indexOf("xml")&&"DOMParser"in window){var i;switch(g){case"application/xml":case"application/xhtml+xml":case"image/svg+xml":i=g;break;default:i="text/xml"}var j=(new DOMParser).parseFromString(this.transport.responseText,i);this.transport.responseXML=j,d.responseXML=j}null!=this.transport.responseXML&&null==d.responseJSON&&""!==this.transport.responseXML.xml&&(c=this.transport.responseXML),(e||this.usingXDomainReq)&&(f?this.safeCall("onSuccess",d,c):this.safeCall("onFailure",d,c),this.safeCall("on"+e,d,c)),this.finish(d,c)}},finish:function(a,b){if(a&&this.safeCall("onComplete",a,b),clearTimeout(this.stoTimeout),this.transport){try{this.transport.onreadystatechange=null}catch(c){}"function"==typeof this.transport.destroy&&this.transport.destroy(),this.transport=null}},safeCall:function(a,b,c){function d(a){setTimeout(function(){throw a.message&&(a.message+="\n"+(a.stacktrace||a.stack||"")),a},1)}"function"==typeof this.options[a]?SAPO.safeCall(this,this.options[a],b,c):b&&window.Error&&b instanceof Error&&d(b)},setRequestHeader:function(a,b){this.options.requestHeaders||(this.options.requestHeaders={}),this.options.requestHeaders[a]=b},request:function(){if(this.transport){var a=null;this.requestHasBody?(null!=this.options.postBody&&""!==this.options.postBody?(a=this.options.postBody,this.setParams()):null!=this.options.parameters&&""!==this.options.parameters&&(a=this.options.parameters),"object"!=typeof a||a.nodeType?"object"!=typeof a&&null!=a&&(a=""+a):a=this.paramsObjToStr(a),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var b=this.url,c=this.options.method,d=this.isCrossDomain;d&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",b),b=this.options.xhrProxy+encodeURIComponent(b),d=!1);try{this.transport.open(c,b,this.options.asynchronous)}catch(e){return this.safeCall("onException",e),this.finish(this.getResponse(),null)}this.setHeaders(),this.safeCall("onCreate"),this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())}.bindObj(this),1e3*this.options.timeout)),this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0),this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=this.runStateChange.bindObj(this):this.usingXDomainReq&&(this.transport.onload=this.runStateChange.bindObj(this));try{if(d)throw this.makeError(18,"NETWORK_ERR");this.startTime=(new Date).getTime(),this.transport.send(a)}catch(e){return this.safeCall("onException",e),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},makeError:function(a,b){if("function"!=typeof Error)return{code:a,message:b};var c=new Error(b);return c.code=a,c},isJSON:function(a){return"string"==typeof a&&a?(a=a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(a)):!1},evalJSON:function(strJSON,sanitize){if(strJSON&&(!sanitize||this.isJSON(strJSON)))try{return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.parse?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("ERROR: Bad JSON string...")}return null}},SAPO.Communication.Ajax.load=function(a,b){return new SAPO.Communication.Ajax(a,{method:"GET",onSuccess:function(a){b(a.responseText,a)}})},SAPO.Communication.Ajax.ping=function(a,b){return new SAPO.Communication.Ajax(a,{method:"HEAD",onSuccess:function(a){"function"==typeof b&&b(a)}})},window.flensed={base_path:window.location.protocol+"//"+SV_DOMAIN+("PROD"===SV_ENV?"":window.location.port?":"+window.location.port:"")+"/Assets/Images/CorsInFlash/"},function(){"use strict";SAPO.namespace("Communication"),SAPO.Communication.CorsInFlash=function(a,b,c){if("function"==typeof b&&(c=b,b={}),"string"!=typeof a)throw new Error("uri must be a string");if("object"!=typeof b)throw new Error("options must be an object");if("function"!=typeof c)throw new Error("cb must be a function");var d=a.split(".").pop(),e="xml"===b.format||"xml"===d,f="json"===b.format||"json"===d,g="binary"===b.format,h=new flensed.flXHR({binaryResponseBody:g,sendTimeout:1e3*b.timeout||-1});if(b.policyURI&&(h.loadPolicyURL=b.policyURI),b.headers)for(var i in b.headers)h.setRequestHeader(i,b.headers[i]);h.xmlResponseText=e;var j=function(a){c("name"in a?"error":"timeout"),h.Destroy()};h.onerror=j,h.ontimeout=j,h.onreadystatechange=function(a){if(4===a.readyState){var b;b=f?JSON.parse(a.responseText):e?a.responseXML:g?h.responseBody:a.responseText,c.call(h,null,b,a.status,a.statusText),h.Destroy()}},h.open(b.method||"GET",a),h.send(b.data||"")}}(window),function(a,b){"use strict";if(SAPO.namespace("Dom"),!SAPO.Dom.Css){var c=navigator.userAgent.toLowerCase(),d=-1!==c.indexOf("android")&&-1===c.indexOf("chrome")&&-1!==c.indexOf("safari"),e="object"==typeof Node?function(a){return a instanceof Node}:function(a){return a&&"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName};SAPO.Dom.Css={addRemoveClassName:function(a,b,c){return c?SAPO.Dom.Css.addClassName(a,b):void SAPO.Dom.Css.removeClassName(a,b)},addClassName:function(a,b){a=s$(a),a&&b&&("undefined"!=typeof a.classList?a.classList.add(b):this.hasClassName(a,b)||(a.className+=(a.className?" ":"")+b))},removeClassName:function(a,b){if(a=s$(a),a&&b)if("undefined"!=typeof a.classList)a.classList.remove(b);else{if("undefined"==typeof a.className)return!1;var c=a.className,d=new RegExp("(^|\\s+)"+b+"(\\s+|$)");c=c.replace(d," "),c=c.replace(/^\s+/,"").replace(/\s+$/,""),a.className=c}},removeClassNamesStartingWith:function(a,b,c){a=s$(a);var d=a.className;if(d){var e,f,g,h=!1,i=!!c;for(i&&(g=b+c),d=d.split(" "),e=d.length-1;e>=0;--e)f=d[e],i&&f===g?i=!1:0===f.indexOf(b)&&(d.splice(e,1),h=!0);i&&(d.push(g),h=!0),h&&(a.className=d.join(" "))}},setClassName:function(a,b,c){c?SAPO.Dom.Css.addClassName(a,b):SAPO.Dom.Css.removeClassName(a,b)},hasClassName:function(a,b){if(a=s$(a),a&&b){if("undefined"!=typeof a.classList)return a.classList.contains(b);if("undefined"==typeof a.className)return!1;var c=a.className;if("undefined"==typeof c.length)return!1;if(c.length>0){if(c===b)return!0;var d=new RegExp("(^|\\s)"+b+"(\\s|$)");if(d.test(c))return!0}}return!1},blinkClass:function(a,b,c,d){a=s$(a),SAPO.Dom.Css.setClassName(a,b,!d),setTimeout(function(){SAPO.Dom.Css.setClassName(a,b,d)},100|Number(c))},toggleClassName:function(a,b,c){return a&&b&&"undefined"!=typeof a.classList?(a=s$(a),null!==a&&a.classList.toggle(b),!0):void("undefined"!=typeof c?c===!0?this.addClassName(a,b):c===!1&&this.removeClassName(a,b):this.hasClassName(a,b)?this.removeClassName(a,b):this.addClassName(a,b))},setOpacity:function(a,b){if(a=s$(a),null!==a){var c=1;isNaN(Number(b))||(c=0>=b?0:1>=b?b:100>=b?b/100:1),"undefined"!=typeof a.style.opacity?a.style.opacity=c:a.style.filter="alpha(opacity:"+(100*c|0)+")"}},_camelCase:function(a){return a?a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()}):a},getStyle:function(b,c){if(b=s$(b),null!==b){c="float"===c?"cssFloat":SAPO.Dom.Css._camelCase(c);var d=b.style[c];if(!a.getComputedStyle||d&&"auto"!==d)!d&&b.currentStyle&&(d=b.currentStyle[c],"auto"!==d||"width"!==c&&"height"!==c||(d=b["offset"+c.charAt(0).toUpperCase()+c.slice(1)]+"px"));else{var e=getComputedStyle(b,null);d=e?e[c]:null}if("opacity"===c)return d?parseFloat(d,10):1;if("borderTopWidth"===c||"borderBottomWidth"===c||"borderRightWidth"===c||"borderLeftWidth"===c){if("thin"===d)return"1px";if("medium"===d)return"3px";if("thick"===d)return"5px"}return"auto"===d?null:d}},setStyle:function(a,b){if(a=s$(a),null!==a)if("string"==typeof b)a.style.cssText+="; "+b,-1!==b.indexOf("opacity")&&this.setOpacity(a,b.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var c in b)b.hasOwnProperty(c)&&("opacity"===c?this.setOpacity(a,b[c]):"float"===c||"cssFloat"===c?"undefined"==typeof a.style.styleFloat?a.style.cssFloat=b[c]:a.style.styleFloat=b[c]:a.style[c]=b[c])},show:function(a,b){a=s$(a),null!==a&&(a.style.display=b?b:"")},hide:function(a){a=s$(a),null!==a&&(a.style.display="none")},showHide:function(a,b){a=s$(a),a&&(a.style.display=b?"":"none")},toggle:function(a,b){a=s$(a),null!==a&&("undefined"!=typeof b?b===!0?this.show(a):this.hide(a):"none"===a.style.display?this.show(a):this.hide(a))},_getRefTag:function(a){if(a.firstElementChild)return a.firstElementChild;for(var b=a.firstChild;b;b=b.nextSibling)if(1===b.nodeType)return b;return null},appendStyleTag:function(a,b,c){c=SAPO.extendObj({type:"text/css",force:!1},c||{});var d,e,f=document.getElementsByTagName("style"),g=!1,h=!0;for(d=0,e=f.length;e>d;d++)g=f[d].innerHTML,g.indexOf(a)>=0&&(h=!1);if(h){var i=document.createElement("style"),j=document.getElementsByTagName("head")[0],k=!1,l="";i.type=c.type,l+=a+" {",l+=b,l+="} ",i.styleSheet?i.styleSheet.cssText=l:i.appendChild(document.createTextNode(l)),c.force?j.appendChild(i):(k=this._getRefTag(j),k&&j.insertBefore(i,k))}},appendStylesheet:function(a,b){b=SAPO.extendObj({media:"screen",type:"text/css",force:!1},b||{});var c,d=document.createElement("link"),e=document.getElementsByTagName("head")[0];d.media=b.media,d.type=b.type,d.href=a,d.rel="Stylesheet",b.force?e.appendChild(d):(c=this._getRefTag(e),c&&e.insertBefore(d,c))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(a,b){if(!a)return b(a);if(SAPO.Dom.Css._loadedCSSFiles[a])return b(a);var c=SAPO.Dom.Css._loadingCSSFiles[a];if(c)return c.push(b);SAPO.Dom.Css._loadingCSSFiles[a]=[b];var f=document.createElement("link");f.type="text/css",f.rel="stylesheet",f.href=a;var g=document.getElementsByTagName("head")[0];g.appendChild(f);var h=function(a){var b=this;SAPO.Dom.Css._loadedCSSFiles[b]=!0;for(var c=SAPO.Dom.Css._loadingCSSFiles[b],d=0,f=c.length;f>d;++d)c[d](b);delete SAPO.Dom.Css._loadingCSSFiles[b],a&&e(a)&&a.parentNode.removeChild(a)};if(d){var i=document.createElement("iframe");i.style.display="none",i.onerror=h,i.onload=h.bindObj(a,i),document.body.appendChild(i)}else{var j=document.createElement("img");j.onerror=h.bindObj(a),j.src=a}},decToHex:function(a){var b=function(a){return 1===a.length&&(a="0"+a),a=a.toUpperCase()};if("object"==typeof a){var c=b(parseInt(a.r,10).toString(16)),d=b(parseInt(a.g,10).toString(16)),e=b(parseInt(a.b,10).toString(16));return c+d+e}a+="";var f=a.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==f?b(parseInt(f[1],10).toString(16))+b(parseInt(f[2],10).toString(16))+b(parseInt(f[3],10).toString(16)):b(parseInt(a,10).toString(16))},hexToDec:function(a){return 0===a.indexOf("#")&&(a=a.substr(1)),6===a.length?{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16)}:3===a.length?{r:parseInt(a.charAt(0)+a.charAt(0),16),g:parseInt(a.charAt(1)+a.charAt(1),16),b:parseInt(a.charAt(2)+a.charAt(2),16)}:a.length<=2?parseInt(a,16):void 0},getPropertyFromStylesheet:function(a,b){var c=SAPO.Dom.Css.getRuleFromStylesheet(a);return c?c.style[b]:null},getPropertyFromStylesheet2:function(a,c){var d=SAPO.Dom.Css.getRulesFromStylesheet(a);return d.forEach(function(a){var d=a.style[c];return null!==d&&d!==b?d:void 0}),null},getRuleFromStylesheet:function(a){var b,c,d,e,f,g=document.styleSheets;if(!g)return null;for(var h=0,i=document.styleSheets.length;i>h;++h){if(b=document.styleSheets[h],c=b.rules?b.rules:b.cssRules,!c)return null;for(d=0,e=c.length;e>d;++d)if(f=c[d],f.selectorText&&f.selectorText===a)return f}return null},getRulesFromStylesheet:function(a){var b,c,d,e,f,g=[],h=document.styleSheets;if(!h)return g;for(var i=0,j=document.styleSheets.length;j>i;++i){if(b=document.styleSheets[i],c=b.rules?b.rules:b.cssRules,!c)return null;for(d=0,e=c.length;e>d;++d)f=c[d],f.selectorText&&f.selectorText===a&&g.push(f)}return g},getPropertiesFromRule:function(a){var b,c,d,e=this.getRuleFromStylesheet(a),f={};e=e.style.cssText;var g,h,i,j,k=e.split(";");for(c=0,d=k.length;d>c;++c)" "===k[c].charAt(0)&&(k[c]=k[c].substring(1)),g=k[c].split(":"),b=this._camelCase(g[0].toLowerCase()),h=g[1],h&&(h=h.substring(1),"padding"===b||"margin"===b||"borderWidth"===b?("borderWidth"===b?(i="border",j="Width"):(i=b,j=""),-1!==h.indexOf(" ")?(h=h.split(" "),f[i+"Top"+j]=h[0],f[i+"Bottom"+j]=h[0],f[i+"Left"+j]=h[1],f[i+"Right"+j]=h[1]):(f[i+"Top"+j]=h,f[i+"Bottom"+j]=h,f[i+"Left"+j]=h,f[i+"Right"+j]=h)):"borderRadius"===b?-1!==h.indexOf(" ")?(h=h.split(" "),f.borderTopLeftRadius=h[0],f.borderBottomRightRadius=h[0],f.borderTopRightRadius=h[1],f.borderBottomLeftRadius=h[1]):(f.borderTopLeftRadius=h,f.borderTopRightRadius=h,f.borderBottomLeftRadius=h,f.borderBottomRightRadius=h):f[b]=h);return f},changeFontSize:function(a,c,d,e,f){var g;if("string"!=typeof a?g="1st argument must be a CSS selector rule.":"number"!=typeof c?g="2nd argument must be a number.":d!==b&&"+"!==d&&"*"!==d?g='3rd argument must be one of "+", "*".':e!==b&&("number"!=typeof e||0>=e)?g="4th argument must be a positive number.":f!==b&&("number"!=typeof f||f>f)&&(g="5th argument must be a positive number greater than minValue."),g)throw new TypeError(g);var h,i,j=SAPO.Dom.Selector.select(a);e===b&&(e=1),d="*"===d?function(a,b){return a*b}:function(a,b){return a+b};for(var k=0,l=j.length;l>k;++k)i=j[k],h=parseFloat(SAPO.Dom.Css.getStyle(i,"fontSize")),h=d(h,c),e>h||"number"==typeof f&&h>f||(i.style.fontSize=h+"px")}}}}(window),SAPO.namespace("Dom"),SAPO.Dom.Element={get:function(a){return"undefined"!=typeof a?"string"==typeof a?document.getElementById(a):a:null},create:function(a,b){var c=document.createElement(a);return SAPO.extendObj(c,b),c},remove:function(a){var b;a&&(b=a.parentNode)&&b.removeChild(a)},scrollTo:function(a){if(a=this.get(a)){if(a.scrollIntoView)return a.scrollIntoView();var b={},c=0,d=0;do c+=a.offsetTop||0,d+=a.offsetLeft||0,a=a.offsetParent;while(a);b={x:d,y:c},window.scrollTo(b.x,b.y)}},offsetTop:function(a){a=this.get(a);for(var b=a.offsetTop;a.offsetParent&&"body"!==a.offsetParent.tagName.toLowerCase();)a=a.offsetParent,b+=a.offsetTop;return b},offsetLeft:function(a){a=this.get(a);for(var b=a.offsetLeft;a.offsetParent&&"body"!==a.offsetParent.tagName.toLowerCase();)a=a.offsetParent,b+=a.offsetLeft;return b},positionedOffset:function(a){var b=0,c=0;a=this.get(a);do if(b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent){if("body"===a.tagName.toLowerCase())break;var d=a.style.position;if(!d&&a.currentStyle&&(d=a.currentStyle.position),(!d||"auto"===d)&&"undefined"!=typeof getComputedStyle){var e=getComputedStyle(a,null);d=e?e.position:null}if("relative"===d||"absolute"===d)break}while(a);return[c,b]},offset:function(a){return[this.offsetLeft(a),this.offsetTop(a)]},scroll:function(a){return a=a?s$(a):document.body,[window.pageXOffset?window.pageXOffset:a.scrollLeft,window.pageYOffset?window.pageYOffset:a.scrollTop]},_getPropPx:function(a,b){var c,d,e=a.getPropertyValue?a.getPropertyValue(b):a[b];return e?(d=e.indexOf("px"),c=-1===d?0:parseInt(e,10)):c=0,c},offset2:function(a){a=s$(a);var b,c,d,e,f=["border-left-width","border-top-width"],g=[0,0],h=SAPO.Dom.Element._getPropPx;do e=window.getComputedStyle?window.getComputedStyle(a,null):a.currentStyle,b=[0|a.offsetLeft,0|a.offsetTop],c=[h(e,f[0]),h(e,f[1])],SAPO.Browser.OPERA?(g[0]+=b[0],g[1]+=b[1]):(g[0]+=b[0]+c[0],g[1]+=b[1]+c[1]),d=a.offsetParent;while(a=d);return c=[h(e,f[0]),h(e,f[1])],SAPO.Browser.OPERA||(SAPO.Browser.GECKO?(g[0]+=c[0],g[1]+=c[1]):(g[0]-=c[0],g[1]-=c[1])),g},hasAttribute:function(a,b){return a.hasAttribute?a.hasAttribute(b):!!a.getAttribute(b)},insertAfter:function(a,b){(b=this.get(b))&&b.parentNode.insertBefore(a,b.nextSibling)},insertTop:function(a,b){(b=this.get(b))&&b.insertBefore(a,b.firstChild)},textContent:function(a){a=s$(a);var b;switch(a&&a.nodeType){case 9:return this.textContent(a.documentElement||a.body&&a.body.parentNode||a.body);case 1:if(b=a.innerText,"undefined"!=typeof b)return b;
case 11:if(b=a.textContent,"undefined"!=typeof b)return b;if(a.firstChild===a.lastChild)return this.textContent(a.firstChild);b=[];for(var c,d=0,e=a.childNodes,f=e.length;f>d;d++)c=e[d],b.push(this.textContent(c));return b.join("");case 3:case 4:return a.nodeValue}return""},setTextContent:function(a,b){switch(a=s$(a),a&&a.nodeType){case 1:if("innerText"in a){a.innerText=b;break}case 11:if("textContent"in a){a.textContent=b;break}case 9:for(;a.firstChild;)a.removeChild(a.firstChild);if(""!==b){var c=a.ownerDocument||a;a.appendChild(c.createTextNode(b))}break;case 3:case 4:a.nodeValue=b}},isLink:function(a){var b=a&&1===a.nodeType&&(/^a|area$/i.test(a.tagName)||a.hasAttributeNS&&a.hasAttributeNS("http://www.w3.org/1999/xlink","href"));return!!b},isAncestorOf:function(a,b){if(!b||!a)return!1;if(b.compareDocumentPosition)return 0!==(16&a.compareDocumentPosition(b));for(;b=b.parentNode;)if(b===a)return!0;return!1},descendantOf:function(a,b){return a!==b&&this.isAncestorOf(a,b)},firstElementChild:function(a){if(!a)return null;if("firstElementChild"in a)return a.firstElementChild;for(var b=a.firstChild;b&&1!==b.nodeType;)b=b.nextSibling;return b},lastElementChild:function(a){if(!a)return null;if("lastElementChild"in a)return a.lastElementChild;for(var b=a.lastChild;b&&1!==b.nodeType;)b=b.previousSibling;return b},nextElementSibling:function(a){var b=null;if(!a)return b;if("nextElementSibling"in a)return a.nextElementSibling;for(b=a.nextSibling;b&&1!==b.nodeType;)b=b.nextSibling;return b},previousElementSibling:function(a){var b=null;if(!a)return b;if("previousElementSibling"in a)return a.previousElementSibling;for(b=a.previousSibling;b&&1!==b.nodeType;)b=b.previousSibling;return b},elementWidth:function(a){return"string"==typeof a&&(a=document.getElementById(a)),a.offsetWidth},elementHeight:function(a){return"string"==typeof a&&(a=document.getElementById(a)),a.offsetHeight},elementLeft:function(a){return"string"==typeof a&&(a=document.getElementById(a)),a.offsetLeft},elementTop:function(a){return"string"==typeof a&&(a=document.getElementById(a)),a.offsetTop},elementDimensions:function(a){return"string"==typeof a&&(a=document.getElementById(a)),[a.offsetWidth,a.offsetHeight]},windowDimensions:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.documentElement&&"number"==typeof document.documentElement.clientWidth?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[document.body.clientWidth,document.body.clientHeight]},clonePosition:function(a,b){return a.style.top=this.offsetTop(b)+"px",a.style.left=this.offsetLeft(b)+"px",a},ellipsizeText:function(a){if(a=s$(a))for(;a&&a.scrollHeight>a.offsetHeight+8;)a.textContent=a.textContent.replace(/(\s+\S+)\s*$/,replace||"…")},findUpwardsHaving:function(a,b){for(;a&&1===a.nodeType;){if(b(a))return a;a=a.parentNode}return!1},findUpwardsByClass:function(a,b){var c=new RegExp("(^|\\s)"+b+"(\\s|$)"),d=function(a){var b=a.className;return b&&c.test(b)};return this.findUpwardsHaving(a,d)},findUpwardsByTag:function(a,b){b=b.toUpperCase();var c=function(a){return a.nodeName&&a.nodeName.toUpperCase()===b};return this.findUpwardsHaving(a,c)},findUpwardsById:function(a,b){var c=function(a){return a.id===b};return this.findUpwardsHaving(a,c)},findUpwardsBySelector:function(a,b){if(!SAPO.Dom.Selector)throw"Please load SAPO.Dom.Selector!";var c=function(a){return SAPO.Dom.Selector.matchesSelector(a,b)};return this.findUpwardsHaving(a,c)},getChildrenText:function(a,b){var c,d,e,f=a.childNodes,g=f.length,h="";if(!a)return h;for(d=0;g>d;++d)c=f[d],c&&3===c.nodeType&&(e=this._trimString(String(c.data)),e.length>0?(h+=e,b&&a.removeChild(c)):a.removeChild(c));return h},_trimString:function(a){return String.prototype.trim?a.trim():a.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(a){for(var b=s$(a),c=[],d=0;d<b.options.length;++d)c.push(b.options[d].value);return c},_normalizeData:function(a){for(var b,c=[],d=0,e=a.length;e>d;++d)b=a[d],b instanceof Array?1===b.length&&b.push(b[0]):b=[b,b],c.push(b);return c},fillSelect:function(a,b,c,d){var e=s$(a);if(e){e.innerHTML="";var f,g;c||(g=document.createElement("option"),g.setAttribute("value",""),e.appendChild(g)),b=SAPO.Dom.Element._normalizeData(b);for(var h=0,i=b.length;i>h;++h)f=b[h],g=document.createElement("option"),g.setAttribute("value",f[0]),f.length>2&&g.setAttribute("extra",f[2]),g.appendChild(document.createTextNode(f[1])),f[0]===d&&g.setAttribute("selected","selected"),e.appendChild(g)}},fillSelect2:function(a,b){a=s$(a),a.innerHTML="";var c={skipEmpty:!1,skipCreate:!1,emptyLabel:"none",createLabel:"create",optionsGroupLabel:"groups",emptyOptionsGroupLabel:"none exist",defaultValue:""};if(!b)throw"param opts is a requirement!";if(!b.data)throw"opts.data is a requirement!";b=SAPO.extendObj(c,b);var d,e,f=document.createElement("optgroup");f.setAttribute("label",b.optionsGroupLabel),b.data=SAPO.Dom.Element._normalizeData(b.data),b.skipCreate||b.data.unshift(["$create$",b.createLabel]),b.skipEmpty||b.data.unshift(["",b.emptyLabel]);for(var g=0,h=b.data.length;h>g;++g)e=b.data[g],d=document.createElement("option"),d.setAttribute("value",e[0]),d.appendChild(document.createTextNode(e[1])),e[0]===b.defaultValue&&d.setAttribute("selected","selected"),""===e[0]||"$create$"===e[0]?a.appendChild(d):f.appendChild(d);var i=function(a){var b=a[a.length-1][0];return""===b||"$create$"===b};i(b.data)&&(d=document.createElement("option"),d.setAttribute("value","$dummy$"),d.setAttribute("disabled","disabled"),d.appendChild(document.createTextNode(b.emptyOptionsGroupLabel)),f.appendChild(d)),a.appendChild(f);var j=function(b,c){var d=a.options[a.options.length-1];d.getAttribute("disabled")&&d.parentNode.removeChild(d),d=document.createElement("option"),d.setAttribute("value",b),d.appendChild(document.createTextNode(c)),f.appendChild(d),a.options[a.options.length-1].setAttribute("selected",!0)};b.skipCreate||(a.onchange=function(){"$create$"===a.value&&"function"==typeof b.onCreate&&b.onCreate(a,j)})},fillRadios:function(a,b,c,d,e,f){var g=s$(a);for(g=g.nextSibling;g&&1!==g.nodeType;)g=g.nextSibling;var h=document.createElement("span");g?g.parentNode.insertBefore(h,g):s$(a).appendChild(h),c=SAPO.Dom.Element._normalizeData(c),"]"!==b.substring(b.length-1)&&(b+="[]");var i,j;d||(j=document.createElement("input"),j.setAttribute("type","radio"),j.setAttribute("name",b),j.setAttribute("value",""),h.appendChild(j),f&&h.appendChild(document.createElement(f)));for(var k=0;k<c.length;++k)i=c[k],j=document.createElement("input"),j.setAttribute("type","radio"),j.setAttribute("name",b),j.setAttribute("value",i[0]),h.appendChild(j),h.appendChild(document.createTextNode(i[1])),f&&h.appendChild(document.createElement(f)),i[0]===e&&(j.checked=!0);return h},fillChecks:function(a,b,c,d,e){var f=s$(a);for(f=f.nextSibling;f&&1!==f.nodeType;)f=f.nextSibling;var g=document.createElement("span");f?f.parentNode.insertBefore(g,f):s$(a).appendChild(g),c=SAPO.Dom.Element._normalizeData(c),"]"!==b.substring(b.length-1)&&(b+="[]");for(var h,i,j=0;j<c.length;++j)h=c[j],i=document.createElement("input"),i.setAttribute("type","checkbox"),i.setAttribute("name",b),i.setAttribute("value",h[0]),g.appendChild(i),g.appendChild(document.createTextNode(h[1])),e&&g.appendChild(document.createElement(e)),h[0]===d&&(i.checked=!0);return g},parentIndexOf:function(a,b){for(var c,d=0,e=0,f=a.childNodes.length;f>e;++e)if(c=a.childNodes[e],1===c.nodeType){if(c===b)return d;++d}return-1},nextSiblings:function(a){if("string"==typeof a&&(a=document.getElementById(a)),"object"==typeof a&&null!==a&&a.nodeType&&1===a.nodeType){for(var b=[],c=a.parentNode.children,d=SAPO.Dom.Element.parentIndexOf(a.parentNode,a),e=++d,f=c.length;f>e;e++)b.push(c[e]);return b}return[]},previousSiblings:function(a){if("string"==typeof a&&(a=document.getElementById(a)),"object"==typeof a&&null!==a&&a.nodeType&&1===a.nodeType){for(var b=[],c=a.parentNode.children,d=SAPO.Dom.Element.parentIndexOf(a.parentNode,a),e=0,f=d;f>e;e++)b.push(c[e]);return b}return[]},siblings:function(a){if("string"==typeof a&&(a=document.getElementById(a)),"object"==typeof a&&null!==a&&a.nodeType&&1===a.nodeType){for(var b=[],c=a.parentNode.children,d=0,e=c.length;e>d;d++)a!==c[d]&&b.push(c[d]);return b}return[]},childElementCount:function(a){return a=s$(a),"childElementCount"in a?a.childElementCount:a?this.siblings(a).length+1:0},appendHTML:function(a,b){var c=document.createElement("div");c.innerHTML=b;for(var d=c.children,e=0;e<d.length;e++)a.appendChild(d[e])},prependHTML:function(a,b){var c=document.createElement("div");c.innerHTML=b;for(var d=a.firstChild,e=c.children,f=e.length-1;f>=0;f--)a.insertBefore(e[f],d),d=a.firstChild},htmlToFragment:function(a){return this.htmlToFragment="function"==typeof document.createRange&&"function"==typeof Range.prototype.createContextualFragment?function(a){var b;return"string"!=typeof a?document.createDocumentFragment():(b=document.createRange(),b.selectNode(document.body),b.createContextualFragment(a))}:function(a){var b,c,d=document.createDocumentFragment();if("string"!=typeof a)return d;for(b=document.createElement("div"),b.innerHTML=a;c=b.firstChild;)d.appendChild(c);return d},this.htmlToFragment.call(this,a)},data:function(a){if("object"!=typeof a&&"string"!=typeof a)throw"[SAPO.Dom.Element.data] :: Invalid selector defined";if("object"==typeof a)this._element=a;else{if(this._element=SAPO.Dom.Selector.select(a),this._element.length<=0)throw"[SAPO.Dom.Element.data] :: Can't find any element with the specified selector";this._element=this._element[0]}var b,c,d,e={},f=this._element.dataset||this._element.attributes||{};for(b in f)if("undefined"!=typeof f[b]){if("object"==typeof f[b])try{if(b=f[b].name||b,(f[b].name||f[b].nodeValue)&&0!==b.indexOf("data-")||!(f[b].nodeValue||f[b].value||f[b]))continue}catch(g){continue}if(c=b.replace("data-",""),-1!==c.indexOf("-")){for(c=c.split("-"),d=1;d<c.length;d+=1)c[d]=c[d].substr(0,1).toUpperCase()+c[d].substr(1);c=c.join("")}e[c]=f[b].nodeValue||f[b].value||f[b],("true"===e[c]||"false"===e[c])&&(e[c]="true"===e[c])}return e},moveCursorTo:function(a,b){if(a.setSelectionRange)a.setSelectionRange(b,b);else{var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}}},SAPO.namespace("Dom"),SAPO.Dom.Event={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,element:function(a){var b=a.target||"mouseout"==a.type&&a.fromElement||"mouseleave"==a.type&&a.fromElement||"mouseover"==a.type&&a.toElement||"mouseenter"==a.type&&a.toElement||a.srcElement||null;return!b||3!=b.nodeType&&4!=b.nodeType?b:b.parentNode},relatedTarget:function(a){var b=a.relatedTarget||"mouseout"==a.type&&a.toElement||"mouseleave"==a.type&&a.toElement||"mouseover"==a.type&&a.fromElement||"mouseenter"==a.type&&a.fromElement||null;return!b||3!=b.nodeType&&4!=b.nodeType?b:b.parentNode},findElement:function(a,b,c){for(var d=this.element(a);;){if(d.nodeName.toLowerCase()===b.toLowerCase())return d;if(d=d.parentNode,!d)return c?!1:document;if(!d.parentNode)return c?!1:document}},fire:function(a,b,c){a=s$(a);var d,e=SAPO.Dom.Event._nativeEvents;if(null!==a&&void 0!==a){a==document&&document.createEvent&&!a.dispatchEvent&&(a=document.documentElement),document.createEvent?(d=document.createEvent("HTMLEvents"),"undefined"==typeof e[b]?d.initEvent("dataavailable",!0,!0):d.initEvent(b,!0,!0)):(d=document.createEventObject(),d.eventType="undefined"==typeof e["on"+b]?"ondataavailable":"on"+b),d.eventName=b,d.memo=c||{};try{if(document.createEvent)a.dispatchEvent(d);else{if(!a.fireEvent)return;a.fireEvent(d.eventType,d)}}catch(f){}return d}},observe:function(a,b,c,d){if(a=s$(a),null!==a&&void 0!==a){if(-1!==b.indexOf(":")||"hashchange"===b&&a.attachEvent&&!window.onhashchange){var e=c;c=function(a,b,c){(a.eventName===b||SAPO.Browser.IE&&"dom:loaded"===b)&&(window.addEventListener&&(window.event=a),c())}.bindObjEvent(this,b,e),b="dataavailable"}a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent("on"+b,c)}},stopObserving:function(a,b,c,d){a=s$(a),null!==a&&void 0!==a&&(a.removeEventListener?a.removeEventListener(b,c,!!d):a.detachEvent("on"+b,c))},stop:function(a){a&&(null!==a.cancelBubble&&(a.cancelBubble=!0),a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),window.attachEvent&&(a.returnValue=!1),null!==a.cancel&&(a.cancel=!0))},stopPropagation:function(a){null!==a.cancelBubble&&(a.cancelBubble=!0),a.stopPropagation&&a.stopPropagation()},stopDefault:function(a){a.preventDefault&&a.preventDefault(),window.attachEvent&&(a.returnValue=!1),null!==a.cancel&&(a.cancel=!0)},pointer:function(a){if("changedTouches"in a){var b=a.changedTouches[0];return{x:b.pageX,y:b.pageY}}return{x:a.pageX||a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),y:a.pageY||a.clientY+(document.documentElement.scrollTop||document.body.scrollTop)}},pointerX:function(a){return this.pointer(a).x},pointerY:function(a){return this.pointer(a).y},isLeftClick:function(a){if(window.addEventListener){if(0===a.button)return!0;if("touch"===a.type.substring(0,5)&&null==a.button)return!0}else if(1===a.button)return!0;return!1},isRightClick:function(a){return 2===a.button?!0:!1},isMiddleClick:function(a){if(window.addEventListener){if(1===a.button)return!0}else if(4===a.button)return!0;return!1},getCharFromKeyboardEvent:function(a,b){var c=a.keyCode,d=String.fromCharCode(c),e=a.shiftKey;if(c>=65&&90>=c)return"boolean"==typeof b&&(e=b),e?d:d.toLowerCase();if(c>=96&&105>=c)return String.fromCharCode(48+(c-96));switch(c){case 109:case 189:return"-";case 107:case 187:return"+"}return d},debug:function(){}},function(){var a,b="",c={};document.createEvent?a="abort blur change click compositionstart compositionupdate compositionend dblclick DOMActivate DOMAttributeNameChanged DOMAttrModified DOMCharacterDataModified DOMElementNameChanged DOMFocusIn DOMFocusOut DOMNodeInserted DOMNodeInsertedIntoDocument DOMNodeRemoved DOMNodeRemovedFromDocument DOMSubtreeModified error focus focusin focusout hashchange keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseover mouseout mouseup mousewheel reset resize scroll select submit textInput touchend touchmove touchstart unload wheel":(b="on",a="abort activate afterprint afterupdate beforeactivate beforecopy beforecut beforedeactivate beforeeditfocus beforepaste beforeprint beforeunload beforeupdate blur bounce cellchange change click contextmenu controlselect copy cut dataavailable datasetchanged dblclick deactivate drag dragend dragenter dragleave dragover dragstart drop error errorupdate filterchange finish focus focusin focusout hashchange help keydown keypress keyup layoutcomplete load losecapture message mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup mousewheel move moveend movestart offline online page paste progress propertychange readystatechange reset resize resizeend resizestart rowenter rowexit rowsdelete rowsinserted scroll select selectionchange selectstart start stop storage storagecommit submit timeout touchend touchmove touchstart unload"),a=a.split(" ");for(var d=0,e=a.length;e>d;++d)c[b+a[d]]=!0;SAPO.Dom.Event._nativeEvents=c}(),SAPO.namespace("Dom"),function(a,b){function c(a,b,c,d){c=c||[],b=b||F;var e,f,g,h,i=b.nodeType;if(!a||"string"!=typeof a)return c;if(1!==i&&9!==i)return[];if(g=v(b),!g&&!d&&(e=bb.exec(a)))if(h=e[1]){if(9===i){if(f=b.getElementById(h),!f||!f.parentNode)return c;if(f.id===h)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(h))&&w(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return K.apply(c,L.call(b.getElementsByTagName(a),0)),c;if((h=e[3])&&lb&&b.getElementsByClassName)return K.apply(c,L.call(b.getElementsByClassName(h),0)),c}return p(a.replace(Z,"$1"),b,c,d,g)}function d(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function e(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function f(a){return N(function(b){return b=+b,N(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function g(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}function h(a,b){var d,e,f,g,h,i,j,k=Q[D][a];if(k)return b?0:k.slice(0);for(h=a,i=[],j=t.preFilter;h;){(!d||(e=$.exec(h)))&&(e&&(h=h.slice(e[0].length)),i.push(f=[])),d=!1,(e=_.exec(h))&&(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=e[0].replace(Z," "));for(g in t.filter)!(e=gb[g].exec(h))||j[g]&&!(e=j[g](e,F,!0))||(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=g,d.matches=e);if(!d)break}return b?h.length:h?c.error(a):Q(a,i).slice(0)}function i(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,f=I++;return b.first?function(b,c,f){for(;b=b[d];)if(e||1===b.nodeType)return a(b,c,f)}:function(b,c,g){if(g){for(;b=b[d];)if((e||1===b.nodeType)&&a(b,c,g))return b}else for(var h,i=H+" "+f+" ",j=i+r;b=b[d];)if(e||1===b.nodeType){if((h=b[D])===j)return b.sizset;if("string"==typeof h&&0===h.indexOf(i)){if(b.sizset)return b}else{if(b[D]=j,a(b,c,g))return b.sizset=!0,b;b.sizset=!1}}}}function j(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function k(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function l(a,b,c,d,e,f){return d&&!d[D]&&(d=l(d)),e&&!e[D]&&(e=l(e,f)),N(function(f,g,h,i){if(!f||!e){var j,l,m,n=[],p=[],q=g.length,r=f||o(b||"*",h.nodeType?[h]:h,[],f),s=!a||!f&&b?r:k(r,n,a,h,i),t=c?e||(f?a:q||d)?[]:g:s;if(c&&c(s,t,h,i),d)for(m=k(t,p),d(m,[],h,i),j=m.length;j--;)(l=m[j])&&(t[p[j]]=!(s[p[j]]=l));if(f)for(j=a&&t.length;j--;)(l=t[j])&&(f[n[j]]=!(g[n[j]]=l));else t=k(t===g?t.splice(q,t.length):t),e?e(null,g,t,i):K.apply(g,t)}})}function m(a){for(var b,c,d,e=a.length,f=t.relative[a[0].type],g=f||t.relative[" "],h=f?1:0,k=i(function(a){return a===b},g,!0),n=i(function(a){return M.call(b,a)>-1},g,!0),o=[function(a,c,d){return!f&&(d||c!==A)||((b=c).nodeType?k(a,c,d):n(a,c,d))}];e>h;h++)if(c=t.relative[a[h].type])o=[i(j(o),c)];else{if(c=t.filter[a[h].type].apply(null,a[h].matches),c[D]){for(d=++h;e>d&&!t.relative[a[d].type];d++);return l(h>1&&j(o),h>1&&a.slice(0,h-1).join("").replace(Z,"$1"),c,d>h&&m(a.slice(h,d)),e>d&&m(a=a.slice(d)),e>d&&a.join(""))}o.push(c)}return j(o)}function n(a,b){var d=b.length>0,e=a.length>0,f=function(g,h,i,j,l){var m,n,o,p=[],q=0,s="0",u=g&&[],v=null!=l,w=A,x=g||e&&t.find.TAG("*",l&&h.parentNode||h),y=H+=null==w?1:Math.E;for(v&&(A=h!==F&&h,r=f.el);null!=(m=x[s]);s++){if(e&&m){for(n=0;o=a[n];n++)if(o(m,h,i)){j.push(m);break}v&&(H=y,r=++f.el)}d&&((m=!o&&m)&&q--,g&&u.push(m))}if(q+=s,d&&s!==q){for(n=0;o=b[n];n++)o(u,p,h,i);if(g){if(q>0)for(;s--;)u[s]||p[s]||(p[s]=J.call(j));p=k(p)}K.apply(j,p),v&&!g&&p.length>0&&q+b.length>1&&c.uniqueSort(j)}return v&&(H=y,A=w),u};return f.el=0,d?N(f):f}function o(a,b,d,e){for(var f=0,g=b.length;g>f;f++)c(a,b[f],d,e);return d}function p(a,b,c,d,e){{var f,g,i,j,k,l=h(a);l.length}if(!d&&1===l.length){if(g=l[0]=l[0].slice(0),g.length>2&&"ID"===(i=g[0]).type&&9===b.nodeType&&!e&&t.relative[g[1].type]){if(b=t.find.ID(i.matches[0].replace(fb,""),b,e)[0],!b)return c;a=a.slice(g.shift().length)}for(f=gb.POS.test(a)?-1:g.length-1;f>=0&&(i=g[f],!t.relative[j=i.type]);f--)if((k=t.find[j])&&(d=k(i.matches[0].replace(fb,""),cb.test(g[0].type)&&b.parentNode||b,e))){if(g.splice(f,1),a=d.length&&g.join(""),!a)return K.apply(c,L.call(d,0)),c;break}}return x(a,l)(d,b,e,c,cb.test(a)),c}function q(){}var r,s,t,u,v,w,x,y,z,A,B=!0,C="undefined",D=("sizcache"+Math.random()).replace(".",""),E=String,F=a.document,G=F.documentElement,H=0,I=0,J=[].pop,K=[].push,L=[].slice,M=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},N=function(a,b){return a[D]=null==b||b,a},O=function(){var a={},b=[];return N(function(c,d){return b.push(c)>t.cacheLength&&delete a[b.shift()],a[c]=d},a)},P=O(),Q=O(),R=O(),S="[\\x20\\t\\r\\n\\f]",T="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",U=T.replace("w","w#"),V="([*^$|!~]?=)",W="\\["+S+"*("+T+")"+S+"*(?:"+V+S+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+U+")|)|)"+S+"*\\]",X=":("+T+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+W+")|[^:]|\\\\.)*|.*))\\)|)",Y=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+S+"*((?:-\\d)?\\d*)"+S+"*\\)|)(?=[^-]|$)",Z=new RegExp("^"+S+"+|((?:^|[^\\\\])(?:\\\\.)*)"+S+"+$","g"),$=new RegExp("^"+S+"*,"+S+"*"),_=new RegExp("^"+S+"*([\\x20\\t\\r\\n\\f>+~])"+S+"*"),ab=new RegExp(X),bb=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,cb=/[\x20\t\r\n\f]*[+~]/,db=/h\d/i,eb=/input|select|textarea|button/i,fb=/\\(?!\\)/g,gb={ID:new RegExp("^#("+T+")"),CLASS:new RegExp("^\\.("+T+")"),NAME:new RegExp("^\\[name=['\"]?("+T+")['\"]?\\]"),TAG:new RegExp("^("+T.replace("w","w*")+")"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+X),POS:new RegExp(Y,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+S+"*(even|odd|(([+-]|)(\\d*)n|)"+S+"*(?:([+-]|)"+S+"*(\\d+)|))"+S+"*\\)|)","i"),needsContext:new RegExp("^"+S+"*[>+~]|"+Y,"i")},hb=function(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}},ib=hb(function(a){return a.appendChild(F.createComment("")),!a.getElementsByTagName("*").length}),jb=hb(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==C&&"#"===a.firstChild.getAttribute("href")}),kb=hb(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),lb=hb(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),mb=hb(function(a){a.id=D+0,a.innerHTML="<a name='"+D+"'></a><div name='"+D+"'></div>",G.insertBefore(a,G.firstChild);var b=F.getElementsByName&&F.getElementsByName(D).length===2+F.getElementsByName(D+0).length;return s=!F.getElementById(D),G.removeChild(a),b});try{L.call(G.childNodes,0)[0].nodeType}catch(nb){L=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){return c(b,null,null,[a]).length>0},u=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=u(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=u(b);return c},v=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},w=c.contains=G.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:G.compareDocumentPosition?function(a,b){return b&&!!(16&a.compareDocumentPosition(b))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},c.attr=function(a,b){var c,d=v(a);return d||(b=b.toLowerCase()),(c=t.attrHandle[b])?c(a):d||kb?a.getAttribute(b):(c=a.getAttributeNode(b),c?"boolean"==typeof a[b]?a[b]?b:null:c.specified?c.value:null:null)},t=c.selectors={cacheLength:50,createPseudo:N,match:gb,attrHandle:jb?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:s?function(a,b,c){if(typeof b.getElementById!==C&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==C&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==C&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:ib?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c},NAME:mb&&function(a,b){return typeof b.getElementsByName!==C?b.getElementsByName(name):void 0},CLASS:lb&&function(a,b,c){return typeof b.getElementsByClassName===C||c?void 0:b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(fb,""),a[3]=(a[4]||a[5]||"").replace(fb,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||c.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&c.error(a[0]),a},PSEUDO:function(a){var b,c;return gb.CHILD.test(a[0])?null:(a[3]?a[2]=a[3]:(b=a[4])&&(ab.test(b)&&(c=h(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b),a.slice(0,3))}},filter:{ID:s?function(a){return a=a.replace(fb,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(fb,""),function(b){var c=typeof b.getAttributeNode!==C&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(fb,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=P[D][a];return b||(b=P(a,new RegExp("(^|"+S+")"+a+"("+S+"|$)"))),function(a){return b.test(a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")}},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:b?(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.substr(f.length-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b?f===d||f.substr(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,e,f=a.parentNode;if(1===c&&0===d)return!0;if(f)for(e=0,b=f.firstChild;b&&(1!==b.nodeType||(e++,a!==b));b=b.nextSibling);return e-=d,e===c||e%c===0&&e/c>=0}:function(b){var c=b;switch(a){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var d,e=t.pseudos[a]||t.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[D]?e(b):e.length>1?(d=[a,a,"",b],t.setFilters.hasOwnProperty(a.toLowerCase())?N(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=M.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:N(function(a){var b=[],c=[],d=x(a.replace(Z,"$1"));return d[D]?N(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:N(function(a){return function(b){return c(a,b).length>0}}),contains:N(function(a){return function(b){return(b.textContent||b.innerText||u(b)).indexOf(a)>-1}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!t.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if(a.nodeName>"@"||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return db.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:d("radio"),checkbox:d("checkbox"),file:d("file"),password:d("password"),image:d("image"),submit:e("submit"),reset:e("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return eb.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return!(a!==b.activeElement||b.hasFocus&&!b.hasFocus()||!a.type&&!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(){return[0]}),last:f(function(a,b){return[b-1]}),eq:f(function(a,b,c){return[0>c?c+b:c]}),even:f(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:f(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:f(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:f(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},y=G.compareDocumentPosition?function(a,b){return a===b?(z=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b):a.compareDocumentPosition)?-1:1}:function(a,b){if(a===b)return z=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return g(a,b);if(!h)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;c>k&&d>k;k++)if(e[k]!==f[k])return g(e[k],f[k]);return k===c?g(a,f[k],-1):g(e[k],b,1)},[0,0].sort(y),B=!z,c.uniqueSort=function(a){var b,c=1;if(z=B,a.sort(y),z)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},x=c.compile=function(a,b){var c,d=[],e=[],f=R[D][a];if(!f){for(b||(b=h(a)),c=b.length;c--;)f=m(b[c]),f[D]?d.push(f):e.push(f);f=R(a,n(e,d))}return f},F.querySelectorAll&&!function(){var a,b=p,d=/'|\\/g,e=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],g=[":active",":focus"],i=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector;hb(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||f.push("\\["+S+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||f.push(":checked")}),hb(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&f.push("[*^$]="+S+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")}),f=new RegExp(f.join("|")),p=function(a,c,e,g,i){if(!(g||i||f&&f.test(a))){var j,k,l=!0,m=D,n=c,o=9===c.nodeType&&a;if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){for(j=h(a),(l=c.getAttribute("id"))?m=l.replace(d,"\\$&"):c.setAttribute("id",m),m="[id='"+m+"'] ",k=j.length;k--;)j[k]=m+j[k].join("");n=cb.test(a)&&c.parentNode||c,o=j.join(",")}if(o)try{return K.apply(e,L.call(n.querySelectorAll(o),0)),e}catch(p){}finally{l||c.removeAttribute("id")}}return b(a,c,e,g,i)},i&&(hb(function(b){a=i.call(b,"div");try{i.call(b,"[test!='']:sizzle"),g.push("!=",X)}catch(c){}}),g=new RegExp(g.join("|")),c.matchesSelector=function(b,d){if(d=d.replace(e,"='$1']"),!(v(b)||g.test(d)||f&&f.test(d)))try{var h=i.call(b,d);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(j){}return c(d,null,null,[b]).length>0})}(),t.pseudos.nth=t.pseudos.eq,t.filters=q.prototype=t.pseudos,t.setFilters=new q,SAPO.Dom.Selector={},SAPO.Dom.Selector.select=c,SAPO.Dom.Selector.matches=c.matches,SAPO.Dom.Selector.matchesSelector=c.matchesSelector,SAPO.Dom.Selector.find=function(){throw"SAPO.Dom.Selector.find() no longer exists. Use SAPO.Dom.Selector.select() instead or use version 0.1"}}(window),function(){"use strict";SAPO.namespace("Utility");var a=function(a){var b={},c=function(c){var d=Array.prototype.slice.call(arguments);if(a.debug)try{console.log(">> "+JSON.stringify(d))}catch(e){console.log(">> "+d.join(" "))}var f=b[c];if(f)for(var g=a.catchExceptions?function(a){if(a&&!(a.length<2))try{a[1].apply(a[0],d)}catch(b){}}:function(a){!a||a.length<2||a[1].apply(a[0],d)},h=0,i=f.length;i>h;++h)g(f[h])},d=function(){var a=Array.prototype.slice.call(arguments),b=0;"number"==typeof a[0]&&(b=a.shift()),setTimeout(function(){var a=this.ctx;c.apply(a,this.args)}.bindObj({ctx:this,args:a}),b)},e=function(a,c,d){var e=d||this,f=this;if(-1!==a.indexOf(" ")&&(a=a.split(" ")),a instanceof Array)for(var g=0,h=a.length;h>g;++g)f.subscribe(a[g],c,e);
else{if(!c&&e===SAPO.Utility.Mediator)throw new Error("Either call without cb after having it installed in your instance or call with a cb!");if(c||(c=e["on_"+a]),c||(c=e.on),!c)throw console.error("No suitable callback function found for msgType: "+a),console.error("and context:"),console.error(e),new Error;if("string"!=typeof a)throw new TypeError("msgType must be a string!");if("function"!=typeof c)throw new TypeError("callback must be a function!");var i=b[a],j=!!i;j||(i=[]),i.push([e,c]),j||(b[a]=i)}},f=function(a,b){var c=function(){b.apply(null,arguments),g(a,b)};e(a,c)},g=function(a,c,d){var e,f,g=d||this,h=this;if(-1!==a.indexOf(" ")&&(a=a.split(" ")),a instanceof Array)for(e=0,f=a.length;f>e;++e)h.unsubscribe(a[e],g);else{var i=b[a];if(i){for(e=0,f=i.length;f>e;++e)if(i[e][1]===c||i[e][0]===g)return i.splice(e,1);throw new Error("Couldn not find the subscriber assigned to the given msgType!")}}},h=function(a){a.publish=c,a.publishDelayed=d,a.subscribe=e,a.unsubscribe=g};return{publish:c,publishDelayed:d,subscribe:e,unsubscribe:g,once:f,installTo:h}};SAPO.Utility.Mediator=a}(),SAPO.namespace("Project.Video"),SAPO.Project.Video._=function(a){var b=SAPO.Project.Video.i18n[a];return b?b:"["+a+"]"},SAPO.Project.Video.i18n={implUnavailableErrorMsg:"Necessita usar outro browser<br/>ou instalar o Flash Player.",noSVMetadataErrorMsg:"O vídeo que tentou ver não se encontra disponível<br/><br/>Pedimos desculpa pelo incómodo",noVideoSourceErrorMsg:"O vídeo que tentou ver não se encontra disponível<br/><br/>Pedimos desculpa pelo incómodo",unknownErrorMsg:"Problema a carregar vídeo.",withoutCorsOrFlashErrorMsg:"Sem Flash. Necessita usar outro browser<br/>ou instalar o Flash Player.",flashUnavailableErrorMsg:"Sem Flash. Necessita usar outro browser<br/>ou instalar o Flash Player.",noSVPlaylistErrorMsg:"Erro a carregar playlist",noStreamErrorMsg:"Direto não está a emitir",playlistLoadMoreTitle:"Carregar mais vídeos",playlistNext:"Seguinte: ",playlistPrev:"Anterior: ",adTitle:"Anúncio",closeTitle:"Fechar",durationTitle:"Duração do vídeo",goToSVTitle:"Ver no SAPO Vídeos",goToSVAuthorTitle:"Ver página do autor no SAPO Vídeos",linearAdTitle:"Publicidade linear",liveTitle:"Direto",metadataTitle:"Informação",moreTitle:"Mostra/esconde funcionalidades",muteTitle:"Tirar som",nextPageTitle:"Página seguinte",nonlinearAdTitle:"Publicidade não-linear",pageTitle:"Página",pauseTitle:"Pausar",playTitle:"Tocar",playPauseTitle:"Tocar/parar",previousPageTitle:"Página anterior",pubTitle:"PUB",qualityTitle:"Qualidade do vídeo",replayTitle:"Rever",resizeTitle:"Redimensionar",resize1Title:"Restaurar tamanho",resizeFullTitle:"Ver em ecrã inteiro",shareTitle:"Partilhar",shareLinkTitle:"Link",shareEmbedTitle:"Embed",shareSocialTitle:"Social",skipTitle:"Saltar PUB",subtitlesTitle:"Legendas",timeTitle:"Tempo no vídeo",unmuteTitle:"Repor som",volumeTitle:"Volume",volumeSliderTitle:"Volume"},function(a,b){"use strict";SAPO.namespace("Utility");var c=SAPO.Communication.Ajax,d=SAPO.Communication.JsonP,e=SAPO.Dom.Css,f=SAPO.Utility;f.arrIndexOf=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]===b)return c;return-1},f.hasAncestor=function lb(a,b){return a?a===b?!0:lb(a.parentNode,b):!1},f.hasAncestorClass=function mb(a,b){return a?e.hasClassName(a,b)?a:mb(a.parentNode,b):!1},f.getElementsByClassName=function(a,b){if(document.getElementsByClassName)return b||(b=document),b.getElementsByClassName(a);b||(b=document.body);for(var c,d=document.getElementsByTagName("*"),f=[],g=0,h=d.length;h>g;++g)c=d[g],e.hasClassName(c,a)&&f.push(c);return f};var g=function(a){return 10>a?"0"+a:a},h=function(a){var b,c=Math.floor(a%60),d=Math.floor(a/60),e=Math.floor(d/60);return e>0?(d-=60*e,b=[e,g(d),g(c)]):b=[d,g(c)],b.join(":")};SAPO.Utility.formatTime=h;var i=a.Node||{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},j={trim:"".trim||String.prototype.trim?function(a){return("".trim||String.prototype.trim).apply(a)}:function(a){return a.replace(/^\s+|\s+$|\n+$/g,"")},text:function(a){if(!a)return"";if("textContent"in a)return a.textContent;if("innerText"in a)return a.innerText;var b=[];if(a.nodeType===i.TEXT_NODE||a.nodeType===i.CDATA_SECTION_NODE)b.push(a.nodeValue);else if(a.nodeType===i.ELEMENT_NODE||a.nodeType===i.DOCUMENT_NODE||a.nodeType===i.DOCUMENT_FRAGMENT_NODE)for(var c,d=0,e=a.childNodes,f=e.length;f>d&&(c=e[d]);d++)b.push(this.text(c));return b.join("")},trimmedText:function(a){return this.trim(this.text(a))},getNode:function(a,b){if(b.indexOf(":")<0)return a.getElementsByTagName(b)[0];for(var c,d=b.split(":"),e=a.getElementsByTagName(b),f=0,g=e.length;g>f;f++)if(c=e[f],c.prefix===d[0])return c;return null},getNodeNS:function(a,b,c){if(c&&0<=c.indexOf(":")&&(c=c.split(":")[0]),a.getElementsByTagNameNS)return a.getElementsByTagNameNS(b,c)[0];for(var d=a;d;d=d.parentNode)if(1===d.nodeType)for(var e,f=0,g=d.attributes;e=g[f];f++)if(e.value===b){if("xmlns"===e.name)return j.getNode(a,c);if("xmlns:"===e.name.substring(0,6))return j.getNode(a,e.name.substring(6)+":"+c)}return null},getChildren:function(a,b){var c=a.getElementsByTagName(b);return 0===c.length&&a.tagName===b?[a]:c},getText:function(a,c,d){var e=d!==b?j.getNodeNS(a,d,c):j.getNode(a,c);return e=e&&j.trim(j.text(e)),e||""},getTrimmedText:function(a,b,c){return this.trim(this.getText(a,b,c))},getBoolean:function(a,c,d){var e=d!==b?j.getNodeNS(a,d,c):j.getNode(a,c);return e?(e=e&&j.trim(j.text(e)),e&&"false"===e.toLowerCase()?!1:Boolean(e)):!1},getNumber:function(a,c,d){var e=d!==b?j.getNodeNS(a,d,c):j.getNode(a,c);return e=e&&j.trim(j.text(e)),parseFloat(e)},getAttr:function(a,c,d,e){var f=e!==b?j.getNodeNS(a,e,c):j.getNode(a,c);return f&&j.trim(f.getAttribute(d)||"")},parseDOM:function(b,c){var d,e;if(a.DOMParser)d=new DOMParser,e=d.parseFromString(b,"text/xml");else{if(d=new a.ActiveXObject("Microsoft.XMLDOM"),d.async=!1,d.loadXML(b),0!==d.parseError.errorCode){var f=d.parseError;throw f}e=d}if(c)return e;for(e.nodeType===i.DOCUMENT_NODE&&(e=e.firstChild);e&&e.nodeType!==i.ELEMENT_NODE;)e=e.nextSibling;return e},parseTime:function(a){return a.match(/(\d+):(\d+):(\d+)/)||a.match(/()(\d+):(\d+)/)?3600*parseInt(RegExp.$1,10)+60*parseInt(RegExp.$2,10)+parseInt(RegExp.$3,10):b}};SAPO.Utility.XML2=j;var k,l,m,n=function(a,b,d,e,f,g){var h=function(a,b,c){return{method:"GET",cors:!0,asynchronous:!g,timeout:e||10,useCredentials:a,onSuccess:b,onException:c,onTimeout:c,onFailure:c}},i=function(){var a=Array.prototype.slice.call(arguments);b.apply(null,a)},j=function(){var a=Array.prototype.slice.call(arguments);d.apply(null,a)};if(f){var k=function(){new c(a,h(!1,i,j))};new c(a,h(!0,i,k))}else new c(a,h(!1,i,j))},o=function(a,b,c,d){SAPO.Communication.CorsInFlash(a,{method:"GET",timeout:d||10},function(a,d,e){if(a)return c(a);if("string"==typeof d)if("<?xml"===d.substring(0,5).toLowerCase())try{d=j.parseDOM(d)}catch(f){return c(f,{})}else d=JSON.parse(d);setTimeout(function(){b(e,d)},0)})},p=function(a,b,c){k=a,l=b,m=c};SAPO.Project.Video.initUtils=p;var q=0,r=!0,s=function(a,b){var c=r;q+=b;var d=0===q,e=c!==d;r=d,e&&l("loading_data_changed",!d)},t=function(a,b,c,e){s(a,1),new d(a,{onFailure:function(){s(a,-1),c()},onAbort:function(){s(a,-1),c()},onComplete:function(c){s(a,-1),b(c)},timeout:e})},u=function(){var a=SAPO.Project.Video.Features.hasFlash&&!SAPO.Project.Video.Features.hasCORS,b=a?o:n;b.apply(null,arguments)};SAPO.Utility.ajaxCORS=n,SAPO.Utility.flashCORS=o,SAPO.Utility.jsonpCORS=t,SAPO.Utility.cors=u;var v={},w=function(b,c){try{if(!("localStorage"in a))throw"argh";localStorage.setItem("sv_"+b,JSON.stringify(c))}catch(d){v[b]=c}},x=function(c,d){if("localStorage"in a)try{var e=localStorage.getItem("sv_"+c);if(null===e)throw"default";return JSON.parse(e)}catch(f){return d}return v[c]!==b?v[c]:d};SAPO.Utility.load=x,SAPO.Utility.save=w,SAPO.Utility.maximizeBox=function(a,b,c){var d,e=b[0],f=b[1];if(c||e>a[0]||f>a[1]){var g=e/f,h=a[0]/a[1],i=g>h?a[0]/e:a[1]/f;d=[parseInt(e*i,10),parseInt(f*i,10)]}else d=b.slice();var j=[parseInt((a[0]-d[0])/2,10),parseInt((a[1]-d[1])/2,10)];return[d,j]};var y,z,A,B,C,D,E,F,G,H=function(a,b){return a<<b|a>>>32-b},I=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},J=function(a,b,c){return a&b|~a&c},K=function(a,b,c){return a&c|b&~c},L=function(a,b,c){return a^b^c},M=function(a,b,c){return b^(a|~c)},N=function(a,b,c,d,e,f,g){return a=I(a,I(I(J(b,c,d),e),g)),I(H(a,f),b)},O=function(a,b,c,d,e,f,g){return a=I(a,I(I(K(b,c,d),e),g)),I(H(a,f),b)},P=function(a,b,c,d,e,f,g){return a=I(a,I(I(L(b,c,d),e),g)),I(H(a,f),b)},Q=function(a,b,c,d,e,f,g){return a=I(a,I(I(M(b,c,d),e),g)),I(H(a,f),b)},R=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},S=function(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d},T=[],U=7,V=12,W=17,X=22,Y=5,Z=9,$=14,_=20,ab=4,bb=11,cb=16,db=23,eb=6,fb=10,gb=15,hb=21,ib=function(a){var b;for(T=R(a),D=1732584193,E=4023233417,F=2562383102,G=271733878,b=T.length,y=0;b>y;y+=16)z=D,A=E,B=F,C=G,D=N(D,E,F,G,T[y+0],U,3614090360),G=N(G,D,E,F,T[y+1],V,3905402710),F=N(F,G,D,E,T[y+2],W,606105819),E=N(E,F,G,D,T[y+3],X,3250441966),D=N(D,E,F,G,T[y+4],U,4118548399),G=N(G,D,E,F,T[y+5],V,1200080426),F=N(F,G,D,E,T[y+6],W,2821735955),E=N(E,F,G,D,T[y+7],X,4249261313),D=N(D,E,F,G,T[y+8],U,1770035416),G=N(G,D,E,F,T[y+9],V,2336552879),F=N(F,G,D,E,T[y+10],W,4294925233),E=N(E,F,G,D,T[y+11],X,2304563134),D=N(D,E,F,G,T[y+12],U,1804603682),G=N(G,D,E,F,T[y+13],V,4254626195),F=N(F,G,D,E,T[y+14],W,2792965006),E=N(E,F,G,D,T[y+15],X,1236535329),D=O(D,E,F,G,T[y+1],Y,4129170786),G=O(G,D,E,F,T[y+6],Z,3225465664),F=O(F,G,D,E,T[y+11],$,643717713),E=O(E,F,G,D,T[y+0],_,3921069994),D=O(D,E,F,G,T[y+5],Y,3593408605),G=O(G,D,E,F,T[y+10],Z,38016083),F=O(F,G,D,E,T[y+15],$,3634488961),E=O(E,F,G,D,T[y+4],_,3889429448),D=O(D,E,F,G,T[y+9],Y,568446438),G=O(G,D,E,F,T[y+14],Z,3275163606),F=O(F,G,D,E,T[y+3],$,4107603335),E=O(E,F,G,D,T[y+8],_,1163531501),D=O(D,E,F,G,T[y+13],Y,2850285829),G=O(G,D,E,F,T[y+2],Z,4243563512),F=O(F,G,D,E,T[y+7],$,1735328473),E=O(E,F,G,D,T[y+12],_,2368359562),D=P(D,E,F,G,T[y+5],ab,4294588738),G=P(G,D,E,F,T[y+8],bb,2272392833),F=P(F,G,D,E,T[y+11],cb,1839030562),E=P(E,F,G,D,T[y+14],db,4259657740),D=P(D,E,F,G,T[y+1],ab,2763975236),G=P(G,D,E,F,T[y+4],bb,1272893353),F=P(F,G,D,E,T[y+7],cb,4139469664),E=P(E,F,G,D,T[y+10],db,3200236656),D=P(D,E,F,G,T[y+13],ab,681279174),G=P(G,D,E,F,T[y+0],bb,3936430074),F=P(F,G,D,E,T[y+3],cb,3572445317),E=P(E,F,G,D,T[y+6],db,76029189),D=P(D,E,F,G,T[y+9],ab,3654602809),G=P(G,D,E,F,T[y+12],bb,3873151461),F=P(F,G,D,E,T[y+15],cb,530742520),E=P(E,F,G,D,T[y+2],db,3299628645),D=Q(D,E,F,G,T[y+0],eb,4096336452),G=Q(G,D,E,F,T[y+7],fb,1126891415),F=Q(F,G,D,E,T[y+14],gb,2878612391),E=Q(E,F,G,D,T[y+5],hb,4237533241),D=Q(D,E,F,G,T[y+12],eb,1700485571),G=Q(G,D,E,F,T[y+3],fb,2399980690),F=Q(F,G,D,E,T[y+10],gb,4293915773),E=Q(E,F,G,D,T[y+1],hb,2240044497),D=Q(D,E,F,G,T[y+8],eb,1873313359),G=Q(G,D,E,F,T[y+15],fb,4264355552),F=Q(F,G,D,E,T[y+6],gb,2734768916),E=Q(E,F,G,D,T[y+13],hb,1309151649),D=Q(D,E,F,G,T[y+4],eb,4149444226),G=Q(G,D,E,F,T[y+11],fb,3174756917),F=Q(F,G,D,E,T[y+2],gb,718787259),E=Q(E,F,G,D,T[y+9],hb,3951481745),D=I(D,z),E=I(E,A),F=I(F,B),G=I(G,C);return[S(D),S(E),S(F),S(G)].join("").toLowerCase()};SAPO.Utility.md5=ib;var jb=function(a,b){return(a||"")+(~~(Math.random()*Math.pow(32,b||6))).toString(32)};SAPO.Utility.genId=jb;var kb=function(a){var b=[];if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};SAPO.Utility.objectKeys=kb}(window),SAPO.Project.Video.thumbs={transformFrame:function(a,b,c){c||(c=[560,420]);var d=a[0],e=a[1],f=isFinite(b)?b:2,g=c[0],h=c[1],i=1..toFixed(1);("3.2"===i||"3.3"===i)&&(d=~~(4*e/3));var j=~~(e*g/d),k=g;j>h&&(j=h,k=~~(d*h/e)),f>300&&(f=300);var l,m,n,o=Math.floor(f/4);k>g?k-=k%2:k+=k%2,k!==g&&(l=g-k,m=Math.floor(l/2),n=0),j>h?j-=j%2:j+=j%2,l=h-j,m=0,n=Math.floor(l/2),l=[m,n];var p=[k,j];return{dims:p,pad:l,pos:o}},crop:function(a,b,c){var d=["//thumbs.web.sapo.io/?p=",a,"&W=",b[0],"&H=",b[1],"&errorpic=transparent","&crop=corner_lt","&cropcoords=",c[0],"x",c[1]].join("");return d},cropPosterTransform:function(a,b,c,d){if(!c)return a;var e=SAPO.Project.Video.thumbs.transformFrame(c,d,b),f=[b[0]-2*e.pad[0],b[1]-2*e.pad[1]],g=SAPO.Project.Video.thumbs.crop(a,f,e.pad);return g}},function(a){"use strict";var b={},c=navigator.userAgent.toLowerCase();if(b.userAgent=c,b.isMobile=/iphone|ipod|ipad|android/g.test(c),b.isIPad=/ipad/g.test(c),b.isIPhoneOrIPod=!b.isIPad&&/iphone|ipod/g.test(c),b.isIOS=b.isIPhoneOrIPod||b.isIPad,b.isChromeForAndroid=/android \d+.+chrome/.test(c),b.isAndroid=/android/.test(c),b.isAndroid){var d=c.match(/android\s+([\d\.]+)/);d&&d.length>0&&(b.androidVersion=parseInt(d[1],10))}b.hasTouchEvents="ontouchstart"in document.documentElement,b.supportsVideoElement=!1,b.canPlayH264=!1,function(){var a=document.createElement("video");b.supportsVideoElement=!!a.play,b.supportsVideoElement&&(b.canPlayH264=!!a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),b.canPlayHLS=!(!a.canPlayType("application/x-mpegurl").replace(/^no$/,"")&&!a.canPlayType("application/vnd.apple.mpegurl").replace(/^no$/,"")))}(),b.hasCORS="withCredentials"in new XMLHttpRequest,function(){var a,c=!1;try{var d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");d&&(c=!0);try{a=parseInt(new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").split(" ")[1],10)}catch(e){}}catch(f){try{var g=navigator.mimeTypes["application/x-shockwave-flash"];g&&g.enabledPlugin&&(c=!0);try{a=parseInt(navigator.plugins["Shockwave Flash"].description.split(" ")[2],10)}catch(e){}}catch(h){}}b.flashVersion=a,b.hasFlash=c&&a>=10}(),b.isOuter=function(){return!!SAPO.Utility.IframeWrapper},b.inExternalIframe=function(){try{var b=a.parent,c=b.document;return c?!1:!0}catch(d){return!0}},b.pageURI=function(){return this.isOuter()?this.inExternalIframe()?document.referrer:a.location.href:a.parent.SAPO.Project.Video.Features.pageURI()},b.pageProtocol=function(){return"https"===this.pageURI().substring(0,5)?"https:":"http:"},SAPO.namespace("Project.Video"),SAPO.Project.Video.Features=b}(window),function(){"use strict";var a=function(a){if(!a.swf)throw new Error("swf option is missing!");if(!a.container)throw new Error("container option is missing!");a.id||(a.id="rnd"+~~(1e5*Math.random()));var b=[' id="',a.id,'" name="',a.id,'"'].join("");a.dims||(a.dims=[1,1]);var c=[' width="',a.dims[0],'" height="',a.dims[1],'"'].join("");a.params||(a.params={}),a.flashvars||(f={});var d=[];for(var e in a.flashvars)d.push([e,"=",encodeURIComponent(a.flashvars[e])].join(""));var f=d.join("&"),g=[SAPO.Browser.IE&&parseInt(SAPO.Browser.version,10)<11&&!window.WebGLRenderingContext?['<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"',c,b,'">\n'].join(""):['<object type="application/x-shockwave-flash" data="',a.swf,'"',c,b,">\n"].join(""),'<param name="movie" value="',a.swf,'">\n',a.params.allowfullscreen?'<param name="allowfullscreen"   value="true">\n':"",a.params.allowscriptaccess?'<param name="allowscriptaccess" value="'+a.params.allowscriptaccess+'">\n':"",a.params.bgcolor?'<param name="bgcolor"           value="'+a.params.bgcolor+'">\n':"",a.params.quality?'<param name="quality"           value="'+a.params.quality+'">\n':"",a.params.wmode?'<param name="wmode"             value="'+a.params.wmode+'">\n':"",'<param name="flashvars" value="',f,'">\n',"</object>"];g=g.join(""),a.container.insertAdjacentHTML(a.insteadOf?"beforebegin":"beforeend",g);var h=document.getElementById(a.id);return a.insteadOf&&(a.container.parentNode.removeChild(a.container),delete a.container),h};SAPO.Utility.SWF={embed:a}}(),function(a,b){"use strict";SAPO.namespace("Project.Video.Controllers");var c=SAPO.Project.Video.Controllers,d=SAPO.Dom.Event,e=SAPO.Project.Video.Features,f={};SAPO.Project.Video.Controllers.videoImpls=f;var g=[],h=!1;e&&(h=e.isAndroid&&!e.isChromeForAndroid);var i=SAPO.Utility.arrIndexOf,j={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},k=SAPO.Browser.IE&&parseInt(SAPO.Browser.version,10)<9,l=function(a,b){if(!a)throw"Poster.Ctor() must be invoked with a container element!";this._ctn=a,b&&this.set(b)};l.prototype={create:function(){if(!this._el){var a=document.createElement("div");a.className="native-poster fill";var b=a.style;b.position="absolute",b.left=0,b.top=0,b.width="100%",b.height="100%",b.backgroundColor="#000",b.margin=0,k||(b.backgroundSize="contain",b.backgroundRepeat="no-repeat",b.backgroundPosition="50% 50%"),this._ctn.appendChild(a),this._el=a}},set:function(a){if(!a)throw"Poster.set() must be called with an URL!";this.create(),k?this._el.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a+"', sizingMethod='scale')":this._el.style.backgroundImage='url("'+a+'")',this._url=a},get:function(){return this._url},clear:function(){this._el&&(this._ctn.removeChild(this._el),delete this._el,delete this._url)},update:function(a){a?this.set(a):this.clear()}};var m=function(b){this._handlers={},this._options=b;var c=this;this._lastVolume="volume"in b?b.volume:1,this._isMuted="mute"in b?b.mute:!1,function(){for(var a in f)f.hasOwnProperty(a)&&g.push(a)}(),function(){var b=SAPO.Project.Video.Features.isOuter()?a:a.parent,c=b.SAPO._videoImplementations;if(c){var d=c[0],e=i(g,d);if(!e)return;g.splice(e,1),g.unshift(d)}}(),b.container=s$(b.container),this._poster=new l(b.container),b.video?(this._currentImplName=this.implChangeForMimeTypeToPlay(b.video.type),this._src=b.video.src,this._type=b.video.type):this._currentImplName=g[0];var d=function(a){c.fire("error",a.value||"IMPL_ERROR")},e=f[this._currentImplName],h={container:b.container,prefetch:b.prefetch,onReady:function(a){c._impl=a,a.removeEventListener("error",d),c._subscribeImplEvents(),c._subscribeVpaidImplEvents(),b.onReady&&b.onReady(c),a.setVolume(b.mute?0:b.volume||1),c.fire("impl_ready",c._currentImplName),c.fire("ready",c._currentImplName)}};if(b.video&&(h.src=this._src),!e)return void setTimeout(function(){c.fire("error","FLASH_UNAVAILABLE")},0);var j=new e(h,this);j.addEventListener("error",d)};m.prototype={on:function(a,b){var c=this._handlers[a];c?c.push(b):this._handlers[a]=[b]},off:function(a,b){var c=this._handlers[a];if(c)for(var d=0,e=c.length;e>d;++d)c[d]===b&&(c.splice(d,1),--d,--e)},fire:function(a){var b=this._handlers[a];if(b)for(var c=0,d=b.length;d>c;++c)b[c]&&b[c].apply(null,arguments)},switchToImpl:function(a,c){var d,e=this,g=this._options;c&&"function"!=typeof c&&(d=c,c=b),c?g.onReady=c:delete g.onReady;var h=f[a];if(!h)return!1;this.isPlaying()&&this.pause(),this._currentImplName=a,this._impl.kill();var i=new h({container:g.container,prefetch:g.prefetch,video:d||g.video,onReady:function(a){e._impl=a,e._src=d?d.src:b,e._type=d?d.type:b,d&&e.fixSrcType(),e._subscribeImplEvents(),e._subscribeVpaidImplEvents(),g.onReady&&g.onReady(e),"volume"in g&&a.setVolume(g.volume),e.fire("ready",e._currentImplName)}},this);return i.addEventListener("error",function(a){e.fire("error",a.value)}),!0},fixSrcType:function(){"flash"===this._currentImplName&&"object"==typeof this._src?(this._src=this._src.rtmp,this._type="rtmp/mp4"):"html5"===this._currentImplName&&"object"==typeof this._src&&(this._src=this._src.hls,this._type="application/vnd.apple.mpegurl")},canAutoplay:function(){return this._impl?this._impl.canAutoplay():!0},load:function(a){var b=this,c=function(){b.load(a),b.off("impl_ready",c)};if(!this._impl||!this._impl.isReady)return void this.on("impl_ready",c);try{var d=this.implChangeForMimeTypeToPlay(a.type);if(d)return-1!==d.indexOf("vpaid")?this.switchToImpl(d,a):this.switchToImpl(d,function(){b.load(a)});this._type=a.type,this._src=a.src,this.fixSrcType(),this._impl.load(this._src,this._type,this._options.autoplay,a.extras),this.fire("load",this._src,this._type),this._options.startTime&&!this.isLive()&&(this.setCurrentTime2(this._options.startTime),delete this._options.startTime)}catch(e){return this.fire("error","URL_OF_UNKNOWN_OR_UNSUPPORTED_MIME_TYPE")}},resize:function(a){this._impl&&this._impl.resize&&this._impl.resize(a)},unload:function(){this._impl.unload()},isPlaying:function(){try{return this._impl.isPlaying()}catch(a){return!1}},play:function(){try{this._impl.play()}catch(a){}},pause:function(){try{this._impl.pause()}catch(a){}},stop:function(){this.pause(),this.setCurrentTime(0)},togglePlay:function(){return this.isPlaying()?this.pause():this.play(),!0},getCurrentTime:function(){return this._impl.getCurrentTime()},setCurrentTime:function(a){this._impl.setCurrentTime(a)},getDuration:function(){return this._impl?this._impl.getDuration():void 0},getCache:function(a){return this._impl.getCache(a)},isLive:function(){return this._impl.isLive()},isReady:function(){return this._impl?this._impl.isReady():!1},scrub:function(a){var b=this.getCurrentTime()+a,c=this.getDuration();0>b&&(b=0),b>c&&(b=c),this.setCurrentTime(b)},getVolume:function(){return this._impl.getVolume()},setVolume:function(a){this._impl.setVolume(a)},changeVolume:function(a){var b=this.getVolume()+a;0>b&&(b=0),b>1&&(b=1),this.setVolume(b)},mute:function(){this._isMuted=!0,this._lastVolume=this.getVolume(),this.setVolume(0)},unmute:function(){this._isMuted=!1,this.setVolume(this._lastVolume)},toggleMute:function(){return this._isMuted?this.unmute():this.mute(),this._isMuted},isMuted:function(){return this._isMuted},getVideoSize:function(){return this._impl.getVideoSize()},getContainerSize:function(){var a=this._impl._el;return[a.offsetWidth,a.offsetHeight]},getPoster:function(){return this._poster.get()},updatePoster:function(a){this._poster.update(a);var b=this;!b._poster._subscribed&&a&&(d.observe(b._poster._el,"click",function(){b.fire("click")}),b._poster._subscribed=!0)},clearPoster:function(){},getElement:function(){return this._impl.getElement()},kill:function(){this._impl&&this._impl.kill(),this._poster.clear()},getCurrentSrc:function(){return this._src},getCurrentMimeType:function(){return this._type},getCurrentImplName:function(){return this._currentImplName},isImplAvailable:function(a){return!!f[a]},getAvailableImpls:function(){return g.slice()},canMimeTypeBePlayedByImpl:function(a,b){if("string"!=typeof a){for(var c,d=0,e=a.length;e>d;++d)if(c=a[d],this.canMimeTypeBePlayedByImpl(c,b))return!0;return!1}var g=f[b];return g.canMimeTypeBePlayed(a)},implChangeForMimeTypeToPlay:function(a){var b,c=g.slice();if(this._currentImplName){if(this.canMimeTypeBePlayedByImpl(a,this._currentImplName))return;b=i(c,this._currentImplName),c.splice(b,1)}var d,e,f=c.length;for(e=0;f>e;++e)if(d=c[e],this.canMimeTypeBePlayedByImpl(a,d))return d;throw'This mime type cannot be played "'+a+'"'},setCurrentTime2:function(a){if(!e.isIOS&&!SAPO.Browser.IE&&"html5"===this.getCurrentImplName()){var b=this._impl,c=b._el.getAttribute("src"),d=c.lastIndexOf("#");if(-1!==d&&(c=c.substring(0,d)),c=[c,a].join("#t="),b._el.setAttribute("src",c),b._el.load(),!e.isAndroid)return}var f=this,g=8,h="flash"===this.getCurrentImplName()?.25:.125,i=250,j=function k(){--g;try{f.setCurrentTime(a);var b=f.getCurrentTime();Math.abs(b-a)<=h&&(g=0),h*=2}catch(c){}g?setTimeout(k,i):f.play()};j()},_subscribeVpaidImplEvents:function(){var a=this._impl,b=this;if("_aw"in a){var c=function(){},d=a._aw;d.subscribeSane("AdImpression",function(){c("AdImpression"),b.fire("impression")}),d.subscribeSane("AdStarted",function(){c("AdStarted"),a._awState.playing=!0,a.fire("play")}),d.subscribeSane("AdPlaying",function(){c("AdPlaying"),a._awState.playing=!0,a.fire("play")}),d.subscribeSane("AdPaused",function(){c("AdPaused"),a._awState.playing=!1,a.fire("pause")}),d.subscribeSane("AdStopped",function(){c("AdStopped"),a._awState.ended=!0,a.fire("ended")}),d.subscribeSane("AdDurationChange",function(){c("AdDurationChange"),a.fire("durationchange")}),d.subscribeSane("AdRemainingTimeChange",function(){c("AdRemainingTimeChange"),a.fire("timeupdate")}),d.subscribeSane("AdVideoComplete",function(){c("AdVideoComplete")}),setTimeout(function(){a.fire("durationchange")},1e3)}},_subscribeImplEvents:function(){var a=this._impl,b=this;"flash"===this._currentImplName&&a.addEventListener("click",function(a){b.fire("click",a)}),a.addEventListener("durationchange",function(){b.fire("durationchange",a.getDuration())}),a.addEventListener("ended",function(){b.fire("ended")}),a.addEventListener("error",function(a){var c;c=a&&a.target&&a.target.error?"HTML5_"+j[a.target.error.code]:a.value,b.fire("error",c)}),a.addEventListener("loadedmetadata",function(){b.fire("loadedmetadata",a.getVideoSize())}),a.addEventListener("pause",function(){b.fire("pause")}),a.addEventListener("play",function(){b.fire("play")}),a.addEventListener("progress",function(){b.fire("progress")}),a.addEventListener("timeupdate",function(){var c=a.getCurrentTime();b._poster._subscribed&&c>=0&&!e.isIPhoneOrIPod&&b.clearPoster(),b.fire("timeupdate",c)}),a.addEventListener("volumechange",function(){b.fire("volumechange",a.getVolume())}),a.addEventListener("waiting",function(){b.fire("waiting")}),"flash"===this._currentImplName&&a.addEventListener("canplaythrough",function(){b.fire("playing")}),a.addEventListener("playing",function(){b.fire(a._el.seeking?"waiting":"playing")}),a.addEventListener("seeked",function(){b.fire("playing")}),"html5"===this._currentImplName&&a._el.addEventListener("webkitendfullscreen",function(){a.pause()})}},c.VideoAbstract=m}(window),function(){"use strict";var a=SAPO.Project.Video.Features;if(a.supportsVideoElement){var b=/android/.test(navigator.userAgent.toLowerCase()),c=Math.round(250),d=1,e=function(a,b){for(var c,d,e=b.length-1;e>=0;--e)if(c=b.start(e),d=b.end(e),a>=c&&d>=a)return e;return-1},f=function(a,b){if(this._options=a,this._va=b,this._recreateElement(),this._options.onReady){var c=this;setTimeout(function(){c._va.fire("impl_ready","html5")},0),this._options.onReady(this),this._isReady=!0}};f.prototype={_recreateElement:function(){this._el=document.createElement("video");var a=this._options;this._el.setAttribute("width","2"),this._el.setAttribute("height","1"),this._el.setAttribute("tabindex","-1"),this._el.setAttribute("poster","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="),this._el.className="video";var b="auto";b=a.prefetch===!0?"auto":"none",this._el.setAttribute("preload",b),this._el.setAttribute("x-webkit-airplay","allow"),this._options.container&&(this._options.insteadOf?this._options.container.parentNode.replaceChild(this._el,this._options.container):this._options.container.appendChild(this._el)),a.src&&this._el.setAttribute("src",a.src),a.poster&&this.setPoster(a.poster),this._canAutoplay=!SAPO.Project.Video.Features.isMobile;var c=this;if(SAPO.Project.Video.Features.isMobile){var d=function i(){c._canAutoplay=!0,c._el.removeEventListener("play",i)};this._el.addEventListener("play",d)}if(SAPO.Project.Video.Features.isAndroid){var e,f=function(){c._va.fire("ended"),e=void 0},g=function(){clearTimeout(e),e=void 0},h=function(){var a=c._el.duration;if(isFinite(a)&&!c._isLive){var b=c._el.currentTime;if(isFinite(b)&&.2>a-b){if(e)return;c._el.addEventListener("ended",g),e=setTimeout(f,220)}}};this._el.addEventListener("timeupdate",h)}SAPO.Project.Video.Features.isIPhoneOrIPod&&(this._el.addEventListener("webkitbeginfullscreen",function(){c._el.play()}),this._el.addEventListener("webkitendfullscreen",function(){c._va.fire("ended",!0)}))},addEventListener:function(a,b){this._el.addEventListener(a,b,!1)},removeEventListener:function(a,b){this._el.removeEventListener(a,b,!1)},canAutoplay:function(){return this._canAutoplay},load:function(a,b,c){var d=this;this._isLive=-1!==a.indexOf(".m3u8"),delete this._duration,delete this._realDims,this._loadedmetadataEventWasFired=!1;var e=this._lastType||b;SAPO.Project.Video.Features.isIPhoneOrIPod&&e!==b&&(this._el.parentNode.removeChild(this._el),this._el=void 0,this._recreateElement(),d._va.fire("pause"),this._va._subscribeImplEvents()),this._el.setAttribute("src",a),this._lastType=b,c&&this._el.setAttribute("autoplay",""),this._el.load(),c&&this.play()},unload:function(){this._el.setAttribute("src",""),this._el.removeAttribute("src")},isPlaying:function(){return!this._el.paused&&!this._el.ended},play:function(){this._el.play(),this._isLive&&!this._timerI&&(this._timerI=setInterval(this._onTimerLive.bindObj(this),c))},pause:function(){this._el.pause(),this._isLive&&this._timerI&&this._resetTimer()},getCurrentTime:function(){try{return this._el.currentTime}catch(a){return 0}},setCurrentTime:function(a){try{this._el.currentTime=a}catch(b){}},getDuration:function(){return this._isLive?void 0:this._duration?this._duration:this._el?this._el.duration:void 0},getCache:function(a){var b=this._el.currentTime,c=this._el.duration,d=e(b,this._el.buffered);if(-1!==d){var f=this._el.buffered.start(d),g=this._el.buffered.end(d),h=g-f;return a&&(f/=c,g/=c,h/=c),{start:f,end:g,length:h}}},isLive:function(){return!!this._isLive},isReady:function(){return!!this._isReady},getVolume:function(){return this._el.volume},setVolume:function(a){this._el.volume=a},getVideoSize:function(){if(this._realDims)return this._realDims;var a=[this._el.videoWidth,this._el.videoHeight];return a[0]>100&&a[1]>100&&(this._realDims=a),a},getElement:function(){return this._el},kill:function(){this._timerI&&this._resetTimer(),this._el.parentNode.removeChild(this._el),this._el=void 0},_resetTimer:function(){clearInterval(this._timerI),delete this._timerI,delete this._liveStartT},_onTimerLive:function(){var a=(new Date).valueOf()/1e3;if(this._liveStartT){var b=this.getCurrentTime(),c=a-this._liveStartT,d=.1>b||isNaN(b);d&&c>5||d||(this._va.fire("timeupdate"),this._liveStartT=a)}else this._liveStartT=a}},d&&(f.prototype._onTimerLive=f.prototype._onTimer);var g=function(a){return function(b){a._memo||(a._memo={});var c;return b in a._memo?c=a._memo[b]:(c=a(b),a._memo[b]=c),c}};f.canMimeTypeBePlayed=f.prototype.canMimeTypeBePlayed=g(function(a){a=a.toLowerCase();var c=document.createElement("video");switch(a){case"video/x-flv":case"rtmp/flv":case"rtmp/mp4":return!1;case"video/mp4":return!!c.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"");case"application/vnd.apple.mpegurl":case"application/x-mpegurl":return!!(c.canPlayType("application/x-mpegurl").replace(/^no$/,"")||c.canPlayType("application/vnd.apple.mpegurl").replace(/^no$/,"")||b);default:return!!c.canPlayType(a)}}),SAPO.namespace("Project.Video.Controllers"),SAPO.Project.Video.Controllers.VideoHtml5Impl=f,SAPO.Project.Video.Controllers.videoImpls.html5=f}}(),function(){"use strict";var a=SAPO.Project.Video.Features,b=SAPO.Utility.SWF;if(a.hasFlash){var c=Math.round(250),d=5,e=1,f={},g=function(a){return function(b){var c=f[b];c["_on"+a].apply(c,arguments)}};window.svFlashReady=g("Ready"),window.svFlashEvent=g("Event"),window.svFlashError=g("Error");var h=function(a){this._handlers={},this._id="svFl"+~~(1e4*Math.random()),f[this._id]=this,a||(a={}),"container"in a||(a.container=document.body),this._options=a;var c={readyFunction:"svFlashReady",eventProxyFunction:"svFlashEvent",errorEventProxyFunction:"svFlashError",preload:a.prefetch};a.poster&&(c.poster=a.poster),a.src&&(this._tmp=a.src),this._el=b.embed({swf:"//"+SV_DOMAIN+(window.location.port?":"+window.location.port:"")+"/Projects/Video/"+SV_VERSION+"/flash/videojs.swf",dims:a.dimensions,id:this._id,container:a.container,params:{allowfullscreen:!0,allowscriptaccess:"always",wmode:"opaque"},flashvars:c,insteadOf:!!a.insteadOf}),this._el.style.zIndex=1e4,this._el.className="video fill",this._el.setAttribute("tabindex",-1)
};h.prototype={addEventListener:function(a,b){var c=this._handlers[a];c?c.push(b):this._handlers[a]=[b]},removeEventListener:function(a,b){var c=this._handlers[a];if(c)for(var d=0,e=c.length;e>d;++d)c[d]===b&&(c.splice(d,1),--d,--e)},fire:function(a,b){this._onEvent(this._id,a,b)},canAutoplay:function(){return!0},unload:function(){this._el.vjs_setProperty("src","")},load:function(a,b,c){if(delete this._isLivePaused,a!==this._src){var d=this.isPlaying();if(d&&this.pause(),this._noVideoYet=!0,this._options.prefetch&&(c=!0),delete this._loadedMetadata,delete this._lastDuration,this._parseURI(a),this._setupTimer(),!this._id)return void(this._tmp=a);/\.mp3$/.test(this._src)?this._el.vjs_setProperty("mode","audio"):this._el.vjs_setProperty("mode","video"),this._isLive?(this._el.vjs_setProperty("rtmpConnection",this._rtmpConnection),this._el.vjs_setProperty("rtmpStream",this._rtmpStream)):this._el.vjs_setProperty("src",this._src),this._el.vjs_load(),c&&this.play()}},isPlaying:function(){return this._el.vjs_getProperty("currentTime")>0&&!this._el.vjs_getProperty("paused")&&!this._ended},play:function(){return this._ended?(this._ended=!1,this._el.vjs_setProperty("currentTime",0),this._el.vjs_play(),void this.fire("play")):void(this._isLivePaused?(delete this._isLivePaused,this._el.vjs_load(),this._el.vjs_play()):this._el.vjs_play())},pause:function(){this._el.vjs_pause(),this._isLive&&(this._isLivePaused=!0)},getCurrentTime:function(){return this._el.vjs_getProperty("currentTime")},setCurrentTime:function(a){try{this._el.vjs_setProperty("currentTime",a),this.fire("timeupdate")}catch(b){}},getDuration:function(){return this._isLive||!this._id?void 0:this._el.vjs_getProperty("duration")},getCache:function(a){var b,c=1;if(b=this._el.vjs_getProperty("duration"),b>0){var d=this._el.vjs_getProperty("buffered");return a?d/=b:c=b,{start:0,end:d,length:d}}return{start:0,end:1,length:1}},isLive:function(){return!!this._isLive},isReady:function(){return!!this._isReady},getVolume:function(){return this._el.vjs_getProperty("volume")},setVolume:function(a){try{this._el.vjs_setProperty("volume",a)}catch(b){}},getVideoSize:function(){return[this._el.vjs_getProperty("videoWidth"),this._el.vjs_getProperty("videoHeight")]},getElement:function(){return this._el},kill:function(){this._resetTimer(),this._el.parentNode.removeChild(this._el)},_parseURI:function(a){if(this._isLive="rtmp"===a.substring(0,4),this._isLive){var b=a.lastIndexOf("/");this._rtmpConnection=a.substring(0,b),this._rtmpStream=a.substring(b+1)}else this._src=a},_onReady:function(){this._isReady=!0,this._el.style.zIndex="",this._options.onReady&&(this._options.onReady(this),delete this._options.onReady),this.fire("impl_ready","flash"),this.fire("error",""),this._tmp&&(this.load(this._tmp,"",!!this._options.prefetch),delete this._tmp)},_onEvent:function(a,b,c){var d;if("stageclick"===b)b="click";else if("durationchange"===b){if(d=this.getDuration(),d===this._lastDuration)return;this._lastDuration=d}else if("loadedmetadata"===b){if(this._loadedMetadata)return;this._loadedMetadata=!0}else if("ended"===b){try{this._el.vjs_pause()}catch(e){}this._ended=!0,this.fire("pause")}else"timeupdate"===b&&(this._ended=!1);var f=this._handlers[b];"play"!==b||this._timerI?!this._timerI||"pause"!==b&&"ended"!==b||this._resetTimer():(delete this._noVideoYet,this._setupTimer());var g={target:this._el,srcElement:this._el,type:b};if(void 0!==c&&(g.value=c),f)for(var h=0,i=f.length;i>h;++h)f[h](g)},_onError:function(a,b){if("srcnotfound"===b){if(!this._src)return;return this.fire("error","FLASH_SOURCE_NOT_FOUND")}this.fire("error","FLASH_GENERAL_ERROR")},_setupTimer:function(){this._timerI&&this._resetTimer();var a=this._isLive?this._onTimerLive:this._onTimer;this._timerI=setInterval(a.bindObj(this),c),a.apply(this)},_resetTimer:function(){clearInterval(this._timerI),delete this._timerI,delete this._liveStartT,delete this._prevState},_onTimer:function(){var a=this.getCurrentTime(),b=JSON.stringify(this.getCache());a!==this._lastT&&(this.fire("timeupdate"),this._lastT=a),b!==this._lastC&&(this._lastC=b,this.fire("progress"))},_onTimerLive:function(){var a=(new Date).valueOf()/1e3;this._liveStartT||(this._liveStartT=a,this._prevCT=this.getCurrentTime(),this.fire("timeupdate"),this._lastT=0);var b=this.getCurrentTime(),c=a-this._liveStartT,e=b===this._prevCT;e&&c>d?"ERR"!==this._prevState&&(this.fire("error","NO_STREAM"),this._prevState="ERR"):e||("OK"!==this._prevState&&(this.fire("error",""),this._prevState="OK"),this._liveStartT=a,this._prevCT=b),c!==this._lastT&&(this.fire("timeupdate"),this._lastT=c)}},e&&(h.prototype._onTimerLive=h.prototype._onTimer),h.canMimeTypeBePlayed=h.prototype.canMimeTypeBePlayed=function(a){switch(a){case"video/mp4":case"video/flv":case"video/x-flv":case"rtmp/flv":case"rtmp/mp4":case"audio/mp3":return!0;default:return!1}},SAPO.namespace("Project.Video.Controllers"),SAPO.Project.Video.Controllers.VideoFlashImpl=h,SAPO.Project.Video.Controllers.videoImpls.flash=h}}(),function(){"use strict";var a=SAPO.Project.Video.Features,b=SAPO.Utility.SWF;if(a.hasFlash){var c;window.onHLSReady=function(){c._onReady()},window.onManifest=function(a){c._duration=a,c.fire("durationchange"),c.fire("loadedmetadata"),c._startPlaying&&c.play()},window.onVideoSize=function(a,b){c._videoDimensions=[a,b],c.fire("loadedmetadata")},window.onComplete=function(){c.fire("ended")},window.onError=function(a){c._onError(a)},window.onPosition=function(a){c._currentTime=a.position,c.fire("timeupdate")},window.onState=function(a){c._state=a;var b;switch(a){case"PAUSED":case"PAUSED_BUFFERING":b="pause";break;case"PLAYING":case"PLAYING_BUFFERING":b="play"}-1!==a.indexOf("_BUFFERING"),b&&c.fire(b)},window.onSwitch=function(a){c._stream=a};var d=function(a){c=this,window.top.pl=c,a.src&&(this._tmp=a.src),this._options=a,this._handlers={},this._volume=1,this._videoDimensions=[1,1],this._el=b.embed({swf:"//"+SV_DOMAIN+(window.location.port?":"+window.location.port:"")+"/Projects/Video/"+SV_VERSION+"/flash/flashlsChromeless.swf",dims:a.dimensions,id:this._id,container:a.container,params:{allowfullscreen:!0,allowscriptaccess:"always",wmode:"opaque",quality:"high"},flashvars:{},insteadOf:!!a.insteadOf}),this._el.style.zIndex=1e4,this._el.className="video fill"};d.prototype={addEventListener:function(a,b){var c=this._handlers[a];c?c.push(b):this._handlers[a]=[b]},removeEventListener:function(a,b){var c=this._handlers[a];if(c)for(var d=0,e=c.length;e>d;++d)c[d]===b&&(c.splice(d,1),--d,--e)},fire:function(a,b){var c=this._handlers[a],d={target:this._el,srcElement:this._el,type:a};if(void 0!==b&&(d.value=b),c)for(var e=0,f=c.length;f>e;++e)c[e](d)},canAutoplay:function(){return!0},unload:function(){this._el.playerStop()},load:function(a,b,c){this._startPlaying=!!c,this._el.playerLoad(a)},isPlaying:function(){return"PLAYING"===this._state||"PLAYING_BUFFERING"===this._state},play:function(){this._el.playerPlay()},pause:function(){this._el.playerPause()},getCurrentTime:function(){return this._currentTime},setCurrentTime:function(){},getDuration:function(){return this._duration},getCache:function(a){var b=a?1:this._duration;return{start:0,end:b,length:b}},isLive:function(){return!!this._isLive},isReady:function(){return!!this._isReady},getVolume:function(){return this._volume},setVolume:function(a){this._volume=a,this._el.playerVolume(100*a)},getVideoSize:function(){return this._videoDimensions},getElement:function(){return this._el},kill:function(){this._el.stop(),this._el.parentNode.removeChild(this._el),c=void 0},setStream:function(a){this._el.playerSetLevel(a)},getStreamsLength:function(){return this._el.getLevels().length},getStreams:function(){function a(a){var b=/([^\/]+)\.m3u8/.exec(a.url);b=b?b[1]:a.url,c.push({name:b,playlist:a.url,bitRate:~~(a.bitrate/1024),size:[a.width,a.height]})}for(var b,c=[],d=0,e=this._el.getLevels();b=e[d];)a(b),++d;return c},_onReady:function(){this._isReady=!0,this._el.style.zIndex="",this._options.onReady&&(this._options.onReady(this),delete this._options.onReady),this.fire("error",""),this.fire("impl_ready","flashhls"),this._tmp&&(console.log("trying autoplay..."),this.load(this._tmp),delete this._tmp)},_onError:function(a,b){return console.log("onError",b),"srcnotfound"===b?this.fire("error","FLASH_SOURCE_NOT_FOUND"):void this.fire("error","FLASH_GENERAL_ERROR")}},d.canMimeTypeBePlayed=d.prototype.canMimeTypeBePlayed=function(a){switch(a){case"application/x-mpegurl":case"application/vnd.apple.mpegurl":return!0;default:return!1}},SAPO.namespace("Project.Video.Controllers"),SAPO.Project.Video.Controllers.VideoFlashHLSImpl=d,SAPO.Project.Video.Controllers.videoImpls.flashhls=d}}(),function(){"use strict";var a=SAPO.Project.Video.Features;if(a.hasFlash){var b=function(a){this._handlers={},this._ctn=a.container,this.init(a)};b.prototype={init:function(a){var b=a.video.extras,c=this;this._awState={};var d=function(b){var d=a.container.lastChild;c._el=d,d.style.position="absolute",d.style.left=0,d.style.top=0,setTimeout(c.resize.bindObj(c),500),c._aw=b,a.onReady(c)};b.builder(b.item,a.container,d)},resize:function(a){a||(a=[this._ctn.offsetWidth,this._ctn.offsetHeight]),this._el.setAttribute("width",a[0]),this._el.setAttribute("height",a[1]),this._aw.resizeAd(a[0],a[1])},addEventListener:function(a,b){var c=this._handlers[a];c?c.push(b):this._handlers[a]=[b]},removeEventListener:function(a,b){var c=this._handlers[a];if(c)for(var d=0,e=c.length;e>d;++d)c[d]===b&&(c.splice(d,1),--d)},fire:function(a,b){var c=this._handlers[a];if(c)for(var d,e=0,f=c.length;f>e;++e)(d=c[e])(void 0!==b?{type:a,value:b}:{type:a})},canAutoplay:function(){return!0},unload:function(){},load:function(){},isPlaying:function(){return this._awState?this._awState.playing:!1},play:function(){this._aw.resumeAd()},pause:function(){this._aw.pauseAd()},getCurrentTime:function(){return this._aw.getAdDuration()-this._aw.getAdRemainingTime()},setCurrentTime:function(){},getDuration:function(){try{return this._aw.getAdDuration()}catch(a){return 10}},getCache:function(){return{start:0,end:1,length:1}},isLive:function(){return!1},isReady:function(){return!!this._aw},getVolume:function(){return this._aw.getAdVolume()},setVolume:function(a){try{this._aw.setAdVolume(a)}catch(b){}},getVideoSize:function(){return[this._aw.getAdWidth(),this._aw.getAdHeight()]},getElement:function(){return this._el},kill:function(){this._el.parentNode.removeChild(this._el)}},b.canMimeTypeBePlayed=b.prototype.canMimeTypeBePlayed=function(a){return"application/x-shockwave-flash"===a},SAPO.namespace("Project.Video.Controllers"),SAPO.Project.Video.Controllers.VPAIDFlashAdUnit=b,SAPO.Project.Video.Controllers.videoImpls.vpaid_flash_ad_unit=b}}(),function(){"use strict";var a=SAPO.Project.Video.Features;if(a.supportsVideoElement||a.hasFlash){var b=function(a){this._handlers={},this._ctn=a.container;var b=a.video.extras,c=this;this._awState={};var d=function(b){var d=a.container.lastChild;c._el=d,d.style.position="absolute",d.style.left=0,d.style.top=0,setTimeout(c.resize.bindObj(c),500),c._aw=b,a.onReady(c)};b.builder(b.item,a.container,d)};b.prototype={resize:function(a){a||(a=[this._ctn.offsetWidth,this._ctn.offsetHeight]),this._el.setAttribute("width",a[0]),this._el.setAttribute("height",a[1]),this._aw.resizeAd(a[0],a[1])},addEventListener:function(a,b){var c=this._handlers[a];c?c.push(b):this._handlers[a]=[b]},removeEventListener:function(a,b){var c=this._handlers[a];if(c)for(var d=0,e=c.length;e>d;++d)c[d]===b&&(c.splice(d,1),--d)},fire:function(a,b){var c=this._handlers[a];if(c)for(var d,e=0,f=c.length;f>e;++e)(d=c[e])(void 0!==b?{type:a,value:b}:{type:a})},canAutoplay:function(){return!0},unload:function(){},load:function(){},isPlaying:function(){return this._awState?this._awState.playing:!1},play:function(){this._aw.resumeAd()},pause:function(){this._aw.pauseAd()},getCurrentTime:function(){return this._aw.getAdDuration()-this._aw.getAdRemainingTime()},setCurrentTime:function(){},getDuration:function(){try{return this._aw.getAdDuration()}catch(a){return 10}},getCache:function(){return{start:0,end:1,length:1}},isLive:function(){return!1},isReady:function(){return!!this._aw},getVolume:function(){return this._aw.getAdVolume()},setVolume:function(a){try{this._aw.setAdVolume(a)}catch(b){}},getVideoSize:function(){return[this._aw.getAdWidth(),this._aw.getAdHeight()]},getElement:function(){return this._el},kill:function(){this._el.parentNode.removeChild(this._el)}},b.canMimeTypeBePlayed=b.prototype.canMimeTypeBePlayed=function(a){return"text/javascript"===a||"application/javascript"===a},SAPO.namespace("Project.Video.Controllers"),SAPO.Project.Video.Controllers.VPAIDHtml5AdUnit=b,SAPO.Project.Video.Controllers.videoImpls.vpaid_html5_ad_unit=b}}(),function(){var a={VERSION:"2.2.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(b,c){var d,e="string"==typeof b.initial?{state:b.initial}:b.initial,f=b.terminal||b["final"],g=c||b.target||{},h=b.events||[],i=b.callbacks||{},j={},k=function(b){var c=b.from instanceof Array?b.from:b.from?[b.from]:[a.WILDCARD];j[b.name]=j[b.name]||{};for(var d=0;d<c.length;d++)j[b.name][c[d]]=b.to||c[d]};e&&(e.event=e.event||"startup",k({name:e.event,from:"none",to:e.state}));for(var l=0;l<h.length;l++)k(h[l]);for(d in j)j.hasOwnProperty(d)&&(g[d]=a.buildEvent(d,j[d],b));for(d in i)i.hasOwnProperty(d)&&(g[d]=i[d]);return g.current="none",g.is=function(a){return a instanceof Array?a.indexOf(this.current)>=0:this.current===a},g.can=function(b){return!this.transition&&(j[b].hasOwnProperty(this.current)||j[b].hasOwnProperty(a.WILDCARD))},g.cannot=function(a){return!this.can(a)},g.error=b.error||function(a,b,c,d,e,f,g){throw g||f},g.isFinished=function(){return this.is(f)},e&&!e.defer&&g[e.event](),g},doCallback:function(b,c,d,e,f,g){if(c)try{return c.apply(b,[d,e,f].concat(g))}catch(h){if("DEV"===SV_ENV)throw h;return b.error(d,e,f,g,a.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",h)}},beforeAnyEvent:function(b,c,d,e,f){return a.doCallback(b,b.onbeforeevent,c,d,e,f)},afterAnyEvent:function(b,c,d,e,f){return a.doCallback(b,b.onafterevent||b.onevent,c,d,e,f)},leaveAnyState:function(b,c,d,e,f){return a.doCallback(b,b.onleavestate,c,d,e,f)},enterAnyState:function(b,c,d,e,f){return a.doCallback(b,b.onenterstate||b.onstate,c,d,e,f)},changeState:function(b,c,d,e,f){return a.doCallback(b,b.onchangestate,c,d,e,f)},beforeThisEvent:function(b,c,d,e,f){return a.doCallback(b,b["onbefore"+c],c,d,e,f)},afterThisEvent:function(b,c,d,e,f){return a.doCallback(b,b["onafter"+c]||b["on"+c],c,d,e,f)},leaveThisState:function(b,c,d,e,f){return a.doCallback(b,b["onleave"+d],c,d,e,f)},enterThisState:function(b,c,d,e,f){return a.doCallback(b,b["onenter"+e]||b["on"+e],c,d,e,f)},beforeEvent:function(b,c,d,e,f){return!1===a.beforeThisEvent(b,c,d,e,f)||!1===a.beforeAnyEvent(b,c,d,e,f)?!1:void 0},afterEvent:function(b,c,d,e,f){a.afterThisEvent(b,c,d,e,f),a.afterAnyEvent(b,c,d,e,f)},leaveState:function(b,c,d,e,f){var g=a.leaveThisState(b,c,d,e,f),h=a.leaveAnyState(b,c,d,e,f);return!1===g||!1===h?!1:a.ASYNC===g||a.ASYNC===h?a.ASYNC:void 0},enterState:function(b,c,d,e,f){a.enterThisState(b,c,d,e,f),a.enterAnyState(b,c,d,e,f)},buildEvent:function(b,c,d){return function(){var e=this.current,f=c[e]||c[a.WILDCARD]||e,g=Array.prototype.slice.call(arguments);if(this.transition)return this.error(b,e,f,g,a.Error.PENDING_TRANSITION,"event "+b+" inappropriate because previous transition did not complete");if(this.cannot(b))return this.error(b,e,f,g,a.Error.INVALID_TRANSITION,"event "+b+" inappropriate in current state "+this.current);if(d.debug&&console.log("%c %s ->( %s )-> %s","color:#D00",e,b,f),!1===a.beforeEvent(this,b,e,f,g))return a.Result.CANCELLED;if(e===f)return a.afterEvent(this,b,e,f,g),a.Result.NOTRANSITION;var h=this;this.transition=function(){return h.transition=null,h.current=f,a.enterState(h,b,e,f,g),a.changeState(h,b,e,f,g),a.afterEvent(h,b,e,f,g),a.Result.SUCCEEDED},this.transition.cancel=function(){h.transition=null,a.afterEvent(h,b,e,f,g)};var i=a.leaveState(this,b,e,f,g);return!1===i?(this.transition=null,a.Result.CANCELLED):a.ASYNC===i?a.Result.PENDING:this.transition?this.transition():void 0}}};SAPO.Project.Video.FSM=a}(),function(a,b){"use strict";var c=SAPO.Project.Video._,d=SAPO.Dom.Css,e=SAPO.Dom.Element,f=SAPO.Dom.Event,g=SAPO.Project.Video.Features,h=SAPO.Utility.objectKeys,i=/^(https?:)?(\/\/)?([a-z0-9\.]+)\/([^\/]{20})\/mov\/(\d+)/;SAPO.Browser.IE&&!function(){var a=parseInt(SAPO.Browser.version,10),b=[];10>a&&b.push("lt-ie10"),9>a&&b.push("lt-ie9"),document.documentElement.className=b.join(" ")}();var j,k,l,m,n,o,p=a.parent.SAPO.Project.Video.Features.inExternalIframe(),q={},r=[],s=[],t=function(){return r[r.length-2]},u=function(){return s[s.length-2]},v={},w=String.fromCharCode(33,60,122,120,99,118,98,110,109,44,33);SAPO.namespace("Project.Video.Controllers");var x=[];SAPO.Project.Video.Controllers._plugins=x;var y,z=SAPO.Utility.load,A=SAPO.Utility.save,B=/mov\/(\d+)$/,C=function(a,b){return a.replace(B,"mov/"+b)},D={autoplay:b,requestURL:b,metadata:b,zoneId:b,vast:b,redirectURL:b,isAd:b,isLive:b},E={},F={},G={},H="play",I="play",J=function(a){if(a&&a.poster)if(j.noSapoVideos)l.updatePoster(a.poster);else{var b=SAPO.Project.Video.thumbs.cropPosterTransform(a.poster+"/560x420",[560,420],a.dimensions,a.duration);l.updatePoster(b)}else;},K=SAPO.Project.Video.FSM.create({initial:"IDLE",debug:0,error:function(){},events:[{from:"IDLE",to:"LOAD_REQSTED",name:"load_msg"},{from:"LOAD_REQSTED",to:"IDLE",name:"metadata_error"},{from:"LOAD_REQSTED",to:"HAS_METADATA",name:"metadata_ok"},{from:"HAS_METADATA",to:"NEEDS_VAST",name:"needs_vast"},{from:"HAS_METADATA",to:"WAITING_PLAY",name:"waiting_play"},{from:"NEEDS_VAST",to:"LOAD_REQSTED",name:"load_msg"},{from:"NEEDS_VAST",to:"WAITING_PLAY",name:"vast_wo_preroll"},{from:"NEEDS_VAST",to:"NEEDS_PLAYBCK",name:"vast_wo_preroll_auto"},{from:"WAITING_PLAY",to:"NEEDS_VAST",name:"needs_vast2"},{from:"WAITING_PLAY",to:"NEEDS_PLAYBCK",name:"needs_playbck"},{from:"WAITING_PLAY",to:"LOAD_REQSTED",name:"load_msg"},{from:"NEEDS_PLAYBCK",to:"IDLE",name:"redirect_url_ok_error"}],callbacks:{onstate:function(a,b,c){m&&m("fsm_state_changed",{from:b,to:c,name:a})},onenterIDLE:function(){if(l){var a=D.redirectURL;if(a){m("load",{requestURL:D.requestURL,isAd:D.isAd,isLive:D.isLive,guidURL:D.guidURL,redirectURL:a,mimeType:D.mimeType,isExternal:D.isExternal}),j.autoplay&&(D.autoplay=!0,delete j.autoplay),l._options.autoplay=D.autoplay,m("state_changed",D.autoplay?"play":"pause"),l._options.startTime=D.isAd?b:j.startTime||G[D.guidURL],isFinite(l._options.startTime)&&(m("time_updated",l._options.startTime),l._options.startTime===j.startTime&&delete j.startTime,l._options.startTime===G[D.guidURL]&&delete G[D.guidURL]);var c={src:a,type:D.mimeType,extras:q[a]};l.load(c)}}},onenterLOAD_REQSTED:function(){var a=D.guidURL,b=D.requestURL.split("/").pop(),c=b.indexOf("#");-1!==c&&(b=b.substring(0,c));var d=function(b,c){if(b){try{y.unload()}catch(d){}return l.fire("error","NO_SV_METADATA"),K.metadata_error()}if(!c.hasHD&&y.isHD()){var e=[c.pageURI,"mov","1"].join("/");return D.requestURL=e,K.onenterLOAD_REQSTED()}c.isLive=D.isLive,c.isAd=D.isAd,D.metadata=c,F[a]=c,m("metadata_changed",c),K.metadata_ok()},e=F[a];e?(e=JSON.parse(JSON.stringify(e)),e.fromSapoVideos&&(e.encid=b,e.requestURL=C(e.requestURL,b),e.fullURI=C(e.fullURI,b)),e.revisited=!0,setTimeout(function(){d(null,e)},0)):j.noSapoVideos||D.requestURL===D.guidURL?K.metadata_ok():SAPO.Project.Video.sapoVideosMetadata(D.requestURL,function(a,b){d(a,b)})},onenterHAS_METADATA:function(){var a=D.metadata,c=0;return j.zoneId!==b?c=j.zoneId:a.advertise&&isFinite(a.adwordsId)?c=a.adwordsId:a.advertise&&(c=642),D.zoneId=c,D.autoplay&&l.canAutoplay()?0===c||D.isAd||E[D.guidURL]&&D.wasAd?K.waiting_play():void K.needs_vast():(y.unloading(),K.waiting_play())},onenterNEEDS_VAST:function(){var b=D.metadata,c=D.zoneId,d=function(a,b,c){for(var d,e,f=h(b.ads),i=function(a,b){for(var c=a.length,d=new Array(c),e=0;c>e;++e)d[e]=a[e].replace(/\[ERRORCODE\]/,b);return d},k=f.length>0?b.ads[f[0]].error:[],n=0,o=b.parts.triggeredErrors.length;o>n;++n)d=b.parts.triggeredErrors[n],e=i(k,d.code||900),m("vast_error",d),m("metro",e,"vast_error");if(a)return K.vast_wo_preroll();if(g.isIPhoneOrIPod&&(b.parts.nonLinears=[]),!c){var p,r,s,t={},u=[];for(b.ads["*"]&&(m("metro",b.ads["*"].impression,"vast impression"),delete b.ads["*"]),n=0,o=b.parts.linears.length;o>n;++n)s=b.parts.linears[n],s.item.bag.stage in t||(p=s.item.bag.adId,r={duration:s.item.duration,tracking:s.item.bag.tracking,videoClicks:s.item.bag.videoClicks,adParameters:s.item.bag.adParameters,error:b.ads[p].error,impression:b.ads[p].impression,src:s.item.src,mimeType:s.mimeType,stage:s.item.bag.stage},t[s.item.bag.stage]=r,q[r.src]=s);for(n=0,o=b.parts.nonLinears.length;o>n;++n){s=b.parts.nonLinears[n],p=s.item.bag.adId,r={mimeType:s.mimeType,impression:b.ads[p].impression};for(var v in s.item)r[v]=s.item[v];u.push(r)}j.companionContainers.length>0&&b.parts.companions.length>0&&SAPO.Project.Video.VAST.handleCompanions(j.companionContainers,b.parts.companions),b.parts.linears=t,b.parts.nonLinears=u}m("vast",b,c),E[D.guidURL]=b;var w=b.parts.linears.pre,x=D.autoplay&&l.canAutoplay();if(J(F[D.guidURL]),w&&!c){var z={requestURL:w.src,duration:w.duration,isAd:!0,isLive:!1};x?(m("metadata_changed",z),y.load({requestURL:w.src,mimeType:w.mimeType,autoplay:!0,isAd:!0})):y.once("h_state_changed",function(){m("metadata_changed",z),y.load({requestURL:w.src,mimeType:w.mimeType,autoplay:!0,isAd:!0})})}else x?K.vast_wo_preroll_auto():K.vast_wo_preroll()},e=D.guidURL;if(e in E&&D.skipVastRequest)d(null,E[e],!0);else{var f=SAPO.Project.Video.VAST.SapoPubVAST(c,b,j.playerInterno);try{"string"==typeof a.top.OVERRIDE_VAST_URL&&(f=a.top.OVERRIDE_VAST_URL)}catch(i){}var k=function(a){return a[0]},n=function(a,b){var c=a.slice(),d=a.length;return b>=d?c:(c.splice(b,d-b),c)};SAPO.Project.Video.VAST.VASTRun({vastXmlUrl:f,bestMediaFile:function(a){return k(a)},bestNonLinears:function(a){return n(a,2)},bestCompanions:function(a){return n(a,2)},cb:d})}},onenterWAITING_PLAY:function(){D.guidURL&&G[D.guidURL]&&!D.isAd&&k._updateTime(G[D.guidURL],!0);var a=D.metadata;if(J(a),l.canAutoplay()&&(D.isAd||D.autoplay))return K.needs_playbck();var b=function(){0===D.zoneId||D.isAd||l.canAutoplay()&&D.autoplay?(D.autoplay=!0,K.needs_playbck()):(D.autoplay=!0,K.needs_vast2())};y.once("state_changed",b)},onenterNEEDS_PLAYBCK:function(){var a=D.requestURL,b={original:D.requestURL,processed:D.requestURL},c=function(a,c){D.redirectURL=a?b.original:c,K.redirect_url_ok_error()};y._inInternoMode=!!y.getOption("playerInterno"),y._inInternoMode&&!D.isLive&&(b.processed=[a,-1===a.indexOf("?")?"?":"&","player=INTERNO"].join("")),j.noSapoVideos||D.requestURL===D.guidURL?c(!1,b.original):(m("video_redirect",b),SAPO.Project.Video.sapoVideosVideoSource(b.processed,c))}}}),L=function(e){j=SAPO.extendObj({video:b,autoplay:!1,startTime:b,container:document.body,zoneId:b,allowPlayPause:!0,allowResize:!0,allowScrub:!0,allowVolume:!g.isMobile,allowKeyboard:!0,followSuggestionsInline:!1,staticGUI:!1,skipShare:!1,skipSuggestions:!1,skipCssPatch:!1,skipBranding:!1,supportPrivates:!1,noSapoVideos:!1,companionContainers:[],volume:1,mute:!1},e||{}),e=j;var h=SAPO.Project.Video.i18n;if("i18n"in e)for(var i in e.i18n)e.i18n.hasOwnProperty(i)&&(h[i]=e.i18n[i]);if(this._onClickBound=this._onClick.bindObj(this),"zoneId"in e)try{if(!("hashZoneId"in e))throw"no hashZoneId";if(e.hashZoneId!==SAPO.Utility.md5(e.zoneId+w))throw"wrong hashZoneId"}catch(p){delete e.zoneId}"string"==typeof e.container&&(e.container=s$(e.container)),this._staticDir=a.location.protocol+"//js.sapo.pt/Assets/Images/ProjectVideo";var q;q=SAPO.Utility.Mediator("DEV"===SV_ENV?{catchExceptions:!1,debug:!1}:{catchExceptions:!0,debug:!1}),this.subscribe=q.subscribe,this.unsubscribe=q.unsubscribe,this.once=q.once,m=q.publish,n=q.publishDelayed,SAPO.Project.Video.initUtils(this,m,n),o=a.parent.SAPO.Utility.FullScreen,o.isSupported?!function(){var a=0;q.subscribe("h_resize",function(b,c){"normal"===c&&(a=(new Date).valueOf())}),o.change(function(b){if(!b){var c=(new Date).valueOf()-a;c>1e3&&n(100,"h_resize","normal")}})}():o=b;var r=document.createElement("div");r.className="player",document.body.appendChild(r),k=new SAPO.Project.Video.GUI.Main(this,e,m,n,r),y=this;var s=function(a,b){m("error",""===b?"":c("flashUnavailableErrorMsg"))};l=new SAPO.Project.Video.Controllers.VideoAbstract({container:k._els.videoCtn,insteadOf:!0,volume:"volume"in e?e.volume:z("volume",1),mute:"mute"in e?e.mute:z("mute",!1),prefetch:!0,onReady:function(a){l=a,y.whenAbstractReady(l,y,k,m,n,s)}}),l.on("error",s);for(var v,A,B=function(a,b){j[a]=b},C=0,G=x.length;G>C;++C)v=x[C],j.noSapoVideos&&0===v._name.indexOf("sv_")||(A=new v(this,k,m,n,l,B));this.subscribe("cache_metadata",function(a,b){F[b.guid.substring(b.guid.indexOf("//"))]=b}),this.subscribe("load",function(){H="play",I="play",y._relayout()}),this.subscribe("invalidate_adwords",function(){var a=E[D.guidURL];a&&(a.parts.nonLinears=[])}),this.subscribe("state_changed",function(a,b){if(I=b,"pause"===b&&D.isAd&&D.isReady&&H!==b){var c=y.getCurrentTime(),d=y.getDuration();n(0,"invalidate_ad_roll",{autoplay:!0,complete:c>d-1})}}),this.subscribe("h_state_changed",function(a,b){H=b}),this.subscribe("invalidate_ad_roll",function(a,b){H="play";var c=E[t()];if(c){var d,e,f,g="pre mid post".split(" ");for(f=0;3>f;++f)if(e=g[f],d=c.parts.linears[e],d&&d.src===D.requestURL){d.tracking&&d.tracking.complete&&b.complete&&m("metro",d.tracking.complete,"vast_complete"),delete c.parts.linears[e];break}y.load(u(),!!b.autoplay,!1)}}),this.subscribe("call",function(){var a=Array.prototype.slice.call(arguments);a.shift();var b=a.shift(),c=JSON.stringify(a).split("");c.shift(),c.pop(),c=c.join(""),y[b].apply(y,a)}),this.subscribe("error",function(a,b){!b&&y._errorEl&&(r.removeChild(y._errorEl),delete y._errorMessageEl,delete y._errorEl),b&&(y._errorEl||(y._errorEl=document.createElement("div"),y._errorEl.className="fill error",y._errorMessageEl=document.createElement("div"),y._errorMessageEl.className="message",y._errorEl.appendChild(y._errorMessageEl),r.appendChild(y._errorEl)),d.removeClassNamesStartingWith(k._els.player,"at-","body"),d.removeClassNamesStartingWith(k._els.player,"video-is-","not-new"),y._errorMessageEl.innerHTML=b.replace(/\\n/g,"<br/>"))}),this._clickEl=k._els.aEl,f.observe(document.documentElement,"click",this._onClickBound),this._relayout(),f.observe(a,"resize",this._onWindowResize.bindObj(this)),f.observe(a,"beforeunload",this._onBeforeUnload.bindObj(this))};L.prototype={whenAbstractReady:function(a,d,e,g,h,i){e._volumeSlider&&e._volumeSlider.setValue(a._options.volume),g("mute",a._options.mute);var j={CORS_AND_FLASH_UNAVAILABLE:"withoutCorsOrFlashErrorMsg",FLASH_SOURCE_NOT_FOUND:"noVideoSourceErrorMsg",FLASH_UNAVAILABLE:"flashUnavailableErrorMsg",HTML5_MEDIA_ERR_SRC_NOT_SUPPORTED:"noVideoSourceErrorMsg",NO_SV_METADATA:"noSVMetadataErrorMsg",URL_OF_UNKNOWN_OR_UNSUPPORTED_MIME_TYPE:"unknownErrorMsg",NO_STREAM:"noStreamErrorMsg","NETCONNECTION.CONNECT.REJECTED":"noStreamErrorMsg","STREAM IS NOT PUBLIC":"noStreamErrorMsg"};a.on("error",function(b,d){a.off("error",i);var e=j[d?d.replace(/^\s+|\s+$|\n+$/g,"").toUpperCase():d]||"unknownErrorMsg";d&&(d=c(e)),g("error",d)}),a.on("ended",function(b,c){var d=c===!0;a.isPlaying()||"play"!==I||g("state_changed","pause"),(!d||D.isAd)&&g("ended",{requestURL:D.requestURL,isAd:D.isAd,isLive:D.isLive,isFake:d})}),a.on("warning",function(a){g("warning",a)}),a.on("impression",function(){var a=E[D.previousGuidURL],b=a.parts.linears.pre.impression;g("metro",b,"vast impression")}),a.on("pause",function(){g("state_changed","pause")}),a.on("play",function(){g("error",""),g("state_changed","play")}),a.on("progress",function(){g("progress")}),a.on("durationchange",function(){if(!D.metadata.fromSapoVideos){var b=a.getDuration();isFinite(b)&&(D.metadata.duration=b,D.metadata.isAd=D.isAd,g("metadata_changed",D.metadata))}}),a.on("loadedmetadata",function(c,e){if(D.isReady=!0,!D.metadata.fromSapoVideos){var f=a.getDuration(),h=D.isLive||!isFinite(f);D.metadata.requestURL=d.getCurrentRequestURL(),D.metadata.duration=h?b:f,D.metadata.dimensions=e,D.metadata.isAd=D.isAd,D.metadata.isLive=D.isLive,g("metadata_changed",D.metadata)}}),a.on("timeupdate",function(a,b){g("time_updated",b)}),a.on("volumechange",function(a,b){g("volume_changed",b)}),a.on("impl_ready",function(a,b){g("impl_ready",b)}),a.on("waiting",function(){g("waiting")}),a.on("playing",function(){g("playing")}),a.on("click",function(a,b){8===parseInt(SAPO.Browser.version,10)?f.fire(e._els.aEl,"click",b):d._onClick(b)});var k=d.getOption("video");k&&(D.autoplay=d.getOption("autoplay"),this.load(k,D.autoplay))},getCurrentState:function(){return K.current},load:function(a,c){var d;d="string"==typeof a?{requestURL:a,autoplay:!!c,isAd:!!arguments[2]}:a,d.requestURL&&-1===d.requestURL.indexOf("/")&&(d.requestURL=[g.pageProtocol()+"//rd3.videos.sapo.pt",d.requestURL,"mov/1"].join("/"));var e=i.exec(d.requestURL);i.lastIndex=0;var f=!e,h=!1;if(f||d.mimeType)f&&(/\.mp4$/i.test(d.requestURL)?d.mimeType="video/mp4":/\.flv$/i.test(d.requestURL)?d.mimeType="video/flv":/\.webm$/i.test(d.requestURL)?d.mimeType="video/webm":/^rtmp/i.test(d.requestURL)?(d.mimeType="rtmp/mp4",h=!0):/\.m3u8/i.test(d.requestURL)?d.mimeType="application/vnd.apple.mpegurl":/\.mp3$/i.test(d.requestURL)&&(d.mimeType="audio/mp3"));else if("24"===e[5])h=!0,d.mimeType=["rtmp/mp4","application/vnd.apple.mpegurl"];else{var k=d.quality||j.quality;k&&(k=k.toLowerCase(),d.requestURL=C(d.requestURL,"hd"===k?"39":"1")),d.mimeType="video/mp4"}var l=!!D.isAd;D.requestURL=d.requestURL;var m,n;try{j.noSapoVideos||f?D.guidURL=d.requestURL:(n=d.requestURL.lastIndexOf("#"),n=-1!==n?"#"+d.requestURL.substring(n+1):"",m=d.requestURL.split("/"),m.pop(),m.pop(),m=m.join("/")+n,m=m.substring(m.indexOf("//")),D.guidURL=m)}catch(o){D.guidURL=d.requestURL}var p=!1;if(m!==r[r.length-1]?(v[m]=v[m]||0,v[m]+=1,r.push(m),s.push(d.requestURL)):p=!0,r.length>1&&!l&&d.isAd){var q=t();v[q]>1&&(G[q]=y.getCurrentTime())}D.skipVastRequest=p||l&&r.length>2&&m===r[r.length-3],D.autoplay=!!d.autoplay,D.isAd=!!d.isAd,D.wasAd=l,D.isLive=h,D.metadata={},D.zoneId=b,D.redirectURL=b,D.isExternal=f,D.mimeType=d.mimeType,D.isReady=!1,K.load_msg()},getOption:function(a){return j[a]},pause:function(){l.pause()},play:function(){l.play()},setCurrentTime:function(a,b){this.isAd()||(b&&m("h_scrub",a),l.setCurrentTime(a))},setCurrentTime2:function(a){l.setCurrentTime2(a)},setVolume:function(a){0>a?a=0:a>1&&(a=1),a&&d.removeClassName(k._els.player,"muted"),A("volume",a),l.setVolume(a)},stop:function(){l.stop()},mute:function(){A("mute",!0),l.mute(),m("mute",!0)},unmute:function(){A("mute",!1),l.unmute(),m("mute",!1)},toggleMute:function(){this.isMuted()?this.unmute():this.mute()},togglePlay:function(){l.togglePlay()},changeVolume:function(a){var b=this.getVolume();this.setVolume(b+a)},scrub:function(a){var b=this.getCurrentTime()+a,c=this.getDuration();0>b&&(b=0),b>c&&(b=c),this.setCurrentTime(b,!0)},unloading:function(){d.addClassName(k._els.player,"unloading");var a=function(b,c){c>0&&(d.removeClassName(k._els.player,"unloading"),l.off("timeupdate",a))};l.on("timeupdate",a),y.unload()},unload:function(){l.unload()},getCurrentTime:function(){return l.getCurrentTime()},getCurrentRequestURL:function(){return D.requestURL},getCurrentVideoSource:function(){return l.getCurrentSrc()},getPlayerDimensions:function(){return this._dims},getVideoDimensions:function(){return this._dimsV},getVideoOriginalDimensions:function(){var a=l.getVideoSize();return a[0]<100&&this._metadata&&this._metadata.dimensions&&(a=this._metadata.dimensions),a},getDuration:function(){return l.getDuration()
},getVolume:function(){return l.getVolume()},getParentContainer:function(){return this._parentContainerEl},getCache:function(a){return l.getCache(a)},isMuted:function(){return l.isMuted()},isPlaying:function(){return l.isPlaying()},isHtml5:function(){return"html5"===l.getCurrentImplName()},isAd:function(){return D.isAd},isLive:function(){return D.isLive},isHD:function(a){return a=a||D.requestURL,D?/\/39$/.test(a):!1},inFullScreen:function(){return o?o.inFullscreen():d.hasClassName(this._iframeEl,j.iframeMaximizedClass)},setFullScreen:function(){if(o)return o.request(this._iframeEl);if(g.isIPad&&p){var c=a.timeTimer,e=l.getElement(),f=function(){c||(a.timeTimer=c=a.setInterval(function(){try{e.webkitEnterFullscreen()}catch(a){}},250),e.play())},h=function(){a.clearInterval(c),c=b,a.timeTimer=b},i=function(){e.pause()};return e.addEventListener("webkitbeginfullscreen",h),e.addEventListener("webkitendfullscreen",i),void f()}d.addClassName(this._iframeEl,j.iframeMaximizedClass);var k=this._iframeEl.style;k.position="fixed",k.left=0,k.right=0,k.top=0,k.bottom=0,k.width="100%",k.height="100%",k.zIndex=99999999},unsetFullScreen:function(){if(o)return o.exit(this._iframeEl);if(!g.isIPad||!p){var a=this._iframeEl.style,b=g.isAndroid&&!g.isChromeForAndroid;d.removeClassName(this._iframeEl,j.iframeMaximizedClass),b?(a.position="static",setTimeout(function(){a.position="absolute"},0)):a.position="absolute",a.left="",a.right="",a.top="",a.bottom="",a.zIndex="",a.width="",a.height=""}},toggleFullScreen:function(){this.inFullScreen()?this.unsetFullScreen():this.setFullScreen(),this._relayout()},resize:function(a,b){if(b||!this.inFullScreen()){var c=this._iframeEl.style;a&&2===a.length?(c.width=a[0]+"px",c.height=a[1]+"px"):(c.width="",c.height="")}},isHighEnd:function(){return!0},setTitle:function(a){k.setTitle(a)},setAuthor:function(a){k.setAuthor(a)},setMetadata:function(a){D.metadata=a,J(a),m("metadata_changed",D.metadata)},switchImpl:function(a){a||(a=function(){});var b=l.getImplName(),c="html5"===b?"flash":"html5";l.isImplAvailable(c)?(l._options.autoplay=D.autoplay,l.switchToImpl(c,function(){a(null,{message:"impl change: "+b+" -> "+c,from:b,to:c})})):a("unsupported impl: "+c)},_relayout:function(){var a=this._getViewportSize(),b=this.inFullScreen();if(!this._dims||a[0]!==this._dims[0]||a[1]!==this._dims[1]){var c=j.staticGUI?g.hasTouchEvents?70:48:0,e=[a[0],a[1]-c];this._dims=a,this._dimsV=e;var f=j.staticGUI&&!b,h=this._dims[0]<=360;d.setClassName(k._els.player,"small",h),d.setClassName(k._els.player,"big",!h),d.setClassName(k._els.player,"static",f),l.resize(e),m("resize",{container:a,video:e,maximized:b})}},_onWindowResize:function(){this._relayout()},_getViewportSize:function(){return e.windowDimensions()},_onClick:function(a){if(l.isReady()||"flash"!==l.getCurrentImplName()&&"flashhls"!==l.getCurrentImplName()){var b=a&&f.element(a);return e.findUpwardsBySelector(b,"[rel]")?this.pause():void(j.allowPlayPause&&!e.findUpwardsBySelector(b,".hud-top, .hud-bottom, .dialog, .ad-words")&&k._onTogglePlay(a))}},_onBeforeUnload:function(){m("before_unload")}},SAPO.Project.Video.Controllers.Video=L}(window),function(a,b){"use strict";var c=SAPO.Dom.Css,d=SAPO.Dom.Event,e=SAPO.Utility,f=function(){return"cue_"+(~~(Math.random()*Math.pow(32,6))).toString(32)},g=function(a,b){var c=a[b];if(isNaN(c)){if("width"===b)return a.right-a.left+1;if("height"===b)return a.bottom-a.top+1}return c},h=function(a){this._o=SAPO.extendObj({min:0,max:1,offsetAttr:"left",sizeAttr:"width",axis:"x",disableScrubbing:!1},a||{}),this._v=this._o.value===b?this._o.min:this._o.value,this._l=this._o.max-this._o.min,delete this._o.value,this._isDown=!1,this._scrubbing=!this._o.disableScrubbing,this._backedUpCues={},this._currentCues={},this._doneEl=this._o.doneElement,this._handleEl=this._o.handleElement,this._tickEl=this._o.tickElement,this.setValue(this._v),this._updateBounds();var c=this,e=this._o.container,f=function(a){if(c._scrubbing){var b,f;if("mousemove"!==a.type&&"touchmove"!==a.type||(c._tickEl&&((0===c._size||1===c._size)&&c._updateBounds(),b=d.pointer(a),f=c._getValueFromPointer(b,!0),c._o.onUpdateTick?c._o.onUpdateTick.call(c,b,f):c._tickEl.style[c._o.offsetAttr]=(100*f).toFixed(2)+"%"),c._isDown)){if(d.stop(a),b=d.pointer(a),"mousedown"===a.type||"touchstart"===a.type){c._o.onStart&&c._o.onStart.call(c);var h=e.getBoundingClientRect(),i=g(h,c._o.offsetAttr),j=g(h,c._o.sizeAttr);c._offset=i,c._size=j,c._isDown=!0}c.setValue(c._getValueFromPointer(b),!0),c._o.onChanging&&c._o.onChanging.call(c)}}},h=function(a){c._isDown&&c._scrubbing&&(d.stop(a),c._isDown=!1,c._o.onChange&&c._o.onChange.call(c))},i=document.documentElement;d.observe(e,"mousedown",f),d.observe(i,"mousemove",f),d.observe(i,"mouseup",h),d.observe(e,"touchstart",f),d.observe(i,"touchmove",f),d.observe(i,"touchend",h)};h.prototype={changeLimits:function(a,b){this._o.min=a,this._o.max=b,this._l=b-a,this._updateBounds(),this.setValue(this._v),this.backupCues("tmp"),this.removeCues(),this.restoreCues("tmp")},getValue:function(){return this._v},setValue:function(a,b){if(!this._isDown||b){a<this._o.min?a=this._o.min:a>this._o.max&&(a=this._o.max),this._v=a;var c=this._toRatio(a),d=this._toPercent(c);this._o.skipDone||(this._doneEl.style[this._o.sizeAttr]=d),this._handleEl.style[this._o.offsetAttr]=d}},setScrubbing:function(a){c.setClassName(this._o.container,"disabled",!a),this._scrubbing=!!a},addCue:function(a){var b;a.id?b=a.id:a.id=b=f();var c=document.createElement("div");return c.className="cue",c.id=b,c.style[this._o.offsetAttr]=this._toPercent(a.value,!0),a.title&&(c.title=a.title),a.color&&(c.style.backgroundColor=a.color),a.width&&(c.style[this._o.sizeAttr]=a.width+"px"),this._o.container.insertBefore(c,this._handleEl),this._currentCues[b]=a,b},removeCue:function(a){delete this._currentCues[a];var b=document.getElementById(a);return b?(this._o.container.removeChild(b),!0):!1},removeCues:function(){for(var a,b=e.getElementsByClassName("cue",this._o.container),c=b.length-1;c>=0;--c)a=b[c],this._o.container.removeChild(a);this._currentCues={}},backupCues:function(a){this._backedUpCues[a]=this._currentCues,this._currentCues={}},restoreCues:function(a){var b=this._backedUpCues[a];b||(b={},this._backedUpCues[a]=b),this._currentCues=b;for(var c in this._currentCues)this._currentCues.hasOwnProperty(c)&&this.addCue(this._currentCues[c])},_updateBounds:function(){var a=this._o.container.getBoundingClientRect(),b=g(a,this._o.offsetAttr),c=g(a,this._o.sizeAttr);this._offset=b,this._size=c},_toPercent:function(a,b){return b&&(a=this._toRatio(a)),0>a?a=0:a>1&&(a=1),(100*a).toFixed(2)+"%"},_toRatio:function(a){return(a-this._o.min)/this._l},_getValueFromPointer:function(a,b){var c=a[this._o.axis]-this._offset;"bottom"===this._o.offsetAttr&&(c*=-1);var d=Math.max(0,Math.min(1,c/this._size));return b?d:this._o.min+d*this._l}},SAPO.namespace("Project.Video.Components"),SAPO.Project.Video.Components.Slider=h}(window),SAPO.Project.Video.play=function(a){"use strict";var b=SAPO.Project.Video,c="VideoNative"===b._kind;"string"==typeof a&&(a={video:a}),"zoneId"in a&&"string"==typeof a.zoneId&&(a.zoneId=parseInt(a.zoneId,10),isNaN(a.zoneId)&&delete a.zoneId),"volume"in a&&(isFinite(a.volume)||delete a.volume,a.volume<0?a.volume=0:a.volume>1&&(a.volume=1)),a.playerInterno?"staticGUI"in a||(a.staticGUI=!0):"followSuggestionsInline"in a||(a.followSuggestionsInline=!0);var d=navigator.userAgent.toLowerCase(),e=/iphone|ipod/g.test(d);e&&(a.allowResize=!1),a.noSapoVideos&&(a.relatedVideos=!1,a.skipBranding=!0,a.skipShare=!0,a.skipSuggestions=!0,a.skipSVAnalytics=!0);var f=new b.Controllers.Video(a);if(a.variable){var g=c?window:window.parent;g[a.variable]=f}return c?void 0:f},function(){"use strict";var a,b=SAPO.Project.Video._,c=SAPO.Dom.Css,d=SAPO.Dom.Event,e=SAPO.Project.Video.Features,f=SAPO.Dom.Selector,g=SAPO.Project.Video.Components.Slider,h=!1,i=function(a){return 10>a?"0"+a:a},j=function(a){var b,c=Math.floor(a%60),d=Math.floor(a/60),e=Math.floor(d/60);return e>0?(d-=60*e,b=[e,i(d),i(c)]):b=[d,i(c)],b.join(":")},k=function(h,i,k,l,m){this._vc=h,this._pub=k,this._pubD=l,this._options=i,this._buttonEls={},this._handlers={buttonclick:this._onButtonClick.bindObj(this),keydown:this._onKeyDown.bindObj(this),togglefullscreen:this._onToggleFullScreen.bindObj(this),toggleplay:this._onTogglePlay.bindObj(this),togglemute:this._onToggleMute.bindObj(this)};var n,o,p,q=this;this._els={},this._els.player=m,c.addClassName(this._els.player,e.hasTouchEvents?"env-mobile":"env-desktop"),c.addClassName(this._els.player,e.isIPhoneOrIPod?"iphone-yes":"iphone-no"),c.addClassName(this._els.player,i.playerInterno?"player-internal":"player-external"),c.addClassName(this._els.player,"play-paused"),c.addClassName(this._els.player,"no-activity"),i.video&&c.addClassName(this._els.player,"video-is-new"),c.addClassName(this._els.player,"video-mode-regular"),c.addClassName(this._els.player,"at-start");var r=document.createElement("a");r.className="anchor fill",this._els.player.appendChild(r),this._els.aEl=r,p=document.createElement("div"),p.className="video-container fill",this._els.aEl.appendChild(p),this._els.videoCtn=p,h.getOption("skipShare")||h.getOption("playerInterno")||c.addClassName(this._els.player,"show-share"),p=document.createElement("div"),p.className="hud-bottom",this._els.player.appendChild(p);var s=p;if(!h.getOption("hideInfo")){p=document.createElement("div"),p.className="hud-top",this._els.player.appendChild(p);var t=p;p=document.createElement("a"),p.className="title",p.setAttribute("target","_top"),p.setAttribute("rel","title"),p.title=b("goToSVTitle"),t.appendChild(p),this._els.title=p,p=document.createElement("a"),p.className="author",p.setAttribute("target","_top"),p.setAttribute("rel","author"),p.title=b("goToSVAuthorTitle"),t.appendChild(p),this._els.author=p}if(this._options.allowScrub){var u;u=document.createElement("div"),u.className="t-scrub-height",s.appendChild(u),p=document.createElement("div"),p.className="t-scrub",u.appendChild(p),n=p,p=document.createElement("div"),p.className="t-cached",n.appendChild(p),this._els.cached=p,p=document.createElement("div"),p.className="t-done",n.appendChild(p),p=document.createElement("div"),p.className="handle t-handle",n.appendChild(p),p=document.createElement("div"),p.className="tooltip time",n.appendChild(p),this._els.timeTooltip=p}p=document.createElement("div"),p.className="buttons",s.appendChild(p);var v=p;p=document.createElement("div"),p.className="left",v.appendChild(p);var w=p;if(this._els.left=p,this._options.allowPlayPause&&(p=document.createElement("button"),p.className="button b-play",p.setAttribute("tabindex",1100),p.title=b("playPauseTitle"),w.appendChild(p),d.observe(p,"click",this._handlers.toggleplay),this._els.playPause=p),p=document.createElement("span"),p.className="current-time",p.title=b("timeTitle"),w.appendChild(p),this._els.currentTime=p,p=document.createElement("span"),p.className="duration",p.title=b("durationTitle"),w.appendChild(p),this._els.duration=p,p=document.createElement("div"),p.className="right",v.appendChild(p),this._els.right=p,this._options.allowResize&&(p=document.createElement("button"),p.className="button size size-maximize",p.title=b("resizeFullTitle"),p.setAttribute("tabindex",8e3),this._els.right.appendChild(p),d.observe(p,"click",this._handlers.togglefullscreen),this._els.sizeMaximize=p),this._options.allowVolume){p=document.createElement("a"),p.className="button volume volume-3",p.href="javascript:void(0)",p.title=b("muteTitle"),p.style.zIndex=3,p.setAttribute("tabindex",7e3),this._els.right.appendChild(p),d.observe(p,"click",this._handlers.togglemute);var x=this;d.observe(p,"focus",function(){c.addClassName(x._els.player,"volume-focused")}),d.observe(p,"mouseover",function(){c.addClassName(x._els.player,"volume-focused")}),d.observe(p,"mouseout",function(){c.removeClassName(x._els.player,"volume-focused")}),d.observe(p,"blur",function(){c.removeClassName(x._els.player,"volume-focused")}),this._els.volume=p,p=document.createElement("span"),p.className="v-scrub",this._els.volume.appendChild(p),o=p,p=document.createElement("span"),p.className="gap",o.appendChild(p);var y=p;p=document.createElement("span"),p.className="v-done",y.appendChild(p),p=document.createElement("span"),p.className="handle v-handle",y.appendChild(p)}var z=window.parent.SAPO.Project.Video.Features.inExternalIframe(),A=window.parent.SAPO.Utility.FullScreen;A.isSupported||!z||e.isIPad||(c.addClassName(this._els.player,"cannot-resize"),this._options.allowResize=!1),this._options.allowScrub&&(this._timeSlider=new g({container:n,doneElement:f.select(".t-done",n)[0],handleElement:f.select(".t-handle",n)[0],tickElement:this._els.timeTooltip,disableScrubbing:!0,value:0,onStart:function(){c.addClassName(q._els.player,"time-being-dragged"),q._vc.isPlaying()&&q._vc.pause()},onChange:function(){q._vc.setCurrentTime(this.getValue(),!0),q._vc.play(),setTimeout(function(){c.removeClassName(q._els.player,"time-being-dragged")},150)},onUpdateTick:function(a,b){var d=q._vc.getDuration();c.setClassName(this._tickEl,"hidden",0===d||!isFinite(d)),this._tickEl.innerHTML=j(b*d);var e=this._o.container.offsetWidth,f=this._tickEl.offsetWidth,g=.5*f/e;g>b?b=g:b>1-g&&(b=1-g),this._tickEl.style[this._o.offsetAttr]=(100*b).toFixed(2)+"%"}})),this._options.allowVolume&&(d.observe(o.parentNode,"mouseover",function(){c.addClassName(q._els.player,"time-slider-hovered")}),d.observe(o.parentNode,"mouseout",function(){c.removeClassName(q._els.player,"time-slider-hovered")}),this._volumeSlider=new g({container:f.select(".gap",o)[0],doneElement:f.select(".v-done",o)[0],handleElement:f.select(".v-handle",o)[0],offsetAttr:"bottom",sizeAttr:"height",axis:"y",value:1,onStart:function(){this._initialValue=this.getValue()},onChanging:function(){q._repeatingVolume||(q._repeatingVolume=!0),q._vc.setVolume(this.getValue())},onChange:function(){q._repeatingVolume=!1;var a=this.getValue(),b=this._initialValue,c=a>b?"up":"down";q._pub("h_volume_changed",c,a),q._vc.setVolume(a)}})),this._options.allowKeyboard&&d.observe(document.documentElement,"keydown",this._handlers.keydown);var B=0,C=2e3,D=this._els.player,E=function(){var a=(new Date).valueOf(),b=a-B;b>C&&(c.hasClassName(D,"static")||(F=void 0,c.addClassName(D,"no-activity")))},F=setInterval(E,500);a=function(){B=(new Date).valueOf(),c.removeClassName(D,"no-activity")},e.hasTouchEvents&&(d.observe(document,"touchend",a),d.observe(document,"touchmove",a)),d.observe(document,"mousedown",a),d.observe(document,"mousemove",a),this._vc.subscribe("add_cue button_activated ended h_volume_changed h_state_changed load loading_changed loading_data_changed metadata_changed mute progress remove_cue resize state_changed time_updated volume_changed loadedmetadata",void 0,this)};k.prototype={on:function(a,d){var e,f="play"===d;switch(a){case"add_cue":this._timeSlider&&this._timeSlider.addCue(d);break;case"button_activated":"quality"===d&&(this._lastQualityChangeT=(new Date).valueOf());break;case"load":this._oldURI=this._currentURI,this._currentURI=d.requestURL;var g=!1;if(this._lastQualityChangeT){var h=(new Date).valueOf(),i=h-this._lastQualityChangeT;10>i&&(g=!0)}this._oldURI===d.requestURL||g||(c.removeClassName(this._els.player,"video-is-not-new"),c.addClassName(this._els.player,"video-is-new"));var k="string"==typeof d.mimeType&&"text/javascript"===d.mimeType||"application/x-shockwave-flash"===d.mimeType;c.addRemoveClassName(this._els.player,"vpaid",k),this._updateTime(0);break;case"ended":c.removeClassName(this._els.player,"play-playing"),c.addClassName(this._els.player,"play-paused");break;case"loading_changed":c.setClassName(this._els.player,"loading",d);break;case"loading_data_changed":c.setClassName(this._els.player,"loading-data",d);break;case"metadata_changed":this._isLive=d.isLive,this._isAd=d.isAd,this._dur=d.duration;var l;this._isLive?l=b("liveTitle"):(l=j(d.duration),this._timeSlider&&(this._timeSlider.changeLimits(0,d.duration),this._timeSlider.setScrubbing(!this._isAd),this._updateTime(0))),isNaN(d.duration)||(this._els.duration.innerHTML=l),c.removeClassNamesStartingWith(this._els.player,"video-mode-",this._isLive?"live":"regular");var m=this._vc._inInternoMode?"_top":"_blank",n=d.isAd;this.setTitle(n?"":d.title,d.pageURI,m),this.setAuthor(n?"":d.author,d.authorURI,m),c.addRemoveClassName(this._els.player,"no-metadata",n);break;case"progress":if(this._timeSlider){var o=this._vc.getCache(!0);if(!o)return;var p=this._els.cached.style;p.left=(100*o.start).toFixed(3)+"%",p.width=(100*o.length).toFixed(3)+"%"}break;case"remove_cue":this._timeSlider&&this._timeSlider.removeCue(d);break;case"resize":this._els.sizeMaximize&&(e=this._els.sizeMaximize,e.className="button size size-"+(d.maximized?"normal":"maximize"),e.title=b("resize"+(d.maximized?"1":"Full")+"Title"));break;case"h_state_changed":if(c.setClassName(this._els.player,"play-paused",!f),c.setClassName(this._els.player,"play-playing",f),c.hasClassName(this._els.player,"at-start"))return;c.addClassName(this._els.player,"hint"),this.hint&&clearTimeout(this.hint),this.hint=setTimeout(function(){c.removeClassName(this._els.player,"hint"),delete this.hint}.bindObj(this),750);break;case"state_changed":if(this._els.playPause&&(e=this._els.playPause,c.setClassName(this._els.player,"play-paused",!f),c.setClassName(this._els.player,"play-playing",f),f&&(c.removeClassName(this._els.player,"video-is-new"),c.addClassName(this._els.player,"video-is-not-new")),c.hasClassName(this._els.player,"time-being-dragged")))return;break;case"mute":c.setClassName(this._els.player,"muted",d),this._volumeSlider&&(e=this._els.volume,e.title=b(d?"unmuteTitle":"muteTitle"));break;case"h_volume_changed":if(this._vc.isMuted())return this._vc.unmute();break;case"volume_changed":var q;this._els.volume&&(e=this._els.volume,q=0===d?"0":.333>d?"1":.666>d?"2":"3",c.removeClassNamesStartingWith(e,"volume-",q)),this._volumeSlider&&!this._vc.isMuted()&&this._volumeSlider.setValue(d);break;case"time_updated":this._updateTime(d)}},addButton:function(a,b){var c=this._buttonEls[a];if(!c){var e=document.createElement("button"),f=SAPO.Utility.objectKeys(this._buttonEls),g=f.length||0;return e.className="button "+a,"left"===b?(e.setAttribute("tabindex",1e3+200*g),this._els.left.appendChild(e)):(e.setAttribute("tabindex",6e3-100*g),this._els.right.appendChild(e)),this._buttonEls[a]=[e,b],d.observe(e,"click",this._handlers.buttonclick),e}},hideButton:function(a){var b=this._buttonEls[a];b&&c.addClassName(b[0],"hidden")},showButton:function(a){var b=this._buttonEls[a];b&&c.removeClassName(b[0],"hidden")},removeButton:function(a){var b=this._buttonEls[a];if(b){var c=b[0],d=b[1];return("left"===d?this._els.left:this._els.right).removeChild(c),delete this._buttonEls[a],!0}},getButton:function(a){var b=this._buttonEls[a];if(b)return b[0]},setTitle:function(a,b,c){this._setLink(this._els.title,a,b,c)},setAuthor:function(a,b,c){this._setLink(this._els.author,a,b,c)},_updateTime:function(a,b){var d="body";if(!this._isLive&&isFinite(a)){this._els.currentTime.innerHTML=j(a),this._timeSlider&&this._timeSlider.setValue(a);var e=this._vc.getDuration();isNaN(e)&&(e=this._dur);var f=.1,g=e-.25;d=f>a?"start":a>g?"end":"body",b&&(d="body")}c.removeClassNamesStartingWith(this._els.player,"at-",d)},_setLink:function(a,b,c,d){a&&(void 0!==b&&(a.innerHTML="",a.appendChild(document.createTextNode(b))),void 0!==c&&a.setAttribute("href",c),void 0!==d&&a.setAttribute("target",d))},_onButtonClick:function(a){c.hasClassName(this._els.player,"small")&&d.stop(a);var b=d.element(a);if("button"===b.nodeName.toLowerCase())for(var e,f=b.className.split(" "),g=0,h=f.length;h>g;++g)e=f[g],this._pub("button_activated",e)},_onKeyDown:function(b){h||(h=!0,c.addClassName(this._els.player,"key-pressed"),this._els.playPause&&this._els.playPause.focus()),a();var e=[82,73,67,75,82,79,76,76],f=d.element(b),g=b.keyCode,i=f.nodeName.toLowerCase(),j=b.altGraphKey||b.altKey||b.ctrlKey||b.metaKey||b.shiftKey;if(!j){if("a"===i&&(13===g||32===g)&&c.hasClassName(f,"volume"))return this._onToggleMute(b);var k=this._vc,l=window.parent.SAPO.Utility.FullScreen,m=!k.isHtml5(),n=m?10:3;switch(g){case 27:this._options.allowResize&&this._vc.inFullScreen()&&(!l.isSupported||SAPO.Browser.SAFARI)&&this._onToggleFullScreen();break;case 32:if("button"===i)return;this._onTogglePlay();break;case 37:this._options.allowScrub&&k.scrub(-n);break;case 39:this._options.allowScrub&&k.scrub(n);break;case 40:this._options.allowVolume&&(k.changeVolume(-.2),this._pub("h_volume_changed","down",k.getVolume()));break;case 38:this._options.allowVolume&&(k.changeVolume(.2),this._pub("h_volume_changed","up",k.getVolume()));break;default:if(this._rr&&g===e[this._rr])++this._rr,this._rr===e.length&&(this._vc.load("http://rd3.videos.sapo.pt/gQ6ldkGBvL3mos90bEpB/mov/1",!0),delete this._rr);else{if(g!==e[0])return;this._rr=1}}d.stop(b)}},_onToggleFullScreen:function(a){d.stop(a),this._vc.toggleFullScreen(),this._pubD(100,"h_resize",this._vc.inFullScreen()?"full":"normal")},_onToggleMute:function(a){if(a){var b=d.element(a);if(!c.hasClassName(b,"volume"))return;d.stop(a)}this._vc.toggleMute();var e=this._vc.isMuted();c.setClassName(this._els.player,"muted",e),this._pub("h_mute",e)},_onTogglePlay:function(a){if(d.stop(a),this._vc.getCurrentRequestURL()){var b=c.hasClassName(this._els.player,"video-is-not-new"),e=f.matchesSelector(this._els.player,".play-paused, .loading")||!this._vc.isPlaying(),g=c.hasClassName(this._els.player,"at-end");this._pub("h_state_changed",e?"play":"pause"),e?this._vc.play():this._vc.pause(),b&&g&&e&&this._pub("replay")}}},SAPO.namespace("Project.Video.GUI"),SAPO.Project.Video.GUI.Main=k}(),function(){"use strict";var a=SAPO.Project.Video.Features,b=a.pageProtocol(),c=function(){return~~(1e6*Math.random())},d=function(a){(new Image).src=[a.replace(/^(http:|https:)/,b),"&rnd=",c()].join("")},e=function(a,b){this._vc=a,this._ui=b,this._vc.subscribe("metro",void 0,this)};e.prototype={_name:e._name="metro",on_metro:function(a,b){if(b)if(b instanceof Array)for(var c=0,e=b.length;e>c;++c)d(b[c]);else d(b)}},SAPO.Project.Video.Controllers._plugins.push(e)}(void 0),function(){"use strict";var a=function(a){return a+(~~(Math.random()*Math.pow(32,6))).toString(32)},b=function(a,b,c,d){this._vc=a,this._ui=b,this._pub=c,this._pubD=d,this._tl={},this._uri=void 0,this._duration=void 0,this._visibleIds={},this._vc.subscribe("add_timeline metadata_changed load remove_timeline remove_timeline_prefix time_updated",void 0,this)};b.prototype={_name:b._name="timeline",on_add_timeline:function(b,c,d){d&&d===this._uri&&("id"in c||(c.id=a("tl_")),this._tl[c.id]=c)},on_remove_timeline:function(a,b,c){c&&c===this._uri&&delete this._tl[b]},on_remove_timeline_prefix:function(a,b,c){if(c&&c===this._uri){var d=this._tl,e=[];for(var f in d)0===f.indexOf(b)&&e.push(f);for(var g=0,h=e.length;h>g;++g)delete d[e[g]]}},on_metadata_changed:function(a,b){this._duration=b.duration},on_load:function(a,b){this._uri=b.requestURL,this._isLive=b.isLive,this._tl={}},on_time_updated:function(a,b){if(!this._isLive&&!isNaN(this._duration)){var c,d,e,f,g,h,i,j=b/this._duration,k=this._tl,l=[];for(e in k)if(k.hasOwnProperty(e)){if(d=k[e],f=e in this._visibleIds,"asRatios"in d?(g=j<d.start,i="end"in d?j>d.end:!g):(g=b<d.start,i="end"in d?b>d.end:!g),h=!(g||i),"subtitle"===d.kind)!f&&h?(this._visibleIds[e]=!0,this._pub("add_overlay",d)):f&&!h&&(delete this._visibleIds[e],this._pub("remove_overlay",e));else if(h)if("pub"===d.kind)this._pub.apply(this._vc,d.args);else if("pubs"===d.kind)for(c=d.args.length-1;c>=0;--c)this._pub.apply(this._vc,d.args[c]);if(h&&"once"in d&&l.push(d.id),h&&"stopProcessing"in d)break}if(l.length>0)for(var m=0,n=l.length;n>m;++m)delete k[l[m]]}}},SAPO.Project.Video.Controllers._plugins.push(b)}(void 0),function(){"use strict";var a=function(a,b){this._vc=a,this._ui=b,this._el=document.createElement("div"),this._el.className="fill overlay",b._els.overlay=this._el,this._ui._els.aEl.appendChild(this._el),this._vc.subscribe("add_overlay load remove_overlay remove_overlay_prefix",void 0,this)};a.prototype={_name:a._name="overlay",on_load:function(){this._el.innerHTML=""},on_add_overlay:function(a,b){var c;switch(b.kind){case"subtitle":c=["<div",' id="',b.id,'"',' class="sub">',"<p>",b.lines.join("</p><p>"),"</p>","</div>"]}this._el.insertAdjacentHTML("beforeend",c.join(""))},on_remove_overlay:function(a,b){var c=s$(b);c&&c.parentNode&&this._el.removeChild(c)},on_remove_overlay_prefix:function(a,b){var c=this._el.lastChild;if(c)do c.parentNode&&c.id&&0===c.id.indexOf(b)&&this._el.removeChild(c),c=c.previousSibling;while(c)}},SAPO.Project.Video.Controllers._plugins.push(a)}(void 0),function(){"use strict";var a=SAPO.Utility.jsonpCORS,b=SAPO.Project.Video.Features.pageProtocol();SAPO.Project.Video.sapoVideosVideoSource=function(c,d){var e=-1===c.lastIndexOf("?")?"?":"&";c=c.replace(/^http:|^https:/,b);var f=c.lastIndexOf("#");if(-1!==f&&(c=c.substring(0,f)),-1!==c.indexOf("/mov/24"))a([c,"all=1"].join(e),function(a){d(null,a)},function(){d("Error fetching video source!","")},5);else{var g=function(a){d(null,a.url)},h=function(){d("Error fetching video source!","")};c=[c,"videosrc=true"].join(e),a(c,g,h,5)}}}(window),function(){"use strict";var a=SAPO.Utility.cors;SAPO.namespace("Project.Video"),SAPO.Project.Video.sapoVideosAnalytics=function(b,c){var d=[b.protocol,"//",b.host,"/analytics.html?action=getevents","&autostart=",b.autoplay?"true":"false","&duration=",isFinite(b.duration)?b.duration:0,"&playertype=",b.isInterno?"interno":"externo","&playerteck=",b.teck,"&username=",b.author,"&domain=",encodeURIComponent(b.pageURI),"&video=",b.hash,"&videotype=video"].join(""),e=function(a,b){c(null,b)},f=function(a){c(a||"error")};a(d,e,f,5)}}(window),function(){"use strict";var a=SAPO.Utility.jsonpCORS,b=SAPO.Project.Video.Features,c=/^(https?:)?(\/\/)?([a-z0-9\.]+)\/([^\/]{20})\/mov\/(\d+)/,d=/^(https?:)?(\/\/)?([a-z0-9\.]+)\//,e=/^(https?:)?(\/\/)?([a-z0-9\.]+)\/([^\/]{20})/,f=b.pageProtocol(),g=function(a,b){var c=e.exec(a.guid);if(e.lastIndex=0,c){var g={fromSapoVideos:!0,protocol:f,domain:b||c[3],hash:c[4],encid:c[5]||"1"};if(g.queryDomain=[g.protocol,"//",g.domain].join(""),g.poster=a["media:content"].url,g.title=a.title,g.link=a.guid,g.synopse=a["sapo:synopse"],g.author=a["sapo:author"],g.relatedVideos=a["sapo:relatedVideos"],g.hasHD=a["sapo:HD"],g.hasSubtitles=a.have_subtitle,g.advertise=!a["sapo:advertise"],g.adwordsId=parseInt(a["sapo:adwords_id"],10),g.tags=a["sapo:tags"].split(" "),g.canPublish=a["sapo:canpublish"],c=d.exec(a.guid),!c)return!1;d.lastIndex=0,g.guidDomain=[g.protocol,b||c[3]].join("//"),g.videoDomain=[g.protocol,g.domain].join("//"),g.fullURI=[g.guidDomain,g.hash,"mov",g.encid].join("/"),g.requestURL=g.fullURI,g.pageURI=[g.guidDomain,g.hash].join("/"),g.authorURI=[[g.protocol,c[3]].join("//"),g.author].join("/"),g.guid=["/",g.domain,g.hash].join("/"),isNaN(g.adwordsId)&&delete g.adwordsId;try{if(g.duration=parseInt(a["sapo:time"],10),isNaN(g.duration))throw"bang"}catch(h){delete g.duration}var i=a["sapo:videoSize"];return i&&(i=i.split("x"),g.dimensions=[parseInt(i[0],10),parseInt(i[1],10)]),g.poster=g.poster.substring(0,g.poster.lastIndexOf("/")),g}};SAPO.Project.Video.processItemMetadata=g,SAPO.Project.Video.sapoVideosMetadata=function(b,d){var e=c.exec(b);if(c.lastIndex=0,!e)return d("URI not in the SAPO videos format: "+b);var h=[f,"//",e[3],"/",e[4],"/","rss2"].join(""),i=function(a){var b=g(a,e[3]);d(null,b)},j=function(){d("Error fetching video metadata!",{})};a(h,i,j,5)}}(window),function(){"use strict";var a="http://videos.sapo.pt/mrss/",b="http://search.yahoo.com/mrss/",c=4,d="320x240",e={all:!0,user:!0},f=SAPO.Utility.cors,g=SAPO.Utility.XML2,h=function(a,b){return["query_rss2.html?limit=",c,"&thumbsize=",d,"&related=",a,b?"&user="+b:""].join("")},i=function(c,d,e){var f,h,i,j,k=[],l=g.getChildren(e,"item");for(i=0,j=l.length;j>i;++i)f=l[i],h={},h.title=g.getText(f,"title"),h.description=g.getText(f,"description"),h.author=g.getText(f,"author",a),h.url=g.getText(f,"videoURL",a),h.thumb=g.getAttr(f,"content","url",b),h.time=g.getText(f,"time",a),h.m18=g.getBoolean(f,"m18",a),h.views=g.getNumber(f,"views",a),h.rate=g.getNumber(f,"rate",a),h.commentCount=g.getNumber(f,"comment_count",a),h.duration=g.parseTime(g.getText(f,"time",a)),k.push(h);return 0===k.length?c("no results",{}):void c(null,k)};SAPO.Project.Video.sapoVideosSuggestions=function(a,b){var c=e[a.mode];if(!c)return b("unsupported mode",{});var d=[a.queryDomain,h(a.hash,a[a.mode])].join("/"),g=function(){b("Error fecthing video suggestions!",{})};f(d,i.bindObj(null,b),g,5)}}(window),function(){"use strict";var a=function(a,b,c){this._vc=a,this._ui=b,this._pub=c,this._vc.subscribe("canplay error load playing waiting",void 0,this)};a.prototype={_name:a._name="loading2",on:function(a){switch(a){case"playing":case"error":this._pub("loading_changed",!1);break;case"load":case"waiting":this._pub("loading_changed",!0)}}},SAPO.Project.Video.Controllers._plugins.push(a)}(void 0),function(){"use strict";var a=SAPO.Project.Video._,b=SAPO.Utility.jsonpCORS,c=SAPO.Project.Video.Features,d=SAPO.Dom.Css,e=SAPO.Dom.Event,f=SAPO.Dom.Element,g=SAPO.Utility,h=function(a,b,c){var d=this;this._vc=a,this._els={button:null,dialog:null,wrapper:null,items:[]},this._vc.playlist_prev=this.prev.bindObj(this),this._vc.playlist_next=this.next.bindObj(this),this._ui=b,this._pub=c,this._md={},this.playlistCache={},this.elementCache={},this.jsonCache={},this._vc.subscribe("load metadata_changed button_activated ended",void 0,this),this.createElements(),this.setClassNames(),e.observe(d._els.wrapper,"click",this._onClick.bindObj(this)),this._vc.getOption("playlist")&&this.loadPlaylist(),this._vc.next=this.next.bindObj(this),this._vc.prev=this.prev.bindObj(this),this._vc.goTo=this.goTo.bindObj(this),this.isHD=!1,this._vc.loadPlaylist=this.loadPlaylist.bindObj(this),this._vc.unloadPlaylist=this.unloadPlaylist.bindObj(this)};h.prototype={_name:h._name="sv_playlist",createElements:function(){var a,b,c=document.createElement("ul"),d=document.createElement("div");a=this._ui.addButton("playlist-prev","left"),this.prevButton=a,f.insertTop(a,this._ui._els.left),b=this._ui.addButton("playlist-next","left"),this.nextButton=b,f.insertAfter(b,this._ui._els.playPause||a),this._els.button=this._ui.addButton("playlist","right"),this._els.button.className+=" sv-playlist",c.className="wrapper",d.className="dialog playlist hidden",d.appendChild(c),this._ui._els.aEl.appendChild(d),this._els.dialog=d,this._els.wrapper=c},loadItems:function(c,d){var e=this;if(!this.isLoading){this.loading(!0);var f=d?Math.floor(this.playlist.items.length/this.playlist.itemsPerPage)+1:1,g=this.playlistURL+"?page="+f;this.playNow=c,this.url=g,this.jsonCache[g]?this.endpointCallback(this.jsonCache[g],!0):b(g,this.endpointCallback.bindObj(this),function(){e._pub("error",{type:"NO_SV_PLAYLIST",message:a("noSVPlaylistErrorMsg")})},5)}},endpointCallback:function(a,b){if(a&&a.items){this.jsonCache[this.url]=a,this.playlist.title=a.title,this.playlist.totalResults=a.totalResults,this.playlist.items=this.playlist.items[a.startIndex]?this.playlist.items:this.playlist.items.concat(a.items),this.buildItems(b);var c=this.playlist.items[this.videoIndex]||this.playlist.items[0];this.playNow&&c&&(this.firstHash&&"undefined"==typeof this.videoIndex?this.loadItems(this.playNow,!0):this.videoIndex<this.playlist.totalResults&&this.playlist.items.length<=this.videoIndex?this.loadItems(this.playNow,!0):this.play(c,this._vc.getOption("autoplay"),!0)),this._els.button.setAttribute("title",this.playlist.title)}this.loading(!1)},loadPlaylist:function(a,b,d){this.playlist&&(this.playlistURL===a,this.unloadPlaylist()),this.videoIndex=d||this._vc.getOption("startIndex")||0,this.playlistURL=a||this._vc.getOption("playlist"),this.playlistURL=this.playlistURL.replace(/https?:/,c.pageProtocol()),this.playlistDomain=/\/\/([^\/]+)/.exec(this.playlistURL)[1],this.firstHash=b||this._vc.getOption("firstHash"),this.playlist=this.playlistCache[this.playlistURL]||{title:"",link:null,currentIndex:-1,totalResults:0,itemsPerPage:60,items:[],hashItems:{}},this._els.items=this.elementCache[this.playlistURL]||[],this.loadItems(!0)
},unloadPlaylist:function(a){a||(this.playlistCache[this.playlistURL]=this.playlist,this.elementCache[this.playlistURL]=this._els.items);for(var b=0;b<this._els.items.length;b++)f.remove(this._els.items[b])},loading:function(a){this.isLoading=a,this._els&&this._els.loadItems&&(a?d.addClassName(this._els.loadItems,"loading"):d.removeClassName(this._els.loadItems,"loading"))},buildItem:function(a,b){var c=this.processMetadata(a,b);this.playlist.items[c.playlistIndex]=c,this.playlist.hashItems[c.hash]=c,c.hash===this.firstHash&&(this.videoIndex=c.playlistIndex),c.relatedVideos="none",this._pub("cache_metadata",c);var d=this.createListItem(c);return this._els.items[c.playlistIndex]=d,d},processMetadata:function(a,b){if(a.isPlaylistItem)return a;var c=SAPO.Project.Video.processItemMetadata(a,this.playlistDomain);return c.isPlaylistItem=!0,c.playlistIndex=b,c},createListItem:function(a){var b;if(this.elementCache&&this.elementCache[this.playlistURL]&&this.elementCache[this.playlistURL][a.playlistIndex])b=this.elementCache[this.playlistURL][a.playlistIndex];else{var c="http://thumbs.web.sapo.io/?p="+a.poster+"&W=50&H=28&errorpic=transparent",d=g.formatTime(a.duration),e=document.createElement("img"),f=document.createTextNode(a.title),h=document.createElement("span"),i=document.createTextNode(d),j=document.createElement("span");b=document.createElement("li"),b.className="row item",b.setAttribute("data-index",a.playlistIndex),e.className="item-thumbnail",h.className="item-title",h.appendChild(f),j.className="item-duration",j.appendChild(i),e.style.backgroundImage="url("+c+")",e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.alt=a.title,b.appendChild(e),b.appendChild(h),b.appendChild(j)}return this._els.wrapper.appendChild(b),b},buildItems:function(a){for(var b=this._els.items,c=a?0:b.length,d=c;d<this.playlist.items.length;d++)this.buildItem(this.playlist.items[d],d);this.moveloadItems()},_onClick:function(a){var b=a.target||a.srcElement,c=f.findUpwardsBySelector(b,".row");if(c){var d=c.getAttribute("data-index");d?this.goTo(d):this.loadItems(!1,!0)}},moveloadItems:function(){var b="row loadmore hidden";if(this.playlist.totalResults>this.playlist.items.length&&(b="row loadmore"),!this._els.loadItems){var c=this._els.loadItems=document.createElement("li");c.appendChild(document.createTextNode(a("playlistLoadMoreTitle")))}this._els.loadItems.className=b,this._els.wrapper.appendChild(this._els.loadItems)},play:function(b,c,e){this.loading(!1);var f=this.isHD?b.fullURI.replace(/\/mov\/1$/,"/mov/39"):b.fullURI,g=this.playlist.items,h=b.playlistIndex;"undefined"==typeof c&&(c=!0),this.activeItem&&d.removeClassName(this._els.items[this.activeItem.playlistIndex],"playing"),this.activeItem=b,this.playlist.currentIndex=b.playlistIndex,d.addClassName(this._els.items[b.playlistIndex],"playing"),d.addClassName(this._ui._els.player,"video-is-new"),d.removeClassName(this._ui._els.player,"no-prev"),d.removeClassName(this._ui._els.player,"no-next"),this.prevButton.title=g[h-1]?a("playlistPrev")+g[h-1].title:"",this.nextButton.title=g[h+1]?a("playlistNext")+g[h+1].title:"",0===b.playlistIndex?d.addClassName(this._ui._els.player,"no-prev"):b.playlistIndex+1>=this.playlist.totalResults&&d.addClassName(this._ui._els.player,"no-next"),e&&(this._els.dialog.style.display="block",this._els.items[b.playlistIndex].parentNode.scrollTop=this._els.items[b.playlistIndex].offsetTop-this._els.items[b.playlistIndex].offsetHeight/2,this._els.dialog.style.display=""),this._vc.load(f,c)},next:function(a){var b=a||this._vc.isPlaying(),c=this.playlist.currentIndex+1,d=this.playlist.items[c];this.isLoading||(!d&&this._vc.getOption("loop")&&(d=this.playlist.items[0]),d?(this.loading(!0),this.play(d,b,!0)):this.playlist.totalResults>c&&this.playlist.items.length>=c&&(this.videoIndex=c,this.loadItems(!0,!0)))},prev:function(){var a=this.playlist.items[this.playlist.currentIndex-1];if(!this.isLoading&&a){var b=this._vc.isPlaying();this.loading(!0),this.play(a,b,!0)}},goTo:function(a){if("undefined"!=typeof this.getIndex()){var b=this.playlist.items[a];b&&this.play(b)}},getIndex:function(){return this._md.playlistIndex||0},hide:function(){d.addClassName(this._els.dialog,"hidden"),d.removeClassName(this._els.button,"active")},setClassNames:function(){var a=this._ui._els.player,b=this._md&&this._md.isPlaylistItem?"is-playlist":"not-playlist";d.removeClassName(a,"is-playlist"),d.removeClassName(a,"not-playlist"),d.addClassName(a,b)},formatTitle:function(a,b,c){this._ui._els.title.textContent="("+(b+1)+"/"+c+") "+a},on_metadata_changed:function(a,b){this._md=b,b.isPlaylistItem&&(this.formatTitle(b.title,b.playlistIndex,this.playlist.totalResults),this.setClassNames())},on_load:function(){var a=this._md;this.loading(!1),a.isPlaylistItem&&(this.playlist.currentIndex=a.playlistIndex,this.formatTitle(a.title,a.playlistIndex,this.playlist.totalResults)),this.setClassNames()},on_button_activated:function(a,b){switch(b){case"playlist-prev":this.prev();break;case"playlist-next":this.next();break;case"playlist":var c=!d.hasClassName(this._els.dialog,"hidden");d.setClassName(this._els.dialog,"hidden",c),d.setClassName(this._els.button,"active",!c);break;default:if(0!==b.indexOf("quality-"))return;this.isHD=this._vc.isHD()}},on_ended:function(a,b){this._md.isPlaylistItem&&this.next(!b.isFake)}},SAPO.Project.Video.Controllers._plugins.push(h)}(),function(){"use strict";var a=SAPO.Project.Video._,b=SAPO.Dom.Css,c=function(a,b,c,d,e,f){this._vc=a,this._ui=b,this._pub=c,this._pubD=d,this._v=e,this._setOption=f,this._inHD=void 0,this._btnEl=void 0,this._md=void 0,this._vc.subscribe("button_activated metadata_changed",void 0,this),this._btnEl=this._ui.addButton("quality","right"),this._ui.hideButton("quality")};c.prototype={_name:c._name="sv_quality",on_button_activated:function(a,b){0===b.indexOf("quality-")&&this._setQuality(!this._inHD)},on_metadata_changed:function(c,d){this._md=d,this._inHD=this._vc.isHD();var e=this._btnEl;d.isAd||d.isLive||!d.hasHD||this._vc.getOption("quality")?this._ui.hideButton("quality"):(this._ui.showButton("quality"),e?e.title=a("qualityTitle"):e=this._btnEl,e.removeAttribute("disabled",""),b.removeClassNamesStartingWith(e,"quality-",this._inHD?"hd":"sd"))},_setQuality:function(a){this._setOption("startTime",this._vc.getCurrentTime()),b.removeClassName(this._ui._els.player,"is-new-video"),this._btnEl.setAttribute("disabled",""),this._vc.load({requestURL:this._md.requestURL,autoplay:!0,quality:a?"hd":"sd"})}},SAPO.Project.Video.Controllers._plugins.push(c)}(void 0),function(){"use strict";var a=SAPO.Project.Video._,b=SAPO.Dom.Css,c=SAPO.Dom.Event,d=SAPO.Project.Video.Features,e=SAPO.Dom.Selector,f=function(e,f){if(this._vc=e,this._ui=f,!this._vc.getOption("skipShare")){this._vc.subscribe("button_activated metadata_changed share_intent",void 0,this),this._btnEl=this._ui.addButton("sv-share","right");var g=document.createElement("div");g.className="dialog dialog-sv-share hidden";var h=document.createElement("div"),i=document.createElement("div");i.className="row",h=document.createElement("span"),h.className="d-title",h.appendChild(document.createTextNode(a("shareTitle"))),i.appendChild(h);var j=document.createElement("div");j.className="dialog-close button x",i.appendChild(j),g.appendChild(i),i=document.createElement("div"),i.className="row",h=document.createElement("label"),h.appendChild(document.createTextNode(a("shareLinkTitle"))),i.appendChild(h);var k=document.createElement("span");k.className="input-wrapper",h=document.createElement("input"),h.type="text",k.appendChild(h),i.appendChild(k);var l=h;g.appendChild(i),i=document.createElement("div"),i.className="row",h=document.createElement("label"),h.appendChild(document.createTextNode(a("shareEmbedTitle"))),i.appendChild(h),k=document.createElement("span"),k.className="input-wrapper",h=document.createElement("input"),h.type="text",k.appendChild(h),i.appendChild(k);var m=h;g.appendChild(i),i=document.createElement("div"),i.className="row",h=document.createElement("label"),h.appendChild(document.createTextNode(a("shareSocialTitle"))),i.appendChild(h);var n=document.createElement("a");if(n.target="_blank",n.setAttribute("rel","external"),h=document.createElement("span"),h.className="logo facebook",n.appendChild(h),i.appendChild(n),n=document.createElement("a"),n.target="_blank",n.setAttribute("rel","external"),h=document.createElement("span"),h.className="logo twitter",n.appendChild(h),i.appendChild(n),n=document.createElement("a"),n.target="_blank",n.setAttribute("rel","external"),h=document.createElement("span"),h.className="logo googleplus",n.appendChild(h),i.appendChild(n),g.appendChild(i),this._el=g,this._ui._els.aEl.appendChild(this._el),c.observe(j,"click",function(a){c.stop(a),b.addClassName(g,"hidden"),b.removeClassName(this._btnEl,"active")}.bindObj(this)),!d.hasTouchEvents){var o=function(a){var b=c.element(a);"input"!==b.nodeName.toLowerCase()&&(b=b.firstChild),c.stop(a),b.select()},p=function(a){var b=c.element(a);b.value=this._inputEls[0]===b?this._linkValue:this._embedValue,setTimeout(function(){b.focus(),b.select()},0)}.bindObj(this);this._inputEls=[l,m];for(var q,r=0;2>r;++r)q=this._inputEls[r],c.observe(q.parentNode,"mousedown",o),c.observe(q,"focus",o),c.observe(q,"change",p)}}};f.prototype={_name:f._name="sv_share",on_button_activated:function(a,c){if("sv-share"===c&&this._md){var d=!b.hasClassName(this._el,"hidden");b.setClassName(this._el,"hidden",d),b.setClassName(this._btnEl,"active",!d)}},on_metadata_changed:function(b,c){if(this._md=c,c.isAd)return void this._ui.hideButton("sv-share");this._ui.showButton("sv-share");var d=this._btnEl;d&&(d.title=a("shareTitle"),this._btnEl=d),c.dimensions||(c.dimensions=[580,326]);var f=c.dimensions[0],g=c.dimensions[1],h=c.title,i=encodeURIComponent(h),j=c.link,k=encodeURIComponent(j),l=[c.videoDomain,c.hash,"mov",c.isLive?"24":"1"].join("/"),m=e.select("input",this._el),n=e.select("a",this._el);this._linkValue=j,m[0].value=j,this._embedValue=['<iframe src="http://rd3.videos.sapo.pt/playhtml?file=',l,'" frameborder="0" scrolling="no" allowfullscreen width="',f,'" height="',g,'"></iframe>'].join(""),m[1].value=this._embedValue,n[0].href=["https://www.facebook.com/dialog/feed?app_id=128738460473752&link=",k,"&feature=share&display=popup&redirect_uri=",k].join(""),n[1].href=["http://twitter.com/intent/tweet?text=",i,": ","&related=sapo&via=sapo&url=",k].join(""),n[2].href=["https://plus.google.com/share?url=",k,"&feature=share&source=sapovideos&hl=pt-PT"].join("")},on_share_intent:function(){b.removeClassName(this._el,"hidden")}},SAPO.Project.Video.Controllers._plugins.push(f)}(void 0),function(){"use strict";var a=SAPO.Project.Video._,b=function(b,c){this._vc=b,this._ui=c,this._vc.getOption("skipBranding")||(this._vc.subscribe("button_activated metadata_changed go_to_sv_intent",void 0,this),this.btnEl=this._ui.addButton("go-to-sv","right"),this.btnEl&&(this.btnEl.setAttribute("rel","external"),this.btnEl.title=a("goToSVTitle"),this._ui.hideButton("sv-share")))};b.prototype={_name:b._name="sv_go_to",on_button_activated:function(a,b){"go-to-sv"===b&&this.on_go_to_sv_intent("go_to_sv_intent","logo")},on_metadata_changed:function(a,b){b&&!b.isAd?(this._pageURI=b.link,this._authorURI=b.authorURI,this._ui.showButton("sv-share")):(this._pageURI=void 0,this._authorURI=void 0,this._ui.hideButton("go-to-sv"))},on_go_to_sv_intent:function(a,b){var c="author"===b?this._authorURI:this._pageURI;c&&window.open(c,this._vc._inInternoMode?"_top":"_blank")}},SAPO.Project.Video.Controllers._plugins.push(b)}(void 0),function(){"use strict";var a=SAPO.Project.Video._,b=SAPO.Utility.cors,c=SAPO.Dom.Css,d=SAPO.Project.Video.Features;if(!d.isIPhoneOrIPod){var e=function(){return"sub_"+(~~(Math.random()*Math.pow(32,6))).toString(32)},f=function(a,b,c,d){this._vc=a,this._ui=b,this._pub=c,this._pubD=d,this._bags={},this._currentBag=void 0,this._md={},this._fontSize=10,this._vc.subscribe("button_activated load metadata_changed resize",void 0,this),this._btnEl=this._ui.addButton("sv-subtitles","right"),this._ui.hideButton("sv-subtitles")};f.prototype={_name:f._name="sv_subtitles",on_button_activated:function(a,b){"sv-subtitles"===b&&this._currentBag&&(c.setClassName(this._btnEl,"active",this._isActive),c.toggleClassName(this._ui._els.player,"subtitles-on"))},on_metadata_changed:function(a,b){this._md=b},on_load:function(b,c){this._removeSubs();var d=this._md;this._requestURL=c.requestURL,d.hasSubtitles?(this._ui.showButton("sv-subtitles"),this._btnEl&&(this._btnEl.title=a("subtitlesTitle")),this._currentBag=this._bags[this._requestURL],this._currentBag?this._sendSubsToOverlay():this._getDocument()):this._ui.hideButton("sv-subtitles")},on_resize:function(a,b){var c=b.container,d=Math.round(.05*Math.min(c[0],c[1])),e=Math.round(d/2),f=Math.round(d/4);this._fontSize=d;var g=s$("subtitles-css"),h=[".sub {","    bottom: "+e+"px;","    font-size: "+d+"px;","    padding: 0 "+f+"px;","}"].join("\n");g.styleSheet?g.styleSheet.cssText=h:g.innerHTML=h},_getDocument:function(){var a=[this._md.queryDomain,this._md.hash,"subsjson"].join("/");b(a,this._parseDocument.bindObj(this),function(){},5,!1)},_parseDocument:function(a,b){if("string"==typeof b)try{b=JSON.parse(b)}catch(c){return}for(var d,f,g,h=[],i=0,j=b.length;j>i;++i)d=b[i],g=d.text,g&&(g=g.split("\n"),f={kind:"subtitle",id:e(),start:d.start,end:d.end,lines:g},h.push(f));this._currentBag=h,this._bags[this._requestURL]=h,this._sendSubsToOverlay()},_sendSubsToOverlay:function(){var a=this._currentBag;if(a)for(var b=0,c=a.length;c>b;++b)this._pub("add_timeline",a[b],this._requestURL)},_removeSubs:function(){this._pub("remove_timeline_prefix","sub_"),this._pub("remove_overlay_prefix","sub_")}},SAPO.Project.Video.Controllers._plugins.push(f)}}(void 0),function(){"use strict";var a=SAPO.Dom.Element,b=SAPO.Dom.Event,c=SAPO.Project.Video.Features;if(!c.isIPhoneOrIPod){var d=function(a,c,d,e,f,g){this._vc=a,this._ui=c,this._pub=d,this._pubD=e,this._setOption=g,this._mode="",this._user="",this._isVisible=!1;var h=document.createElement("div");h.className="sv-suggestions fill",this._ui._els.aEl.appendChild(h),this._el=h,this._suggEls=[];var i;i=document.createElement("div"),i.className="sv-suggestions-wrapper fill",this._wrapper=i,h.appendChild(i),h=i;for(var j=0;4>j;++j)i=document.createElement("a"),i.className="suggestion",i.setAttribute("target","_blank"),i.setAttribute("rel","external"),this._suggEls.push(i),h.appendChild(i);this._vc.getOption("followSuggestionsInline")&&b.observe(this._el,"click",this._onClick.bindObj(this)),this._vc.subscribe("ended metadata_changed resize",void 0,this)};d.prototype={_name:d._name="sv_suggestions",on_ended:function(){this._vc.getOption("skipSuggestions")||!this._md||this._md.isLive||this._md.isAd||"none"===this._mode||this._suggestions||this._fetchSuggestions()},on_metadata_changed:function(a,b){this._md=b,this._suggestions=void 0;var c=this._vc.getOption("relatedVideos"),d=!!c;d?"none"===c||"all"===c?(this._mode=c,this._user=b.author):(this._mode="user",this._user=c):(this._mode=b.relatedVideos,this._user=b.author);for(var e,f=0;4>f;++f)e=this._suggEls[f],e.innerHTML=""},on_resize:function(){var a=this._el;a.style.visibility="hidden",a.style.display="block";var b=[this._el.offsetWidth,this._el.offsetHeight],c=this._wrapper,d=c.style,e=b.slice(),f=[0,0],g=16/9,h=b[0]/b[1];h>g?(e[0]=Math.round(e[1]*g),f[0]=Math.floor((b[0]-e[0])/2)):(e[1]=Math.round(e[0]/g),f[1]=Math.floor((b[1]-e[1])/2)),d.width=e[0]+"px",d.height=e[1]+"px",d.margin=[f[1],"px ",f[0],"px"].join(""),a.style.visibility="",a.style.display=""},_onClick:function(c){var d=b.element(c),e=a.findUpwardsByClass(d,"suggestion");if(e){b.stop(c);var f=e.getAttribute("href")+"/mov/1";this._vc.load(f,!0)}},_fetchSuggestions:function(){var a={mode:this._mode,hash:this._md.hash,user:this._user,queryDomain:this._md.queryDomain};SAPO.Project.Video.sapoVideosSuggestions(a,function(a,b){a||b.length<4||(this._suggestions=b,this._fillSuggestions())}.bindObj(this))},_fillSuggestions:function(){for(var a,b,c,d,e,f,g=0;4>g;++g)d=this._suggEls[g],a=this._suggestions[g],d.innerHTML="",c=SAPO.Project.Video.thumbs.cropPosterTransform(a.thumb,[320,240],[480,270],a.duration),b=3===a.time.split(":").length?a.time.substring(3):a.time,d.setAttribute("href",a.url),e=document.createElement("div"),e.className="sugg-thumb fill",e.style.backgroundImage="url("+c+")",SAPO.Browser.IE&&parseInt(SAPO.Browser.version,10)<9&&(e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"', sizingMethod='scale')"),d.appendChild(e),f=document.createElement("div"),f.className="sugg-title",f.appendChild(document.createTextNode(a.title)),d.appendChild(f),f=document.createElement("div"),f.className="sugg-author",f.appendChild(document.createTextNode(a.author)),d.appendChild(f),f=document.createElement("div"),f.className="sugg-time",f.appendChild(document.createTextNode(b)),d.appendChild(f)}},SAPO.Project.Video.Controllers._plugins.push(d)}}(void 0),function(){"use strict";var a=SAPO.Project.Video._,b=SAPO.Dom.Css,c=SAPO.Dom.Event,d=SAPO.Dom.Selector,e=function(a){return a+(~~(Math.random()*Math.pow(32,6))).toString(32)},f=function(d,e,f,g){this._vc=d,this._ui=e,this._pub=f,this._pubD=g;var h=this._ui._els.aEl;this._counterEl=document.createElement("div"),this._counterEl.className="ad-counter",h.appendChild(this._counterEl),this._skipWrap=document.createElement("div"),this._skipWrap.className="skip-wrap",h.appendChild(this._skipWrap),this._skipEl=document.createElement("button"),this._skipEl.className="ad-skip hidden",this._skipEl.innerHTML=a("skipTitle"),this._skipWrap.appendChild(this._skipEl),this._adwordsWrap=document.createElement("div"),this._adwordsWrap.className="adwords-wrap",h.appendChild(this._adwordsWrap),this._adwordsEl=document.createElement("div"),this._adwordsEl.className="ad-words hidden",this._adwordsWrap.appendChild(this._adwordsEl),this._awBgEl=document.createElement("div"),this._awCloseEl=document.createElement("div"),this._awCloseEl.className="dialog-close button x",this._adwordsEl.appendChild(this._awCloseEl);var i=function(a){var d=c.element(a)===this._awCloseEl;if(b.addClassName(this._adwordsEl,"hidden"),!d){var e=this._vast.parts.nonLinears[0];this._pub("metro",e.trackingUrl,"vast_adword_tracking_url")}return this._pub("invalidate_adwords",{}),d?c.stop(a):void 0}.bindObj(this);c.observe(this._adwordsEl,"click",i),this._vc.subscribe("ad_error invalidate_ad_roll load metadata_changed show_ad_skip show_ads time_updated vast",void 0,this)};f.prototype={_name:f._name="sv_vast2",on_metadata_changed:function(a,b){this._md=b},on_vast:function(a,b,c){this._vast=b,this._isRepetition=c},on_load:function(a,c){if(this._vast){var d=c.isAd;b.addRemoveClassName(this._ui._els.player,"ad",d),b.addClassName(this._skipEl,"hidden"),b.addClassName(this._adwordsEl,"hidden"),this._applyAds()}},on_invalidate_ad_roll:function(){b.removeClassName(this._ui._els.player,"ad")},on_time_updated:function(b,c){this._md&&this._md.isAd&&!isNaN(c)&&!isNaN(this._md.duration)&&(this._counterEl.innerHTML=[a("pubTitle"),Math.max(0,Math.round(this._md.duration-c))].join(" "))},on_show_ad_skip:function(){b.removeClassName(this._skipEl,"hidden")},on_show_ads:function(){b.removeClassName(this._adwordsEl,"hidden")},on_ad_error:function(a,b,c){var d=c.error;if(d){"string"==typeof d&&(d=[d]);var e,f,g,h;for(e=0,f=d.length;f>e;++e)g=d[e],h=g.replace(/\[ERRORCODE\]/g,"number"==typeof b?b:900),this._pub("metro",h,"vast_error")}},_populateAdwords:function(a){var b,c,e,f,g,h,i,j=this._adwordsEl,k=d.select(".item",j);for(b=0,c=k.length;c>b;++b)j.removeChild(k[b]);if(e=a[0]){"adLinkUrl"in e||(e.adLinkUrl="#"),f=document.createElement("a"),f.className="item adw",e.adLinkUrl?(f.href=e.adLinkUrl,f.target="_blank",f.setAttribute("rel","external")):f.href="javascript:void(0)",g=document.createElement("div"),g.className="aw-title",g.appendChild(document.createTextNode(e.title)),f.appendChild(g),e.displayUrl&&(h=document.createElement("div"),h.className="link",h.appendChild(document.createTextNode(e.displayUrl)),f.appendChild(h));for(b=0,c=e.lines.length;c>b;++b)i=document.createElement("p"),i.appendChild(document.createTextNode(e.lines[b])),f.appendChild(i);j.appendChild(f)}},_applyAds:function(){var b,c=this._vast,d=this._md,f=d.duration,g=f/2,h=5;this._md.isAd||this._populateAdwords(c.parts.nonLinears);var i,j,k,l={pre:{start:0,end:g-.01},mid:{start:g,end:f-h/2-.01},post:{start:f-h/2,end:f}},m=this._vc.getCurrentRequestURL();for(var n in c.parts.linears)c.parts.linears.hasOwnProperty(n)&&(b=c.parts.linears[n],j=l[n],k=e("cue_"),i=b.src,this._pub("roll_info",{roll:b,rollName:n,rollRequestURL:i}),"pre"===n||this._md.isAd||(this._pub("add_timeline",{kind:"pub",start:j.start,end:j.end,args:["remove_cue",k],once:!0},m),this._pub("add_timeline",{kind:"pub",start:j.start,end:j.end,args:["call","load",i,!0,!0],once:!0,stopProcessing:!0},m),this._pub("add_cue",{title:a("linearAdTitle"),value:j.start,id:k,width:2},m)),this._md.isAd&&(b.adParameters.allowCloseButton&&this._pub("add_timeline",{kind:"pub",start:b.adParameters.timeForCloseButton||10,end:1e8,args:["show_ad_skip"],once:!0},i),"creativeView"in b.tracking&&this._pub("add_timeline",{kind:"pub",start:0,end:1e8,args:["metro",b.tracking.creativeView,"vast_creativeView"],once:!0},i),"start"in b.tracking&&this._pub("add_timeline",{kind:"pub",start:0,end:1e8,args:["metro",b.tracking.start,"vast_start"],once:!0},i),"firstQuartile"in b.tracking&&this._pub("add_timeline",{kind:"pub",start:.25,end:1e8,args:["metro",b.tracking.firstQuartile,"vast_firstQuartile"],asRatios:!0,once:!0},i),"midpoint"in b.tracking&&this._pub("add_timeline",{kind:"pub",start:.5,end:1e8,args:["metro",b.tracking.midpoint,"vast_midpoint"],asRatios:!0,once:!0},i),"thirdQuartile"in b.tracking&&this._pub("add_timeline",{kind:"pub",start:.75,end:1e8,args:["metro",b.tracking.thirdQuartile,"vast_thirdQuartile"],asRatios:!0,once:!0},i)));c.parts.nonLinears.length>0&&!this._md.isAd&&(k=e("cue_"),this._pub("add_cue",{title:a("nonlinearAdTitle"),value:10,id:k,width:2,once:!0},m),this._pub("add_timeline",{kind:"pub",start:10,end:1e8,args:["remove_cue",k],once:!0},m),this._pub("add_timeline",{kind:"pub",start:10,end:1e8,args:["show_ads"],once:!0},m),this._pub("add_timeline",{kind:"pub",start:10,end:1e8,args:["metro",c.parts.nonLinears.impression,"vast_nonlinear_impression"],once:!0},m))}},SAPO.Project.Video.Controllers._plugins.push(f)}(void 0),function(){"use strict";var a,b=SAPO.Project.Video._,c=SAPO.Dom.Element,d=SAPO.Dom.Event,e=SAPO.Project.Video.Features,f=function(a){return JSON.parse(JSON.stringify(a))},g=function(b){var f=b&&d.element(b);if(c.findUpwardsByClass(f,"ad-skip")){this._ui._els.aEl.removeAttribute("href"),this._ui._els.aEl.removeAttribute("rel"),this._ui._els.aEl.target="";try{this._pub("metro",this._bag.tracking.skip,"vast_skip")}catch(g){}return this._pub("invalidate_ad_roll",{autoplay:!0})}setTimeout(function(){if(d.stopObserving(this._ui._els.aEl,"click",a),e.isIOS)try{this._vc.unload()}catch(b){}this._ui._els.aEl.removeAttribute("href"),this._ui._els.aEl.removeAttribute("rel"),this._ui._els.aEl.removeAttribute("title"),this._ui._els.aEl.target="",this._pub("metro",this._bag.videoClicks.tracking,"vast_clickTracking"),this._vc.pause(),this._pub("invalidate_ad_roll",{autoplay:!1})}.bindObj(this),0),SAPO.Browser.IE&&parseInt(SAPO.Browser.version,10)<9&&window.open(this._bag.videoClicks.through)},h=function(b,c,d,e){this._vc=b,this._ui=c,this._pub=d,this._pubD=e,this._inAd=!1,this._bags={},this._bag={tracking:{}},a=g.bindObj(this),this._vc.subscribe("before_unload h_mute h_resize h_state_changed load metadata_changed roll_info state_changed",void 0,this)};h.prototype={_name:h._name="sv_rolls",on:function(c){var g=Array.prototype.slice.call(arguments),h=g.slice();h.shift();var i,j=h[0],k=this._bag,l=k.tracking;switch(c){case"metadata_changed":return j.fullURI!==this._currVideoURI&&(this._backToVideoURI=this._currVideoURI),void(this._currVideoURI=j.requestURL);case"roll_info":return void(this._bags[j.rollRequestURL]=f(j.roll));case"load":this._vc._clickEl.style.cursor="",this._vc._clickEl.title="";var m=this._bags[j.requestURL];return m||(m={tracking:{}}),k=m,l=k.tracking,this._bag=m,this._inAd=j.isAd,void(this._inAd&&k.videoClicks&&k.videoClicks.through&&k.videoClicks.through.length>0?(e.isIPhoneOrIPod||setTimeout(function(){this._ui._els.aEl.href=k.videoClicks.through[0],this._ui._els.aEl.target="_blank",this._ui._els.aEl.setAttribute("rel","external"),d.observe(this._ui._els.aEl,"click",a)}.bindObj(this),0),this._vc._clickEl.style.cursor="pointer",this._vc._clickEl.title=b("adTitle")):(d.stopObserving(this._ui._els.aEl,"click",a),this._ui._els.aEl.removeAttribute("rel"),this._ui._els.aEl.removeAttribute("href"),this._ui._els.aEl.target=""))}if(this._inAd)switch(c){case"before_unload":this._pub("metro",l.close,"vast_close"),this._pub("metro",l.closeLinear,"vast_closeLinear");break;case"state_changed":k&&k.impression&&k.impression.length>0&&(this._pub("metro",k.impression,"vast_linear_"+k.stage+"_impression"),k.impression=[]);break;case"h_mute":i=j?"mute":"unmute",this._pub("metro",l[i],"vast_"+i);break;case"h_resize":i="full"===j?"expand":"collapse",this._pub("metro",l[i],"vast_"+i);break;case"h_state_changed":i="play"===j?"resume":"pause",this._pub("metro",l[i],"vast_"+i)}}},SAPO.Project.Video.Controllers._plugins.push(h)}(void 0),function(){"use strict";var a=SAPO.Project.Video.Features,b=SAPO.Utility,c=function(a){return a+(~~(Math.random()*Math.pow(32,6))).toString(32)},d=b.arrIndexOf,e=function(a,b,c,d,e){this._vc=a,this._ui=b,this._pub=c,this._pubD=d,this._v=e,this._md={},this._kpis=void 0,this._kpiEvents={},this._cache={},this._preRoll=!1,this._vc.getOption("skipSVAnalytics")||this._vc.subscribe("button_activated ended h_mute h_resize h_scrub h_state_changed h_volume_changed load metadata_changed sv_analytics_kill_endpoint",void 0,this)};e.prototype={_name:e._name="sv_analytics",on_load:function(a,b){return this._ended=!1,this._preRoll=b.isAd,this._requestURL=b.requestURL,this._guidURL=b.guidURL,this._pub("remove_timeline_prefix","analytics_",b.requestURL),b.isLive||b.isAd?(this._kpis&&(this._kpis=void 0,this._kpiEvents={}),void(b.isAd&&(this._kpis&&(this._kpis=void 0,this._kpiEvents={}),this._fetchEndpoints()))):void this._fetchEndpoints(b)},on_metadata_changed:function(a,b){b.isAd||b.isLive||(this._md=b)},on:function(a){if(this._kpis&&!this._preRoll){var b=Array.prototype.slice.call(arguments);b.shift();var c,e=b[0],f=this._kpiEvents;switch(a){case"button_activated":switch(e){case"sv-share":this._pub("metro",f.clickShare,"svkpi_clickShare");break;case"quality-sd":this._pub("metro",f.clickHd,"svkpi_clickHd");break;case"quality-hd":this._pub("metro",f.clickSd,"svkpi_clickSd")}break;case"ended":this._pub("metro",f.complete,"svkpi_complete"),this._ended=!0;break;case"h_mute":c=e?"clickMute":"clickUnMute",this._pub("metro",f[c],"svkpi_"+c);break;case"h_resize":if(e===this._lastResize)break;c="full"===e?"clickFullScreenOn":"clickFullScreenOff",this._pub("metro",f[c],"svkpi_"+c),this._lastResize=e;break;case"h_scrub":this._pub("metro",f.clickSeek,"svkpi_clickSeek"),this._ended=!1;break;case"h_state_changed":c="play"===e?"clickPlay":"clickPause",this._pub("metro",f[c],"svkpi_"+c),this._ended&&(this._ended=!1,c="clickReview",this._pub("metro",f[c],"svkpi_"+c));break;case"h_volume_changed":c="up"===e?"volumeUp":"volumeDown",this._pub("metro",f[c],"svkpi_"+c);break;case"sv_analytics_kill_endpoint":var g=d(this._kpis.events,e);-1!==g&&this._kpis.events.splice(g,1)}}},_applyKPIs:function(a){var b,d,e,f=a.events.length;if(this._preRoll){for(d=0;f>d;++d)if(b=a.events[d],"preRoll"===b.event)return void this._pub("metro",b.endpoint,"svkpi_preRoll")}else{var g=[];for(d=0;f>d;++d)b=a.events[d],"progress"===b.event&&g.push(b);e=g.length;var h=function(a){return 0>a?-1:a>0?1:0},i=function(a,b){return h(b.time-a.time)};g.sort(i);var j,k,l=this._requestURL,m={},n=this._md.duration;for(d=0;e>d;++d)b=g[d],this._pub("add_timeline",{kind:"pubs",start:b.time-1,end:n,args:[["metro",b.endpoint,"svkpi_progress"],["sv_analytics_kill_endpoint",b]],once:!0,id:c("analytics_")},l),n=b.time;for(d=0;f>d;++d)switch(b=a.events[d],b.event){case"start":this._pub("add_timeline",{kind:"pubs",start:0,end:this._md.duration,args:[["metro",b.endpoint,"svkpi_start"],["sv_analytics_kill_endpoint",b]],once:!0,id:c("analytics_")},l);break;case"progress":break;default:k=b.event,j=m[k],j?j.push(b.endpoint):m[k]=[b.endpoint]}this._kpiEvents=m}},_fetchEndpoints:function(){var b=this._md,c=function(a,c){if(!a)try{c="string"==typeof c?JSON.parse(c):c,this._cache[b.guid]=c,this._preRoll||(this._kpis=c),this._applyKPIs(c)}catch(d){}}.bindObj(this);return this._cache[b.guid]?c(null,this._cache[b.guid]):void SAPO.Project.Video.sapoVideosAnalytics({protocol:b.protocol,host:b.domain,hash:b.hash,author:b.author,duration:b.duration,autoplay:this._vc.getOption("autoplay"),isInterno:this._vc._inInternoMode,pageURI:a.pageURI(),teck:this._vc.isHtml5()?"html5":"html5-flash"},c)}},SAPO.Project.Video.Controllers._plugins.push(e)}(void 0),function(){"use strict";var a=window.parent,b=a.onPlay,c=a.onClipDone,d=a.onReplay,e=a.onClickPlay,f=a.onClickPause,g=function(a){this._vc=a,this._md=void 0,this._justStarted=!1,this._vc.subscribe("ended metadata_changed replay state_changed time_updated",void 0,this)};g.prototype={_name:g._name="sv_vast",on_ended:function(){c&&this._md&&c(this._md.hash),this._justStarted=!0},on_metadata_changed:function(a,b){b&&(this._md=b,this._justStarted=!0)},on_replay:function(){d&&d(this._md.hash)},on_state_changed:function(a,b){this._md&&("play"===b&&e?e(this._md.hash):"pause"===b&&f&&f(this._md.hash))},on_time_updated:function(a,c){b&&this._md&&this._justStarted&&c>0&&(b(this._md.hash),this._justStarted=!1)}},SAPO.Project.Video.Controllers._plugins.push(g)}(void 0),function(){"use strict";var a=function(a,b,c){this._vc=a,this._ui=b,this._pub=c,this._vc.subscribe("time_updated seeked ended progress",void 0,this)};a.prototype={_name:a._name="sv_embed_api",on:function(a,b){var c,d,e;switch(a){case"time_updated":d=this._vc.getDuration(),e=b/d,c={seconds:b,percent:e,duration:d},this._pub("playProgress",c);break;case"seeked":d=this._vc.getDuration(),e=b/d,c={seconds:b,percent:e,duration:d},this._pub("seek",c);break;case"ended":this._pub("finished");break;case"progress":var f=this._vc.getCache(!0);if(!f)return;c={percent:f.end,duration:this._vc.getDuration(),bytesLoaded:-1,bytesTotal:-1},this._pub("loadProgress",c)}}},SAPO.Project.Video.Controllers._plugins.push(a)}(void 0),SAPO.Project.Video._kind=SV_KIND,SAPO.Project.Video._version=SV_VERSION,SAPO.Project.Video._env=SV_ENV,function(){"use strict";var a=SAPO.Utility.cors,b=SAPO.Utility.XML2,c=10,d=function(a){return JSON.parse(JSON.stringify(a))},e=function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]===b)return;a.push(b)},f=function(a){for(var b=a.length,c=new Array(b),d=0;b>d;++d)c[d]=a[d];return c},g=function(a,b){b=b.toLowerCase();do{if(a.nodeName.toLowerCase()===b)return a;a=a.parentNode}while(a)},h=function(){this._listeners={},this._maxListeners=10,this._running=!1,this._sourceFilesRemaining=0};h.prototype={reset:function(){this._running=!0,this._sourceFilesRemaining=0,this._data={sourceUrls:[],ads:{},globalTracking:{linears:{},nonLinears:{},companions:{}},globalVideoClicks:{}}},getDocument:function(b,d){return this._running&&!d?this.emit("error","was already running!"):(d||this.reset(),this.emit("getDocument",b),this._data.sourceUrls.push(b),++this._sourceFilesRemaining,void a(b,this.parseDocument.bindObj(this),this.getFailed.bindObj(this,b),c,!0))},parseDocument:function(a,c){this.emit("document",c),--this._sourceFilesRemaining;try{this.parseVAST(b.getChildren(c,"VAST")[0])}catch(d){this.emit("error",{code:100,message:"XML parsing error: processing VAST element"})}0===this._sourceFilesRemaining&&(delete this._data.globalTracking,delete this._data.globalVideoClicks,this.emit("done",this._data),this._running=!1,this._data={sourceUrls:[]})
},parseVAST:function(a){for(var c=b.getChildren(a,"Ad"),d=0,e=c.length;e>d;++d)this.parseAd(c[d])},parseAd:function(a){var c,d,e=b.getChildren(a,"Wrapper");for(c=0,d=e.length;d>c;++c)this.parseWrapper(e[c]);var f=b.getChildren(a,"InLine");for(c=0,d=f.length;d>c;++c)this.parseInLine(f[c])},parseWrapper:function(a){this.parseErrorAndImpression(a);var c,d,e,g,h,i,j,k=b.getChildren(a,"Creative");for(c=0,d=k.length;d>c;++c){for(e=k[c],i=f(b.getChildren(e,"Linear")),g=0,h=i.length;h>g;++g)j=i[g],this.parseTracking(j,this._data.globalTracking.linears),this.parseVideoClicks(j,this._data.globalVideoClicks);for(i=f(b.getChildren(e,"NonLinearAds")),g=0,h=i.length;h>g;++g)j=i[g],this.parseTracking(j,this._data.globalTracking.nonLinears);for(i=f(b.getChildren(e,"CompanionAds")),g=0,h=i.length;h>g;++g)j=i[g],this.parseTracking(j,this._data.globalTracking.companions)}var l=b.getTrimmedText(a,"VASTAdTagURI");this.getDocument(l,!0)},parseErrorAndImpression:function(a){var c,d,f="*",h=-1!==a.nodeName.toLowerCase().indexOf("wrapper");h||(d=g(a,"ad"),d&&(f=d.getAttribute("id"))),c=this._data.ads[f],c||(c={error:[],impression:[]},this._data.ads[f]=c),d&&(c.system=b.getTrimmedText(a,"AdSystem"),c.title=b.getTrimmedText(a,"AdTitle"),c.description=b.getTrimmedText(a,"Description"),c.advertiser=b.getTrimmedText(a,"Advertiser")),e(c.error,b.getTrimmedText(a,"Error"));for(var i=b.getChildren(a,"Impression"),j=0,k=i.length;k>j;++j)e(c.impression,b.trimmedText(i[j]))},parseTracking:function(a,c){var d,f,g,h,i,j=b.getChildren(a,"Tracking");for(d=0,f=j.length;f>d;++d)g=j[d],h=g.getAttribute("event"),i=b.trimmedText(g),h in c?e(c[h],i):c[h]=[i]},parseVideoClicks:function(a,c){var d=b.getChildren(a,"VideoClicks")[0];if(d){var f,g,h=d.firstChild;do 1===h.nodeType&&(f=h.nodeName.toLowerCase(),f=f.substring(h.nodeName.indexOf("click")+6),g=b.trim(b.trimmedText(h)),f in c?e(c[f],g):c[f]=[g]);while(h=h.nextSibling)}},parseInLine:function(a){this.parseErrorAndImpression(a);var c,d,e,f,g,h,i=b.getChildren(a,"Creative");for(c=0,d=i.length;d>c;++c){for(e=i[c],h=b.getChildren(e,"Linear"),f=0,g=h.length;g>f;++f)this.parseLinear(h[f],e);for(h=b.getChildren(e,"NonLinearAds"),f=0,g=h.length;g>f;++f)this.parseNonLinearAds(h[f],e);for(h=b.getChildren(e,"CompanionAds"),f=0,g=h.length;g>f;++f)this.parseCompanionAds(h[f],e)}},parseIds:function(a){var b=a.getAttribute("id"),c=g(a,"ad"),d=c.getAttribute("id"),e=parseInt(c.getAttribute("sequence"),10);return{adId:d,adSequence:e,creativeId:b}},parseLinear:function(a,c){var e,f,g,h,i=this.parseIds(c),j=a.getAttribute("sequence")||i.adSequence;switch(j){case 3:h="post";break;case 2:h="mid";break;default:h="pre"}var k={adId:i.adId,creativeId:i.creativeId,stage:h,duration:void 0,tracking:d(this._data.globalTracking.linears),videoClicks:d(this._data.globalVideoClicks),adParameters:{}};k.duration=b.getTrimmedText(a,"Duration"),k.duration=b.parseTime(k.duration),this.parseTracking(a,k.tracking);var l=b.getTrimmedText(a,"AdParameters");for(l=l.split(";"),e=0,f=l.length;f>e;++e)g=l[e].split("="),""!==g[0]&&(k.adParameters[g[0]]=g[1]);"allowCloseButton"in k.adParameters&&(k.adParameters.allowCloseButton=Boolean(k.adParameters.allowCloseButton)),"timeForCloseButton"in k.adParameters&&(k.adParameters.timeForCloseButton=Number(k.adParameters.timeForCloseButton)),this.parseVideoClicks(a,k.videoClicks);var m=b.getChildren(a,"MediaFiles");m=m[0],this.emit("MediaFiles",m,k)},parseNonLinearAds:function(a,b){var c=this.parseIds(b),e={adId:c.adId,creativeId:c.creativeId,tracking:d(this._data.globalTracking.nonLinears)};this.parseTracking(a,e.tracking),this.emit("NonLinearAds",a,e)},parseCompanionAds:function(a,b){var c=this.parseIds(b),e={adId:c.adId,creativeId:c.creativeId,tracking:d(this._data.globalTracking.companions)};this.parseTracking(a,e.tracking),this.emit("CompanionAds",a,e)},getFailed:function(a){this.emit("error",{code:301,message:"error requesting "+a}),1===this._sourceFilesRemaining&&(this._data||this.reset(),this.emit("done",this._data))},on:function(a,b){var c=this._listeners[a];if(c||(c=[],this._listeners[a]=c),0!==this._maxListeners){var d=c.length+1;c.length>this._maxListeners&&window.console.log(["WARN: event ",a," has ",d," listeners!"].join(""))}return c.unshift(b),this.emit("newListener","function"==typeof b?b:b[0]),this},addListener:function(a,b){return this.on(a,b)},once:function(a,b){return this._on(a,[b])},removeListener:function(a,b){var c=this._listeners[a];if(!c)return this;var d,e,f;for(d=c.length-1;d>=0;--d)e=c[d],f="function"!=typeof e,f||(e=e[0]),b&&e!==b||c.splice(d,1);return this},removeAllListeners:function(a){return this.removeListener(a)},setMaxListeners:function(a){return this._maxListeners=a,this},listeners:function(a){return this._listeners[a]},emit:function(){for(var a=arguments.length,b=new Array(a),c=0;a>c;++c)b[c]=arguments[c];var d=b.shift(),e=this._listeners[d];if(!e||0===e.length)return!1;var f,g;for(c=e.length-1;c>=0;--c)f=e[c],g="function"!=typeof f,g&&(f=f[0]),f.apply(null,b),g&&e.splice(c,1);return!0},listenerCount:function(a){var b=this._listeners[a];return b?b.length:0}},SAPO.namespace("Project.Video.VAST.parsers"),SAPO.namespace("Project.Video.VAST.handlers"),SAPO.namespace("Project.Video.VAST.VPAID"),SAPO.Project.Video.VAST.VASTParser=h}(),function(){"use strict";var a=SAPO.Project.Video.Features,b=function(b,c,d){var e=[a.pageProtocol(),"//pub.sapo.pt/vast.php?charset=UTF-8","&zoneid=",b,"&playerserver=",location.host,"&d=",c.duration,"&cpid=",c.author,"&playertype="+(d?"INTERNO":"EXTERNO"),"&player="+("VideoNative"===SAPO.Project.Video._kind?"Native":"HighEnd"),c.tags?"&kw="+encodeURIComponent(c.tags.join(",")):"","&rnd="+(~~(Math.random()*Math.pow(32,6))).toString(32)].join("");return e};SAPO.Project.Video.VAST.SapoPubVAST=b}(),function(){"use strict";var a="video/mp4 text/javascript application/x-shockwave-flash video/flv image/gif image/png image/jpeg image/jpg".split(" "),b={};!function(){for(var c,d=0,e=a.length;e>d;++d)c=a[d],b[c]=d}();var c=function(a){var c=b[a.item.type];return void 0===c?-1:c},d=function(a,b){return c(a)-c(b)},e=function(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])},f=function(a){var b=function(b){return e(b.item.dims,a)};return function(a,c){return b(a)-b(c)}};SAPO.Project.Video.VAST.handleCompanions=function(a,b){var c,g,h,i,j;for(i=a.length-1;i>=0;--i)h=a[i],h.container=SAPO.Dom.Selector.select(h.container,window.parent.document.documentElement)[0],h.container||a.splice(i,1);for(i=0,j=a.length;j>i&&0!==b.length;++i)h=a[i],b.sort(d),b.sort(f(h.dims)),g=b[0],c=e(h.dims,g.item.dims),c>40||(b.shift(),g.builder(g.item,h.container))}}(),function(){"use strict";function a(a){var e={nodeName:a.nodeName,src:b.trim(b.text(a)),type:a.getAttribute("type").toLowerCase(),dims:[d(a.getAttribute("width")),d(a.getAttribute("height"))],delivery:a.getAttribute("delivery")},f=b.getText(a.parentNode.parentNode,"Duration");return f&&(e.duration=b.parseTime(f)),a.getAttribute("bitrate")&&(e.bitrate=d(a.getAttribute("bitrate"))),a.getAttribute("minBitrate")&&(e.bitrate=d(a.getAttribute("minBitrate"))),a.getAttribute("maxBitrate")&&(e.bitrate=d(a.getAttribute("maxBitrate"))),a.getAttribute("maintainAspectRatio")&&(e.maintainAspectRatio=c(a.getAttribute("maintainAspectRatio"))),a.getAttribute("scalable")&&(e.maintainAspectRatio=c(a.getAttribute("scalable"))),a.getAttribute("apiFramework")&&(e.maintainAspectRatio=c(a.getAttribute("apiFramework"))),e}var b=SAPO.Utility.XML2,c=function(a){return"true"===a.toLowerCase()},d=function(a){return parseInt(a,10)};SAPO.Project.Video.VAST.parsers.MediaFile=a}(),function(){"use strict";function a(a){var e,g={nodeName:a.nodeName,src:b.text(a),type:a.getAttribute("creativeType").toLowerCase()},h=a.parentNode;e=f(h,"width","height",d),e&&(g.dims=e),e=f(h,"assetWidth","assetHeight",d),e&&(g.assetDims=e),e=f(h,"expandedWidth","expandedHeight",d),e&&(g.expandedDims=e),e=h.getAttribute("apiFramework"),e&&(g.apiFramework=e),e=h.getAttribute("id"),e&&(g.id=e),e=h.getAttribute("adSlotId"),e&&(g.adSlotId=e),e=b.getText(h,"CompanionClickThrough"),e&&(g.companionClickThrough=e),h.getAttribute("maintainAspectRatio")&&(g.maintainAspectRatio=c(h.getAttribute("maintainAspectRatio"))),h.getAttribute("scalable")&&(g.scalable=c(h.getAttribute("scalable")));var i=h.getAttribute("minSuggestedDuration");return i&&(g.minSuggestedDuration=b.parseTime(i)),g}var b=SAPO.Utility.XML2,c=function(a){return"true"===a.toLowerCase()},d=function(a){return parseInt(a,10)},e=function(a){return a},f=function(a,b,c,d){d&&(d=e);var f=a.getAttribute(b);f&&(f=d(f));var g=a.getAttribute(c);return g&&(g=d(g)),f&&g?[f,g]:void 0};SAPO.Project.Video.VAST.parsers.StaticResource=a}(),function(){"use strict";function a(a){var c,d,e,f,g,h,i=b.getChildren(a,"Result"),j=[];for(e=0,f=i.length;f>e;++e){c=i[e],h={lines:[]},d=c.firstChild;do 1===d.nodeType&&(g=d.tagName.toLowerCase(),"title"===g?h.title=b.trim(b.text(d)):"displayurl"===g?h.displayUrl=b.trim(b.text(d)):"adlinkurl"===g?h.adLinkUrl=b.trim(b.text(d)):"line"===g.substring(0,4)&&h.lines.push(b.trim(b.text(d))));while(d=d.nextSibling);j.push(h)}return j}var b=SAPO.Utility.XML2;SAPO.Project.Video.VAST.parsers.AdReq=a}(),function(){"use strict";function a(a,b){var c=document.createElement("a");c.setAttribute("href",a.companionClickThrough),c.setAttribute("target","_blank");var d=document.createElement("img");d.setAttribute("src",a.src),d.setAttribute("width",a.dims[0]),d.setAttribute("height",a.dims[1]),c.appendChild(d),b.appendChild(c)}function b(b){return"StaticResource"===b.nodeName&&-1!==d(c,b.type)?{mimeType:b.type,description:"non-linear image",item:b,builder:a}:void 0}var c=["image/jpeg","image/jpg","image/png","image/gif"],d=SAPO.Utility.arrIndexOf;SAPO.Project.Video.VAST.handlers.Image=b}(),function(){"use strict";function a(a,b){c.embed({swf:a.src,dims:a.dims,container:b,params:{allowfullscreen:!0,allowscriptaccess:"always",wmode:"transparent"},flashvars:{},insteadOf:!1})}function b(b){return"StaticResource"===b.nodeName&&"application/x-shockwave-flash"===b.type?{mimeType:b.type,description:"non-linear flash resource",item:b,builder:a}:void 0}var c=SAPO.Utility.SWF;SAPO.Project.Video.VAST.handlers.Flash=b}(),function(){"use strict";function a(a,b){var c=document.createElement("video");c.setAttribute("type",a.type),c.setAttribute("src",a.src),c.setAttribute("autoplay",""),b.appendChild(c),c.volume=.2}function b(b){return"MediaFile"===b.nodeName&&-1!==d(c,b.type)?{mimeType:b.type,description:"linear html5-powered video",item:b,builder:a}:void 0}var c=["video/mp4","video/x-mp4","video/webm","video/ogg","application/x-mpegurl"],d=SAPO.Utility.arrIndexOf;SAPO.Project.Video.VAST.handlers.Html5Video=b}(),function(){"use strict";function a(a,b){var c,g=~~(1e5*Math.random()),h="_ready"+g;window[h]=function(){c.style.zIndex="",setTimeout(function(){c.vjs_setProperty("volume",.2)},250)};var i={autoplay:"true",readyFunction:h};if(-1!==f(d,a.type)){var j=a.src.lastIndexOf("/");i.rtmpConnection=a.src.substring(0,j),i.rtmpStream=a.src.substring(j+1)}else i.src=a.src;c=e.embed({swf:"/SAPO/Project/Video/assets/flash/videojs.swf",dims:a.dims,container:b,params:{allowfullscreen:!0,allowscriptaccess:"always",wmode:"opaque"},flashvars:i,insteadOf:!1}),c.style.zIndex=1e4}function b(b){return"MediaFile"===b.nodeName&&-1!==f(c,b.type)?{mimeType:b.type,description:"linear flash-powered video",item:b,builder:a}:void 0}var c=["video/mp4","video/x-mp4","video/flv","video/x-flv","rtmp/flv","rtmp/x-flv","rtmp/mp4","rtmp/x-mp4"],d=["rtmp/flv","rtmp/x-flv","rtmp/mp4","rtmp/x-mp4"],e=SAPO.Utility.SWF,f=SAPO.Utility.arrIndexOf;SAPO.Project.Video.VAST.handlers.FlashVideo=b}(),function(){"use strict";function a(a,b){var c,d,e,f,g,h,i,j;for(a.adLinkUrl?(c=document.createElement("a"),c.href=a.adLinkUrl,c.target="_blank",c.setAttribute("rel","external"),e=c):(d=document.createElement("p"),e=d),a.title&&(f=document.createElement("span"),f.className="title",f.appendChild(document.createTextNode(a.title)),e.appendChild(f)),a.displayUrl&&(g=document.createElement("span"),g.className="link",g.appendChild(document.createTextNode(a.displayUrl)),e.appendChild(g)),i=0,j=a.lines.length;j>i;++i)h=document.createElement("span"),h.className="line",h.appendChild(document.createTextNode(a.lines[i])),e.appendChild(h);e.className="adword",b.appendChild(e)}function b(b){if("StaticResource"===b.nodeName&&"application/saw"===b.type){var e=c.parseDOM(b.src),f=c.getChildren(e,"AdReq")[0];if(f){for(var g,h=d.parsers.AdReq(f),i=[],j=0,k=h.length;k>j;++j)g=h[j],g&&i.push({mimeType:"application/saw",description:"non-linear adword",item:g,builder:a});if(0!==i.length)return i}}}var c=SAPO.Utility.XML2,d=SAPO.Project.Video.VAST;d.handlers.Saw=b}(),function(){"use strict";function a(a,b,d){var e=c.VPAID["AdWrapper"+("flash"===a.implName?"Flash":"Html5")],f={adURL:a.src,adDims:a.dims,container:b,onReady:function(a){var b=i.bindObj(a);h.forEach(function(c){a.subscribe(b,c)}),d&&d(a)}};"viewMode"in f||(f.viewMode="normal"),"creativeData"in f||(f.creativeData="flash"===a.implName?"":{}),"environmentVars"in f||(f.environmentVars="flash"===a.implName?"":{}),e(f)}function b(b){return"MediaFile"===b.nodeName&&-1!==d(g,b.type)?(b.implName="text/javascript"!==b.type&&"application/javascript"!==b.type?"flash":"html5",{mimeType:b.type,description:["linear? ",b.implName,"-powered VPAID ad unit"].join(""),item:b,builder:a}):void 0}var c=SAPO.Project.Video.VAST,d=SAPO.Utility.arrIndexOf,e=function(a){return JSON.stringify(a)},f=function(){},g=["text/javascript","application/javascript","application/x-shockwave-flash"],h="AdClickThru AdError AdExpandedChange AdImpression AdLinearChange AdLoaded AdLog AdPaused AdPlaying AdRemainingTimeChange AdStarted AdStopped AdUserAcceptInvitation AdUserClose AdUserMinimize AdVideoComplete AdVideoFirstQuartile AdVideoMidpoint AdVideoStart AdVideoThirdQuartile AdVolumeChange AdDurationChange AdInteraction AdSizeChange AdSkipped AdSkippableStateChange".split(" "),i=function(a){switch(a.type){case"AdStarted":f("AdStarted:"),f("  getAdLinear() -> "+e(this.getAdLinear())),this.getAdLinear()&&f("  getAdRemainingTime() -> "+this.getAdRemainingTime().toFixed(2));break;case"AdLog":f("AdLog: "+a.data.message);break;case"AdRemainingTimeChange":f("AdRemainingTimeChange:"),f("  getAdRemainingTime() -> "+this.getAdRemainingTime().toFixed(2));break;case"AdExpandedChange:":f("AdExpandedChange:"),f("  getAdExpanded() -> "+e(this.getAdExpanded()));break;case"AdVolumeChange":f("AdVolumeChange:"),f("  getAdVolume() -> "+e(this.getAdVolume()));break;case"AdLinearChange":f("AdLinearChange:"),f("  getAdLinear() -> "+e(this.getAdLinear()));break;case"AdClickThru":f("AdClickThru:"),f("AdClickThru: "+e(a.data));break;case"AdSizeChange":f("AdSizeChange:"),f("  getAdWidth()  -> "+this.getAdWidth()),f("  getAdHeight() -> "+this.getAdHeight());break;case"AdDurationChange":case"AdError":case"AdImpression":case"AdInteraction":case"AdLoaded":case"AdPaused":case"AdPlaying":case"AdSizeChange":case"AdSkipped":case"AdSkippableStateChange":case"AdStopped":case"AdVideoComplete":case"AdVideoFirstQuartile":case"AdVideoStart":case"AdVideoMidpoint":case"AdVideoThirdQuartile":case"AdUserAcceptInvitation":case"AdUserClose":case"AdUserMinimize":f(a.data?a.type+":"+e(a.data):a.type);break;default:f('IGNORED type:"'+a.type+'"')}};c.handlers.AdUnit=b}(),function(){"use strict";var a=SAPO.Utility.SWF,b=function(b){var c,d,e,f={},g=function(a){var f=JSON.parse(a);switch(f.type){case"WrapperReady":console.log("WrapperReady",b.adDims,e),c.handshakeVersion("2.0");try{e&&(b.adDims=e),c.initAd(b.adDims[0],b.adDims[1],b.viewMode,b.creativeData,b.environmentVars),console.log("PASSED")}catch(g){c.resizeAd(b.adDims[0],b.adDims[1],b.viewMode)}c.startAd();break;case"AdLoaded":c.startAd()}d.fire(f)},h="onEvent_"+~~(1e4*Math.random());window[h]=g,c=a.embed({swf:"//"+SV_DOMAIN+(window.location.port?":"+window.location.port:"")+"/Projects/Video/"+SV_VERSION+"/flash/VPAIDAdUnitWrapper.swf",dims:b.adDims,container:b.container,params:{allowfullscreen:!0,allowscriptaccess:"always",wmode:"transparent"},flashvars:{onEvent:h,swf:b.adURL},insteadOf:!1}),d={subscribe:function(a,b,c){var d=f[b],e=!d;e&&(d=[]),d.push([a,c]),e&&(f[b]=d)},subscribeSane:function(a,b,c){this.subscribe(b,a,c)},unsubscribeSane:function(a,b){this.unsubscribe(b,a)},unsubscribe:function(a,b){var c=f[b];if(c){var d,e,g=c.length;for(d=0;g>d;++d)e=c[d],a===e[0]&&(c.splice(d,1),--g)}},fire:function(a){var b=a.type,c=f[b];if(c){var d,e,g=c.length;for(d=0;g>d;++d){e=c[d];try{(e[0]||void 0).call(e[1],a)}catch(h){console.error(h)}}}},getAdLinear:function(){return c.getAdLinear()},getAdExpanded:function(){return c.getAdExpanded()},getAdRemainingTime:function(){return c.getAdRemainingTime()},getAdVolume:function(){return c.getAdVolume()},setAdVolume:function(a){c.setAdVolume(a)},collapseAd:function(){c.collapseAd()},expandAd:function(){c.expandAd()},handshakeVersion:function(a){return c.handshakeVersion(a)},initAd:function(a,b,d,e,f,g){c.initAd(a,b,d,e,f,g)},pauseAd:function(){c.pauseAd()},resizeAd:function(a,b,d){try{c.resizeAd(a,b,d)}catch(f){e=[a,b],console.log("left resizeAd")}},resumeAd:function(){c.resumeAd()},startAd:function(){c.startAd()},stopAd:function(){c.stopAd()},getAdCompanions:function(){return c.getAdCompanions()},getAdDuration:function(){return c.getAdDuration()},getAdHeight:function(){return c.getAdHeight()},getAdIcons:function(){return c.getAdIcons()},getAdSkippableState:function(){return c.getAdSkippableState()},getAdWidth:function(){return c.getAdWidth()}},"onReady"in b&&b.onReady(d)};SAPO.Project.Video.VAST.VPAID.AdWrapperFlash=b}(),function(){"use strict";var a=function(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("msie")?parseInt(a.split("msie")[1]):0/0},b=function(b){var c=['<script type="text/javascript" src="',b.adURL,'"></scr',"ipt>"].join("");b.viewMode||(b.viewMode="normal"),b.desiredBitrate||(b.desiredBitrate=4e3),b.creativeData||(b.creativeData={}),b.environmentVars||(b.environmentVars={});var d=function(a,b){e.setAttribute("width",a),e.setAttribute("height",b)},e=document.createElement("iframe"),f=e.style;f.border=0,e.setAttribute("frameBorder","0"),e.setAttribute("scrolling","no"),e.setAttribute("allowfullscreen",""),e.setAttribute("mozallowfullscreen",""),e.setAttribute("webkitallowfullscreen",""),b.container||(b.container=document.body),b.container.appendChild(e);var g=e.contentWindow;a()<10?(g.contents=c,e.src='javascript:window["contents"]'):(g.document.open("text/html","replace"),g.document.write(c),g.document.close());var h="AdClickThru AdError AdExpandedChange AdImpression AdLinearChange AdLoaded AdLog AdPaused AdPlaying AdRemainingTimeChange AdStarted AdStopped AdUserAcceptInvitation AdUserClose AdUserMinimize AdVideoComplete AdVideoFirstQuartile AdVideoMidpoint AdVideoStart AdVideoThirdQuartile AdVolumeChange";h+="AdDurationChange AdInteraction AdSizeChange AdSkipped AdSkippableStateChange",h=h.split(" ");var i,j,k=function(a){switch(a.type){case"AdLoaded":i.startAd();break;case"AdSizeChange":!function(){var a=i.getAdWidth(),b=i.getAdHeight();d(a,b)}()}},l=function(){var a=g.getVPAIDAd;if(a&&"function"==typeof a){clearInterval(j),i=a(),i.subscribeSane=function(a,b,c){this.subscribe(b,a,c)},i.unsubscribeSane=function(a,b){this.unsubscribe(b,a)},"onReady"in b&&b.onReady(i);for(var c=0,e=h.length;e>c;++c)i.subscribe(k,h[c]);i.handshakeVersion("2.0"),i.initAd(b.adDims[0],b.adDims[1],b.viewMode,b.creativeData,b.environmentVars),d(b.adDims[0],b.adDims[1])}};j=setInterval(l,100)};SAPO.Project.Video.VAST.VPAID.AdWrapperHtml5=b}(),function(){"use strict";var a=SAPO.Project.Video.VAST,b=SAPO.Utility.XML2,c=[a.handlers.AdUnit,a.handlers.Html5Video,a.handlers.FlashVideo],d=[a.handlers.AdUnit,a.handlers.Flash,a.handlers.Image,a.handlers.Saw],e=function(a,b){for(var e,f,g=b?c:d,h=0,i=g.length;i>h;++h)if(e=g[h],f=e(a))return f},f=function(a,b){if(b)if("item"in b)a.push(b);else for(var c=0,d=b.length;d>c;++c)a.push(b[c])},g=function(a,b){var c,d;for(c=0,d=a.length;d>c;++c)b(a[c],c,a)},h=function(a,b,c){var d=function(a){a.item[b]=c};g(a,d)},i=function(c){var d={triggeredErrors:[],linears:[],nonLinears:[],companions:[]},i=new a.VASTParser;i.on("getDocument",function(){}),i.on("document",function(){}),i.on("error",function(a){d.triggeredErrors.push(a)}),i.on("MediaFiles",function(g,h){for(var i,j,k,l=b.getChildren(g,"MediaFile"),m=[],n=0,o=l.length;o>n;++n)try{i=l[n],k=a.parsers.MediaFile(i),j=e(k,!0,i),f(m,j)}catch(p){}var q=c.bestMediaFile(m);o>0&&!q&&d.triggeredErrors.push({code:403,message:"no supported mime types for linear ad"}),q&&(q.item.bag=h,d.linears.push(q))}),i.on("NonLinearAds",function(i,j){for(var k,l,m,n=b.getChildren(i,"StaticResource"),o=[],p=0,q=n.length;q>p;++p)try{k=n[p],m=a.parsers.StaticResource(k),l=e(m,!1,k),f(o,l)}catch(r){}var s=c.bestNonLinears(o);q>0&&0===s.length&&d.triggeredErrors.push({code:503,message:"no supported mime types for nonlinear ad"}),h(s,"bag",j),g(s,function(a){d.nonLinears.push(a)})}),i.on("CompanionAds",function(i,j){for(var k,l,m,n=b.getChildren(i,"StaticResource"),o=[],p=0,q=n.length;q>p;++p)try{k=n[p],m=a.parsers.StaticResource(k),l=e(m,!1,k),f(o,l)}catch(r){}var s=c.bestCompanions(o);q>0&&0===s.length&&d.triggeredErrors.push({code:604,message:"no supported mime types for companion ad"}),h(s,"bag",j),g(s,function(a){d.companions.push(a)})}),i.on("done",function(a){a.parts=d,c.cb(null,a)}),i.getDocument(c.vastXmlUrl)};SAPO.Project.Video.VAST.VASTRun=i}()}("","reclames.impresa.pt","highEnd","PROD","");
//# sourceMappingURL=VideoHighEndInner.js.map