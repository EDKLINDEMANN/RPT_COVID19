!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(p){p.timeago=function(e){return e instanceof Date?a(e):a("string"==typeof e?p.timeago.parse(e):"number"==typeof e?new Date(e):p.timeago.datetime(e))};var o=p.timeago;p.extend(p.timeago,{settings:{max_minutes:149,refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:"Há",prefixFromNow:null,suffixAgo:"",suffixFromNow:"a partir de agora",inPast:"brevemente",seconds:"menos de um minuto",minute:"um minuto",minutes:"%d minutos",hour:"uma hora",hours:"%d horas",day:"um dia",days:"%d dias",month:"cerca de um mês",months:"%d meses",year:"cerca de um ano",years:"%d anos",wordSeparator:" ",numbers:[]}},inWords:function(i){var r=this.settings.strings,e=r.prefixAgo,t=r.suffixAgo;if(this.settings.allowFuture&&i<0&&(e=r.prefixFromNow,t=r.suffixFromNow),!this.settings.allowPast&&0<=i)return this.settings.strings.inPast;var n=Math.abs(i)/1e3,o=n/60,a=o/60,s=a/24,l=s/365;function c(e,t){var n=p.isFunction(e)?e(t,i):e,o=r.numbers&&r.numbers[t]||t;return n.replace(/%d/i,o)}var d="";if(o<this.settings.max_minutes){d=n<45&&c(r.seconds,Math.round(n))||n<90&&c(r.minute,1)||o<45&&c(r.minutes,Math.round(o))||o<90&&c(r.hour,1)||a<24&&c(r.hours,Math.round(a))||a<42&&c(r.day,1)||s<30&&c(r.days,Math.round(s))||s<45&&c(r.month,1)||s<365&&c(r.months,Math.round(s/30))||l<1.5&&c(r.year,1)||c(r.years,Math.round(l));var u=r.wordSeparator||"";return void 0===r.wordSeparator&&(u=" "),p.trim([e,d,t].join(u))}return!0!==this.settings.liveblog?"":o>=this.settings.max_minutes&&o<=this.settings.today_minutes?this.settings.strings.today:o<=2880?this.settings.strings.yesterday:void 0},parse:function(e){var t=p.trim(e);return t=(t=(t=(t=(t=t.replace(/\.\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2")).replace(/([\+\-]\d\d)$/," $100"),new Date(t)},datetime:function(e){var t=o.isTime(e)?p(e).attr("datetime"):p(e).attr("title");return o.parse(t)},isTime:function(e){return"time"===p(e).get(0).tagName.toLowerCase()}});var i={init:function(e){var t=p.proxy(r,this);t();var n=o.settings;void 0!==e&&e.liveblog&&(n.strings.prefixAgo="",n.strings.hour="Há 1h",n.strings.hours="Há %dh",n.strings.minute="Há 1m",n.strings.minutes="Há %dm",n.strings.seconds="Agora",n.strings.today="Hoje",n.strings.yesterday="Ontem",n.max_minutes=720,n.today_minutes=1440,n.yesterday_minutes=2880,n.liveblog=!0),0<n.refreshMillis&&(this._timeagoInterval=setInterval(t,n.refreshMillis))},update:function(e){var t=o.parse(e);p(this).data("timeago",{datetime:t}),o.settings.localeTitle&&p(this).attr("title",t.toLocaleString()),r.apply(this)},updateFromDOM:function(){p(this).data("timeago",{datetime:o.parse(o.isTime(this)?p(this).attr("datetime"):p(this).attr("title"))}),r.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};function r(){var e=function(e){if(!(e=p(e)).data("timeago")){e.data("timeago",{datetime:o.datetime(e)});p.trim(e.text())}return e.data("timeago")}(this),t=o.settings;if(!isNaN(e.datetime)&&(0==t.cutoff||s(e.datetime)<t.cutoff)){var n=a(e.datetime);""!=n?p(this).text(n).addClass("timeago_active"):p(this).removeClass("timeago_active")}return this}function a(e){return o.inWords(s(e))}function s(e){return(new Date).getTime()-e.getTime()}p.fn.timeago=function(e,t){var n=e?i[e]:i.init;return this.each(function(){n.call(this,t)}),this}}),document.addEventListener("obsLoad",function(){$("time.timeago").timeago()});var isIE=!1;document.documentMode=document.documentMode||null,document.documentMode&&(isIE=!0,document.documentMode<=10&&(console.log("Estás a usar um browser não suportado!","IE",document.documentMode),document.querySelector(".message-lt-ie").style.display="block")),document.documentMode||function(){var e=["meta[name*='{{selector}}']","meta[property*='{{selector}}']"],d=[],u=["#tbl-next-up","#fixed-footer",".whitelist-js","#dark-mode-switch","iframe","comment","#google_pubconsole_console","#inline-piano-container",".frontend-page-loading","main","*[data-static]","script","#main-audio","#content-header-loggedin","#content-header-loggedout","#login-popup","header","nav","footer","#obs-base-svg-global","#login-local-popup","#login-local-verify-email",'iframe[src*="pay.google.com"]',"#overlay-legislativas-2019"],r=contextualData.jsConfig.jsVersion,l={xhr:null,currentUrl:null,debug:localStorage.getItem("debug-router")||!1,requests:[],meta_selector_template:["meta[name*={{selector}}]","meta[property*={{selector}}]"],head_filter:["og:","twitter:","description","thumbnail"],reference_window:window.self,main:null,navigating:!1,hash_event:!1,events:{}},i=null;function c(arguments){l.debug&&console.log((new Date).toISOString()+" %cRouter: ","background-color:red;color:white;font-family:monospace;padding:2px;font-weight:bold",arguments)}l.main=l.reference_window.document.querySelector("main");var p={click:function(e){var t=e.currentTarget;if(1==e.metaKey||1==e.ctrlKey)return!0;var n="observador.pt";if(t.hostname.length-t.hostname.indexOf(n)===n.length)if(t.href.match("wp-"))c("This is a admin link link");else if(window.location.href.split("#")[0]!==t.href.split("#")[0]){if(!t.target){var o=!0===contextualData.jsConfig.disableAjaxNavigation&&!0,i=contextualData.jsConfig.jsVersion>r;!0===o||!0===i?window.location.href=t.href:(e.preventDefault(),p.go(t.href))}}else c("This is an in-page hash change");else c("This is not an observador link")},attachEvents:function(){$("body").on("click",'a[href*="/"]',p.click)},attachEventsToSelector:function(e){$(e).on("click",'a[href*="/"]',p.click)},fetch:function(o,i,r,a){void 0===a&&(a=!1);var s=new XMLHttpRequest;s.open("GET",o),s.responseType="text",s.isPrefetch=a,s.requestUrl=o,s.onload=function(e){var t=s.status;if(200<=t&&t<=399){if(c("current url: ",l.currentUrl),!1===s.isPrefetch&&(c(s.requestUrl,l.currentUrl),s.requestUrl!=l.currentUrl))return;if(i)try{i(p.parseHTML(s.responseText,a),s.responseURL)}catch(e){c(s.responseText),console.warn(e),c("Invalid body",e),console.warn(o),r&&r({error:"invalid_body"})}}else{var n={error:"bad_http",message:"Request returned an error"};400<=t&&t<=499&&(n.error="bad_http",n.message="Client Error"),500<=t&&t<=599&&(n.error="bad_server",n.message="Server took too long to respond"),c(n.message,e),console.warn(o),r&&(console.log(n),r(JSON.stringify(n)))}},s.onerror=function(e){var t={error:"bad_http",message:"Request returned an error"};4==s.readyState&&0==s.status&&(t.error="cors",t.message="Cannot load page due to CORS error"),c(t.message,e),console.warn(o),r&&r(JSON.stringify(t))},s.send(),l.requests.push(s)},trigger:function(e){obsEventEmitter(e)},parseHTML:function(e,t){if(0===e.length)return!1;if(void 0===t&&(t=!1),!1===t){var n=e.match(/<head>(.|\n)*?<\/head>/g)[0],o=(new DOMParser).parseFromString(n,"text/html").querySelectorAll(d);$(d).remove(),0<o.length&&$("head").append(o),$("body > *").not(u.join(",")).remove();var i=new RegExp("<script .* src='.*#page_specific'><\/script>","g"),r="";e.match(i)&&(r=e.match(i).join(" ")),e.replace(new RegExp("<script .* src='.*#page_specific'><\/script>","g"),"");var a=new RegExp(/<body.*class="(.+)".*>/).exec(e);document.body.className=null!=a&&0<a.length?a[1]:""}if(e.match("<main")){var s=void 0;if(e.match(/<main>(.|\n)*?<\/main>/g)&&(s=e.match(/<main>(.|\n)*?<\/main>/g)[0]),!s){var l=e.indexOf("<main>"),c=e.indexOf("</main>");s=e.substring(l,c)}return s=s.replace("<main>","").replace("</main>",""),{main:(s+=r)||"",html:e}}throw new Error("main not found")},go:function(n){var o=null;if(n.match("#")&&(o="#"+n.split("#")[1]),0==l.navigating)l.navigating=!0;else if(l.navigating){c("Aborting all requests");for(var e=0;e!=l.requests.length;e++)l.requests[e].abort()}p.trigger("obsBeforeNavigate"),Array.prototype.slice.call(document.querySelectorAll("script[src*='#page_specific']")).forEach(function(e){$(e).remove()}),c("current url: ",l.currentUrl=n),c("Fetch URL: "+n),p.fetch(n,function(e,t){null!=o&&(t+=o),c("Changing HTML"),l.reference_window.history.pushState({main:e.main,html:e.html},n,t),window.currentURL=n,p.trigger("obsBeforeLoad"),$("main").html(e.main),c("Received HTML: "+n),l.reference_window.scrollTo(0,0),l.navigating=!1,p.trigger("obsLoad")},function(e){console.log(e),l.navigating=!0,window.location.href=n,c("Error Ocurred, showing manual link.."),document.querySelector(".loading .manual").style.display="block",document.querySelector(".loading .manual").innerHTML='<a target="_top" href=" '+n+'">Se estiver lento, clique aqui para voltar a tentar.</a>'},!1),i=window.setTimeout(function(){l.navigating&&(c("Still fetching",l.navigating),c("Taking too long, showing manual link.."),document.querySelector(".loading .manual").style.display="block",document.querySelector(".loading .manual").innerHTML='<a target="_top" href=" '+n+'">Se estiver lento, clique aqui para voltar a tentar.</a>')},3e4)}};window.onkeydown=function(e){if(27==e.keyCode)for(var t=0;t!=l.requests.length;t++)l.requests[t].abort();window.clearTimeout(i),p.trigger("obsCancelNavigate")},["og:","twitter:","description","thumbnail","author","apple-itunes-app"].forEach(function(t){e.forEach(function(e){d.push(e.replace("{{selector}}",t))})}),d=d.concat(['script[type="application/ld+json"]',"title",'script[type="application/json+oembed"]',"head title","script[type*='ld+json']:not([data-schema])","link[rel='amphtml']","link[rel='alternate']"]).join(","),window.addEventListener("popstate",function(e){l.currentUrl||(l.currentUrl=this.window.location.href);var t=document.createElement("a");t.href=l.currentUrl;var n=e.target.location.origin+e.target.location.pathname+e.target.location.search,o=t.origin+(t.pathname||"")+(t.search||"");if(l.currentUrl=n,ga("send","event","Browser Back Button","click",{nonInteraction:1}),l.currentUrl!=o){l.currentUrl!=o&&(c(l.currentUrl,o),c("allow navigation. urls are different")),p.trigger("obsBeforeNavigate");var i=null!=e.state&&null!=e.state.html,r=null!=e.state&&null!=e.state.main;i&&r?(c("loading from state"),$("main").html(p.parseHTML(e.state.html).main),p.trigger("obsLoad")):(c("state is null. fetching page"),p.go(e.currentTarget.location.href))}else c("it's the same url")}),document.addEventListener("obsLoad",function(){document.querySelector(".loading").style.display="none",document.querySelector(".loading .manual").style.display="none",window.clearTimeout(i)}),document.addEventListener("obsCancelNavigate",function(){document.querySelector(".loading").style.display="none",document.querySelector(".loading .manual").style.display="none"}),document.addEventListener("obsBeforeNavigate",function(){window.obs.router.first_paint=!1,document.querySelector(".loading").style.display="block",sessionStorage.removeItem("first_paint")}),window.addEventListener("load",function(){sessionStorage.setItem("first_paint",!0),window.obs.router.first_paint=!0,p.attachEvents()}),window.obs=window.obs||{},window.obs.router={handlers:{go:p.go,attachEventsToSelector:p.attachEventsToSelector},first_paint:!0}}(window),document.addEventListener("obsLogout",function(e){ga("set","dimension12","anon")},!1),document.addEventListener("obsLogin",function(e){var t="lgdin";"true"==localStorage.getItem("PREMIUM_USER")&&(t="paid"),ga("set","dimension12",t)},!1),document.addEventListener("obsLoad",function(e){ga("send","event","JS Settings","Current JS Blade Version",contextualData.jsConfig.jsVersion),ga("send","event","JS Settings","Ajax Disabled",contextualData.jsConfig.disableAjaxNavigation)},!1),document.addEventListener("obsLoad",function(){if("post"===contextualData.type){var e=parseInt((1!==(r=(i=new Date).getDay()||7)&&i.setHours(-24*(r-1)))/864e5,0),t=localStorage.getItem("obs.history.weeklyArticleCount"),n=null!=t?JSON.parse(t):{};n[e]=null==n[e]?1:n[e]+1,localStorage.setItem("obs.history.weeklyArticleCount",JSON.stringify(n))}}),tp=window.tp||[];var calibrate={settings:{tid:"UA-49680806-11",cid:!1},init:function(){document.addEventListener("obsLoad",this.onNavigate),(window.SWG=window.SWG||[]).push(function(e){e.setOnFlowStarted(function(e){"subscribe"===e.flow&&(calibrate.maybeSendLanding(),calibrate.sendHit({t:"event",ni:1,ec:"checkout",ea:"payment_screen",el:"swg"}))}),e.setOnSubscribeResponse(function(e){e.then(function(e){calibrate.maybeSendLanding(),calibrate.sendHit({t:"event",ni:1,ec:"checkout",ea:"complete",el:"swg",ev:6})})})}),tp.push(["addHandler","checkoutSelectTerm",function(e){calibrate.maybeSendLanding(),calibrate.sendHit({t:"event",ni:1,ec:"checkout",ea:"payment_screen",el:e.termId})}]),tp.push(["addHandler","loginRequired",function(e){calibrate.maybeSendLanding(),calibrate.sendHit({t:"event",ni:1,ec:"checkout",ea:"login_screen",el:e.termId})}]),tp.push(["addHandler","checkoutComplete",function(e){calibrate.sendHit({t:"event",ni:1,ec:"checkout",ea:"complete",el:e.termId,ev:e.chargeAmount})}])},getCID:function(){return this.settings.cid||(this.settings.cid=ga.getAll()[0].get("clientId")),this.settings.cid},getUID:function(){return adamastor.isLoggedIn()?adamastor.getSessionProfile().sub:""},setCampaign:function(){var e=new URLSearchParams(document.location.search),t=!1,n=e.get("utm_medium"),o=e.get("utm_source"),i=e.get("utm_campaign"),r=e.get("utm_content");(n||o||i||r)&&(t={cm:n,cs:o,cn:i,cc:r},localStorage.setItem("calibrateCampaign",JSON.stringify(t)))},getCampaignObj:function(){var e=JSON.parse(localStorage.getItem("calibrateCampaign"))||{};return localStorage.removeItem("calibrateCampaign"),e},getParamsFromObject:function(e){var t=jQuery.param(e);return t&&(t="&"+t),t},maybeSendLanding:function(){obj=JSON.parse(localStorage.getItem("calibrateLandingPage")),obj&&(localStorage.removeItem("calibrateLandingPage"),calibrate.sendHit(obj))},sendHit:function(e){var t="https://www.google-analytics.com/collect";t+="?v=1",t+="&tid="+this.settings.tid,t+="&uid="+this.getUID(),t+="&cid="+this.getCID(),t+=this.getParamsFromObject(e),"pageview"===e.t&&(t+=this.getParamsFromObject(this.getCampaignObj()));var n={async:!0,url:t+="&z="+Math.random(),method:"GET"};jQuery.ajax(n)},onNavigate:function(){if(document.location.search&&calibrate.setCampaign(),"/premium/"===document.location.pathname)calibrate.maybeSendLanding(),calibrate.sendHit({t:"pageview",dh:document.location.host,dp:document.location.pathname,dt:document.title});else if(contextualData.post&&contextualData.post.premium){var e={t:"pageview",dh:document.location.host,dp:document.location.pathname,dt:document.title,cd1:contextualData.type,sc:"start"};e.cd2=contextualData.post.authors[0],e.cd3=contextualData.post.mainCategories[0],contextualData.post.mainCategories[1]&&(e.cd4=contextualData.post.mainCategories[1]),localStorage.setItem("calibrateLandingPage",JSON.stringify(e))}}};function batchComments(){if(contextualData.type&&("post"==contextualData.type||"grid"==contextualData.type)){var n=new BatchCommentsLinks;$(".commentSmallIcon").each(function(e,t){n.add(t)});try{n.create()}catch(e){console.log("=>",e)}}}function getSectionsPosts(){var e="https://api.observador.pt/v4",n={},t=Array.prototype.slice.call(document.querySelectorAll(".secondary-toggler")).filter(function(e){return e.hasAttribute("data-slug")}).map(function(e){var t=e.getAttribute("data-slug");return n[t]=document.querySelector(".ultimas[data-slug="+t+"]"),t});window.obs.isDevEnvironment()&&(e="https://v2dev.observador.pt/wp-json/obs_api/v4");var o={url:e+"/megamenu/subsections",method:"POST",data:JSON.stringify(t)};$.ajax(o).done(function(e){for(var t in e)n[t].innerHTML=e[t];Array.prototype.slice.call(document.querySelectorAll("#menu .resrc-megamenu:not(src)")).forEach(function(e){e.getAttribute("src")||imageproxy.run(e)})})}function toggleSecondaryNav(e,t,n){e.preventDefault(),e.stopPropagation();var o=$(t).parent(),i=o.hasClass("active");!n&&i||(o.addClass("active"),obs_ads.trigger("megamenu_"+o.data("ads-trigger")),lazyLoad(o)),$("#menu .active").not(o).removeClass("active")}function try_native_share(e){navigator.canShare&&(e.preventDefault(),navigator.share({title:contextualData.title,url:window.location.href}).then(function(){console.log("Share was successful.")}).catch(function(e){console.log("Sharing failed",e)}))}calibrate.init(),function(){var e={assetsLoaded:!1,commentsConfigurated:!1,shareCommentsPopUp:function(e,t){var n=(document.location.origin,e.object_id);n="https://observador.pt/?p="+e.object_id+t;var o=encodeURIComponent(n),i=e.text;$("#share-coment").remove(),window.loader.loadHTML("templates/templates.templates.html","body",function(e){var t=parseTemplate(document.getElementById("template-share-comment").innerHTML,{uri:o,text:i});$.magnificPopup.open({items:{src:$(t)},type:"inline",closeOnBgClick:!0})})},openComments:function(r,a,s,l){var c=this;if(1==c.commentsConfigurated)return AddUp.openComments(),void(l&&l());c.instantianteBarbeiro().then(function(){""==s&&(s="dummy-author");var e={authorId:s,title:r};document.querySelector("*[data-reactroot]")&&c.unmountComments();var t=AdamastorProxy.getInstance();t.isLoggedIn()&&(e={userId:t.getSessionProfile().sub,userName:t.getSessionProfile().name,authorId:s,isCommenter:0<=t.getSessionProfile().tags.indexOf("commenter"),title:r});var n=AddUp.getCommentGroup("post",a,e);function o(e){n.userLoggedIn(e.sessionProfile.sub,e.sessionProfile.name,0<=e.sessionProfile.tags.indexOf("commenter"))}function i(){n.userLoggedOut()}n.registerLogInRequestListener(showLogin),n.registerShareCommentRequestListener(c.shareCommentsPopUp.bind()),document.addEventListener("obsLogin",o),document.addEventListener("obsLogout",i),obsEventListener("obsBeforeNavigate",function(){document.removeEventListener("obsLogin",o),document.removeEventListener("obsLogout",i)}),AddUp.openComments=n.openPanel,AddUp.closeComments=n.closePanel,AddUp.openComments(),c.commentsConfigurated=!0,$("body").on("click",".share-comment",function(e){e.preventDefault(),window.open(e.currentTarget.href,"Partilhar comentario","width=500,height=500"),$.magnificPopup.close()}),l&&l()})},instantianteBarbeiro:function(){var t=this;if(t.assetsLoaded=!1,!document.querySelector("#commentsContainer")){var e=document.createElement("div");e.id="commentsContainer",document.body.appendChild(e)}return $.Deferred(function(e){0==t.assetsLoaded?t.fetchAssets().then(function(){e.resolve()}):e.resolve()})},unmountComments:function(){if(this.commentsConfigurated=!1,"post"==contextualData.type)for(var e=document.querySelectorAll("*[data-reactroot]"),t=0;t!=e.length;t++)AddUp.unmount(e[t].parentElement,"post",contextualData.id)},fetchAssets:function(){var t=this,n={library:window.location.origin+"/wp-content/themes/observador-child/assets/vendor/barbeiro/frontend/library.js?ver="+contextualData.assetsVersion,barbeiro:window.location.origin+"/wp-content/themes/observador-child/assets/vendor/barbeiro/frontend/app.js?ver="+contextualData.assetsVersion,css:window.location.origin+"/wp-content/themes/observador-child/assets/vendor/barbeiro/frontend/app.css?ver="+contextualData.assetsVersion,config:window.location.origin+"/wp-content/themes/observador-child/assets/vendor/barbeiro/frontend/config.js?ver="+contextualData.assetsVersion};return $.Deferred(function(e){$("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet",href:n.css}),$.getScript(n.config,function(){$.getScript(n.library,function(){$.getScript(n.barbeiro,function(){t.assetsLoaded=!0,e.resolve()})})})}).promise()},init:function(){var e=this;window.CommentsManager={openComments:e.openComments.bind(e),instantianteBarbeiro:e.instantianteBarbeiro.bind(e)},document.addEventListener("obsBeforeNavigate",function(){e.unmountComments()})}};obsEventListener("obsLoad",function(){e.init()})}(),document.addEventListener("obsLoad",function(){batchComments(),window.location.hash.match("#comments-post-")&&window.CommentsManager.openComments(contextualData.title,contextualData.id,contextualData.post.authorId)}),jQuery(".menu-toggle").on("click",function(e){e.preventDefault(),jQuery("body").toggleClass("menu-opened"),Array.prototype.slice.call(document.querySelectorAll("#menu .resrc-megamenu:not(src)")).forEach(function(e){e.getAttribute("src")||imageproxy.run(e)}),660<=window.innerWidth&&jQuery("body").hasClass("menu-opened")&&getSectionsPosts()}),jQuery(".menu-toggle").keydown(function(e){27==e.keyCode&&jQuery("body").removeClass("menu-opened")}),jQuery(".obs_drop_group").keydown(function(e){27==e.keyCode&&jQuery("li").removeClass("obs_drop_open")}),jQuery("#tinkerbell").keydown(function(e){27==e.keyCode&&jQuery("li").removeClass("obs_drop_open")}),$(".search a.obs_drop_trigger").click(function(){var e=$(this).parent();setTimeout(function(){e.hasClass("obs_drop_open")&&e.find('input[type="search"]').focus()},20)}),jQuery("#menu ul.primary .secondary-toggler").on("click",function(e){toggleSecondaryNav(e,this,!1)}),jQuery("#menu ul.primary .secondary-toggler, #menu ul.primary > li > a").on("mouseover",function(e){660<=window.innerWidth&&toggleSecondaryNav(e,this,!0)}),window.obs=window.obs||{},obs.main_header_is_collapsed=!1,obs.main_header_is_collapsed_always=!1,obs.main_header_is_transparent=!1,obs.main_header_was_transparent=!1,obs.piano_header_visible=!1,obs.checkMainHeaderLayout=function(){var e=jQuery(window).scrollTop();e<=130&&obs.piano_header_visible?(jQuery("#piano-header").hide(),obs.piano_header_visible=!1):130<e&&!obs.piano_header_visible&&(jQuery("#piano-header").show(),obs.piano_header_visible=!0),(130<e||obs.main_header_is_collapsed_always)&&!obs.main_header_is_collapsed?(obs.main_header_is_collapsed=!0,jQuery("body").addClass("main-header-collapsed")):!obs.main_header_is_collapsed_always&&e<=130&&obs.main_header_is_collapsed&&(obs.main_header_is_collapsed=!1,jQuery("body").removeClass("main-header-collapsed")),130<e&&obs.main_header_is_transparent?(obs.main_header_is_transparent=!1,obs.main_header_was_transparent=!0,jQuery("body").removeClass("main-header-transparent")):!obs.main_header_is_transparent&&obs.main_header_was_transparent&&e<=130&&(obs.main_header_is_transparent=!0,jQuery("body").addClass("main-header-transparent"))},jQuery(window).scroll(obs.checkMainHeaderLayout),document.addEventListener("obsLoad",function(){$body=jQuery("body"),obs.main_header_is_collapsed_always=$body.hasClass("main-header-collapsed-always"),obs.main_header_is_collapsed=obs.main_header_is_collapsed_always||$body.hasClass("main-header-collapsed"),obs.main_header_is_transparent=$body.hasClass("main-header-transparent"),obs.main_header_was_transparent=obs.main_header_is_transparent,obs.checkMainHeaderLayout()}),function(){var i=window.location.protocol+"//"+window.location.host+"/wp-content/themes/observador-child/assets/build/html/",r={},e={loadHTML:function(e,t,n){if(null==$&&($=jQuery),r.hasOwnProperty(e))n(r[e]);else{var o=new XMLHttpRequest;o.open("GET",i+e+"?ver"+contextualData.assetsVersion),o.onload=function(){$(t).append(o.responseText),r[e]=o.responseText,n(o.responseText)},o.send()}}};window.loader=e}(),obsEventListener("obsLoad",function(){navigator.canShare&&($(".share_native").show(),$(".share_whatsapp").hide()),$(".share_native").on("click",try_native_share)});var elem=document.createElement("script");elem.src="https://quantcast.mgr.consensu.org/v13/cmp.js",elem.async=!0,elem.type="text/javascript";var scpt=document.getElementsByTagName("script")[0];function BatchCommentsLinks(){"use strict";var l=[],c={},r='<span class="global-spinner"><span class="spinner"></span></span><a class="comment-small-icon clickable" data-ga-pageview="true" data-ga-event="true" data-ga-category="comments" data-ga-action="click" data-ga-label="comment_small_icon"><svg class="obs-icon obs-icon-comments"><use xlink:href="#obs-icon-comments"></use></svg>{{count}}</a>';this.add=function(n){function e(){if(s.isLoggedIn()){var e=s.getSessionProfile();a.initialProps.userId=e.sub,a.initialProps.userName=e.name,a.initialProps.isCommenter=0<=e.tags.indexOf("commenter")}l.push(a);var t=o.data("id");c[t]={link:o.data("link"),dom:n}}var o=$(n),t=o.closest(o.closest(".news-item")),i=o.closest(o.closest(".recirculation"));if((0===t.length||0<i.length)&&0===o.children().length){var r=o.data("authorid"),a={contentType:"post",objectId:o.data("id").toString(),initialProps:{authorId:r,title:o.data("title"),dontPreFetch:!0}},s=AdamastorProxy.getInstance();s.isReady()?e():obsEventListener("obsUserStateChange",e)}},this.createReact=function(){AddUp.getCommentGroups(l).forEach(function(e){var t=e.objectId,n=c[t];n&&(e.createCommentSmallIcon(n.dom,!0,10,n.link),delete c[t])})},this.create=function(){var e=l.map(function(e){return{id:e.objectId}}).reduce(function(e,t,n){return e+(0==n?"":"&")+"id="+t.id},"https://barbeiro.observador.pt/comments/count?content_type=post&");$.getJSON(e,function(e){for(var t in e){var n=e[t].object_id,o=0==e[t].count,i=0;i=null==e?0:e[t].count,Array.prototype.slice.call($("span.comments[data-id='"+n+"']").not('article .comments, [data-commentsloaded="true"]')).forEach(function(e){10<i&&($(e).addClass("clickable").toggleClass("no-comments",o).html(r.replace("{{count}}",0<i?i:"+")).attr("data-commentsloaded","true"),$(e).children("a").attr("href",$(e).data("link")+"#comments-post-"+$(e).data("id"))),$(e).attr("data-commentsloaded","true")})}},function(){})}}scpt.parentNode.insertBefore(elem,scpt),function(){function e(o){var e,i="string"==typeof o.data;if((e=i?-1!=o.data.indexOf("__cmpCall")?JSON.parse(o.data):{}:o.data).__cmpCall){var r=e.__cmpCall;window.__cmp(r.command,r.parameter,function(e,t){var n={__cmpReturn:{returnValue:e,success:t,callId:r.callId}};o.source.postMessage(i?JSON.stringify(n):n,"*")})}}!function e(){if(!window.frames.__cmpLocator)if(document.body){var t=document.body,n=document.createElement("iframe");n.style="display:none",n.name="__cmpLocator",t.appendChild(n)}else setTimeout(e,5)}(),window.__cmp=function(e){var t=arguments;if(!t.length)return __cmp.a;if("ping"===t[0])t[2]({gdprAppliesGlobally:!0,cmpLoaded:!1},!0);else{if("__cmp"==e)return!1;void 0===__cmp.a&&(__cmp.a=[]),__cmp.a.push([].slice.apply(t))}},window.__cmp.gdprAppliesGlobally=!0,window.__cmp.msgHandler=e,window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e)}(),window.__cmp("init",{Language:"pt","Initial Screen Title Text":"Este site utiliza cookies","Initial Screen Reject Button Text":"Não aceito","Initial Screen Accept Button Text":"Aceito","Initial Screen Purpose Link Text":"Consultar detalhes","Purpose Screen Title Text":"Damos valor à sua privacidade","Purpose Screen Body Text":"Pode definir as preferências do consentimento e determinar de que forma pretende que os seus dados sejam utilizados com base nos objetivos indicados em baixo. Pode definir as suas preferências independentemente das preferências de parceiros terceiros. Cada objetivo tem uma descrição para que fique a saber de que forma nós e os nossos parceiros utilizamos os seus dados.","Purpose Screen Enable All Button Text":"Ativar todos","Purpose Screen Vendor Link Text":"Ver lista completa de vendedores","Purpose Screen Cancel Button Text":"Cancelar","Purpose Screen Save and Exit Button Text":"Guardar e sair","Vendor Screen Title Text":"Damos valor à sua privacidade","Vendor Screen Body Text":"Em baixo, pode definir as preferências de consentimento individualmente para cada companhia. Expanda os itens da lista de cada companhia para ver qual a finalidade de utilização dos seus dados. Isto poderá ajudá-lo a escolher os objetivos. Nalguns casos, as companhias podem divulgar que utilizam os dados dos utilizadores sem pedirem os respetivos consentimentos, com base nos seus interesses legítimos. Pode clicar nas suas políticas de privacidade para obter mais informações e para optar ativamente por não participar.","Vendor Screen Accept All Button Text":"Aceitar tudo","Vendor Screen Reject All Button Text":"Rejeitar tudo","Vendor Screen Purposes Link Text":"Voltar","Vendor Screen Cancel Button Text":"Cancelar","Vendor Screen Save and Exit Button Text":"Guardar e sair","Initial Screen Body Text":'Utilizamos cookies para melhorar a experiência do utilizador, personalizar conteúdo e anúncios, fornecer funcionalidades de redes sociais e analisar o tráfego nos websites. Partilhamos informações com os nossos parceiros de redes sociais, de publicidade e de análise, que as podem combinar com outras informações que lhes forneceu ou recolhidas por estes a partir da utilização daqueles serviços. Consente? Para mais informações sobre cookies e o processamento dos seus dados pessoais, consulte a nossa <a target="_blank" style="text-decoration: underline;" href="https://observador.pt/politica-de-privacidade/">Política de Privacidade</a>.',"Publisher Name":"Observador On Time S.A","Publisher Logo":"https://observador.pt/wp-content/themes/observador-child/assets/build/img/quantcast/logo_embed_big.png","Display UI":"always","Publisher Purpose IDs":[1,2,3,4,5],"Publisher Purpose Legitimate Interest IDs":[1,2,3,4,5],"Post Consent Page":"https://observador.pt/termos-e-condicoes/","UI Layout":"banner","Default Value for Toggles":"on"}),function(){var i={};this.parseTemplate=function e(t,n){var o=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[t]=i[t]||e(document.getElementById(t).innerHTML);return n?o(n):o}}(),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports=t():e.Paho=t()}(this,function(){return function(a){var n,f=a.localStorage||(n={},{setItem:function(e,t){n[e]=t},getItem:function(e){return n[e]},removeItem:function(e){delete n[e]}}),g={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},u=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var o="Unknown property, "+n+". Valid properties are:";for(var i in t)t.hasOwnProperty(i)&&(o=o+" "+i);throw new Error(o)}if(typeof e[n]!==t[n])throw new Error(v(m.INVALID_TYPE,[typeof e[n],n]))}},o=function(e,t){return function(){return e.apply(t,arguments)}},m={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},h={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},v=function(e,t){var n=e.text;if(t)for(var o,i,r=0;r<t.length;r++)if(o="{"+r+"}",0<(i=n.indexOf(o))){var a=n.substring(0,i),s=n.substring(i+o.length);n=a+t[r]+s}return n},p=[0,6,77,81,73,115,100,112,3],y=[0,4,77,81,84,84,4],b=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function l(e,t){var n,o=t,i=e[t],r=i>>4,a=i&=15;t+=1;var s=0,l=1;do{if(t==e.length)return[null,o];s+=(127&(n=e[t++]))*l,l*=128}while(0!=(128&n));var c=t+s;if(c>e.length)return[null,o];var d=new b(r);switch(r){case g.CONNACK:1&e[t++]&&(d.sessionPresent=!0),d.returnCode=e[t++];break;case g.PUBLISH:var u=a>>1&3,p=S(e,t),f=C(e,t+=2,p);t+=p,0<u&&(d.messageIdentifier=S(e,t),t+=2);var m=new x(e.subarray(t,c));1==(1&a)&&(m.retained=!0),8==(8&a)&&(m.duplicate=!0),m.qos=u,m.destinationName=f,d.payloadMessage=m;break;case g.PUBACK:case g.PUBREC:case g.PUBREL:case g.PUBCOMP:case g.UNSUBACK:d.messageIdentifier=S(e,t);break;case g.SUBACK:d.messageIdentifier=S(e,t),t+=2,d.returnCode=e.subarray(t,c)}return[d,c]}function E(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function w(e,t,n,o){return s(e,n,o=E(t,n,o)),o+t}function S(e,t){return 256*e[t]+e[t+1]}function _(e){for(var t=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);2047<o?(55296<=o&&o<=56319&&(n++,t++),t+=3):127<o?t+=2:t++}return t}function s(e,t,n){for(var o=n,i=0;i<e.length;i++){var r=e.charCodeAt(i);if(55296<=r&&r<=56319){var a=e.charCodeAt(++i);if(isNaN(a))throw new Error(v(m.MALFORMED_UNICODE,[r,a]));r=a-56320+(r-55296<<10)+65536}t[o++]=r<=127?r:(t[o++]=r<=2047?r>>6&31|192:(t[o++]=r<=65535?r>>12&15|224:(t[o++]=r>>18&7|240,r>>12&63|128),r>>6&63|128),63&r|128)}return t}function C(e,t,n){for(var o,i="",r=t;r<t+n;){var a=e[r++];if(a<128)o=a;else{var s=e[r++]-128;if(s<0)throw new Error(v(m.MALFORMED_UTF,[a.toString(16),s.toString(16),""]));if(a<224)o=64*(a-192)+s;else{var l=e[r++]-128;if(l<0)throw new Error(v(m.MALFORMED_UTF,[a.toString(16),s.toString(16),l.toString(16)]));if(a<240)o=4096*(a-224)+64*s+l;else{var c=e[r++]-128;if(c<0)throw new Error(v(m.MALFORMED_UTF,[a.toString(16),s.toString(16),l.toString(16),c.toString(16)]));if(!(a<248))throw new Error(v(m.MALFORMED_UTF,[a.toString(16),s.toString(16),l.toString(16),c.toString(16)]));o=262144*(a-240)+4096*s+64*l+c}}}65535<o&&(o-=65536,i+=String.fromCharCode(55296+(o>>10)),o=56320+(1023&o)),i+=String.fromCharCode(o)}return i}b.prototype.encode=function(){var e,t=(15&this.type)<<4,n=0,o=[],i=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case g.CONNECT:switch(this.mqttVersion){case 3:n+=p.length+3;break;case 4:n+=y.length+3}n+=_(this.clientId)+2,void 0!==this.willMessage&&(n+=_(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(a)),n+=e.byteLength+2),void 0!==this.userName&&(n+=_(this.userName)+2),void 0!==this.password&&(n+=_(this.password)+2);break;case g.SUBSCRIBE:t|=2;for(var r=0;r<this.topics.length;r++)o[r]=_(this.topics[r]),n+=o[r]+2;n+=this.requestedQos.length;break;case g.UNSUBSCRIBE:t|=2;for(r=0;r<this.topics.length;r++)o[r]=_(this.topics[r]),n+=o[r]+2;break;case g.PUBREL:t|=2;break;case g.PUBLISH:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),n+=(i=_(this.payloadMessage.destinationName))+2;var a=this.payloadMessage.payloadBytes;n+=a.byteLength,a instanceof ArrayBuffer?a=new Uint8Array(a):a instanceof Uint8Array||(a=new Uint8Array(a.buffer));break;case g.DISCONNECT:}var s=function(e){var t=new Array(1),n=0;do{var o=e%128;0<(e>>=7)&&(o|=128),t[n++]=o}while(0<e&&n<4);return t}(n),l=s.length+1,c=new ArrayBuffer(n+l),d=new Uint8Array(c);if(d[0]=t,d.set(s,1),this.type==g.PUBLISH)l=w(this.payloadMessage.destinationName,i,d,l);else if(this.type==g.CONNECT){switch(this.mqttVersion){case 3:d.set(p,l),l+=p.length;break;case 4:d.set(y,l),l+=y.length}var u=0;this.cleanSession&&(u=2),void 0!==this.willMessage&&(u|=4,u|=this.willMessage.qos<<3,this.willMessage.retained&&(u|=32)),void 0!==this.userName&&(u|=128),void 0!==this.password&&(u|=64),d[l++]=u,l=E(this.keepAliveInterval,d,l)}switch(void 0!==this.messageIdentifier&&(l=E(this.messageIdentifier,d,l)),this.type){case g.CONNECT:l=w(this.clientId,_(this.clientId),d,l),void 0!==this.willMessage&&(l=w(this.willMessage.destinationName,_(this.willMessage.destinationName),d,l),l=E(e.byteLength,d,l),d.set(e,l),l+=e.byteLength),void 0!==this.userName&&(l=w(this.userName,_(this.userName),d,l)),void 0!==this.password&&(l=w(this.password,_(this.password),d,l));break;case g.PUBLISH:d.set(a,l);break;case g.SUBSCRIBE:for(r=0;r<this.topics.length;r++)l=w(this.topics[r],o[r],d,l),d[l++]=this.requestedQos[r];break;case g.UNSUBSCRIBE:for(r=0;r<this.topics.length;r++)l=w(this.topics[r],o[r],d,l)}return c};var i=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new b(g.PINGREQ).encode(),o=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(o(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(m.PING_TIMEOUT.code,v(m.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),0<this._keepAliveInterval&&(this.timeout=setTimeout(o(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},r=function(e,t,n,o){t||(t=30);var i,r,a;this.timeout=setTimeout((i=n,r=e,a=o,function(){return i.apply(r,a)}),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},k=function(e,t,n,o,i){if(!("WebSocket"in a&&null!==a.WebSocket))throw new Error(v(m.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in a&&null!==a.ArrayBuffer))throw new Error(v(m.UNSUPPORTED,["ArrayBuffer"]));for(var r in this._trace("Paho.Client",e,t,n,o,i),this.host=t,this.port=n,this.path=o,this.uri=e,this.clientId=i,this._wsuri=null,this._localKey=t+":"+n+("/mqtt"!=o?":"+o:"")+":"+i+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,f)0!==r.indexOf("Sent:"+this._localKey)&&0!==r.indexOf("Received:"+this._localKey)||this.restore(r)};k.prototype.host=null,k.prototype.port=null,k.prototype.path=null,k.prototype.uri=null,k.prototype.clientId=null,k.prototype.socket=null,k.prototype.connected=!1,k.prototype.maxMessageIdentifier=65536,k.prototype.connectOptions=null,k.prototype.hostIndex=null,k.prototype.onConnected=null,k.prototype.onConnectionLost=null,k.prototype.onMessageDelivered=null,k.prototype.onMessageArrived=null,k.prototype.traceFunction=null,k.prototype._msg_queue=null,k.prototype._buffered_msg_queue=null,k.prototype._connectTimeout=null,k.prototype.sendPinger=null,k.prototype.receivePinger=null,k.prototype._reconnectInterval=1,k.prototype._reconnecting=!1,k.prototype._reconnectTimeout=null,k.prototype.disconnectedPublishing=!1,k.prototype.disconnectedBufferSize=5e3,k.prototype.receiveBuffer=null,k.prototype._traceBuffer=null,k.prototype._MAX_TRACE_ENTRIES=100,k.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(v(m.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(v(m.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},k.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(v(m.INVALID_STATE,["not connected"]));var n=new b(g.SUBSCRIBE);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var o=0;o<n.topics.length;o++)n.requestedQos[o]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:v(e)})}),t.timeout&&(n.timeOut=new r(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:m.SUBSCRIBE_TIMEOUT.code,errorMessage:v(m.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},k.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(v(m.INVALID_STATE,["not connected"]));var n=new b(g.UNSUBSCRIBE);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new r(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:m.UNSUBSCRIBE_TIMEOUT.code,errorMessage:v(m.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},k.prototype.send=function(e){this._trace("Client.send",e);var t=new b(g.PUBLISH);if(t.payloadMessage=e,this.connected)0<e.qos?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(v(m.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(v(m.BUFFER_FULL,[this.disconnectedBufferSize]));0<e.qos?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},k.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(v(m.INVALID_STATE,["not connecting or connected"]));var e=new b(g.DISCONNECT);this._notify_msg_sent[e]=o(this._disconnected,this),this._schedule_message(e)},k.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},k.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},k.prototype.stopTrace=function(){delete this._traceBuffer},k.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=o(this._on_socket_open,this),this.socket.onmessage=o(this._on_socket_message,this),this.socket.onerror=o(this._on_socket_error,this),this.socket.onclose=o(this._on_socket_close,this),this.sendPinger=new i(this,this.connectOptions.keepAliveInterval),this.receivePinger=new i(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new r(this,this.connectOptions.timeout,this._disconnected,[m.CONNECT_TIMEOUT.code,v(m.CONNECT_TIMEOUT)])},k.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},k.prototype.store=function(e,t){var n={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case g.PUBLISH:t.pubRecReceived&&(n.pubRecReceived=!0),n.payloadMessage={};for(var o="",i=t.payloadMessage.payloadBytes,r=0;r<i.length;r++)i[r]<=15?o=o+"0"+i[r].toString(16):o+=i[r].toString(16);n.payloadMessage.payloadHex=o,n.payloadMessage.qos=t.payloadMessage.qos,n.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(n.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(n.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),n.sequence=t.sequence);break;default:throw Error(v(m.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,n]))}f.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(n))},k.prototype.restore=function(e){var t=f.getItem(e),n=JSON.parse(t),o=new b(n.type,n);switch(n.type){case g.PUBLISH:for(var i=n.payloadMessage.payloadHex,r=new ArrayBuffer(i.length/2),a=new Uint8Array(r),s=0;2<=i.length;){var l=parseInt(i.substring(0,2),16);i=i.substring(2,i.length),a[s++]=l}var c=new x(a);c.qos=n.payloadMessage.qos,c.destinationName=n.payloadMessage.destinationName,n.payloadMessage.duplicate&&(c.duplicate=!0),n.payloadMessage.retained&&(c.retained=!0),o.payloadMessage=c;break;default:throw Error(v(m.INVALID_STORED_DATA,[e,t]))}0===e.indexOf("Sent:"+this._localKey)?(o.payloadMessage.duplicate=!0,this._sentMessages[o.messageIdentifier]=o):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[o.messageIdentifier]=o)},k.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},k.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,(this._sentMessages[e.messageIdentifier]=e).type===g.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},k.prototype._on_socket_open=function(){var e=new b(g.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},k.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},k.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var o=new Uint8Array(this.receiveBuffer.length+t.length);o.set(this.receiveBuffer),o.set(t,this.receiveBuffer.length),t=o,delete this.receiveBuffer}try{for(var i=0;i<t.length;){var r=l(t,i),a=r[0];if(i=r[1],null===a)break;n.push(a)}i<t.length&&(this.receiveBuffer=t.subarray(i))}catch(e){var s="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(m.INTERNAL_ERROR.code,v(m.INTERNAL_ERROR,[e.message,s]))}return n},k.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case g.CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var n=this._sentMessages[t];f.removeItem("Sent:"+this._localKey+n.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var o=this._receivedMessages[t];f.removeItem("Received:"+this._localKey+o.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(m.CONNACK_RETURNCODE.code,v(m.CONNACK_RETURNCODE,[e.returnCode,h[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var i=[];for(var r in this._sentMessages)this._sentMessages.hasOwnProperty(r)&&i.push(this._sentMessages[r]);if(0<this._buffered_msg_queue.length)for(var a=null;a=this._buffered_msg_queue.pop();)i.push(a),this.onMessageDelivered&&(this._notify_msg_sent[a]=this.onMessageDelivered(a.payloadMessage));i=i.sort(function(e,t){return e.sequence-t.sequence});for(var s=0,l=i.length;s<l;s++){if((n=i[s]).type==g.PUBLISH&&n.pubRecReceived){var c=new b(g.PUBREL,{messageIdentifier:n.messageIdentifier});this._schedule_message(c)}else this._schedule_message(n)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var d=!1;this._reconnecting&&(d=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(d,this._wsuri),this._process_queue();break;case g.PUBLISH:this._receivePublish(e);break;case g.PUBACK:(n=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],f.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage));break;case g.PUBREC:if(n=this._sentMessages[e.messageIdentifier]){n.pubRecReceived=!0;c=new b(g.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",n),this._schedule_message(c)}break;case g.PUBREL:o=this._receivedMessages[e.messageIdentifier];f.removeItem("Received:"+this._localKey+e.messageIdentifier),o&&(this._receiveMessage(o),delete this._receivedMessages[e.messageIdentifier]);var u=new b(g.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(u);break;case g.PUBCOMP:n=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],f.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage);break;case g.SUBACK:(n=this._sentMessages[e.messageIdentifier])&&(n.timeOut&&n.timeOut.cancel(),128===e.returnCode[0]?n.onFailure&&n.onFailure(e.returnCode):n.onSuccess&&n.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case g.UNSUBACK:(n=this._sentMessages[e.messageIdentifier])&&(n.timeOut&&n.timeOut.cancel(),n.callback&&n.callback(),delete this._sentMessages[e.messageIdentifier]);break;case g.PINGRESP:this.sendPinger.reset();break;case g.DISCONNECT:this._disconnected(m.INVALID_MQTT_MESSAGE_TYPE.code,v(m.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(m.INVALID_MQTT_MESSAGE_TYPE.code,v(m.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){var p="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(m.INTERNAL_ERROR.code,v(m.INTERNAL_ERROR,[e.message,p]))}},k.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(m.SOCKET_ERROR.code,v(m.SOCKET_ERROR,[e.data]))},k.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(m.SOCKET_CLOSE.code,v(m.SOCKET_CLOSE))},k.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},k.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new b(g.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new b(g.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},k.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},k.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},k.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},k.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new r(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=m.OK.code,t=v(m.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==m.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},k.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)void 0!==e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){t=0;for(var o=arguments.length;t<o;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t?this._traceBuffer.push(arguments[t]):void 0===arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))}},k.prototype._traceMask=function(e,t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=o==t?"******":e[o]);return n};var x=function(e){var n,t;if(!("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw v(m.INVALID_ARGUMENT,[e,"newPayload"]);n=e;var o=0,i=!1,r=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof n?n:C(n,0,n.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"!=typeof n)return n;var e=new ArrayBuffer(_(n)),t=new Uint8Array(e);return s(n,t,0),t}},destinationName:{enumerable:!0,get:function(){return t},set:function(e){if("string"!=typeof e)throw new Error(v(m.INVALID_ARGUMENT,[e,"newDestinationName"]));t=e}},qos:{enumerable:!0,get:function(){return o},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);o=e}},retained:{enumerable:!0,get:function(){return i},set:function(e){if("boolean"!=typeof e)throw new Error(v(m.INVALID_ARGUMENT,[e,"newRetained"]));i=e}},topic:{enumerable:!0,get:function(){return t},set:function(e){t=e}},duplicate:{enumerable:!0,get:function(){return r},set:function(e){r=e}}})};return{Client:function(e,t,a,n){var s;if("string"!=typeof e)throw new Error(v(m.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){n=t;var o=(s=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!o)throw new Error(v(m.INVALID_ARGUMENT,[e,"host"]));e=o[4]||o[2],t=parseInt(o[7]),a=o[8]}else{if(3==arguments.length&&(n=a,a="/mqtt"),"number"!=typeof t||t<0)throw new Error(v(m.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof a)throw new Error(v(m.INVALID_TYPE,[typeof a,"path"]));var i=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);s="ws://"+(i?"["+e+"]":e)+":"+t+a}for(var r=0,l=0;l<n.length;l++){var c=n.charCodeAt(l);55296<=c&&c<=56319&&l++,r++}if("string"!=typeof n||65535<r)throw new Error(v(m.INVALID_ARGUMENT,[n,"clientId"]));var d=new k(s,e,t,a,n);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(v(m.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(v(m.UNSUPPORTED_OPERATION))}},path:{get:function(){return a},set:function(){throw new Error(v(m.UNSUPPORTED_OPERATION))}},uri:{get:function(){return s},set:function(){throw new Error(v(m.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return d.clientId},set:function(){throw new Error(v(m.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return d.onConnected},set:function(e){if("function"!=typeof e)throw new Error(v(m.INVALID_TYPE,[typeof e,"onConnected"]));d.onConnected=e}},disconnectedPublishing:{get:function(){return d.disconnectedPublishing},set:function(e){d.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return d.disconnectedBufferSize},set:function(e){d.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return d.onConnectionLost},set:function(e){if("function"!=typeof e)throw new Error(v(m.INVALID_TYPE,[typeof e,"onConnectionLost"]));d.onConnectionLost=e}},onMessageDelivered:{get:function(){return d.onMessageDelivered},set:function(e){if("function"!=typeof e)throw new Error(v(m.INVALID_TYPE,[typeof e,"onMessageDelivered"]));d.onMessageDelivered=e}},onMessageArrived:{get:function(){return d.onMessageArrived},set:function(e){if("function"!=typeof e)throw new Error(v(m.INVALID_TYPE,[typeof e,"onMessageArrived"]));d.onMessageArrived=e}},trace:{get:function(){return d.traceFunction},set:function(e){if("function"!=typeof e)throw new Error(v(m.INVALID_TYPE,[typeof e,"onTrace"]));d.traceFunction=e}}}),this.connect=function(e){if(u(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),4<e.mqttVersion||e.mqttVersion<3)throw new Error(v(m.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(v(m.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof x))throw new Error(v(m.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(v(m.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(v(m.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(v(m.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,n=0;n<e.hosts.length;n++){if("string"!=typeof e.hosts[n])throw new Error(v(m.INVALID_TYPE,[typeof e.hosts[n],"connectOptions.hosts["+n+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[n])){if(0===n)t=!0;else if(!t)throw new Error(v(m.INVALID_ARGUMENT,[e.hosts[n],"connectOptions.hosts["+n+"]"]))}else if(t)throw new Error(v(m.INVALID_ARGUMENT,[e.hosts[n],"connectOptions.hosts["+n+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(v(m.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(v(m.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(v(m.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],n=0;n<e.hosts.length;n++){if("number"!=typeof e.ports[n]||e.ports[n]<0)throw new Error(v(m.INVALID_TYPE,[typeof e.ports[n],"connectOptions.ports["+n+"]"]));var o=e.hosts[n],i=e.ports[n],r=-1!==o.indexOf(":");s="ws://"+(r?"["+o+"]":o)+":"+i+a,e.uris.push(s)}}}d.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(u(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(v(m.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));d.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(u(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");d.unsubscribe(e,t)},this.send=function(e,t,n,o){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof x)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(v(m.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));d.send(i)}else(i=new x(t)).destinationName=e,3<=arguments.length&&(i.qos=n),4<=arguments.length&&(i.retained=o),d.send(i)},this.publish=function(e,t,n,o){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof x)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(v(m.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));d.send(i)}else(i=new x(t)).destinationName=e,3<=arguments.length&&(i.qos=n),4<=arguments.length&&(i.retained=o),d.send(i)},this.disconnect=function(){d.disconnect()},this.getTraceLog=function(){return d.getTraceLog()},this.startTrace=function(){d.startTrace()},this.stopTrace=function(){d.stopTrace()},this.isConnected=function(){return d.connected}},Message:x}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}),function i(r,a,s){function l(n,e){if(!a[n]){if(!r[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);throw new Error("Cannot find module '"+n+"'")}var o=a[n]={exports:{}};r[n][0].call(o.exports,function(e){var t=r[n][1][e];return l(t||e)},o,o.exports,i,r,a,s)}return a[n].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,t,n){function s(e){this.message=e}(s.prototype=new Error).name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new s("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,i=0,r=0,a="";o=t.charAt(r++);~o&&(n=i%4?64*n+o:o,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return a}},{}],2:[function(e,t,n){var o=e("./atob");t.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(o(t).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(e){return o(t)}}},{"./atob":1}],3:[function(e,t,n){"use strict";var o=e("./base64_url_decode");t.exports=function(e){if(!e)throw new Error("Invalid token specified");return JSON.parse(o(e.split(".")[1]))}},{"./base64_url_decode":2}],4:[function(e,t,n){var o="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},i=e("./lib/index");"function"==typeof o.window.define&&o.window.define.amd?o.window.define("jwt_decode",function(){return i}):o.window&&(o.window.jwt_decode=i)},{"./lib/index":3}]},{},[4]);var onlyCode=!1,AdamastorProxy=function(){var e;function t(){var e="3d0abce8-481e-11e5-be5d-2cf0ee2d8267",t="openid profile email read write",n="https://auth.observador.pt",u="OBS-ADAMASTOR",p="https://users.observador.pt/api",o="true"==localStorage.getItem("debug-adamastor"),i=.8,r=window.performance.now()+1e3*Math.random(),d={tokenExchange:n+"/login/tokenexchange",callBackBarqueiro:n+"/login/barqueiro/callback?token={{token}}",callBackGoogle:n+"/login/google/callback?{{tokentype}}={{token}}",callbackFacebook:n+"/login/facebook/callback?token={{token}}",authorization:n+"/oauth2/authorize?code={{code}}&client_id={{client_id}}&grant_type=authorization_code&scope="+t,refreshToken:n+"/oauth2/token?grant_type=refresh_token&refresh_token={{refresh_token}}&scope="+t+"&user_id={{userId}}&tabId="+r};window.refreshIntervalTimer=null;var a=!1,s=!1,l=function(e){o&&console.log("[ADAMASTOR]",e)},f=function(e){return l("Error: "+e),{error:e}},c=function(e){"object"==typeof e&&(e=JSON.stringify(e)),localStorage.setItem(u,e),v(g()),s=!0,localStorage.setItem("adamastorLoggedIn",!0),E("obsUserStateChange")},m=function(){s=!(a=!1),E("obsUserStateChange"),window.clearInterval(window.refreshIntervalTimer),window.refreshIntervalTimer=null;var e=g();localStorage.removeItem(u),localStorage.removeItem("refreshing"),localStorage.removeItem("PREMIUM_USER"),localStorage.removeItem("token_expire_date"),localStorage.removeItem("adamastorLoggedIn"),l("Interval Cleared"),E("obsLogout");try{if("google"==e.login_provider)isGoogleSigningIn=!1,gapi.auth2.getAuthInstance().signOut().then(function(){l("User signed out from Google.")})}catch(e){console.log(e)}},g=function(){if(session=localStorage.getItem(u),session){var e=!1;try{e=jwt_decode(localStorage.getItem(u))}catch(e){console.log("error decoding jwt",e)}return e}},h=function(e,t,n,o,i,r,a){i=i||function(e,t,n){console.log(t)},r||(r=!1);var s="";"GET"!=e&&(s=JSON.stringify(n));var l={};if(localStorage.getItem(u)){var c=JSON.parse(localStorage.getItem(u));l.Authorization="Bearer "+c.access_token}var d=p+t;r&&(d=t),$.ajax({url:d,data:s,processData:!1,contentType:"application/json",type:e,headers:l,success:o,error:i})},v=function(e){var t=b(e),n=t+1e3*parseInt(JSON.parse(localStorage.getItem(u)).expires_in)*i;localStorage.setItem("token_expire_date",n),l("Set token expiration date to "+new Date(n))},y=function(){return parseInt(localStorage.getItem("token_expire_date"))||0},b=function(e){var t=e.iat;return 1e3*parseInt(t)},E=function(e,t){var n;document.createEvent?(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0):(n=document.createEventObject()).eventType=e,n.sessionProfile=t,n.eventName=e,document.createEvent?document.dispatchEvent(n):document.fireEvent("on"+n.eventType,n)};function w(){if(l("Consider refresh token"),!localStorage.getItem("adamastorLoggedIn"))return l("Another tab has already logged off and deleted the session. Just notify the logout"),void m();if((new Date).getTime()>y()){if(l("Time is bigger than 80%"),window.localStorage.getItem("refreshing")){l("sessao já está marcada");var e=JSON.parse(window.localStorage.getItem("refreshing"));if(e.tabId==r)return k(),void window.localStorage.removeItem("refreshing");if((new Date).getTime()<parseInt(e.lifespan))return void l("Outra tab já marcou o refresh da sessão")}l("Marcar a sessão com a tabId "+r);var t=JSON.stringify({tabId:r,lifespan:(new Date).getTime()+15e3});window.localStorage.setItem("refreshing",t)}}var S=function(e){var t=g();null!=t&&""!=t.sub?(a=!0,l("Set Interval"),(new Date).getTime()>y()?k():(l("Loggin from the session that is on localStorage"),s=!0,l("Loggin from the session that is on localStorage"),E("obsLogin",t),E("obsUserStateChange"),localStorage.setItem("adamastorLoggedIn",!0)),null===window.refreshIntervalTimer&&(window.refreshIntervalTimer=window.setInterval(w,1e4))):(s=!0,e&&e())},_=function(){if(a=!1,!localStorage.getItem("adamastorLoggedIn"))return l("Another tab has already logged off and deleted the session. Just notify the logout"),void m();var e=x();g();h("GET",e,{},function(){m()},function(e){e.responseJSON.error.match("invalid_token")&&m(),f("Invalid Session: Logging out")},!0)},C=function(n,t,o){onlyCode?window.postMessage({code:n},window.location.origin):(url=d.authorization.replace("{{code}}",n).replace("{{client_id}}",e),h("GET",url,{},function(e){l("Access was authorized. Session was set to localStorage"),c(e),S(),t&&(isGoogleSigningIn=!1,t(e),l("Google Logged In"))},function(e){var t={responseJSON:{error:"fail_auth_token",message:"Cannot request to "+url}};window.postMessage(t,window.location.origin),g()&&"4"==n[0]&&_(),"5"==n[0]&&_(),o&&o(data)},!0))},k=function(){if(!localStorage.getItem("adamastorLoggedIn"))return l("Another tab has already logged off. Stop refresh token"),void m();l("Refreshing token at "+new Date);var e=JSON.parse(localStorage.getItem(u)),t=d.refreshToken.replace("{{refresh_token}}",e.refresh_token).replace("{{userId}}",e.id);""==e.id||e.id,h("GET",t,{},function(e){c(e)},function(e){if(e&&e.responseJSON)switch(a=!1,m(),e.responseJSON.error){case"limit_exceeded":$.magnificPopup.open({items:{src:$("#obs-adamastor-template-limitExceeded")},type:"inline",closeOnBgClick:!0,closeOnContentClick:!1});break;case"invalid_grant":console.log("refreshtoken failed: invalid_grant")}},!0)},x=function(){var e=n+"/oauth2/logout?refresh_token={{refresh_token}}",t=JSON.parse(localStorage.getItem(u));return e=e.replace("{{refresh_token}}",t.refresh_token)};return{googleLogin:function(e,t,n,o){var i,r,a,s,l,c;r=t,a=n,s=o,c="",c="string"==typeof(i=e)?(l=i,d.callBackGoogle.replace("{{token}}",l).replace("{{tokentype}}","token")):s?(l=s,d.callBackGoogle.replace("{{token}}",l).replace("{{tokentype}}","autotoken")):(l=i.getAuthResponse().id_token,d.callBackGoogle.replace("{{token}}",l).replace("{{tokentype}}","token")),isGoogleSigningIn=!0,h("GET",c,{},function(e){var t=e.code;C(t,r,a)},function(e){if(f(),e.hasOwnProperty("status")){var t={responseJSON:{error:"fail_auth_google_callback",message:"Cannot request to "+c}};window.postMessage(t,window.location.origin)}return!1},!0)},barqueiroLogin:function(e){var t,n;t=e,n=d.callBackBarqueiro.replace("{{token}}",t),h("GET",n,{},function(e){var t=e.code;C(t)},function(){var e={responseJSON:{error:"fail_auth_barqueiro_callback",message:"Cannot request to "+n}};return window.postMessage(e,window.location.origin),!1},!0)},facebookLogin:function(e,t,n){var o,i,r,a,s;i=t,r=n,s="","string"==typeof(o=e)&&(a=o,s=d.callbackFacebook.replace("{{token}}",a)),h("GET",s,{},function(e){var t=e.code;C(t,i,r)},function(e){var t={responseJSON:{error:"fail_auth_facebook_callback",message:"Cannot request to "+s}};return window.postMessage(t,window.location.origin),r&&r(e),!1},!0)},authorizeToken:function(e,t,n){C(e,t,n)},logout:function(){_()},login:function(e){S(e)},loginWithToken:function(e,t,n){loginWithToken(e,t,n)},tokenExchange:function(e,t,n){var o,i;o=t,i=n,url=d.tokenExchange,h("GET",url,{},function(e){if(l("token was exchanged"),o){var t=e.code;o(t)}},function(e){i&&i(data)},!0)},refresh:function(){k()},getSessionProfile:function(){return g()},getProfile:function(e,t){return function(e,t){if(profile=g()){var n="/users/"+profile.sub;h("GET",n,"",e,t)}}(e,t)},updateProfile:function(e,t,n){return o=e,i=t,r=n,a="/users/"+g().sub,void h("PUT",a,o,i,r);var o,i,r,a},deleteAccount:function(e,t,n){return o=e,i=t,r=n,a="/users/"+g().sub,void h("DELETE",a,o,i,r);var o,i,r,a},getToken:function(){return JSON.parse(localStorage.getItem(u)).access_token},isLoggedIn:function(){return a},isReady:function(){return s},niceDate:function(e){return t=new Date(e),n=t.getFullYear(),o=["Jan","Feb","Mar","Abr","Mai","Jun","Jul","Aug","Set","Out","Nov","Dez"][t.getMonth()],t.getDate()+" "+o+" "+n;var t,n,o},getGroup:function(e,t,n){h("GET","/group/"+e,{},t,n)},createGroup:function(e,t){h("POST","/group",{},e,t)},addToGroup:function(e,t,n,o){h("PUT","/group/"+e+"/user/"+t,{},n,o)},removeFromGroup:function(e,t,n,o){h("DELETE","/group/"+e+"/user/"+t,{},n,o)}}}return{getInstance:function(){try{JSON.parse(localStorage.getItem("OBS-ADAMASTOR"))}catch(e){localStorage.removeItem("OBS-ADAMASTOR")}return e||(e=t()).login(),e}}}();!function(h){var v=this;h.adamastorPlugin=function(){var l=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c=".error-text",i=".error-text.general-error",d=!1,a=!1;v.triggerPopups=function(o,i,r,a,s){h.loader.loadHTML("adamastor/adamastor.templates.html","body",function(e){null!=o&&o.preventDefault&&o.preventDefault(),d=i,m();var t=$("#login-popup",document),n=$("#login-local-popup",document);t.removeClass("purchase"),n.removeClass("purchase"),t.removeClass("voucher"),n.removeClass("voucher"),$(".mfp-close",t).show(),$(".mfp-close",n).show(),i&&(s?(t.addClass("voucher"),n.addClass("voucher"),$(".mfp-close",t).hide(),$(".mfp-close",n).hide(),"TMJLDHS7GVTF"==h.termId&&($(".voucher-details h3").text("Donativo"),$(".voucher-details .text").text("Para fazer um donativo com pagamento online, primeiro registe-se ou, caso já tenha uma conta Observador, inicie a sessão."),$(".mfp-close",t).show(),$(".mfp-close",n).show())):a&&[t,n].forEach(function(e){e.addClass("purchase"),e.find(".name").html(a.name),e.find(".duration").html("Duração: "+a.duration),e.find(".price").html("Valor: "+a.price)})),t.length&&$.magnificPopup.open({items:{src:"login"==r?t:n},type:"inline",closeOnBgClick:"login"==r,closeOnContentClick:!1,callbacks:{close:function(){"#login-popup"==h.location.hash&&(h.location.hash="")}}}),p()})},v.showLogin=function(e){$("#login-local-email").val(""),v.triggerPopups(e,!1,"login")},v.showLocalLogin=function(e){v.triggerPopups(e,!1,"registration")},v.showSubscriptionLogin=function(e,t,n){d=!0,v.triggerPopups(!1,!0,"register",{name:e,duration:t,price:n})},v.showSubscriptionViaURLLogin=function(e){d=!0,h.termId=e,v.triggerPopups(!1,!0,"register",!1,!0)};v.localLogin=function(e){v.adamastor.barqueiroLogin(e)},v.onGoogleSignIn=function(e){adamastor.googleLogin(e)},v.onFacebookLogin=function(e){adamastor.facebookLogin(e,void 0,function(e){g(e,$("form"))})};var s=function(){h.loader.loadHTML("adamastor/adamastor.templates.html","body",function(e){$.magnificPopup.close();var t=document.getElementById("content-header-loggedin");if(null!=t){var n=v.adamastor.getSessionProfile(),o=document.getElementById("header-login");o.innerHTML=t.innerHTML.replace(/<%-picture%>/g,n.picture),o.className="logged-in obs_drop_group obs_drop_right",$(".obs_drop_group").obsdrop(),$("#logout-button").click(function(e){v.adamastor.logout()}),$("#header-login .obs_drop_content").on("click",function(e){$(".obs_drop_open").removeClass("obs_drop_open")}),h.obs.router&&h.obs.router.handlers.attachEventsToSelector(document.querySelector("#header-login .obs_drop_content"))}})},u=function(e){null!=e&&null!=e||(e=!1),e||h.loader.loadHTML("adamastor/content-logged-out/content-logged-out.templates.html","body",function(e){var t=document.getElementById("content-header-loggedout");if(null!=t){var n=document.getElementById("header-login");n.innerHTML=t.innerHTML,n.className="login",$(".obs_drop_group").obsdrop(),$("#main").on("click",".open-popup-link",v.showLogin)}})},p=function(){$("#provider-facebook",document).off("click").click(function(e){loginFacebook()}),$("#provider-google",document).off("click").click(function(e){e.preventDefault(),loginGoogle()}),$(".popup-email-login").click(v.clearAcceptTerms).click(m).magnificPopup({closeBtnInside:!0}),$("#provider-facebook-checked",document).off("click").click(function(e){e.preventDefault();var t=$(".terms-error",document);t.addClass("hidden"),v.termsAreAccepted()?loginFacebook():t.removeClass("hidden")}),$("#provider-google-checked",document).off("click").click(function(e){e.preventDefault();var t=$(".terms-error",document);t.addClass("hidden"),v.termsAreAccepted()?loginGoogle():t.removeClass("hidden")}),validateForms()};v.termsAreAccepted=function(){return[$("#accept-terms"),$("#accept-privacy"),$("#accept-age")].every(function(e){return e.is(":checked")})},v.clearAcceptTerms=function(){[$("#accept-terms"),$("#accept-privacy"),$("#accept-age")].forEach(function(e){e.removeAttr("checked")}),$(".terms-error").addClass("hidden")},v.validateInputs=function(e){var t=$(e);t.find(".error-text").empty();var i=t.attr("action"),r=!0,a=!1,s=!0;return t.find("input").each(function(){var e=$(this),t=e.attr("data-validate");if(t&&JSON.parse(t).some(function(e){return e===i}))switch(e.attr("type")){case"text":e.val().length||(r=!1,e.next(c).html("É necessário preencher este campo"));break;case"password":var n=e.val();if(!1===a){var o=(n=e.val()).length;s=!(o<6||25<o)||(r=!1,e.next(c).html("A password deve ter entre 6 e 25 carateres"),!1),a=n}else s&&n!==a&&(e.next(c).html("As passwords nao coincidem"),r=!1);break;case"email":l.test(e.val())||(e.next(c).html("Insira um endereço de email válido"),r=!1)}}),r};var f=function(){h.loader.loadHTML("adamastor/adamastor.templates.html","body",function(e){var t=$("#login-local-verify-email",document);$.magnificPopup.open({items:{src:t},type:"inline",closeOnBgClick:!0,closeOnContentClick:!1})})},m=function(){$("#login-popup, #login-local-popup",document).find(".error-text").empty()},g=function(e,n){n.find(c).empty(),n.find(i).empty();var o=e.responseJSON;if(o){var t=[];void 0===o.errors?t.push(o.error):t=o.errors,t.forEach(function(e){switch(e){case"missing_email_permission":reautorize=!0,n.find(i).html("Para prosseguir é obrigatório partilhar o seu endereço de email. Volte a tentar");break;case"pwd_not_match":case"no_uid":break;case"pwd_weak":n.find('input[type="password"]').next(c).html("A password é demasiado fraca");break;case"pwd_empty":n.find('input[type="password"]').next(c).html("A password deve ter entre 6 e 25 carateres");break;case"email_exists":$("#login-local-email").val(n.find('input[type="email"]').val()),n.find('input[type="email"]').next(c).html("Este email já tem uma conta criada");break;case"invalid_email":n.find('input[type="email"]').next(c).html("Insira um endereço de email válido");break;case"firstname_empty":n.find('input[type="email"][name="first_name"]').next(c).html("É necessário preencher este campo");break;case"lastname_empty":n.find('input[type="email"][name="last_name"]').next(c).html("É necessário preencher este campo");break;case"invalid_recaptcha":n.find(i).html("Erro reCapcha");break;case"not_found":var t=n.find('input[type="email"]');t.val();t.next(c).html("Email não encontrado. Verifique o email ou faça login com uma das redes sociais.");break;case"bad_request":case"internal_server_error":n.find(i).html("Erro reCapcha");break;case"authentication_fail":n.find(i).html("Dados inválidos. Verifique a senha ou faça login com uma das redes sociais.");break;case"not_verified":n.find(i).html("Utilizador não verificado"),n.find(".resend").removeClass("hide-note");break;case"fail_auth_google_callback":case"fail_auth_facebook_callback":case"fail_auth_barqueiro_callback":case"fail_auth_token":console.log("This is the error",o),n.find(i).html('Ocorreu um erro. Por favor contacte nos através de <a href="mailto:leitor@observador.pt">leitor@observador.pt</a>')}})}else n.find(i).html('Ocorreu um erro. Por favor contacte nos através de <a href="mailto:leitor@observador.pt">leitor@observador.pt</a>')};v.doAction=function(e,t){if(!a){a=!0;var n=$(e),o=n.attr("action"),i=n.find("button");i.attr("disable","disable");var r={};n.serializeArray().map(function(e){r[e.name]=e.value}),r["g-recaptcha-response"]=t,r.password&&(r.password_check=r.password_check||r.password),BarqueiroProxy.getInstance()[o](r,function(e){switch(o){case"login":v.localLogin(e.token);break;case"register":d?v.localLogin(e.token):f();break;case"recover":$(".error-text.message").empty().html("Enviamos o link de recuperação da palavra-passe para o seu email");break;case"reset":t=$("#login-local-password-reset",document),$.magnificPopup.open({items:{src:t},type:"inline",closeOnBgClick:!0,closeOnContentClick:!1,callbacks:{close:function(){h.location=h.location.protocol+"//"+h.location.hostname}}});break;case"resend":n.find(".resend").addClass("hide-note"),f()}var t;a=!1,i.removeAttr("disable"),grecaptcha.reset()},function(e){i.removeAttr("disable"),g(e,n),a=!1,grecaptcha.reset()})}},v.notifyLoaded=function(){var e;document.createEvent?(e=document.createEvent("HTMLEvents")).initEvent("adamastorLoaded",!0,!0):(e=document.createEventObject()).eventType="adamastorLoaded",e.sessionProfile=v.adamastor.getSessionProfile(),e.eventName="adamastorLoaded",document.createEvent?document.dispatchEvent(e):document.fireEvent("on"+e.eventType,e)},v.reautorize=!1,v.loginFacebook=function(){if(settings={scope:["public_profile","email","user_friends"],return_scopes:!0},reautorize&&(settings.auth_type="rerequest"),!document.getElementById("fbsdk")){var e=document.createElement("script");return e.id="fbsdk",e.src="https://connect.facebook.net/pt_PT/sdk.js#xfbml=1&version=v3.2&appId=1388666054753245&autoLogAppEvents=1",e.setAttribute("onload","loginFacebook()"),void document.body.insertAdjacentElement("beforeend",e)}FB&&FB.login(function(e){if(e.authResponse){var t=e.authResponse.grantedScopes.split(",");t.indexOf("email")<0||t.indexOf("public_profile")<0?(reautorize=!0,$("form").find(".error-text.general-error").html("Para prosseguir é obrigatório partilhar o seu endereço de email. Volte a tentar")):onFacebookLogin(e.authResponse.accessToken)}else console.log("User cancelled login or did not fully authorize.")},settings)},v.validateForms=function(){[document.getElementById("local-login-form"),document.getElementById("local-registration-form"),document.getElementById("local-reset-form"),document.getElementById("local-reset-form-apps")].forEach(function(o){if(null!==o){var i=o.querySelector(".captcha-field");if(i.innerHTML="",i.insertAdjacentHTML("afterbegin","<div class='captcha-code'></div>"),null!==i){var r=!0;o.onsubmit=function(e){e.preventDefault();var t=$(".terms-error");if(t.addClass("hidden"),"register"!==o.getAttribute("action")||h.jadamastor.termsAreAccepted()){if(h.jadamastor.validateInputs(o)){if(r){var n=grecaptcha.render(i.querySelector(".captcha-code"),{sitekey:"6LcGdUwUAAAAAEdlBPCpW7tsy8WC9fM4U-y9Kudl",size:"invisible",badge:"bottomright",callback:function(e){h.jadamastor.doAction(o,e)}});r=!1}grecaptcha.execute(n)}}else t.removeClass("hidden")}}}})},v.loginGoogle=function(e){if(!document.getElementById("gsapi")){var t=document.createElement("script");return t.id="gsapi",t.src="https://apis.google.com/js/platform.js",t.setAttribute("onload","loginGoogle(true)"),void document.body.insertAdjacentElement("beforeend",t)}h.gapi&&gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"439313482366-dvdj8tsff9tpi5csb410roen1r9g3m5q.apps.googleusercontent.com",cookiepolicy:"single_host_origin"}),auth2.signIn().then(function(e){onGoogleSignIn(e)},function(e){console.error(JSON.stringify(e))})})};return function(){v.header=$("#header-login"),v.adamastor=AdamastorProxy.getInstance();var e=void 0!==h.screenX?h.screenX:h.screenLeft,t=void 0!==h.screenY?h.screenY:h.screenTop,n=void 0!==h.outerWidth?h.outerWidth:document.documentElement.clientWidth,o=void 0!==h.outerHeight?h.outerHeight:document.documentElement.clientHeight-22,i=parseInt(e+(n-579)/2,10),r=parseInt(t+(o-399)/2.5,10);if(v.windowProps="width=579,height=399,left="+i+",top="+r,h.addEventListener("message",function(e){if(e.origin==h.location.origin){var t=e.data;t.hasOwnProperty("responseJSON")&&g(t,$("form"))}},!1),v.header.click(v.showLogin),v.adamastor.isLoggedIn()?s():(null!=h.isIframe&&null!=h.isIframe||(h.isIframe=!1),u(h.isIframe)),document.addEventListener("obsLogin",function(){s()},!1),document.addEventListener("obsLogout",function(){u(!1)},!1),document.addEventListener("obsLoad",function(){adamastor=AdamastorProxy.getInstance()}),!document.getElementById("recaptacha-google")){var a=document.createElement("script");a.src="https://www.google.com/recaptcha/api.js?onload=validateForms&render=explicit",a.type="text/javascript",a.id="recaptacha-google",document.body.appendChild(a)}h.onhashchange=function(){"#login-popup"==h.location.hash&&showLogin()}}(),v}}(window),window.jadamastor=adamastorPlugin();var BarqueiroProxy=function(){var e;return{getInstance:function(){return e||(e=function(){var i="https://barqueiro.observador.pt/",o="auth/login",r="auth/register",a="auth/activate",s="auth/recover",l="auth/reset",c="auth/resend";function d(e,t,n,o,i){$.ajax({type:t,url:e,data:JSON.stringify(n),success:o,error:i,dataType:"json",contentType:"application/json"})}return{login:function(e,t,n){d(i+o,"POST",e,t,n)},register:function(e,t,n){d(i+r,"POST",e,t,n)},activate:function(e,t,n,o){d(i+a+"/"+e+"/"+t,"GET",!1,n,o)},recover:function(e,t,n){d(i+s,"POST",e,t,n)},reset:function(e,t,n){d(i+l,"POST",e,t,n)},resend:function(e,t,n){d(i+c,"POST",e,t,n)}}}()),e}}}();function getRightUrlForExplicador(){return""}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery||window.Zepto)}(function(d){var u,o,p,i,f,t,l="Close",c="BeforeClose",m="MarkupParse",g=".mfp",h="mfp-ready",n="mfp-removing",e=function(){},a=!!window.jQuery,v=d(window),y=function(e,t){u.ev.on("mfp"+e+g,t)},b=function(e,t,n,o){var i=document.createElement("div");return i.className="mfp-"+e,n&&(i.innerHTML=n),o?t&&t.appendChild(i):(i=d(i),t&&i.appendTo(t)),i},E=function(e,t){u.ev.triggerHandler("mfp"+e,t),u.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),u.st.callbacks[e]&&u.st.callbacks[e].apply(u,d.isArray(t)?t:[t]))},w=function(e){return e===t&&u.currTemplate.closeBtn||(u.currTemplate.closeBtn=d(u.st.closeMarkup.replace("%title%",u.st.tClose)),t=e),u.currTemplate.closeBtn},r=function(){d.magnificPopup.instance||((u=new e).init(),d.magnificPopup.instance=u)};e.prototype={constructor:e,init:function(){var e=navigator.appVersion;u.isIE7=-1!==e.indexOf("MSIE 7."),u.isIE8=-1!==e.indexOf("MSIE 8."),u.isLowIE=u.isIE7||u.isIE8,u.isAndroid=/android/gi.test(e),u.isIOS=/iphone|ipad|ipod/gi.test(e),u.supportsTransition=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1}(),u.probablyMobile=u.isAndroid||u.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),p=d(document),u.popupsCache={}},open:function(e){var t;if(!1===e.isObj){u.items=e.items.toArray(),u.index=0;var n,o=e.items;for(t=0;t<o.length;t++)if((n=o[t]).parsed&&(n=n.el[0]),n===e.el[0]){u.index=t;break}}else u.items=d.isArray(e.items)?e.items:[e.items],u.index=e.index||0;if(!u.isOpen){u.types=[],f="",e.mainEl&&e.mainEl.length?u.ev=e.mainEl.eq(0):u.ev=p,e.key?(u.popupsCache[e.key]||(u.popupsCache[e.key]={}),u.currTemplate=u.popupsCache[e.key]):u.currTemplate={},u.st=d.extend(!0,{},d.magnificPopup.defaults,e),u.fixedContentPos="auto"===u.st.fixedContentPos?!u.probablyMobile:u.st.fixedContentPos,u.st.modal&&(u.st.closeOnContentClick=!1,u.st.closeOnBgClick=!1,u.st.showCloseBtn=!1,u.st.enableEscapeKey=!1),u.bgOverlay||(u.bgOverlay=b("bg").on("click"+g,function(){u.close()}),u.wrap=b("wrap").attr("tabindex",-1).on("click"+g,function(e){u._checkIfClose(e.target)&&u.close()}),u.container=b("container",u.wrap)),u.contentContainer=b("content"),u.st.preloader&&(u.preloader=b("preloader",u.container,u.st.tLoading));var i=d.magnificPopup.modules;for(t=0;t<i.length;t++){var r=i[t];r=r.charAt(0).toUpperCase()+r.slice(1),u["init"+r].call(u)}E("BeforeOpen"),u.st.showCloseBtn&&(u.st.closeBtnInside?(y(m,function(e,t,n,o){n.close_replaceWith=w(o.type)}),f+=" mfp-close-btn-in"):u.wrap.append(w())),u.st.alignTop&&(f+=" mfp-align-top"),u.fixedContentPos?u.wrap.css({overflow:u.st.overflowY,overflowX:"hidden",overflowY:u.st.overflowY}):u.wrap.css({top:v.scrollTop(),position:"absolute"}),(!1===u.st.fixedBgPos||"auto"===u.st.fixedBgPos&&!u.fixedContentPos)&&u.bgOverlay.css({height:p.height(),position:"absolute"}),u.st.enableEscapeKey&&p.on("keyup"+g,function(e){27===e.keyCode&&u.close()}),v.on("resize"+g,function(){u.updateSize()}),u.st.closeOnContentClick||(f+=" mfp-auto-cursor"),f&&u.wrap.addClass(f);var a=u.wH=v.height(),s={};if(u.fixedContentPos&&u._hasScrollBar(a)){var l=u._getScrollbarSize();l&&(s.marginRight=l)}u.fixedContentPos&&(u.isIE7?d("body").css("overflow","hidden"):s.overflow="hidden");var c=u.st.mainClass;return u.isIE7&&(c+=" mfp-ie7"),c&&u._addClassToMFP(c),u.updateItemHTML(),E("BuildControls"),d("body").css(s),u.bgOverlay.add(u.wrap).prependTo(u.st.prependTo||d(document.body)),u._lastFocusedEl=document.activeElement,setTimeout(function(){u.content?(u._addClassToMFP(h),u._setFocus()):u.bgOverlay.addClass(h),p.on("focusin"+g,u._onFocusIn)},16),u.isOpen=!0,u.updateSize(a),E("Open"),e}u.updateItemHTML()},close:function(){u.isOpen&&(E(c),u.isOpen=!1,u.st.removalDelay&&!u.isLowIE&&u.supportsTransition?(u._addClassToMFP(n),setTimeout(function(){u._close()},u.st.removalDelay)):u._close())},_close:function(){E(l);var e=n+" "+h+" ";if(u.bgOverlay.detach(),u.wrap.detach(),u.container.empty(),u.st.mainClass&&(e+=u.st.mainClass+" "),u._removeClassFromMFP(e),u.fixedContentPos){var t={marginRight:""};u.isIE7?d("body").css("overflow",""):t.overflow="",d("body").css(t)}p.off("keyup.mfp focusin"+g),u.ev.off(g),u.wrap.attr("class","mfp-wrap").removeAttr("style"),u.bgOverlay.attr("class","mfp-bg"),u.container.attr("class","mfp-container"),u.st.showCloseBtn&&(!u.st.closeBtnInside||!0===u.currTemplate[u.currItem.type])&&u.currTemplate.closeBtn&&u.currTemplate.closeBtn.detach(),u._lastFocusedEl&&d(u._lastFocusedEl).focus(),u.currItem=null,u.content=null,u.currTemplate=null,u.prevHeight=0,E("AfterClose")},updateSize:function(e){if(u.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*t;u.wrap.css("height",n),u.wH=n}else u.wH=e||v.height();u.fixedContentPos||u.wrap.css("height",u.wH),E("Resize")},updateItemHTML:function(){var e=u.items[u.index];u.contentContainer.detach(),u.content&&u.content.detach(),e.parsed||(e=u.parseEl(u.index));var t=e.type;if(E("BeforeChange",[u.currItem?u.currItem.type:"",t]),u.currItem=e,!u.currTemplate[t]){var n=!!u.st[t]&&u.st[t].markup;E("FirstMarkupParse",n),u.currTemplate[t]=!n||d(n)}i&&i!==e.type&&u.container.removeClass("mfp-"+i+"-holder");var o=u["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,u.currTemplate[t]);u.appendContent(o,t),e.preloaded=!0,E("Change",e),i=e.type,u.container.prepend(u.contentContainer),E("AfterChange")},appendContent:function(e,t){(u.content=e)?u.st.showCloseBtn&&u.st.closeBtnInside&&!0===u.currTemplate[t]?u.content.find(".mfp-close").length||u.content.append(w()):u.content=e:u.content="",E("BeforeAppend"),u.container.addClass("mfp-"+t+"-holder"),u.contentContainer.append(u.content)},parseEl:function(e){var t,n=u.items[e];if((n=n.tagName?{el:d(n)}:(t=n.type,{data:n,src:n.src})).el){for(var o=u.types,i=0;i<o.length;i++)if(n.el.hasClass("mfp-"+o[i])){t=o[i];break}n.src=n.el.attr("data-mfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=t||u.st.type||"inline",n.index=e,n.parsed=!0,u.items[e]=n,E("ElementParse",n),u.items[e]},addGroup:function(t,n){var e=function(e){e.mfpEl=this,u._openClick(e,t,n)};n||(n={});var o="click.magnificPopup";n.mainEl=t,n.items?(n.isObj=!0,t.off(o).on(o,e)):(n.isObj=!1,n.delegate?t.off(o).on(o,n.delegate,e):(n.items=t).off(o).on(o,e))},_openClick:function(e,t,n){if((void 0!==n.midClick?n.midClick:d.magnificPopup.defaults.midClick)||2!==e.which&&!e.ctrlKey&&!e.metaKey){var o=void 0!==n.disableOn?n.disableOn:d.magnificPopup.defaults.disableOn;if(o)if(d.isFunction(o)){if(!o.call(u))return!0}else if(v.width()<o)return!0;e.type&&(e.preventDefault(),u.isOpen&&e.stopPropagation()),n.el=d(e.mfpEl),n.delegate&&(n.items=t.find(n.delegate)),u.open(n)}},updateStatus:function(e,t){if(u.preloader){o!==e&&u.container.removeClass("mfp-s-"+o),!t&&"loading"===e&&(t=u.st.tLoading);var n={status:e,text:t};E("UpdateStatus",n),e=n.status,t=n.text,u.preloader.html(t),u.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),u.container.addClass("mfp-s-"+e),o=e}},_checkIfClose:function(e){if(!d(e).hasClass("mfp-prevent-close")){var t=u.st.closeOnContentClick,n=u.st.closeOnBgClick;if(t&&n)return!0;if(!u.content||d(e).hasClass("mfp-close")||d(e).parents(".mfp-close").length||u.preloader&&e===u.preloader[0])return!0;if(e===u.content[0]||d.contains(u.content[0],e)){if(t)return!0}else if(n&&d.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){u.bgOverlay.addClass(e),u.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),u.wrap.removeClass(e)},_hasScrollBar:function(e){return(u.isIE7?p.height():document.body.scrollHeight)>(e||v.height())},_setFocus:function(){(u.st.focus?u.content.find(u.st.focus).eq(0):u.wrap).focus()},_onFocusIn:function(e){if(e.target!==u.wrap[0]&&!d.contains(u.wrap[0],e.target))return u._setFocus(),!1},_parseMarkup:function(i,e,t){var r;t.data&&(e=d.extend(t.data,e)),E(m,[i,e,t]),d.each(e,function(e,t){if(void 0===t||!1===t)return!0;if(1<(r=e.split("_")).length){var n=i.find(g+"-"+r[0]);if(0<n.length){var o=r[1];"replaceWith"===o?n[0]!==t[0]&&n.replaceWith(t):"img"===o?n.is("img")?n.attr("src",t):n.replaceWith('<img src="'+t+'" class="'+n.attr("class")+'" />'):n.attr(r[1],t)}}else i.find(g+"-"+e).html(t)})},_getScrollbarSize:function(){if(void 0===u.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),u.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return u.scrollbarSize}},d.magnificPopup={instance:null,proto:e.prototype,modules:[],open:function(e,t){return r(),(e=e?d.extend(!0,{},e):{}).isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return d.magnificPopup.instance&&d.magnificPopup.instance.close()},registerModule:function(e,t){t.options&&(d.magnificPopup.defaults[e]=t.options),d.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},d.fn.magnificPopup=function(e){r();var t=d(this);if("string"==typeof e)if("open"===e){var n,o=a?t.data("magnificPopup"):t[0].magnificPopup,i=parseInt(arguments[1],10)||0;n=o.items?o.items[i]:(n=t,o.delegate&&(n=n.find(o.delegate)),n.eq(i)),u._openClick({mfpEl:n},t,o)}else u.isOpen&&u[e].apply(u,Array.prototype.slice.call(arguments,1));else e=d.extend(!0,{},e),a?t.data("magnificPopup",e):t[0].magnificPopup=e,u.addGroup(t,e);return t};var s,S,_,C="inline",k=function(){_&&(S.after(_.addClass(s)).detach(),_=null)};d.magnificPopup.registerModule(C,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){u.types.push(C),y(l+"."+C,function(){k()})},getInline:function(e,t){if(k(),e.src){var n=u.st.inline,o=d(e.src);if(o.length){var i=o[0].parentNode;i&&i.tagName&&(S||(s=n.hiddenClass,S=b(s),s="mfp-"+s),_=o.after(S).detach().removeClass(s)),u.updateStatus("ready")}else u.updateStatus("error",n.tNotFound),o=d("<div>");return e.inlineElement=o}return u.updateStatus("ready"),u._parseMarkup(t,{},e),t}}});var x,I,T,P="ajax",A=function(){x&&d(document.body).removeClass(x)},L=function(){A(),u.req&&u.req.abort()};d.magnificPopup.registerModule(P,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){u.types.push(P),x=u.st.ajax.cursor,y(l+"."+P,L),y("BeforeChange."+P,L)},getAjax:function(i){x&&d(document.body).addClass(x),u.updateStatus("loading");var e=d.extend({url:i.src,success:function(e,t,n){var o={data:e,xhr:n};E("ParseAjax",o),u.appendContent(d(o.data),P),i.finished=!0,A(),u._setFocus(),setTimeout(function(){u.wrap.addClass(h)},16),u.updateStatus("ready"),E("AjaxContentAdded")},error:function(){A(),i.finished=i.loadError=!0,u.updateStatus("error",u.st.ajax.tError.replace("%url%",i.src))}},u.st.ajax.settings);return u.req=d.ajax(e),""}}}),d.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=u.st.image,t=".image";u.types.push("image"),y("Open"+t,function(){"image"===u.currItem.type&&e.cursor&&d(document.body).addClass(e.cursor)}),y(l+t,function(){e.cursor&&d(document.body).removeClass(e.cursor),v.off("resize"+g)}),y("Resize"+t,u.resizeImage),u.isLowIE&&y("AfterChange",u.resizeImage)},resizeImage:function(){var e=u.currItem;if(e&&e.img&&u.st.image.verticalFit){var t=0;u.isLowIE&&(t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",u.wH-t)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,I&&clearInterval(I),e.isCheckingImgSize=!1,E("ImageHasSize",e),e.imgHidden&&(u.content&&u.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(t){var n=0,o=t.img[0],i=function(e){I&&clearInterval(I),I=setInterval(function(){0<o.naturalWidth?u._onImageHasSize(t):(200<n&&clearInterval(I),3==++n?i(10):40===n?i(50):100===n&&i(500))},e)};i(1)},getImage:function(e,t){var n=0,o=function(){e&&(e.img[0].complete?(e.img.off(".mfploader"),e===u.currItem&&(u._onImageHasSize(e),u.updateStatus("ready")),e.hasSize=!0,e.loaded=!0,E("ImageLoadComplete")):++n<200?setTimeout(o,100):i())},i=function(){e&&(e.img.off(".mfploader"),e===u.currItem&&(u._onImageHasSize(e),u.updateStatus("error",r.tError.replace("%url%",e.src))),e.hasSize=!0,e.loaded=!0,e.loadError=!0)},r=u.st.image,a=t.find(".mfp-img");if(a.length){var s=document.createElement("img");s.className="mfp-img",e.el&&e.el.find("img").length&&(s.alt=e.el.find("img").attr("alt")),e.img=d(s).on("load.mfploader",o).on("error.mfploader",i),s.src=e.src,a.is("img")&&(e.img=e.img.clone()),0<(s=e.img[0]).naturalWidth?e.hasSize=!0:s.width||(e.hasSize=!1)}return u._parseMarkup(t,{title:function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=u.st.image.titleSrc;if(t){if(d.isFunction(t))return t.call(u,e);if(e.el)return e.el.attr(t)||""}return""}(e),img_replaceWith:e.img},e),u.resizeImage(),e.hasSize?(I&&clearInterval(I),e.loadError?(t.addClass("mfp-loading"),u.updateStatus("error",r.tError.replace("%url%",e.src))):(t.removeClass("mfp-loading"),u.updateStatus("ready"))):(u.updateStatus("loading"),e.loading=!0,e.hasSize||(e.imgHidden=!0,t.addClass("mfp-loading"),u.findImageSize(e))),t}}}),d.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,r=u.st.zoom,t=".zoom";if(r.enabled&&u.supportsTransition){var n,o,i=r.duration,a=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+r.duration/1e3+"s "+r.easing,o={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},i="transition";return o["-webkit-"+i]=o["-moz-"+i]=o["-o-"+i]=o[i]=n,t.css(o),t},s=function(){u.content.css("visibility","visible")};y("BuildControls"+t,function(){if(u._allowZoom()){if(clearTimeout(n),u.content.css("visibility","hidden"),!(e=u._getItemToZoom()))return void s();(o=a(e)).css(u._getOffset()),u.wrap.append(o),n=setTimeout(function(){o.css(u._getOffset(!0)),n=setTimeout(function(){s(),setTimeout(function(){o.remove(),e=o=null,E("ZoomAnimationEnded")},16)},i)},16)}}),y(c+t,function(){if(u._allowZoom()){if(clearTimeout(n),u.st.removalDelay=i,!e){if(!(e=u._getItemToZoom()))return;o=a(e)}o.css(u._getOffset(!0)),u.wrap.append(o),u.content.css("visibility","hidden"),setTimeout(function(){o.css(u._getOffset())},16)}}),y(l+t,function(){u._allowZoom()&&(s(),o&&o.remove(),e=null)})}},_allowZoom:function(){return"image"===u.currItem.type},_getItemToZoom:function(){return!!u.currItem.hasSize&&u.currItem.img},_getOffset:function(e){var t,n=(t=e?u.currItem.img:u.st.zoom.opener(u.currItem.el||u.currItem)).offset(),o=parseInt(t.css("padding-top"),10),i=parseInt(t.css("padding-bottom"),10);n.top-=d(window).scrollTop()-o;var r={width:t.width(),height:(a?t.innerHeight():t[0].offsetHeight)-i-o};return void 0===T&&(T=void 0!==document.createElement("p").style.MozTransform),T?r["-moz-transform"]=r.transform="translate("+n.left+"px,"+n.top+"px)":(r.left=n.left,r.top=n.top),r}}});var N="iframe",M=function(e){if(u.currTemplate[N]){var t=u.currTemplate[N].find("iframe");t.length&&(e||(t[0].src="//about:blank"),u.isIE8&&t.css("display",e?"block":"none"))}};d.magnificPopup.registerModule(N,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){u.types.push(N),y("BeforeChange",function(e,t,n){t!==n&&(t===N?M():n===N&&M(!0))}),y(l+"."+N,function(){M()})},getIframe:function(e,t){var n=e.src,o=u.st.iframe;d.each(o.patterns,function(){if(-1<n.indexOf(this.index))return this.id&&(n="string"==typeof this.id?n.substr(n.lastIndexOf(this.id)+this.id.length,n.length):this.id.call(this,n)),n=this.src.replace("%id%",n),!1});var i={};return o.srcAction&&(i[o.srcAction]=n),u._parseMarkup(t,i,e),u.updateStatus("ready"),t}}}),r()}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery||window.Zepto)}(function(d){var u,o,p,i,f,t,l="Close",c="BeforeClose",m="MarkupParse",g="Open",h=".mfp",v="mfp-ready",n="mfp-removing",a="mfp-prevent-close",e=function(){},s=!!window.jQuery,y=d(window),b=function(e,t){u.ev.on("mfp"+e+h,t)},E=function(e,t,n,o){var i=document.createElement("div");return i.className="mfp-"+e,n&&(i.innerHTML=n),o?t&&t.appendChild(i):(i=d(i),t&&i.appendTo(t)),i},w=function(e,t){u.ev.triggerHandler("mfp"+e,t),u.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),u.st.callbacks[e]&&u.st.callbacks[e].apply(u,d.isArray(t)?t:[t]))},S=function(e){return e===t&&u.currTemplate.closeBtn||(u.currTemplate.closeBtn=d(u.st.closeMarkup.replace("%title%",u.st.tClose)),t=e),u.currTemplate.closeBtn},r=function(){d.magnificPopup.instance||((u=new e).init(),d.magnificPopup.instance=u)};e.prototype={constructor:e,init:function(){var e=navigator.appVersion;u.isLowIE=u.isIE8=document.all&&!document.addEventListener,u.isAndroid=/android/gi.test(e),u.isIOS=/iphone|ipad|ipod/gi.test(e),u.supportsTransition=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1}(),u.probablyMobile=u.isAndroid||u.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),p=d(document),u.popupsCache={}},open:function(e){var t;if(!1===e.isObj){u.items=e.items.toArray(),u.index=0;var n,o=e.items;for(t=0;t<o.length;t++)if((n=o[t]).parsed&&(n=n.el[0]),n===e.el[0]){u.index=t;break}}else u.items=d.isArray(e.items)?e.items:[e.items],u.index=e.index||0;if(!u.isOpen){u.types=[],f="",e.mainEl&&e.mainEl.length?u.ev=e.mainEl.eq(0):u.ev=p,e.key?(u.popupsCache[e.key]||(u.popupsCache[e.key]={}),u.currTemplate=u.popupsCache[e.key]):u.currTemplate={},u.st=d.extend(!0,{},d.magnificPopup.defaults,e),u.fixedContentPos="auto"===u.st.fixedContentPos?!u.probablyMobile:u.st.fixedContentPos,u.st.modal&&(u.st.closeOnContentClick=!1,u.st.closeOnBgClick=!1,u.st.showCloseBtn=!1,u.st.enableEscapeKey=!1),u.bgOverlay||(u.bgOverlay=E("bg").on("click"+h,function(){u.close()}),u.wrap=E("wrap").attr("tabindex",-1).on("click"+h,function(e){u._checkIfClose(e.target)&&u.close()}),u.container=E("container",u.wrap)),u.contentContainer=E("content"),u.st.preloader&&(u.preloader=E("preloader",u.container,u.st.tLoading));var i=d.magnificPopup.modules;for(t=0;t<i.length;t++){var r=i[t];r=r.charAt(0).toUpperCase()+r.slice(1),u["init"+r].call(u)}w("BeforeOpen"),u.st.showCloseBtn&&(u.st.closeBtnInside?(b(m,function(e,t,n,o){n.close_replaceWith=S(o.type)}),f+=" mfp-close-btn-in"):u.wrap.append(S())),u.st.alignTop&&(f+=" mfp-align-top"),u.fixedContentPos?u.wrap.css({overflow:u.st.overflowY,overflowX:"hidden",overflowY:u.st.overflowY}):u.wrap.css({top:y.scrollTop(),position:"absolute"}),(!1===u.st.fixedBgPos||"auto"===u.st.fixedBgPos&&!u.fixedContentPos)&&u.bgOverlay.css({height:p.height(),position:"absolute"}),u.st.enableEscapeKey&&p.on("keyup"+h,function(e){27===e.keyCode&&u.close()}),y.on("resize"+h,function(){u.updateSize()}),u.st.closeOnContentClick||(f+=" mfp-auto-cursor"),f&&u.wrap.addClass(f);var a=u.wH=y.height(),s={};if(u.fixedContentPos&&u._hasScrollBar(a)){var l=u._getScrollbarSize();l&&(s.marginRight=l)}u.fixedContentPos&&(u.isIE7?d("body").css("overflow","hidden"):s.overflow="hidden");var c=u.st.mainClass;return u.isIE7&&(c+=" mfp-ie7"),c&&u._addClassToMFP(c),u.updateItemHTML(),w("BuildControls"),d("body").css(s),u.bgOverlay.add(u.wrap).prependTo(u.st.prependTo||d(document.body)),u._lastFocusedEl=document.activeElement,setTimeout(function(){u.content?(u._addClassToMFP(v),u._setFocus()):u.bgOverlay.addClass(v),p.on("focusin"+h,u._onFocusIn)},16),u.isOpen=!0,u.updateSize(a),w(g),e}u.updateItemHTML()},close:function(){u.isOpen&&(w(c),u.isOpen=!1,u.st.removalDelay&&!u.isLowIE&&u.supportsTransition?(u._addClassToMFP(n),setTimeout(function(){u._close()},u.st.removalDelay)):u._close())},_close:function(){w(l);var e=n+" "+v+" ";if(u.bgOverlay.detach(),u.wrap.detach(),u.container.empty(),u.st.mainClass&&(e+=u.st.mainClass+" "),u._removeClassFromMFP(e),u.fixedContentPos){var t={marginRight:""};u.isIE7?d("body").css("overflow",""):t.overflow="",d("body").css(t)}p.off("keyup.mfp focusin"+h),u.ev.off(h),u.wrap.attr("class","mfp-wrap").removeAttr("style"),u.bgOverlay.attr("class","mfp-bg"),u.container.attr("class","mfp-container"),!u.st.showCloseBtn||u.st.closeBtnInside&&!0!==u.currTemplate[u.currItem.type]||u.currTemplate.closeBtn&&u.currTemplate.closeBtn.detach(),u.st.autoFocusLast&&u._lastFocusedEl&&d(u._lastFocusedEl).focus(),u.currItem=null,u.content=null,u.currTemplate=null,u.prevHeight=0,w("AfterClose")},updateSize:function(e){if(u.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*t;u.wrap.css("height",n),u.wH=n}else u.wH=e||y.height();u.fixedContentPos||u.wrap.css("height",u.wH),w("Resize")},updateItemHTML:function(){var e=u.items[u.index];u.contentContainer.detach(),u.content&&u.content.detach(),e.parsed||(e=u.parseEl(u.index));var t=e.type;if(w("BeforeChange",[u.currItem?u.currItem.type:"",t]),u.currItem=e,!u.currTemplate[t]){var n=!!u.st[t]&&u.st[t].markup;w("FirstMarkupParse",n),u.currTemplate[t]=!n||d(n)}i&&i!==e.type&&u.container.removeClass("mfp-"+i+"-holder");var o=u["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,u.currTemplate[t]);u.appendContent(o,t),e.preloaded=!0,w("Change",e),i=e.type,u.container.prepend(u.contentContainer),w("AfterChange")},appendContent:function(e,t){(u.content=e)?u.st.showCloseBtn&&u.st.closeBtnInside&&!0===u.currTemplate[t]?u.content.find(".mfp-close").length||u.content.append(S()):u.content=e:u.content="",w("BeforeAppend"),u.container.addClass("mfp-"+t+"-holder"),u.contentContainer.append(u.content)},parseEl:function(e){var t,n=u.items[e];if((n=n.tagName?{el:d(n)}:(t=n.type,{data:n,src:n.src})).el){for(var o=u.types,i=0;i<o.length;i++)if(n.el.hasClass("mfp-"+o[i])){t=o[i];break}n.src=n.el.attr("data-mfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=t||u.st.type||"inline",n.index=e,n.parsed=!0,u.items[e]=n,w("ElementParse",n),u.items[e]},addGroup:function(t,n){var e=function(e){e.mfpEl=this,u._openClick(e,t,n)};n||(n={});var o="click.magnificPopup";n.mainEl=t,n.items?(n.isObj=!0,t.off(o).on(o,e)):(n.isObj=!1,n.delegate?t.off(o).on(o,n.delegate,e):(n.items=t).off(o).on(o,e))},_openClick:function(e,t,n){if((void 0!==n.midClick?n.midClick:d.magnificPopup.defaults.midClick)||!(2===e.which||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){var o=void 0!==n.disableOn?n.disableOn:d.magnificPopup.defaults.disableOn;if(o)if(d.isFunction(o)){if(!o.call(u))return!0}else if(y.width()<o)return!0;e.type&&(e.preventDefault(),u.isOpen&&e.stopPropagation()),n.el=d(e.mfpEl),n.delegate&&(n.items=t.find(n.delegate)),u.open(n)}},updateStatus:function(e,t){if(u.preloader){o!==e&&u.container.removeClass("mfp-s-"+o),t||"loading"!==e||(t=u.st.tLoading);var n={status:e,text:t};w("UpdateStatus",n),e=n.status,t=n.text,u.preloader.html(t),u.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),u.container.addClass("mfp-s-"+e),o=e}},_checkIfClose:function(e){if(!d(e).hasClass(a)){var t=u.st.closeOnContentClick,n=u.st.closeOnBgClick;if(t&&n)return!0;if(!u.content||d(e).hasClass("mfp-close")||d(e).parents(".mfp-close").length||u.preloader&&e===u.preloader[0])return!0;if(e===u.content[0]||d.contains(u.content[0],e)){if(t)return!0}else if(n&&d.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){u.bgOverlay.addClass(e),u.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),u.wrap.removeClass(e)},_hasScrollBar:function(e){return(u.isIE7?p.height():document.body.scrollHeight)>(e||y.height())},_setFocus:function(){(u.st.focus?u.content.find(u.st.focus).eq(0):u.wrap).focus()},_onFocusIn:function(e){if(e.target!==u.wrap[0]&&!d.contains(u.wrap[0],e.target))return u._setFocus(),!1},_parseMarkup:function(i,e,t){var r;t.data&&(e=d.extend(t.data,e)),w(m,[i,e,t]),d.each(e,function(e,t){if(void 0===t||!1===t)return!0;if(1<(r=e.split("_")).length){var n=i.find(h+"-"+r[0]);if(0<n.length){var o=r[1];"replaceWith"===o?n[0]!==t[0]&&n.replaceWith(t):"img"===o?n.is("img")?n.attr("src",t):n.replaceWith(d("<img>").attr("src",t).attr("class",n.attr("class"))):n.attr(r[1],t)}}else i.find(h+"-"+e).html(t)})},_getScrollbarSize:function(){if(void 0===u.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),u.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return u.scrollbarSize}},d.magnificPopup={instance:null,proto:e.prototype,modules:[],open:function(e,t){return r(),(e=e?d.extend(!0,{},e):{}).isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return d.magnificPopup.instance&&d.magnificPopup.instance.close()},registerModule:function(e,t){t.options&&(d.magnificPopup.defaults[e]=t.options),d.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},d.fn.magnificPopup=function(e){r();var t=d(this);if("string"==typeof e)if("open"===e){var n,o=s?t.data("magnificPopup"):t[0].magnificPopup,i=parseInt(arguments[1],10)||0;n=o.items?o.items[i]:(n=t,o.delegate&&(n=n.find(o.delegate)),n.eq(i)),u._openClick({mfpEl:n},t,o)}else u.isOpen&&u[e].apply(u,Array.prototype.slice.call(arguments,1));else e=d.extend(!0,{},e),s?t.data("magnificPopup",e):t[0].magnificPopup=e,u.addGroup(t,e);return t};var _,C,k,x="inline",I=function(){k&&(C.after(k.addClass(_)).detach(),k=null)};d.magnificPopup.registerModule(x,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){u.types.push(x),b(l+"."+x,function(){I()})},getInline:function(e,t){if(I(),e.src){var n=u.st.inline,o=d(e.src);if(o.length){var i=o[0].parentNode;i&&i.tagName&&(C||(_=n.hiddenClass,C=E(_),_="mfp-"+_),k=o.after(C).detach().removeClass(_)),u.updateStatus("ready")}else u.updateStatus("error",n.tNotFound),o=d("<div>");return e.inlineElement=o}return u.updateStatus("ready"),u._parseMarkup(t,{},e),t}}});var T,P,A,L="ajax",N=function(){T&&d(document.body).removeClass(T)},M=function(){N(),u.req&&u.req.abort()};d.magnificPopup.registerModule(L,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){u.types.push(L),T=u.st.ajax.cursor,b(l+"."+L,M),b("BeforeChange."+L,M)},getAjax:function(i){T&&d(document.body).addClass(T),u.updateStatus("loading");var e=d.extend({url:i.src,success:function(e,t,n){var o={data:e,xhr:n};w("ParseAjax",o),u.appendContent(d(o.data),L),i.finished=!0,N(),u._setFocus(),setTimeout(function(){u.wrap.addClass(v)},16),u.updateStatus("ready"),w("AjaxContentAdded")},error:function(){N(),i.finished=i.loadError=!0,u.updateStatus("error",u.st.ajax.tError.replace("%url%",i.src))}},u.st.ajax.settings);return u.req=d.ajax(e),""}}}),d.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=u.st.image,t=".image";u.types.push("image"),b(g+t,function(){"image"===u.currItem.type&&e.cursor&&d(document.body).addClass(e.cursor)}),b(l+t,function(){e.cursor&&d(document.body).removeClass(e.cursor),y.off("resize"+h)}),b("Resize"+t,u.resizeImage),u.isLowIE&&b("AfterChange",u.resizeImage)},resizeImage:function(){var e=u.currItem;if(e&&e.img&&u.st.image.verticalFit){var t=0;u.isLowIE&&(t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",u.wH-t)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,P&&clearInterval(P),e.isCheckingImgSize=!1,w("ImageHasSize",e),e.imgHidden&&(u.content&&u.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(t){var n=0,o=t.img[0],i=function(e){P&&clearInterval(P),P=setInterval(function(){0<o.naturalWidth?u._onImageHasSize(t):(200<n&&clearInterval(P),3==++n?i(10):40===n?i(50):100===n&&i(500))},e)};i(1)},getImage:function(e,t){var n=0,o=function(){e&&(e.img[0].complete?(e.img.off(".mfploader"),e===u.currItem&&(u._onImageHasSize(e),u.updateStatus("ready")),e.hasSize=!0,e.loaded=!0,w("ImageLoadComplete")):++n<200?setTimeout(o,100):i())},i=function(){e&&(e.img.off(".mfploader"),e===u.currItem&&(u._onImageHasSize(e),u.updateStatus("error",r.tError.replace("%url%",e.src))),e.hasSize=!0,e.loaded=!0,e.loadError=!0)},r=u.st.image,a=t.find(".mfp-img");if(a.length){var s=document.createElement("img");s.className="mfp-img",e.el&&e.el.find("img").length&&(s.alt=e.el.find("img").attr("alt")),e.img=d(s).on("load.mfploader",o).on("error.mfploader",i),s.src=e.src,a.is("img")&&(e.img=e.img.clone()),0<(s=e.img[0]).naturalWidth?e.hasSize=!0:s.width||(e.hasSize=!1)}return u._parseMarkup(t,{title:function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=u.st.image.titleSrc;if(t){if(d.isFunction(t))return t.call(u,e);if(e.el)return e.el.attr(t)||""}return""}(e),img_replaceWith:e.img},e),u.resizeImage(),e.hasSize?(P&&clearInterval(P),e.loadError?(t.addClass("mfp-loading"),u.updateStatus("error",r.tError.replace("%url%",e.src))):(t.removeClass("mfp-loading"),u.updateStatus("ready"))):(u.updateStatus("loading"),e.loading=!0,e.hasSize||(e.imgHidden=!0,t.addClass("mfp-loading"),u.findImageSize(e))),t}}}),d.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,r=u.st.zoom,t=".zoom";if(r.enabled&&u.supportsTransition){var n,o,i=r.duration,a=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+r.duration/1e3+"s "+r.easing,o={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},i="transition";return o["-webkit-"+i]=o["-moz-"+i]=o["-o-"+i]=o[i]=n,t.css(o),t},s=function(){u.content.css("visibility","visible")};b("BuildControls"+t,function(){if(u._allowZoom()){if(clearTimeout(n),u.content.css("visibility","hidden"),!(e=u._getItemToZoom()))return void s();(o=a(e)).css(u._getOffset()),u.wrap.append(o),n=setTimeout(function(){o.css(u._getOffset(!0)),n=setTimeout(function(){s(),setTimeout(function(){o.remove(),e=o=null,w("ZoomAnimationEnded")},16)},i)},16)}}),b(c+t,function(){if(u._allowZoom()){if(clearTimeout(n),u.st.removalDelay=i,!e){if(!(e=u._getItemToZoom()))return;o=a(e)}o.css(u._getOffset(!0)),u.wrap.append(o),u.content.css("visibility","hidden"),setTimeout(function(){o.css(u._getOffset())},16)}}),b(l+t,function(){u._allowZoom()&&(s(),o&&o.remove(),e=null)})}},_allowZoom:function(){return"image"===u.currItem.type},_getItemToZoom:function(){return!!u.currItem.hasSize&&u.currItem.img},_getOffset:function(e){var t,n=(t=e?u.currItem.img:u.st.zoom.opener(u.currItem.el||u.currItem)).offset(),o=parseInt(t.css("padding-top"),10),i=parseInt(t.css("padding-bottom"),10);n.top-=d(window).scrollTop()-o;var r={width:t.width(),height:(s?t.innerHeight():t[0].offsetHeight)-i-o};return void 0===A&&(A=void 0!==document.createElement("p").style.MozTransform),A?r["-moz-transform"]=r.transform="translate("+n.left+"px,"+n.top+"px)":(r.left=n.left,r.top=n.top),r}}});var O="iframe",j=function(e){if(u.currTemplate[O]){var t=u.currTemplate[O].find("iframe");t.length&&(e||(t[0].src="//about:blank"),u.isIE8&&t.css("display",e?"block":"none"))}};d.magnificPopup.registerModule(O,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){u.types.push(O),b("BeforeChange",function(e,t,n){t!==n&&(t===O?j():n===O&&j(!0))}),b(l+"."+O,function(){j()})},getIframe:function(e,t){var n=e.src,o=u.st.iframe;d.each(o.patterns,function(){if(-1<n.indexOf(this.index))return this.id&&(n="string"==typeof this.id?n.substr(n.lastIndexOf(this.id)+this.id.length,n.length):this.id.call(this,n)),n=this.src.replace("%id%",n),!1});var i={};return o.srcAction&&(i[o.srcAction]=n),u._parseMarkup(t,i,e),u.updateStatus("ready"),t}}});var D=function(e){var t=u.items.length;return t-1<e?e-t:e<0?t+e:e},F=function(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)};d.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var r=u.st.gallery,e=".mfp-gallery";if(u.direction=!0,!r||!r.enabled)return!1;f+=" mfp-gallery",b(g+e,function(){r.navigateByImgClick&&u.wrap.on("click"+e,".mfp-img",function(){if(1<u.items.length)return u.next(),!1}),p.on("keydown"+e,function(e){37===e.keyCode?u.prev():39===e.keyCode&&u.next()})}),b("UpdateStatus"+e,function(e,t){t.text&&(t.text=F(t.text,u.currItem.index,u.items.length))}),b(m+e,function(e,t,n,o){var i=u.items.length;n.counter=1<i?F(r.tCounter,o.index,i):""}),b("BuildControls"+e,function(){if(1<u.items.length&&r.arrows&&!u.arrowLeft){var e=r.arrowMarkup,t=u.arrowLeft=d(e.replace(/%title%/gi,r.tPrev).replace(/%dir%/gi,"left")).addClass(a),n=u.arrowRight=d(e.replace(/%title%/gi,r.tNext).replace(/%dir%/gi,"right")).addClass(a);t.click(function(){u.prev()}),n.click(function(){u.next()}),u.container.append(t.add(n))}}),b("Change"+e,function(){u._preloadTimeout&&clearTimeout(u._preloadTimeout),u._preloadTimeout=setTimeout(function(){u.preloadNearbyImages(),u._preloadTimeout=null},16)}),b(l+e,function(){p.off(e),u.wrap.off("click"+e),u.arrowRight=u.arrowLeft=null})},next:function(){u.direction=!0,u.index=D(u.index+1),u.updateItemHTML()},prev:function(){u.direction=!1,u.index=D(u.index-1),u.updateItemHTML()},goTo:function(e){u.direction=e>=u.index,u.index=e,u.updateItemHTML()},preloadNearbyImages:function(){var e,t=u.st.gallery.preload,n=Math.min(t[0],u.items.length),o=Math.min(t[1],u.items.length);for(e=1;e<=(u.direction?o:n);e++)u._preloadItem(u.index+e);for(e=1;e<=(u.direction?n:o);e++)u._preloadItem(u.index-e)},_preloadItem:function(e){if(e=D(e),!u.items[e].preloaded){var t=u.items[e];t.parsed||(t=u.parseEl(e)),w("LazyLoad",t),"image"===t.type&&(t.img=d('<img class="mfp-img" />').on("load.mfploader",function(){t.hasSize=!0}).on("error.mfploader",function(){t.hasSize=!0,t.loadError=!0,w("LazyLoadError",t)}).attr("src",t.src)),t.preloaded=!0}}}});var U="retina";d.magnificPopup.registerModule(U,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(1<window.devicePixelRatio){var n=u.st.retina,o=n.ratio;1<(o=isNaN(o)?o():o)&&(b("ImageHasSize."+U,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/o,width:"100%"})}),b("ElementParse."+U,function(e,t){t.src=n.replaceSrc(t,o)}))}}}}),r()}),{clippyURL:"https://clippy.observador.pt/api/token/{{clippyToken}}/check?hash={{hash}}&uri={{uri}}",init:function(){var e=this;document.addEventListener("obsLoad",function(){e.checkArticle()})},makeURL:function(){var e={clippyToken:"",hash:this.makeHash(),uri:window.location.href.split("?")[0]};if(e.uri.indexOf("v2dev.")&&(e.uri=e.uri.replace("v2dev.","")),"URLSearchParams"in window){var t=new URLSearchParams(window.location.search.replace("?",""));e.clippyToken=t.get("clippy")}else{var n=window.location.search.replace("?","").split("&"),o={};n.forEach(function(e){e=e.split("="),o[e[0]]=e[1]||""}),e.clippyToken=o.clippy}var i=this.clippyURL;for(var r in e)i=i.replace("{{"+r+"}}",e[r]);return i},makeHash:function(){if(localStorage.getItem("c_hash"))return localStorage.getItem("c_hash");var e=btoa((new Date).getTime());return localStorage.setItem("c_hash",e),e},checkArticle:function(){if("post"===contextualData.type&&!0===contextualData.post.premium&&0<window.location.search.indexOf("clippy")){var e=this.makeURL();$.get(e,function(e,t,n){200==n.status&&showText()})}}}.init(),function(e){var t=document.createElement("script");t.type="text/javascript",t.src="//api.tinypass.com/api/tinypass.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}(),tp=window.tp||[],function(){var c={useSandbox:window.tploaded=!1,pianoWindow:!1,useDebug:!1,isInitiated:!1,dynamicExperiencesIds:[],calledInit:!1,numberOfTimesCalled:0,settings:{pianoAid:"zK27EIf8Uk",sefUrl:"https://porteiro.observador.pt/v1/piano/sef/token"},calledFor:!1,calledForLanding:{called:!1,termId:"",offerId:""},handlers:{runDynamicExperiences:function(e){0<c.dynamicExperiencesIds.length&&(c.dynamicExperiencesIds.forEach(function(e){tp.experience.execute(e)}),c.dynamicExperiencesIds=[],e&&obsEventListener("obsOnPianoPremiumProcess",e))},triggerOwnModal:function(e,t){$.magnificPopup.open({items:{src:'<div class="obs-generic-popup feature-blocker-popup">                    <a class="mfp-close">                        <svg><use xlink:href="#obs-icon-closex"></use></svg>                    </a>                    <div id="'+e+'">                        <div class="global-spinner"><span class="spinner"></span></div>                    </div>                </div>',type:"inline"},preloader:!1,callbacks:{open:function(){tp.experience.execute(t)}}})},log:function(){c.useDebug&&console.trace("[TP]",Array.prototype.slice.call(arguments).join(","))},setWorkingHourCookie:function(){var e=new Date,t=e.getDay(),n=e.getDate(),o=!1,i=!1;if(12===e.getMonth()&&1===e.getMonth()&&(25!==n&&1!==n||(o=!0),24!==t&&31!==t||(i=!0)),"1"!==c.handlers.getCookie("_pc_schedule")&&0!==t&&6!==t&&!o){var r=new Date;r.setHours(10),r.setMinutes(0),r.setSeconds(0);var a=new Date;if(i?a.setHours(14):a.setHours(20),a.setMinutes(0),a.setSeconds(0),r<=e&&e<a){var s=a.getTime()-e.getTime();e.setTime(e.getTime()+s);var l="; expires="+e.toUTCString();document.cookie="_pc_schedule=1"+l+"; path=/"}}},initPiano:function(e,t){if(e){var n=!1;if(c.calledFor){n=JSON.parse(tp.util.findCookieByName("__pianoParams"));c.calledFor=!1}c.handlers.log("initPiano. UserRefToken",e,"calledFor",c.calledFor),c.handlers.loginPiano(e,n).then(function(){t()})}else c.handlers.log("initPiano didn't run because no userRefToken was passed in",e),c.handlers.loginPiano("","").then(function(){t()})},showOfferForLanding:function(e,t){""!=c.calledForLanding.offerId&&""!=c.calledForLanding.termId&&(c.handlers.log("showOfferForLanding",e,t),tp.offer.show({displayMode:"modal",offerId:t,termId:e,isCheckout:!0}),c.calledForLanding.called=!1,c.calledForLanding.termId="",c.calledForLanding.offerId="")},checkLogin:function(e,t){AdamastorProxy.getInstance().isLoggedIn()?(c.calledForLanding.called=!0,c.calledForLanding.termId=e,c.calledForLanding.offerId=t,c.handlers.showOfferForLanding(e,t)):(showSubscriptionViaURLLogin(e),c.calledForLanding.called=!0,c.calledForLanding.termId=e,c.calledForLanding.offerId=t,c.handlers.log("showSubscriptionViaURLLogin",e,t))},setCookie:function(e,t,n){var o="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"},getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null},hideText:function(){if("post"in contextualData){if(!0===document.querySelector("article").shown||"premium"in contextualData&&!1===contextualData.premium)return void c.handlers.log("this article was showed manually. Dont hide the text || this article not a premium article");$(".premium-paywall").show(),$(".article-body-wrapper").css({maxHeight:"200px",overflow:"hidden"}),document.body.classList.remove("article-shown"),c.handlers.log("hideText")}},showText:function(){"post"in contextualData&&contextualData.post.premium&&(document.body.classList.add("article-shown"),document.querySelector("article").shown=!0,document.querySelector(".article-body-wrapper").style.maxHeight="",document.querySelector(".article-body-wrapper").style.overflow="",document.querySelector(".premium-paywall").style.display="none",c.handlers.log("showText"))},getUserRef:function(e,t){if(c.useSandbox)c.settings={pianoAid:"ozfLi3vc6k",sefUrl:"https://porteiro.observador.pt/v1/piano/sef/token-staging"},c.handlers.getUserRefPorteiro(e,t);else{var n=AdamastorProxy.getInstance();if(n.isLoggedIn())e(n.getSessionProfile().piano_ref_token);else t()}},getUserRefPorteiro:function(t,e){var n=new XMLHttpRequest;n.open("GET",c.settings.sefUrl,!0);var o=AdamastorProxy.getInstance().getToken();o&&n.setRequestHeader("Authorization","Bearer "+o),n.onreadystatechange=function(){if(4===n.readyState)if(200<=n.status&&n.status<400){var e="";try{e=JSON.parse(n.responseText).user_ref_token,t(e)}catch(e){}}else fCallback(n,n.statusText)},n.send(null)},loginPiano:function(n,o){var e=c;return $.Deferred(function(t){e.handlers.log("loginPiano",n,o),tp.api.callApi("/anon/user/get",{aid:c.settings.pianoAid,user_ref:n},function(e){tp.push(["setUserRef",n]),obsEventEmitter("onPianoLogin"),o&&tp.offer.startCheckout(o),c.calledForLanding.called&&AdamastorProxy.getInstance().isLoggedIn()&&c.handlers.showOfferForLanding(c.calledForLanding.termId,c.calledForLanding.offerId),t.resolve()})}).promise()}},events:{onPianoReady:function(e){var t=function(){document.removeEventListener("onTpLoaded",t),e()};c.handlers.log("onPianoReady"),document.addEventListener("onTpLoaded",t)},onExperienceExecute:function(e){c.handlers.log("onExperienceExecute"),e.result.experiences.forEach(function(e){0<=e.title.indexOf("[dynamic]")&&-1===c.dynamicExperiencesIds.indexOf(e.id)&&c.dynamicExperiencesIds.push(e.id)}),tp.api.callApi("/access/list",{},function(e){c.handlers.log("checked for accessses");for(var t=!1,n=document.querySelector("body"),o=0;o!=e.data.length;o++)if(1==e.data[o].granted){t=!0;break}if(t){if(localStorage.setItem("PREMIUM_USER","true"),n.classList.add("premium-user"),obsEventEmitter("obsOnPianoPremiumProcess"),n.classList.remove("free-user"),localStorage.removeItem("u"),0!==e.code)return;if(0===e.count)return;n.classList.add("premium-user-manager"),showText()}else localStorage.removeItem("PREMIUM_USER"),n.classList.remove("premium-user","premium-user-manager"),obsEventEmitter("obsOnPianoPremiumProcess"),n.classList.add("free-user"),localStorage.setItem("u","free");document.getElementById("piano-liveblog-cta")&&0==document.getElementById("piano-liveblog-cta").childNodes.length&&(document.getElementsByClassName("liveblog-premium-cta")[0].style.display="none")})},onCheckoutComplete:function(e){showText()},onCheckoutExternalEvent:function(){},onCheckoutClose:function(e){},onCheckoutCancel:function(){},onCheckoutError:function(){},onMeterExpired:function(){},onMeterActive:function(e){},onInlineOfferClose:function(){var e=document.getElementById("piano-container");e&&(e.style.display="none")},onExperienceExecutionFailed:function(e){},onLoginRequired:function(e){return document.cookie="__pianoParams="+JSON.stringify(e),!1},onLoginSuccess:function(){},onMessage:function(t){if(("https://buy.tinypass.com"===t.origin||"https://sandbox.tinypass.com"===t.origin)&&t.data.command)switch(t.data.command){case"setSwgOffers":var n=t.source;obs_swg.getSKUS(n).then(function(e){n.postMessage({SWGsubscribedOffers:e},t.origin)}).catch(function(e){});break;case"getUserPaymentData":AdamastorProxy.getInstance().getProfile(function(e){t.source.postMessage({command:"getUserPaymentDataRtn",payload:e},t.origin)},function(e){});break;case"getColorScheme":c.pianoWindow=t.source,t.source.postMessage({command:"setColorScheme",payload:{color_scheme:window.obs.colorScheme.currentColorScheme()}},t.origin);break;case"setUserPaymentData":t.data.payload.id=AdamastorProxy.getInstance().getSessionProfile().sub,AdamastorProxy.getInstance().updateProfile(t.data.payload,function(e){t.source.postMessage({command:"setUserPaymentDataRtn",payload:!0},t.origin)},function(e){t.source.postMessage({command:"setUserPaymentDataRtn",payload:!1},t.origin)})}},onPianoCustomEvents:function(e){switch(e.eventName){case"customLogin":showLogin();break;case"customRegister":showLocalLogin();break;case"swg":var t=e.params.params;obs_swg.showOffers(t);break;case"sendPrice":var n=!1;try{n=JSON.parse(e.params.params).termId}catch(e){}var o="especial"===e.params.params;if(!AdamastorProxy.getInstance().isLoggedIn())if(c.calledFor=!0,tp.offer.close(),o)showSubscriptionLogin("Premium Especial","3 anos","250€");else"1 semestral"===(i=JSON.parse(e.params.params)).billingPlanTable[0].billingPeriod&&(i.billingPlanTable[0].billingPeriod="6 meses"),"TMJLDHS7GVTF"==n?showSubscriptionViaURLLogin("TMJLDHS7GVTF"):showSubscriptionLogin("Premium "+i.resource.name,i.billingPlanTable[0].billingPeriod,i.chargeDisplayAmount);break;case"fnack-voucher":if(!AdamastorProxy.getInstance().isLoggedIn()){c.calledFor=!0,tp.offer.close();var i=JSON.parse(e.params.params);showSubscriptionLogin("Premium "+i.resource.name,i.billingPlanTable[0].billingPeriod,"0,00")}break;case"createCookie":null==c.handlers.getCookie("_pc_show")&&c.handlers.setCookie("_pc_show",1,1)}}},initLogged:function(e){var t=this;t.handlers.log("initLogged"),t.handlers.getUserRef(function(e){t.handlers.initPiano(e,function(){t.handlers.log("initLogged"),t.checkPage()})},function(e){t.handlers.log("Error getting token")})},initUnloged:function(e){var t=this;t.handlers.initPiano("",function(){t.checkPage()})},checkPage:function(){var e=[];if(tp.push(["setCustomVariable","color_scheme",window.obs.colorScheme.currentColorScheme()]),-1<window.location.search.indexOf("promoCode")){var t=getSearchParams().promoCode;tp.push(["setCustomVariable","promo_code",t])}if(-1<window.location.search.indexOf("promoCode")){var n=Math.floor(Date.now()/864e5),o=localStorage.getItem("obs.history.weeklyArticleCount");""!=o&&null!=(o=JSON.parse(o))[n]&&tp.push(["setCustomVariable","weekly_count",o[n]])}"page"!=contextualData.type&&"post"!=contextualData.type||(contextualData.post&&!0===contextualData.post.premium&&e.push("premium"),contextualData.bodyClasses.match("liveblog")&&e.push("liveblog"),tp.push(["setTags",e]),"post"==contextualData.type&&(tp.push(["setContentSection",contextualData.section]),tp.push(["setContentCreated",contextualData.post.createdAt]),tp.push(["setContentAuthor",contextualData.post.contentAuthor]))),c.runExperience()},runExperience:function(){0==c.calledInit?(c.handlers.log("calling tp.experience.init()"),tp.experience.init(),c.calledInit=!0,window.tploaded=!0,obsEventEmitter("onTpLoaded")):(c.handlers.log("calling tp.experience.execute()"),tp.experience.execute())},init:function(){var t=this;function e(){AdamastorProxy.getInstance().isLoggedIn()?t.initLogged.call(t):(c.checkPage(),obsEventEmitter("onPianoLogin"),c.calledForLanding.called&&AdamastorProxy.getInstance().isLoggedIn()&&c.handlers.showOfferForLanding(c.calledForLanding.termId,c.calledForLanding.offerId))}1!=t.isInitiated?(t.useDebug=t.useDebug||"true"===localStorage.getItem("debug-piano"),t.handlers.setWorkingHourCookie(),t.isInitiated=!0,(window.obs=window.obs||{}).tp={triggerOwnModal:t.handlers.triggerOwnModal,runDynamicExperiences:t.handlers.runDynamicExperiences},window.showText=t.handlers.showText,window.hideText=t.handlers.hideText,window.checkLogin=t.handlers.checkLogin,window.getUserRef=t.handlers.getUserRef,window.loginPiano=t.handlers.loginPiano,window.onTpLoaded=t.events.onPianoReady,window.callPianoExperience=t.handlers.executePianoExperience,tp.push(["setUseTinypassAccounts",!1]),tp.push(["setUsePianoIdUserProvider",!1]),tp.push(["addHandler","checkoutComplete",t.events.onCheckoutComplete]),tp.push(["addHandler","checkoutClose",t.events.onCheckoutClose]),tp.push(["addHandler","checkoutCustomEvent",t.events.onCheckoutExternalEvent]),tp.push(["addHandler","checkoutCancel",t.events.onCheckoutCancel]),tp.push(["addHandler","checkoutError",t.events.onCheckoutError]),tp.push(["addHandler","loginRequired",t.events.onLoginRequired]),tp.push(["addHandler","customEvent",t.events.onPianoCustomEvents]),tp.push(["addHandler","meterExpired",t.events.onMeterExpired]),tp.push(["addHandler","meterActive",t.events.onMeterActive]),tp.push(["addHandler","experienceExecute",t.events.onExperienceExecute]),tp.push(["addHandler","experienceExecutionFailed",t.events.onExperienceExecutionFailed]),tp.push(["addHandler","close",t.events.onInlineOfferClose]),document.addEventListener("obsColorSchemeChange",function(){c.pianoWindow&&c.pianoWindow.postMessage({command:"setColorScheme",payload:{color_scheme:window.obs.colorScheme.currentColorScheme()}},"*")}),t.useSandbox&&(t.settings={pianoAid:"ozfLi3vc6k",sefUrl:"https://porteiro.observador.pt/v1/piano/sef/token-staging"},tp.push(["setSandbox",!0])),tp.push(["setAid",t.settings.pianoAid]),tp.push(["init",function(){t.useDebug,tp.enableGACrossDomainLinking(),tp.setDontScrollTopModal(!0),document.addEventListener("obsLoad",function(){obs.router&&!obs.router.first_paint&&(tp.scrollDepth.clearMaxScrolledPosition(),t.checkPage.call(t,!0)),document.addEventListener("obsLogin",function(e){t.initLogged.call(t)},!1),document.addEventListener("obsLogout",function(e){t.initUnloged.call(t)},!1)}),obsEventListener("obsLoad",function(){AdamastorProxy.getInstance().isReady()?e():obsEventListener("obsUserStateChange",e),"true"===localStorage.getItem("PREMIUM_USER")&&t.handlers.setCookie("_pc_show",1,1)})}]),window.addEventListener("message",t.events.onMessage,!1)):t.handlers.log("Piano was already called")}};c.settings;c.init()}(),function(){var l=AdamastorProxy.getInstance(),a=(localStorage.getItem("PREMIUM_USER")&&localStorage.getItem("PREMIUM_USER"),{pianoConnection:null,cookie_name:"ignore_swg",popup_templates:{subscriptionLink:"/wp-content/themes/observador-child/assets/build/html/swg/obs-swg-subscriptionLink/obs-swg-subscriptionLink.html",subscriptionRegistered:"/wp-content/themes/observador-child/assets/build/html/swg/obs-swg-subscriptionLink/obs-swg-subscriptionLink.html",accountToRegisterSubscription:"/wp-content/themes/observador-child/assets/build/html/swg/obs-swg-subscriptionLink/obs-swg-subscriptionLink.html",noPremiumSubscription:"/wp-content/themes/observador-child/assets/build/html/swg/obs-swg-noPremiumSubscription/obs-swg-noPremiumSubscription.html",swgTryAgain:"/wp-content/themes/observador-child/assets/build/html/swg/obs-swg-swgTryAgain/obs-swg-swgTryAgain.html",userHasSWG:"/wp-content/themes/observador-child/assets/build/html/swg/obs-swg-noPremiumSubscription/obs-swg-noPremiumSubscription.html",errorWhileSaving:"/wp-content/themes/observador-child/assets/build/html/swg/obs-swg-swgTryAgain/obs-swg-swgTryAgain.html"},localStorageKey:"swg:e",swgData:{enable:!0,exp:0},skuKey:"swg:sku",sku:"test_monthly_subscription",debug:{visualDebug:0<=window.location.search.indexOf("swgDebug=true"),enabled:"true"==localStorage.getItem("debug-swg"),responseCode:!1,setResponseCode:function(e){a.debug.responseCode=e}},porteiro_url:"https://porteiro.observador.pt/",entitlements:""}),c={_:{user_id:"",entiltements:a.porteiro_url+"v1/google/entitlements",entitlementsCheck:a.porteiro_url+"v1/google/entitlements/check",user:a.porteiro_url+"v1/api/users/{{user-id}}/plan"},get entitlements(){return this._.entiltements},get userPlans(){return""!=this._.user_id&&this._.user.replace("{{user-id}}",this._.user_id)},get user(){return this._.user_id},set user(e){this._.user_id=e},get entitlementsCheck(){return this._.entitlementsCheck}};function d(e){(a.debug.enabled||a.debug.visualDebug)&&(document.getElementById("debugSwg")&&document.getElementById("debugSwg").insertAdjacentHTML("beforeend","<p style='margin-bottom:0px;color:#00ff00;word-wrap:anywhere; font-weight:800; font-size:15px;display:block;'>"+e+"</p>"),console.log("%c"+e,"width:100%;height:40px;background: black; font-family:monospace; color:black;font-weight:bold;color:white;padding:4px;"))}function s(){d("[113] Set new SWG Item");var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0,0);a.swgData.exp=t.getTime(),localStorage.setItem(a.localStorageKey,JSON.stringify(a.swgData))}function i(t){var e=a.popup_templates[t];$.get(e,function(e){$("body").append(e),$.magnificPopup.open({items:{src:$("#obs-adamastor-template-"+t)},type:"inline",closeOnBgClick:!0,closeOnContentClick:!1})})}var u={flows:{deferredAccountCreation:function(n,o){return d("[171] Running the 'Deferred Account Creation' flow"),new Promise(function(e,t){n.completeDeferredAccountCreation({entitlements:o,consent:!0}).then(function(e){var t=e;u.flows.postPurchaseAccountCreation(t,t.entitlements.entitlements,function(){})}).catch(function(e){a.debug.enabled&&console.trace(e),e.message.contains('"No entitlements with "google"')?console.log(e.message):i("subscriptionLink")}).finally(function(){e()})})},saveSubscription:function(t){u.lookupSubscription(function(e){"google"!=e.plan.provider?(console.log("[213] trying to remove event listener"),document.removeEventListener("obsLogin",function(){u.flows.saveSubscription(t)}),sessionStorage.getItem("already_subscribed")&&(d("[221] user logged in; Saving subscription"),d("[225] Saving Subscription. This is the 'Link Flow'"),t.saveSubscription(function(){return{token:l.getToken()}}).catch(function(e){d(e),a.debug.enabled&&console.trace(e),sessionStorage.removeItem("already_subscribed")}).then(function(e){e?d("[266] Subscription Saved"):gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"439313482366-dvdj8tsff9tpi5csb410roen1r9g3m5q.apps.googleusercontent.com",cookiepolicy:"single_host_origin"}),auth2.then(function(){auth2.isSignedIn.get()?d("[255] user cancelled save sub flow"):(d("[249] user signed in: "+auth2.isSignedIn.get()),i("errorWhileSaving"),d("[251] user is not logged on google"))},function(e){a.debug.enabled&&console.trace(e)})}),sessionStorage.removeItem("already_subscribed")},function(e){console.debug("254",e)}))):i("userHasSWG")},function(e){i(400<=e&&e<=499?"noPremiumSubscription":"swgTryAgain"),sessionStorage.removeItem("already_subscribed")})},loginFlow:function(e,t,n){d("[288] Running 'Login Flow'"),d("[289] Auto-Logging Account"),l.googleLogin(void 0,function(){u.public.getSKUS().then(function(e){a.pianoConnection&&a.pianoConnection.postMessage({SWGsubscribedOffers:e},"https://buy.tinypass.com")}).catch(function(e){a.debug.enabled&&console.trace(e)})},function(){},n),e.showLoginNotification().then(function(){u.unlockArticle()})},buyFlow:function(){},postPurchaseAccountCreation:function(o,i,r){d("[321] Running the 'Post-Purchase Account Creation Flow'"),d("[322] Creating/Logging an account"),l.googleLogin(o.userData.idToken,function(){d("[328] Google Account Created. Creating/Loggin piano"),getUserRef(function(e){loginPiano(e),document.addEventListener("onPianoLogin",function(){u.registerSubscription("PUT",i,function(){d("[334] Settings SKUS from the purchase");for(var e=0;e<=i.length-1;e++){var t=i[e];try{var n=JSON.parse(t.subscriptionToken);u.public.purchasedSKUs.push(n.productId)}catch(e){a.debug.enabled&&console.trace(e),d("[346] This is not a a google entitlment. This is a saved subscription")}}s(),d("[351] Subscription registered"),o.complete().then(function(){u.public.getSKUS().then(function(e){a.pianoConnection&&a.pianoConnection.postMessage({SWGsubscribedOffers:e},"https://buy.tinypass.com")}).catch(function(e){a.debug.enabled&&console.trace(e)}),u.unlockArticle(),r&&r()})},function(e){a.debug.enabled&&console.trace(e)})})},function(){console.log("[377] Error getting SEF token")})},function(){a.debug.enabled&&console.trace(err)})}},cookie:{readSWGCookie:function(){var e=document.cookie;e=e.split("; ");var n={};return e.forEach(function(e,t){n[e.split("=")[0]]=e.split("=")[1]}),n[a.cookie_name]||""},writeSWGCookie:function(e){if("boolean"!=typeof e)new Error("The value must be a boolean");else{var t=600,n=new Date(Date.now()+1e3*t).toUTCString();!1===e&&(t=-1,n="01 Jan 1970 00:00:01 GMT");var o="";o=(o=o+"ignore_swg="+e+";")+"expires = "+n+";",o+="path = /",d("[420] Writing cookie"),document.cookie=o}}},on:{loginRequest:function(t){t.setOnLoginRequest(function(e){document.querySelector("swg-popup-background").style.zIndex=1,document.querySelector(".swg-dialog").style.zIndex=1e3,sessionStorage.setItem("already_subscribed","true"),0==l.isLoggedIn()?(showLogin(),d("[437] User is not logged in, logging user"),document.addEventListener("obsLogin",function(){u.flows.saveSubscription(t)})):(d("[442] User is  logged in,saving subscription"),u.flows.saveSubscription(t))})},paymentResponse:function(e){e.setOnPaymentResponse(function(e){d("[451] Running the 'Buy Flow'"),e.then(function(e){u.flows.postPurchaseAccountCreation(e,e.entitlements.entitlements)})})}},unlockArticle:function(){if(d("Unlocking article"),tp.containerUtils.closeContainer(),contextualData.post.premium)try{showText()}catch(e){a.debug.enabled&&console.trace(e)}},registerSubscription:function(e,t,n,o){d("[478] Registering (PUT) a subscription with Porteiro ("+c.entitlements+")...");var i=JSON.stringify(t),r=l.getToken(),a=c.entitlements,s=new XMLHttpRequest;s.open("PUT",a),s.setRequestHeader("Authorization","Bearer "+r),s.setRequestHeader("Content-type","application/json"),s.onload=function(){d("[491] Registered subscription with porteiro. PUT "+c.entitlements),200<=s.status&&s.status<=399?n&&n(!0):(d("[495] Cannot register a subscription. Error: "+s.status+" "+JSON.stringify(s.response||"no response")),o&&o())},s.onerror=function(){d("[Line 501] Cannot register a subscription"),o&&o()},s.send(i)},lookupSubscription:function(e,t){d("[515] Checking user plans info from user. GET "+c.userPlans);var n=l.getToken();c.user=jwt_decode(n).sub;var o=new XMLHttpRequest;o.open("GET",c.userPlans),o.setRequestHeader("Authorization","Bearer "+n),o.onload=function(){200<=o.status&&o.status<=399?e&&e(JSON.parse(o.response)):(d("[530] Cannot check plans. Error: "+o.status+" "+JSON.stringify(o.response||"no response")),t&&t(o.status))},o.onerror=function(){d("[535] request gone wrong"),t&&t()},o.send()},lookupPurchaseToken:function(e,t,n){var o=JSON.stringify(e);d("[544] POSTing entitlements to Porteiro  ("+c.entitlementsCheck+") ");var i=new XMLHttpRequest;i.open("POST",c.entitlementsCheck),i.setRequestHeader("Content-type","application/json"),i.onload=function(){200<=i.status&&i.status<=399?t&&t(i.response):(d("[530] Cannot check entitlements. Error:"+i.status+" "+JSON.stringify(i.response||"no response")),n&&n(i.status))},i.onerror=function(){d("[562] request gone wrong"),n&&n()},i.send(o)},public:{purchasedSKUs:[],saveSubscription:function(){(window.SWG=window.SWG||[]).push(function(e){sessionStorage.setItem("already_subscribed","true"),0==l.isLoggedIn()?(showLogin(),d("[581] User is not logged in, logging user"),document.addEventListener("obsLogin",function(){u.flows.saveSubscription(e)})):(d("[581] User is  logged in,saving subscription"),u.flows.saveSubscription(e))})},checkEntitlementsLogin:function(){(window.SWG=window.SWG||[]).push(function(n){n.getEntitlements().then(function(t){d("[594] Getting entitlements (on login)"),t.enablesAny()?(d("[667] Entitlements enable premium on OBS"),u.lookupPurchaseToken(t.entitlements,function(e){},function(e){e<400||499<e?d("[671] Não foi possivel verificar se tem alguma subscrição por associar"):u.flows.deferredAccountCreation(n,t)})):d("[677] Entitlements don't enable premium on OBS")})})},getSKUS:function(e){return d("[683] get skus"),e&&(a.pianoConnection=e),new Promise(function(i,e){sessionStorage.getItem(a.skuKey)?(d("[693] Getting the SKUS from storage"),u.public.purchasedSKUs=JSON.parse(sessionStorage.getItem(a.skuKey)),i(u.public.purchasedSKUs)):(window.SWG=window.SWG||[]).push(function(e){e.getEntitlements().then(function(e){if(e.enablesAny()){d("[703] Found Entitlements. Getting the SKUS");for(var t=0;t<=e.entitlements.length-1;t++){var n=e.entitlements[t];try{var o=JSON.parse(n.subscriptionToken);u.public.purchasedSKUs.push(o.productId)}catch(e){a.debug.enabled&&console.trace(e),d("[715] This is not a a google entitlement. This is a saved subscription")}}sessionStorage.setItem(a.skuKey,JSON.stringify(u.public.purchasedSKUs)),i(u.public.purchasedSKUs)}else i([])})})})},showOffers:function(t){(window.SWG=window.SWG||[]).push(function(e){t?e.subscribe(t):e.showOffers({skus:["04_swg_premium.mensal_6.6","02_swg_premium.anual.base"],isClosable:!0})})},userClickYes:function(){window.subscriptions.getEntitlements().then(function(e){window.subscriptions=null,u.registerSubscription("PUT",e.entitlements,function(){d("Subscription registered"),i("subscriptionRegistered")},function(e){console.log(e)})}).finally(function(){})},userClickNo:function(){i("subscriptionLink")}}};function t(){a.debug.visualDebug&&document.querySelector("#main-header").insertAdjacentHTML("afterend",'<div id="debugSwg" style="resize:vertical;min-height:200px; padding:10px;font-family:monospace;color:green; user-select:all;overflow:scroll;bottom: 0px;left: 0px;height: 200px;width: 100vw;background-color: black;z-index: 9999999;"></div>'),(window.SWG=window.SWG||[]).push(function(t){d("[804] Set callbacks"),u.on.loginRequest(t),u.on.paymentResponse(t),d("[842] Waiting for google to give me some entitlements"),"post"in contextualData&&t.getEntitlements().then(function(r){(u.public.linkAccount=t.linkAccount,r.isReadyToPay&&function(e,t,n){var o="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}("_pc_google_readytopay","true","1"),d("[857] Got the entitlments from my fellow Google."),d("[862] Google gave me this: "+JSON.stringify(r)),d("[863] Can user access premium? "+r.enablesAny()),r.enablesAny())?(d("[872] Entitlements enable access. Running the 'Entitlements Flow'"),u.unlockArticle(),new Promise(function(i,e){d("[880] (waitForSubscriptionLookup) Since the entitlement allows access, i need to ask to Porteiro if we know this token"),u.lookupPurchaseToken(r.entitlements,function(e){d("[886] Porteiro know this subscription"),d("[886] Collecting the SKUS");for(var t=0;t<=r.entitlements.length-1;t++){var n=r.entitlements[t];try{var o=JSON.parse(n.subscriptionToken);u.public.purchasedSKUs.push(o.productId)}catch(e){a.debug.enabled&&console.trace(e),d("[901] This is not a a google entitlment. This is a saved subscription")}}sessionStorage.setItem(a.skuKey,JSON.stringify(u.public.purchasedSKUs)),i(e)},function(e){d("[909] Porteiro don't know this subscription"),i(!1)})}).then(function(e){e?(d("[919] User has a valid google subscription, and observador knows that subscription"),s(),document.getElementById("swg-offers")&&document.getElementById("swg-offers").parentElement.removeChild(document.getElementById("swg-offers")),l.isLoggedIn()||u.flows.loginFlow(t,e.entitlements,e)):(d("[962] Account not found."),u.flows.deferredAccountCreation(t,r))}),r.ack()):(localStorage.removeItem(a.localStorageKey),d("[972] Entilement does not provide access or user is not logged in. Show offers instead"))})})}(window.SWG=window.SWG||[]).push(function(e){e.init("observador.pt:premium")}),window.addEventListener("obsLogout",function(){tp.push(["setUserRef",""]),localStorage.removeItem(a.localStorageKey),sessionStorage.removeItem(a.skuKey)}),window.addEventListener("obsLogin",function(){obs_swg.checkEntitlementsLogin(),window.setTimeout(function(){u.public.getSKUS().then(function(e){a.pianoConnection&&a.pianoConnection.postMessage({SWGsubscribedOffers:e},"https://buy.tinypass.com")}).catch(function(e){a.debug.enabled&&console.trace(e)})},1e3)}),document.addEventListener("obsLoad",function(){if(!document.getElementById("swg-script")){var e=document.createElement("script");e.id="swg-script",e.src="https://news.google.com/swg/js/v1/swg.js?ver=asdasdas",e.async=!0,e.defer=!0,e.setAttribute("subscriptions-control","manual"),document.querySelector("footer").appendChild(e)}t()}),window.obs_swg=u.public,a.debug.enabled}(),function(u){u.fn.tinkerbell=function(e){var s=this;s.subscriptions=[],s.errors={UNAUTHENTICATED:0,NO_SUBSCRIPTION:1,ERROR:2,NO_NOTIFICATIONS:3},s.haveMoreNotifications=!0;var a=function(e,t){ga("send",{hitType:"event",eventCategory:"alerts-"+e,eventAction:t})},l=function(e,t,n,o,i){var r=null;null==n&&null==n||(r=JSON.stringify(n));var a=new XMLHttpRequest;a.open(t,e,!0);var s=AdamastorProxy.getInstance().getToken();a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("Authorization","Bearer "+s),a.onreadystatechange=function(){if(4==a.readyState)if(200<=a.status&&a.status<400){if(a.responseText)var e="";try{e=JSON.parse(a.responseText)}catch(e){}o(e,a.statusText,a)}else i(a,a.statusText)},a.send(r)},t=function(e){var o=!0===e,t=s.urlByUser+"?l=10&o="+s.manyIShow;c(!0),l(t,"GET",null,function(e,t,n){c(!1),0==e.data.length?r(s.errors.NO_NOTIFICATIONS,n):i(e,o)},function(e,t,n){c(!1),r(s.errors.ERROR,e)})},n=function(){if(0==s.nUnread)return u(s.sininhoCount).hide(),void u(s.sininhoCount).removeClass("active");u(s.sininhoCount).children("span").html(s.nUnread),u(s.sininhoCount).css("display","block"),u(s.sininhoCount).addClass("active")},o=function(){s.resultsList.children().each(function(e,t){u(t).removeClass("unread")})},i=function(e,a){u(e.data).each(function(e,t){s.manyIShow++;var n=t.image.replace(/{{width}}/i,"200");n=n.replace(/{{quality}}/i,"80");var o=function(e){Date.now||(Date.now=function(){return(new Date).getTime()});Math.floor(1e3*e);var t=new Date(1e3*e),n=("0"+t.getDate()).slice(-2)+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+t.getFullYear()+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2),o=Math.floor(Date.now()/1e3)-e;if(o<=480)return{relative:"Agora",formated:n};if(o<=2700)return{relative:"Há "+Math.floor(o/60)+"m",formated:n};if(o<=21600){var i=Math.floor(o/3600);return{relative:"Há "+(i=0==i?1:i)+"h",formated:n}}var r=new Date;return r.getFullYear()==t.getFullYear()&&r.getMonth()==t.getMonth()&&r.getDate()==t.getDate()?{relative:"Hoje",formated:n}:r.getFullYear()==t.getFullYear()&&r.getMonth()==t.getMonth()&&r.getDate()-1==t.getDate()?{relative:"Ontem",formated:n}:(sixMonth=new Date,sixMonth.setMonth(sixMonth.getMonth()-6),e>=sixMonth.getTime()/1e3?{relative:t.getDate()+"&nbsp;de&nbsp;"+["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"][t.getMonth()],formated:n}:{relative:n,formated:n})}(t.timestamp),i="";"NEW"==t.status&&(i="unread");var r=parseTemplate(document.getElementById("template-sininho-notification").innerHTML,{element:t,img:n,placeHolderDate:o.formated,relativeTime:o.relative,statusClass:i});a?s.resultsList.prepend(r):s.resultsList.append(r)}),s.nUnread=e.unviewedNotifications,n()},r=function(e,t){switch(s.resultsList.children(".notification_error").remove(),e){case s.errors.UNAUTHENTICATED:s.resultsList.append(parseTemplate(document.getElementById("template-sininho-notErrorAuth").innerHTML,{msg:"Para aceder a esta funcionalidade, por favor faça login."}));break;case s.errors.NO_SUBSCRIPTION:s.resultsList.append(parseTemplate(document.getElementById("template-sininho-notErrorSubs").innerHTML,{msg:"Siga algum autor, tópico ou programa, para ver os alertas."}));break;case s.errors.NO_NOTIFICATIONS:0<s.manyIShow?s.resultsList.append(parseTemplate(document.getElementById("template-sininho-notErrorInline").innerHTML,{msg:"Não tem mais alertas."})):s.resultsList.append(parseTemplate(document.getElementById("template-sininho-notErrorInline").innerHTML,{msg:"Ainda não tem alertas."})),u(s.resultsContainer).off("scroll"),s.haveMoreNotifications=!1;break;case s.errors.ERROR:s.haveMoreNotifications||s.resultsList.append(parseTemplate(document.getElementById("template-sininho-notErrorInline").innerHTML,{msg:"Não foi possível obter os seus alertas."}))}},c=function(e){e?s.loadingSpinner.show():s.loadingSpinner.hide()};s.checkSubscription=function(e,t){return void 0!==s.subscriptions[e]&&void 0!==s.subscriptions[e][t]};var d=function(){t(!1),u("#alert-read-all").click(function(e){var t;e.preventDefault(),t=s.urlByUser+"/read",l(t,"PUT",null,function(e){o()},function(e,t,n){console(e)}),a("sininho","mark-all-as-read")}),u(s.resultsContainer).delegate("a.link","click",function(e){var t,n,o=this.href,i=u(this).data("id"),r=u(this).data("postid");a("sininho-notification","open"),t="OPEN",n={objectType:"post",id:""+r,userId:AdamastorProxy.getInstance().getSessionProfile().sub,anonymous:!1,action:t,platform:"desktop",origin:"sininho"},RameiraProxy.getInstance().addEvent(n,function(){}),function(e,t,n){var o=s.urlByUser+"/read/"+e,i=n.shiftKey||n.ctrlKey||n.metaKey;function r(){i||(document.location.href=t)}i||n.preventDefault(),l(o,"PUT",null,function(e){setTimeout(r,200)},function(e,t,n){setTimeout(r,200)})}(i,o,e)}),u(s).children(".obs_drop_trigger").click(function(e){l(s.urlByUser+"/viewed","PUT",null,function(e){s.nUnread=0,n()},function(e,t,n){console.log(e)}),0<s.nUnread?a("sininho","open-with-unread-notifications"):a("sininho","open-without-unread-notifications")}),u(s.resultsContainer).on("scroll",function(){u(this).scrollTop()+u(this).innerHeight()>=u(this)[0].scrollHeight&&t(!1)})};return s.update=function(){ArdinaProxy.getInstance().getSubscriptions(s.settings.userId,function(e,t){d(),s.subscriptions=e,s.settings.onGetSubscriptions()},function(e,t,n){404===e.status?(r(s.errors.NO_SUBSCRIPTION),c(!1)):401===e.status&&(r(s.errors.UNAUTHENTICATED),c(!1)),s.settings.onGetSubscriptions()})},s.settings=u.extend({workerRestUrl:globalSettings.obsIps.workerRestUrl,workerSockUrl:globalSettings.obsIps.workerSockUrl,userId:"",onGetSubscriptions:u.noop.bind()},e),window.loader.loadHTML("alerts/alerts.templates.html","body",function(){s.header=u(s).find(".obs_drop_content .notifications-header"),s.resultsContainer=u(s).find(".obs_drop_content .notifications-results"),s.resultsList=u(s.resultsContainer).children("ul"),s.sininhoCount=u(s).find(".count_notifications"),s.nUnread=0,s.manyIShow=0,s.loadingSpinner=u(s.resultsContainer).children(".loading"),s.urlByUser=s.settings.workerRestUrl+"/notifications/user/"+s.settings.userId,0==s.settings.userId?(r(s.errors.UNAUTHENTICATED),s.settings.onGetSubscriptions(),c(!1)):ArdinaProxy.getInstance().getSubscriptions(s.settings.userId,function(e,t){d(),s.subscriptions=e,s.settings.onGetSubscriptions(),obsEventEmitter("tinkerbellReady")},function(e,t,n){404===e.status?(r(s.errors.NO_SUBSCRIPTION),c(!1)):401===e.status&&(r(s.errors.UNAUTHENTICATED),c(!1)),obsEventEmitter("tinkerbellReady"),s.settings.onGetSubscriptions()}),u(s).find(".obs_drop_content").mouseenter(function(){u("body").addClass("obs_drop_open")}).mouseleave(function(){u("body").removeClass("obs_drop_open")})}),s}}(jQuery);var ArdinaProxy=function(){var e;function t(){var o=globalSettings.obsIps.ardinaUrl+"v2/",t=globalSettings.obsIps.apiV3Url,i=function(e,t,n,o,i){var r=null;null==n&&null==n||(r=JSON.stringify(n));var a=new XMLHttpRequest;a.open(t,e,!0),a.setRequestHeader("Content-type","application/json");var s=AdamastorProxy.getInstance().getToken();a.setRequestHeader("Authorization","Bearer "+s),a.onreadystatechange=function(){if(4==a.readyState)if(200<=a.status&&a.status<400){if(a.responseText)var e="";try{e=JSON.parse(a.responseText)}catch(e){}o(e,a.statusText,a)}else i(a,a.statusText)},a.send(r)},s=function(e,t,n){i(o+e,"GET",null,t,n)},a=function(e,t,n){i(o+e,"DELETE",null,t,n)},l=function(e,t){console.log("error",e,t)},c=function(r,a,e){var n={};r.forEach(function(e){var t=e;void 0===n[t.context_name]?n[t.context_name]=[t.context_instance_id]:-1===n[t.context_name].indexOf(t.context_instance_id)&&n[t.context_name].push(t.context_instance_id)},this),i(t+"loadobject/bulk","POST",n,function(e){var n=e.author,o=e.topic,i=e.program;r.forEach(function(e){switch(e.context_name){case"author":for(var t=0;t<n.length;t++)e.context_instance_id==n[t].id&&(e.name=n[t].name,t=n.length+1);break;case"topic":for(t=0;t<o.length;t++)e.context_instance_id==o[t].id&&(e.name=o[t].name,t=o.length+1);break;case"program":for(t=0;t<i.length;t++)e.context_instance_id==i[t].id&&(e.name=i[t].title,t=i.length+1)}},this);var t=d(r);a(t)},e)},d=function(e){for(var t={},n=0;n<e.length;++n){var o=e[n];void 0===t[o.context_name]&&(t[o.context_name]={});var i=""+o.context_instance_id.toString();void 0===t[o.context_name][i]&&(t[o.context_name][i]=new Array),t[o.context_name][i].push(o)}return t};return{getSubscriptions:function(e,t,n){var o,i;o=t,s("subscriptions/user/"+e,function(e,t){c(e,o,i)},(i=n)||l)},getSubscriptionsByCategory:function(e,t,n,o){var i,r;i=n,s("subscriptions/user/"+e+"/"+t,function(e,t){c(e,i,r)},(r=o)||l)},update:function(e,t,n,o){console.log("implement update:",e,t)},deleteAllForUser:function(e,n,t){a("subscriptions/user/"+e,function(e,t){n(e,t)},t||l)},deleteAllForUserWhat:function(e,t,n,o){a("subscriptions/user/"+e+"/"+t,function(e,t){n(e,t)},o||l)},deleteAllForUserWhatId:function(e,t,n,o,i){a("subscriptions/user/"+e+"/"+t+"/"+n,function(e,t){o(e,t)},i||l)},subscribe:function(e,t,n,o,i){var r,a;r=o,s("subscriptions/user/"+e+"/subscribe/"+t+"/"+n+"/"+"desktop",function(e,t){c(e,r,a)},(a=i)||l)},unsubscribe:function(e,t,n,o,i){var r;r=o,a("subscriptions/user/"+e+"/subscribe/"+t+"/"+n,function(e,t){r(e,t)},i||l)}}}return{getInstance:function(){return e||(e=t()),e}}}();({bellPlugin:!1,$tinkerbell:!1,init:function(){var n=this;(window.ardinaManager=n).$tinkerbell=$(document.getElementById("tinkerbell")),n.$tinkerbell.on("click",function(){n.instantiateBell(!0),n.$tinkerbell.off("click")}),document.addEventListener("obsLoad",function(){adamastor.isReady()?(n.checkForSubscribed.call(n,!!adamastor.isLoggedIn()&&adamastor.getSessionProfile().sub),$(".follow").each(function(e,t){n.bindClicks(t)})):obsEventListener("obsUserStateChange",function(){n.checkForSubscribed.call(n,!!adamastor.isLoggedIn()&&adamastor.getSessionProfile().sub),$(".follow").each(function(e,t){n.bindClicks(t)})})}),document.addEventListener("obsLogin",function(e){$(".follow").each(function(e,t){n.bindClicks(t)}),n.instantiateBell()},!1),document.addEventListener("obsLogout",function(){$(".follow").each(function(e,t){n.bindClicks(t)}),n.instantiateBell()},!1)},checkForSubscribed:function(e){if($(".following").removeClass("following").text("Seguir").blur(),e)if(this.bellPlugin.subscriptions){var t=this.bellPlugin.subscriptions;for(var n in t)for(var o in t[n]){var i='[data-what="'+n+'"][data-id="'+o+'"]';document.querySelector(i)&&$(i).addClass("following").text("A Seguir").blur()}}else ArdinaProxy.getInstance().getSubscriptions(e,function(e,t){for(var n in e)for(var o in e[n]){var i='[data-what="'+n+'"][data-id="'+o+'"]';document.querySelector(i)&&$(i).addClass("following").text("A Seguir").blur()}},function(e,t,n){})},instantiateBell:function(n){var o=this;window.loader.loadHTML("alerts/alerts.templates.html","body",function(){o.bellPlugin&&(o.bellPlugin=!1);var e="notifications obs_drop_right obs_drop_group "+(n?"obs_drop_open":"");o.$tinkerbell.addClass(e),o.$tinkerbell.empty().append(parseTemplate(document.getElementById("template-sininho-logged").innerHTML,{}));var t=!!adamastor.isLoggedIn()&&adamastor.getSessionProfile().sub;$(".following").removeClass("following").text("Seguir").blur(),o.bellPlugin=o.$tinkerbell.tinkerbell({userId:t,onGetSubscriptions:o.checkForSubscribed.call(o,t)}),$(".obs_drop_group").obsdrop(),o.$tinkerbell.find(".open-popup-link").on("click",function(){window.showLogin()})})},bindClicks:function(e){var t=this;if($(e).off("click"),AdamastorProxy.getInstance().isLoggedIn()){var n=$(e).data("what"),o=$(e).data("id");t.bellPlugin&&(t.bellPlugin.checkSubscription(n,parseInt(o))?$(e).addClass("following").text("A Seguir").blur():$(e).removeClass("following").text("Seguir").blur()),$(e).on("click",function(e){e.preventDefault(),$(e.target).hasClass("following")?t.unsubscribe(n,o,e.target):t.subscribe(n,o,e.target)})}else $(e).on("click",function(){showLogin()})},subscribe:function(e,t,n){var o=this,i=AdamastorProxy.getInstance().getSessionProfile().sub;ArdinaProxy.getInstance().subscribe(i,e,t,function(){$(n).addClass("following").text("A Seguir"),o.bellPlugin&&o.bellPlugin.update()},function(){console.log("error on subscribe",arguments)})},unsubscribe:function(e,t,n){var o=this,i=AdamastorProxy.getInstance().getSessionProfile().sub;ArdinaProxy.getInstance().unsubscribe(i,e,t,function(){$(n).removeClass("following").text("Seguir"),o.bellPlugin&&o.bellPlugin.update()},function(){console.log("error on unsubscribe",arguments)})}}).init(),function r(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return c(a[t][1][e]||e)},i,i.exports,r,a,s,l)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){},{}],2:[function(i,r,e){(function(e){var t,n=void 0!==e?e:"undefined"!=typeof window?window:{},o=i(1);"undefined"!=typeof document?t=document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"])||(t=n["__GLOBAL_DOCUMENT_CACHE@4"]=o),r.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],3:[function(e,n,t){(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,n,t){!function(e){function o(){}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function i(n,o){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,r._immediateFn(function(){var e=1===n._state?o.onFulfilled:o.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(e){return void s(o.promise,e)}a(o.promise,t)}else(1===n._state?a:s)(o.promise,n._value)})):n._deferreds.push(o)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void d((o=n,i=t,function(){o.apply(i,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){s(e,t)}var o,i}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}var t=setTimeout;r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(o);return i(this,new c(e,t,n)),n},r.all=function(e){var s=Array.prototype.slice.call(e);return new r(function(o,i){function r(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){r(t,e)},i)}s[t]=e,0==--a&&o(s)}catch(e){i(e)}}if(0===s.length)return o([]);for(var a=s.length,e=0;e<s.length;e++)r(e,s[e])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(n){return new r(function(e,t){t(n)})},r.race=function(i){return new r(function(e,t){for(var n=0,o=i.length;n<o;n++)i[n].then(e,t)})},r._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},void 0!==n&&n.exports?n.exports=r:e.Promise||(e.Promise=r)}(this)},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(o=e(7))&&o.__esModule?o:{default:o},r=e(15),s=e(27),l={lang:"en",en:r.EN};l.language=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(null!=t&&t.length){if("string"!=typeof t[0])throw new TypeError("Language code must be a string value");if(!/^[a-z]{2,3}((\-|_)[a-z]{2})?$/i.test(t[0]))throw new TypeError("Language code must have format 2-3 letters and. optionally, hyphen, underscore followed by 2 more letters");l.lang=t[0],void 0===l[t[0]]?(t[1]=null!==t[1]&&void 0!==t[1]&&"object"===a(t[1])?t[1]:{},l[t[0]]=(0,s.isObjectEmpty)(t[1])?r.EN:t[1]):null!==t[1]&&void 0!==t[1]&&"object"===a(t[1])&&(l[t[0]]=t[1])}return l.lang},l.t=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e&&e.length){var n=void 0,o=void 0,i=l.language(),r=function(e,t,n){return"object"!==(void 0===e?"undefined":a(e))||"number"!=typeof t||"number"!=typeof n?e:[function(){return arguments.length<=1?void 0:arguments[1]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 0===(arguments.length<=0?void 0:arguments[0])||1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1&&(arguments.length<=0?void 0:arguments[0])%100!=11?arguments.length<=1?void 0:arguments[1]:0!==(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])||11===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])||12===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:2<(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])<20?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:0===(arguments.length<=0?void 0:arguments[0])||0<(arguments.length<=0?void 0:arguments[0])%100&&(arguments.length<=0?void 0:arguments[0])%100<20?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1&&(arguments.length<=0?void 0:arguments[0])%100!=11?arguments.length<=1?void 0:arguments[1]:2<=(arguments.length<=0?void 0:arguments[0])%10&&((arguments.length<=0?void 0:arguments[0])%100<10||20<=(arguments.length<=0?void 0:arguments[0])%100)?arguments.length<=2?void 0:arguments[2]:[3]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1&&(arguments.length<=0?void 0:arguments[0])%100!=11?arguments.length<=1?void 0:arguments[1]:2<=(arguments.length<=0?void 0:arguments[0])%10&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||20<=(arguments.length<=0?void 0:arguments[0])%100)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2<=(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])<=4?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2<=(arguments.length<=0?void 0:arguments[0])%10&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||20<=(arguments.length<=0?void 0:arguments[0])%100)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return(arguments.length<=0?void 0:arguments[0])%100==1?arguments.length<=2?void 0:arguments[2]:(arguments.length<=0?void 0:arguments[0])%100==2?arguments.length<=3?void 0:arguments[3]:(arguments.length<=0?void 0:arguments[0])%100==3||(arguments.length<=0?void 0:arguments[0])%100==4?arguments.length<=4?void 0:arguments[4]:arguments.length<=1?void 0:arguments[1]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:2<(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])<7?arguments.length<=3?void 0:arguments[3]:6<(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])<11?arguments.length<=4?void 0:arguments[4]:arguments.length<=5?void 0:arguments[5]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:3<=(arguments.length<=0?void 0:arguments[0])%100&&(arguments.length<=0?void 0:arguments[0])%100<=10?arguments.length<=4?void 0:arguments[4]:11<=(arguments.length<=0?void 0:arguments[0])%100?arguments.length<=5?void 0:arguments[5]:arguments.length<=6?void 0:arguments[6]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:0===(arguments.length<=0?void 0:arguments[0])||1<(arguments.length<=0?void 0:arguments[0])%100&&(arguments.length<=0?void 0:arguments[0])%100<11?arguments.length<=2?void 0:arguments[2]:10<(arguments.length<=0?void 0:arguments[0])%100&&(arguments.length<=0?void 0:arguments[0])%100<20?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return(arguments.length<=0?void 0:arguments[0])%10==1?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10==2?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 11!==(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])%10==1?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2<=(arguments.length<=0?void 0:arguments[0])%10&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||20<=(arguments.length<=0?void 0:arguments[0])%100)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:8!==(arguments.length<=0?void 0:arguments[0])&&11!==(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:3===(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]}][n].apply(null,[t].concat(e))};return void 0!==l[i]&&(n=l[i][e],null!==t&&"number"==typeof t&&(o=l[i]["mejs.plural-form"],n=r.apply(null,[n,t,o]))),!n&&l.en&&(n=l.en[e],null!==t&&"number"==typeof t&&(o=l.en["mejs.plural-form"],n=r.apply(null,[n,t,o]))),n=n||e,null!==t&&"number"==typeof t&&(n=n.replace("%1",t)),(0,s.escapeHTML)(n)}return e},i.default.i18n=l,"undefined"!=typeof mejsL10n&&i.default.i18n.language(mejsL10n.language,mejsL10n.strings),n.default=l},{15:15,27:27,7:7}],6:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A=o(e(3)),L=o(e(2)),N=o(e(7)),M=e(27),O=e(28),j=e(8),D=e(25),i=function e(t,n,o){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var p=this;o=Array.isArray(o)?o:null,p.defaults={renderers:[],fakeNodeName:"mediaelementwrapper",pluginPath:"build/",shimScriptAccess:"sameDomain"},n=Object.assign(p.defaults,n),p.mediaElement=L.default.createElement(n.fakeNodeName);var i=t,r=!1;if("string"==typeof t?p.mediaElement.originalNode=L.default.getElementById(t):i=(p.mediaElement.originalNode=t).id,void 0===p.mediaElement.originalNode||null===p.mediaElement.originalNode)return null;p.mediaElement.options=n,i=i||"mejs_"+Math.random().toString().slice(2),p.mediaElement.originalNode.setAttribute("id",i+"_from_mejs");var a=p.mediaElement.originalNode.tagName.toLowerCase();-1<["video","audio"].indexOf(a)&&!p.mediaElement.originalNode.getAttribute("preload")&&p.mediaElement.originalNode.setAttribute("preload","none"),p.mediaElement.originalNode.parentNode.insertBefore(p.mediaElement,p.mediaElement.originalNode),p.mediaElement.appendChild(p.mediaElement.originalNode);var s=function(t,e){if("https:"===A.default.location.protocol&&0===t.indexOf("http:")&&D.IS_IOS&&-1<N.default.html5media.mediaTypes.indexOf(e)){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4!==this.readyState||200!==this.status)return t;var e=(A.default.URL||A.default.webkitURL).createObjectURL(this.response);return p.mediaElement.originalNode.setAttribute("src",e),e},n.open("GET",t),n.responseType="blob",n.send()}return t},l=void 0;if(null!==o)l=o;else if(null!==p.mediaElement.originalNode)switch(l=[],p.mediaElement.originalNode.nodeName.toLowerCase()){case"iframe":l.push({type:"",src:p.mediaElement.originalNode.getAttribute("src")});break;case"audio":case"video":var c=p.mediaElement.originalNode.children.length,d=p.mediaElement.originalNode.getAttribute("src");if(d){var f=p.mediaElement.originalNode,m=(0,O.formatType)(d,f.getAttribute("type"));l.push({type:m,src:s(d,m)})}for(var g=0;g<c;g++){var h=p.mediaElement.originalNode.children[g];if("source"===h.tagName.toLowerCase()){var v=h.getAttribute("src"),y=(0,O.formatType)(v,h.getAttribute("type"));l.push({type:y,src:s(v,y)})}}}p.mediaElement.id=i,p.mediaElement.renderers={},p.mediaElement.events={},p.mediaElement.promises=[],p.mediaElement.renderer=null,p.mediaElement.rendererName=null,p.mediaElement.changeRenderer=function(e,t){var n=u,o=2<Object.keys(t[0]).length?t[0]:t[0].src;if(void 0!==n.mediaElement.renderer&&null!==n.mediaElement.renderer&&n.mediaElement.renderer.name===e)return n.mediaElement.renderer.pause(),n.mediaElement.renderer.stop&&n.mediaElement.renderer.stop(),n.mediaElement.renderer.show(),n.mediaElement.renderer.setSrc(o),!0;void 0!==n.mediaElement.renderer&&null!==n.mediaElement.renderer&&(n.mediaElement.renderer.pause(),n.mediaElement.renderer.stop&&n.mediaElement.renderer.stop(),n.mediaElement.renderer.hide());var i=n.mediaElement.renderers[e],r=null;if(null!=i)return i.show(),i.setSrc(o),n.mediaElement.renderer=i,n.mediaElement.rendererName=e,!0;for(var a=n.mediaElement.options.renderers.length?n.mediaElement.options.renderers:j.renderer.order,s=0,l=a.length;s<l;s++){var c=a[s];if(c===e){r=j.renderer.renderers[c];var d=Object.assign(r.options,n.mediaElement.options);return(i=r.create(n.mediaElement,d,t)).name=e,n.mediaElement.renderers[r.name]=i,n.mediaElement.renderer=i,n.mediaElement.rendererName=e,i.show(),!0}}return!1},p.mediaElement.setSize=function(e,t){void 0!==p.mediaElement.renderer&&null!==p.mediaElement.renderer&&p.mediaElement.renderer.setSize(e,t)},p.mediaElement.generateError=function(e,t){e=e||"",t=Array.isArray(t)?t:[];var n=(0,M.createEvent)("error",p.mediaElement);n.message=e,n.urls=t,p.mediaElement.dispatchEvent(n),r=!0};var b=N.default.html5media.properties,E=N.default.html5media.methods,w=function(t,e,n,o){var i=t[e];Object.defineProperty(t,e,{get:function(){return n.apply(t,[i])},set:function(e){return i=o.apply(t,[e])}})},S=function(){return void 0!==p.mediaElement.renderer&&null!==p.mediaElement.renderer?p.mediaElement.renderer.getSrc():null},_=function(e){var t=[];if("string"==typeof e)t.push({src:e,type:e?(0,O.getTypeFromFile)(e):""});else if("object"===(void 0===e?"undefined":P(e))&&void 0!==e.src){var n=(0,O.absolutizeUrl)(e.src),o=e.type,i=Object.assign(e,{src:n,type:""!==o&&null!=o||!n?o:(0,O.getTypeFromFile)(n)});t.push(i)}else if(Array.isArray(e))for(var r=0,a=e.length;r<a;r++){var s=(0,O.absolutizeUrl)(e[r].src),l=e[r].type,c=Object.assign(e[r],{src:s,type:""!==l&&null!=l||!s?l:(0,O.getTypeFromFile)(s)});t.push(c)}var d=j.renderer.select(t,p.mediaElement.options.renderers.length?p.mediaElement.options.renderers:[]),u=void 0;if(p.mediaElement.paused||(p.mediaElement.pause(),u=(0,M.createEvent)("pause",p.mediaElement),p.mediaElement.dispatchEvent(u)),p.mediaElement.originalNode.src=t[0].src||"",null!==d||!t[0].src)return t[0].src?p.mediaElement.changeRenderer(d.rendererName,t):null;p.mediaElement.generateError("No renderer found",t)},C=function(e,t){try{if("play"===e&&"native_dash"===p.mediaElement.rendererName){var n=p.mediaElement.renderer[e](t);n&&"function"==typeof n.then&&n.catch(function(){p.mediaElement.paused&&setTimeout(function(){var e=p.mediaElement.renderer.play();void 0!==e&&e.catch(function(){p.mediaElement.renderer.paused||p.mediaElement.renderer.pause()})},150)})}else p.mediaElement.renderer[e](t)}catch(e){p.mediaElement.generateError(e,l)}};w(p.mediaElement,"src",S,_),p.mediaElement.getSrc=S,p.mediaElement.setSrc=_;for(var k=0,x=b.length;k<x;k++)!function(e){if("src"!==e){var t=""+e.substring(0,1).toUpperCase()+e.substring(1),n=function(){return void 0!==p.mediaElement.renderer&&null!==p.mediaElement.renderer&&"function"==typeof p.mediaElement.renderer["get"+t]?p.mediaElement.renderer["get"+t]():null},o=function(e){void 0!==p.mediaElement.renderer&&null!==p.mediaElement.renderer&&"function"==typeof p.mediaElement.renderer["set"+t]&&p.mediaElement.renderer["set"+t](e)};w(p.mediaElement,e,n,o),p.mediaElement["get"+t]=n,p.mediaElement["set"+t]=o}}(b[k]);for(var I=0,T=E.length;I<T;I++)!function(o){p.mediaElement[o]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return void 0!==p.mediaElement.renderer&&null!==p.mediaElement.renderer&&"function"==typeof p.mediaElement.renderer[o]&&(p.mediaElement.promises.length?Promise.all(p.mediaElement.promises).then(function(){C(o,t)}).catch(function(e){p.mediaElement.generateError(e,l)}):C(o,t)),null}}(E[I]);return p.mediaElement.addEventListener=function(e,t){p.mediaElement.events[e]=p.mediaElement.events[e]||[],p.mediaElement.events[e].push(t)},p.mediaElement.removeEventListener=function(e,t){if(!e)return p.mediaElement.events={},!0;var n=p.mediaElement.events[e];if(!n)return!0;if(!t)return p.mediaElement.events[e]=[],!0;for(var o=0;o<n.length;o++)if(n[o]===t)return p.mediaElement.events[e].splice(o,1),!0;return!1},p.mediaElement.dispatchEvent=function(e){var t=p.mediaElement.events[e.type];if(t)for(var n=0;n<t.length;n++)t[n].apply(null,[e])},p.mediaElement.destroy=function(){var e=p.mediaElement.originalNode.cloneNode(!0),t=p.mediaElement.parentElement;e.removeAttribute("id"),e.remove(),p.mediaElement.remove(),t.append(e)},l.length&&(p.mediaElement.src=l),p.mediaElement.promises.length?Promise.all(p.mediaElement.promises).then(function(){p.mediaElement.options.success&&p.mediaElement.options.success(p.mediaElement,p.mediaElement.originalNode)}).catch(function(){r&&p.mediaElement.options.error&&p.mediaElement.options.error(p.mediaElement,p.mediaElement.originalNode)}):(p.mediaElement.options.success&&p.mediaElement.options.success(p.mediaElement,p.mediaElement.originalNode),r&&p.mediaElement.options.error&&p.mediaElement.options.error(p.mediaElement,p.mediaElement.originalNode)),p.mediaElement};A.default.MediaElement=i,N.default.MediaElement=i,n.default=i},{2:2,25:25,27:27,28:28,3:3,7:7,8:8}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=(o=e(3))&&o.__esModule?o:{default:o},r={};r.version="4.2.9",r.html5media={properties:["volume","src","currentTime","muted","duration","paused","ended","buffered","error","networkState","readyState","seeking","seekable","currentSrc","preload","bufferedBytes","bufferedTime","initialTime","startOffsetTime","defaultPlaybackRate","playbackRate","played","autoplay","loop","controls"],readOnlyProperties:["duration","paused","ended","buffered","error","networkState","readyState","seeking","seekable"],methods:["load","play","pause","canPlayType"],events:["loadstart","durationchange","loadedmetadata","loadeddata","progress","canplay","canplaythrough","suspend","abort","error","emptied","stalled","play","playing","pause","waiting","seeking","seeked","timeupdate","ended","ratechange","volumechange"],mediaTypes:["audio/mp3","audio/ogg","audio/oga","audio/wav","audio/x-wav","audio/wave","audio/x-pn-wav","audio/mpeg","audio/mp4","video/mp4","video/webm","video/ogg","video/ogv"]},i.default.mejs=r,n.default=r},{3:3}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.renderer=void 0;var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=(o=e(7))&&o.__esModule?o:{default:o},s=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.renderers={},this.order=[]}return r(e,[{key:"add",value:function(e){if(void 0===e.name)throw new TypeError("renderer must contain at least `name` property");this.renderers[e.name]=e,this.order.push(e.name)}},{key:"select",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=t.length;if(t=t.length?t:this.order,!n){var o=[/^(html5|native)/i,/^flash/i,/iframe$/i],i=function(e){for(var t=0,n=o.length;t<n;t++)if(o[t].test(e))return t;return o.length};t.sort(function(e,t){return i(e)-i(t)})}for(var r=0,a=t.length;r<a;r++){var s=t[r],l=this.renderers[s];if(null!=l)for(var c=0,d=e.length;c<d;c++)if("function"==typeof l.canPlayType&&"string"==typeof e[c].type&&l.canPlayType(e[c].type))return{rendererName:l.name,src:e[c].src}}return null}},{key:"order",set:function(e){if(!Array.isArray(e))throw new TypeError("order must be an array of strings.");this._order=e},get:function(){return this._order}},{key:"renderers",set:function(e){if(null!==e&&"object"!==(void 0===e?"undefined":i(e)))throw new TypeError("renderers must be an array of objects.");this._renderers=e},get:function(){return this._renderers}}]),e}(),l=n.renderer=new s;a.default.Renderers=l},{7:7}],9:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var p=o(e(3)),f=o(e(2)),i=o(e(5)),r=e(16),a=o(r),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e(25)),g=e(27),h=e(26),v=e(28);Object.assign(r.config,{usePluginFullScreen:!0,fullscreenText:null,useFakeFullscreen:!1}),Object.assign(a.default.prototype,{isFullScreen:!1,isNativeFullScreen:!1,isInIframe:!1,isPluginClickThroughCreated:!1,fullscreenMode:"",containerSizeTimeout:null,buildfullscreen:function(n){if(n.isVideo){n.isInIframe=p.default.location!==p.default.parent.location,n.detectFullscreenMode();var o=this,e=(0,g.isString)(o.options.fullscreenText)?o.options.fullscreenText:i.default.t("mejs.fullscreen"),t=f.default.createElement("div");t.className=o.options.classPrefix+"button "+o.options.classPrefix+"fullscreen-button",t.innerHTML='<button type="button" aria-controls="'+o.id+'" title="'+e+'" aria-label="'+e+'" tabindex="0"></button>',o.addControlElement(t,"fullscreen"),t.addEventListener("click",function(){m.HAS_TRUE_NATIVE_FULLSCREEN&&m.IS_FULLSCREEN||n.isFullScreen?n.exitFullScreen():n.enterFullScreen()}),n.fullscreenBtn=t,o.options.keyActions.push({keys:[70],action:function(e,t,n,o){o.ctrlKey||void 0!==e.enterFullScreen&&(e.isFullScreen?e.exitFullScreen():e.enterFullScreen())}}),o.exitFullscreenCallback=function(e){var t=e.which||e.keyCode||0;o.options.enableKeyboard&&27===t&&(m.HAS_TRUE_NATIVE_FULLSCREEN&&m.IS_FULLSCREEN||o.isFullScreen)&&n.exitFullScreen()},o.globalBind("keydown",o.exitFullscreenCallback),o.normalHeight=0,o.normalWidth=0,m.HAS_TRUE_NATIVE_FULLSCREEN&&n.globalBind(m.FULLSCREEN_EVENT_NAME,function(){n.isFullScreen&&(m.isFullScreen()?(n.isNativeFullScreen=!0,n.setControlsSize()):(n.isNativeFullScreen=!1,n.exitFullScreen()))})}},cleanfullscreen:function(e){e.exitFullScreen(),e.globalUnbind("keydown",e.exitFullscreenCallback)},detectFullscreenMode:function(){var e=null!==this.media.rendererName&&/(native|html5)/i.test(this.media.rendererName),t="";return m.HAS_TRUE_NATIVE_FULLSCREEN&&e?t="native-native":m.HAS_TRUE_NATIVE_FULLSCREEN&&!e?t="plugin-native":this.usePluginFullScreen&&m.SUPPORT_POINTER_EVENTS&&(t="plugin-click"),this.fullscreenMode=t},enterFullScreen:function(){var o=this,e=null!==o.media.rendererName&&/(html5|native)/i.test(o.media.rendererName),t=getComputedStyle(o.getElement(o.container));if(o.isVideo)if(!1===o.options.useFakeFullscreen&&m.IS_IOS&&m.HAS_IOS_FULLSCREEN&&"function"==typeof o.media.originalNode.webkitEnterFullscreen&&o.media.originalNode.canPlayType((0,v.getTypeFromFile)(o.media.getSrc())))o.media.originalNode.webkitEnterFullscreen();else{if((0,h.addClass)(f.default.documentElement,o.options.classPrefix+"fullscreen"),(0,h.addClass)(o.getElement(o.container),o.options.classPrefix+"container-fullscreen"),o.normalHeight=parseFloat(t.height),o.normalWidth=parseFloat(t.width),"native-native"!==o.fullscreenMode&&"plugin-native"!==o.fullscreenMode||(m.requestFullScreen(o.getElement(o.container)),o.isInIframe&&setTimeout(function e(){if(o.isNativeFullScreen){var t=p.default.innerWidth||f.default.documentElement.clientWidth||f.default.body.clientWidth,n=screen.width;Math.abs(n-t)>.002*n?o.exitFullScreen():setTimeout(e,500)}},1e3)),o.getElement(o.container).style.width="100%",o.getElement(o.container).style.height="100%",o.containerSizeTimeout=setTimeout(function(){o.getElement(o.container).style.width="100%",o.getElement(o.container).style.height="100%",o.setControlsSize()},500),e)o.node.style.width="100%",o.node.style.height="100%";else for(var n=o.getElement(o.container).querySelectorAll("embed, object, video"),i=n.length,r=0;r<i;r++)n[r].style.width="100%",n[r].style.height="100%";o.options.setDimensions&&"function"==typeof o.media.setSize&&o.media.setSize(screen.width,screen.height);for(var a=o.getElement(o.layers).children,s=a.length,l=0;l<s;l++)a[l].style.width="100%",a[l].style.height="100%";o.fullscreenBtn&&((0,h.removeClass)(o.fullscreenBtn,o.options.classPrefix+"fullscreen"),(0,h.addClass)(o.fullscreenBtn,o.options.classPrefix+"unfullscreen")),o.setControlsSize(),o.isFullScreen=!0;var c=Math.min(screen.width/o.width,screen.height/o.height),d=o.getElement(o.container).querySelector("."+o.options.classPrefix+"captions-text");d&&(d.style.fontSize=100*c+"%",d.style.lineHeight="normal",o.getElement(o.container).querySelector("."+o.options.classPrefix+"captions-position").style.bottom=(screen.height-o.normalHeight)/2-o.getElement(o.controls).offsetHeight/2+c+15+"px");var u=(0,g.createEvent)("enteredfullscreen",o.getElement(o.container));o.getElement(o.container).dispatchEvent(u)}},exitFullScreen:function(){var e=this,t=null!==e.media.rendererName&&/(native|html5)/i.test(e.media.rendererName);if(e.isVideo){if(clearTimeout(e.containerSizeTimeout),m.HAS_TRUE_NATIVE_FULLSCREEN&&(m.IS_FULLSCREEN||e.isFullScreen)&&m.cancelFullScreen(),(0,h.removeClass)(f.default.documentElement,e.options.classPrefix+"fullscreen"),(0,h.removeClass)(e.getElement(e.container),e.options.classPrefix+"container-fullscreen"),e.options.setDimensions){if(e.getElement(e.container).style.width=e.normalWidth+"px",e.getElement(e.container).style.height=e.normalHeight+"px",t)e.node.style.width=e.normalWidth+"px",e.node.style.height=e.normalHeight+"px";else for(var n=e.getElement(e.container).querySelectorAll("embed, object, video"),o=n.length,i=0;i<o;i++)n[i].style.width=e.normalWidth+"px",n[i].style.height=e.normalHeight+"px";"function"==typeof e.media.setSize&&e.media.setSize(e.normalWidth,e.normalHeight);for(var r=e.getElement(e.layers).children,a=r.length,s=0;s<a;s++)r[s].style.width=e.normalWidth+"px",r[s].style.height=e.normalHeight+"px"}e.fullscreenBtn&&((0,h.removeClass)(e.fullscreenBtn,e.options.classPrefix+"unfullscreen"),(0,h.addClass)(e.fullscreenBtn,e.options.classPrefix+"fullscreen")),e.setControlsSize(),e.isFullScreen=!1;var l=e.getElement(e.container).querySelector("."+e.options.classPrefix+"captions-text");l&&(l.style.fontSize="",l.style.lineHeight="",e.getElement(e.container).querySelector("."+e.options.classPrefix+"captions-position").style.bottom="");var c=(0,g.createEvent)("exitedfullscreen",e.getElement(e.container));e.getElement(e.container).dispatchEvent(c)}}})},{16:16,2:2,25:25,26:26,27:27,28:28,3:3,5:5}],10:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u=o(e(2)),i=e(16),r=o(i),p=o(e(5)),f=e(27),m=e(26);Object.assign(i.config,{playText:null,pauseText:null}),Object.assign(r.default.prototype,{buildplaypause:function(e,t,n,o){function i(e){"play"===e?((0,m.removeClass)(c,r.options.classPrefix+"play"),(0,m.removeClass)(c,r.options.classPrefix+"replay"),(0,m.addClass)(c,r.options.classPrefix+"pause"),d.setAttribute("title",l),d.setAttribute("aria-label",l)):((0,m.removeClass)(c,r.options.classPrefix+"pause"),(0,m.removeClass)(c,r.options.classPrefix+"replay"),(0,m.addClass)(c,r.options.classPrefix+"play"),d.setAttribute("title",s),d.setAttribute("aria-label",s))}var r=this,a=r.options,s=(0,f.isString)(a.playText)?a.playText:p.default.t("mejs.play"),l=(0,f.isString)(a.pauseText)?a.pauseText:p.default.t("mejs.pause"),c=u.default.createElement("div");c.className=r.options.classPrefix+"button "+r.options.classPrefix+"playpause-button "+r.options.classPrefix+"play",c.innerHTML='<button type="button" aria-controls="'+r.id+'" title="'+s+'" aria-label="'+l+'" tabindex="0"></button>',c.addEventListener("click",function(){r.paused?r.play():r.pause()});var d=c.querySelector("button");r.addControlElement(c,"playpause"),i("pse"),o.addEventListener("loadedmetadata",function(){-1===o.rendererName.indexOf("flash")&&i("pse")}),o.addEventListener("play",function(){i("play")}),o.addEventListener("playing",function(){i("play")}),o.addEventListener("pause",function(){i("pse")}),o.addEventListener("ended",function(){e.options.loop||((0,m.removeClass)(c,r.options.classPrefix+"pause"),(0,m.removeClass)(c,r.options.classPrefix+"play"),(0,m.addClass)(c,r.options.classPrefix+"replay"),d.setAttribute("title",s),d.setAttribute("aria-label",s))})}})},{16:16,2:2,26:26,27:27,5:5}],11:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var f=o(e(2)),m=e(16),i=o(m),y=o(e(5)),b=e(25),E=e(30),w=e(26);Object.assign(m.config,{enableProgressTooltip:!0,useSmoothHover:!0,forceLive:!1}),Object.assign(i.default.prototype,{buildprogress:function(g,s,e,c){var d=0,h=!1,u=!1,v=this,t=g.options.autoRewind,n=g.options.enableProgressTooltip?'<span class="'+v.options.classPrefix+'time-float"><span class="'+v.options.classPrefix+'time-float-current">00:00</span><span class="'+v.options.classPrefix+'time-float-corner"></span></span>':"",o=f.default.createElement("div");o.className=v.options.classPrefix+"time-rail",o.innerHTML='<span class="'+v.options.classPrefix+"time-total "+v.options.classPrefix+'time-slider"><span class="'+v.options.classPrefix+'time-buffering"></span><span class="'+v.options.classPrefix+'time-loaded"></span><span class="'+v.options.classPrefix+'time-current"></span><span class="'+v.options.classPrefix+'time-hovered no-hover"></span><span class="'+v.options.classPrefix+'time-handle"><span class="'+v.options.classPrefix+'time-handle-content"></span></span>'+n+"</span>",v.addControlElement(o,"progress"),v.options.keyActions.push({keys:[37,227],action:function(e){if(!isNaN(e.duration)&&0<e.duration){e.isVideo&&(e.showControls(),e.startControlsTimer()),e.getElement(e.container).querySelector("."+m.config.classPrefix+"time-total").focus();var t=Math.max(e.currentTime-e.options.defaultSeekBackwardInterval(e),0);e.setCurrentTime(t)}}},{keys:[39,228],action:function(e){if(!isNaN(e.duration)&&0<e.duration){e.isVideo&&(e.showControls(),e.startControlsTimer()),e.getElement(e.container).querySelector("."+m.config.classPrefix+"time-total").focus();var t=Math.min(e.currentTime+e.options.defaultSeekForwardInterval(e),e.duration);e.setCurrentTime(t)}}}),v.rail=s.querySelector("."+v.options.classPrefix+"time-rail"),v.total=s.querySelector("."+v.options.classPrefix+"time-total"),v.loaded=s.querySelector("."+v.options.classPrefix+"time-loaded"),v.current=s.querySelector("."+v.options.classPrefix+"time-current"),v.handle=s.querySelector("."+v.options.classPrefix+"time-handle"),v.timefloat=s.querySelector("."+v.options.classPrefix+"time-float"),v.timefloatcurrent=s.querySelector("."+v.options.classPrefix+"time-float-current"),v.slider=s.querySelector("."+v.options.classPrefix+"time-slider"),v.hovered=s.querySelector("."+v.options.classPrefix+"time-hovered"),v.buffer=s.querySelector("."+v.options.classPrefix+"time-buffering"),v.newTime=0,v.forcedHandlePause=!1,v.setTransformStyle=function(e,t){e.style.transform=t,e.style.webkitTransform=t,e.style.MozTransform=t,e.style.msTransform=t,e.style.OTransform=t},v.buffer.style.display="none";var i=function(e){var t=getComputedStyle(v.total),n=(0,w.offset)(v.total),o=v.total.offsetWidth,i=void 0!==t.webkitTransform?"webkitTransform":void 0!==t.mozTransform?"mozTransform ":void 0!==t.oTransform?"oTransform":void 0!==t.msTransform?"msTransform":"transform",r="WebKitCSSMatrix"in window?"WebKitCSSMatrix":"MSCSSMatrix"in window?"MSCSSMatrix":"CSSMatrix"in window?"CSSMatrix":void 0,a=0,s=0,l=0,c=void 0;if(c=e.originalEvent&&e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.changedTouches?e.changedTouches[0].pageX:e.pageX,v.getDuration()){if(c<n.left?c=n.left:c>o+n.left&&(c=o+n.left),a=(l=c-n.left)/o,v.newTime=a<=.02?0:a*v.getDuration(),h&&null!==v.getCurrentTime()&&v.newTime.toFixed(4)!==v.getCurrentTime().toFixed(4)&&(v.setCurrentRailHandle(v.newTime),v.updateCurrent(v.newTime)),!b.IS_IOS&&!b.IS_ANDROID){if(l<0&&(l=0),v.options.useSmoothHover&&null!==r&&void 0!==window[r]){var d=new window[r](getComputedStyle(v.handle)[i]).m41,u=l/parseFloat(getComputedStyle(v.total).width)-d/parseFloat(getComputedStyle(v.total).width);v.hovered.style.left=d+"px",v.setTransformStyle(v.hovered,"scaleX("+u+")"),v.hovered.setAttribute("pos",l),0<=u?(0,w.removeClass)(v.hovered,"negative"):(0,w.addClass)(v.hovered,"negative")}if(v.timefloat){var p=v.timefloat.offsetWidth/2,f=mejs.Utils.offset(v.getElement(v.container)),m=getComputedStyle(v.timefloat);s=c-f.left<v.timefloat.offsetWidth?p:c-f.left>=v.getElement(v.container).offsetWidth-p?v.total.offsetWidth-p:l,(0,w.hasClass)(v.getElement(v.container),v.options.classPrefix+"long-video")&&(s+=parseFloat(m.marginLeft)/2+v.timefloat.offsetWidth/2),v.timefloat.style.left=s+"px",v.timefloatcurrent.innerHTML=(0,E.secondsToTimeCode)(v.newTime,g.options.alwaysShowHours,g.options.showTimecodeFrameCount,g.options.framesPerSecond,g.options.secondsDecimalLength,g.options.timeFormat),v.timefloat.style.display="block"}}}else b.IS_IOS||b.IS_ANDROID||!v.timefloat||(s=v.timefloat.offsetWidth+o>=v.getElement(v.container).offsetWidth?v.timefloat.offsetWidth/2:0,v.timefloat.style.left=s+"px",v.timefloat.style.left=s+"px",v.timefloat.style.display="block")},p=function(){1e3<=new Date-d&&v.play()};v.slider.addEventListener("focus",function(){g.options.autoRewind=!1}),v.slider.addEventListener("blur",function(){g.options.autoRewind=t}),v.slider.addEventListener("keydown",function(e){if(1e3<=new Date-d&&(u=v.paused),v.options.enableKeyboard&&v.options.keyActions.length){var t=e.which||e.keyCode||0,n=v.getDuration(),o=g.options.defaultSeekForwardInterval(c),i=g.options.defaultSeekBackwardInterval(c),r=v.getCurrentTime(),a=v.getElement(v.container).querySelector("."+v.options.classPrefix+"volume-slider");if(38===t||40===t){a&&(a.style.display="block"),v.isVideo&&(v.showControls(),v.startControlsTimer());var s=38===t?Math.min(v.volume+.1,1):Math.max(v.volume-.1,0),l=s<=0;return v.setVolume(s),void v.setMuted(l)}switch(a&&(a.style.display="none"),t){case 37:v.getDuration()!==1/0&&(r-=i);break;case 39:v.getDuration()!==1/0&&(r+=o);break;case 36:r=0;break;case 35:r=n;break;case 13:case 32:return void(b.IS_FIREFOX&&(v.paused?v.play():v.pause()));default:return}r=r<0?0:n<=r?n:Math.floor(r),d=new Date,u||g.pause(),r<v.getDuration()&&!u&&setTimeout(p,1100),v.setCurrentTime(r),g.showControls(),e.preventDefault(),e.stopPropagation()}});var r=["mousedown","touchstart"];v.slider.addEventListener("dragstart",function(){return!1});for(var a=0,l=r.length;a<l;a++)v.slider.addEventListener(r[a],function(e){if(v.forcedHandlePause=!1,v.getDuration()!==1/0&&(1===e.which||0===e.which)){v.paused||(v.pause(),v.forcedHandlePause=!0),h=!0,i(e);for(var t=["mouseup","touchend"],n=0,o=t.length;n<o;n++)v.getElement(v.container).addEventListener(t[n],function(e){var t=e.target;(t===v.slider||t.closest("."+v.options.classPrefix+"time-slider"))&&i(e)});v.globalBind("mouseup.dur touchend.dur",function(){h&&null!==v.getCurrentTime()&&v.newTime.toFixed(4)!==v.getCurrentTime().toFixed(4)&&(v.setCurrentTime(v.newTime),v.setCurrentRailHandle(v.newTime),v.updateCurrent(v.newTime)),v.forcedHandlePause&&(v.slider.focus(),v.play()),v.forcedHandlePause=!1,h=!1,v.timefloat&&(v.timefloat.style.display="none")})}},!(!b.SUPPORT_PASSIVE_EVENT||"touchstart"!==r[a])&&{passive:!0});v.slider.addEventListener("mouseenter",function(e){e.target===v.slider&&v.getDuration()!==1/0&&(v.getElement(v.container).addEventListener("mousemove",function(e){var t=e.target;(t===v.slider||t.closest("."+v.options.classPrefix+"time-slider"))&&i(e)}),!v.timefloat||b.IS_IOS||b.IS_ANDROID||(v.timefloat.style.display="block"),v.hovered&&!b.IS_IOS&&!b.IS_ANDROID&&v.options.useSmoothHover&&(0,w.removeClass)(v.hovered,"no-hover"))}),v.slider.addEventListener("mouseleave",function(){v.getDuration()!==1/0&&(h||(v.timefloat&&(v.timefloat.style.display="none"),v.hovered&&v.options.useSmoothHover&&(0,w.addClass)(v.hovered,"no-hover")))}),v.broadcastCallback=function(e){var t,n,o,i,r=s.querySelector("."+v.options.classPrefix+"broadcast");if(v.options.forceLive||v.getDuration()===1/0){if(!r||v.options.forceLive){var a=f.default.createElement("span");a.className=v.options.classPrefix+"broadcast",a.innerText=y.default.t("mejs.live-broadcast"),v.slider.style.display="none",v.rail.appendChild(a)}}else r&&(v.slider.style.display="",r.remove()),g.setProgressRail(e),v.forcedHandlePause||g.setCurrentRail(e),t=v.getCurrentTime(),n=y.default.t("mejs.time-slider"),o=(0,E.secondsToTimeCode)(t,g.options.alwaysShowHours,g.options.showTimecodeFrameCount,g.options.framesPerSecond,g.options.secondsDecimalLength,g.options.timeFormat),i=v.getDuration(),v.slider.setAttribute("role","slider"),v.slider.tabIndex=0,c.paused?(v.slider.setAttribute("aria-label",n),v.slider.setAttribute("aria-valuemin",0),v.slider.setAttribute("aria-valuemax",i),v.slider.setAttribute("aria-valuenow",t),v.slider.setAttribute("aria-valuetext",o)):(v.slider.removeAttribute("aria-label"),v.slider.removeAttribute("aria-valuemin"),v.slider.removeAttribute("aria-valuemax"),v.slider.removeAttribute("aria-valuenow"),v.slider.removeAttribute("aria-valuetext"))},c.addEventListener("progress",v.broadcastCallback),c.addEventListener("timeupdate",v.broadcastCallback),c.addEventListener("play",function(){v.buffer.style.display="none"}),c.addEventListener("playing",function(){v.buffer.style.display="none"}),c.addEventListener("seeking",function(){v.buffer.style.display=""}),c.addEventListener("seeked",function(){v.buffer.style.display="none"}),c.addEventListener("pause",function(){v.buffer.style.display="none"}),c.addEventListener("waiting",function(){v.buffer.style.display=""}),c.addEventListener("loadeddata",function(){v.buffer.style.display=""}),c.addEventListener("canplay",function(){v.buffer.style.display="none"}),c.addEventListener("error",function(){v.buffer.style.display="none"}),v.getElement(v.container).addEventListener("controlsresize",function(e){v.getDuration()!==1/0&&(g.setProgressRail(e),v.forcedHandlePause||g.setCurrentRail(e))})},cleanprogress:function(e,t,n,o){o.removeEventListener("progress",e.broadcastCallback),o.removeEventListener("timeupdate",e.broadcastCallback),e.rail&&e.rail.remove()},setProgressRail:function(e){var t=this,n=void 0!==e?e.detail.target||e.target:t.media,o=null;n&&n.buffered&&0<n.buffered.length&&n.buffered.end&&t.getDuration()?o=n.buffered.end(n.buffered.length-1)/t.getDuration():n&&void 0!==n.bytesTotal&&0<n.bytesTotal&&void 0!==n.bufferedBytes?o=n.bufferedBytes/n.bytesTotal:e&&e.lengthComputable&&0!==e.total&&(o=e.loaded/e.total),null!==o&&(o=Math.min(1,Math.max(0,o)),t.loaded&&t.setTransformStyle(t.loaded,"scaleX("+o+")"))},setCurrentRailHandle:function(e){this.setCurrentRailMain(this,e)},setCurrentRail:function(){this.setCurrentRailMain(this)},setCurrentRailMain:function(e,t){if(void 0!==e.getCurrentTime()&&e.getDuration()){var n=void 0===t?e.getCurrentTime():t;if(e.total&&e.handle){var o=parseFloat(getComputedStyle(e.total).width),i=Math.round(o*n/e.getDuration()),r=i-Math.round(e.handle.offsetWidth/2);if(r=r<0?0:r,e.setTransformStyle(e.current,"scaleX("+i/o+")"),e.setTransformStyle(e.handle,"translateX("+r+"px)"),e.options.useSmoothHover&&!(0,w.hasClass)(e.hovered,"no-hover")){var a=parseInt(e.hovered.getAttribute("pos"),10),s=(a=isNaN(a)?0:a)/o-r/o;e.hovered.style.left=r+"px",e.setTransformStyle(e.hovered,"scaleX("+s+")"),0<=s?(0,w.removeClass)(e.hovered,"negative"):(0,w.addClass)(e.hovered,"negative")}}}}})},{16:16,2:2,25:25,26:26,30:30,5:5}],12:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e(2)),i=e(16),r=o(i),s=e(30),l=e(26);Object.assign(i.config,{duration:0,timeAndDurationSeparator:"<span> | </span>"}),Object.assign(r.default.prototype,{buildcurrent:function(e,t,n,o){var i=this,r=a.default.createElement("div");r.className=i.options.classPrefix+"time",r.setAttribute("role","timer"),r.setAttribute("aria-live","off"),r.innerHTML='<span class="'+i.options.classPrefix+'currenttime">'+(0,s.secondsToTimeCode)(0,e.options.alwaysShowHours,e.options.showTimecodeFrameCount,e.options.framesPerSecond,e.options.secondsDecimalLength,e.options.timeFormat)+"</span>",i.addControlElement(r,"current"),e.updateCurrent(),i.updateTimeCallback=function(){i.controlsAreVisible&&e.updateCurrent()},o.addEventListener("timeupdate",i.updateTimeCallback)},cleancurrent:function(e,t,n,o){o.removeEventListener("timeupdate",e.updateTimeCallback)},buildduration:function(e,t,n,o){var i=this;if(t.lastChild.querySelector("."+i.options.classPrefix+"currenttime"))t.querySelector("."+i.options.classPrefix+"time").innerHTML+=i.options.timeAndDurationSeparator+'<span class="'+i.options.classPrefix+'duration">'+(0,s.secondsToTimeCode)(i.options.duration,i.options.alwaysShowHours,i.options.showTimecodeFrameCount,i.options.framesPerSecond,i.options.secondsDecimalLength,i.options.timeFormat)+"</span>";else{t.querySelector("."+i.options.classPrefix+"currenttime")&&(0,l.addClass)(t.querySelector("."+i.options.classPrefix+"currenttime").parentNode,i.options.classPrefix+"currenttime-container");var r=a.default.createElement("div");r.className=i.options.classPrefix+"time "+i.options.classPrefix+"duration-container",r.innerHTML='<span class="'+i.options.classPrefix+'duration">'+(0,s.secondsToTimeCode)(i.options.duration,i.options.alwaysShowHours,i.options.showTimecodeFrameCount,i.options.framesPerSecond,i.options.secondsDecimalLength,i.options.timeFormat)+"</span>",i.addControlElement(r,"duration")}i.updateDurationCallback=function(){i.controlsAreVisible&&e.updateDuration()},o.addEventListener("timeupdate",i.updateDurationCallback)},cleanduration:function(e,t,n,o){o.removeEventListener("timeupdate",e.updateDurationCallback)},updateCurrent:function(){var e=this,t=e.getCurrentTime();isNaN(t)&&(t=0);var n=(0,s.secondsToTimeCode)(t,e.options.alwaysShowHours,e.options.showTimecodeFrameCount,e.options.framesPerSecond,e.options.secondsDecimalLength,e.options.timeFormat);5<n.length?(0,l.addClass)(e.getElement(e.container),e.options.classPrefix+"long-video"):(0,l.removeClass)(e.getElement(e.container),e.options.classPrefix+"long-video"),e.getElement(e.controls).querySelector("."+e.options.classPrefix+"currenttime")&&(e.getElement(e.controls).querySelector("."+e.options.classPrefix+"currenttime").innerText=n)},updateDuration:function(){var e=this,t=e.getDuration();void 0!==e.media&&(isNaN(t)||t===1/0||t<0)&&(e.media.duration=e.options.duration=t=0),0<e.options.duration&&(t=e.options.duration);var n=(0,s.secondsToTimeCode)(t,e.options.alwaysShowHours,e.options.showTimecodeFrameCount,e.options.framesPerSecond,e.options.secondsDecimalLength,e.options.timeFormat);5<n.length?(0,l.addClass)(e.getElement(e.container),e.options.classPrefix+"long-video"):(0,l.removeClass)(e.getElement(e.container),e.options.classPrefix+"long-video"),e.getElement(e.controls).querySelector("."+e.options.classPrefix+"duration")&&0<t&&(e.getElement(e.controls).querySelector("."+e.options.classPrefix+"duration").innerHTML=n)}})},{16:16,2:2,26:26,30:30}],13:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var L=o(e(2)),c=o(e(7)),N=o(e(5)),i=e(16),r=o(i),m=e(30),M=e(27),O=e(26);Object.assign(i.config,{startLanguage:"",tracksText:null,chaptersText:null,tracksAriaLive:!1,hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),Object.assign(r.default.prototype,{hasChapters:!1,buildtracks:function(o,e,t,n){if(this.findTracks(),o.tracks.length||o.trackFiles&&0!==!o.trackFiles.length){var i=this,r=i.options.tracksAriaLive?' role="log" aria-live="assertive" aria-atomic="false"':"",a=(0,M.isString)(i.options.tracksText)?i.options.tracksText:N.default.t("mejs.captions-subtitles"),s=(0,M.isString)(i.options.chaptersText)?i.options.chaptersText:N.default.t("mejs.captions-chapters"),l=null===o.trackFiles?o.tracks.length:o.trackFiles.length;if(i.domNode.textTracks)for(var c=i.domNode.textTracks.length-1;0<=c;c--)i.domNode.textTracks[c].mode="hidden";i.cleartracks(o),o.captions=L.default.createElement("div"),o.captions.className=i.options.classPrefix+"captions-layer "+i.options.classPrefix+"layer",o.captions.innerHTML='<div class="'+i.options.classPrefix+"captions-position "+i.options.classPrefix+'captions-position-hover"'+r+'><span class="'+i.options.classPrefix+'captions-text"></span></div>',o.captions.style.display="none",t.insertBefore(o.captions,t.firstChild),o.captionsText=o.captions.querySelector("."+i.options.classPrefix+"captions-text"),o.captionsButton=L.default.createElement("div"),o.captionsButton.className=i.options.classPrefix+"button "+i.options.classPrefix+"captions-button",o.captionsButton.innerHTML='<button type="button" aria-controls="'+i.id+'" title="'+a+'" aria-label="'+a+'" tabindex="0"></button><div class="'+i.options.classPrefix+"captions-selector "+i.options.classPrefix+'offscreen"><ul class="'+i.options.classPrefix+'captions-selector-list"><li class="'+i.options.classPrefix+'captions-selector-list-item"><input type="radio" class="'+i.options.classPrefix+'captions-selector-input" name="'+o.id+'_captions" id="'+o.id+'_captions_none" value="none" checked disabled><label class="'+i.options.classPrefix+"captions-selector-label "+i.options.classPrefix+'captions-selected" for="'+o.id+'_captions_none">'+N.default.t("mejs.none")+"</label></li></ul></div>",i.addControlElement(o.captionsButton,"tracks"),o.captionsButton.querySelector("."+i.options.classPrefix+"captions-selector-input").disabled=!1,o.chaptersButton=L.default.createElement("div"),o.chaptersButton.className=i.options.classPrefix+"button "+i.options.classPrefix+"chapters-button",o.chaptersButton.innerHTML='<button type="button" aria-controls="'+i.id+'" title="'+s+'" aria-label="'+s+'" tabindex="0"></button><div class="'+i.options.classPrefix+"chapters-selector "+i.options.classPrefix+'offscreen"><ul class="'+i.options.classPrefix+'chapters-selector-list"></ul></div>';for(var d=0,u=0;u<l;u++){var p=o.tracks[u].kind;o.tracks[u].src.trim()&&("subtitles"===p||"captions"===p?d++:"chapters"!==p||e.querySelector("."+i.options.classPrefix+"chapter-selector")||o.captionsButton.parentNode.insertBefore(o.chaptersButton,o.captionsButton))}o.trackToLoad=-1,o.selectedTrack=null,o.isLoadingTrack=!1;for(var f=0;f<l;f++){var m=o.tracks[f].kind;!o.tracks[f].src.trim()||"subtitles"!==m&&"captions"!==m||o.addTrackButton(o.tracks[f].trackId,o.tracks[f].srclang,o.tracks[f].label)}o.loadNextTrack();var g=["mouseenter","focusin"],h=["mouseleave","focusout"];if(i.options.toggleCaptionsButtonWhenOnlyOne&&1===d)o.captionsButton.addEventListener("click",function(e){var t="none";null===o.selectedTrack&&(t=o.tracks[0].trackId);var n=e.keyCode||e.which;o.setTrack(t,void 0!==n)});else{for(var v=o.captionsButton.querySelectorAll("."+i.options.classPrefix+"captions-selector-label"),y=o.captionsButton.querySelectorAll("input[type=radio]"),b=0,E=g.length;b<E;b++)o.captionsButton.addEventListener(g[b],function(){(0,O.removeClass)(this.querySelector("."+i.options.classPrefix+"captions-selector"),i.options.classPrefix+"offscreen")});for(var w=0,S=h.length;w<S;w++)o.captionsButton.addEventListener(h[w],function(){(0,O.addClass)(this.querySelector("."+i.options.classPrefix+"captions-selector"),i.options.classPrefix+"offscreen")});for(var _=0,C=y.length;_<C;_++)y[_].addEventListener("click",function(e){var t=e.keyCode||e.which;o.setTrack(this.value,void 0!==t)});for(var k=0,x=v.length;k<x;k++)v[k].addEventListener("click",function(e){var t=(0,O.siblings)(this,function(e){return"INPUT"===e.tagName})[0],n=(0,M.createEvent)("click",t);t.dispatchEvent(n),e.preventDefault()});o.captionsButton.addEventListener("keydown",function(e){e.stopPropagation()})}for(var I=0,T=g.length;I<T;I++)o.chaptersButton.addEventListener(g[I],function(){this.querySelector("."+i.options.classPrefix+"chapters-selector-list").children.length&&(0,O.removeClass)(this.querySelector("."+i.options.classPrefix+"chapters-selector"),i.options.classPrefix+"offscreen")});for(var P=0,A=h.length;P<A;P++)o.chaptersButton.addEventListener(h[P],function(){(0,O.addClass)(this.querySelector("."+i.options.classPrefix+"chapters-selector"),i.options.classPrefix+"offscreen")});o.chaptersButton.addEventListener("keydown",function(e){e.stopPropagation()}),o.options.alwaysShowControls?(0,O.addClass)(o.getElement(o.container).querySelector("."+i.options.classPrefix+"captions-position"),i.options.classPrefix+"captions-position-hover"):(o.getElement(o.container).addEventListener("controlsshown",function(){(0,O.addClass)(o.getElement(o.container).querySelector("."+i.options.classPrefix+"captions-position"),i.options.classPrefix+"captions-position-hover")}),o.getElement(o.container).addEventListener("controlshidden",function(){n.paused||(0,O.removeClass)(o.getElement(o.container).querySelector("."+i.options.classPrefix+"captions-position"),i.options.classPrefix+"captions-position-hover")})),n.addEventListener("timeupdate",function(){o.displayCaptions()}),""!==o.options.slidesSelector&&(o.slidesContainer=L.default.querySelectorAll(o.options.slidesSelector),n.addEventListener("timeupdate",function(){o.displaySlides()}))}},cleartracks:function(e){e&&(e.captions&&e.captions.remove(),e.chapters&&e.chapters.remove(),e.captionsText&&e.captionsText.remove(),e.captionsButton&&e.captionsButton.remove(),e.chaptersButton&&e.chaptersButton.remove())},rebuildtracks:function(){var e=this;e.findTracks(),e.buildtracks(e,e.getElement(e.controls),e.getElement(e.layers),e.media)},findTracks:function(){var e=this,t=null===e.trackFiles?e.node.querySelectorAll("track"):e.trackFiles,n=t.length;e.tracks=[];for(var o=0;o<n;o++){var i=t[o],r=i.getAttribute("srclang").toLowerCase()||"",a=e.id+"_track_"+o+"_"+i.getAttribute("kind")+"_"+r;e.tracks.push({trackId:a,srclang:r,src:i.getAttribute("src"),kind:i.getAttribute("kind"),label:i.getAttribute("label")||"",entries:[],isLoaded:!1})}},setTrack:function(e,t){for(var n=this,o=n.captionsButton.querySelectorAll('input[type="radio"]'),i=n.captionsButton.querySelectorAll("."+n.options.classPrefix+"captions-selected"),r=n.captionsButton.querySelector('input[value="'+e+'"]'),a=0,s=o.length;a<s;a++)o[a].checked=!1;for(var l=0,c=i.length;l<c;l++)(0,O.removeClass)(i[l],n.options.classPrefix+"captions-selected");r.checked=!0;for(var d=(0,O.siblings)(r,function(e){return(0,O.hasClass)(e,n.options.classPrefix+"captions-selector-label")}),u=0,p=d.length;u<p;u++)(0,O.addClass)(d[u],n.options.classPrefix+"captions-selected");if("none"===e)n.selectedTrack=null,(0,O.removeClass)(n.captionsButton,n.options.classPrefix+"captions-enabled");else for(var f=0,m=n.tracks.length;f<m;f++){var g=n.tracks[f];if(g.trackId===e){null===n.selectedTrack&&(0,O.addClass)(n.captionsButton,n.options.classPrefix+"captions-enabled"),n.selectedTrack=g,n.captions.setAttribute("lang",n.selectedTrack.srclang),n.displayCaptions();break}}var h=(0,M.createEvent)("captionschange",n.media);h.detail.caption=n.selectedTrack,n.media.dispatchEvent(h),t||setTimeout(function(){n.getElement(n.container).focus()},500)},loadNextTrack:function(){var e=this;e.trackToLoad++,e.trackToLoad<e.tracks.length?(e.isLoadingTrack=!0,e.loadTrack(e.trackToLoad)):(e.isLoadingTrack=!1,e.checkForTracks())},loadTrack:function(e){var t=this,n=t.tracks[e];void 0===n||void 0===n.src&&""===n.src||(0,O.ajax)(n.src,"text",function(e){n.entries="string"==typeof e&&/<tt\s+xml/gi.exec(e)?c.default.TrackFormatParser.dfxp.parse(e):c.default.TrackFormatParser.webvtt.parse(e),n.isLoaded=!0,t.enableTrackButton(n),t.loadNextTrack(),"slides"===n.kind?t.setupSlides(n):"chapters"!==n.kind||t.hasChapters||(t.drawChapters(n),t.hasChapters=!0)},function(){t.removeTrackButton(n.trackId),t.loadNextTrack()})},enableTrackButton:function(e){var t=this,n=e.srclang,o=L.default.getElementById(""+e.trackId);if(o){var i=e.label;""===i&&(i=N.default.t(c.default.language.codes[n])||n),o.disabled=!1;for(var r=(0,O.siblings)(o,function(e){return(0,O.hasClass)(e,t.options.classPrefix+"captions-selector-label")}),a=0,s=r.length;a<s;a++)r[a].innerHTML=i;if(t.options.startLanguage===n){o.checked=!0;var l=(0,M.createEvent)("click",o);o.dispatchEvent(l)}}},removeTrackButton:function(e){var t=L.default.getElementById(""+e);if(t){var n=t.closest("li");n&&n.remove()}},addTrackButton:function(e,t,n){var o=this;""===n&&(n=N.default.t(c.default.language.codes[t])||t),o.captionsButton.querySelector("ul").innerHTML+='<li class="'+o.options.classPrefix+'captions-selector-list-item"><input type="radio" class="'+o.options.classPrefix+'captions-selector-input" name="'+o.id+'_captions" id="'+e+'" value="'+e+'" disabled><label class="'+o.options.classPrefix+'captions-selector-label"for="'+e+'">'+n+" (loading)</label></li>"},checkForTracks:function(){var e=this,t=!1;if(e.options.hideCaptionsButtonWhenEmpty){for(var n=0,o=e.tracks.length;n<o;n++){var i=e.tracks[n].kind;if(("subtitles"===i||"captions"===i)&&e.tracks[n].isLoaded){t=!0;break}}e.captionsButton.style.display=t?"":"none",e.setControlsSize()}},displayCaptions:function(){if(void 0!==this.tracks){var e=this,t=e.selectedTrack;if(null!==t&&t.isLoaded){var n=e.searchTrackPosition(t.entries,e.media.currentTime);if(-1<n)return e.captionsText.innerHTML=function(e){var t=L.default.createElement("div");t.innerHTML=e;for(var n=t.getElementsByTagName("script"),o=n.length;o--;)n[o].remove();for(var i=t.getElementsByTagName("*"),r=0,a=i.length;r<a;r++)for(var s=i[r].attributes,l=Array.prototype.slice.call(s),c=0,d=l.length;c<d;c++)l[c].name.startsWith("on")||l[c].value.startsWith("javascript")?i[r].remove():"style"===l[c].name&&i[r].removeAttribute(l[c].name);return t.innerHTML}(t.entries[n].text),e.captionsText.className=e.options.classPrefix+"captions-text "+(t.entries[n].identifier||""),e.captions.style.display="",void(e.captions.style.height="0px");e.captions.style.display="none"}else e.captions.style.display="none"}},setupSlides:function(e){this.slides=e,this.slides.entries.imgs=[this.slides.entries.length],this.showSlide(0)},showSlide:function(e){var i=this,r=this;if(void 0!==r.tracks&&void 0!==r.slidesContainer){var t=r.slides.entries[e].text,n=r.slides.entries[e].imgs;if(void 0===n||void 0===n.fadeIn){var a=L.default.createElement("img");a.src=t,a.addEventListener("load",function(){var e=i,t=(0,O.siblings)(e,function(e){return t(e)});e.style.display="none",r.slidesContainer.innerHTML+=e.innerHTML,(0,O.fadeIn)(r.slidesContainer.querySelector(a));for(var n=0,o=t.length;n<o;n++)(0,O.fadeOut)(t[n],400)}),r.slides.entries[e].imgs=n=a}else if(!(0,O.visible)(n)){var o=(0,O.siblings)(self,function(e){return o(e)});(0,O.fadeIn)(r.slidesContainer.querySelector(n));for(var s=0,l=o.length;s<l;s++)(0,O.fadeOut)(o[s])}}},displaySlides:function(){if(void 0!==this.slides){var e=this.slides,t=this.searchTrackPosition(e.entries,this.media.currentTime);-1<t&&this.showSlide(t)}},drawChapters:function(e){var r=this,t=e.entries.length;if(t){r.chaptersButton.querySelector("ul").innerHTML="";for(var n=0;n<t;n++)r.chaptersButton.querySelector("ul").innerHTML+='<li class="'+r.options.classPrefix+'chapters-selector-list-item" role="menuitemcheckbox" aria-live="polite" aria-disabled="false" aria-checked="false"><input type="radio" class="'+r.options.classPrefix+'captions-selector-input" name="'+r.id+'_chapters" id="'+r.id+"_chapters_"+n+'" value="'+e.entries[n].start+'" disabled><label class="'+r.options.classPrefix+'chapters-selector-label"for="'+r.id+"_chapters_"+n+'">'+e.entries[n].text+"</label></li>";for(var o=r.chaptersButton.querySelectorAll('input[type="radio"]'),i=r.chaptersButton.querySelectorAll("."+r.options.classPrefix+"chapters-selector-label"),a=0,s=o.length;a<s;a++)o[a].disabled=!1,o[a].checked=!1,o[a].addEventListener("click",function(e){var t=r.chaptersButton.querySelectorAll("li"),n=(0,O.siblings)(this,function(e){return(0,O.hasClass)(e,r.options.classPrefix+"chapters-selector-label")})[0];this.checked=!0,this.parentNode.setAttribute("aria-checked",!0),(0,O.addClass)(n,r.options.classPrefix+"chapters-selected"),(0,O.removeClass)(r.chaptersButton.querySelector("."+r.options.classPrefix+"chapters-selected"),r.options.classPrefix+"chapters-selected");for(var o=0,i=t.length;o<i;o++)t[o].setAttribute("aria-checked",!1);void 0===(e.keyCode||e.which)&&setTimeout(function(){r.getElement(r.container).focus()},500),r.media.setCurrentTime(parseFloat(this.value)),r.media.paused&&r.media.play()});for(var l=0,c=i.length;l<c;l++)i[l].addEventListener("click",function(e){var t=(0,O.siblings)(this,function(e){return"INPUT"===e.tagName})[0],n=(0,M.createEvent)("click",t);t.dispatchEvent(n),e.preventDefault()})}},searchTrackPosition:function(e,t){for(var n=0,o=e.length-1,i=void 0,r=void 0,a=void 0;n<=o;){if(r=e[i=n+o>>1].start,a=e[i].stop,r<=t&&t<a)return i;r<t?n=i+1:t<r&&(o=i-1)}return-1}}),c.default.language={codes:{af:"mejs.afrikaans",sq:"mejs.albanian",ar:"mejs.arabic",be:"mejs.belarusian",bg:"mejs.bulgarian",ca:"mejs.catalan",zh:"mejs.chinese","zh-cn":"mejs.chinese-simplified","zh-tw":"mejs.chines-traditional",hr:"mejs.croatian",cs:"mejs.czech",da:"mejs.danish",nl:"mejs.dutch",en:"mejs.english",et:"mejs.estonian",fl:"mejs.filipino",fi:"mejs.finnish",fr:"mejs.french",gl:"mejs.galician",de:"mejs.german",el:"mejs.greek",ht:"mejs.haitian-creole",iw:"mejs.hebrew",hi:"mejs.hindi",hu:"mejs.hungarian",is:"mejs.icelandic",id:"mejs.indonesian",ga:"mejs.irish",it:"mejs.italian",ja:"mejs.japanese",ko:"mejs.korean",lv:"mejs.latvian",lt:"mejs.lithuanian",mk:"mejs.macedonian",ms:"mejs.malay",mt:"mejs.maltese",no:"mejs.norwegian",fa:"mejs.persian",pl:"mejs.polish",pt:"mejs.portuguese",ro:"mejs.romanian",ru:"mejs.russian",sr:"mejs.serbian",sk:"mejs.slovak",sl:"mejs.slovenian",es:"mejs.spanish",sw:"mejs.swahili",sv:"mejs.swedish",tl:"mejs.tagalog",th:"mejs.thai",tr:"mejs.turkish",uk:"mejs.ukrainian",vi:"mejs.vietnamese",cy:"mejs.welsh",yi:"mejs.yiddish"}},c.default.TrackFormatParser={webvtt:{pattern:/^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(e){for(var t=e.split(/\r?\n/),n=[],o=void 0,i=void 0,r=void 0,a=0,s=t.length;a<s;a++){if((o=this.pattern.exec(t[a]))&&a<t.length){for(0<=a-1&&""!==t[a-1]&&(r=t[a-1]),i=t[++a],a++;""!==t[a]&&a<t.length;)i=i+"\n"+t[a],a++;i=i.trim().replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),n.push({identifier:r,start:0===(0,m.convertSMPTEtoSeconds)(o[1])?.2:(0,m.convertSMPTEtoSeconds)(o[1]),stop:(0,m.convertSMPTEtoSeconds)(o[3]),text:i,settings:o[5]})}r=""}return n}},dfxp:{parse:function(e){var t=(e=$(e).filter("tt")).firstChild,n=t.querySelectorAll("p"),o=e.getElementById(""+t.attr("style")),i=[],r=void 0;if(o.length){o.removeAttribute("id");var a=o.attributes;if(a.length){r={};for(var s=0,l=a.length;s<l;s++)r[a[s].name.split(":")[1]]=a[s].value}}for(var c=0,d=n.length;c<d;c++){var u=void 0,p={start:null,stop:null,style:null,text:null};if(n.eq(c).attr("begin")&&(p.start=(0,m.convertSMPTEtoSeconds)(n.eq(c).attr("begin"))),!p.start&&n.eq(c-1).attr("end")&&(p.start=(0,m.convertSMPTEtoSeconds)(n.eq(c-1).attr("end"))),n.eq(c).attr("end")&&(p.stop=(0,m.convertSMPTEtoSeconds)(n.eq(c).attr("end"))),!p.stop&&n.eq(c+1).attr("begin")&&(p.stop=(0,m.convertSMPTEtoSeconds)(n.eq(c+1).attr("begin"))),r)for(var f in u="",r)u+=f+":"+r[f]+";";u&&(p.style=u),0===p.start&&(p.start=.2),p.text=n.eq(c).innerHTML.trim().replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),i.push(p)}return i}}}},{16:16,2:2,26:26,27:27,30:30,5:5,7:7}],14:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var S=o(e(2)),_=e(16),i=o(_),C=o(e(5)),k=e(25),x=e(27),I=e(26);Object.assign(_.config,{muteText:null,unmuteText:null,allyVolumeControlText:null,hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical",startVolume:.8}),Object.assign(i.default.prototype,{buildvolume:function(e,t,n,o){if(!k.IS_ANDROID&&!k.IS_IOS||!this.options.hideVolumeOnTouchDevices){var a=this,s=a.isVideo?a.options.videoVolume:a.options.audioVolume,r=(0,x.isString)(a.options.muteText)?a.options.muteText:C.default.t("mejs.mute"),l=(0,x.isString)(a.options.unmuteText)?a.options.unmuteText:C.default.t("mejs.unmute"),i=(0,x.isString)(a.options.allyVolumeControlText)?a.options.allyVolumeControlText:C.default.t("mejs.volume-help-text"),c=S.default.createElement("div");if(c.className=a.options.classPrefix+"button "+a.options.classPrefix+"volume-button "+a.options.classPrefix+"mute",c.innerHTML="horizontal"===s?'<button type="button" aria-controls="'+a.id+'" title="'+r+'" aria-label="'+r+'" tabindex="0"></button>':'<button type="button" aria-controls="'+a.id+'" title="'+r+'" aria-label="'+r+'" tabindex="0"></button><a href="javascript:void(0);" class="'+a.options.classPrefix+'volume-slider" aria-label="'+C.default.t("mejs.volume-slider")+'" aria-valuemin="0" aria-valuemax="100" role="slider" aria-orientation="vertical"><span class="'+a.options.classPrefix+'offscreen">'+i+'</span><div class="'+a.options.classPrefix+'volume-total"><div class="'+a.options.classPrefix+'volume-current"></div><div class="'+a.options.classPrefix+'volume-handle"></div></div></a>',a.addControlElement(c,"volume"),a.options.keyActions.push({keys:[38],action:function(e){var t=e.getElement(e.container).querySelector("."+_.config.classPrefix+"volume-slider");(t||e.getElement(e.container).querySelector("."+_.config.classPrefix+"volume-slider").matches(":focus"))&&(t.style.display="block"),e.isVideo&&(e.showControls(),e.startControlsTimer());var n=Math.min(e.volume+.1,1);e.setVolume(n),0<n&&e.setMuted(!1)}},{keys:[40],action:function(e){var t=e.getElement(e.container).querySelector("."+_.config.classPrefix+"volume-slider");t&&(t.style.display="block"),e.isVideo&&(e.showControls(),e.startControlsTimer());var n=Math.max(e.volume-.1,0);e.setVolume(n),n<=.1&&e.setMuted(!0)}},{keys:[77],action:function(e){e.getElement(e.container).querySelector("."+_.config.classPrefix+"volume-slider").style.display="block",e.isVideo&&(e.showControls(),e.startControlsTimer()),e.media.muted?e.setMuted(!1):e.setMuted(!0)}}),"horizontal"===s){var d=S.default.createElement("a");d.className=a.options.classPrefix+"horizontal-volume-slider",d.href="javascript:void(0);",d.setAttribute("aria-label",C.default.t("mejs.volume-slider")),d.setAttribute("aria-valuemin",0),d.setAttribute("aria-valuemax",100),d.setAttribute("role","slider"),d.innerHTML+='<span class="'+a.options.classPrefix+'offscreen">'+i+'</span><div class="'+a.options.classPrefix+'horizontal-volume-total"><div class="'+a.options.classPrefix+'horizontal-volume-current"></div><div class="'+a.options.classPrefix+'horizontal-volume-handle"></div></div>',c.parentNode.insertBefore(d,c.nextSibling)}var u=!1,p=!1,f=!1,m="vertical"===s?a.getElement(a.container).querySelector("."+a.options.classPrefix+"volume-slider"):a.getElement(a.container).querySelector("."+a.options.classPrefix+"horizontal-volume-slider"),g="vertical"===s?a.getElement(a.container).querySelector("."+a.options.classPrefix+"volume-total"):a.getElement(a.container).querySelector("."+a.options.classPrefix+"horizontal-volume-total"),h="vertical"===s?a.getElement(a.container).querySelector("."+a.options.classPrefix+"volume-current"):a.getElement(a.container).querySelector("."+a.options.classPrefix+"horizontal-volume-current"),v="vertical"===s?a.getElement(a.container).querySelector("."+a.options.classPrefix+"volume-handle"):a.getElement(a.container).querySelector("."+a.options.classPrefix+"horizontal-volume-handle"),y=function(e){if(null!==e&&!isNaN(e)&&void 0!==e){if(e=Math.max(0,e),0===(e=Math.min(e,1))){(0,I.removeClass)(c,a.options.classPrefix+"mute"),(0,I.addClass)(c,a.options.classPrefix+"unmute");var t=c.firstElementChild;t.setAttribute("title",l),t.setAttribute("aria-label",l)}else{(0,I.removeClass)(c,a.options.classPrefix+"unmute"),(0,I.addClass)(c,a.options.classPrefix+"mute");var n=c.firstElementChild;n.setAttribute("title",r),n.setAttribute("aria-label",r)}var o=100*e+"%",i=getComputedStyle(v);"vertical"===s?(h.style.bottom=0,h.style.height=o,v.style.bottom=o,v.style.marginBottom=-parseFloat(i.height)/2+"px"):(h.style.left=0,h.style.width=o,v.style.left=o,v.style.marginLeft=-parseFloat(i.width)/2+"px")}},b=function(e){var t=(0,I.offset)(g),n=getComputedStyle(g);f=!0;var o=null;if("vertical"===s){var i=parseFloat(n.height);if(o=(i-(e.pageY-t.top))/i,0===t.top||0===t.left)return}else{var r=parseFloat(n.width);o=(e.pageX-t.left)/r}o=Math.max(0,o),o=Math.min(o,1),y(o),a.setMuted(0===o),a.setVolume(o),e.preventDefault(),e.stopPropagation()},E=function(){a.muted?(y(0),(0,I.removeClass)(c,a.options.classPrefix+"mute"),(0,I.addClass)(c,a.options.classPrefix+"unmute")):(y(o.volume),(0,I.removeClass)(c,a.options.classPrefix+"unmute"),(0,I.addClass)(c,a.options.classPrefix+"mute"))};e.getElement(e.container).addEventListener("keydown",function(e){e.target.closest("."+a.options.classPrefix+"container")||"vertical"!==s||(m.style.display="none")}),c.addEventListener("mouseenter",function(e){e.target===c&&(m.style.display="block",p=!0,e.preventDefault(),e.stopPropagation())}),c.addEventListener("focusin",function(){m.style.display="block",p=!0}),c.addEventListener("focusout",function(e){e.relatedTarget&&(!e.relatedTarget||e.relatedTarget.matches("."+a.options.classPrefix+"volume-slider"))||"vertical"!==s||(m.style.display="none")}),c.addEventListener("mouseleave",function(){p=!1,u||"vertical"!==s||(m.style.display="none")}),c.addEventListener("focusout",function(){p=!1}),c.addEventListener("keydown",function(e){if(a.options.enableKeyboard&&a.options.keyActions.length){var t=e.which||e.keyCode||0,n=o.volume;switch(t){case 38:n=Math.min(n+.1,1);break;case 40:n=Math.max(0,n-.1);break;default:return!0}u=!1,y(n),o.setVolume(n),e.preventDefault(),e.stopPropagation()}}),c.querySelector("button").addEventListener("click",function(){o.setMuted(!o.muted);var e=(0,x.createEvent)("volumechange",o);o.dispatchEvent(e)}),m.addEventListener("dragstart",function(){return!1}),m.addEventListener("mouseover",function(){p=!0}),m.addEventListener("focusin",function(){m.style.display="block",p=!0}),m.addEventListener("focusout",function(){p=!1,u||"vertical"!==s||(m.style.display="none")}),m.addEventListener("mousedown",function(e){b(e),a.globalBind("mousemove.vol",function(e){var t=e.target;u&&(t===m||t.closest("vertical"===s?"."+a.options.classPrefix+"volume-slider":"."+a.options.classPrefix+"horizontal-volume-slider"))&&b(e)}),a.globalBind("mouseup.vol",function(){u=!1,p||"vertical"!==s||(m.style.display="none")}),u=!0,e.preventDefault(),e.stopPropagation()}),o.addEventListener("volumechange",function(e){var t;u||E(),t=Math.floor(100*o.volume),m.setAttribute("aria-valuenow",t),m.setAttribute("aria-valuetext",t+"%")});var w=!1;o.addEventListener("rendererready",function(){f||setTimeout(function(){w=!0,(0===e.options.startVolume||o.originalNode.muted)&&(o.setMuted(!0),e.options.startVolume=0),o.setVolume(e.options.startVolume),a.setControlsSize()},250)}),o.addEventListener("loadedmetadata",function(){setTimeout(function(){f||w||((0===e.options.startVolume||o.originalNode.muted)&&o.setMuted(!0),o.setVolume(e.options.startVolume),a.setControlsSize()),w=!1},250)}),(0===e.options.startVolume||o.originalNode.muted)&&(o.setMuted(!0),e.options.startVolume=0,E()),a.getElement(a.container).addEventListener("controlsresize",function(){E()})}}})},{16:16,2:2,25:25,26:26,27:27,5:5}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EN={"mejs.plural-form":1,"mejs.download-file":"Download File","mejs.install-flash":"You are using a browser that does not have Flash player enabled or installed. Please turn on your Flash player plugin or download the latest version from https://get.adobe.com/flashplayer/","mejs.fullscreen":"Fullscreen","mejs.play":"Play","mejs.pause":"Pause","mejs.time-slider":"Time Slider","mejs.time-help-text":"Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.","mejs.live-broadcast":"Live Broadcast","mejs.volume-help-text":"Use Up/Down Arrow keys to increase or decrease volume.","mejs.unmute":"Unmute","mejs.mute":"Mute","mejs.volume-slider":"Volume Slider","mejs.video-player":"Video Player","mejs.audio-player":"Audio Player","mejs.captions-subtitles":"Captions/Subtitles","mejs.captions-chapters":"Chapters","mejs.none":"None","mejs.afrikaans":"Afrikaans","mejs.albanian":"Albanian","mejs.arabic":"Arabic","mejs.belarusian":"Belarusian","mejs.bulgarian":"Bulgarian","mejs.catalan":"Catalan","mejs.chinese":"Chinese","mejs.chinese-simplified":"Chinese (Simplified)","mejs.chinese-traditional":"Chinese (Traditional)","mejs.croatian":"Croatian","mejs.czech":"Czech","mejs.danish":"Danish","mejs.dutch":"Dutch","mejs.english":"English","mejs.estonian":"Estonian","mejs.filipino":"Filipino","mejs.finnish":"Finnish","mejs.french":"French","mejs.galician":"Galician","mejs.german":"German","mejs.greek":"Greek","mejs.haitian-creole":"Haitian Creole","mejs.hebrew":"Hebrew","mejs.hindi":"Hindi","mejs.hungarian":"Hungarian","mejs.icelandic":"Icelandic","mejs.indonesian":"Indonesian","mejs.irish":"Irish","mejs.italian":"Italian","mejs.japanese":"Japanese","mejs.korean":"Korean","mejs.latvian":"Latvian","mejs.lithuanian":"Lithuanian","mejs.macedonian":"Macedonian","mejs.malay":"Malay","mejs.maltese":"Maltese","mejs.norwegian":"Norwegian","mejs.persian":"Persian","mejs.polish":"Polish","mejs.portuguese":"Portuguese","mejs.romanian":"Romanian","mejs.russian":"Russian","mejs.serbian":"Serbian","mejs.slovak":"Slovak","mejs.slovenian":"Slovenian","mejs.spanish":"Spanish","mejs.swahili":"Swahili","mejs.swedish":"Swedish","mejs.tagalog":"Tagalog","mejs.thai":"Thai","mejs.turkish":"Turkish","mejs.ukrainian":"Ukrainian","mejs.vietnamese":"Vietnamese","mejs.welsh":"Welsh","mejs.yiddish":"Yiddish"}},{}],16:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.config=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),w=o(e(3)),S=o(e(2)),h=o(e(7)),v=o(e(6)),s=o(e(17)),y=o(e(5)),_=e(25),b=e(27),c=e(30),E=e(28),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e(26));h.default.mepIndex=0,h.default.players={};var l=n.config={poster:"",showPosterWhenEnded:!1,showPosterWhenPaused:!1,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:40,defaultSeekBackwardInterval:function(e){return.05*e.getDuration()},defaultSeekForwardInterval:function(e){return.05*e.getDuration()},setDimensions:!0,audioWidth:-1,audioHeight:-1,loop:!1,autoRewind:!0,enableAutosize:!0,timeFormat:"",alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,hideVideoControlsOnPause:!1,clickToPlayPause:!0,controlsTimeoutDefault:1500,controlsTimeoutMouseEnter:2500,controlsTimeoutMouseLeave:1e3,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],useDefaultControls:!1,isVideo:!0,stretching:"auto",classPrefix:"mejs__",enableKeyboard:!0,pauseOtherPlayers:!0,secondsDecimalLength:0,customError:null,keyActions:[{keys:[32,179],action:function(e){_.IS_FIREFOX||(e.paused||e.ended?e.play():e.pause())}}]};h.default.MepDefaults=l;var r=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=this,o="string"==typeof e?S.default.getElementById(e):e;if(!(n instanceof r))return new r(o,t);if(n.node=n.media=o,n.node){if(n.media.player)return n.media.player;if(n.hasFocus=!1,n.controlsAreVisible=!0,n.controlsEnabled=!0,n.controlsTimer=null,n.currentMediaTime=0,n.proxy=null,void 0===t){var i=n.node.getAttribute("data-mejsoptions");t=i?JSON.parse(i):{}}return n.options=Object.assign({},l,t),n.options.loop&&!n.media.getAttribute("loop")?(n.media.loop=!0,n.node.loop=!0):n.media.loop&&(n.options.loop=!0),n.options.timeFormat||(n.options.timeFormat="mm:ss",n.options.alwaysShowHours&&(n.options.timeFormat="hh:mm:ss"),n.options.showTimecodeFrameCount&&(n.options.timeFormat+=":ff")),(0,c.calculateTimeFormat)(0,n.options,n.options.framesPerSecond||25),n.id="mep_"+h.default.mepIndex++,(h.default.players[n.id]=n).init(),n}}return a(r,[{key:"getElement",value:function(e){return e}},{key:"init",value:function(){var n=this,e=Object.assign({},n.options,{success:function(e,t){n._meReady(e,t)},error:function(e){n._handleError(e)}}),t=n.node.tagName.toLowerCase();if(n.isDynamic="audio"!==t&&"video"!==t&&"iframe"!==t,n.isVideo=n.isDynamic?n.options.isVideo:"audio"!==t&&n.options.isVideo,n.mediaFiles=null,n.trackFiles=null,_.IS_IPAD&&n.options.iPadUseNativeControls||_.IS_IPHONE&&n.options.iPhoneUseNativeControls)n.node.setAttribute("controls",!0),_.IS_IPAD&&n.node.getAttribute("autoplay")&&n.play();else if(!n.isVideo&&(n.isVideo||!n.options.features.length&&!n.options.useDefaultControls)||_.IS_ANDROID&&n.options.AndroidUseNativeControls)n.isVideo||n.options.features.length||n.options.useDefaultControls||(n.node.style.display="none");else{n.node.removeAttribute("controls");var o=n.isVideo?y.default.t("mejs.video-player"):y.default.t("mejs.audio-player"),i=S.default.createElement("span");if(i.className=n.options.classPrefix+"offscreen",i.innerText=o,n.media.parentNode.insertBefore(i,n.media),n.container=S.default.createElement("div"),n.getElement(n.container).id=n.id,n.getElement(n.container).className=n.options.classPrefix+"container "+n.options.classPrefix+"container-keyboard-inactive "+n.media.className,n.getElement(n.container).tabIndex=0,n.getElement(n.container).setAttribute("role","application"),n.getElement(n.container).setAttribute("aria-label",o),n.getElement(n.container).innerHTML='<div class="'+n.options.classPrefix+'inner"><div class="'+n.options.classPrefix+'mediaelement"></div><div class="'+n.options.classPrefix+'layers"></div><div class="'+n.options.classPrefix+'controls"></div></div>',n.getElement(n.container).addEventListener("focus",function(e){if(!n.controlsAreVisible&&!n.hasFocus&&n.controlsEnabled){n.showControls(!0);var t=(0,b.isNodeAfter)(e.relatedTarget,n.getElement(n.container))?"."+n.options.classPrefix+"controls ."+n.options.classPrefix+"button:last-child > button":"."+n.options.classPrefix+"playpause-button > button";n.getElement(n.container).querySelector(t).focus()}}),n.node.parentNode.insertBefore(n.getElement(n.container),n.node),n.options.features.length||n.options.useDefaultControls||(n.getElement(n.container).style.background="transparent",n.getElement(n.container).querySelector("."+n.options.classPrefix+"controls").style.display="none"),n.isVideo&&"fill"===n.options.stretching&&!C.hasClass(n.getElement(n.container).parentNode,n.options.classPrefix+"fill-container")){n.outerContainer=n.media.parentNode;var r=S.default.createElement("div");r.className=n.options.classPrefix+"fill-container",n.getElement(n.container).parentNode.insertBefore(r,n.getElement(n.container)),r.appendChild(n.getElement(n.container))}if(_.IS_ANDROID&&C.addClass(n.getElement(n.container),n.options.classPrefix+"android"),_.IS_IOS&&C.addClass(n.getElement(n.container),n.options.classPrefix+"ios"),_.IS_IPAD&&C.addClass(n.getElement(n.container),n.options.classPrefix+"ipad"),_.IS_IPHONE&&C.addClass(n.getElement(n.container),n.options.classPrefix+"iphone"),C.addClass(n.getElement(n.container),n.isVideo?n.options.classPrefix+"video":n.options.classPrefix+"audio"),_.IS_SAFARI&&!_.IS_IOS){C.addClass(n.getElement(n.container),n.options.classPrefix+"hide-cues");for(var a=n.node.cloneNode(),s=n.node.children,l=[],c=[],d=0,u=s.length;d<u;d++){var p=s[d];!function(){switch(p.tagName.toLowerCase()){case"source":var t={};Array.prototype.slice.call(p.attributes).forEach(function(e){t[e.name]=e.value}),t.type=(0,E.formatType)(t.src,t.type),l.push(t);break;case"track":p.mode="hidden",c.push(p);break;default:a.appendChild(p)}}()}n.node.remove(),n.node=n.media=a,l.length&&(n.mediaFiles=l),c.length&&(n.trackFiles=c)}n.getElement(n.container).querySelector("."+n.options.classPrefix+"mediaelement").appendChild(n.node),(n.media.player=n).controls=n.getElement(n.container).querySelector("."+n.options.classPrefix+"controls"),n.layers=n.getElement(n.container).querySelector("."+n.options.classPrefix+"layers");var f=n.isVideo?"video":"audio",m=f.substring(0,1).toUpperCase()+f.substring(1);0<n.options[f+"Width"]||-1<n.options[f+"Width"].toString().indexOf("%")?n.width=n.options[f+"Width"]:""!==n.node.style.width&&null!==n.node.style.width?n.width=n.node.style.width:n.node.getAttribute("width")?n.width=n.node.getAttribute("width"):n.width=n.options["default"+m+"Width"],0<n.options[f+"Height"]||-1<n.options[f+"Height"].toString().indexOf("%")?n.height=n.options[f+"Height"]:""!==n.node.style.height&&null!==n.node.style.height?n.height=n.node.style.height:n.node.getAttribute("height")?n.height=n.node.getAttribute("height"):n.height=n.options["default"+m+"Height"],n.initialAspectRatio=n.height>=n.width?n.width/n.height:n.height/n.width,n.setPlayerSize(n.width,n.height),e.pluginWidth=n.width,e.pluginHeight=n.height}if(h.default.MepDefaults=e,new v.default(n.media,e,n.mediaFiles),void 0!==n.getElement(n.container)&&n.options.features.length&&n.controlsAreVisible&&!n.options.hideVideoControlsOnLoad){var g=(0,b.createEvent)("controlsshown",n.getElement(n.container));n.getElement(n.container).dispatchEvent(g)}}},{key:"showControls",value:function(e){var o=this;if(e=void 0===e||e,!o.controlsAreVisible&&o.isVideo){if(e)!function(){C.fadeIn(o.getElement(o.controls),200,function(){C.removeClass(o.getElement(o.controls),o.options.classPrefix+"offscreen");var e=(0,b.createEvent)("controlsshown",o.getElement(o.container));o.getElement(o.container).dispatchEvent(e)});for(var n=o.getElement(o.container).querySelectorAll("."+o.options.classPrefix+"control"),e=0,t=n.length;e<t;e++)!function(e,t){C.fadeIn(n[e],200,function(){C.removeClass(n[e],o.options.classPrefix+"offscreen")})}(e)}();else{C.removeClass(o.getElement(o.controls),o.options.classPrefix+"offscreen"),o.getElement(o.controls).style.display="",o.getElement(o.controls).style.opacity=1;for(var t=o.getElement(o.container).querySelectorAll("."+o.options.classPrefix+"control"),n=0,i=t.length;n<i;n++)C.removeClass(t[n],o.options.classPrefix+"offscreen"),t[n].style.display="";var r=(0,b.createEvent)("controlsshown",o.getElement(o.container));o.getElement(o.container).dispatchEvent(r)}o.controlsAreVisible=!0,o.setControlsSize()}}},{key:"hideControls",value:function(e,t){var o=this;if(e=void 0===e||e,!0===t||!(!o.controlsAreVisible||o.options.alwaysShowControls||o.paused&&4===o.readyState&&(!o.options.hideVideoControlsOnLoad&&o.currentTime<=0||!o.options.hideVideoControlsOnPause&&0<o.currentTime)||o.isVideo&&!o.options.hideVideoControlsOnLoad&&!o.readyState||o.ended)){if(e)!function(){C.fadeOut(o.getElement(o.controls),200,function(){C.addClass(o.getElement(o.controls),o.options.classPrefix+"offscreen"),o.getElement(o.controls).style.display="";var e=(0,b.createEvent)("controlshidden",o.getElement(o.container));o.getElement(o.container).dispatchEvent(e)});for(var n=o.getElement(o.container).querySelectorAll("."+o.options.classPrefix+"control"),e=0,t=n.length;e<t;e++)!function(e,t){C.fadeOut(n[e],200,function(){C.addClass(n[e],o.options.classPrefix+"offscreen"),n[e].style.display=""})}(e)}();else{C.addClass(o.getElement(o.controls),o.options.classPrefix+"offscreen"),o.getElement(o.controls).style.display="",o.getElement(o.controls).style.opacity=0;for(var n=o.getElement(o.container).querySelectorAll("."+o.options.classPrefix+"control"),i=0,r=n.length;i<r;i++)C.addClass(n[i],o.options.classPrefix+"offscreen"),n[i].style.display="";var a=(0,b.createEvent)("controlshidden",o.getElement(o.container));o.getElement(o.container).dispatchEvent(a)}o.controlsAreVisible=!1}}},{key:"startControlsTimer",value:function(e){var t=this;e=void 0!==e?e:t.options.controlsTimeoutDefault,t.killControlsTimer("start"),t.controlsTimer=setTimeout(function(){t.hideControls(),t.killControlsTimer("hide")},e)}},{key:"killControlsTimer",value:function(){null!==this.controlsTimer&&(clearTimeout(this.controlsTimer),delete this.controlsTimer,this.controlsTimer=null)}},{key:"disableControls",value:function(){this.killControlsTimer(),this.controlsEnabled=!1,this.hideControls(!1,!0)}},{key:"enableControls",value:function(){this.controlsEnabled=!0,this.showControls(!1)}},{key:"_setDefaultPlayer",value:function(){var e=this;e.proxy&&e.proxy.pause(),e.proxy=new s.default(e),e.media.addEventListener("loadedmetadata",function(){0<e.getCurrentTime()&&0<e.currentMediaTime&&(e.setCurrentTime(e.currentMediaTime),_.IS_IOS||_.IS_ANDROID||e.play())})}},{key:"_meReady",value:function(e,t){var n=this,o=t.getAttribute("autoplay"),i=!(null==o||"false"===o),r=null!==e.rendererName&&/(native|html5)/i.test(n.media.rendererName);if(n.getElement(n.controls)&&n.enableControls(),n.getElement(n.container)&&n.getElement(n.container).querySelector("."+n.options.classPrefix+"overlay-play")&&(n.getElement(n.container).querySelector("."+n.options.classPrefix+"overlay-play").style.display=""),!n.created){if(n.created=!0,n.media=e,n.domNode=t,!(_.IS_ANDROID&&n.options.AndroidUseNativeControls||_.IS_IPAD&&n.options.iPadUseNativeControls||_.IS_IPHONE&&n.options.iPhoneUseNativeControls)){if(!n.isVideo&&!n.options.features.length&&!n.options.useDefaultControls)return i&&r&&n.play(),void(n.options.success&&("string"==typeof n.options.success?w.default[n.options.success](n.media,n.domNode,n):n.options.success(n.media,n.domNode,n)));if(n.featurePosition={},n._setDefaultPlayer(),n.buildposter(n,n.getElement(n.controls),n.getElement(n.layers),n.media),n.buildkeyboard(n,n.getElement(n.controls),n.getElement(n.layers),n.media),n.buildoverlays(n,n.getElement(n.controls),n.getElement(n.layers),n.media),n.options.useDefaultControls){var a=["playpause","current","progress","duration","tracks","volume","fullscreen"];n.options.features=a.concat(n.options.features.filter(function(e){return-1===a.indexOf(e)}))}n.buildfeatures(n,n.getElement(n.controls),n.getElement(n.layers),n.media);var s=(0,b.createEvent)("controlsready",n.getElement(n.container));n.getElement(n.container).dispatchEvent(s),n.setPlayerSize(n.width,n.height),n.setControlsSize(),n.isVideo&&(n.clickToPlayPauseCallback=function(){if(n.options.clickToPlayPause){var e=n.getElement(n.container).querySelector("."+n.options.classPrefix+"overlay-button"),t=e.getAttribute("aria-pressed");n.paused&&t?n.pause():n.paused?n.play():n.pause(),e.setAttribute("aria-pressed",!t),n.getElement(n.container).focus()}},n.createIframeLayer(),n.media.addEventListener("click",n.clickToPlayPauseCallback),!_.IS_ANDROID&&!_.IS_IOS||n.options.alwaysShowControls?(n.getElement(n.container).addEventListener("mouseenter",function(){n.controlsEnabled&&(n.options.alwaysShowControls||(n.killControlsTimer("enter"),n.showControls(),n.startControlsTimer(n.options.controlsTimeoutMouseEnter)))}),n.getElement(n.container).addEventListener("mousemove",function(){n.controlsEnabled&&(n.controlsAreVisible||n.showControls(),n.options.alwaysShowControls||n.startControlsTimer(n.options.controlsTimeoutMouseEnter))}),n.getElement(n.container).addEventListener("mouseleave",function(){n.controlsEnabled&&(n.paused||n.options.alwaysShowControls||n.startControlsTimer(n.options.controlsTimeoutMouseLeave))})):n.node.addEventListener("touchstart",function(){n.controlsAreVisible?n.hideControls(!1):n.controlsEnabled&&n.showControls(!1)},!!_.SUPPORT_PASSIVE_EVENT&&{passive:!0}),n.options.hideVideoControlsOnLoad&&n.hideControls(!1),n.options.enableAutosize&&n.media.addEventListener("loadedmetadata",function(e){var t=void 0!==e?e.detail.target||e.target:n.media;n.options.videoHeight<=0&&!n.domNode.getAttribute("height")&&!n.domNode.style.height&&null!==t&&!isNaN(t.videoHeight)&&(n.setPlayerSize(t.videoWidth,t.videoHeight),n.setControlsSize(),n.media.setSize(t.videoWidth,t.videoHeight))})),n.media.addEventListener("play",function(){for(var e in n.hasFocus=!0,h.default.players)if(h.default.players.hasOwnProperty(e)){var t=h.default.players[e];t.id===n.id||!n.options.pauseOtherPlayers||t.paused||t.ended||(t.pause(),t.hasFocus=!1)}_.IS_ANDROID||_.IS_IOS||n.options.alwaysShowControls||!n.isVideo||n.hideControls()}),n.media.addEventListener("ended",function(){if(n.options.autoRewind)try{n.setCurrentTime(0),setTimeout(function(){var e=n.getElement(n.container).querySelector("."+n.options.classPrefix+"overlay-loading");e&&e.parentNode&&(e.parentNode.style.display="none")},20)}catch(e){}"function"==typeof n.media.renderer.stop?n.media.renderer.stop():n.pause(),n.setProgressRail&&n.setProgressRail(),n.setCurrentRail&&n.setCurrentRail(),n.options.loop?n.play():!n.options.alwaysShowControls&&n.controlsEnabled&&n.showControls()}),n.media.addEventListener("loadedmetadata",function(){(0,c.calculateTimeFormat)(n.getDuration(),n.options,n.options.framesPerSecond||25),n.updateDuration&&n.updateDuration(),n.updateCurrent&&n.updateCurrent(),n.isFullScreen||(n.setPlayerSize(n.width,n.height),n.setControlsSize())});var l=null;n.media.addEventListener("timeupdate",function(){isNaN(n.getDuration())||l===n.getDuration()||(l=n.getDuration(),(0,c.calculateTimeFormat)(l,n.options,n.options.framesPerSecond||25),n.updateDuration&&n.updateDuration(),n.updateCurrent&&n.updateCurrent(),n.setControlsSize())}),n.getElement(n.container).addEventListener("click",function(e){C.addClass(e.currentTarget,n.options.classPrefix+"container-keyboard-inactive")}),n.getElement(n.container).addEventListener("focusin",function(e){C.removeClass(e.currentTarget,n.options.classPrefix+"container-keyboard-inactive"),!n.isVideo||_.IS_ANDROID||_.IS_IOS||!n.controlsEnabled||n.options.alwaysShowControls||(n.killControlsTimer("enter"),n.showControls(),n.startControlsTimer(n.options.controlsTimeoutMouseEnter))}),n.getElement(n.container).addEventListener("focusout",function(e){setTimeout(function(){e.relatedTarget&&n.keyboardAction&&!e.relatedTarget.closest("."+n.options.classPrefix+"container")&&(n.keyboardAction=!1,!n.isVideo||n.options.alwaysShowControls||n.paused||n.startControlsTimer(n.options.controlsTimeoutMouseLeave))},0)}),setTimeout(function(){n.setPlayerSize(n.width,n.height),n.setControlsSize()},0),n.globalResizeCallback=function(){n.isFullScreen||_.HAS_TRUE_NATIVE_FULLSCREEN&&S.default.webkitIsFullScreen||n.setPlayerSize(n.width,n.height),n.setControlsSize()},n.globalBind("resize",n.globalResizeCallback)}i&&r&&n.play(),n.options.success&&("string"==typeof n.options.success?w.default[n.options.success](n.media,n.domNode,n):n.options.success(n.media,n.domNode,n))}}},{key:"_handleError",value:function(e,t,n){var o=this,i=o.getElement(o.layers).querySelector("."+o.options.classPrefix+"overlay-play");i&&(i.style.display="none"),o.options.error&&o.options.error(e,t,n),o.getElement(o.container).querySelector("."+o.options.classPrefix+"cannotplay")&&o.getElement(o.container).querySelector("."+o.options.classPrefix+"cannotplay").remove();var r=S.default.createElement("div");r.className=o.options.classPrefix+"cannotplay",r.style.width="100%",r.style.height="100%";var a="function"==typeof o.options.customError?o.options.customError(o.media,o.media.originalNode):o.options.customError,s="";if(!a){var l=o.media.originalNode.getAttribute("poster");if(l&&(s='<img src="'+l+'" alt="'+h.default.i18n.t("mejs.download-file")+'">'),e.message&&(a="<p>"+e.message+"</p>"),e.urls)for(var c=0,d=e.urls.length;c<d;c++){var u=e.urls[c];a+='<a href="'+u.src+'" data-type="'+u.type+'"><span>'+h.default.i18n.t("mejs.download-file")+": "+u.src+"</span></a>"}}a&&o.getElement(o.layers).querySelector("."+o.options.classPrefix+"overlay-error")&&(r.innerHTML=a,o.getElement(o.layers).querySelector("."+o.options.classPrefix+"overlay-error").innerHTML=""+s+r.outerHTML,o.getElement(o.layers).querySelector("."+o.options.classPrefix+"overlay-error").parentNode.style.display="block"),o.controlsEnabled&&o.disableControls()}},{key:"setPlayerSize",value:function(e,t){var n=this;if(!n.options.setDimensions)return!1;switch(void 0!==e&&(n.width=e),void 0!==t&&(n.height=t),n.options.stretching){case"fill":n.isVideo?n.setFillMode():n.setDimensions(n.width,n.height);break;case"responsive":n.setResponsiveMode();break;case"none":n.setDimensions(n.width,n.height);break;default:!0===n.hasFluidMode()?n.setResponsiveMode():n.setDimensions(n.width,n.height)}}},{key:"hasFluidMode",value:function(){var e=this;return-1!==e.height.toString().indexOf("%")||e.node&&e.node.style.maxWidth&&"none"!==e.node.style.maxWidth&&e.node.style.maxWidth!==e.width||e.node&&e.node.currentStyle&&"100%"===e.node.currentStyle.maxWidth}},{key:"setResponsiveMode",value:function(){var e,o=this,t=function(){for(var t=void 0,n=o.getElement(o.container);n;){try{if(_.IS_FIREFOX&&"html"===n.tagName.toLowerCase()&&w.default.self!==w.default.top&&null!==w.default.frameElement)return w.default.frameElement;t=n.parentElement}catch(e){t=n.parentElement}if(t&&C.visible(t))return t;n=t}return null}(),n=t?getComputedStyle(t,null):getComputedStyle(S.default.body,null),i=o.isVideo?o.node.videoWidth&&0<o.node.videoWidth?o.node.videoWidth:o.node.getAttribute("width")?o.node.getAttribute("width"):o.options.defaultVideoWidth:o.options.defaultAudioWidth,r=o.isVideo?o.node.videoHeight&&0<o.node.videoHeight?o.node.videoHeight:o.node.getAttribute("height")?o.node.getAttribute("height"):o.options.defaultVideoHeight:o.options.defaultAudioHeight,a=(e=1,o.isVideo&&(e=o.node.videoWidth&&0<o.node.videoWidth&&o.node.videoHeight&&0<o.node.videoHeight?o.height>=o.width?o.node.videoWidth/o.node.videoHeight:o.node.videoHeight/o.node.videoWidth:o.initialAspectRatio,(isNaN(e)||e<.01||100<e)&&(e=1)),e),s=parseFloat(n.height),l=void 0,c=parseFloat(n.width);if(l=o.isVideo?"100%"===o.height?parseFloat(c*r/i,10):o.height>=o.width?parseFloat(c/a,10):parseFloat(c*a,10):r,isNaN(l)&&(l=s),0<o.getElement(o.container).parentNode.length&&"body"===o.getElement(o.container).parentNode.tagName.toLowerCase()&&(c=w.default.innerWidth||S.default.documentElement.clientWidth||S.default.body.clientWidth,l=w.default.innerHeight||S.default.documentElement.clientHeight||S.default.body.clientHeight),l&&c){o.getElement(o.container).style.width=c+"px",o.getElement(o.container).style.height=l+"px",o.node.style.width="100%",o.node.style.height="100%",o.isVideo&&o.media.setSize&&o.media.setSize(c,l);for(var d=o.getElement(o.layers).children,u=0,p=d.length;u<p;u++)d[u].style.width="100%",d[u].style.height="100%"}}},{key:"setFillMode",value:function(){var e=this,t=w.default.self!==w.default.top&&null!==w.default.frameElement,n=function(){for(var t=void 0,n=e.getElement(e.container);n;){try{if(_.IS_FIREFOX&&"html"===n.tagName.toLowerCase()&&w.default.self!==w.default.top&&null!==w.default.frameElement)return w.default.frameElement;t=n.parentElement}catch(e){t=n.parentElement}if(t&&C.visible(t))return t;n=t}return null}(),o=n?getComputedStyle(n,null):getComputedStyle(S.default.body,null);"none"!==e.node.style.height&&e.node.style.height!==e.height&&(e.node.style.height="auto"),"none"!==e.node.style.maxWidth&&e.node.style.maxWidth!==e.width&&(e.node.style.maxWidth="none"),"none"!==e.node.style.maxHeight&&e.node.style.maxHeight!==e.height&&(e.node.style.maxHeight="none"),e.node.currentStyle&&("100%"===e.node.currentStyle.height&&(e.node.currentStyle.height="auto"),"100%"===e.node.currentStyle.maxWidth&&(e.node.currentStyle.maxWidth="none"),"100%"===e.node.currentStyle.maxHeight&&(e.node.currentStyle.maxHeight="none")),t||parseFloat(o.width)||(n.style.width=e.media.offsetWidth+"px"),t||parseFloat(o.height)||(n.style.height=e.media.offsetHeight+"px"),o=getComputedStyle(n);var i=parseFloat(o.width),r=parseFloat(o.height);e.setDimensions("100%","100%");var a=e.getElement(e.container).querySelector("."+e.options.classPrefix+"poster>img");a&&(a.style.display="");for(var s=e.getElement(e.container).querySelectorAll("object, embed, iframe, video"),l=e.height,c=e.width,d=i,u=l*i/c,p=c*r/l,f=r,m=i<p==0,g=m?Math.floor(d):Math.floor(p),h=m?Math.floor(u):Math.floor(f),v=m?i+"px":g+"px",y=m?h+"px":r+"px",b=0,E=s.length;b<E;b++)s[b].style.height=y,s[b].style.width=v,e.media.setSize&&e.media.setSize(v,y),s[b].style.marginLeft=Math.floor((i-g)/2)+"px",s[b].style.marginTop=0}},{key:"setDimensions",value:function(e,t){var n=this;e=(0,b.isString)(e)&&-1<e.indexOf("%")?e:parseFloat(e)+"px",t=(0,b.isString)(t)&&-1<t.indexOf("%")?t:parseFloat(t)+"px",n.getElement(n.container).style.width=e,n.getElement(n.container).style.height=t;for(var o=n.getElement(n.layers).children,i=0,r=o.length;i<r;i++)o[i].style.width=e,o[i].style.height=t}},{key:"setControlsSize",value:function(){var t=this;if(C.visible(t.getElement(t.container)))if(t.rail&&C.visible(t.rail)){for(var e=t.total?getComputedStyle(t.total,null):null,n=e?parseFloat(e.marginLeft)+parseFloat(e.marginRight):0,o=getComputedStyle(t.rail),i=parseFloat(o.marginLeft)+parseFloat(o.marginRight),r=0,a=C.siblings(t.rail,function(e){return e!==t.rail}),s=a.length,l=0;l<s;l++)r+=a[l].offsetWidth;r+=n+(0===n?2*i:i)+1,t.getElement(t.container).style.minWidth=r+"px";var c=(0,b.createEvent)("controlsresize",t.getElement(t.container));t.getElement(t.container).dispatchEvent(c)}else{for(var d=t.getElement(t.controls).children,u=0,p=0,f=d.length;p<f;p++)u+=d[p].offsetWidth;t.getElement(t.container).style.minWidth=u+"px"}}},{key:"addControlElement",value:function(e,t){var n=this;if(void 0!==n.featurePosition[t]){var o=n.getElement(n.controls).children[n.featurePosition[t]-1];o.parentNode.insertBefore(e,o.nextSibling)}else{n.getElement(n.controls).appendChild(e);for(var i=n.getElement(n.controls).children,r=0,a=i.length;r<a;r++)if(e===i[r]){n.featurePosition[t]=r;break}}}},{key:"createIframeLayer",value:function(){var t=this;if(t.isVideo&&null!==t.media.rendererName&&-1<t.media.rendererName.indexOf("iframe")&&!S.default.getElementById(t.media.id+"-iframe-overlay")){var e=S.default.createElement("div"),n=S.default.getElementById(t.media.id+"_"+t.media.rendererName);e.id=t.media.id+"-iframe-overlay",e.className=t.options.classPrefix+"iframe-overlay",e.addEventListener("click",function(e){t.options.clickToPlayPause&&(t.paused?t.play():t.pause(),e.preventDefault(),e.stopPropagation())}),n.parentNode.insertBefore(e,n)}}},{key:"resetSize",value:function(){var e=this;setTimeout(function(){e.setPlayerSize(e.width,e.height),e.setControlsSize()},50)}},{key:"setPoster",value:function(e){var t=this;if(t.getElement(t.container)){var n=t.getElement(t.container).querySelector("."+t.options.classPrefix+"poster");n||((n=S.default.createElement("div")).className=t.options.classPrefix+"poster "+t.options.classPrefix+"layer",t.getElement(t.layers).appendChild(n));var o=n.querySelector("img");!o&&e&&((o=S.default.createElement("img")).className=t.options.classPrefix+"poster-img",o.width="100%",o.height="100%",n.style.display="",n.appendChild(o)),e?(o.setAttribute("src",e),n.style.backgroundImage='url("'+e+'")',n.style.display=""):o?(n.style.backgroundImage="none",n.style.display="none",o.remove()):n.style.display="none"}else(_.IS_IPAD&&t.options.iPadUseNativeControls||_.IS_IPHONE&&t.options.iPhoneUseNativeControls||_.IS_ANDROID&&t.options.AndroidUseNativeControls)&&(t.media.originalNode.poster=e)}},{key:"changeSkin",value:function(e){var t=this;t.getElement(t.container).className=t.options.classPrefix+"container "+e,t.setPlayerSize(t.width,t.height),t.setControlsSize()}},{key:"globalBind",value:function(e,n){var o=this.node?this.node.ownerDocument:S.default;if((e=(0,b.splitEvents)(e,this.id)).d)for(var t=e.d.split(" "),i=0,r=t.length;i<r;i++)t[i].split(".").reduce(function(e,t){return o.addEventListener(t,n,!1),t},"");if(e.w)for(var a=e.w.split(" "),s=0,l=a.length;s<l;s++)a[s].split(".").reduce(function(e,t){return w.default.addEventListener(t,n,!1),t},"")}},{key:"globalUnbind",value:function(e,n){var o=this.node?this.node.ownerDocument:S.default;if((e=(0,b.splitEvents)(e,this.id)).d)for(var t=e.d.split(" "),i=0,r=t.length;i<r;i++)t[i].split(".").reduce(function(e,t){return o.removeEventListener(t,n,!1),t},"");if(e.w)for(var a=e.w.split(" "),s=0,l=a.length;s<l;s++)a[s].split(".").reduce(function(e,t){return w.default.removeEventListener(t,n,!1),t},"")}},{key:"buildfeatures",value:function(e,t,n,o){for(var i=0,r=this.options.features.length;i<r;i++){var a=this.options.features[i];if(this["build"+a])try{this["build"+a](e,t,n,o)}catch(e){console.error("error building "+a,e)}}}},{key:"buildposter",value:function(e,t,n,o){var i=this,r=S.default.createElement("div");r.className=i.options.classPrefix+"poster "+i.options.classPrefix+"layer",n.appendChild(r);var a=o.originalNode.getAttribute("poster");""!==e.options.poster&&(a&&_.IS_IOS&&o.originalNode.removeAttribute("poster"),a=e.options.poster),a?i.setPoster(a):null!==i.media.renderer&&"function"==typeof i.media.renderer.getPosterUrl?i.setPoster(i.media.renderer.getPosterUrl()):r.style.display="none",o.addEventListener("play",function(){r.style.display="none"}),o.addEventListener("playing",function(){r.style.display="none"}),e.options.showPosterWhenEnded&&e.options.autoRewind&&o.addEventListener("ended",function(){r.style.display=""}),o.addEventListener("error",function(){r.style.display="none"}),e.options.showPosterWhenPaused&&o.addEventListener("pause",function(){e.ended||(r.style.display="")})}},{key:"buildoverlays",value:function(t,e,n,o){if(t.isVideo){var i=this,r=S.default.createElement("div"),a=S.default.createElement("div"),s=S.default.createElement("div");r.style.display="none",r.className=i.options.classPrefix+"overlay "+i.options.classPrefix+"layer",r.innerHTML='<div class="'+i.options.classPrefix+'overlay-loading"><span class="'+i.options.classPrefix+'overlay-loading-bg-img"></span></div>',n.appendChild(r),a.style.display="none",a.className=i.options.classPrefix+"overlay "+i.options.classPrefix+"layer",a.innerHTML='<div class="'+i.options.classPrefix+'overlay-error"></div>',n.appendChild(a),s.className=i.options.classPrefix+"overlay "+i.options.classPrefix+"layer "+i.options.classPrefix+"overlay-play",s.innerHTML='<div class="'+i.options.classPrefix+'overlay-button" role="button" tabindex="0" aria-label="'+y.default.t("mejs.play")+'" aria-pressed="false"></div>',s.addEventListener("click",function(){if(i.options.clickToPlayPause){var e=i.getElement(i.container).querySelector("."+i.options.classPrefix+"overlay-button"),t=e.getAttribute("aria-pressed");i.paused?i.play():i.pause(),e.setAttribute("aria-pressed",!!t),i.getElement(i.container).focus()}}),s.addEventListener("keydown",function(e){var t=e.keyCode||e.which||0;if(13===t||_.IS_FIREFOX&&32===t){var n=(0,b.createEvent)("click",s);return s.dispatchEvent(n),!1}}),n.appendChild(s),null!==i.media.rendererName&&(/(youtube|facebook)/i.test(i.media.rendererName)&&!(i.media.originalNode.getAttribute("poster")||t.options.poster||"function"==typeof i.media.renderer.getPosterUrl&&i.media.renderer.getPosterUrl())||_.IS_STOCK_ANDROID||i.media.originalNode.getAttribute("autoplay"))&&(s.style.display="none");var l=!1;o.addEventListener("play",function(){s.style.display="none",r.style.display="none",a.style.display="none",l=!1}),o.addEventListener("playing",function(){s.style.display="none",r.style.display="none",a.style.display="none",l=!1}),o.addEventListener("seeking",function(){s.style.display="none",r.style.display="",l=!1}),o.addEventListener("seeked",function(){s.style.display=i.paused&&!_.IS_STOCK_ANDROID?"":"none",r.style.display="none",l=!1}),o.addEventListener("pause",function(){r.style.display="none",_.IS_STOCK_ANDROID||l||(s.style.display=""),l=!1}),o.addEventListener("waiting",function(){r.style.display="",l=!1}),o.addEventListener("loadeddata",function(){r.style.display="",_.IS_ANDROID&&(o.canplayTimeout=setTimeout(function(){if(S.default.createEvent){var e=S.default.createEvent("HTMLEvents");return e.initEvent("canplay",!0,!0),o.dispatchEvent(e)}},300)),l=!1}),o.addEventListener("canplay",function(){r.style.display="none",clearTimeout(o.canplayTimeout),l=!1}),o.addEventListener("error",function(e){i._handleError(e,i.media,i.node),r.style.display="none",s.style.display="none",l=!0}),o.addEventListener("loadedmetadata",function(){i.controlsEnabled||i.enableControls()}),o.addEventListener("keydown",function(e){i.onkeydown(t,o,e),l=!1})}}},{key:"buildkeyboard",value:function(o,e,t,i){var r=this;r.getElement(r.container).addEventListener("keydown",function(){r.keyboardAction=!0}),r.globalKeydownCallback=function(e){var t=S.default.activeElement.closest("."+r.options.classPrefix+"container"),n=r.media.closest("."+r.options.classPrefix+"container");return r.hasFocus=!(!t||!n||t.id!==n.id),r.onkeydown(o,i,e)},r.globalClickCallback=function(e){r.hasFocus=!!e.target.closest("."+r.options.classPrefix+"container")},r.globalBind("keydown",r.globalKeydownCallback),r.globalBind("click",r.globalClickCallback)}},{key:"onkeydown",value:function(e,t,n){if(e.hasFocus&&e.options.enableKeyboard)for(var o=0,i=e.options.keyActions.length;o<i;o++)for(var r=e.options.keyActions[o],a=0,s=r.keys.length;a<s;a++)if(n.keyCode===r.keys[a])return r.action(e,t,n.keyCode,n),n.preventDefault(),void n.stopPropagation();return!0}},{key:"play",value:function(){this.proxy.play()}},{key:"pause",value:function(){this.proxy.pause()}},{key:"load",value:function(){this.proxy.load()}},{key:"setCurrentTime",value:function(e){this.proxy.setCurrentTime(e)}},{key:"getCurrentTime",value:function(){return this.proxy.currentTime}},{key:"getDuration",value:function(){return this.proxy.duration}},{key:"setVolume",value:function(e){this.proxy.volume=e}},{key:"getVolume",value:function(){return this.proxy.getVolume()}},{key:"setMuted",value:function(e){this.proxy.setMuted(e)}},{key:"setSrc",value:function(e){this.controlsEnabled||this.enableControls(),this.proxy.setSrc(e)}},{key:"getSrc",value:function(){return this.proxy.getSrc()}},{key:"canPlayType",value:function(e){return this.proxy.canPlayType(e)}},{key:"remove",value:function(){var s=this,l=s.media.rendererName,c=s.media.originalNode.src;for(var e in s.options.features){var t=s.options.features[e];if(s["clean"+t])try{s["clean"+t](s,s.getElement(s.layers),s.getElement(s.controls),s.media)}catch(s){console.error("error cleaning "+t,s)}}var n=s.node.getAttribute("width"),o=s.node.getAttribute("height");n?-1===n.indexOf("%")&&(n+="px"):n="auto",o?-1===o.indexOf("%")&&(o+="px"):o="auto",s.node.style.width=n,s.node.style.height=o,s.setPlayerSize(0,0),s.isDynamic?s.getElement(s.container).parentNode.insertBefore(s.node,s.getElement(s.container)):function(){s.node.setAttribute("controls",!0),s.node.setAttribute("id",s.node.getAttribute("id").replace("_"+l,"").replace("_from_mejs",""));var e=s.getElement(s.container).querySelector("."+s.options.classPrefix+"poster>img");e&&s.node.setAttribute("poster",e.src),delete s.node.autoplay,s.node.setAttribute("src",""),""!==s.media.canPlayType((0,E.getTypeFromFile)(c))&&s.node.setAttribute("src",c),l&&-1<l.indexOf("iframe")&&S.default.getElementById(s.media.id+"-iframe-overlay").remove();var i=s.node.cloneNode();if(i.style.display="",s.getElement(s.container).parentNode.insertBefore(i,s.getElement(s.container)),s.node.remove(),s.mediaFiles)for(var t=0,n=s.mediaFiles.length;t<n;t++){var o=S.default.createElement("source");o.setAttribute("src",s.mediaFiles[t].src),o.setAttribute("type",s.mediaFiles[t].type),i.appendChild(o)}if(s.trackFiles)for(var r=0,a=s.trackFiles.length;r<a;r++)!function(e,t){var n=s.trackFiles[e],o=S.default.createElement("track");o.kind=n.kind,o.label=n.label,o.srclang=n.srclang,o.src=n.src,i.appendChild(o),o.addEventListener("load",function(){this.mode="showing",i.textTracks[e].mode="showing"})}(r);delete s.node,delete s.mediaFiles,delete s.trackFiles}(),s.media.renderer&&"function"==typeof s.media.renderer.destroy&&s.media.renderer.destroy(),delete h.default.players[s.id],"object"===i(s.getElement(s.container))&&(s.getElement(s.container).parentNode.querySelector("."+s.options.classPrefix+"offscreen").remove(),s.getElement(s.container).remove()),s.globalUnbind("resize",s.globalResizeCallback),s.globalUnbind("keydown",s.globalKeydownCallback),s.globalUnbind("click",s.globalClickCallback),delete s.media.player}},{key:"paused",get:function(){return this.proxy.paused}},{key:"muted",get:function(){return this.proxy.muted},set:function(e){this.setMuted(e)}},{key:"ended",get:function(){return this.proxy.ended}},{key:"readyState",get:function(){return this.proxy.readyState}},{key:"currentTime",set:function(e){this.setCurrentTime(e)},get:function(){return this.getCurrentTime()}},{key:"duration",get:function(){return this.getDuration()}},{key:"volume",set:function(e){this.setVolume(e)},get:function(){return this.getVolume()}},{key:"src",set:function(e){this.setSrc(e)},get:function(){return this.getSrc()}}]),r}();w.default.MediaElementPlayer=r,h.default.MediaElementPlayer=r,n.default=r},{17:17,2:2,25:25,26:26,27:27,28:28,3:3,30:30,5:5,6:6,7:7}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=(o=e(3))&&o.__esModule?o:{default:o},a=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.media=t.media,this.isVideo=t.isVideo,this.classPrefix=t.options.classPrefix,this.createIframeLayer=function(){return t.createIframeLayer()},this.setPoster=function(e){return t.setPoster(e)},this}return i(e,[{key:"play",value:function(){this.media.play()}},{key:"pause",value:function(){this.media.pause()}},{key:"load",value:function(){this.isLoaded||this.media.load(),this.isLoaded=!0}},{key:"setCurrentTime",value:function(e){this.media.setCurrentTime(e)}},{key:"getCurrentTime",value:function(){return this.media.currentTime}},{key:"getDuration",value:function(){return this.media.getDuration()}},{key:"setVolume",value:function(e){this.media.setVolume(e)}},{key:"getVolume",value:function(){return this.media.getVolume()}},{key:"setMuted",value:function(e){this.media.setMuted(e)}},{key:"setSrc",value:function(e){var t=this,n=document.getElementById(t.media.id+"-iframe-overlay");n&&n.remove(),t.media.setSrc(e),t.createIframeLayer(),null!==t.media.renderer&&"function"==typeof t.media.renderer.getPosterUrl&&t.setPoster(t.media.renderer.getPosterUrl())}},{key:"getSrc",value:function(){return this.media.getSrc()}},{key:"canPlayType",value:function(e){return this.media.canPlayType(e)}},{key:"paused",get:function(){return this.media.paused}},{key:"muted",set:function(e){this.setMuted(e)},get:function(){return this.media.muted}},{key:"ended",get:function(){return this.media.ended}},{key:"readyState",get:function(){return this.media.readyState}},{key:"currentTime",set:function(e){this.setCurrentTime(e)},get:function(){return this.getCurrentTime()}},{key:"duration",get:function(){return this.getDuration()}},{key:"remainingTime",get:function(){return this.getDuration()-this.currentTime()}},{key:"volume",set:function(e){this.setVolume(e)},get:function(){return this.getVolume()}},{key:"src",set:function(e){this.setSrc(e)},get:function(){return this.getSrc()}}]),e}();n.default=a,r.default.DefaultPlayer=a},{3:3}],18:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i,r=o(e(3)),a=o(e(7)),s=o(e(16));"undefined"!=typeof jQuery?a.default.$=r.default.jQuery=r.default.$=jQuery:"undefined"!=typeof Zepto?a.default.$=r.default.Zepto=r.default.$=Zepto:"undefined"!=typeof ender&&(a.default.$=r.default.ender=r.default.$=ender),void 0!==(i=a.default.$)&&(i.fn.mediaelementplayer=function(e){return!1===e?this.each(function(){var e=i(this).data("mediaelementplayer");e&&e.remove(),i(this).removeData("mediaelementplayer")}):this.each(function(){i(this).data("mediaelementplayer",new s.default(this,e))}),this},i(document).ready(function(){i("."+a.default.MepDefaults.classPrefix+"player").mediaelementplayer()}))},{16:16,3:3,7:7}],19:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=o(e(3)),w=o(e(7)),S=e(8),_=e(27),i=e(28),r=e(25),a=e(26),C={promise:null,load:function(e){return"undefined"!=typeof dashjs?C.promise=new Promise(function(e){e()}).then(function(){C._createPlayer(e)}):(e.options.path="string"==typeof e.options.path?e.options.path:"https://cdn.dashjs.org/latest/dash.all.min.js",C.promise=C.promise||(0,a.loadScript)(e.options.path),C.promise.then(function(){C._createPlayer(e)})),C.promise},_createPlayer:function(e){var t=dashjs.MediaPlayer().create();return E.default["__ready__"+e.id](t),t}},s={name:"native_dash",options:{prefix:"native_dash",dash:{path:"https://cdn.dashjs.org/latest/dash.all.min.js",debug:!1,drm:{},robustnessLevel:""}},canPlayType:function(e){return r.HAS_MSE&&-1<["application/dash+xml"].indexOf(e.toLowerCase())},create:function(s,l,e){var t=s.originalNode,r=s.id+"_"+l.prefix,a=t.autoplay,n=t.children,c=null,d=null;t.removeAttribute("type");for(var o=0,i=n.length;o<i;o++)n[o].removeAttribute("type");c=t.cloneNode(!0),l=Object.assign(l,s.options);for(var u=w.default.html5media.properties,p=w.default.html5media.events.concat(["click","mouseover","mouseout"]).filter(function(e){return"error"!==e}),f=function(e){var t=(0,_.createEvent)(e.type,s);s.dispatchEvent(t)},m=0,g=u.length;m<g;m++)!function(i){var e=""+i.substring(0,1).toUpperCase()+i.substring(1);c["get"+e]=function(){return null!==d?c[i]:null},c["set"+e]=function(e){if(-1===w.default.html5media.readOnlyProperties.indexOf(i))if("src"===i){var t="object"===(void 0===e?"undefined":b(e))&&e.src?e.src:e;if(c[i]=t,null!==d){d.reset();for(var n=0,o=p.length;n<o;n++)c.removeEventListener(p[n],f);d=C._createPlayer({options:l.dash,id:r}),e&&"object"===(void 0===e?"undefined":b(e))&&"object"===b(e.drm)&&(d.setProtectionData(e.drm),(0,_.isString)(l.dash.robustnessLevel)&&l.dash.robustnessLevel&&d.getProtectionController().setRobustnessLevel(l.dash.robustnessLevel)),d.attachSource(t),a&&d.play()}}else c[i]=e}}(u[m]);if(E.default["__ready__"+r]=function(e){s.dashPlayer=d=e;for(var t=dashjs.MediaPlayer.events,n=0,o=p.length;n<o;n++)"loadedmetadata"===(i=p[n])&&(d.getDebug().setLogToBrowserConsole(l.dash.debug),d.initialize(),d.setScheduleWhilePaused(!1),d.setFastSwitchEnabled(!0),d.attachView(c),d.setAutoPlay(!1),"object"!==b(l.dash.drm)||w.default.Utils.isObjectEmpty(l.dash.drm)||(d.setProtectionData(l.dash.drm),(0,_.isString)(l.dash.robustnessLevel)&&l.dash.robustnessLevel&&d.getProtectionController().setRobustnessLevel(l.dash.robustnessLevel)),d.attachSource(c.getSrc())),c.addEventListener(i,f);var i,r=function(e){if("error"===e.type.toLowerCase())s.generateError(e.message,c.src),console.error(e);else{var t=(0,_.createEvent)(e.type,s);t.data=e,s.dispatchEvent(t)}};for(var a in t)t.hasOwnProperty(a)&&d.on(t[a],function(e){return r(e)})},e&&0<e.length)for(var h=0,v=e.length;h<v;h++)if(S.renderer.renderers[l.prefix].canPlayType(e[h].type)){c.setAttribute("src",e[h].src),void 0!==e[h].drm&&(l.dash.drm=e[h].drm);break}c.setAttribute("id",r),t.parentNode.insertBefore(c,t),t.autoplay=!1,t.style.display="none",c.setSize=function(e,t){return c.style.width=e+"px",c.style.height=t+"px",c},c.hide=function(){return c.pause(),c.style.display="none",c},c.show=function(){return c.style.display="",c},c.destroy=function(){null!==d&&d.reset()};var y=(0,_.createEvent)("rendererready",c);return s.dispatchEvent(y),s.promises.push(C.load({options:l.dash,id:r})),c}};i.typeChecks.push(function(e){return~e.toLowerCase().indexOf(".mpd")?"application/dash+xml":null}),S.renderer.add(s)},{25:25,26:26,27:27,28:28,3:3,7:7,8:8}],20:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.PluginDetector=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C=o(e(3)),k=o(e(2)),x=o(e(7)),I=o(e(5)),T=e(8),P=e(27),A=e(25),L=e(28),r=n.PluginDetector={plugins:[],hasPluginVersion:function(e,t){var n=r.plugins[e];return t[1]=t[1]||0,t[2]=t[2]||0,n[0]>t[0]||n[0]===t[0]&&n[1]>t[1]||n[0]===t[0]&&n[1]===t[1]&&n[2]>=t[2]},addPlugin:function(e,t,n,o,i){r.plugins[e]=r.detectPlugin(t,n,o,i)},detectPlugin:function(e,t,n,o){var i=[0,0,0],r=void 0,a=void 0;if(null!==A.NAV.plugins&&void 0!==A.NAV.plugins&&"object"===c(A.NAV.plugins[e])){if((r=A.NAV.plugins[e].description)&&(void 0===A.NAV.mimeTypes||!A.NAV.mimeTypes[t]||A.NAV.mimeTypes[t].enabledPlugin))for(var s=0,l=(i=r.replace(e,"").replace(/^\s+/,"").replace(/\sr/gi,".").split(".")).length;s<l;s++)i[s]=parseInt(i[s].match(/\d+/),10)}else if(void 0!==C.default.ActiveXObject)try{(a=new ActiveXObject(n))&&(i=o(a))}catch(e){}return i}};r.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(e){var t=[],n=e.GetVariable("$version");return n&&(n=n.split(" ")[1].split(","),t=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]),t});var i={create:function(e,t,n){var r={},o=!1;r.options=t,r.id=e.id+"_"+r.options.prefix,r.mediaElement=e,r.flashState={},r.flashApi=null,r.flashApiStack=[];for(var i=x.default.html5media.properties,a=0,s=i.length;a<s;a++)!function(t){r.flashState[t]=null;var e=""+t.substring(0,1).toUpperCase()+t.substring(1);r["get"+e]=function(){if(null===r.flashApi)return null;if("function"!=typeof r.flashApi["get_"+t])return null;var e=r.flashApi["get_"+t]();return"buffered"===t?{start:function(){return 0},end:function(){return e},length:1}:e},r["set"+e]=function(e){if("src"===t&&(e=(0,L.absolutizeUrl)(e)),null!==r.flashApi&&void 0!==r.flashApi["set_"+t])try{r.flashApi["set_"+t](e)}catch(e){}else r.flashApiStack.push({type:"set",propName:t,value:e})}}(i[a]);var l=x.default.html5media.methods;l.push("stop");for(var c=0,d=l.length;c<d;c++)!function(e){r[e]=function(){if(o)if(null!==r.flashApi){if(r.flashApi["fire_"+e])try{r.flashApi["fire_"+e]()}catch(e){}}else r.flashApiStack.push({type:"call",methodName:e})}}(l[c]);for(var u=["rendererready"],p=0,f=u.length;p<f;p++){var m=(0,P.createEvent)(u[p],r);e.dispatchEvent(m)}C.default["__ready__"+r.id]=function(){if(r.flashReady=!0,r.flashApi=k.default.getElementById("__"+r.id),r.flashApiStack.length)for(var e=0,t=r.flashApiStack.length;e<t;e++){var n=r.flashApiStack[e];if("set"===n.type){var o=n.propName,i=""+o.substring(0,1).toUpperCase()+o.substring(1);r["set"+i](n.value)}else"call"===n.type&&r[n.methodName]()}},C.default["__event__"+r.id]=function(e,t){var n=(0,P.createEvent)(e,r);if(t)try{n.data=JSON.parse(t),n.details.data=JSON.parse(t)}catch(e){n.message=t}r.mediaElement.dispatchEvent(n)},r.flashWrapper=k.default.createElement("div"),-1===["always","sameDomain"].indexOf(r.options.shimScriptAccess)&&(r.options.shimScriptAccess="sameDomain");var g=e.originalNode.autoplay,h=["uid="+r.id,"autoplay="+g,"allowScriptAccess="+r.options.shimScriptAccess,"preload="+(e.originalNode.getAttribute("preload")||"")],v=null!==e.originalNode&&"video"===e.originalNode.tagName.toLowerCase(),y=v?e.originalNode.height:1,b=v?e.originalNode.width:1;e.originalNode.getAttribute("src")&&h.push("src="+e.originalNode.getAttribute("src")),!0===r.options.enablePseudoStreaming&&(h.push("pseudostreamstart="+r.options.pseudoStreamingStartQueryParam),h.push("pseudostreamtype="+r.options.pseudoStreamingType)),r.options.streamDelimiter&&h.push("streamdelimiter="+encodeURIComponent(r.options.streamDelimiter)),r.options.proxyType&&h.push("proxytype="+r.options.proxyType),e.appendChild(r.flashWrapper),e.originalNode.style.display="none";var E=[];if(A.IS_IE||A.IS_EDGE){var w=k.default.createElement("div");r.flashWrapper.appendChild(w),E=A.IS_EDGE?['type="application/x-shockwave-flash"','data="'+r.options.pluginPath+r.options.filename+'"','id="__'+r.id+'"','width="'+b+'"','height="'+y+"'\""]:['classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"','codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"','id="__'+r.id+'"','width="'+b+'"','height="'+y+'"'],v||E.push('style="clip: rect(0 0 0 0); position: absolute;"'),w.outerHTML="<object "+E.join(" ")+'><param name="movie" value="'+r.options.pluginPath+r.options.filename+"?x="+new Date+'" /><param name="flashvars" value="'+h.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="'+r.options.shimScriptAccess+'" /><param name="allowFullScreen" value="true" /><div>'+I.default.t("mejs.install-flash")+"</div></object>"}else E=['id="__'+r.id+'"','name="__'+r.id+'"','play="true"','loop="false"','quality="high"','bgcolor="#000000"','wmode="transparent"','allowScriptAccess="'+r.options.shimScriptAccess+'"','allowFullScreen="true"','type="application/x-shockwave-flash"','pluginspage="//www.macromedia.com/go/getflashplayer"','src="'+r.options.pluginPath+r.options.filename+'"','flashvars="'+h.join("&")+'"'],v?(E.push('width="'+b+'"'),E.push('height="'+y+'"')):E.push('style="position: fixed; left: -9999em; top: -9999em;"'),r.flashWrapper.innerHTML="<embed "+E.join(" ")+">";if(r.flashNode=r.flashWrapper.lastChild,r.hide=function(){o=!1,v&&(r.flashNode.style.display="none")},r.show=function(){o=!0,v&&(r.flashNode.style.display="")},r.setSize=function(e,t){r.flashNode.style.width=e+"px",r.flashNode.style.height=t+"px",null!==r.flashApi&&"function"==typeof r.flashApi.fire_setSize&&r.flashApi.fire_setSize(e,t)},r.destroy=function(){r.flashNode.remove()},n&&0<n.length)for(var S=0,_=n.length;S<_;S++)if(T.renderer.renderers[t.prefix].canPlayType(n[S].type)){r.setSrc(n[S].src);break}return r}};if(r.hasPluginVersion("flash",[10,0,0])){L.typeChecks.push(function(e){return(e=e.toLowerCase()).startsWith("rtmp")?~e.indexOf(".mp3")?"audio/rtmp":"video/rtmp":/\.og(a|g)/i.test(e)?"audio/ogg":~e.indexOf(".m3u8")?"application/x-mpegURL":~e.indexOf(".mpd")?"application/dash+xml":~e.indexOf(".flv")?"video/flv":null});var a={name:"flash_video",options:{prefix:"flash_video",filename:"mediaelement-flash-video.swf",enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",pseudoStreamingType:"byte",proxyType:"",streamDelimiter:""},canPlayType:function(e){return~["video/mp4","video/rtmp","audio/rtmp","rtmp/mp4","audio/mp4","video/flv","video/x-flv"].indexOf(e.toLowerCase())},create:i.create};T.renderer.add(a);var s={name:"flash_hls",options:{prefix:"flash_hls",filename:"mediaelement-flash-video-hls.swf"},canPlayType:function(e){return~["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(e.toLowerCase())},create:i.create};T.renderer.add(s);var l={name:"flash_dash",options:{prefix:"flash_dash",filename:"mediaelement-flash-video-mdash.swf"},canPlayType:function(e){return~["application/dash+xml"].indexOf(e.toLowerCase())},create:i.create};T.renderer.add(l);var d={name:"flash_audio",options:{prefix:"flash_audio",filename:"mediaelement-flash-audio.swf"},canPlayType:function(e){return~["audio/mp3"].indexOf(e.toLowerCase())},create:i.create};T.renderer.add(d);var u={name:"flash_audio_ogg",options:{prefix:"flash_audio_ogg",filename:"mediaelement-flash-audio-ogg.swf"},canPlayType:function(e){return~["audio/ogg","audio/oga","audio/ogv"].indexOf(e.toLowerCase())},create:i.create};T.renderer.add(u)}},{2:2,25:25,27:27,28:28,3:3,5:5,7:7,8:8}],21:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=o(e(3)),b=o(e(7)),E=e(8),w=e(27),i=e(25),r=e(28),a=e(26),S={promise:null,load:function(e){return"undefined"!=typeof flvjs?S.promise=new Promise(function(e){e()}).then(function(){S._createPlayer(e)}):(e.options.path="string"==typeof e.options.path?e.options.path:"https://cdn.jsdelivr.net/npm/flv.js@latest",S.promise=S.promise||(0,a.loadScript)(e.options.path),S.promise.then(function(){S._createPlayer(e)})),S.promise},_createPlayer:function(e){flvjs.LoggingControl.enableDebug=e.options.debug,flvjs.LoggingControl.enableVerbose=e.options.debug;var t=flvjs.createPlayer(e.options,e.configs);return y.default["__ready__"+e.id](t),t}},s={name:"native_flv",options:{prefix:"native_flv",flv:{path:"https://cdn.jsdelivr.net/npm/flv.js@latest",cors:!0,debug:!1}},canPlayType:function(e){return i.HAS_MSE&&-1<["video/x-flv","video/flv"].indexOf(e.toLowerCase())},create:function(s,a,e){var t=s.originalNode,l=s.id+"_"+a.prefix,c=null,d=null;c=t.cloneNode(!0),a=Object.assign(a,s.options);for(var n=b.default.html5media.properties,u=b.default.html5media.events.concat(["click","mouseover","mouseout"]).filter(function(e){return"error"!==e}),p=function(e){var t=(0,w.createEvent)(e.type,s);s.dispatchEvent(t)},o=0,i=n.length;o<i;o++)!function(r){var e=""+r.substring(0,1).toUpperCase()+r.substring(1);c["get"+e]=function(){return null!==d?c[r]:null},c["set"+e]=function(e){if(-1===b.default.html5media.readOnlyProperties.indexOf(r))if("src"===r){if(c[r]="object"===(void 0===e?"undefined":v(e))&&e.src?e.src:e,null!==d){var t={type:"flv"};t.url=e,t.cors=a.flv.cors,t.debug=a.flv.debug,t.path=a.flv.path;var n=a.flv.configs;d.destroy();for(var o=0,i=u.length;o<i;o++)c.removeEventListener(u[o],p);(d=S._createPlayer({options:t,configs:n,id:l})).attachMediaElement(c),d.load()}}else c[r]=e}}(n[o]);if(y.default["__ready__"+l]=function(e){s.flvPlayer=d=e;for(var i=flvjs.Events,t=0,n=u.length;t<n;t++)"loadedmetadata"===(o=u[t])&&(d.unload(),d.detachMediaElement(),d.attachMediaElement(c),d.load()),c.addEventListener(o,p);var o,r=function(e,t){if("error"===e){var n=t[0]+": "+t[1]+" "+t[2].msg;s.generateError(n,c.src)}else{var o=(0,w.createEvent)(e,s);o.data=t,s.dispatchEvent(o)}};for(var a in i)!function(o){i.hasOwnProperty(o)&&d.on(i[o],function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(i[o],t)})}(a)},e&&0<e.length)for(var r=0,f=e.length;r<f;r++)if(E.renderer.renderers[a.prefix].canPlayType(e[r].type)){c.setAttribute("src",e[r].src);break}c.setAttribute("id",l),t.parentNode.insertBefore(c,t),t.autoplay=!1,t.style.display="none";var m={type:"flv"};m.url=c.src,m.cors=a.flv.cors,m.debug=a.flv.debug,m.path=a.flv.path;var g=a.flv.configs;c.setSize=function(e,t){return c.style.width=e+"px",c.style.height=t+"px",c},c.hide=function(){return null!==d&&d.pause(),c.style.display="none",c},c.show=function(){return c.style.display="",c},c.destroy=function(){null!==d&&d.destroy()};var h=(0,w.createEvent)("rendererready",c);return s.dispatchEvent(h),s.promises.push(S.load({options:m,configs:g,id:l})),c}};r.typeChecks.push(function(e){return~e.toLowerCase().indexOf(".flv")?"video/flv":null}),E.renderer.add(s)},{25:25,26:26,27:27,28:28,3:3,7:7,8:8}],22:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=o(e(3)),b=o(e(7)),E=e(8),w=e(27),i=e(25),r=e(28),a=e(26),S={promise:null,load:function(e){return"undefined"!=typeof Hls?S.promise=new Promise(function(e){e()}).then(function(){S._createPlayer(e)}):(e.options.path="string"==typeof e.options.path?e.options.path:"https://cdn.jsdelivr.net/npm/hls.js@latest",S.promise=S.promise||(0,a.loadScript)(e.options.path),S.promise.then(function(){S._createPlayer(e)})),S.promise},_createPlayer:function(e){var t=new Hls(e.options);return y.default["__ready__"+e.id](t),t}},s={name:"native_hls",options:{prefix:"native_hls",hls:{path:"https://cdn.jsdelivr.net/npm/hls.js@latest",autoStartLoad:!1,debug:!1}},canPlayType:function(e){return i.HAS_MSE&&-1<["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(e.toLowerCase())},create:function(l,i,c){var e=l.originalNode,r=l.id+"_"+i.prefix,t=e.getAttribute("preload"),n=e.autoplay,d=null,u=null,p=0,f=c.length;u=e.cloneNode(!0),(i=Object.assign(i,l.options)).hls.autoStartLoad=t&&"none"!==t||n;for(var o=b.default.html5media.properties,m=b.default.html5media.events.concat(["click","mouseover","mouseout"]).filter(function(e){return"error"!==e}),g=function(e){var t=(0,w.createEvent)(e.type,l);l.dispatchEvent(t)},a=0,s=o.length;a<s;a++)!function(o){var e=""+o.substring(0,1).toUpperCase()+o.substring(1);u["get"+e]=function(){return null!==d?u[o]:null},u["set"+e]=function(e){if(-1===b.default.html5media.readOnlyProperties.indexOf(o))if("src"===o){if(u[o]="object"===(void 0===e?"undefined":v(e))&&e.src?e.src:e,null!==d){d.destroy();for(var t=0,n=m.length;t<n;t++)u.removeEventListener(m[t],g);(d=S._createPlayer({options:i.hls,id:r})).loadSource(e),d.attachMedia(u)}}else u[o]=e}}(o[a]);if(y.default["__ready__"+r]=function(e){l.hlsPlayer=d=e;for(var i=Hls.Events,t=0,n=m.length;t<n;t++)!function(e){if("loadedmetadata"===e){var t=l.originalNode.src;d.detachMedia(),d.loadSource(t),d.attachMedia(u)}u.addEventListener(e,g)}(m[t]);var r=void 0,a=void 0,s=function(e,t){if("hlsError"===e){if(console.warn(t),(t=t[1]).fatal)switch(t.type){case"mediaError":var n=(new Date).getTime();if(!r||3e3<n-r)r=(new Date).getTime(),d.recoverMediaError();else if(!a||3e3<n-a)a=(new Date).getTime(),console.warn("Attempting to swap Audio Codec and recover from media error"),d.swapAudioCodec(),d.recoverMediaError();else{var o="Cannot recover, last media error recovery failed";l.generateError(o,u.src),console.error(o)}break;case"networkError":"manifestLoadError"===t.details&&p<f&&void 0!==c[p+1]?(u.setSrc(c[p++].src),u.load(),u.play()):(l.generateError("Network error",c),console.error("Network error"));break;default:d.destroy()}}else{var i=(0,w.createEvent)(e,l);i.data=t,l.dispatchEvent(i)}};for(var o in i)!function(o){i.hasOwnProperty(o)&&d.on(i[o],function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s(i[o],t)})}(o)},0<f)for(;p<f;p++)if(E.renderer.renderers[i.prefix].canPlayType(c[p].type)){u.setAttribute("src",c[p].src);break}"auto"===t||n||(u.addEventListener("play",function(){null!==d&&d.startLoad()}),u.addEventListener("pause",function(){null!==d&&d.stopLoad()})),u.setAttribute("id",r),e.parentNode.insertBefore(u,e),e.autoplay=!1,e.style.display="none",u.setSize=function(e,t){return u.style.width=e+"px",u.style.height=t+"px",u},u.hide=function(){return u.pause(),u.style.display="none",u},u.show=function(){return u.style.display="",u},u.destroy=function(){null!==d&&(d.stopLoad(),d.destroy())};var h=(0,w.createEvent)("rendererready",u);return l.dispatchEvent(h),l.promises.push(S.load({options:i.hls,id:r})),u}};r.typeChecks.push(function(e){return~e.toLowerCase().indexOf(".m3u8")?"application/x-mpegURL":null}),E.renderer.add(s)},{25:25,26:26,27:27,28:28,3:3,7:7,8:8}],23:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e(3)),h=o(e(2)),v=o(e(7)),y=e(8),b=e(27),r=e(25),a={name:"html5",options:{prefix:"html5"},canPlayType:function(e){var t=h.default.createElement("video");return r.IS_ANDROID&&/\/mp(3|4)$/i.test(e)||~["application/x-mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(e.toLowerCase())&&r.SUPPORTS_NATIVE_HLS?"yes":t.canPlayType?t.canPlayType(e.toLowerCase()).replace(/no/,""):""},create:function(n,e,t){var o,i=n.id+"_"+e.prefix,r=!1,a=null;void 0===n.originalNode||null===n.originalNode?(a=h.default.createElement("audio"),n.appendChild(a)):a=n.originalNode,a.setAttribute("id",i);for(var s=v.default.html5media.properties,l=0,c=s.length;l<c;l++)!function(t){var e=""+t.substring(0,1).toUpperCase()+t.substring(1);a["get"+e]=function(){return a[t]},a["set"+e]=function(e){-1===v.default.html5media.readOnlyProperties.indexOf(t)&&(a[t]=e)}}(s[l]);for(var d=v.default.html5media.events.concat(["click","mouseover","mouseout"]).filter(function(e){return"error"!==e}),u=0,p=d.length;u<p;u++)o=d[u],a.addEventListener(o,function(e){if(r){var t=(0,b.createEvent)(e.type,e.target);n.dispatchEvent(t)}});a.setSize=function(e,t){return a.style.width=e+"px",a.style.height=t+"px",a},a.hide=function(){return r=!1,a.style.display="none",a},a.show=function(){return r=!0,a.style.display="",a};var f=0,m=t.length;if(0<m)for(;f<m;f++)if(y.renderer.renderers[e.prefix].canPlayType(t[f].type)){a.setAttribute("src",t[f].src);break}a.addEventListener("error",function(e){4===e.target.error.code&&r&&(f<m&&void 0!==t[f+1]?(a.src=t[f++].src,a.load(),a.play()):n.generateError("Media error: Format(s) not supported or source(s) not found",t))});var g=(0,b.createEvent)("rendererready",a);return n.dispatchEvent(g),a}};i.default.HtmlMediaElement=v.default.HtmlMediaElement=a,y.renderer.add(a)},{2:2,25:25,27:27,3:3,7:7,8:8}],24:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var w=o(e(3)),S=o(e(2)),_=o(e(7)),i=e(8),C=e(27),r=e(28),a=e(26),k={isIframeStarted:!1,isIframeLoaded:!1,iframeQueue:[],enqueueIframe:function(e){k.isLoaded="undefined"!=typeof YT&&YT.loaded,k.isLoaded?k.createIframe(e):(k.loadIframeApi(),k.iframeQueue.push(e))},loadIframeApi:function(){k.isIframeStarted||((0,a.loadScript)("https://www.youtube.com/player_api"),k.isIframeStarted=!0)},iFrameReady:function(){for(k.isLoaded=!0,k.isIframeLoaded=!0;0<k.iframeQueue.length;){var e=k.iframeQueue.pop();k.createIframe(e)}},createIframe:function(e){return new YT.Player(e.containerId,e)},getYouTubeId:function(e){var t="";return 0<e.indexOf("?")?""===(t=k.getYouTubeIdFromParam(e))&&(t=k.getYouTubeIdFromUrl(e)):t=k.getYouTubeIdFromUrl(e),(t=t.substring(t.lastIndexOf("/")+1).split("?"))[0]},getYouTubeIdFromParam:function(e){if(null==e||!e.trim().length)return null;for(var t=e.split("?")[1].split("&"),n="",o=0,i=t.length;o<i;o++){var r=t[o].split("=");if("v"===r[0]){n=r[1];break}}return n},getYouTubeIdFromUrl:function(e){return null!=e&&e.trim().length?(e=e.split("?")[0]).substring(e.lastIndexOf("/")+1):null},getYouTubeNoCookieUrl:function(e){if(null==e||!e.trim().length||-1===e.indexOf("//www.youtube"))return e;var t=e.split("/");return t[2]=t[2].replace(".com","-nocookie.com"),t.join("/")}},s={name:"youtube_iframe",options:{prefix:"youtube_iframe",youtube:{autoplay:0,controls:0,disablekb:1,end:0,loop:0,modestbranding:0,playsinline:0,rel:0,showinfo:0,start:0,iv_load_policy:3,nocookie:!1,imageQuality:null}},canPlayType:function(e){return~["video/youtube","video/x-youtube"].indexOf(e.toLowerCase())},create:function(f,n,o){var m={},g=[],h=null,r=!0,a=!1,v=null;m.options=n,m.id=f.id+"_"+n.prefix,m.mediaElement=f;for(var e=_.default.html5media.properties,t=0,i=e.length;t<i;t++)!function(i){var e=""+i.substring(0,1).toUpperCase()+i.substring(1);m["get"+e]=function(){if(null===h)return null;switch(i){case"currentTime":return h.getCurrentTime();case"duration":return h.getDuration();case"volume":return h.getVolume()/100;case"paused":return r;case"ended":return a;case"muted":return h.isMuted();case"buffered":var e=h.getVideoLoadedFraction(),t=h.getDuration();return{start:function(){return 0},end:function(){return e*t},length:1};case"src":return h.getVideoUrl();case"readyState":return 4}return null},m["set"+e]=function(e){if(null!==h)switch(i){case"src":var t="string"==typeof e?e:e[0].src,n=k.getYouTubeId(t);f.originalNode.autoplay?h.loadVideoById(n):h.cueVideoById(n);break;case"currentTime":h.seekTo(e);break;case"muted":e?h.mute():h.unMute(),setTimeout(function(){var e=(0,C.createEvent)("volumechange",m);f.dispatchEvent(e)},50);break;case"volume":e,h.setVolume(100*e),setTimeout(function(){var e=(0,C.createEvent)("volumechange",m);f.dispatchEvent(e)},50);break;case"readyState":var o=(0,C.createEvent)("canplay",m);f.dispatchEvent(o)}else g.push({type:"set",propName:i,value:e})}}(e[t]);for(var s=_.default.html5media.methods,l=0,c=s.length;l<c;l++)!function(e){m[e]=function(){if(null!==h)switch(e){case"play":return r=!1,h.playVideo();case"pause":return r=!0,h.pauseVideo();case"load":return null}else g.push({type:"call",methodName:e})}}(s[l]);var d=S.default.createElement("div");d.id=m.id,m.options.youtube.nocookie&&(f.originalNode.src=k.getYouTubeNoCookieUrl(o[0].src)),f.originalNode.parentNode.insertBefore(d,f.originalNode),f.originalNode.style.display="none";var u="audio"===f.originalNode.tagName.toLowerCase(),p=u?"1":f.originalNode.height,y=u?"1":f.originalNode.width,b=k.getYouTubeId(o[0].src),E={id:m.id,containerId:d.id,videoId:b,height:p,width:y,playerVars:Object.assign({controls:0,rel:0,disablekb:1,showinfo:0,modestbranding:0,html5:1,iv_load_policy:3},m.options.youtube),origin:w.default.location.host,events:{onReady:function(e){if(f.youTubeApi=h=e.target,f.youTubeState={paused:!0,ended:!1},g.length)for(var t=0,n=g.length;t<n;t++){var o=g[t];if("set"===o.type){var i=o.propName,r=""+i.substring(0,1).toUpperCase()+i.substring(1);m["set"+r](o.value)}else"call"===o.type&&m[o.methodName]()}v=h.getIframe(),f.originalNode.muted&&h.mute();for(var a=["mouseover","mouseout"],s=0,l=a.length;s<l;s++)v.addEventListener(a[s],function(e){var t=(0,C.createEvent)(e.type,m);f.dispatchEvent(t)},!1);for(var c=["rendererready","loadedmetadata","loadeddata","canplay"],d=0,u=c.length;d<u;d++){var p=(0,C.createEvent)(c[d],m);f.dispatchEvent(p)}},onStateChange:function(e){var t=[];switch(e.data){case-1:t=["loadedmetadata"],a=!(r=!0);break;case 0:r=!(t=["ended"]),a=!m.options.youtube.loop,m.options.youtube.loop||m.stopInterval();break;case 1:a=r=!(t=["play","playing"]),m.startInterval();break;case 2:t=["pause"],a=!(r=!0),m.stopInterval();break;case 3:a=!(t=["progress"]);break;case 5:t=["loadeddata","loadedmetadata","canplay"],a=!(r=!0)}for(var n=0,o=t.length;n<o;n++){var i=(0,C.createEvent)(t[n],m);f.dispatchEvent(i)}},onError:function(e){return function(e){var t="";switch(e.data){case 2:t="The request contains an invalid parameter value. Verify that video ID has 11 characters and that contains no invalid characters, such as exclamation points or asterisks.";break;case 5:t="The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.";break;case 100:t="The video requested was not found. Either video has been removed or has been marked as private.";break;case 101:case 105:t="The owner of the requested video does not allow it to be played in embedded players.";break;default:t="Unknown error."}f.generateError("Code "+e.data+": "+t,o)}(e)}}};return(u||f.originalNode.hasAttribute("playsinline"))&&(E.playerVars.playsinline=1),f.originalNode.controls&&(E.playerVars.controls=1),f.originalNode.autoplay&&(E.playerVars.autoplay=1),f.originalNode.loop&&(E.playerVars.loop=1),(E.playerVars.loop&&1===parseInt(E.playerVars.loop,10)||-1<f.originalNode.src.indexOf("loop="))&&!E.playerVars.playlist&&-1===f.originalNode.src.indexOf("playlist=")&&(E.playerVars.playlist=k.getYouTubeId(f.originalNode.src)),k.enqueueIframe(E),m.onEvent=function(e,t,n){null!=n&&(f.youTubeState=n)},m.setSize=function(e,t){null!==h&&h.setSize(e,t)},m.hide=function(){m.stopInterval(),m.pause(),v&&(v.style.display="none")},m.show=function(){v&&(v.style.display="")},m.destroy=function(){h.destroy()},m.interval=null,m.startInterval=function(){m.interval=setInterval(function(){var e=(0,C.createEvent)("timeupdate",m);f.dispatchEvent(e)},250)},m.stopInterval=function(){m.interval&&clearInterval(m.interval)},m.getPosterUrl=function(){var e=n.youtube.imageQuality,t=k.getYouTubeId(f.originalNode.src);return e&&-1<["default","hqdefault","mqdefault","sddefault","maxresdefault"].indexOf(e)&&t?"https://img.youtube.com/vi/"+t+"/"+e+".jpg":""},m}};w.default.onYouTubePlayerAPIReady=function(){k.iFrameReady()},r.typeChecks.push(function(e){return/\/\/(www\.youtube|youtu\.?be)/i.test(e)?"video/x-youtube":null}),i.renderer.add(s)},{2:2,26:26,27:27,28:28,3:3,7:7,8:8}],25:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.cancelFullScreen=n.requestFullScreen=n.isFullScreen=n.FULLSCREEN_EVENT_NAME=n.HAS_NATIVE_FULLSCREEN_ENABLED=n.HAS_TRUE_NATIVE_FULLSCREEN=n.HAS_IOS_FULLSCREEN=n.HAS_MS_NATIVE_FULLSCREEN=n.HAS_MOZ_NATIVE_FULLSCREEN=n.HAS_WEBKIT_NATIVE_FULLSCREEN=n.HAS_NATIVE_FULLSCREEN=n.SUPPORTS_NATIVE_HLS=n.SUPPORT_PASSIVE_EVENT=n.SUPPORT_POINTER_EVENTS=n.HAS_MSE=n.IS_STOCK_ANDROID=n.IS_SAFARI=n.IS_FIREFOX=n.IS_CHROME=n.IS_EDGE=n.IS_IE=n.IS_ANDROID=n.IS_IOS=n.IS_IPOD=n.IS_IPHONE=n.IS_IPAD=n.UA=n.NAV=void 0;for(var i=o(e(3)),r=o(e(2)),a=o(e(7)),s=n.NAV=i.default.navigator,l=n.UA=s.userAgent.toLowerCase(),c=n.IS_IPAD=/ipad/i.test(l)&&!i.default.MSStream,d=n.IS_IPHONE=/iphone/i.test(l)&&!i.default.MSStream,u=n.IS_IPOD=/ipod/i.test(l)&&!i.default.MSStream,p=(n.IS_IOS=/ipad|iphone|ipod/i.test(l)&&!i.default.MSStream,n.IS_ANDROID=/android/i.test(l)),f=n.IS_IE=/(trident|microsoft)/i.test(s.appName),m=(n.IS_EDGE="msLaunchUri"in s&&!("documentMode"in r.default)),g=n.IS_CHROME=/chrome/i.test(l),h=n.IS_FIREFOX=/firefox/i.test(l),v=n.IS_SAFARI=/safari/i.test(l)&&!g,y=n.IS_STOCK_ANDROID=/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(l),b=(n.HAS_MSE="MediaSource"in i.default),E=n.SUPPORT_POINTER_EVENTS=function(){var e=r.default.createElement("x"),t=r.default.documentElement,n=i.default.getComputedStyle;if(!("pointerEvents"in e.style))return!1;e.style.pointerEvents="auto",e.style.pointerEvents="x",t.appendChild(e);var o=n&&"auto"===(n(e,"")||{}).pointerEvents;return e.remove(),!!o}(),w=n.SUPPORT_PASSIVE_EVENT=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});i.default.addEventListener("test",null,t)}catch(e){}return e}(),S=["source","track","audio","video"],_=void 0,C=0,k=S.length;C<k;C++)_=r.default.createElement(S[C]);var x=n.SUPPORTS_NATIVE_HLS=v||p&&(g||y)||f&&/edge/i.test(l),I=void 0!==_.webkitEnterFullscreen,T=void 0!==_.requestFullscreen;I&&/mac os x 10_5/i.test(l)&&(I=T=!1);var P=void 0!==_.webkitRequestFullScreen,A=void 0!==_.mozRequestFullScreen,L=void 0!==_.msRequestFullscreen,N=P||A||L,M=N,O="",j=void 0,D=void 0,F=void 0;A?M=r.default.mozFullScreenEnabled:L&&(M=r.default.msFullscreenEnabled),g&&(I=!1),N&&(P?O="webkitfullscreenchange":A?O="mozfullscreenchange":L&&(O="MSFullscreenChange"),n.isFullScreen=j=function(){return A?r.default.mozFullScreen:P?r.default.webkitIsFullScreen:L?null!==r.default.msFullscreenElement:void 0},n.requestFullScreen=D=function(e){P?e.webkitRequestFullScreen():A?e.mozRequestFullScreen():L&&e.msRequestFullscreen()},n.cancelFullScreen=F=function(){P?r.default.webkitCancelFullScreen():A?r.default.mozCancelFullScreen():L&&r.default.msExitFullscreen()});var U=n.HAS_NATIVE_FULLSCREEN=T,R=n.HAS_WEBKIT_NATIVE_FULLSCREEN=P,q=n.HAS_MOZ_NATIVE_FULLSCREEN=A,B=n.HAS_MS_NATIVE_FULLSCREEN=L,H=n.HAS_IOS_FULLSCREEN=I,V=n.HAS_TRUE_NATIVE_FULLSCREEN=N,z=n.HAS_NATIVE_FULLSCREEN_ENABLED=M,$=n.FULLSCREEN_EVENT_NAME=O;n.isFullScreen=j,n.requestFullScreen=D,n.cancelFullScreen=F,a.default.Features=a.default.Features||{},a.default.Features.isiPad=c,a.default.Features.isiPod=u,a.default.Features.isiPhone=d,a.default.Features.isiOS=a.default.Features.isiPhone||a.default.Features.isiPad,a.default.Features.isAndroid=p,a.default.Features.isIE=f,a.default.Features.isEdge=m,a.default.Features.isChrome=g,a.default.Features.isFirefox=h,a.default.Features.isSafari=v,a.default.Features.isStockAndroid=y,a.default.Features.hasMSE=b,a.default.Features.supportsNativeHLS=x,a.default.Features.supportsPointerEvents=E,a.default.Features.supportsPassiveEvent=w,a.default.Features.hasiOSFullScreen=H,a.default.Features.hasNativeFullscreen=U,a.default.Features.hasWebkitNativeFullScreen=R,a.default.Features.hasMozNativeFullScreen=q,a.default.Features.hasMsNativeFullScreen=B,a.default.Features.hasTrueNativeFullScreen=V,a.default.Features.nativeFullScreenEnabled=z,a.default.Features.fullScreenEventName=$,a.default.Features.isFullScreen=j,a.default.Features.requestFullScreen=D,a.default.Features.cancelFullScreen=F},{2:2,3:3,7:7}],26:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(o){return new Promise(function(e,t){var n=f.default.createElement("script");n.src=o,n.async=!0,n.onload=function(){n.remove(),e()},n.onerror=function(){n.remove(),t()},f.default.head.appendChild(n)})}function r(e){var t=e.getBoundingClientRect(),n=p.default.pageXOffset||f.default.documentElement.scrollLeft,o=p.default.pageYOffset||f.default.documentElement.scrollTop;return{top:t.top+o,left:t.left+n}}function a(e,t){y(e,t)?E(e,t):b(e,t)}function s(i){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:400,a=arguments[2];i.style.opacity||(i.style.opacity=1);var s=null;p.default.requestAnimationFrame(function e(t){var n=t-(s=s||t),o=parseFloat(1-n/r,2);i.style.opacity=o<0?0:o,r<n?a&&"function"==typeof a&&a():p.default.requestAnimationFrame(e)})}function l(i){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:400,a=arguments[2];i.style.opacity||(i.style.opacity=0);var s=null;p.default.requestAnimationFrame(function e(t){var n=t-(s=s||t),o=parseFloat(n/r,2);i.style.opacity=1<o?1:o,r<n?a&&"function"==typeof a&&a():p.default.requestAnimationFrame(e)})}function c(e,t){var n=[];for(e=e.parentNode.firstChild;t&&!t(e)||n.push(e),e=e.nextSibling;);return n}function d(e){return void 0!==e.getClientRects&&"function"===e.getClientRects?!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length):!(!e.offsetWidth&&!e.offsetHeight)}function u(e,t,n,o){var i=p.default.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r="application/x-www-form-urlencoded; charset=UTF-8",a=!1,s="*/".concat("*");switch(t){case"text":r="text/plain";break;case"json":r="application/json, text/javascript";break;case"html":r="text/html";break;case"xml":r="application/xml, text/xml"}"application/x-www-form-urlencoded"!==r&&(s=r+", */*; q=0.01"),i&&(i.open("GET",e,!0),i.setRequestHeader("Accept",s),i.onreadystatechange=function(){if(!a&&4===i.readyState)if(200===i.status){a=!0;var e=void 0;switch(t){case"json":e=JSON.parse(i.responseText);break;case"xml":e=i.responseXML;break;default:e=i.responseText}n(e)}else"function"==typeof o&&o(i.status)},i.send())}Object.defineProperty(n,"__esModule",{value:!0}),n.removeClass=n.addClass=n.hasClass=void 0,n.loadScript=i,n.offset=r,n.toggleClass=a,n.fadeOut=s,n.fadeIn=l,n.siblings=c,n.visible=d,n.ajax=u;var p=o(e(3)),f=o(e(2)),m=o(e(7)),g=void 0,h=void 0,v=void 0;v="classList"in f.default.documentElement?(g=function(e,t){return void 0!==e.classList&&e.classList.contains(t)},h=function(e,t){return e.classList.add(t)},function(e,t){return e.classList.remove(t)}):(g=function(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)},h=function(e,t){y(e,t)||(e.className+=" "+t)},function(e,t){e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")});var y=n.hasClass=g,b=n.addClass=h,E=n.removeClass=v;m.default.Utils=m.default.Utils||{},m.default.Utils.offset=r,m.default.Utils.hasClass=y,m.default.Utils.addClass=b,m.default.Utils.removeClass=E,m.default.Utils.toggleClass=a,m.default.Utils.fadeIn=l,m.default.Utils.fadeOut=s,m.default.Utils.siblings=c,m.default.Utils.visible=d,m.default.Utils.ajax=u,m.default.Utils.loadScript=i},{2:2,3:3,7:7}],27:[function(e,t,n){"use strict";function o(e){if("string"!=typeof e)throw new Error("Argument passed must be a string");var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return e.replace(/[&<>"]/g,function(e){return t[e]})}function i(o,i){var r=this,a=arguments,s=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if("function"!=typeof o)throw new Error("First argument must be a function");if("number"!=typeof i)throw new Error("Second argument must be a numeric value");var l=void 0;return function(){var e=r,t=a,n=s&&!l;clearTimeout(l),l=setTimeout(function(){l=null,s||o.apply(e,t)},i),n&&o.apply(e,t)}}function r(e){return Object.getOwnPropertyNames(e).length<=0}function a(e,n){var o=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/,i={d:[],w:[]};return(e||"").split(" ").forEach(function(e){var t=e+(n?"."+n:"");t.startsWith(".")?(i.d.push(t),i.w.push(t)):i[o.test(e)?"w":"d"].push(t)}),i.d=i.d.join(" "),i.w=i.w.join(" "),i}function s(e,t){if("string"!=typeof e)throw new Error("Event name must be a string");var n=e.match(/([a-z]+\.([a-z]+))/i),o={target:t};return null!==n&&(e=n[1],o.namespace=n[2]),new window.CustomEvent(e,{detail:o})}function l(e,t){return!!(e&&t&&2&e.compareDocumentPosition(t))}function c(e){return"string"==typeof e}Object.defineProperty(n,"__esModule",{value:!0}),n.escapeHTML=o,n.debounce=i,n.isObjectEmpty=r,n.splitEvents=a,n.createEvent=s,n.isNodeAfter=l,n.isString=c;var d,u=(d=e(7))&&d.__esModule?d:{default:d};u.default.Utils=u.default.Utils||{},u.default.Utils.escapeHTML=o,u.default.Utils.debounce=i,u.default.Utils.isObjectEmpty=r,u.default.Utils.splitEvents=a,u.default.Utils.createEvent=s,u.default.Utils.isNodeAfter=l,u.default.Utils.isString=c},{7:7}],28:[function(e,t,n){"use strict";function o(e){if("string"!=typeof e)throw new Error("`url` argument must be a string");var t=document.createElement("div");return t.innerHTML='<a href="'+(0,u.escapeHTML)(e)+'">x</a>',t.firstChild.href}function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return e&&!t?a(e):t}function r(e){if("string"!=typeof e)throw new Error("`type` argument must be a string");return e&&-1<e.indexOf(";")?e.substr(0,e.indexOf(";")):e}function a(e){if("string"!=typeof e)throw new Error("`url` argument must be a string");for(var t=0,n=p.length;t<n;t++){var o=p[t](e);if(o)return o}var i=l(s(e)),r="video/mp4";return i&&(~["mp4","m4v","ogg","ogv","webm","flv","mpeg","mov"].indexOf(i)?r="video/"+i:~["mp3","oga","wav","mid","midi"].indexOf(i)&&(r="audio/"+i)),r}function s(e){if("string"!=typeof e)throw new Error("`url` argument must be a string");var t=e.split("?")[0].split("\\").pop().split("/").pop();return~t.indexOf(".")?t.substring(t.lastIndexOf(".")+1):""}function l(e){if("string"!=typeof e)throw new Error("`extension` argument must be a string");switch(e){case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return e}}Object.defineProperty(n,"__esModule",{value:!0}),n.typeChecks=void 0,n.absolutizeUrl=o,n.formatType=i,n.getMimeFromType=r,n.getTypeFromFile=a,n.getExtension=s,n.normalizeExtension=l;var c,d=(c=e(7))&&c.__esModule?c:{default:c},u=e(27),p=n.typeChecks=[];d.default.Utils=d.default.Utils||{},d.default.Utils.typeChecks=p,d.default.Utils.absolutizeUrl=o,d.default.Utils.formatType=i,d.default.Utils.getMimeFromType=r,d.default.Utils.getTypeFromFile=a,d.default.Utils.getExtension=s,d.default.Utils.normalizeExtension=l},{27:27,7:7}],29:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i,r=o(e(2)),a=o(e(4));if([Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=r.default.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}if("function"==typeof window.CustomEvent)return;e.prototype=window.Event.prototype,window.CustomEvent=e}(),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,o=arguments.length;n<o;n++){var i=arguments[n];if(null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length-1;0<=--n&&t.item(n)!==this;);return-1<n}),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t=(this.document||this.ownerDocument).querySelectorAll(e),n=void 0,o=this;do{for(n=t.length;0<=--n&&t.item(n)!==o;);}while(n<0&&(o=o.parentElement));return o}),function(){for(var i=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-i)),o=window.setTimeout(function(){e(t+n)},n);return i=t+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),/firefox/i.test(navigator.userAgent)){var s=window.getComputedStyle;window.getComputedStyle=function(e,t){var n=s(e,t);return null===n?{getPropertyValue:function(){}}:n}}window.Promise||(window.Promise=a.default),(i=window.Node||window.Element)&&i.prototype&&null===i.prototype.children&&Object.defineProperty(i.prototype,"children",{get:function(){for(var e=0,t=void 0,n=this.childNodes,o=[];t=n[e++];)1===t.nodeType&&o.push(t);return o}})},{2:2,4:4}],30:[function(e,t,n){"use strict";function x(){return!((0<arguments.length&&void 0!==arguments[0]?arguments[0]:25)%1==0)}function o(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:25,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"hh:mm:ss";e=!e||"number"!=typeof e||e<0?0:e;var a=Math.round(.066666*o),s=Math.round(o),l=24*Math.round(3600*o),c=Math.round(600*o),d=x(o)?";":":",u=void 0,p=void 0,f=void 0,m=void 0,g=Math.round(e*o);if(x(o)){g<0&&(g=l+g);var h=(g%=l)%c;g+=9*a*Math.floor(g/c),a<h&&(g+=a*Math.floor((h-a)/Math.round(60*s-a)));var v=Math.floor(g/s);u=Math.floor(Math.floor(v/60)/60),p=Math.floor(v/60)%60,f=n?v%60:Math.floor(g/s%60).toFixed(i)}else u=Math.floor(e/3600)%24,p=Math.floor(e/60)%60,f=n?Math.floor(e%60):Math.floor(e%60).toFixed(i);u=u<=0?0:u,f=60===(f=f<=0?0:f)?0:f,p=60===(p=p<=0?0:p)?0:p;for(var y=r.split(":"),b={},E=0,w=y.length;E<w;++E){for(var S="",_=0,C=y[E].length;_<C;_++)S.indexOf(y[E][_])<0&&(S+=y[E][_]);~["f","s","m","h"].indexOf(S)&&(b[S]=y[E].length)}var k=t||0<u?(u<10&&1<b.h?"0"+u:u)+":":"";return k+=(p<10&&1<b.m?"0"+p:p)+":",k+=""+(f<10&&1<b.s?"0"+f:f),n&&(k+=(m=(m=(g%s).toFixed(0))<=0?0:m)<10&&b.f?d+"0"+m:""+d+m),k}function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:25;if("string"!=typeof e)throw new TypeError("Time must be a string");if(0<e.indexOf(";")&&(e=e.replace(";",":")),!/\d{2}(\:\d{2}){0,3}/i.test(e))throw new TypeError("Time code must have the format `00:00:00`");var n=e.split(":"),o=void 0,i=0,r=0,a=0,s=0,l=0,c=Math.round(.066666*t),d=Math.round(t),u=3600*d,p=60*d;switch(n.length){default:case 1:a=parseInt(n[0],10);break;case 2:r=parseInt(n[0],10),a=parseInt(n[1],10);break;case 3:i=parseInt(n[0],10),r=parseInt(n[1],10),a=parseInt(n[2],10);break;case 4:i=parseInt(n[0],10),r=parseInt(n[1],10),a=parseInt(n[2],10),s=parseInt(n[3],10)}return o=x(t)?u*i+p*r+d*a+s-c*((l=60*i+r)-Math.floor(l/10)):(u*i+p*r+t*a+s)/t,parseFloat(o.toFixed(3))}function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:25;e=!e||"number"!=typeof e||e<0?0:e;for(var o=Math.floor(e/3600)%24,i=Math.floor(e/60)%60,r=Math.floor(e%60),a=[[Math.floor((e%1*n).toFixed(3)),"f"],[r,"s"],[i,"m"],[o,"h"]],s=t.timeFormat,l=s[1]===s[0],c=l?2:1,d=s.length<c?s[c]:":",u=s[0],p=!1,f=0,m=a.length;f<m;f++)if(~s.indexOf(a[f][1]))p=!0;else if(p){for(var g=!1,h=f;h<m;h++)if(0<a[h][0]){g=!0;break}if(!g)break;l||(s=u+s),s=a[f][1]+d+s,l&&(s=a[f][1]+s),u=a[f][1]}t.timeFormat=s}function a(e){if("string"!=typeof e)throw new TypeError("Argument must be a string value");for(var t=~(e=e.replace(",",".")).indexOf(".")?e.split(".")[1].length:0,n=0,o=1,i=0,r=(e=e.split(":").reverse()).length;i<r;i++)o=1,0<i&&(o=Math.pow(60,i)),n+=Number(e[i])*o;return Number(n.toFixed(t))}Object.defineProperty(n,"__esModule",{value:!0}),n.isDropFrame=x,n.secondsToTimeCode=o,n.timeCodeToSeconds=i,n.calculateTimeFormat=r,n.convertSMPTEtoSeconds=a;var s,l=(s=e(7))&&s.__esModule?s:{default:s};l.default.Utils=l.default.Utils||{},l.default.Utils.secondsToTimeCode=o,l.default.Utils.timeCodeToSeconds=i,l.default.Utils.calculateTimeFormat=r,l.default.Utils.convertSMPTEtoSeconds=a},{7:7}]},{},[29,6,5,15,23,20,19,21,22,24,16,18,17,9,10,11,12,13,14]);var socketProxy=function(){var r=null,a=null;return{getInstance:function(){return r||(r=function(){var o="",t=null,n=null;function i(e,t){var n={uid:o="m_"+Date.now(),action:e,params:t};a.send(JSON.stringify(n))}return(a=new WebSocket("wss://sws.observador.pt/ws")).onopen=function(e){t&&t()},a.onerror=function(e){console.log("[error]",e.message)},a.onclose=function(e){e.wasClean?(console.log("[close] Connection closed cleanly",e.code,e.reason),r=a=null):(console.log("[close] Connection died"),r=a=null,n&&n(!1))},{unsubscribeToTopics:function(e){return i("unsubscribe",{topics:e}),o},subscribeToTopics:function(e){return i("subscribe",{topics:e}),o},onReady:function(e){e&&(t=e)},onMessage:function(t){a.onmessage=function(e){t(JSON.parse(e.data))}},onClose:function(e){n=e},close:function(){a.close()}}}()),r}}}(),obsAudio=function(){var e,d=null,u=!1,p=!1,f=null,m="",g=0;function t(){var o=document.getElementById("main-audio"),i={alwaysShowControls:!0,features:["playpause","current","progress","tracks","volume","ima"],audioVolume:"vertical",imaUrl:"",imaNodeSelector:".episode-cover-overlay",iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,setDimensions:!1,pauseOtherPlayers:!0,autoplay:!1};function r(){m.hide()}function n(){var e=document.querySelector(".background-one"),t=document.querySelector(".background-two"),n=parseInt(getComputedStyle(e).width),o=parseInt(getComputedStyle(t).width),i=$(window).width(),r=document.querySelector(".stream-message"),a=parseInt(getComputedStyle(r).width);if(a<i-n-o){var s=getComputedStyle(r).animation;r.setAttribute("data-css-animation",s),r.style.animation="none"}else{s=r.getAttribute("data-css-animation");r.style.animation="",250<a&&a<=350?r.style.animationDuration="10s":350<a&&a<=450?r.style.animationDuration="12s":450<a&&(r.style.animationDuration="14s")}}function a(e){if("mediaSession"in navigator)new RegExp("(^[A-Z ]+) - ([A-Za-z]+)","gm")}function s(){var e=new XMLHttpRequest;e.open("GET","https://onair.observador.pt/live"),e.onload=function(){"stream"==m.getAudioType()&&(document.querySelector("#main-audio .stream-message").innerHTML='<span style="color: #57A0D7;">Em Direto/</span> '+JSON.parse(e.responseText).live,n(),a(JSON.parse(e.responseText).live))},e.send(),p||function t(){var e=socketProxy.getInstance();e.onReady(function(){g=0;var t=e.subscribeToTopics(["radio"]);e.onMessage(function(e){"radio"==e.topic&&e.uid==t&&"reply"==e.data.kind&&(p=!0),"publish"==e.kind&&"radio"==e.data.topic&&"stream"==m.getAudioType()&&(document.querySelector("#main-audio .stream-message").innerHTML='<span style="color: #57A0D7;">Em Direto/ </span> '+e.data.message,n(),a(e.data.message))})}),e.onClose(function(e){e||g++,3<=g||setTimeout(t,5e3*g)})}()}function l(){m.pause(),u=!1}function c(e){if(void 0!==e.episode.src){if(m.getAudioId()!=e.id){if(null!=f)try{f.disconnect(),f=null,p=!1}catch(e){}l();var t=e.episode.src;m.reset(),m.setAudioId(e.id),m.setSrc(t),m.setProgramName(e.program.name,e.program.link),m.setProgramDescription(e.episode.title,e.episode.link),m.setAudioType("episode"),e.episode.image&&m.setAudioPoster(e.episode.image),0==o.classList.contains("episode-insteadof-stream")&&o.classList.add("episode-insteadof-stream")}m.show(),m.play(),u=!0,null!=d&&window.clearInterval(d)}}return function(){i.autoplay=document.getElementById("main").getAttribute("autoplay"),(m=new AudioPlayer(document.getElementById("main"),i)).setAudioType("stream"),document.querySelector("#main-audio .mejs__controls").insertAdjacentHTML("afterbegin",'<div class="on-air-icon"></div>'),document.querySelector("#main-audio .mejs__controls").insertAdjacentHTML("afterbegin",'<span class="stream-message">Rádio Observador em direto</span>'),document.querySelector("#main-audio .mejs__layers").insertAdjacentHTML("beforeend",'<div class="mejs__playing program-episode-playing"><div class="scrollable-info"><a href="//" class="program"></a><a href="//"class="episode"></a></div></div>'),document.querySelector("#main-audio .mejs__controls").insertAdjacentHTML("beforeend",'<div class="landing-radio-link"><a href="/radio" alt="Saiba mais sobre a Rádio Observador"><svg><use xlink:href="#obs-icon-info"></use></svg><span>Saiba mais<span></a></div><div class="player-links"><a class="links-radio" href="/programas" alt="Programas"><svg><use xlink:href="#obs-icon-programas"></use></svg><span class="svg-label">Programas</span></a><a class="links-radio programacao" href="/radio/programacao" alt="Programação"><svg><use xlink:href="#obs-icon-programacao"></use></svg><span class="svg-label">Programação</span></a></div>'),document.querySelector("#main-audio .mejs__controls").insertAdjacentHTML("beforeend",'<div class="mejs__button obs-audio-close">×</div>'),document.querySelector("#main-audio .mejs__play").insertAdjacentHTML("beforebegin",'<div class="background-one"></div>'),document.querySelector("#main-audio .mejs__play").insertAdjacentHTML("afterend",'<div class="background-two"></div>'),document.querySelector("#main-audio .mejs__play").insertAdjacentHTML("beforebegin",'<div class="mejs__skip skip-backwards"><button class="obs-audio-15-backwards"></button></div>'),document.querySelector("#main-audio .mejs__play").insertAdjacentHTML("afterend",'<div class="mejs__skip skip-forward"><button class="obs-audio-30-forwards"></button></div>'),e=Array.prototype.slice.call(document.getElementsByClassName("obs-audio-close"))[0],t=Array.prototype.slice.call(document.getElementsByClassName("obs-audio-30-forwards"))[0],n=Array.prototype.slice.call(document.getElementsByClassName("obs-audio-15-backwards"))[0],e.addEventListener("click",function(){r()}),t.addEventListener("click",function(){m.skip30Seconds()}),n.addEventListener("click",function(){m.back15Seconds()}),document.addEventListener("obsAudioEnd",function(e){var t=e.audioId,n=document.getElementById(t);switch(e.audioType){case"clip":n.classList.contains("playing")&&n.classList.remove("playing");break;case"episode":document.getElementById("audio-"+t)&&document.getElementById("audio-"+t).contentWindow.postMessage({event:"audioEnd"},"*")}}),document.addEventListener("obsAudioPaused",function(e){var t=e.audioId,n=document.getElementById(t);switch(e.audioType){case"clip":n.classList.contains("playing")&&n.classList.remove("playing");break;case"episode":document.getElementById("audio-"+t)&&document.getElementById("audio-"+t).contentWindow.postMessage({event:"audioEnd"},"*")}}),document.addEventListener("obsAudioPlay",function(e){var t=e.audioId,n=document.getElementById(t);switch(e.audioType){case"clip":(n=document.getElementById(t)).classList.contains("playing")||n.classList.add("playing");break;case"episode":document.getElementById("audio-"+t)&&document.getElementById("audio-"+t).contentWindow.postMessage({event:"audioPlay"},"*")}if("mediaSession"in navigator){var o="https://s3.observador.pt/wp-content/uploads/2019/11/14104033/direto-radio-observador-1_770x433_acf_cropped.png",i={title:obsAudio.getInstance().getAudioInstance().getProgramDescription()||"",artist:"Observador",album:obsAudio.getInstance().getAudioInstance().getProgramName()||"Rádio Observador",artwork:[{src:"https://bordalo.observador.pt/96,q85/"+o,sizes:"96x96",type:"image/png"},{src:"https://bordalo.observador.pt/128,q85/"+o,sizes:"128x128",type:"image/png"},{src:"https://bordalo.observador.pt/192,q85/"+o,sizes:"192x192",type:"image/png"},{src:"https://bordalo.observador.pt/256,q85/"+o,sizes:"256x256",type:"image/png"},{src:"https://bordalo.observador.pt/384,q85/"+o,sizes:"384x384",type:"image/png"},{src:"https://bordalo.observador.pt/512,q85/"+o,sizes:"512x512",type:"image/png"}]};if("episode"==e.audioType&&(o=obsAudio.getInstance().getAudioInstance().getAudioPoster(),i.artwork=[{src:"https://bordalo.observador.pt/96,fit,q85/"+o,sizes:"96x96",type:"image/png"},{src:"https://bordalo.observador.pt/128,fit,q85/"+o,sizes:"128x128",type:"image/png"},{src:"https://bordalo.observador.pt/192,fit,q85/"+o,sizes:"192x192",type:"image/png"},{src:"https://bordalo.observador.pt/256,fit,q85/"+o,sizes:"256x256",type:"image/png"},{src:"https://bordalo.observador.pt/384,fit,q85/"+o,sizes:"384x384",type:"image/png"},{src:"https://bordalo.observador.pt/512,fit,q85/"+o,sizes:"512x512",type:"image/png"}],navigator.mediaSession.setActionHandler("seekbackward",function(){obsAudio.getInstance().getAudioInstance().back15Seconds()}),navigator.mediaSession.setActionHandler("seekforward",function(){obsAudio.getInstance().getAudioInstance().skip30Seconds()}),localStorage.getItem("playlist"))){var r=JSON.parse(localStorage.getItem("playlist"));0<r.length&&navigator.mediaSession.setActionHandler("nexttrack",function(){if(0<r.length){var e=r[0];l(),obsAudio.getInstance().playEpisode(e),obsAudio.getInstance().getAudioInstance().nextPlayListItem(),0==(r=JSON.parse(localStorage.getItem("playlist"))).length&&navigator.mediaSession.setActionHandler("nexttrack",null)}})}"clip"==e.audioType&&(navigator.mediaSession.setActionHandler("seekbackward",function(){obsAudio.getInstance().getAudioInstance().back15Seconds()}),navigator.mediaSession.setActionHandler("seekforward",function(){obsAudio.getInstance().getAudioInstance().skip30Seconds()}),navigator.mediaSession.setActionHandler("nexttrack",null)),"stream"==e.audioType&&(navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("nexttrack",null),i.title="Em Direto"),navigator.mediaSession.metadata=new MediaMetadata(i)}}),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",function(){obsAudio.getInstance().getAudioInstance().play()}),navigator.mediaSession.setActionHandler("pause",function(){obsAudio.getInstance().getAudioInstance().pause()}),navigator.mediaSession.setActionHandler("stop",function(){obsAudio.getInstance().getAudioInstance().pause()}),document.addEventListener("obsAudioPubStart",function(e){navigator.mediaSession.metadata=null,navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("nexttrack",null)})),window.addEventListener("message",function(e){if("player-play"==e.data.message){localStorage.removeItem("playlist");var t=document.querySelector("iframe[data-secret='"+e.data.secret+"']");t.setAttribute("data-name",e.data.value.program.name),t.classList.contains("episode")||t.classList.add("episode"),t.id="audio-"+e.data.value.id,l(),c(e.data.value)}if("playlist-play"==e.data.message&&c(e.data.value),"player-pause"==e.data.message){var t=document.querySelector("iframe[data-secret='"+e.data.secret+"']");l()}}),$(document).on("click",".obs-audio-radio-play",function(e){e.preventDefault(),function(){m.disableAds(),"radio"!=m.getAudioId()&&(l(),m.setAudioId("radio"),m.setSrc("https://centova.radio.com.pt/proxy/455?mp=/stream"),obsAudio.getInstance().getAudioInstance().setProgramDescription(""),obsAudio.getInstance().getAudioInstance().setProgramName("")),m.show(),m.play(),m.setAudioType("stream"),1==o.classList.contains("episode-insteadof-stream")&&o.classList.remove("episode-insteadof-stream");try{s()}catch(e){}}()});var e,t,n;try{s()}catch(e){}}(),{hide:r,show:function(){m.show()},update:function(){Array.prototype.slice.call(document.getElementsByClassName("obs-audio-clip-play")).forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()}),e.querySelector(".obs-icon-play").addEventListener("click",function(){l(),function(e){if(m.getAudioId()!=e.id){f&&(f.disconnect(),f=null,p=!1);var t=e.getAttribute("data-src"),n=e.getAttribute("data-description");m.setSrc(t),m.reset(),m.setProgramName("",""),m.setProgramDescription(n,""),m.setAudioId(e.getAttribute("id")),m.setAudioType("clip")}m.show(),m.play(),0==o.classList.contains("episode-insteadof-stream")&&o.classList.add("episode-insteadof-stream"),null!=d&&window.clearInterval(d)}(e)}),e.querySelector(".obs-icon-pause").addEventListener("click",function(){l()})})},playEpisode:c,pauseAudio:l,getState:function(){return u},getAudioInstance:function(){return m}}}return{getInstance:function(){return e||(e=t()),e}}}();function AudioPlayer(e,t){var o="program",i="episode",r="",n="",a="",s="",l=!0,c={me:"",settings:{}};function d(e){var t;document.createEvent?(t=document.createEvent("HTMLEvents")).initEvent(e,!0,!0):(t=document.createEventObject()).eventType=e,t.eventName=e,t.audioId=c.me.media.getAttribute("data-audioid"),t.audioType=s,document.createEvent?document.dispatchEvent(t):document.fireEvent("on"+t.eventType,t)}function u(){var e=localStorage.playlist;if(null==e)return!1;var t=(e=JSON.parse(e)).shift();return localStorage.playlist=JSON.stringify(e),p(t),t}function p(e){var t,n;return t=e.id,"undefined"!=typeof Storage&&Storage,-1==(n=null!=(n=localStorage.watched)?JSON.parse(n):[]).indexOf(t)&&n.push(t),localStorage.watched=JSON.stringify(n)}this.playing=function(){return!c.me.media.paused},this.setAutoplay=function(e){return c.me.media.autoplay=e},this.nextPlayListItem=u,this.getAutoplay=function(){return c.me.media.autoplay},this.getProgramName=function(){return r},this.getAudioPoster=function(){return n},this.setAudioPoster=function(e){n=e},this.setProgramName=function(e,t){r=e;var n=document.querySelector(".obs-audio-"+this.getId());n.getElementsByClassName(o)[0].innerText=r,n.getElementsByClassName(o)[0].href=t},this.setProgramNameStateless=function(e,t){var n=document.querySelector(".obs-audio-"+this.getId());n.getElementsByClassName(o)[0].innerText=e,n.getElementsByClassName(o)[0].href=t},this.getProgramDescription=function(){return a},this.setupIMA=function(){c.me.googleImaSetup()},this.setVASTUrl=function(e){c.me.setVASTUrl(e)},this.enableAds=function(e){c.me.enableAds()},this.destroyIMA=function(){c.me.destroyima()},this.disableAds=function(){this._showAds=!1,c.me.disableAds(),c.me.stopAds()},this.setProgramDescription=function(e,t){a=e;var n=document.querySelector(".obs-audio-"+this.getId());n.getElementsByClassName(i)[0].innerText=a,n.getElementsByClassName(i)[0].href=t},this.setProgramDescriptionStateless=function(e,t){var n=document.querySelector(".obs-audio-"+this.getId());n.getElementsByClassName(i)[0].innerText=e,n.getElementsByClassName(i)[0].href=t},this.init=function(e,t,o){var i=this,r=JSON.parse(e.getAttribute("data-settings"));e.removeAttribute("data-settings"),t.success=function(e,t,n){return c.settings.closable=!0,c.settings.type=r&&""!=r.type?r.type:"stream",c.me=n,c.idx=o,c.me.disableAds(),c.me.media.addEventListener("ended",function(e){var t=u();t&&window.parent.postMessage({message:"playlist-play",value:t},"*"),d("obsAudioEnd")}),c.me.media.addEventListener("mejsImaContentPaused",function(){i.setProgramNameStateless("Publicidade"),i.setProgramDescriptionStateless("",""),d("obsAudioPubStart")}),c.me.media.addEventListener("mejsImaLoaded",function(){d("obsAudioPubLoaded")}),c.me.media.addEventListener("mejsImaDestroyed",function(){i.setProgramName(i.getProgramName()),i.setProgramDescription(i.getProgramDescription()),d("obsAudioPubEnd")}),c.me.media.addEventListener("mejsImaResumeContent",function(){i.setProgramName(i.getProgramName()),i.setProgramDescription(i.getProgramDescription()),d("obsAudioPubEnd")}),c.me.media.addEventListener("playing",function(){d("obsAudioPlay")}),c.me.media.addEventListener("loadedmetadata",function(){}),c};$(e).mediaelementplayer(t);e.audio=this,mejs.i18n.en["mejs.live-broadcast"]="Rádio Observador em direto"},this.getId=function(){return c.me.media.id},this.setAudioType=function(e){s=e},this.getAudioType=function(){return s},this.play=function(){c.me.media.play()},this.pause=function(){c.me.media.paused||(c.me.media.pause(),d("obsAudioPaused"))},this.forward=function(e){var t=c.me.media.currentTime,n=c.me.media.duration;e<n-t?t+=e:t=n,c.me.media.currentTime=t},this.backward=function(e){var t=c.me.media.currentTime;e<t?t-=e:t=0,c.me.media.currentTime=t},this.reset=function(){c.me.media.pause(),0<c.me.media.currentTime&&(c.me.media.currentTime=0)},this.next=function(){this.setSrc("")},this.prev=function(){this.setSrc("")},this.current=function(){this.getSrc()},this.setSrc=function(e){e&&(this.reset(),c.me.media.setSrc(e),c.me.media.load())},this.getSrc=function(){c.me.media.getSrc()},this.skip30Seconds=function(){this.forward(30)},this.back15Seconds=function(){this.backward(15)},this.setCurrentTime=function(e){c.me.media.setCurrentTime(e)},this.getCurrentTime=function(){c.me.media.getCurrentTime()},this.remove=function(){if(0==c.settings.closable)return!1;c.me.media.paused||this.pause();var e=this.getId();return document.querySelector(".obs-audio-"+e).parentElement.removeChild(document.querySelector(".obs-audio-"+e)),c.me.media.remove(),$(c.me.media).parent().remove(c.me.media),!0},this.getAudioTagId=function(){return c.me.media.querySelector("audio").id},this.hide=function(){if(0==c.settings.closable)return!1;c.me.media.paused||this.pause();var e=this.getId();return document.querySelector(".obs-audio-"+e).style.display="none",obsEventEmitter("obsClosePlayer"),!(l=!1)},this.show=function(){if(0==c.settings.closable)return!1;var e=this.getId();return document.querySelector(".obs-audio-"+e).style.display="block",obsEventEmitter("obsShowPlayer"),l=!0},this.getType=function(){return c.settings.type},this.addToWatchedList=function(e){return p(e)},this.getWatchedList=function(){var e=localStorage.watched;if(e)return JSON.parse(e)},this.setAudioId=function(e){c.me.media.setAttribute("data-audioid",e)},this.getAudioId=function(){return c.me.media.getAttribute("data-audioid")},this.isVisible=function(){return l},this.init(e,t)}document.addEventListener("obsLoad",function(){obsAudio.getInstance().update()}),obsEventListener("obsLoad",function(){obsAudio.getInstance()}),Object.assign(mejs.MepDefaults,{imaUrl:"",adsWidth:320,adsHeight:480,googleIMASdk:"//imasdk.googleapis.com/js/sdkloader/ima3.js",imaNodeSelector:!1}),Object.assign(MediaElementPlayer.prototype,{adDisplayContainer:"",adsLoader:"",adsRequest:"",originalSrc:"",googleImaTriggered:!1,contentEnd:!1,adsManager:null,allowIMA:!0,requestedAds:!1,buildima:function(e,t,n,o){var i=this;i.play=i.play,i.media.addEventListener("play",function(){i.contentEnd=!1,i.requestAds()}),e.showAds=!0,i.imaAdsLayer=document.createElement("div"),i.imaAdsLayerContent=document.createElement("div"),i.optionVideoElement=document.createElement("video"),i.optionVideoElement.style.width="100%",i.optionVideoElement.style.position="relative",i.optionVideoElement.className=i.options.classPrefix+"ima-video",i.imaAdsLayer.className=i.options.classPrefix+"layer "+i.options.classPrefix+"overlay "+i.options.classPrefix+"ima",i.imaAdsLayer.insertAdjacentElement("afterbegin",i.optionVideoElement),i.imaAdsLayer.style.display="none",i.imaAdsLayer.style.position="relative",i.imaAdsLayer.style.overflow="hidden",i.imaAdsLayerContent.className=i.options.classPrefix+"layer "+i.options.classPrefix+"overlay "+i.options.classPrefix+"ima-content",i.imaAdsLayerContent.style.display="none"},googleImaInjectNode:function(){var e=this;e.options.imaNodeSelector?(document.querySelector(e.options.imaNodeSelector).appendChild(e.imaAdsLayer),document.querySelector(e.options.imaNodeSelector).appendChild(e.imaAdsLayerContent)):(e.layers.insertBefore(e.imaAdsLayer,e.layers.querySelector("."+e.options.classPrefix+"overlay-play")),e.layers.insertBefore(e.imaAdsLayerContent,layers.querySelector("."+e.options.classPrefix+"overlay-play")))},googleImaSetup:function(){var e=this;if(!document.getElementById("googleIMASdk")){var t=document.createElement("script");return t.src=this.options.googleIMASdk,t.id="googleIMASdk",t.onload=function(){e.googleImaSetup()},void document.querySelector("script").insertAdjacentElement("afterend",t)}e.googleImaInjectNode(),e.adDisplayContainer=new google.ima.AdDisplayContainer(e.imaAdsLayer,e.optionVideoElement),e.adsLoader=new google.ima.AdsLoader(e.adDisplayContainer),e.adsRequest=new google.ima.AdsRequest,e.adsRequest.setAdWillAutoPlay(!0),e.adsRequest.setAdWillPlayMuted(!1),e.adsRequest.linearAdSlotWidth=e.options.adsWidth,e.adsRequest.linearAdSlotHeight=e.options.adsHeight,e.adsRequest.nonLinearAdSlotWidth=e.options.adsWidth,e.adsRequest.nonLinearAdSlotHeight=e.options.adsHeight,e.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e.onAdsManagerLoaded.bind(e),!1),e.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e.onAdError.bind(e),!1);var n=mejs.Utils.createEvent("mejsImaLoaded",e.container);e.media.dispatchEvent(n),e.googleImaTriggered=!0},contentEndedListener:function(){this.contentEnd=!0,this.requestedAds=!1,this.adsLoader.contentComplete()},onAdsManagerLoaded:function(e){var t=this,n=new google.ima.AdsRenderingSettings;t.adsManager=e.getAdsManager(t.domNode),n.enablePreloading=!0,t.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t.onAdError.bind(t)),t.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,t.onAdLoaded.bind(t)),t.setAdsEvent(!0),t.playAds()},setAdsEvent:function(){return this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.pauseContent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.resumeContent.bind(this)),window.addEventListener("resize",this.onResize.bind(this)),this.allowIMA},enableAds:function(){this.allowIMA=!0},disableAds:function(){this.allowIMA=!1},setVASTUrl:function(e){this.options.imaUrl=e},stopAds:function(){this.adsManager&&this.adsManager.stop()},onAdError:function(e){this.adsManager&&this.adsManager.destroy()},onAdLoaded:function(e){this.isLinear=e.getAd().isLinear(),e.type!=google.ima.AdEvent.Type.LOADED||e.getAd().isLinear()||(console.log("Ads","Non-Linear Ads play alongside the video"),this.play())},onResize:function(){var e=document.querySelector(this.options.imaNodeSelector).clientWidth,t=document.querySelector(this.options.imaNodeSelector).clientHeight;this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL)},resumeContent:function(){var e=this;if(e.requestedAds){if($(e.imaAdsLayer).width(0),$(e.imaAdsLayer).height(0),e.imaShowControls(),!e.contentEnd){e.imaAdsLayer.style.display="none",e.play(),e.domNode.addEventListener("ended",e.contentEndedListener.bind(e));var t=mejs.Utils.createEvent("mejsImaResumeContent",e.container);e.media.dispatchEvent(t)}e.isVideo&&(e.layers.querySelector(".mejs__overlay-play").style.display="flex")}},imaHideControls:function(){this.controls.style.opacity=.2,this.controls.style.pointerEvents="none",this.controls.classList.add("mejs__controls-pub")},imaShowControls:function(){this.controls.style.opacity=1,this.controls.style.pointerEvents="all",this.controls.classList.remove("mejs__controls-pub")},pauseContent:function(){var e=this;if(this.requestedAds=!0,e.domNode.removeEventListener("ended",e.contentEndedListener.bind(e)),e.pause(),e.isLinear){e.imaAdsLayer.style.display="block",e.imaHideControls();var t=e.options.adsWidth,n=e.options.adsHeight;e.options.imaNodeSelector&&(t=$(e.options.imaNodeSelector).width(),n=$(e.options.imaNodeSelector).height()),$(e.imaAdsLayer).width(t),$(e.imaAdsLayer).height(n),e.isVideo&&(e.imaAdsLayerContent.style.display="none",window.setTimeout(function(){e.layers.querySelector(".mejs__overlay-play").style.display="none"},100));var o=mejs.Utils.createEvent("mejsImaContentPaused",e.container);e.media.dispatchEvent(o)}},destroyima:function(){var e=this;if(e.adsLoader.destroy(),e.adsManager&&(e.adsManager.destroy(),e.adsManager.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,e.pauseContent.bind(e)),e.adsManager.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,e.resumeContent.bind(e))),e.requestedAds){var t=mejs.Utils.createEvent("mejsImaDestroyed",e.container);e.media.dispatchEvent(t)}window.removeEventListener("resize",e.onResize.bind(e)),e.adDisplayContainer.destroy(),e.paused||e.resumeContent(),e.requestedAds=!1},requestAds:function(){var e=this;0!=e.allowIMA&&1!=e.requestedAds&&""!==e.options.imaUrl&&(0==e.googleImaTriggered?e.media.addEventListener("mejsImaLoaded",function(){this.adsRequest.adTagUrl=this.options.imaUrl,this.adsLoader.requestAds(this.adsRequest)}.bind(e)):(e.adsRequest.adTagUrl=e.options.imaUrl,e.adsLoader.requestAds(e.adsRequest)))},playAds:function(){var t=this;try{t.adDisplayContainer.initialize();var e=t.options.adsWidth,n=t.options.adsHeight;t.options.imaNodeSelector&&(e=$(t.options.imaNodeSelector).width(),n=$(t.options.imaNodeSelector).height()),$(t.imaAdsLayer).width(e),$(t.imaAdsLayer).height(n),t.adsManager.init(e,n,google.ima.ViewMode.NORMAL),t.adsManager.start()}catch(e){console.log(e),t.play()}}});var RameiraProxy=function(){var e;return{getInstance:function(){var o,i,a,r;return e||(o=globalSettings.obsIps.rameiraURL,i=function(e,t,n,o,i){var r=null;null==n&&null==n||(r=JSON.stringify(n));var a=new XMLHttpRequest;a.open(t,e,!0),a.setRequestHeader("Content-type","application/json");var s=AdamastorProxy.getInstance().getToken();a.setRequestHeader("Authorization","Bearer "+s),a.onreadystatechange=function(){if(4==a.readyState)if(200<=a.status&&a.status<400){if(a.responseText)var e="";try{e=JSON.parse(a.responseText)}catch(e){}o(e,a.statusText,a)}else i(a,a.statusText)},a.send(r)},a=function(e,t,n){i(o+e,"GET",null,t,n)},r=function(e,t,n){i(o+"article","POST",e,t,n)},e={addEvent:function(e,t,n){r(e,t,n)},getHistory:function(e,t,n,o,i){var r="article/user/"+e+"/history/events";null!=t&&null!=n&&(r+="?l="+parseInt(t),r+="&o="+parseInt(n)),a(r,o,i)},getSavedArticles:function(e,t,n,o,i){var r="article/user/"+e+"/save";null!=t&&null!=n&&(r+="?l="+parseInt(t),r+="&o="+parseInt(n)),a(r,o,i)},unSaveArticle:function(e,t,n,o){r({postId:t,userId:e,action:"UNSAVE"},n,o)}}),e}}}();function sendHistoryEvent(){if(AdamastorProxy.getInstance().isLoggedIn()){var e=contextualData.type,t=contextualData.id;if("post"===e&&0<t){var n={objectType:"post",id:""+t,userId:AdamastorProxy.getInstance().getSessionProfile().sub,anonymous:!1,action:"READ",platform:"desktop",origin:"normal"};RameiraProxy.getInstance().addEvent(n,function(e,t,n){},function(e,t,n){console.log("fail to save user history")})}}}document.addEventListener("obsLoad",function(){sendHistoryEvent()});var SaveArticlesProxy=function(){var e,t=globalSettings.obsIps;return{getInstance:function(){var i,r,a,s;return e||(i=t.saveArticlesURL,r=function(e,t,n,o,i){var r=null;null==n&&null==n||(r=JSON.stringify(n));var a=new XMLHttpRequest;a.open(t,e,!0),a.setRequestHeader("Content-type","application/json");var s=AdamastorProxy.getInstance().getToken();a.setRequestHeader("Authorization","Bearer "+s),a.onreadystatechange=function(){if(4==a.readyState)if(200<=a.status&&a.status<400){if(a.responseText)var e="";try{e=JSON.parse(a.responseText)}catch(e){}o(e,a.statusText,a)}else i(a,a.statusText)},a.send(r)},a=function(e,t,n){r(i+e,"GET",null,t,n)},s=function(e,t,n,o){r(i+e,"POST",t,n,o)},e={saveArticle:function(e,t,n,o){s("save",{postId:t,userId:e},n,o)},unSaveArticle:function(e,t,n,o){s("unsave",{postId:t,userId:e},n,o)},getSavedIdsArticles:function(e,t,n){a("save/"+e+"/ids",t,n)},checkSavedArticle:function(e,t,n,o){a("save/"+e+"/"+t+"/status",n,o)},getSavedArticles:function(e,t,n,o,i){var r="save/"+e+"/ids";null!=t&&null!=n&&(r+="?l="+parseInt(t),r+="&o="+parseInt(n)),a(r,o,i)},getSavedArticlesComplete:function(e,t,n,o,i){var r="save/"+e;null!=t&&null!=n&&(r+="?l="+parseInt(t),r+="&o="+parseInt(n)),a(r,o,i)},getAllIds:function(e,t,n){a("save/"+e+"/ids?t=1",t,n)}}),e}}}();!function(){var e={savedIds:[],init:function(){var t=this;document.addEventListener("obsLoad",function(){AdamastorProxy.getInstance().isLoggedIn()?t.initLogged(AdamastorProxy.getInstance().getSessionProfile()):t.initUnlogged()}),document.addEventListener("obsLogout",function(e){t.initUnlogged()}),document.addEventListener("obsLogin",function(e){t.initLogged(AdamastorProxy.getInstance().getSessionProfile())}),AdamastorProxy.getInstance().isLoggedIn()?t.initLogged(AdamastorProxy.getInstance().getSessionProfile()):t.initUnlogged()},initLogged:function(e){var n=this;n.userId=e.sub,n.savedIds=[],"post"===contextualData.type&&void 0!==contextualData.id&&SaveArticlesProxy.getInstance().checkSavedArticle(n.userId,contextualData.id,function(e,t){!0===e.saved&&n.savedIds.push(parseInt(contextualData.id)),n.bindSaveIcon()},function(e,t,n){})},bindSaveIcon:function(){var o=this;$(".save").each(function(e,t){if($(t).unbind("click"),$(t).removeClass("saved"),AdamastorProxy.getInstance().isLoggedIn()){var n=$(t).data("id");0<=o.savedIds.indexOf(n)&&$(t).addClass("saved"),$(t).bind("click",function(){$($(t)).hasClass("saved")?o.bindSaved($(t)):o.bindNotSaved($(t))})}else $(t).bind("click",function(){var e=$("#login-popup");$.magnificPopup.open({items:{src:e},type:"inline",closeOnBgClick:!0,closeOnContentClick:!0})})})},bindSaved:function(o){var e=$(o).data("id");SaveArticlesProxy.getInstance().unSaveArticle(this.userId,e,function(e,t,n){$(o).removeClass("saved")},function(e,t,n){})},bindNotSaved:function(o){var e=$(o).data("id");SaveArticlesProxy.getInstance().saveArticle(this.userId,e,function(e,t,n){$(o).addClass("saved")},function(e,t,n){})},initUnlogged:function(){"post"===contextualData.type&&this.bindSaveIcon()}};obsEventListener("obsLoad",function(){e.init()}),window.obs.isDevEnvironment()&&.7<Math.random&&(console.log("https://pastebin.com/VrE63aAQ"),window["_"+[String.fromCharCode(65),String.fromCharCode(82),String.fromCharCode(75),String.fromCharCode(65),String.fromCharCode(78),String.fromCharCode(79),String.fromCharCode(73),String.fromCharCode(68)].join("").toLowerCase()]=function(){$.magnificPopup.open({items:{src:'<div class="cenas" style="width:280px;margin:auto"><div class="mfp-close" style="background-color:white">fechar</div><style>#field{background-color: white; width: 310px; height: 280px; padding-top: 30px; border: 1px solid #ccc; font-size: 0; position: relative;}.brick,.removed{width: 28px; height: 10px; margin: 1px; display: inline-block; box-sizing: border-box;}.brick{background: blue;}.removed{border-color: transparent;}#paddle{width: 62px; height: 5px; background: black; position: absolute; left: 128px; top: 270px;}#ball{width: 10px; height: 10px; background: red; border-radius: 50%; position: absolute;}</style><div id="field"> <div id="paddle"></div><div id="ball" style="left: 154px; top: 258px;"> </div></div></div>',type:"inline"},preloader:!1,callbacks:{open:function(){!function(e,i,r,t,a,s,l,c){field.insertAdjacentHTML("afterbegin",Array(50).fill('<div class="brick"></div>').join(""));var d=field.children,u=setInterval(function(){console.log("lifes",l);var e=i(ball.style.left=i(ball.style.left)+a+"px"),t=i(ball.style.top=i(ball.style.top)+s+"px"),n=(t-30)/14|0,o=e/32|0;(e<0&&a<0||310<=e&&0<a)&&(a*=-1),r<=e+6&&e+6<=r+64&&259<=t&&t<=274&&(s*=-1,e+6<=r+21?a=-6:r+43<=e+6?a=6:6==Math.abs(a)&&(a=2*a/3|0)),t<0&&(s*=-1),288<=t&&!--l&&(clearInterval(u),alert("Game over!")),288<=t&&l&&(s*=-1),18<=t&&t<=100&&"removed"!=d[10*n+o].className&&(s*=-1,d[10*n+o].className="removed",a<0&&((0|e)%32<10||22<(0|e)%32)&&(a*=-1),0<a&&((e+12|0)%32<10||22<(e+12|0)%32)&&(a*=-1),++c,console.log("score",c),50==c&&(clearInterval(u),alert("Victory!")))},1e3/60);document.addEventListener("mousemove",function(e){r=40<e.pageX?e.pageX<250?e.pageX-40:256:0,paddle.style.left=r+"px"},!1)}(field.children,parseFloat,129,0,-4,-4,5,0)},close:function(){window.location.reload()}}})})}();
//# sourceMappingURL=observador.min.js.map
