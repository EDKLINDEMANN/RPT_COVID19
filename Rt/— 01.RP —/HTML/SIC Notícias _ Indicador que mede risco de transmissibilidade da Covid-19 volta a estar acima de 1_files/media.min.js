/*! sicnot - v0.0.1 - 2020-05-21
* Copyright (c) 2020 Impresa - Software Factory;
 Licensed Proprietary */

!function(c){"use strict";if("undefined"!==typeof window){var t,h=0,d=!1,e=!1,g="message".length,y="[iFrameSizer]",_=y.length,b=null,a=window.requestAnimationFrame,p={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},w={},n=null,f={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){M("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}},T={};window.jQuery&&((t=window.jQuery).fn?t.fn.iFrameResize||(t.fn.iFrameResize=function(n){return this.filter("iframe").each(function(t,e){l(e,n)}).end()}):A("","Unable to bind to jQuery, it is not fully loaded.")),"function"===typeof define&&define.amd?define("iframeResizer",[],V):"object"===typeof module&&"object"===typeof module.exports&&(module.exports=V()),window.iFrameResize=window.iFrameResize||V()}function m(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function x(t,e,n){"addEventListener"in window?t.addEventListener(e,n,!1):"attachEvent"in window&&t.attachEvent("on"+e,n)}function E(t,e,n){"removeEventListener"in window?t.removeEventListener(e,n,!1):"detachEvent"in window&&t.detachEvent("on"+e,n)}function r(t){return y+"["+(n="Host page: "+(e=t),window.top!==window.self&&(n=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e),n)+"]";var e,n}function i(t){return w[t]?w[t].log:d}function S(t,e){o("log",t,e,i(t))}function A(t,e){o("info",t,e,i(t))}function M(t,e){o("warn",t,e,!0)}function o(t,e,n,i){!0===i&&"object"===typeof window.console&&console[t](r(e),n)}function s(e){function o(){t("Height"),t("Width"),D(function(){I(m),L(v),d("resizedCallback",m)},m,"init")}function t(t){var e=Number(w[v]["max"+t]),n=Number(w[v]["min"+t]),i=t.toLowerCase(),r=Number(m[i]);S(v,"Checking "+i+" is in range "+n+"-"+e),r<n&&(r=n,S(v,"Set "+i+" to min value")),r>e&&(r=e,S(v,"Set "+i+" to max value")),m[i]=""+r}function s(t){return f.substr(f.indexOf(":")+g+t)}function l(n,i){var t,e,r;t=function(){var t,e;j("Send Page Info","pageInfo:"+(t=document.body.getBoundingClientRect(),e=m.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:e.height,iframeWidth:e.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(e.top-t.top,10),offsetLeft:parseInt(e.left-t.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})),n,i)},e=32,T[r=i]||(T[r]=setTimeout(function(){T[r]=null,t()},e))}function u(t){var e=t.getBoundingClientRect();return O(v),{x:Math.floor(Number(e.left)+Number(b.x)),y:Math.floor(Number(e.top)+Number(b.y))}}function c(t){var e=t?u(m.iframe):{x:0,y:0},n={x:Number(m.width)+e.x,y:Number(m.height)+e.y};S(v,"Reposition requested from iFrame (offset x:"+e.x+" y:"+e.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(t?"Offset":"")](n.x,n.y):M(v,"Unable to scroll to requested position, window.parentIFrame not found"):(b=n,h(),S(v,"--"))}function h(){!1!==d("scrollCallback",b)?L(v):R()}function d(t,e){return C(v,t,e)}var n,i,r,a,p,f=e.data,m={},v=null;"[iFrameResizerChild]Ready"===f?function(){for(var t in w)j("iFrame requested init",N(t),document.getElementById(t),t)}():y===(""+f).substr(0,_)&&f.substr(_).split(":")[0]in w?(p=f.substr(_).split(":"),m={iframe:w[p[0]]&&w[p[0]].iframe,id:p[0],height:p[1],width:p[2],type:p[3]},v=m.id,w[v]&&(w[v].loaded=!0),(a=m.type in{true:1,false:1,undefined:1})&&S(v,"Ignoring init message from meta parent page"),!a&&(r=!0,w[i=v]||(r=!1,M(m.type+" No settings for "+i+". Message was: "+f)),r)&&(S(v,"Received: "+f),n=!0,null===m.iframe&&(M(v,"IFrame ("+m.id+") not found"),n=!1),n&&function(){var t,n=e.origin,i=w[v]&&w[v].checkOrigin;if(i&&""+n!=="null"&&!(i.constructor===Array?function(){var t=0,e=!1;for(S(v,"Checking connection is from allowed list of origins: "+i);t<i.length;t++)if(i[t]===n){e=!0;break}return e}():(t=w[v]&&w[v].remoteHost,S(v,"Checking connection is from: "+t),n===t)))throw new Error("Unexpected message received from: "+n+" for "+m.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(w[v]&&w[v].firstRun&&w[v]&&(w[v].firstRun=!1),m.type){case"close":w[v].closeRequestCallback?C(v,"closeRequestCallback",w[v].iframe):k(m.iframe);break;case"message":a=s(6),S(v,"MessageCallback passed: {iframe: "+m.iframe.id+", message: "+a+"}"),d("messageCallback",{iframe:m.iframe,message:JSON.parse(a)}),S(v,"--");break;case"scrollTo":c(!1);break;case"scrollToOffset":c(!0);break;case"pageInfo":l(w[v]&&w[v].iframe,v),function(){function t(e,n){function i(){w[a]?l(w[a].iframe,a):r()}["scroll","resize"].forEach(function(t){S(a,e+t+" listener for sendPageInfo"),n(window,t,i)})}function r(){t("Remove ",E)}var a=v;t("Add ",x),w[a]&&(w[a].stopPageInfo=r)}();break;case"pageInfoStop":w[v]&&w[v].stopPageInfo&&(w[v].stopPageInfo(),delete w[v].stopPageInfo);break;case"inPageLink":t=s(9),n=t.split("#")[1]||"",i=decodeURIComponent(n),(r=document.getElementById(i)||document.getElementsByName(i)[0])?(e=u(r),S(v,"Moving to in page link (#"+n+") at x: "+e.x+" y: "+e.y),b={x:e.x,y:e.y},h(),S(v,"--")):window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(n):S(v,"In page link #"+n+" not found and window.parentIFrame not found"):S(v,"In page link #"+n+" not found");break;case"reset":P(m);break;case"init":o(),d("initCallback",m.iframe);break;default:o()}var t,e,n,i,r,a}())):A(v,"Ignored: "+f)}function C(t,e,n){var i=null,r=null;if(w[t]){if("function"!==typeof(i=w[t][e]))throw new TypeError(e+" on iFrame["+t+"] is not a function");r=i(n)}return r}function v(t){var e=t.id;delete w[e]}function k(t){var e=t.id;S(e,"Removing iFrame: "+e);try{t.parentNode&&t.parentNode.removeChild(t)}catch(t){}C(e,"closedCallback",e),S(e,"--"),v(t)}function O(t){null===b&&S(t,"Get page position: "+(b={x:window.pageXOffset!==c?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==c?window.pageYOffset:document.documentElement.scrollTop}).x+","+b.y)}function L(t){null!==b&&(window.scrollTo(b.x,b.y),S(t,"Set page position: "+b.x+","+b.y),R())}function R(){b=null}function P(t){S(t.id,"Size reset requested by "+("init"===t.type?"host page":"iFrame")),O(t.id),D(function(){I(t),j("reset","reset",t.iframe,t.id)},t,"reset")}function I(n){function i(t){e||"0"!==n[t]||(e=!0,S(r,"Hidden iFrame detected, creating visibility listener"),function(){function e(){function t(e){function t(t){return"0px"===(w[e]&&w[e].iframe.style[t])}w[e]&&null!==w[e].iframe.offsetParent&&(t("height")||t("width"))&&j("Visibility change","resize",w[e].iframe,e)}for(var e in w)t(e)}function t(t){S("window","Mutation observed: "+t[0].target+" "+t[0].type),u(e,16)}var n=m();n&&(i=document.querySelector("body"),r={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},new n(t).observe(i,r));var i,r}())}function t(t){var e;e=t,n.id?(n.iframe.style[e]=n[e]+"px",S(n.id,"IFrame ("+r+") "+e+" set to "+n[e]+"px")):S("undefined","messageData id not set"),i(t)}var r=n.iframe.id;w[r]&&(w[r].sizeHeight&&t("height"),w[r].sizeWidth&&t("width"))}function D(t,e,n){n!==e.type&&a?(S(e.id,"Requesting animation frame"),a(t)):t()}function j(t,e,n,i,r){var a,o=!1;i=i||n.id,w[i]&&(n&&"contentWindow"in n&&null!==n.contentWindow?(a=w[i]&&w[i].targetOrigin,S(i,"["+t+"] Sending msg to iframe["+i+"] ("+e+") targetOrigin: "+a),n.contentWindow.postMessage(y+e,a)):M(i,"["+t+"] IFrame("+i+") not found"),r&&w[i]&&w[i].warningTimeout&&(w[i].msgTimeout=setTimeout(function(){!w[i]||w[i].loaded||o||(o=!0,M(i,"IFrame has not responded within "+w[i].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))},w[i].warningTimeout)))}function N(t){return t+":"+w[t].bodyMarginV1+":"+w[t].sizeWidth+":"+w[t].log+":"+w[t].interval+":"+w[t].enablePublicMethods+":"+w[t].autoResize+":"+w[t].bodyMargin+":"+w[t].heightCalculationMethod+":"+w[t].bodyBackground+":"+w[t].bodyPadding+":"+w[t].tolerance+":"+w[t].inPageLinks+":"+w[t].resizeFrom+":"+w[t].widthCalculationMethod}function l(n,t){var e,i,r,a,o,s,l,u=(e=n.id,""===e&&(n.id=(i=t&&t.id||f.id+h++,null!==document.getElementById(i)&&(i+=h++),e=i),d=(t||{}).log,S(e,"Added missing iframe ID: "+e+" ("+n.src+")")),e);u in w&&"iFrameResizer"in n?M(u,"Ignored iFrame, already setup."):(s=(s=t)||{},w[u]={firstRun:!0,iframe:n,remoteHost:n.src.split("/").slice(0,3).join("/")},function(t){if("object"!==typeof t)throw new TypeError("Options is not an object")}(s),function(t){for(var e in f)f.hasOwnProperty(e)&&(w[u][e]=t.hasOwnProperty(e)?t[e]:f[e])}(s),w[u]&&(w[u].targetOrigin=!0===w[u].checkOrigin?""===(l=w[u].remoteHost)||"file://"===l?"*":l:"*"),function(){switch(S(u,"IFrame scrolling "+(w[u]&&w[u].scrolling?"enabled":"disabled")+" for "+u),n.style.overflow=!1===(w[u]&&w[u].scrolling)?"hidden":"auto",w[u]&&w[u].scrolling){case"omit":break;case!0:n.scrolling="yes";break;case!1:n.scrolling="no";break;default:n.scrolling=w[u]?w[u].scrolling:"no"}}(),function(){function t(t){1/0!==w[u][t]&&0!==w[u][t]&&(n.style[t]=w[u][t]+"px",S(u,"Set "+t+" = "+w[u][t]+"px"))}function e(t){if(w[u]["min"+t]>w[u]["max"+t])throw new Error("Value for min"+t+" can not be greater than max"+t)}e("Height"),e("Width"),t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}(),"number"!==typeof(w[u]&&w[u].bodyMargin)&&"0"!==(w[u]&&w[u].bodyMargin)||(w[u].bodyMarginV1=w[u].bodyMargin,w[u].bodyMargin=w[u].bodyMargin+"px"),r=N(u),(o=m())&&(a=o,n.parentNode&&new a(function(t){t.forEach(function(t){Array.prototype.slice.call(t.removedNodes).forEach(function(t){t===n&&k(n)})})}).observe(n.parentNode,{childList:!0})),x(n,"load",function(){var t,e;j("iFrame.onload",r,n,c,!0),t=w[u]&&w[u].firstRun,e=w[u]&&w[u].heightCalculationMethod in p,!t&&e&&P({iframe:n,height:0,width:0,type:"init"})}),j("init",r,n,c,!0),Function.prototype.bind&&w[u]&&(w[u].iframe.iFrameResizer={close:k.bind(null,w[u].iframe),removeListeners:v.bind(null,w[u].iframe),resize:j.bind(null,"Window resize","resize",w[u].iframe),moveToAnchor:function(t){j("Move to anchor","moveToAnchor:"+t,w[u].iframe,u)},sendMessage:function(t){j("Send Message","message:"+(t=JSON.stringify(t)),w[u].iframe,u)}}))}function u(t,e){null===n&&(n=setTimeout(function(){n=null,t()},e))}function U(t){S("window","Trigger event: "+t),u(function(){F("Window "+t,"resize")},16)}function B(){"hidden"!==document.visibilityState&&(S("document","Trigger event: Visiblity change"),u(function(){F("Tab Visable","resize")},16))}function F(t,e){for(var n in w)w[i=n]&&"parent"===w[i].resizeFrom&&w[i].autoResize&&!w[i].firstRun&&j(t,e,document.getElementById(n),n);var i}function V(){function i(t,e){e&&(!function(){if(!e.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==e.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">")}(),l(e,t),r.push(e))}var r;return function(){var t,e=["moz","webkit","o","ms"];for(t=0;t<e.length&&!a;t+=1)a=window[e[t]+"RequestAnimationFrame"];a||S("setup","RequestAnimationFrame not supported")}(),x(window,"message",s),x(window,"resize",function(){U("resize")}),x(document,"visibilitychange",B),x(document,"-webkit-visibilitychange",B),x(window,"focusin",function(){U("focus")}),x(window,"focus",function(){U("focus")}),function(t,e){var n;switch(r=[],(n=t)&&n.enablePublicMethods&&M("enablePublicMethods option has been removed, public methods are now always available in the iFrame"),typeof e){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(e||"iframe"),i.bind(c,t));break;case"object":i(t,e);break;default:throw new TypeError("Unexpected data type ("+typeof e+")")}return r}}}(),define("parts/iframe-resizer-widget",["require","widgets/base","iframeResizer"],function(t){var n=t("widgets/base"),i="imp-iframe-resizer-widget",r=t("iframeResizer");function a(t,e){n.call(this,i,t),e=e||{},this._activeClassName=e.activeClassName||"",this._target=e.target,this._scrolling=void 0===e.scrolling||e.scrolling}return a.prototype=Object.create(n.prototype),a.init=function(t,e){return n.init(t,i,a,e)},a.start=function(t,e){return n.start(t,i,a,e)},a.prototype.start=function(){var t=this,e=this._target&&this._$element.find(this._target)||this._$element;this._instances=r({scrolling:this._scrolling,initCallback:function(){t._$element.addClass(t._activeClassName)}},e[0])},a.prototype.stop=function(){(this._instances||[]).forEach(function(t){t.close&&t.close()}),this._instances=void 0},a}),define("maps/templates/base",[],function(){return'<button class="js-map-up map-up" style="display: none">&#x25C4; voltar</button><div class="js-results-map">    <%= it.map %></div><p class="js-map-label map-label"></p>'}),define("text!maps/gfx/NACIONAL.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="COIMBRA" class="js-map-target map-target" d="M148.867 130.946v-.468l1.396-1.396-.29-.29.697-.297v-1.014l-.527-.356-.25.25-1.063-1.063v-1.028h-1.062v-.848l-.404-.404 1.16-1.392v-1.293l-.75-1.54h-1.02l-.222-.486.026.055.36-.383v-.695l.56-.386v-1.1h.463l.542-.637.328.155h.444l.26-.753-.086-.445-1.062-.038v-.406l-.887-.116v-.502l.287-.52v-2.454h-.482l-.696.196-.966-.447v-1.062l.888-.617h.676l.52-.79-1.252-1.43v-.9l.163-.036-.978.218-2.704 2.046.08.275-.426.232-.753 1.062-.583.405.005.01h-.53l-.803 1.122h-.537l-.658.73-1.705.257-.195.23-.39.586-.56-.025-.414.707-.462-.073-1.17 1.192-.73-.17-.116.412-.04-.04h-.936l-.63-.498-.277.57h-.366l-.264-.453-.453.25-.322-.206-1.12.57v.58l-.262-.265-.183.183h-.307l-.615-.6h-.453l-1.23-1.61h-1.052v.426l-.776-.906-.52.166v1.195l-.786.227-1.424-.366.31.53-.383.384v.475h-.804l-.95.44.11 1.24-.403.95h-.658v-.632h-1.633l-.804-.025-.098-1.413 1.803-.024.317-4.19-1.29-1.07v-.805l-2.78 1.145-.315-2.363.463-.56-.235-.66-.3-.85-1.53-.448-.635-.592.568-1.432-.25-.818.637-.818.16-1.387h-.717l-.58.285h-1.147l-.307.306h-.523v-.818h-2.91l-.836-.355-.852 3.46-1.902 7.714-.845 3.55-2.9 8.113 1.61 1.437.51 1.39-1.535 5.26 1.218.61-.072.804 1.145-.073.293-.293 1.802.902v-.78l1.39-.804 1.46.44-.003-.017 2.537.235.146.61 1.267.462v1.047h1.194l1.193-1.876h1.705v3.704l.52.73.637-.73.172-1.435 1.205.152 1.453-1.267.074-.492 1.353 1.155v-.772l-.473-.473.668-.547.912 1.73v.973l1.123 1.488h-.73v.91h-.636v.396h1.61l1.225-1.336 1.143-1.246v-.88h.426v.79l1.276.94v-1.88l-.85-1.126.577-.76.71-1.564.798-.1.356-.256v-.483h.584l.63.63 1.06-.858.496-1.023 1.33.913h.44l-.537 2.385v.74l.724.724v.64l1.353 1.516-.02.014v.826h-.707v.63l-.384.382.207.206h.394v-.727h.648l.246.247h.383l.023-.023.03-.03.266-.267-.26-.26v-.884l.51.51h.61v-.628l.492.49h.805v-1.257l.677.678h.6l-.703-.702.496-.497.59.59.186-.187v-.334h.708l.472.472.54-.54v-.64h1.7v-.203h.61l-.69-1.526.59-.688h.413l1.336-.885h.412l.384.384h.933l.766 1.052v-.397l.278-.277-.307-.307.37-.366-.37-.37v-1.48h.534v.67z"/>\n    <path id="FARO" class="js-map-target map-target" d="M166.606 296.435l-.226-1.44-.144-.124.002-.088-.028-.87-.365-.815-.452-.338.087-.815.45-.506-.14-.535-.48-.505-.392-1.77.168-.787-.393-.702.42-.59-.083-.786-.084-1.433-.87-.758-.114-.477.787-.113v-.45l-.507-.364v-1.208l-.59-.87v-.788l.225-.478-.787-.31-.476-.926.056-.534-1.096-.224h-1.517l-.758-.197-.507.028v.703h-.955v.73h-.927v.788l-1.01-.646-.535.45-.562-.562-2.19.14-1.968 1.152-.533-.45-.17.59-2.5 1.49-.56.197h-.9v.73l-.87-.168-.31.59-.378-.096v.8h-.487l-.398.4h-1.77l-2.7.84v1.062l.442.885-3.408 2.61-.442-.62-5.063-.835-.027-.005-2.92-2.434h-1.108v-1.018l.318-.423-.357-.29v-.95h-1.315l-.608-.586v.877l-.463.123-.586-.414h-.877l-.44.316-.318-.103v.12l-2.214.488V285h-1.062v.663l-2.59-.686-.375.376-2.524-2.035-.575.664h-1.902l-.53 1.46h-.4l-.796-1.328H105.88l-1.24-2.124h-1.062l-.61-.273-3.285 6.69h-.487v1.637h.332v.908l.554.553-2.125 4.248h-.796l.797 1.638-.462.92-.113-.034-1.505 2.876-.796.31v1.593l-.973.575v.974l-.575 1.018h1.328l.93 1.283 1.06-.575.488-.487 1.77-1.46h.664v-.664l3.938-.665.93-.265 1.018-.664h1.947l.973.398v-1.77l.974-.53H112.28l.56.268h.584v-.414l1.413.195v.707h.365l1.16.383 2.404.86 2.508-.303 1.052-.787.063.042.73.194 1 .682-.046-.03.01.03 1.254.902h.94l1.487-.778h.882l.975-.105 1.417-.092 2.786 1.08-1.29-.5 1.216.546.934.245 4.58 3.2.083-.018 4.598 2.735h1.087l.32-.32 1.05-.737 1.83-1.236 3.815-2.977 4.973-3.4 1.997-1.706v.094l3.063-1.644 1.575-.436.09.066 1.604-.103 1.377.37.143.41.39-.225z"/>\n    <path id="BEJA" class="js-map-target map-target" d="M187.616 237.603v-.973l-1.86 1.018-.485-.487h-1.194l-.62 1.55h-.796l-1.992.796-.84-1.018h-1.107v.797h-1.017v1.213l-.134-.004-.32-.383-1.725-3.577.383-1.34-2.108-.416-1.054-1.533v-.96l-.894-1.116v-.83h-.48l-.287.382h-.67l-.416.607-.672-.32-.926 1.215h-1.47l-.382.734-.618.7v.76h-1.284v1.152l-.885.708v.513l-.44.414h-.86l-.576.767.502.742-3.186-.403-.313.405-1.063-.798h-.876l-1.11-.47-1.642.61-1.064-.703h-.61l-1.158-1.22-1.298-.83-.9.04-.445-.446-.658.626h-.563l-.36-.438h-.688l-.303-.2-2.434-1.615-.375.345-.077-.594-1.093-.74-.604-.264-1.51-.658-.757.94h-1.034l-.977-1.364-.573-.166-.498.48-.222-.093h-1.77l-.222.48h-1.144l-.37-.775h-.502v.494l1.39 2.86v2.583l-1.918.383-.837.768h-1.465l-.742 1.14-.085.21h-1.17l-.706-.512-.365.925v2.072h-1.096v-.463l-1.12-.61v.853l-.683-.146v1.29l-.39.39v.585h-.268l-.89-.89-.4.403-.208 1.84-.402.4v.504l2.027 2.46.444-.308.555.493.964-.333.85 1.59.54.197v2.21l-.885 1.285v1.947l-1.063 1.726v1.282l-1.516-.724-.962-.15-.442-.054-1.68-.443-.422.42-.774-.244-.642.642-2.81.066-.752.62.31 1.328h-.974l-.974 3.673h-.708l-.708.354-2.168-1.108-.84.974-2.346-3.63h-1.15l-.488.576-.84-.973-.886 4.424.93 1.593-.4.664.134.754-1.328 5.4 1.638 3.54-.708 4.91.275.613.61.273h1.062l1.24 2.124H108.93l.797 1.328h.397l.53-1.46h1.904l.576-.664 2.523 2.035.375-.376 2.59.686V285h1.06v-1.86l2.214-.486v-.12l.318.102.44-.317h.876l.585.413.462-.122v-.876l.61.585h1.314v.95l.357.29-.318.422V285h1.107l2.92 2.433 5.09.84.442.62 3.408-2.61-.443-.885v-1.062l2.7-.84h1.77l.397-.4h.487v-.8l.378.096.31-.59.87.17v-.73h.9l.56-.198 2.5-1.49.17-.59.533.45 1.967-1.152 2.19-.14.563.562.534-.45 1.01.647v-.786h.928v-.73h.955v-.703l.506-.027.757.197H161.58l.094-.758-.547-1.052.674-.084-.252-.715.757-1.388-.252-.547.673-.126 2.777-7.364-.126-.505.037.15.3-.15-.337-.882 1.388-.38 3.282-2.944 2.02-3.787-.21-1.052 1.26-1.304.212-2.44-.584-.85h.383l.287-.734h.766l.256.223 1.18-.863h.607l.575.607h.894l.448-.703.383.32.67-.447-.415-.415v-.926l.735-.128.607-.702.99.606h.543v.927l1.086.127.83-.606.383.255h.575l.225-.99-.192-.574.575-.543v-2.71l.133.205.532-.53 1.018-2.612h-.664v-1.018z"/>\n    <path id="SETUBAL" class="js-map-target map-target" d="M131.99 231.354h-.632l-1.047-1.465h-1.778l-1.5-.7-.42-1.01h-1.987l1.64-2.338-.663-.593h.837l-.176-.943h-1.744v-.942h.523l-2.72-5.198-1.536.698-.453.733h-.872l-.56-.35-.766.768h-.454l.07-.488-.35-.593h-.487v-.942l-1.326.35.732 1.08-1.082.907-.035-1.046h-1.918l-.14-1.466-.663.593-1.046-.592-1.258.16-.892-3.157 1.116-.808.06-.575.6-.34.362-.61h.506l1.08-1.245v-.4l.846-.258 1.27-.845.47-.94.82-.26v-.61l-.398-.33v-.446l.893-.87v-.47l-.823-.28-1.64.18-1.39-.62-.383.3-1.218-1.005.47-.257v-2.115l.426-.747h-.598l-1.046.513-.363 1.154h-.728l-.683-.663-.65-.125-.94-1.152v.728l-1.786 3.19-.33 1.84-.727.25-1.104.383-.73-.424-.048-.052-1.29-1.38-1.81 1.15-1.033-.164-.376.775-.728-.822.047-.682-.54-1.972-1.433-1.86-.017.125-1.187 1.773.43.07.986-.413.493.78-1.464-.127-1.098 1.225.366.43 2.086-.107-.94.522h-1.065l-.572-.366-.86.842.27.928-.86.548-.106 1.762-.13.15-.534.056-.43.72-.916.445-.33.54.08-.012-.818.125-.682-.4-.756-.535.195-.852-.364-.366-1.56.78h-2.533l-1.02.536.874.974 1.096 1.754 1.05 2.583.39 1.003-.027.044.317 2.582-.61 2.46-.827 1.463-.585 1.63 1.254.17 1.256-1.07h1.632l.902-.293.28-.28 1.62.33 2.168-.78.247-.415h.58l.926-.828.097-.707h2.022l.56-1.486.244-.242.414.414v.974l3.508 3.557 1.56 3.362.656 3.142.34 5.628-1.12 5.457-1.24 4.246-.26.592-.628 1.26-1.333 2.664-.592.48v.52h.703l.593.48.15.63.517-.296.48-.074.96.518.448 1.444.142.408.358 4.46.775.898.487-.575h1.15l.02.03.052.08.122.19 2.15 3.33.842-.975 2.168 1.107.708-.355h.708l.974-3.673h.974l-.31-1.328.752-.62 2.81-.066.642-.642.774.244.42-.42 1.682.442.442.055.963.15 1.517.723v-1.282l1.062-1.726v-1.947l.884-1.284v-2.21l-.54-.197-.85-1.59-.963.332-.554-.493-.444.308-2.027-2.46v-.504l.402-.402.207-1.84.402-.4.89.888h.267v-.584l.39-.39v-1.29l.682.145v-.853l1.12.61v.462h1.097v-2.07l.365-.926.707.51h1.17l.084-.207.01.01.732-1.152h1.465l.837-.768 1.92-.383v-2.582z"/>\n    <path id="LISBOA" class="js-map-target map-target" d="M102.95 186.82l.282-.284-1.075-1.188h-.924l-.66-.81h-.566l-.34-1.133-1.358-1.377h.527l.434-.867h.793l.472.472h.773l1.056-.66v-.905l-.68-1-1.15-.17-.527-1.452h-.51l-1.15.81h-1.113l-1.245-1.074-1.048.365.546-2.072-.863-.547-.375.354h-1.04l-.748-1.268h-.977l-.603.79-.457.042v-.084l-.23.47h-.472v.71h-.818v1.678l-1.033 1.054-.344-.344-1.323 1.23-.266-.266v-.536l-.672-.67v-.514h.292v-.773l.49-.49-.616-.947v-.995H83.32l-.456-.7-.807.432v.41h-.568l-.46.963-.394-.363h-1.65v4.037l-.695 1.58-1.72 3.927v.624l-1.48 2.548h.322v2.12l-.392.732v3.404l.49.49-.4 1.236-1.2 3.51v.25l-2.428 4.815.812 1.248.465.5v1.055l-.66.99v.307l1.11.814h1.176l.275.274h.495l.242-.23-.297-.297.902-.286 3.117 1.628.18.082 1.855-1.183h1.95l.448.256-.27.575h1.406l.878-.528h2.063l1.344-.927.51-.67.417-1.488v-2.718l.105-.115 1.97-2.083.93-1.607v1.953l1.353 1.923 1.187-1.773.075-.556 1.307-1.142 1.323-1.998v-.947l.916-1.172v-1.082l1.803-.917-.158-.158-1.15-.58.872-.45v-.946l.9-1.112-1.006-.66.07.044.303-.054 1.387.118.47-.353.015-.34.66-1 .717-.093z"/>\n    <path id="LEIRIA" class="js-map-target map-target" d="M71.72 167.3l.338.223v.382l-.364.364h-.515v-.43l.54-.54zm61.174-32.397v-.64l-.725-.723v-.74l.536-2.385h-.44l-1.33-.913-.496 1.023-1.06.857-.63-.63h-.584v.484l-.355.256-.796.1-.71 1.564-.578.76.85 1.127v1.88l-1.275-.942v-.79h-.425v.882l-1.143 1.246-1.226 1.336h-1.61v-.395h.638v-.912h.73l-1.124-1.49v-.97l-.912-1.732-.668.547.473.473v.772l-1.354-1.155-.075.492-1.453 1.267-1.205-.153-.172 1.433-.636.73-.522-.73v-3.702h-1.705l-1.194 1.877h-1.195v-1.047l-1.267-.463-.146-.61-2.537-.234.004.016-1.463-.44-1.39.804v.78l-1.8-.902-.294.293-1.145.073.073-.804-1.217-.61-1.68 4.532-1.682 4.474-3.183 8.455-.383 1.03v1.605l-1.162 2.716-.584 1.676v.936h.48v.59l-2.05 2.723-1.106 1.292v.47h.543l-.518.518-.124-.37h-.272l-.172.287v.007h-.452l-3.202 4.43-.095.132-2.333 2.02-1.696.956h-.516v.535h-1.372v-.61h-1.337l-.635.634v.6h2.186v1.57l.99.988v1.052h1.65l.395.363.46-.963h.567v-.41l.807-.432.455.7h2.114v.995l.615.947-.49.49v.772h-.292v.513l.67.67v.537l.267.267 1.323-1.232.344.344 1.033-1.054v-1.678h.818v-.71h.473l.23-.47v.084l.456-.042.603-.79h.977l.75 1.268h1.038l.374-.353.312-1.206-.582-.644v-1.517l.853-1.852.444-.454h.99l2.025-3.953.047-.17h.59l.456-.475h1.973l1.462-.44.585.27h1.048l.462.316.44-.438h.754l-.705-2.63.438-.512 1 .828.4-.402h.27l.523-.865v-.476l.78-.62-.805-.754.05-2.07-.633-1.51 2.41-1.365.684-1.925-2.046-.706v-.756h.512l-.634-1.56v-1.412l2.656-1.072.536.122.61.73 2.337-1.29.927-1.68.73.78 1.268-1.17.682 1.833-.098 1.77.608 1.365-.243.31.097.762 1.023-.61.31-.74.997-.5 1.085.616.646-1.026h.557l.176-.205.41.263v.5h.557v-.617l-.25-.25.236-.234v-.69l-.375-.373.135-.02 1.21.27h.814l-.016-.126-.338-.496.36-.902h.632l-.316-1.465h1.894l.473-.54.052.062.31.367.652-.407v-.654l.812-.857.46.35.44-.44 1.037-.722.496-1.69.338-.472h-.307l-.207-.206.384-.383v-.63h.707v-.826l.02-.014-1.353-1.517z"/>\n    <path id="PORTALEGRE" class="js-map-target map-target" d="M185.26 189.55l.476-.796v-.397l-.556-.423-.146-.702-.304-.45-2.25-1.68h-1.19l-1.007.516-.82.132-.397.437-1.628-.53-.305-.758.653-1.34-.34-.245.292-1.315-1.39-.463-1.168-.365-.83.024-1.265-1.194-.057-2.013-.365-.616.75-1.422-1.787-1.46.038-.346-1.748-1.634.107.1v-1.13l-.848-1.49 1.076-2.255-.268-.475v-1.096l.476-.56-2.255-1.157-.144-.477-.663.166-.828-.436-.704-.827v-1.55l-1.51-.084-1.716-2.4-.773-.513-.516-.215-1.417-2.45.086-1.247-.634-.576-.227.404-2.15.13v.895l-2.192 1.083-1.29-1.505-1.977 1.075.13 1.03-.516 1.12-1.42.214-.343 1.247-.557.172-.99 1.03-1.074.43-.688 1.463-.513.084.04.044-1.388-1.53-3.342-1.694-1.117 3.052-.99.988.302.99-.43.558.543 1.374 2.122 1.205.43.732-1.325 1.882h-1.414v.864h-1.072v1.23l-2.304 3.665h-1.78v-.524h-.707l-1.178 1.308.366.864-1.466 1.073v.733l-2.304 2.12h-.916l-2.225 1.414v.498l-1.806 2.146v.733l2.303 1.1v1.255l.523.47h.497l.21 1.965.85.85.72-.196.51.51-.43.46.47.444 1.885-2.173h.602l.45-.407.362.685h.73v-.877h1.462l-.097.78-.828.39.34 1.266.39.877.633-.78.146-1.316.73-.39 1.462 1.267.925.537-.584 2.144 2.728-.437.78-1.267 1.267.34 1.295 2.53.705.06-.058.915 3.92.745-.05-.02.243-.657.9.195 1.02-.95-.096-.388.535-.68 1.36 1.337.828-.827 1.58.924.68-.584v-.438l1.436-1.29h1.605v-.34l1.022-.583v-.827l-.535-.802H159.51l.486-.404.81 1.013h1.32l.142.585 1.495.365-.764 1.608.462.365-.54.438 2.17 1.46v1.992l.01.03 1.272 3.643 1.047-.523v.647l.647-.343v.553h.495l1.18-.95-.267-.287v-.665h.666l.533-.665.818.685.287-.514h.55v-.57h.838l.552.988.475-.304v.76l.343.686-.99 1.503.495.17-.21.21v.76l.477.057.57.685.495-.38v-.724l1.198-.475.438-.476v-.494l1.598-1.18h1.065l.495-.627.913-1.846h.476l.285-.304h.418v-.513l.285-.38-.285-.286v-.78l-.553-.428-.032.03 1.27-1.257v-.61l1.72-2.126.967-2.426.476-.435z"/>\n    <path id="CASTELO_BRANCO" class="js-map-target map-target" d="M189.13 133.322l-.678-.088v-1.297l-.707-.62.206-.47-1.178-.325v-1.15l-.766-.824-.064.078v-.037l-.306-.74-2.14-.23-1.223-1.68-.026-1.784-.51-.458.41-.637.304-1.553 1.402-1.12.46.177.712-1.095-2.7-1.937-.28-.05-.128.585-2.88.152-.228-.33.28-.357-.535-.816.026-.713-.664-.408-.764.74-.127 1.502-1.402 1.07-.382-.305-.28-.05-.865-.638-1.12.407-.13.46-.483.712-.764-.535h-.74l-.984-.202-.136-.028-1.02-.46-.457-.788 1.07-.51 1.58-2.013v-4.077l-1.005-.482-.466.86-.712-.712-1.005.662v1.226l-.71-.735-.982.834H165l-.637-.57h-.43l-.32.248h-.717v-.922l-1.45.544-1.26 1.49v1.433l-.69.774v.668h-1.656l-.412.305h-.28l-.42-.65h-.725v.634l-.317.317v.407l-1.873 1.74h-1.145l-2.158 2.017h-1.573l-.412.378v1.293l-1.16 1.392.403.404v.848h1.062v1.03l1.062 1.062.25-.25.528.357v1.015l-.698.296.29.292-1.395 1.396v.468l-.853-.852v-.67h-.535v1.48l.37.37-.37.367.308.308-.277.277v.397l-.765-1.05h-.933l-.384-.385h-.412l-1.337.885h-.413l-.59.687.688 1.525h-.61v.204h-1.7v.637l-.54.54-.47-.47h-.71v.333l-.185.187-.59-.59-.496.497.703.702h-.6l-.678-.678v1.258h-.806l-.492-.49v.628h-.61l-.51-.51v.883l.26.26-.265.266-.03.03-.024.024h-.383l-.246-.246h-.648v.728h-.085l-.337.473-.496 1.69-1.037.722-.44.44-.46-.35-.813.857v.653l-.653.406-.36-.43-.474.54h-1.894l.316 1.466h-.63l-.362.902.338.496.068.54-.023.474.834.54.857-.585.72 1.893-.562.564.495.496v.23l-.2.2v.323l-.27.27.273.272.112.11.23-.228v.425l-.176.174v2.024l-.125.125v.98h.475l.278.277 1.386.277.402.404h1.115l.782.783h2.317l.475-.474.337.336h.47l-.916-2.12-.327-.143.334-.334v-.4h.65v-1.27l-.243-.24.503-.505v-.864l.197-.195-.303-.394.924-1.15-.15.19.265.15h.688l.256-.254.893 1.065.866-.697v-.494l.84.84v3.11l-.28.282v.816h1.072l.29-.29h.704l.95.948v.49h.733l.625.624v.344h.548v.918h.383v.638l.523.523.633 1.058.148.114-.645 1.633 1.074-.43.99-1.03.557-.173.345-1.247 1.42-.215.515-1.118-.13-1.03 1.978-1.076 1.29 1.505 2.192-1.082v-.895l2.15-.13.386-.686 1.03.188 3.286.347 1.73.795.796-.32 2.25.7 1.73-.933 1.522-.723 5.04.955.736-.826h1.945l.59.295 2.623-.62 1.268-3.448-.5-.236.56-2.092.353-.236-.59-1.444v-1.296l.826-.325.883-.176.884-1.562h.62l.647-1.09v-2.3l-.383-.382.576-.575.574-.9v-2.58l.516-.705.413-.412z"/>\n    <path id="SANTAREM" class="js-map-target map-target" d="M147.276 159.42l-.633-1.057-.522-.523v-.638h-.382v-.918h-.548v-.344l-.625-.625h-.734v-.49l-.948-.948h-.703l-.292.29h-1.07v-.815l.28-.28v-3.112l-.842-.84v.493l-.867.698-.894-1.064-.255.255h-.687l-.266-.15-.773.96.303.395-.197.196v.865l-.503.504.242.24v1.27h-.65v.4l-.333.333.327.144.916 2.12h-.47l-.338-.338-.474.473h-2.32l-.78-.782h-1.116l-.403-.403-1.387-.277-.278-.277h-.474v-.98l.126-.125v-2.024l.175-.175v-.426l-.228.23-.112-.112-.273-.273.27-.27v-.325l.2-.2v-.23l-.495-.495.563-.564-.72-1.893-.858.586-.834-.542.023-.473-.052-.416h-.815l-1.21-.27-.135.02.374.375v.69l-.236.234.25.248v.616h-.558v-.5l-.41-.262-.176.205h-.557l-.646 1.026-1.085-.616-.997.5-.31.74-1.023.61-.097-.762.243-.31-.61-1.364.1-1.77-.683-1.835-1.267 1.17-.73-.78-.927 1.68-2.337 1.292-.61-.73-.535-.123-2.656 1.072v1.413l.634 1.558h-.512v.756l2.047.706-.682 1.925-2.41 1.364.632 1.51-.05 2.07.805.755-.053.043-.726.576v.477l-.524.866h-.268l-.402.402-1-.828-.437.51.706 2.632h-.754l-.44.44-.023.39-.01-.414-.428-.294h-1.048l-.585-.268-1.46.44h-1.974l-.455.473h-.59l-.048.17-2.026 3.954h-.99l-.443.454-.853 1.85v1.518l.582.645-.312 1.207.864.546-.546 2.072 1.047-.364 1.244 1.076h1.113l1.15-.81h.51l.09.25.438 1.2 1.15.17.68 1v.905l-1.057.66h-.773l-.472-.47h-.792l-.433.866h-.528l1.357 1.377.34 1.132h.566l.66.81h.924l1.075 1.19-.283.282 1 1.867-.718.094-.66 1-.015.34-.47.352-1.386-.118-.307.05.942.62-.9 1.112v.946l-.873.45 1.15.58.157.157-1.804.916v1.082l-.916 1.172v.947l-1.323 1.998-1.307 1.142-.058.43 1.432 1.86.54 1.974-.046.683.728.822.376-.775 1.034.164 1.81-1.15 1.338 1.432.73.423 1.83-.635.33-1.84 1.786-3.19V201l.94 1.15.65.126.682.663h.727l.362-1.154 1.046-.512h.598l-.427.748v2.115l-.47.256 1.217 1.003.384-.3 1.39.62 1.986-2.435h1.046l.256.684 1.43-1.175v-.64l1.005-.663v.62l.49.192 1.262-.96-.342-.557.448-.406 1.454 1.046 1.174-1.26.47.876.363-1.325 1.39 1.39h.512l-.49.662 1.195.94.983-.684 1.046 1.068-.342.64.62.214.128-.427h.598l-.107 1.068 1.24.685.47-.064.04-1.025.728-.77-1.09-.853-.49.726-.363-1.41-.918-.427-.044-.81 1.26-.726-1.046-.855-.364.448-.363-.427-.49.385-.044-.683-2.67-1.41 1.196-1.655.384-1.72-.278-.47.64-.576.04-.03-.06-.057.432-.46-.51-.51-.72.197-.85-.85-.21-1.964h-.498l-.523-.47v-1.257l-2.304-1.1v-.734l1.805-2.146v-.498l2.225-1.413h.916l2.304-2.122v-.733l.32-.234 1.146-.838-.367-.864 1.177-1.31h.707v.525h1.78l2.304-3.665v-1.23h1.073v-.864h1.415l1.325-1.882-.43-.73-2.122-1.206-.543-1.374.43-.56-.3-.988.988-.988 1.117-3.052 3.342 1.693 1.387 1.53-.04-.043.512-.085.687-1.463.644-1.633z"/>\n    <path id="BRAGANCA" class="js-map-target map-target" d="M216.65 42.565l-.474-.92-1.236-.316-.76-1.522-1.84-1.458-2.408-1.046-1.338.09.007-.027-2.66-.443-.476.095-.16.918h-.664l-.57.634h-1.11l-.856-1.078-.865-.7.09-.092v-2.98h-.876l.5-.752 1.704-6.962h-2.304l.8-3.556-1.752-1.703-.7 1.1h-.552v.702l-3.606.25-2.104-.5-.902-2.455-1.753-.35v1.352l-.55 1.35h-2.555l-.13.35-2.383-.142-.603-1.426-1.11-.348-.95 1.426h-1.394l-.285-.444-.444.697h-1.077l-.507-1.616-2.408-.95-.54.887h-1.013v1.11l-.367.855.78 1.393-.38.254-.7 2.028-.175.213.303.58-.666 2.09.76 2.663 1.11.698-.285.856.222.412-.757.818-.035.038-.177.73-.584.284-.222 1.965-1.458 2.79.064.824-.682 1.568.555.555-.348.634 1.49 3.17h-2.694l-.73 2.155.16.95h-1.3v.476h-.665l-.856.857-.036-.022v.022l.3.595-.3.98v.96l.647 1.334-.435.323.38.934.867.26 1.62.657-.832-.147-.997.254-.742.018-.235.453-.53.614.483.454-1.27 1.21v.378l.332.272-.41.71v.56l.32.228v.333l-1.12-.333-.424.454v.68l.166.515-.5.47 1.695.83.848 1.65v.484h.47l.226.71h1.602l.68.306.917.363 1.608-.573.767.616h1.123l.383.477h1.46V68.05l1.457-.527v-1.076h.67v1.77l-.885.453.37.37h1.758l.143.85-1.004.932v1.29l2.366 1.292v.62l1.458.6.144-.336 1.022.55-.124.433.65.094.078.003-.077-.22.682-.558.216.495 1.27-.062.068.255.615-.69.65.187 2.232.465 1.767-.713-.032-.496 2.356-3.378-.713-1.783.59-.357 2.387-2.325v-.65l.495-.094-.185-.837.014.066 1.642-1.812v-.702h.63l.303.303.385-.383h.687l.344.344v-.635h.497v.84h1.4v-1.05l1.327-1.05.467.467.677.117.723-.49-.583-.7 1.072-.863.885.117.443-.513v-.698l.84-.42-.444-.63.34-.466 1.426-.253.507-.698-.95-.38.19-.95.506-.286.35-.35.443.793 1.045.126.382-.476.54.032v-.793l-1.016-.348.38-.666.635.03.825-1.108-.476-.793.823-1.046v-.73l.824-.506-.095-.38.73-.16-.35-.95.603-.032 1.267-1.743.095-.634.983-1.078z"/>\n    <path id="GUARDA" class="js-map-target map-target" d="M192.54 113.05l-1.605-1.556-1.095-1.4-.332-2.166.663-1.223.88-.61v-.625l.7-.7-.34-2.384-2.156-1.135.605-.605v-.68l1.702-3.785-.303-.303-.34-3.065-1.042-1.675.208-2.072.097-.01.24-.602v-.935l-.21-.392v-1.598l.905-.12v-2.02l-.995-.06-1.086-1.117v-1.446l-.482-1.357-3.166-3.62.134-.51-.067-.254-1.27.062-.218-.496-.683.557.077.22-.077-.003-.65-.093.123-.433-1.022-.55-.144.336-1.458-.598v-.62l-2.367-1.292v-1.29l1.003-.933-.143-.85h-1.757l-.37-.37.884-.454v-1.77h-.67v1.077l-1.458.526v1.577h-1.46l-.382-.478h-1.123l-.767-.617-1.61.573-.947-.375-.858 1.676-.265 2.05-.42 1.08.354 1.96.147.06-.433.63-1.79-.108.328.8-.22.406 2.45 1.037-.33 2.29-1.28.328-.843 1.46h-.29l-1.145-1.24-.177.236-.574 1.6.672.495.633.493-2.136 3.656-.028-.034-2.817-3.228h-1.938l-.988 1.048-.455 1.284-.66.77v.693l-.877 1.39 1.864.766.767 1.168-1.39 1.133v.48l1.65 1.522h1.022l.222.22-.626.55v.925l.29.29-.81.808v.675l-1.118 2.543v.655l.222.222-.29.186-1.316.268-.51-.293-1.56.586v.487h-.585l-.268.268h-.78l-.633.683-1.486.626-.22.067-1.17.95h-1.607l-.08.66-.164.036v.9l1.253 1.43-.522.79h-.676l-.888.618v1.063l.965.447.695-.196h.482v2.453l-.288.52v.503l.886.116v.406l1.062.038.087.445-.26.753h-.445l-.328-.155-.54.637h-.463v1.1l-.562.387v.695l-.36.383-.026-.056.22.485h1.022l.75 1.54.413-.378h1.573l2.158-2.018h1.145l1.873-1.74v-.406l.317-.317v-.635h.725l.42.65h.28l.412-.304h1.655v-.667l.692-.773v-1.433l1.26-1.49 1.45-.544v.922h.716l.32-.25h.43l.638.572h1.03l.982-.833.71.736v-1.226l1.006-.662.71.71.467-.857 1.005.483v4.076l-1.58 2.012-1.07.51.46.79 1.018.458 1.12.23h.74l.764.534.484-.713.128-.458 1.12-.407.867.637.28.05.383.306 1.402-1.07.127-1.503.764-.74.663.41-.027.712.535.816-.28.356.23.33 2.878-.152.128-.586.28.05 2.7 1.937 3.39-.18.66-1.3-.126-.992 1.81-1.63 1.323-.23-.05-1.605z"/>\n    <path id="VILA_REAL" class="js-map-target map-target" d="M174.5 32.518l-1.11-.697-.76-2.66.666-2.093-.35-.665.2-.25-.58.06-.79.697h-.667l-1.49.886-.888.16-.348.57-1.902-.064-.317-.793-2.82 2.82.19-.76-.254-.318.223-.348-1.077-.476v-.76l.285-.19-.475-.412h-1.426l-.254-.507-.95.474.474.76-1.046.698-1.933.57h-.918l-.824-.158.724-2.142.57-.62h-3.31l-.44-.674h-.415l-.62-.905-.88.233-.828.75-.906-.414-1.242.75h-2.457v1.293l-1.164.207-.206.725-.802-.673.337-3.906h-.984l-.57 2.846-1.577.31-1.036-.18-.698 1.5h-.414l-.414 1.163h-.957l-.65.605.108-.036.26 1.06-.674.777v1.552l-.698.698-.285 1.448-1.525 1.864 3.052-.13.362-.465.827.697 1.76.492-.83 1.628-.025 1.94.078.854.673.155.8-.285.545.7h1.086l.724.387h.466l.336-.415.62.414 1.06-1.56h.487l1.07 1.958h.225l-.056.668-.5.6-.558-.02v1.207l-1.135.685v.913h-1.27l-.31.09.2.31-.49.98-.335-.31-.668.29-.31.69-.246.98.29.645-.138-.058.093.815-1.204.935.134.78h-.445l-.312.623.512-.156-.09 1.135-.063.076v.718h.673l.38.607v.228l-.804.713.47.683h.91l.974 1.228-.34.685.17.372v.57h.712v1.376l.825.375v.57l-.66 1.373.274.276v1.242l-.5.5.478.478-.446.446v.468l-.49.63v1.02h.592v-.815h.407v-.63l.468-.388.193-.193h1.74v.153h.306l.386.447h.428v-.854l.366-.163h.367l.63.57h.9l.952.447h.956l.194.194h.6l.363-.64.944-.568.977.26.653-.12h.362l.87.23h.376l1.438-1.185.355-.762 1.104.54.735-1.13h1.614l.894-.96.663.23.5-.47-.166-.514v-.682l.424-.454 1.12.333v-.333l-.32-.227v-.56l.41-.71-.333-.273v-.378l1.27-1.21-.483-.454.53-.614.236-.453.743-.018.998-.254.83.148-1.62-.657-.867-.26-.378-.934.435-.324-.648-1.333v-.96l.3-.98-.3-.596v-.022l.037.022.856-.856h.665v-.474h1.3l-.16-.95.73-2.156h2.694l-1.49-3.17.35-.633-.556-.555.682-1.568-.064-.824 1.458-2.79.222-1.964.584-.285.177-.728.792-.856-.222-.412z"/>\n    <path id="VISEU" class="js-map-target map-target" d="M168.112 70.406l.86-1.675.03.013-.68-.305h-1.603l-.228-.71h-.47v-.485l-.847-1.65-1.694-.83-.662-.23-.894.96h-1.615l-.736 1.13-1.103-.54-.354.762-1.438 1.185h-.375l-.87-.23h-.363l-.653.12-.978-.26-.945.567-.363.64h-.6l-.194-.193h-.955l-.953-.447h-.9l-.63-.57h-.368l-.366.163v.854h-.428l-.386-.447h-.306v-.153h-1.74l-.193.193-.468.387v.63h-.407v.815h-.59l-.55.12h-.326l-.183-.243h-.653l-.386.387h-.447l-1.18.65h-.693l-.62.667v-.03l-.273-.275-.77.284h-1.337l-.583-.5-1.542 1.025h-.783l-1.44-.52h-1.112l-.544.755h-.467l-.532.56h-.935v.327h.18l.33.332h.698v.707h.355v1.118h-.51l.24.96.49-.404.896.458-.472.236v.693l.896-.304.744.558h.81l.323.644h.694l.77-.854.633-.634v-.49h.49v1.572l-1.842 1.995.32 1.336v1.554l.542.542.406 1.268v.727l-1.065.474-1.657-1.065-1.048 1.25h-.372l-1.403-1.15-1.038.5.832 1.595L128 88.44l-.43.072.13.68-.478.504-.175.814-1.086.97-1.784.64.544.873-.194.698.776.89h.64l-.214.896.252.68V98.04l.418.288h.613l1.003.67v.358l-.966.355-1.67.38.363 1.154.66.676v1.814h.693l.92 1.337-.056.053-.534.507-1.04-.264-1.22.726-.752.384v1l.537.73v1.12h-.487l-.674.83.333.243-.334.584h-.398l.097.804-.193.078v.95l-.277.347.173.225.52-.166.775.907v-.424h1.053l1.23 1.61h.452l.615.6h.307l.183-.184.263.264v-.578l1.12-.57.32.204.454-.25.264.455h.365l.277-.57.63.497h.935l.04.04.116-.412.73.17 1.17-1.193.463.072.415-.707.56.025.39-.585.195-.23 1.705-.257.658-.73h.536l.803-1.122h.53l-.006-.01.582-.407.752-1.063.425-.232-.08-.274 2.705-2.045.977-.218.08-.66h1.61l1.17-.95.218-.068 1.486-.627.633-.682h.78l.268-.267h.584v-.487l1.56-.585.51.294 1.316-.268.29-.186-.222-.222v-.655l1.118-2.543v-.675l.81-.81-.29-.288v-.925l.626-.55-.222-.22h-1.02l-1.65-1.523v-.48l1.388-1.132-.767-1.17-1.864-.766.877-1.39v-.693l.66-.77.454-1.284.988-1.048h1.937l2.844 3.26 2.135-3.655-.634-.494-.672-.495.574-1.6.177-.238 1.145 1.242h.29l.843-1.462 1.28-.33.328-2.287-2.447-1.036.22-.405-.33-.802 1.79.11.434-.632-.146-.06-.352-1.96.42-1.08z"/>\n    <path id="VIANA_DO_CASTELO" class="js-map-target map-target" d="M134.69 15.34l-1.204-.652-2.754 1.052v-3.506l.25-.55-.75-.953-1.203 1.153-.703-.576-.8.426.15.8-3.507 2.155-.545-.402h-.53l-.584.968h-.346l-.256-.402h-.493l-.567.493h-.548l-.33-.33h-3.78v.897l-.805.676h-1.7l-.364-.366-2.283.42v.622l-.64.53v1.388l-.85.905-.063-.064-.64.365h-.475l-1.7 1.023v1.262l-1.52 1.495-.012-.042h-1.307l-2.594 3.196v.946l-.196.195v1.198l.485.485v.422l-.384.305.14.347-.45 2.505 1.3 3.907 1.254.7-.3 1.052.8 2.654 6.01-2.003.752.65.5-1.15v-.118l.447.05v.493h.595l.595.595.88-.647.698 1.19 1.372-.336v-1.087l-.543-.93.464-.777.518-.026.414-2.328-.26-.258 1.424-.854v.7l1.06-.364.285-.284 1.422-1.112 1.68-.207.44-.647.725.75.7-.103h1.407l.272-.233.31-1.035 1.138.7 1.785-1.062 1.268-1.293h.646l.672.336v-2.923l-.155-1.267-1.232.413v-.92l-.668-.668v-.974l.073-.353 2.153-2.805v-.802l.952-.3.4-.952 1.854-.55z"/>\n    <path id="BRAGA" class="js-map-target map-target" d="M146.698 43.668l-1.07-1.96h-.487l-1.06 1.56-.62-.413-.336.414h-.466l-.724-.39h-1.086l-.544-.698-.8.285-.674-.155-.078-.854.026-1.94.828-1.63-1.76-.49-.827-.7-.363.466-3.052.13 1.526-1.863.286-1.447.698-.698v-1.552l.673-.776-.26-1.06-1.473.49h-1.992l-1.5-.48v.74l-.673-.337h-.647l-1.268 1.293-1.785 1.06-1.138-.698-.31 1.035-.273.233h-1.41l-.698.103-.724-.75-.44.647-1.68.207-1.423 1.112-.285.284-1.06.363v-.7l-1.423.854.26.258-.415 2.328-.518.026-.465.776.542.93v1.088l-.34.083-1.03.253-.7-1.19-.88.647-.594-.595h-.595v-.492l-.446-.05v.116l-.5 1.152-.752-.65-2.585.86-3.426 1.142v1.388l.984 4.01-.31.594.595 1.345-.078.57 1.423.128.75.777.88-.077.206.672 1.01-.44 1.292 1.863.957.414.676.13.388-.188.508.616v.67h-.683l-.71.468.576 2.425h.434v-.398h3.738v-.46l.534-.765 1.226-.267h.97l.365.594h.764l.84-1.116h.852l-.445.526.044.69.58-.445.49.4 1.782-.847.035.032v.653l.603.932.603.47.493.023.44-.237v-1.444l1.477-1.26v-.233l.98.084.022-.78 1.67-.066.178.712.668-.044.113.913 1.07.355-.068-.022-.404.868.94.87 1 .445.714.556.445-.244.288-.69 1.515 1.492.512-.334 1.224-1.136.49-1.09.556-.67.09-1.134-.513.156.312-.624h.445l-.134-.78 1.203-.934-.094-.815.137.058-.29-.646.246-.98.31-.69.668-.29.334.31.49-.98-.2-.31.312-.09h1.27v-.912l1.134-.685v-1.208l.557.022.5-.6.057-.67z"/>\n    <path id="PORTO" class="js-map-target map-target" d="M143.99 63.098l-.824-.375v-1.376h-.71v-.57l-.17-.372.338-.684-.974-1.227h-.91l-.47-.682.804-.712v-.227l-.38-.606h-.672v-.718l-.493.59-.49 1.092-1.225 1.136-.512.334-1.515-1.492-.29.69-.444.245-.713-.555-.456-.204-.545-.24-.94-.87.405-.867.067.022-1.07-.356-.11-.914-.67.044-.177-.712-1.67.066-.022.78-.98-.085v.232l-1.478 1.26v1.444l-.044.023-.394.213-.493-.022-.603-.47-.603-.932v-.653l-.035-.032-1.782.847-.49-.4-.58.444-.043-.69.445-.526h-.853l-.84 1.116h-.763l-.364-.594h-.97l-1.227.267-.534.764v.462h-3.738v.4h-.435l-.576-2.426.71-.468h.682v-.67l-.508-.616-.39.187-.675-.13-.957-.415-1.293-1.862-1.01.44-.206-.673-.88.077-.75-.776-1.422-.128.004-.028-.472 3.134.817 2.53.71 1.836.616.12v1.594l.416 2.237h.04l-.107.482v1.045l.71 1.22v.682l-.19.375 1.197 1.888-.03.007v.4l.87 1.424-.133.523.702 2.383v2.23l.46 1.468-.118.732h.608l1.197-.613.49.53-.13.13h1.802v-.886l1.268-.75.78 1.79h.993v-.814l.978-.333-1.146-.627v-.61h.978l.32.488h.413l.343-.468.512.637v.81l1.757.977v.672l.312-.398V75.73l-.572-.572v-.932h1.42l.538.537h.29l1.017-1.015h.447l.735-.736v-.49l.1-.102h.324l.453.887h.496v-.326h.935l.53-.56h.468l.544-.754h1.11l1.442.52h.783l1.542-1.025.583.5h1.337l.77-.285.274.274v.03l.62-.665h.692l1.18-.65h.45l.385-.388h.652l.182.244h.326l.55-.12v-1.02l.488-.63v-.468l.446-.446-.478-.48.5-.498v-1.242l-.275-.275.66-1.373z"/>\n    <path id="AVEIRO" class="js-map-target map-target" d="M134.858 76.325h-.49v.49l-.635.635-.77.854h-.692l-.32-.643h-.812l-.744-.557-.896.304v-.693l.473-.236-.895-.457-.49.406-.24-.96h.51v-1.12h-.354v-.707h-.696l-.332-.333h-.675l-.453-.887h-.323l-.1.1v.492l-.736.736h-.447l-1.016 1.015h-.29l-.538-.537h-1.42v.932l.572.57v1.034l-.03.037-.282.36v-.673l-1.757-.978v-.81l-.512-.638-.344.47h-.414l-.32-.49h-.978v.61l1.146.628-.978.333v.813h-.993l-.78-1.788-1.268.75v.885h-1.803l.13-.13-.49-.53-1.196.613h-.608l-.166 2.653-.627 3.42-1.35 5.227.057.016-1.85 6.326-1.06 3.63.477.228-.793 3.213.837.356h2.91v.818h.522l.307-.306h1.148l.58-.285h.716l-.16 1.387-.635.818.25.818-.567 1.432.636.59 1.527.448.3.85.236.66-.463.56.316 2.364 2.778-1.145v.804l1.29 1.07-.316 4.19-1.803.025.098 1.413.804.025h1.632v.633h.657l.402-.95-.11-1.242.95-.44h.803v-.474l.384-.384-.31-.53 1.424.366.788-.227v-1.195l-.173-.225.277-.346v-.952l.193-.077-.097-.803h.398l.333-.584-.334-.244.674-.83h.487v-1.12l-.536-.73v-1l.753-.384 1.22-.726 1.04.264.59-.56-.92-1.337h-.693v-1.814l-.66-.676-.362-1.155 1.67-.38.965-.354v-.36l-1.002-.668h-.612l-.418-.288v-1.887l-.252-.68.214-.895h-.64l-.776-.89.194-.697-.544-.873 1.785-.64 1.087-.97.175-.814.477-.505-.13-.678.43-.07.532-1.517-.833-1.596 1.037-.5 1.403 1.15h.372l1.05-1.25 1.656 1.064 1.065-.473v-.726l-.406-1.268-.54-.542V81.23l-.322-1.337 1.843-1.995z"/>\n    <path id="EVORA" class="js-map-target map-target" d="M179.55 237.46l-1.375-1.98-.032-1.15-.543-.927-.734-.064-1.406-2.3v-.48l-3.417-4.12-.255-1.053-.575-.51-.32.036-.096-.293-1.812-.73.435.175.856-.488.74-.923v-.907h-.387l-.47.575v-2.54l.318-.318v-1.226l.806-.924v-.94h.638l.57-2.168.773-.435v-.47h-.923v-5.087l.655-1.04.825-.1 1.055-.84-.57-.686-.476-.057v-.76l.21-.21-.494-.172.99-1.502-.344-.685v-.76l-.475.304-.552-.99h-.837v.572h-.552l-.285.514-.817-.685-.532.666h-.665v.666l.266.286-1.178.95h-.495v-.55l-.647.34v-.645l-1.046.524-1.283-3.672v-1.992l-2.168-1.46.54-.438-.463-.365.763-1.608-1.495-.365-.143-.585h-1.32l-.81-1.013-.486.404h-.463l.535.802v.827l-1.02.584v.34h-1.606l-1.435 1.288v.438l-.68.583-1.58-.925-.827.827-1.362-1.337-.534.68.098.39-1.022.948-.9-.195-.242.657.05.02-3.922-.744.06-.915-.706-.06-1.295-2.528-1.266-.34-.78 1.266-2.727.438.584-2.143-.925-.536-1.462-1.265-.73.39-.147 1.315-.633.78-.39-.878-.34-1.266.827-.39.097-.78h-1.46v.877h-.732l-.362-.685-.45.407h-.602l-1.885 2.173-.47-.445.058.056-.037.03-.64.578.277.47-.384 1.72-1.196 1.654 2.67 1.41.042.683.49-.384.364.428.363-.45 1.046.856-1.26.726.043.81.917.43.363 1.408.49-.726 1.09.854-.726.77-.042 1.024-.47.065-1.24-.684.108-1.067h-.598l-.128.427-.62-.213.342-.64-1.047-1.07-.983.685-1.196-.94.492-.662h-.512l-1.39-1.39-.362 1.326-.47-.876-1.174 1.26-1.453-1.046-.447.405.342.555-1.26.96-.492-.19v-.62l-1.004.66v.642l-1.432 1.175-.256-.684h-1.046l-1.987 2.435 1.64-.18.823.282v.47l-.893.87v.445l.4.33v.61l-.823.26-.47.938-1.27.846-.845.26v.398l-1.08 1.246h-.506l-.362.61-.6.34-.06.574-1.116.81.892 3.155 1.258-.16 1.042.592.667-.592.14 1.466h1.918l.035 1.046 1.082-.907-.733-1.08 1.325-.35v.942h.488l.35.593-.07.488h.453l.767-.767.56.348h.87l.454-.733 1.535-.698 2.72 5.198h-.522v.942h1.744l.175.942h-.838l.662.592-1.64 2.338h1.99l.418 1.01 1.5.7h1.78l1.046 1.464h.632v-.494h.503l.37.774h1.142l.222-.48h1.77l.222.093.497-.48.572.166.976 1.365h1.033l.756-.94 2.114.92 1.093.743.078.595.376-.344 2.738 1.816h.688l.36.438h.563l.657-.626.446.446.9-.04 1.298.83 1.158 1.22h.61l1.064.704 1.642-.61 1.11.47h.877l1.064.797.314-.407 3.185.404-.504-.742.575-.766h.864l.44-.415v-.514l.884-.708v-1.15h1.283v-.763l.62-.7.383-.734h1.47l.925-1.212.67.32.416-.608h.67l.288-.383h.48v.83l.894 1.118v.958l1.054 1.534 2.108.415-.384 1.34 1.725 3.578.318.384.135.004v-1.213h1.018v-.797h.988z"/>\n    <g class="map-target">\n        <path class="map-target" d="M46.668 308.285l.037.05-.058.006-.04.107-.022-.085-.05-.03-.04.105.005.11.056.05.064-.06-.017.098.025.072v.095l-.055.093-.13.027.026.035-.013.055-.108.005-.012.005-.09.045-.082.198.036.072-.047-.02-.027.082-.128-.034-.047-.064-.052.04-.077-.033-.098-.048-.092.008-.11-.03-.105-.072-.062-.06-.116-.04-.042.038-.017-.048-.063-.016-.062.024-.045-.026-.077-.053-.07.04-.007-.043-.057-.015-.012.05.03.054-.023.046-.09.012-.058-.08.06-.058.002-.064-.12-.014-.114-.017-.105-.046-.113.03-.02-.065-.086.008-.068-.108-.26-.23-.158-.16-.086-.152-.075-.174-.002-.25.02-.245.067-.075.048-.07-.04-.053.01-.06.06.037.07-.09.054-.077.07.015.194-.09.388-.002.246.03.095.014.082-.02.064.05.018.054.06.002.045-.024v.047l.02.088.05-.017.07.002.033-.074.035.007.038.048.05.02.022-.04.042.024.026.052.06-.002.07.048.154.066.116.088.035-.037.01.07.052-.01.047-.017.005.072.114.003.166.002.03.073.034.007.272.333-.04.163.106.117zm-8.855-5.967l.08.12.013.126.02.098.12.182.094.02.03-.02.108.02-.01.053.046.07.064.05.194.07.015.022.063.012.047-.03.094.02.014-.064.026-.017.013-.063-.04-.008.02-.093-.005-.08-.105-.173.02-.106-.056-.023-.002-.093-.043-.143-.045-.083-.044-.004-.004-.035.038.006-.027-.058h-.058l-.03-.003-.077-.097-.122-.056-.16-.02-.043.013-.024.02-.02.033-.016.076-.175.115-.013.062.014.02-.013.058zm1.432 6.585l-.106-.045-.047-.097-.133-.045-.14-.114-.278-.25-.212-.202-.246-.136-.067-.053-.02-.106-.055-.03-.05.008-.06-.095-.075-.04-.058-.04-.01-.08-.103-.027-.06-.083-.077-.117-.077-.058-.08-.075-.04-.032-.048-.085-.172-.013-.056-.08-.016-.057h-.05l-.043.033-.105-.05-.1-.075-.11-.138-.1-.036-.085-.017-.028-.078-.082-.01-.05-.06-.085-.086-.252-.132-.078-.09-.103-.035-.1-.073-.164-.144-.06-.012-.056-.08-.142-.096-.075-.07-.238-.122-.124-.074-.096-.03-.01.046.06.09.105.19.204.266.12.11.07.03.13.156-.013.082.075.016-.014.07-.05.02.01.06.036.013h.063l.017.047.065-.002.006-.03.056.01v.076l-.018.07.158.116.067.027.21.21.08.028.103.102.006.043.12.04.04.07.164.062.15.08.043.008.104.103.184.252.224.088.164.114.088.018.044-.02.137.12.127.027.19.25.175.166.076.017.085.11.086.04.058.104.15.13.115.097.536.11.176-.068.04-.072-.127-.168-.075-.097zm-7.863-2.25l-.05-.083-.076-.046-.12-.034-.122-.19-.02-.033-.206-.18-.185-.097h-.114l-.09.03-.045.054-.064.103-.1.08-.116.05-.06-.012-.034-.05-.085.006-.076-.002-.142-.057-.124.006-.094.027-.065.017-.09-.015-.038.056.067.048-.005.067.213.268.165.15.078.026h.077l.027.134.006.222-.01.114-.034.042-.022.033.04.008.065-.014.127.083.073.06.162.004.16.024.242.036.223.013.084.025.04-.013-.054.065.006.045.108.022-.004-.1.01-.09v-.09l.108-.037.104.02.03-.038-.04-.104-.004-.075.077-.075.005-.09-.01-.085.064-.058.04-.052h.026l-.028-.105-.106-.11zm5.064 3.36l.03.113-.016.124-.043.007-.103.026-.13-.005-.082.034-.073-.03h-.068l-.073.033-.156-.08-.12-.08-.237-.063-.183-.038-.235-.074-.168.153-.123-.022-.103.05-.172.036-.137-.088-.05-.11.033-.04.015-.066-.103-.116-.224-.08-.314-.073-.214-.086-.092.03-.064-.03-.095-.042-.287-.214-.102-.024-.1.062-.15-.03-.12-.18-.08-.034-.136-.107-.262-.203-.01-.145-.073-.13-.065-.197.09-.324.046-.166.09-.105.126-.048.01-.05.187-.058.245-.02.108.014.16.084.06-.008h.005l.133.04.182-.024.23.096.042.09.087.025.11.106.128.11.05.022.053.046.084.036-.008.062.06.073.05.016.043.112.01.11.114.033.06.016.073.095.086.043.085.03.09-.01.047.083-.017.083.14.102.117.062.057.094.014.125.1.04h.04l.07.073.234.07.078.087.136.044h.005l.102.02.144.065.278.096.088.048.004.074.086.106.066.004zm-3.197-1.036l-.155-.165-.012-.012.166.177zm-21.753-21.62l.01-.036-.003-.032-.026-.01-.023-.027-.046-.057-.03-.025-.033-.02h-.027l-.042.003-.03-.003-.015-.013-.023-.016-.006.02.02.025-.017.05-.05.032-.036.037-.02.038-.023.05-.024.02.003.035-.02.034.033.115.02.047-.005.033.007.028-.012.01-.017-.002-.015.023-.01.01-.006.016-.022-.004.002.013.01.014-.014.007-.003.015.02.013.014.02h.012l.018-.008.006.015.024.01.023-.02v-.018l.083-.013.023-.02h.028l.037-.026.016-.017.056-.023.032-.006.017-.055.057-.06.026-.066v-.022l.02-.034-.003-.052-.018-.046zm-1.268 3.012l.01-.04-.015-.013.006-.015-.024-.003-.028.008-.01-.016-.025.003-.006-.038v-.03l.004-.03-.03-.042-.02-.018-.015-.042.024-.07-.004-.02-.007-.02.022-.012-.01-.022-.014-.03-.016-.028.005-.022.025-.025.007-.024-.016-.045-.025-.045-.01.003-.007.023h-.016l-.015-.006-.012.028H9.952l-.026-.006-.024-.02.014-.025-.014-.01-.015-.018-.018.002-.02.026-.023.006-.017-.03-.01-.03-.03-.014-.018-.03-.02-.002-.01-.015.014-.01.016.01.015-.042-.018.004-.012.007-.016.015-.022-.02-.025-.028.007-.03.007-.04-.024-.014.002-.023-.008-.018.013-.014.016-.007.01-.024-.002-.022-.034-.014-.018.007-.005.022-.027.01-.054-.007-.164-.06-.01.03.023.057-.04.07-.022.006-.028.006-.03.048-.04.03h-.04l-.008.032-.025.013-.044.002-.02.007-.017.024-.007.01-.01.024-.027.067-.018.054v.037l-.025.047-.005.05-.015.048-.04.03-.022-.02-.024.014-.013.04-.035.013v.048l.022.02-.003.076.01.033v.014l-.018.08-.028.02-.03.026-.012.024-.004.055-.007.06.037.05v.028l-.012.016v.035l.026.012.01.03-.018.038h-.046l-.026.03.002.032.01.008-.004.02-.02.002-.01.01.016.022-.006.022.002.014-.018.004.013.015.012.02-.007.015-.017.007.02.01.025.055-.013.033.016.025.018.01.016-.01.053.035.015.016.03.044.058.018.044-.025.03-.02.057.02.025.024.064.02.007.02.034.01.025-.008.05.032h.065l.04-.007.05.022.033-.01.044-.003.004-.015-.014-.01.01-.02.052-.023h.032l.035-.01.02-.026.002-.043.02-.034.07-.043.05-.057.025-.037.01-.043-.006-.027.006-.02.014-.003-.01-.017.01-.05.03-.03.03-.005.033-.003.022.017.03.01-.01-.015v-.044l-.016-.026-.02-.007.014-.013-.01-.025.013-.04.03-.02.033-.027.007-.02.084-.03h.04l.023-.035.017-.008.015-.028-.013-.034.024-.005-.01-.02zm51.763 43.494l-.026-.035.006-.05-.032-.025-.045.014-.034-.033.01-.052.035-.01-.05-.037-.044-.047-.007-.04-.05-.06-.058-.017-.028-.044.012-.062.057-.037-.025-.065.024-.022.022-.058-.03-.036-.07-.054-.026-.003-.006.044-.01.022-.08-.02-.083-.028-.036-.06-.01-.016-.043.023-.078.008-.042.025-.033-.047-.015.005-.012.067-.035.017-.056.008-.04-.028-.027-.036-.036.003-.043.036-.043.004-.052-.053-.024-.026.008-.05-.053.032-.053.008-.03.04-.03-.03-.042-.017-.042.044-.065.054-.05-.013-.03.07-.035.04-.01.067.063.166-.01.09v.074l.028.108-.003.05.098.09.057-.03.052-.025.03.065.047.013.076-.045.07.002h.06l.054-.053.123.028.09.046.07.1.015.05.068.123.083.023.052-.034.047.042.104.015h.09l.064.003.025.035.072.026.022-.02-.022-.038.055-.08-.01-.06-.02-.06.014-.035-.038-.027.035-.033.036-.03zm.713-10.64l.02.143-.1.045-.038.136.03.106-.028.06-.014.033-.05.09-.106.11-.166.146-.236-.037-.083.054-.127-.018-.087-.072-.25-.137-.2-.008-.177.044-.013.055-.16-.025-.037.045-.08-.006-.075.048-.083-.033-.06-.006-.107-.023-.08.012-.093.062-.05.028-.1-.022-.075-.04-.094-.024-.023.02-.075-.022-.05-.02-.027.02-.065-.016-.048-.034-.038.03-.077-.023-.056.02-.044-.027-.062-.067-.054.03-.018-.01-.052.018-.04-.045-.078-.043-.055.01-.044.002-.058.02-.032.04-.023.008-.067-.006-.046-.015-.03-.108-.037-.014h-.06l-.06-.034-.094-.157-.11-.093-.042-.096-.012-.03-.096.016-.1-.012-.067-.056-.038-.03-.065.01-.012-.005h-.002l-.06-.047-.057-.05-.11-.022-.07.065-.047-.022-.072.03-.128-.005-.078.022.034.043-.088-.006-.14-.03-.13-.072-.074-.09-.022-.076-.104-.06-.037-.07-.155-.215-.07-.026-.056-.12-.073-.015-.02-.134-.06-.025-.018-.068-.073-.038-.067-.08-.1-.094-.097-.147-.106-.127-.002-.12-.04-.136.015-.09-.03-.02.006-.036h.05l.054-.05.02-.08.053.012.012-.05.082.01.1-.095-.038-.034.022-.028.036.007-.01-.06.045-.03.082.04.085.016.148-.077.008-.037.052-.006.097.04.107.084.28.247.087.017.06.128.005.074.03.108.05.024-.022.112.038.047-.025.1.056.032.015-.055.054.042.014.083.1.053.08.042.087.018.082.06.073-.03.055.017.095.076.05.047.05.01.028.062.14.093.038-.057.064.048.08-.007.065.05.044-.018.05.03.123-.038.135-.008.087-.083.123-.012.05-.067.02-.05.05.072.03-.044.04-.06.045.045-.014.058.02.047-.04.022.063.044.058.105h.06l.06.056.048-.05.045.013.03.055h.04l.03-.045.04-.003.016-.055.06.037-.03.075.087-.005.09.004.087.012.075-.094.09.044h.072l.09-.02.118-.022.065-.06.09.022.118-.064.08.017.018-.085.03-.033.036-.013.036-.024.014.084.045.043.003.073-.002-.056.022-.003.11.03.11-.007.118.02.09-.04.112.11.218.062.192-.03.248.063.192.078.12.098.036.308-.022.087zm-3.544.045l-.035-.03-.023-.017.058.046z"/>\n        <path id="ACORES" class="js-map-target" fill="transparent" stroke="#323C32" stroke-width=".4" stroke-miterlimit="10" d="M0 281.364h71.456V340H0z"/>\n    </g>\n    <g class="map-target">\n        <path class="map-target" d="M62.68 240.278l-.317.365.06.292.183.366-.365.037-.255-.22-.256.11.072-.146-.353-.035-.123.146-.292-.182-.913.39-.89.816-.68.572-.927.402-.17-.365-.317-.037-.33-.694.135-.134.317.037.11-.28.206-.134.147-.17.292-.292v-.597l.146-.596.28-.085-.023-.257.438-.012.33-.17.206-.462.16.06.413-.12.16-.208.17.11.23-.244.5-.17.158-.34.172.425.33.037.193.293.354.158.254-.098.17-.17.074.597-.365.292v.243h.23l.086.475zm-5.116 3.35l-.11-.233-.072.195-.232.353-.23.11-.1.377.135.195.268-.134.05.33.12.158.208.05-.048-.476-.134-.268.195-.195-.05-.463zM41.14 260.84l.21-.174-.15.45h-.348l-.437-.325h-.224l-.298-.436h-.212l.074-.162-.162-.187v-.175l-.474-.187v.337h-.212v.212l-.374-.312h-1.085l-.175.337-.274.274-.05-.435-.162.125h-.35l-.698.976h-.275l-.18.18.205.216v.324l-.43.35-.267.582-.3.12-.695.086-.67.823-.136.584h-.19l-.06.293-.412.472-.258.017-.29.206-.405.412-.377-.043-.575.017-.095.275-.103-.113-.437-.266-.258-.053-.35-.18-.523-.17-.777-.172-.79.022-.275.234-.31-.063-.276.256-.352.117-.192-.117-.256.17h-.372l-.107-.288-.435-.34-.735-.17-.213-.13-.5-.348h-.61l-.27-.268h-.824l-.644-.47-.548-.208-.947-.49h-.354l-.236-.467-.928-.456-.488-.056-.405.11-.847-.736-.046-.248-.166.037-.285-.497-.495-.276-.317-.055-.078-.285-.348-.194-.956-.49-.57-.57h-.374l-.387-.45h-.22l-.542-.44v-.543l-.388-.142-.077-.284-.49-.503-.105-.478-.323-.22-.155-.453.155-.323-.13-.297-.064-.517-.206-.697-.388-.31-.284-.26v-.283l.27-.052.854-.568.194-.388.31-.077.478-.297.44-.453h.167v-.13l.35-.45h.22l.245-.17.142-.31.452-.232.335-.038.62.323.62-.09v.27l.724.647v.53l.632.516v.285l.723.672h.4l.35-.077.374.22v.31l.426.322h.62l.362.272.58.103.746.27.478-.16.367.062.746-.173.392.012.502-.343h.33l.49-.49h.282l.195.294.6-.012.32.16h.203l.142-.233h2.003l.58-.232h.402l.432.433.193.193.433.122.258.517.582.632.155.155h.518l-.117.116-.257.26.233.58h.36l.105.4h.308v.044h.32l.152.786h.237l-.187.188.424.425.212-.212.55.474h.224l.187.162.362-.313h.223l.25.536h.187l.125.125.143-.143.206.205.15-.15 1.272.375.237.274.2.258.3-.346.173.437.362-.214v.275h.474v-.398l.312.274h.312l.212-.312.424.225-.062.26.436.1.113.4.46.46h.225l.137.3h.187z"/>\n        <path id="MADEIRA" class="js-map-target" fill="transparent" stroke="#323C32" stroke-width=".4" stroke-miterlimit="10" d="M0 222.73h71.456v58.635H0z"/>\n    </g>\n</svg>\n'}),define("text!maps/gfx/ACORES.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="VILA_DA_PRAIA_DA_VITORIA" class="js-map-target map-target" d="M207.772 184.634l-.3-.41 1.492-.31.645-1.064-.008-1.083-.292-.833.193-1.12-.724.7-.65-.597-.05-1.247.444-1.22.584.35.26.983.447-1.222.668-.054-.42-.59-1.23-1.335.465-1.873-3.113-3.812-.408-.084-.328-.84-1.893-.005-1.306-.038-.06-.824-.543.196-.602.107-.106-.795-.397.42-1.336-1.01-1.776-.754-.774-.546-.698.01-.3-.603-.488-.257-.248.45-.57-.232-.426-.55-.408-.085-.37.85-.808-.012-.58.19-.216-1.012-.004-.54-.52.278-.69-.027-.22-.623-.73-.577-.936.232-1.09-.14-.092 1.557-.285 1.562-.268.177-.294 1.6-.953.498-.314 1.52-.033 1.46-.274 1.14.644.25 1.38-1.067 1.756 1.408 3.1 1.26 2.326 1.832 1.206.327.807-.914.588-.227.68-.477 1.12 1.12-.23 1.11 3.614 5.5-.245 1.186.45.247.738-.58.86.138.56.658.797-.492.614.204.663 1.305.122-.06 1.247-.05z"/>\n    <path id="ANGRA_DO_HEROISMO" class="js-map-target map-target" d="M205.234 185.886l1.04-.51-.665-1.306-.615-.204-.797.492-.56-.657-.86-.138-.738.58-.45-.246.244-1.186-3.614-5.5.23-1.11-1.12-1.12-.68.476-.587.227-.807.914-1.207-.327-2.326-1.833-3.1-1.26-1.758-1.406-1.38 1.068-.643-.25.274-1.14.032-1.46.313-1.52.953-.5.293-1.6.267-.176.285-1.563.09-1.558-2.823-.36-4.445.007-2.226 1.045-.816-.168-.607.88-.83 1.025-.687-.413-.1.674.455.596-.555.813-.754.848-.234 2.812.026 2.864.862 1.994.99 1.75 1.82 1.845 2.974 2.624.785 1.243.987-.105.232.744 1.308-.348 1.206.52 1.312.194 1.356.165-.034.727-.68.67.662.91 1.032-.134.264-.525-.338-.61.123-.592.66.174.093.483.79-.454.88.607.516.3.713-.277.734.19.196.544.478-.442 1.334.468.707.688 1.22.83 1.245.336 1.06-.09 1.125.542.888.377.597-.456.544.73 1.466.38.31-.94.533.227-.41-.82z"/>\n    <path id="SANTA_CRUZ_DA_GRACIOSA" class="js-map-target map-target" d="M119.86 116.07l.22-1.063-.058-.9-1.203-1.998.25-1.212-.654-.268-.023-1.068-.504-1.633-.514-.95-.502-.037-.048-.408.45.07-.306-.66-.685-.01-.35-.028-.877-1.112-1.395-.643-1.837-.225-.495.142-.268.23-.232.374-.18.87-2.013 1.324-.148.712.155.237-.14.674.904 1.377.16 1.437.23 1.133 1.386 2.08 1.062.22.36-.235 1.232.255-.123.595.53.808.733.583 2.23.794.167.256.722.15.538-.354 1.084.223.15-.723.294-.194.15-.733z"/>\n    <path id="VELAS" class="js-map-target map-target" d="M95.59 168.87l.504-.398 1.062-.697.448-.295 1.005.266.983-.6.335-.647.688-.002 1.06-.268.395-1.918-.542-.98-1.975-.15-.638-.934-.183-.64-.572-.003-.51.382-1.2-.564-1.14-.867-1.278-1.582-1.148-.41-.962-.2-.33-.898-.924-.105-.574-.69-.973-.977-2.896-1.516-.9-1.047-1.182-.387-1.145-.84-1.867-1.646-.687-.142-.644-.907-1.634-1.112-.864-.81-2.722-1.394-1.43-.84-1.105-.344-.108.523.686 1.046 1.197 2.182 2.353 3.038 1.373 1.26.818.34 1.49 1.8-.164.94.852.175-.165.798-.596.25.117.683.43.147.714.005.207.53.75-.018.073-.357.632.13-.006.86-.192.79 1.813 1.35.77.303 2.394 2.416.907.33 1.193 1.165.068.502 1.395.46.463.813 1.862.7 1.733.904z"/>\n    <path id="CALHETA__SAO_JORGE" class="js-map-target map-target" d="M125.77 185.126l-.846-1.117-1.213-.52-.524-1.107-1.533-.532-1.616-1.303-3.172-2.892-2.43-2.307-2.83-1.555-.763-.615-.236-1.202-.628-.35-.57.102-.706-1.094-.845-.47-.66-.46-.112-.886-1.172-.323-.692-.95-.88-1.34-.886-.67-.925-.864-.46-.358-.395 1.918-1.06.268h-.687l-.335.65-.984.598-1.006-.266-.448.295-1.062.697-.504.398 1.193 1.184 2.097 2.885 2.564 1.014 1.884 1.305 1.008.208.508-.245 1.574 1.376 1.44.324 2.186 2.85 2 1.92.878.182.974 1.28.985.445.67 1.19 1.74 1.49 1.306 1.106 6.147 1.272 2.023-.794.465-.82z"/>\n    <path id="HORTA" class="js-map-target map-target" d="M35.993 160.69l.283-.012-.316-1.19-1.214-1.272-.575-.963-.873-.533-1.362-.387-1.41-2.19-.242-.367-2.35-2.07-2.128-1.108-1.304.012-1.02.35-.512.6-.737 1.183-1.174.918-1.314.573-.675-.14-.408-.576-.967.08-.87-.038-1.625-.654-1.42.058-1.082.304-.744.198-1.02-.176-.45.646.767.545-.053.764 2.46 3.076 1.893 1.73.89.288.877.006.314 1.542.073 2.547-.13 1.31-.382.484-.252.37.473.097.738-.164 1.453.97.848.667 1.85.066 1.842.275 2.767.397 2.573.145.957.304.454-.153-.612.754.07.507 1.25.26-.048-1.136.108-1.033.007-1.053 1.246-.41 1.188.21.334-.423-.458-1.185-.035-.853.883-.872.074-1.04-.115-.973.734-.658z"/>\n    <path id="MADALENA" class="js-map-target map-target" d="M56.625 187.717l-.463-2.858-1.906-2.03-.637-1.84-1.234-3.71.208-6.1-.592-1.176v-.782l-.694.093-1.837-.96-1.24-.15-2.808.22-2.134.65-.122.59-1.456.536-1.013 1.21-.536 1.888-1.022 3.714.732 2.26.82 1.478.13 1.662 3.008 2.33 1.562 1.233.905.37 1.39 2.067 1.708.354 1.163-.705 1.178.28 3.272 2.46 1.097.487.252-.68-.262-1.546z"/>\n    <path id="LAJES_DO_PICO" class="js-map-target map-target" d="M66.518 194.016l1.178 1.334-.16.767-.386.465.578 1.247 1.57 1.015 1.98-.427 1.17-.558 1.4.253 1.925-1.746 2.696.848 2.09.433 2.726.71 1.37.937 1.773.912.84-.372.767-.023.835.355.952-.385 1.48.052 1.19-.3.488-.08.184-1.416-.348-1.308-.753-.047-.984-1.22-.042-.846-1.016-.537-3.19-1.096-1.663-.744-1.165-.24-.446.816-.645.303-3.004.286-1.68-.13-2.446-1.705-1.44-.77-1.32-1.18-1.13-.162-.805-.494-5.35-2.96-3.825-1.19-.358-.73-.732-.15-1.36-1.336-1.583-.255-1.963.176-1.532.45 1.774 1.89.463 2.857-.532 1.344.262 1.546-.252.68.734.328 1.05-.328 2.45.98 3.604.854z"/>\n    <path id="SAO_ROQUE_DO_PICO" class="js-map-target map-target" d="M54.256 182.83l.132.14 1.53-.45 1.964-.177 1.583.255 1.36 1.335.732.152.358.728 3.825 1.19 5.35 2.96.805.495 1.13.16 1.32 1.183 1.44.77 2.445 1.707 1.68.13 3.005-.288.644-.304.445-.817-.056-.012-1.57-.506-.886-.983-2.703-.815-.768-.85-.475.01-1.142-.453-.18-1.42-.648-1.078-1.343-.714-1.612-1.17.195-.94-.532-.946-1.04.11-.982-.347-.99-.495-.83-1.08-.706-.183-1.32-.384-.104-1.257-.502-1.268-.542-.185-.7-.835.075-.712-.968-.418-.617-.528-.564-.262-1.45-1.245-1.278-1.21-.996-.278-.475-1.044-2.645-1.093-2.09.26-1.504-.458-.053.007v.782l.59 1.177-.207 6.1 1.233 3.71z"/>\n    <path id="CORVO" class="js-map-target map-target" d="M64.29 11.39l-.03-.808-.284-.72.154-.55-.04-.52-.416-.145-.354-.447-.722-.9-.46-.403-.51-.295-.43.005-.656.03-.47-.07-.233-.194-.37-.252-.1.324.298.384-.238.772-.774.515-.577.575-.34.603-.36.765-.374.316.04.566-.29.54.502 1.816.342.736-.086.527.098.43-.187.157-.27-.022-.23.345-.158.166-.088.234-.355-.047.042.212.172.238-.25.108-.036.22.307.203.226.315.21.02.275-.147.1.23.38.165.36-.32-.007-.28 1.31-.21.352-.29.455-.03.582-.39.254-.275.87-.377.49-.095.273-.885.9-.93.398-1.037.01-.335z"/>\n    <path id="LAJES_DAS_FLORES" class="js-map-target map-target" d="M39.258 63.034h.01l-.42-.573-.66.004-.508.173-.38-.24-.654-.285-.324-.553-1.398-.68-1.084.037-.257-.904-1.397-2.286-2.148-1.86-1.09-1.943-.574-1.62-1.048.46-1.02.634-1.235-1.41 1.72-2.028-.295-2.523.166-.938-.297-.506-.105-.284-.106.146-.12.39-.453 1.04-.285.87.027.583-.412.713-.08.786-.233.752-.608.49-.365-.347-.387.25-.203.658-.557.182.017.757.32.305-.047 1.18.155.52-.004.243-.28 1.275-.43.282-.488.423-.174.376-.067.867-.107.955.576.78.005.444-.19.243v.558l.412.2.162.493-.295.582-.43-.003-.288.01-.414.46.046.5.162.123-.075.335-.32.016-.144.14.246.363-.106.34.032.224-.276.06.2.232.18.34-.115.238-.262.105.29.175.413.844-.205.524.252.392.277.172.25-.166.84.53.235.26.487.694.89.274.705-.384.478-.296.877.313.393.35 1.012.34.102.276.535.166.39-.108.8.52 1.01-.02.63-.092.768.338.537-.164.688-.046.072-.235-.228-.143.144-.328.836-.345.502-.002.555-.173.29-.383.044-.702.334-.527 1.097-.68.763-.894.407-.577.154-.683-.102-.417.1-.327.212-.035-.13-.27.15-.77.452-.49z"/>\n    <path id="SANTA_CRUZ_DAS_FLORES" class="js-map-target map-target" d="M44.25 57.484l-.194-.303.182-.587-.248-.22.103-.24-.4-.05-.433.15-.153-.246-.397.034-.09-.585-.02-.493.08-.448-.47-.66-.34-.29-.227-.658.37-1.104-.05-.302-.095-.344.35-.163-.15-.348-.22-.497-.25-.436.078-.348.39-.38.103-.384-.237-.717-.384-.706-.156.038-.1.37-.247.01-.236-.116-.192.44-.32.017-.594-.026-.404-.08-.385-.334.23-.373-.228-.142-.236-.3-.275.057-.298.41-.357.09-.275-.457-.136-.486-.49-.223-.288-.46-.3-.05-.187-.23.234-.156.254.15.245-.654-.29.054-.175.103-.255.222-.336-.305-.404-.454.11-.45.116-.653-.364-.213.04-.36-.128-.283.194-.21.253-.123.165-.394-.025-.337-.533-.22-.28.113-.073.334-.444.17-.84-.098-2.566-.954-.14.458.35.92-.635 1.1-.338.088-.43.103-.468.756-.623.442-.644.036-.122.493-.388.205-.7.02-.3.114-.278.384.105.284.298.505-.165.937.294 2.523-1.72 2.027 1.236 1.41 1.02-.633 1.048-.46.573 1.62 1.09 1.944 2.15 1.86 1.396 2.285.257.904 1.084-.037 1.398.68.324.552.655.285.38.24.507-.173.66-.003.42.573h-.01l.536-.063.335.26.49.18-.137-.257-.035-.67-.23-.415-.297-.105.203-.195-.16-.408.203-.61.46-.33.515-.415.117-.336 1.315-.455.636-.02.35-.535.267-.118.236-.443-.194-.533z"/>\n    <path id="VILA_DO_PORTO" class="js-map-target map-target" d="M206.925 333.566l-.095-.636-.225-.644.15-.363-.41-.288.37-.355.383-.315-.28-.374.07-.527-.34-.257-.496.143-.362-.337.095-.56.378-.11-.538-.39-.476-.508-.082-.428-.54-.652-.618-.18-.297-.473.13-.646.624-.397-.267-.71.252-.23.24-.623-.316-.382-.764-.567-.273-.036-.06.474-.122.236-.86-.193-.87-.31-.39-.658-.118-.154-.443.246-.84.09-.448.265-.347-.5-.18.056-.125.704-.374.185-.597.085-.444-.296-.276-.393-.38.036-.45.376-.457.038-.56-.562-.26-.278.09-.542-.57.333-.562.092-.328.42-.33-.31-.43-.18-.45.468-.696.57-.55-.15-.322.757-.368.43-.106.708.666 1.78-.1.952-.013.8.31 1.148-.038.554 1.058.96.593-.345.558-.26.344.704.495.137.81-.49.76.025.637-.002.562-.56 1.32.307.947.492.777 1.054.15.554.724 1.306.884.254.56-.372.506.458 1.11.15.956-.01.7.048.262.37.786.273.23-.215-.236-.403z"/>\n    <path id="PONTA_DELGADA" class="js-map-target map-target" d="M166.942 276.476l-1.023-.958-1.075.116-.134-1.312-.53-.174-.757-.788-.88-.43-.024-.537.69-.693.14-.606.748-.564.31-.87.553-.34.724-.603-1.01-.81-.59-.196-.778.347-.876-.657-.92-.187-.867-.454-1.07-.57-.147-.89-.566-.442-.167.57-.59-.32.27-1.08-.4-.51.216-1.194-.53-.258-.32-1.15-.066-.796-.63-1.364-.922-.188-2.998-2.627-1.156-.89-1.046-.44-.543.066-.085.412-1.58.815-.924-.163-.87-.43-.492.305.12.655-.388-.08-.24.305.408.36-1.065 1.02-.887-.104-.133.53-.557-.114-.22.838-.59.536-.533.018-.08.388.335.22-.168.95.437 1.45.016 1.29 1.14 1.342 1.042 1.574 1.06.998.71.85.774.41.205.723.625.28.214 1.43.775.157.596 1.282.75.28 1.657 2.278.4.763 1.11.63.24.805.786.967 1.403.79 1.478.3.946.066-.362-.45.83-.236 1.377.053.773-.323.51.23.743-.682 1.187.242.624.53.63.51.277-.294.543-.29.06-.538.213-.807.476-.37.78-.475z"/>\n    <path id="LAGOA__SAO_MIGUEL" class="js-map-target map-target" d="M176.806 282.817l-.206-1.233.27-1.323-.042-.712-.614-.498.027-.388-.376-.284-.236.346-.673-.002-.52-.354-.485.253-1.274-.206-1.082-.84-1.105-.423-.09-.69-.77-.643-.51.476-.41.083-.364-.354-.385.16-.716.725-.214.01-.754.458-.476.37-.214.807-.06.538-.542.29-.255.272.123.052.695-.107.41.322.718.6 1.07.135 1.018-.166.145.308.453 1.024 1.166.993 1.013 1.687.63.367.643-.005.408.134.312 1.16.488.152.722.064.247-.095.342-.406.606-.23.473-.028.3-1.482.227-.4z"/>\n    <path id="RIBEIRA_GRANDE" class="js-map-target map-target" d="M199.96 279.676l-.6-.002-.038-.698-.506-.614-.796-.22-.292-.782.2-.83-.127-.416-.112-.774.592-.84.1-.942-.366-.855.372-.646-.166-.664-.02-.785-.478-.458-.148-.9-.38.252-.388.132-.313.357-.182.895-.864-.176-1.25.676-.974-.228-.7.64-1.248.226-.976.222-.75-.002-.987-.47-.804 1.007-.935-.13-.95-.042-.942.05.314-.81-.64-.4-.18.595-.428.033-.307.48-.42.003-.33-.608-.483-.13-.527.525-.627-.608-.635.02-.615-1.116-.685-.47.44-.24-.23-.498.158-.63-.472-.485-.434.664-.336.472-.535-.77-.198.53-.54.732-1.315.123-.933.893-1.445.088-1.328.4-.536-.318-.46.206-.704-.533-.854.067-.68-.5-.394.612-1.51-.998-.286-.66-.548-.11-.54-.5-.723.605-.55.34-.312.87-.748.564-.14.606-.69.693.023.538.88.43.757.788.53.174.135 1.312 1.074-.116 1.022.958.114.424-.026.016.214-.01.717-.724.386-.16.363.354.41-.083.51-.476.77.643.09.69 1.104.423 1.082.84 1.274.208.486-.252.52.354.672.002.236-.346.377.284-.026.388.238.194.276-.084.745-.27.218.556.38.648 1.098-.528.768-.084.855-.067 1.028.12.228-.826.7-.34.164-.807.738.06.204.43.344.268.303-.07.398-.096.28.563.752.216.4-.16.41.287.274.46.418.124.184-.406.295.478-.076.756.613.1.25-.355-.046-.465.455-.237.28-.196.234.528-.142.82.248.088.322-.087-.13-.357.05-.75.294-.51.456.435-.055.458.516.08.018-.53-.063-.315.91.198.215-.31.555.01.306.24.017.233.535.11.41-.273.607-.434.756-.05.487-.153.65.17.537-.03.395-.135.46.6.826.674.747.316.634-.188.248-.267z"/>\n    <path id="VILA_FRANCA_DO_CAMPO" class="js-map-target map-target" d="M191.974 286.662l.115-.98-.262-.36-.747-.165.102-.565.664.093.07-.278-.188-.443-.453-.106-.242-.314-.24-.327.034-.788-.14-.197-.256.018-.468.115-.143-.39.423-.236-.6-.276-.286-.17.077-.514.07-.104-.026-.01.14-.818-.233-.53-.28.197-.454.237.046.465-.25.355-.612-.1.077-.756-.294-.478-.184.406-.418-.123-.274-.46-.41-.286-.4.16-.753-.217-.28-.563-.398.096-.304.07-.344-.268-.204-.43-.738-.06-.165.808-.7.34-.227.824-1.027-.12-.854.068-.768.084-1.098.528-.38-.648-.217-.555-.745.27-.276.084.376.304.04.713-.268 1.324.206 1.233.134.918-.226.4-.3 1.48.588-.1.842.45.42.476.554-.193.198.124.582-.327.665.706.47.29.604-.226.81.263.403-.337.51.37.706.163.305-.196.517.203.803.233.252-.214 1.007.26.804.428 1.054.228.548-.293 1-.675.85-.134 1.152.234z"/>\n    <path id="POVOACAO" class="js-map-target map-target" d="M212.893 284.445l-.48-.306-1.86-.38-.697-.974-.03-.36-.57-.678-1.155.244-.62-.23-.617-.75-.43-.65.544-1.243-.46-.615-1.55.56-.548-.07-.342.45-.7.067-.81-.33-1.16.18-.98.53-.247.266-.633.188-.746-.317-.824-.675-.46-.6-.396.135-.537.03-.65-.17-.487.154-.757.05-.608.433-.41.273-.535-.11-.016-.232-.305-.24-.555-.01-.215.31-.91-.197.063.317-.02.528-.515-.08.055-.457-.456-.434-.294.51-.05.75.13.355-.322.086-.222-.08-.07.104-.077.514.287.17.6.275-.425.234.142.39.47-.113.254-.017.14.196-.033.787.24.327.242.314.453.106.19.443-.072.278-.664-.093-.1.565.746.166.26.36-.114.98.084.685.63.073.888.348.814-.522.84.067.41-.48 1.697.262.142-.596 1.886-.472 2.15.083 2.68 1.462.927.772 1.356.192.886-.57 2.525.39 1.775-1.557 1.136-1.187.53-.955z"/>\n    <path id="NORDESTE" class="js-map-target map-target" d="M213.854 281.075l1.07-.478-.2-1.524.235-.926-.4-3.28-1.272-1.046-2.055-.834-2.645-.677-2.06.323-2.322-.658-1.2-1.17-.963.406-1.256-.208-1.176.086-1.183-.334-.223.04.016.6.166.663-.372.646.367.855-.1.94-.592.842.113.774.127.416-.2.83.293.78.796.222.506.614.04.698.6.002.466.215.98-.528 1.16-.18.81.33.7-.066.34-.45.55.068 1.55-.56.46.615-.545 1.242.43.65.618.75.62.23 1.155-.244.57.678.03.36.698.975 1.86.38.48.305.436.213.15-.368.312-.63-.326-1.134z"/>\n    <path fill="none" stroke="#000" stroke-width=".4" stroke-miterlimit="10" d="M87.872 49.337V0H0v87.872h49.337zM102.735 279.026V340H220v-99.51h-78.73z"/>\n</svg>\n'}),define("text!maps/gfx/AVEIRO.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="ESPINHO" class="js-map-target map-target" d="M59.31 33.46l-8.092 4.14H47.11l-1.12 17.926h8.59l3.36-2.52V47.31h3.36v-8.963l1.308-1.307z"/>\n    <path id="SAO_JOAO_DA_MADEIRA" class="js-map-target map-target" d="M93.073 75.61l-6.584 8.724 4.608 4.773h6.09l1.152-4.61v-5.266z"/>\n    <path id="OLIVEIRA_DE_AZEMEIS" class="js-map-target map-target" d="M116.61 92.235h3.622l1.646-2.8-2.14-3.29 5.432-5.268-6.914-9.71h-2.798l-4.61-4.116-2.88 2.88h-4.855v5.186l-4.773 5.47v3.912l-1.152 4.61h-6.09l-4.61-4.774.125-.165h-3.416v12.344l-7.9 4.444 3.62 5.926h3.786v5.596h-5.596v13.004l7.407 3.29v2.964l-1.81 2.798h7.57v-3.292l19.588-2.633 4.526 4.527 3.21-2.715v-4.774h-4.28l-3.127-4.938 2.635-2.633h5.76l2.8-4.115h-4.94v-7.078l-2.797-3.292v-8.56z"/>\n    <path id="SANTA_MARIA_DA_FEIRA" class="js-map-target map-target" d="M110.667 32.758v-5.47l-3.46-4.31-2.32 3.173h-2.788l-2.17-3.303h-6.606v4.13l7.742 4.233-6.607 2.25v5.492h-6.71l-5.266-12.078-8.57 5.058v5.988H61.73l-.43.427v8.963h-3.36v5.695h2.658V66h2.168v6.607l4.13 4.543v6.09l-1.86 2.788 4.543 4.542h5.716l5.123-5.16 2.777-.994v-.247h3.416l-.124.164 6.583-8.724 5.267 3.62v1.356l4.773-5.47V69.93h4.856l2.88-2.88v-9h1.572V53.82h3.097l7.02-10.22v-4.233z"/>\n    <path id="OVAR" class="js-map-target map-target" d="M75.296 100.958l7.9-4.444V84.416l-2.777.993-5.124 5.16H69.58l-4.543-4.542 1.858-2.787v-6.09l-4.13-4.543V66H60.6V53.005H57.94l-3.36 2.52h-8.59L41.75 78.64l-9.118 35.32 6.318 1.723 1.795-3.23 1.22 2.37-2.154 4.02 1.437 3.876 7.61-8.257h6.605l11.917-2.513 7.035-1.507 4.502-3.56z"/>\n    <path id="AROUCA" class="js-map-target map-target" d="M211.226 38.273h-3.313v3.314l-4.284 4.284-5.2 5.77h-4.683l-2.17-4.34h-5.485l-5.026-3.77-6.055 2.055V40.9l3.2-1.598-6.056-3.085-3.313 2.735v3.434h-2.97v12.796h-21.363v-5.37h-5.827v-3.998h-6.854v-4.342h-7.376l-1.91 2.436v-.31l-7.02 10.22h-3.098v4.233h-1.573v9l4.608 4.116h2.798l6.914 9.71 4.6 3.21h4.34l2.285 2.97h6.627l12.11 15.766 14.737-7.083 9.482 7.768h2.513l7.084-8.454 11.195 7.197 7.197-3.198V94.14l-2.742-8.57-3.656-3.655v-10.51l-2.17-9.026 12.452-13.482z"/>\n    <path id="MURTOSA" class="js-map-target map-target" d="M51.588 150.483v-.307h3.685v-6.603l-2.918-3.225v-5.374h5.836l1.843-3.84-1.996-1.996-8.138-5.68h-5.99l-2.47-.948-.193.21-1.436-3.878 2.155-4.02-1.22-2.37-1.795 3.23-5.936-1.617-12.49 42.743 6.648 1.813 4.76-6.294 15.51-4.3z"/>\n    <path id="AVEIRO" class="js-map-target map-target" d="M59.266 222.962l2.61 2.918 6.296-4.3v-9.213h5.22l10.443-7.985v-10.135l-7.37-8.14h-3.38v-6.14l-4.913-5.068v-3.38L64.487 162h-3.38l-1.38-4.453-8.14-3.993v-3.07l-4.145-2.458-15.51 4.3-4.76 6.295-6.65-1.812-7.17 24.54 3.224 1.536-.16.65 7.224-8.175h7.525l4.913 10.902h5.068l8.445 13.82 4.224 4.223v4.223h4.837l-1.074 9.367z"/>\n    <path id="ILHAVO" class="js-map-target map-target" d="M11.226 204.592l5.658 2.4H36.54v5.528h3.53l2.074-2.073H49.9l3.914-1.92v-4.222l-4.223-4.223-8.444-13.82h-5.068l-4.913-10.903H23.64l-7.224 8.174.16-.65z"/>\n    <path id="ESTARREJA" class="js-map-target map-target" d="M80.902 135.734l1.8-1.198 1.812-2.798v-2.963l-7.407-3.29V112.48h5.596v-5.596h-3.786l-4.502 3.56-7.036 1.506-11.918 2.513h-6.605l-7.417 8.047 2.47.947h5.99l8.137 5.68 1.996 1.998-1.842 3.84h-5.835v5.373l2.918 3.225v6.603h4.578v4.738h6.55l5.614 8.888h7.173l5.925-8.42h2.495v-4.678l-5.77-4.678z"/>\n    <path id="ALBERGARIA-A-VELHA" class="js-map-target map-target" d="M109.862 128.61l-19.587 2.634v3.292h-7.572l-1.8 1.198.935 10.292 5.77 4.678v4.678H85.11l-5.925 8.42h-7.173l-5.614-8.888h-6.55v-4.738H51.59v3.377l8.138 3.994L61.108 162h3.38l3.684 9.52v3.38l4.914 5.066v6.142h3.378l7.37 8.14v.37h5.505l5.798-5.467v-5.135l2.232-4.307-1.238-4.805 2.982-7.455h6.46l9.61-4.308 1.326-17.064 1.325-11.54-3.447-1.4z"/>\n    <path id="SEVER_DO_VOUGA" class="js-map-target map-target" d="M150.984 161.615h-4.325l-5.244-6.006 1.31-4.72-3.67-5.897 12.06-4.325 7.34-6.553-4.59-7.602-5.634 2.752-2.23-2.912h-3.668l-3.277 4.223-9.568-10.092h-7.602l-1.442 4.85-3.146.314h.298v4.774l-3.21 2.715 3.447 1.4-1.325 11.54-1.325 17.063-.338.152 12.414-.736v10.09l14.156 11.404 9.83-6.03v-5.766l-1.704-4.587z"/>\n    <path id="VALE_DE_CAMBRA" class="js-map-target map-target" d="M168.488 109.893l-5.633-10.783-7.723 3.712-12.11-15.766h-6.627l-2.284-2.97h-4.34l-4.6-3.21-5.432 5.268 2.14 3.292-1.646 2.8h-3.622l-2.962 2.797v8.56l2.798 3.29v7.08h4.938l-2.798 4.114h-5.76l-2.635 2.633 3.128 4.938h3.982l3.146-.315 1.442-4.85h7.6l9.57 10.093 3.276-4.223h3.67l2.228 2.912 5.635-2.752 4.588 7.602 1.18-5.504 3.22-3.408-.862-4.587 2.892-.482z"/>\n    <path id="CASTELO_DE_PAIVA" class="js-map-target map-target" d="M165.87 55.182V42.386h2.97v-3.434l-1.608-6.494h3.44v-7.55h-2.393V20.12h-4.71l-2.244-2.242h-4.56l-3.066-5.996h-2.182l-.684.684v3.32l-4.97 4.97h-3.023l-6.86 6.86h-1.97l-3.63-3.632h-9.596v6.298l3.862 3.86v6.98l-.196.248h7.376v4.342h6.854v3.998h5.827v5.37z"/>\n    <path id="MEALHADA" class="js-map-target map-target" d="M95.87 280.536l-2.14 28.31-12.18.165.66 9.548 5.43.164h11.03v4.28h4.443l2.716-6.42-.742-8.394 6.42-2.963h5.432v-3.21l2.592-2.592-2.1-3.58 9.63 2.47 5.317-1.536v-8.072l-1.17-1.52 1.87-2.34v-6.786l-2.573-3.51-3.445 2.807-5.446-.82h-6.434l-3.16 1.64H109.1l-2.573-2.81-3.16 1.405-2.573-3.51-3.276-2.106h-3.158l-7.21-3.295v5.433z"/>\n    <path id="AGUEDA" class="js-map-target map-target" d="M164.976 193.897v-2.424l-6.77-4.52h-4.14l-2.82-1.946v-6.986l-9.83 6.03-14.155-11.403v-10.09l-12.413.735.338-.152-9.61 4.308h-6.46l-2.983 7.455 1.238 4.805-2.232 4.307v5.136l-5.8 5.47h-5.503v9.762l-10.21 7.806.102.332 1.226 2.385 8.47 3.12 4.012-3.79 4.57 1.784L90 220.03l5.57 7.134 4.46.223 1.337 5.684 1.226 2.676h5.238l2.007-1.672 13.15 3.344 6.465-3.455 9.25-.67 7.022 6.13 8.247-4.903 7.022 1.783 3.984-3.79-6.213-9.027h-4.68v-12.26l-4.46-4.57-2.45-7.8 11.282-2.563z"/>\n    <path id="ANADIA" class="js-map-target map-target" d="M145.724 239.424l-7.022-6.13-9.25.67-6.464 3.454-12.46-3.168-1.165.22-1.532 1.276h-5.237l-6.722-.804-7.735 6.748H83.36l-3.455-2.266-3.127 5.558h-4.28v4.28l-4.71 2.12 1.583 4.464-3.127 3.785 2.14 15.968 18.764-7.737 7.21 3.296h3.16l3.275 2.106 2.574 3.51 3.16-1.404 2.572 2.808h2.925l3.16-1.638h6.433l5.446.82 3.445-2.81 2.574 3.51v.36l1.307-.516-.658-5.432h2.69l2.247-3.95-2.246-1.646 4.55-5.597h3.293v-7.57l-3.62-4.94v-6.748z"/>\n    <path id="OLIVEIRA_DO_BAIRRO" class="js-map-target map-target" d="M101.367 233.07l-1.338-5.683-4.46-.223L90 220.03l2.005-4.01-4.57-1.784-4.012 3.79-8.47-3.12-1.226-2.386-.1-.332-.234.18h-5.22v9.212l-6.297 4.3-2.61-2.918-1.69-5.067-4.3 5.528 1.69 5.528-3.84 9.675 4.3 3.993 10.323 3.023 2.037 5.742 4.71-2.12v-4.28h4.28l3.128-5.558 3.456 2.266h4.775l7.736-6.748 6.723.804z"/>\n</svg>\n'}),define("text!maps/gfx/BEJA.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="ODEMIRA" class="js-map-target map-target" d="M64.27 195.5l-.308-6.896v-2.47l-5.867-.618-.772-.772-2.316-1.905H50.58l9.676-8.75-1.286-1.287h-1.184v-10.86l-3.912-1.028-.977.977-1.802-.566-1.492 1.493-6.537.153-1.75 1.44.72 3.09h-2.263l-2.265 8.543H35.86l-1.646.823-5.044-2.574-1.955 2.265-5.456-8.44h-2.677l-1.132 1.338-1.955-2.264-2.06 10.293 2.163 3.706-.927 1.544.31 1.75-3.088 12.557 3.81 8.235-1.648 11.425.64 1.422 1.42.636h2.47l2.88 4.94H29.377l1.853 3.09h.926l1.235-3.398h4.427l1.338-1.544 5.867 4.736.875-.875 6.022 1.597v-1.544h2.47v-4.323l5.146-1.133v-5.043H57.89v-2.883l1.852-2.366-1.596-1.595 3.757-3.14v-2.266l4.632-2.058z"/>\n    <path id="ALMODOVAR" class="js-map-target map-target" d="M110.23 212.64v-1.494h-2.933l1.75-2.47h1.132v-1.544l-2.78-3.294 4.53-1.956-2.368-3.5-8.75 3.706-1.183-1.184h1.594l-1.956-4.066v-1.44l-1.853-1.287-1.852 1.596-6.176-2.573H84.96v6.793l-2.78-3.19-1.646 2.882h-1.647l-3.293 2.16-.927-.925-2.51 2.51 5.083 13.24v1.646l-2.367-.413-1.956 4.323H71.27l-.926 1.235v2.368h2.573l6.794 5.66 11.838 1.957 1.03 1.44 7.925-6.072-1.03-2.06v-2.47l6.28-1.955h4.117l.927-.926h1.132v-2.265l-3.5-4.632z"/>\n    <path id="ALJUSTREL" class="js-map-target map-target" d="M94.43 162.973l-2.882-4.426v-2.573h2.47l-1.852-1.544v-1.853h1.75l1.03-3.91-1.03-4.222-.978-.978h-2.934v2.008H87.78l-1.05 1.05-1.75 1.75-15.87-3.83v5.147l-2.06 2.985v4.53l-2.47 4.013v8.03l4.426 2.984 9.16-2.78 2.317 2.317h.978v-1.388l.927-.927 3.088 3.088 9.47-4.53-2.728-2.727z"/>\n    <path id="MERTOLA" class="js-map-target map-target" d="M109.776 195.015l-.628 1.566.132 1.922.282-.12 2.367 3.5-4.53 1.956 2.78 3.294v1.544h-1.133l-1.75 2.47h2.934v1.493l-1.8 1.8 3.5 4.632v.403l.877.224.72-1.373 2.025.392v-1.7h2.09l1.308-.458 5.816-3.463.392-1.373 1.242 1.045 4.574-2.68 5.097-.326 1.308 1.307 1.242-1.045 2.352 1.503v-1.83h2.157v-1.698h2.22v-1.634l1.177-.065 1.764.457h3.53l.016.003.216-1.766-1.272-2.446 1.566-.195-.587-1.664 1.76-3.228-.587-1.272 1.566-.294 6.458-17.126-.294-1.174-2.446-.098-.88-1.174-3.426-1.273.098-1.27-3.817-.197-.98 1.566-4.402-1.664-6.654 3.718-1.37-1.174 2.055-7.34-1.663-1.468-4.6-.88-3.13 1.76-1.865 1.47-.876 1.37-1.957-1.664v-2.74l-1.078-.49.832-.832-.636-1.027-1.762-.393-1.174 1.272h-1.663l-1.274 1.565h-1.566l-1.174-1.272-.783.294-6.263 4.403v1.468l2.936 1.37v2.74h3.327l-2.544 1.37 2.25 1.762v2.25h-2.25v3.23l3.718 2.936v2.056h-3.817l-1.467.195.49 2.25h2.348l-.39 2.252-2.25-.295-1.412-1.174-.938-1.565-1.174.49.783 3.327z"/>\n    <path id="SERPA" class="js-map-target map-target" d="M179.16 147.846l-3.425.195-2.74-3.913-.294-1.37-3.643.49-2.814-5.285-4.796-3.915-3.327.39-.196-1.37.98-.88-1.37-.88-3.23 1.174-2.74-.292-1.175-.98-.784-.782.98-.783-.49-1.76.586-.686-1.174-1.86.49-2.92-5.775-2.952-2.544 1.664-.392 4.697-3.034 3.62h-1.664l-.783 2.643 2.74 2.25.196 1.175h-2.25l.978 9.003-4.207 7.34 4.697 3.72-.195 1.27-1.468.588.838 9.778.042.008 1.664 1.468-2.054 7.34 1.37 1.174 6.655-3.718 4.404 1.663.98-1.567 3.816.196-.098 1.27 3.425 1.274.88 1.174 2.447.098.087.348.697-.348-.783-2.055 3.23-.88 7.633-6.85 4.698-8.808-.49-2.447 2.936-3.033z"/>\n    <path id="MOURA" class="js-map-target map-target" d="M206.63 128.938l-.62-.962h-2.058l-2.47 1.44h-3.09l-3.6 2.163-11.633-7.62 1.646-1.543 3.814 1.3.402-1.473-.743-.89-4.012-8.322.89-3.12-4.902-.966-2.45-3.566v-2.228l-2.082-2.6V98.62h-1.114l-.668.892h-1.56l-.966 1.41-1.56-.742-2.155 2.823h-3.416l-.892 1.71-1.437 1.624v1.773h-2.985v2.676l-2.06 1.647v1.193l-1.02.966h-2.006l-1.338 1.783 1.56 2.303-.148 1.634-1.932 1.932h-2.368l.34.173-.49 2.92 1.174 1.86-.587.685.49 1.76-.98.784.784.783 1.173.978 2.74.293 3.23-1.173 1.37.88-.98.88.197 1.37 3.327-.39 4.796 3.915 2.814 5.284 3.644-.49.295 1.37 2.74 3.915 3.425-.194-1.355-1.978h.89l.67-1.71h1.783l.594.52 2.75-2.005h1.41l1.337 1.412h2.08l1.04-1.634.89.743 1.56-1.04-.965-.965v-2.155l1.71-.297 1.41-1.634 2.303 1.41h1.263v2.156l2.527.297 1.93-1.412.893.595h1.337l.52-2.303-.446-1.338 1.34-1.262z"/>\n    <path id="OURIQUE" class="js-map-target map-target" d="M75.594 201.78l3.293-2.162h1.647l1.647-2.882 2.78 3.19v-6.793l-1.645-.635-.79-2.018.658-1.93-.438-1.272v-1.49l-4.43-4.564.525-1.316-2.456-.92-.834.7h-1.667v-1.666l1.667-.614.79-1.228h1.623l2.52-2.59v-1.92l-2.316-2.315-9.16 2.78-4.427-2.986v-5.047l-3.528-1.685-2.24-.345-1.026-.13v10.86h1.184l1.286 1.287-9.675 8.75h4.427l2.316 1.904.772.772 5.867.617v2.47l.31 6.897 2.263 5.456-4.632 2.058v2.265l-3.757 3.14 1.596 1.594-1.853 2.367v2.884h1.646v4.762l.743.24 1.02-.738h2.04l1.36.964 1.076-.284v-2.04l1.416 1.36h3.06v2.21l.83.674-.738.983.926-1.235h1.647l1.956-4.323 2.367.412V216.6l-5.084-13.238 2.51-2.51z"/>\n    <path id="CASTRO_VERDE" class="js-map-target map-target" d="M94.855 167.957l-9.38 4.486-3.088-3.088-.926.927v1.39h-.977v1.92l-2.52 2.588H76.34l-.79 1.228-1.667.614v1.667h1.667l.834-.703 2.456.92-.526 1.317 4.43 4.563v1.49l.44 1.273-.66 1.93.79 2.018 1.646.635h4.427l6.176 2.573 1.852-1.595 1.853 1.287v1.44l1.956 4.067H99.63l1.182 1.184 8.468-3.586-.132-1.92.628-1.567-1.957-.293-.784-3.328 1.174-.49.938 1.567 1.41 1.175 2.252.294.39-2.252h-2.348l-.49-2.25 1.47-.196h3.816v-2.056l-3.72-2.935v-3.23h2.252v-2.25l-2.25-1.76 2.543-1.37h-3.327v-2.742l-2.936-1.37-.22.406.572.743-1.2.515-3.945-3 .343-1.488-1.572-.028-.8 2.058-1.916-.286-2.458-3.66-2.07 1.202z"/>\n    <path id="BEJA" class="js-map-target map-target" d="M94.02 142.43l-1.082 1.037.978.978 1.03 4.22-1.03 3.912h-1.75v1.853l1.853 1.544h-2.472v2.573l2.882 4.426-2.213 2.213 2.728 2.728-.09.043.09.033 2.07-1.2 2.457 3.658 1.915.286.8-2.058 1.573.028-.343 1.487 3.944 3.002 1.202-.515-.572-.743.22-.406v-1.468l6.263-4.403.783-.294 1.174 1.272h1.566l1.273-1.566h1.662l1.174-1.273 1.762.392.636 1.026-.832.832 1.077.49v2.74l1.956 1.663.876-1.37 1.864-1.467 3.132-1.76 4.6.88-.043-.01-.838-9.777 1.468-.587.195-1.273-4.697-3.72 4.208-7.34-.978-9.002h2.25l-.195-1.174-2.74-2.25.06-.205-.773-.3-4.79-4.46-4.405 1.376.715.882-.166 1.43-1.873 1.268v-1.542l-2.973.55v1.377h1.927l-.77 2.368-2.863-.77.165-3.14-1.872-.88v-.77l2.203-.057-1.817-2.587v-.992l.55-3.304-1.927-.44-.33 1.816-2.15-.22-.494 2.037h-1.046l-.99 1.597-2.04-1.542-3.302 1.928-1.046 1.376-1.212-.44-1.046.99-3.634-2.092-.826 4.68-2.312 4.405-1.047.55-.275 1.1.88.992-.55 1.157-1.872.494.166.606 1.32.77-.33.937z"/>\n    <path id="FERREIRA_DO_ALENTEJO" class="js-map-target map-target" d="M102.043 122.467l-1.732-1.73-.865.814-.458-.916H97.97l-1.325 1.477H93.69l-3.716 1.528-1.172-.916v-2.75l-1.425-1.68.712-.51-1.846-4.138-4.463.893-1.947 1.785h-3.408l-1.725 2.655-.198.484h-2.72l-1.643-1.19-.85 2.154v4.817h-2.55v-1.076l-2.607-1.416v1.983l-1.587-.34v3.004l-.907.907v1.36h-.624l-2.068-2.068-.935.935-.482 4.278-.934.935v1.17l4.714 5.723 1.034-.717 1.29 1.147 2.24-.775 1.98 3.703 1.255.455 15.87 3.83 1.75-1.75 1.05-1.05h2.224v-2.008h2.934l1.08-1.036 1.047.607.33-.936-1.32-.77-.167-.606 1.872-.495.55-1.158-.88-.99.275-1.102 1.047-.55 2.312-4.405.826-4.68-.108-2.84z"/>\n    <path id="VIDIGUEIRA" class="js-map-target map-target" d="M144.223 119.465l-2.544 1.664-.392 4.697-3.034 3.62h-1.664l-.783 2.643.06-.205-.773-.3-4.79-4.46-4.405 1.376.715.882-.166 1.43-1.873 1.268v-1.542l-2.973.55v1.377h1.927l-.77 2.368-2.863-.77.165-3.14-1.872-.88v-.77l2.203-.057-1.817-2.587v-.992l.55-3.304-1.927-.44-.245-2.888-.92-.77v-1.068l-2.89-2.09-1.142-1.142h3.143l1.394-2.61-.593-.504V109.2l.704.465h1.602l.837 1.02h1.31l1.527-1.456 1.037 1.036 2.092-.09 3.02 1.927 2.693 2.838h1.418l2.475 1.64 3.82-1.42 2.584 1.09h2.038l2.474 1.857.727-.946 7.408.94-1.17-1.725 1.56 2.303-.147 1.634-1.932 1.932h-2.368z"/>\n    <path id="CUBA" class="js-map-target map-target" d="M116.955 119.006l-.92-.77v-1.068l-2.89-2.09-1.142-1.142h3.143l1.394-2.61-.593-.504V109.2l-5.664-3.756-.873.8-.182-1.382-2.54-1.724-1.408-.613 1.683 5.333-3.044 1.808 2.153 2.995v.984l1.453 1.745-2.55 3.468-1.512-.75-3.153 2.628 1.733 1.73-2.24 2.038.107 2.84 3.634 2.093 1.046-.99 1.212.44 1.046-1.377 3.303-1.928 2.04 1.542.99-1.597h1.046l.495-2.037 2.15.22.33-1.817z"/>\n    <path id="ALVITO" class="js-map-target map-target" d="M106.073 112.66l-2.154-2.994 3.043-1.808-1.683-5.333-3.512-1.53-1.76 2.187h-2.402l-2.273-3.175-1.33-.386-1.16 1.116-.514-.214h-4.12l-.514 1.115h-2.66l-.858-1.8h-1.17v1.15l3.236 6.653v6.004l1.845 4.138-.713.51 1.425 1.68v2.75l1.172.916 3.717-1.527h2.955l1.324-1.476h1.017l.458.917.866-.814 3.154-2.63 1.512.752 2.55-3.47-1.453-1.744z"/>\n    <path id="BARRANCOS" class="js-map-target map-target" d="M212.392 115.52v-2.264l-4.323 2.368-1.133-1.132h-2.78l-1.44 3.602h-1.853l-4.632 1.853-1.956-2.367h-2.573v1.852h-2.368v2.822l-.313-.01-.402 1.474-3.814-1.3-1.647 1.543 11.63 7.62 3.603-2.163h3.088l2.472-1.44h2.058l.927 1.44 1.235-1.235 2.367-6.073h-1.545v-2.37z"/>\n</svg>\n'}),define("text!maps/gfx/BRAGA.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="ESPOSENDE" class="js-map-target map-target" d="M28.757 176.404H25.27v-3.606h1.684v-8.775l-3.847-3.606 3.726-8.293-.914-2.62L10 154.81v6.45l4.573 18.63-1.443 2.764 2.765 6.25-.36 2.645 6.61.6 1.443-5.288 3.125-1.924 2.044 2.404h1.08l1.083-2.764-2.163-5.29z"/>\n    <path id="BARCELOS" class="js-map-target map-target" d="M71.91 165.225l-1.925-3.966h-5.53l-2.403-5.89 2.164-.842-.733-5.264-4.796 1.177-3.246-5.53-4.086 3.006-2.764-2.764h-2.765v-2.284l-2.074-.24v.544l-2.327 5.354-3.49-3.026-12.014 4.004.913 2.62-3.726 8.293 3.847 3.606v8.775H25.27v3.606h3.487v2.885l2.163 5.288-1.082 2.764h-1.08l-2.045-2.404-3.125 1.924-1.443 5.288 3.486 3.606 4.088-.36.962 3.125 4.688-2.042 6.01 8.654 4.447 1.923 4.447-5.53 6.49 1.924 5.65-7.694-3.725-4.086 9.736-1.803-2.164-6.612 4.687-2.884-1.923-2.764 3.606-4.447v-4.088l-3.125-2.645z"/>\n    <path id="VILA_VERDE" class="js-map-target map-target" d="M109.05 120.75l1.323-6.85h-6.61l-3.247.48-3.365-3.485-2.043 3.005-7.813.96-6.61 5.17-1.323 1.322-4.927 1.683v-3.246l-6.61 3.966 1.2 1.202-1.922 10.818-2.403.12-2.164 3.606 2.524 4.328v5.048l-1.574.386.733 5.264-2.164.84 2.404 5.89h5.53l1.923 3.967-.338.17h2.26v-3.054l9.015-6.49h2.765l3.125-11.3h2.404v-5.288h2.525l3.366-5.53 7.453-4.086v-2.044l6.37-2.884z"/>\n    <path id="TERRAS_DE_BOURO" class="js-map-target map-target" d="M161.7 98.394l-6.853 2.283h-9.255l-6.972-2.234v3.437l-3.125-1.563h-3.005l-5.89 6.01-8.294 4.928-5.29-3.245-1.44 4.808-1.27 1.082h.067l-1.322 6.85 1.804 3.968-6.37 2.884v2.044l-4.576 2.51 6.86 3.74 2.643-2.163 4.33.24 2.523-4.087 2.644 2.404-2.284 1.803 2.645 2.044 1.923-.6.362 3.965 2.524 3.606h9.015l2.765-6.85 12.26-3.487 7.093-8.653 1.322-6.732 3.245-3.245v-7.212l3.126-3.606z"/>\n    <path id="VILA_NOVA_DE_FAMALICAO" class="js-map-target map-target" d="M94.334 210.43l1.804-6.036h-2.425l-3.045-2.876 1.38-1.382-10.29-9.165-2.652 2.088-2.707-2.877-2.483-.788-5.494.475-9.736 1.803 3.726 4.086-5.65 7.693-6.49-1.924-4.448 5.53 3.14.606 1.805-.872 2.365 2.864v3.112H49.96l-3.298 2.178 2.676 11.266h2.02v-1.85h17.37v-2.144l2.482-3.553 5.696-1.24h4.512l1.692 2.763h3.553l3.892-5.19h5.076l.96-1.522z"/>\n    <path id="BRAGA" class="js-map-target map-target" d="M109.525 165.072v-2.416l-6.516-2.343 1.61-2.197v-5.198H94.223l-1.903 2.343h-5.492l-1.216.59h-2.765l-9.015 6.49v3.054h-2.26l-2.067 1.033 3.125 2.645v4.087l-3.606 4.446 1.923 2.765-4.688 2.885 2.163 6.612 5.494-.475 2.482.79 2.706 2.876 2.65-2.087 3.11 2.77.06-.114 5.563-4.466v-2.27h2.708l.586-4.466-.586-3.44 5.345-5.492h6.223l1.172 1.025h2.49l.95-2.636 1.83.147 1.905-3.587z"/>\n    <path id="AMARES" class="js-map-target map-target" d="M121.552 139.502l-.36-3.966-1.924.6-2.645-2.043 2.284-1.803-2.644-2.404-2.524 4.087-4.33-.24-2.643 2.163-6.86-3.74-2.876 1.577-3.365 5.53H91.14v5.288h-2.403l-3.125 11.3 1.216-.59h5.492l1.903-2.342h10.397l2.683-2.013v-4.92l10.775-2.966 4.53-.158.898-.568z"/>\n    <path id="VIEIRA_DO_MINHO" class="js-map-target map-target" d="M176.003 135.536l-8.174-2.284-3.847-3.246-1.683 2.164-14.184.6-12.26 3.487-2.765 6.85h-9.014l-.57-.813-.9.568-2.52.087-.056.158 1.718 5.69 2.5 1.248 3.67-2.264 2.42.702 1.066 2.11 3.228 1.248-1.093 2.108-3.203.156v3.124l4.92 1.093h5.387l1.874 2.89v2.107h-2.42v4.45l2.654 3.28 1.913-1.913 3.553 2.226 2.655-2.5h2.5l1.6-1.6 2.146-1.21 2.498 3.045 1.288-1.288-1.678-2.538 4.294-6.56h3.436l5.153-5.76-.074-.828.12-9.016z"/>\n    <path id="POVOA_DE_LANHOSO" class="js-map-target map-target" d="M142.518 163.32v-2.108l-1.874-2.89h-5.388l-4.92-1.092v-3.124l3.203-.156 1.092-2.108-3.228-1.25-1.067-2.108-2.42-.702-3.67 2.264-2.5-1.25-1.717-5.688-1.952-.09-10.775 2.968v4.92l-2.683 2.012v5.198l-1.61 2.197 6.515 2.343v2.416l3.588 3.368-1.904 3.587-.504-.04 1.672 2.5-.312 2.497 2.655-.624 4.92-3.748.234 3.514 3.045 2.108 2.732-5.544-.702-1.874 6.09-3.592.234-2.03 2.655.78-.86 4.217 3.826 2.422 3.358-1.484 2.253-.38-2.41-2.977v-4.45z"/>\n    <path id="CABECEIRAS_DE_BASTO" class="js-map-target map-target" d="M193.133 183.088l-.93-1.448 1.448-.414h5.9v-4.243l5.276-3.183v-5.612l2.587.103 2.328-2.792.26-3.107h-1.038l-4.98-9.1h-2.256l-4.93 7.248-2.883-1.924-1.563 1.924h-2.164l-3.365-1.803h-5.048l-2.524-3.246-3.726 1.32-3.125-.72-.36-3.966.074.83-5.152 5.76h-3.436l-4.294 6.558 1.678 2.538-1.288 1.288-.465-.566-1.412 1.412 3.73 4.35v9.726l-3 2.483 2.793 2.07 6.415 1.966 2.07-1.148 1.246 1.246v1.867l13.965 5.794-1.346-3 1.138-4.554 1.45-3.208 3.103-1.345 1.552 1.448z"/>\n    <path id="GUIMARAES" class="js-map-target map-target" d="M124.943 194.264l2.794-3.83v-5.897l-3.31-3.725 2.896-8.07 6.998-1.76-1.25-.79.86-4.217-2.656-.78-.234 2.03-6.09 3.59.702 1.875-2.733 5.544-3.046-2.108-.234-3.514-4.92 3.748-2.654.624.312-2.498-1.672-2.5-1.327-.105-.953 2.637h-2.49l-1.17-1.025h-6.224l-5.345 5.49.586 3.442-.586 4.466h-2.71v2.27l-5.563 4.466-.06.113 7.184 6.396-1.382 1.382 3.045 2.876h2.425l-1.804 6.035 2.256 3.044-.96 1.523h-1.11l-2.068 2.445.207 3.208 2.69-2.07 2.276 1.863 8.278-3.932 1.655 1.45 1.24-1.242-1.55-1.345-.415-3.725 1.966-1.242 2.69-1.115.208 3.496 6.52 1.76.827-3.312 8.38.724.105-3.62-4.656-.726.632-2.173h4.438v-2.174l-3-3.414z"/>\n    <path id="FAFE" class="js-map-target map-target" d="M160.788 188.22l-2.32-1.717 3.002-2.483v-9.727l-3.73-4.35 1.413-1.41-2.034-2.48-2.148 1.21-1.6 1.6h-2.5l-2.654 2.5-3.553-2.226-1.913 1.913-.245-.303-2.253.38-3.358 1.485-3.826-2.42 1.25.79-6.997 1.76-2.897 8.07 3.31 3.725v5.898l-2.793 3.83v5.587l3 3.414v2.173h-4.437l-.632 2.172 4.656.725 7.76-.31.828 3.31 3.105-.207.517 4.243 4.967 1.655 4.346-.93 1.862-9.107-1.76-2.793 3.002-.62.724-4.553 6.727-5.795-1.552-3.21z"/>\n    <path id="CELORICO_DE_BASTO" class="js-map-target map-target" d="M179.785 209.785l-.62-3.62 5.587-4.347-.433-3.784-13.326-5.53v-1.866l-1.246-1.246-2.07 1.147-6.415-1.967-.475-.352-2.733 1.8 1.552 3.21-6.726 5.794-.723 4.553-3 .62 1.758 2.794-1.862 9.107-4.346.93-.31-.102-1.88 4.036 4.363 4.036 4.656 2.07 3.312 2.586 2.07-1.138 1.344-3.207 7.037 6.932 2.378-1.553 5.692-5.277 2.276-5.07 2.587-3.105.414-5.277-2.38.725 1.45-2.898z"/>\n    <path id="VIZELA" class="js-map-target map-target" d="M119.045 211.234l-.828 3.31-6.52-1.758-.206-3.495-2.69 1.116-1.965 1.242.414 3.725 1.55 1.345-1.24 1.242-1.656-1.45.165.146v3.036l2.8 4.33 2.803 2.188 2.292.105 2.038-1.104v-6.706l6.87-5.86v-1.08z"/>\n</svg>\n'}),define("text!maps/gfx/BRAGANCA.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="BRAGANCA" class="js-map-target map-target" d="M107.556 64.503v5.054l-2.06 5.054h-9.545l-3.368 8.986 3.93 5.24-4.305 9.36H84.72v3.93l7.862 3.37-1.31 2.995h-2.808v3.557l-2.62 2.808 3.37 6.925h8.422l2.246 2.62-2.995 3.183v5.99l-2.808 2.433-2.06 8.985 2.06 3.93-.75 3.183h12.354l2.808-1.87h1.685v3.555l13.664 8.985h7.488V151.73h2.246l3.182-9.92v-7.863h5.054l2.527 2.527h3.463V131.7l2.9-2.9v-11.138h-3.275l1.872-2.807 6.364-26.018h-8.61l2.996-13.29-6.55-6.364-2.622 4.118h-2.06v2.62l-13.476.937-7.86-1.872-3.37-9.17z"/>\n    <path id="FREIXO_DE_ESPADA_A_CINTA" class="js-map-target map-target" d="M129.61 233.08l-1.39.117-6.604-8.573-3.94 2.78-3.243 7.3-4.518 1.852-1.158 1.97 1.737 2.085 1.738 4.403-15.755 10.542-13.785-.81-1.39 1.62 2.78 1.16 1.622 9.383-4.403 4.402-.462 1.622 2.433.347.29.01-.29-.822 2.55-2.085.81 1.854 4.75-.232.253.955 2.296-2.577 2.43.695 8.342 1.738 6.603-2.665-.115-1.852 8.804-12.627-2.665-6.66 2.2-1.333 8.92-8.688v-2.434l1.854-.347z"/>\n    <path id="VINHAIS" class="js-map-target map-target" d="M97.636 121.78h-8.423l-3.37-6.925 2.62-2.808v-3.556h2.808l1.312-2.994-7.862-3.37v-3.93h7.487l4.306-9.36-3.93-5.24 2.88-7.687-8.904-.525-2.252-5.33-4.145-1.303-3.553 5.33H71.4l-1.067-1.658-1.658 2.605h-4.027l-1.895-6.04-9-3.554-2.014 3.316h-3.79v4.146l-1.37 3.197 2.908 5.21-1.42.95-2.606 7.58-.66.795 1.133 2.165-2.487 7.816 2.843 9.95 4.146 2.605-1.066 3.198.83 1.54-2.83 3.056 4.132 3.457h2.487l3.434 3.79 2.487-2.37 2.606 2.133 7.225 1.184 1.777 5.21h3.08l3.316-6.513h3.553l1.184 1.54 4.145 2.37h2.96l.357-3.316h6.775v-.86l2.995-3.183z"/>\n    <path id="MACEDO_DE_CAVALEIROS" class="js-map-target map-target" d="M130.972 168.83l.592-2.606 1.066-2.132-1.302-1.446v.127h-7.487l-13.663-8.985v-3.556h-1.685l-2.808 1.87H93.33l.75-3.18-2.06-3.93 2.06-8.986 2.807-2.433v-5.13h-6.775l-.356 3.317h-2.96l-4.146-2.37-1.184-1.54h-3.553l-3.316 6.515h-3.08l-1.776-5.21-7.224-1.185-2.605-2.132-2.486 2.37v4.973l4.382 3.79v7.58l3.197 1.777-3.08 3.08 4.975 5.566h5.448v7.8l-5.21 6.65v2.96l4.53 1.895 2.102 4.5-2.103.237.918 3.79.71 1.658-3.078 4.974 7.106-1.184v-3.198l9.83-7.816 7.936 4.854.474 5.212 6.277 3.908 5.21-5.093 2.962.12.472 4.737 11.844-4.974.592-1.895 2.487.83 6.277-5.094v-1.303l2.37-3.315-.593-3.908z"/>\n    <path id="VIMIOSO" class="js-map-target map-target" d="M179.885 162.197h-4.145l-2.25-4.026 2.132-3.908 1.776-6.395 2.606-1.895-2.25-8.646-1.303-.71 1.422-5.33-9.95-1.658-1.775.355-.592 3.435h-2.488l-2.13 2.368h-4.147l-3.197-4.026-3.234-2.618-2.56 2.56v4.772h-3.463l-2.527-2.527h-5.054v7.862l-3.182 9.92h-2.246v10.916l1.302 1.446-1.066 2.132-.592 2.606 2.487 2.487.59 3.908-2.368 3.316v1.304l-1.006.816.177.132 2.37-2.25 6.394-1.66 2.37 3.554 5.092-1.302 7.223 1.184 1.358-1.48 5.276-.652 1.658-4.856-3.435-6.395 3.434-1.185-.237-4.5 2.132-2.843 2.13 2.014 3.317.948 2.605 8.646 4.738 1.184 3.79-4.737z"/>\n    <path id="MIRANDA_DO_DOURO" class="js-map-target map-target" d="M207.954 150.71l-1.776-3.435-4.62-1.185-2.842-5.685-6.87-5.448-9-3.908-5.002.34-1.393 5.226 1.303.71 2.25 8.646-2.605 1.895-1.776 6.395-2.132 3.91 2.25 4.025h4.145l1.185 4.264-3.79 4.738-4.738-1.184-2.605-8.646-3.317-.947-2.13-2.013-2.133 2.843.237 4.5-3.435 1.185 3.434 6.395-1.658 4.856-5.275.652-1.357 1.48 5.093 6.75.71 2.37 4.856 2.013-.355 4.62 8.527 6.514 5.33-.948 1.895-2.605-3.554-1.42.71-3.554 1.895-1.066 1.304-1.302 1.658 2.96 3.91.474 1.42-1.776 2.013.118v-2.96l-3.79-1.303 1.422-2.487 2.368.12 3.08-4.146-1.777-2.96 3.08-3.91v-2.724l3.08-1.895-.357-1.42 2.725-.593-1.302-3.553 2.25-.118L205.23 159l.356-2.37 3.67-4.026z"/>\n    <path id="MIRANDELA" class="js-map-target map-target" d="M71.665 179.015l2.103-.237-2.103-4.5-4.53-1.895v-2.96l5.21-6.65v-7.8H66.9l-4.974-5.567 3.08-3.08-3.198-1.775v-7.58l-4.382-3.79v-4.973l-3.435-3.79H51.5l-4.133-3.458-.132.14-.66 2.725-2.182 1.065-.83 7.343-5.447 10.423.236 3.08-2.547 5.862 2.072 2.072-1.303 2.37 5.566 11.842H32.08l-2.725 8.054.592 3.553H25.09v1.775h-2.486l-3.198 3.198-.133-.08-.01.08 1.13 2.224-1.13 3.66v3.594l2.423 4.98-1.625 1.21 1.415 3.492 3.245.967 6.056 2.46 3.926-3.992h3.793v-2.196l1.897-1.897h1.83v-1.63l4.06-2.33h3.526l3.46 3.46H56l2.428-2.428 1.73-1.73v-2.828l1.914-1.914 1.68 1.68h2.762l1.946-1.947 1.757.137 3.08-4.974-.712-1.658z"/>\n    <path id="VILA_FLOR" class="js-map-target map-target" d="M45.735 228.263l2.32.465.013-.047 4.107-4.693 3.887-1.027 7.26 5.427 1.834-4.84-.733-2.64.807-2.934 1.247-2.493 1.173-3.154 2.64-3.227-.88-.368v-3.593l4.474-7.482h-2.347l-.147-4.034-1.175-1.247v-2.94l-1.757-.138-1.946 1.946H63.75l-1.68-1.68-1.914 1.913v2.827l-1.73 1.73-2.43 2.43H53.27l-3.462-3.46H46.28l-4.058 2.328v1.63h-1.83l-1.897 1.897v2.196h-3.793l-3.926 3.993h4.4v4.347H32.54l-1.93 3.155 2.574 1.866 2.06-1.223 1.448 1.45h3.895v1.77l-1.417 2.51 1.095 1.223.837 6.695 1.48 1.48h1.738z"/>\n    <path id="ALFANDEGA_DA_FE" class="js-map-target map-target" d="M90.078 226.558v-2.055h-1.162l-2.322.804-1.162-1.162-1.072 1.072-8.755-6.253-3.752-5.092-3.712-2.147 2.15-2.626-.88-.368v-3.593l4.474-7.482h-2.347l-.147-4.034-1.175-1.247v-2.94l7.106-1.184v-3.198l9.83-7.816 7.936 4.854.474 5.212 6.277 3.908v2.11l-3.094 2.323v5.45l5.54 3.037 1.428-1.55h2.592l-1.876 8.072h-3.93l-4.557 9.47v2.41l-.894.537-.804 1.55-2.502-2.264-.268 3.215-1.43.983z"/>\n    <path id="CARRRAZEDA_DE_ANSIAES" class="js-map-target map-target" d="M29.888 248.538l3.426 1.355 6.013-2.142 2.867 2.303 2.948-2.68v-7.594l3.84-1.52v-3.037l-2.768-2.5 1.842-3.995-2.32-.465-1.418 2.06H42.58l-1.48-1.48-.837-6.695-1.095-1.223 1.417-2.51v-1.77H36.69l-1.448-1.45-2.06 1.223-2.575-1.866 1.93-3.155h2.64v-4.346h-4.4l-3.108-.553-3.726.948-2.777.067-.88 1.694-1.985 2.293 1.81 1.695-4.75 4.523v1.413l1.244 1.02-1.526 2.656v2.092l1.187.848v1.244l-4.183-1.244-1.583 1.696v2.544l.623 1.922-1.866 1.753 6.332 3.11 3.165 6.162v1.81h1.752l.848 2.656h5.993z"/>\n    <path id="TORRE_DE_MONCORVO" class="js-map-target map-target" d="M112.106 235.658l-5.976-.854-3.227-5.485h-9.437l-1.423-2.762h-1.965v-2.055h-1.162l-2.322.804-1.162-1.162-1.072 1.072-8.755-6.253-3.752-5.092-3.712-2.147-.49.6-1.173 3.155-1.247 2.493-.807 2.934.733 2.64-1.833 4.84-7.26-5.427-3.888 1.027-4.107 4.694-.012.048-1.842 3.994 2.77 2.5v3.04l-3.842 1.517v7.593l-2.948 2.68h4.198l1.43 1.787h5.45v-5.897l5.45-1.965v-4.02h2.5v6.61l-3.305 1.698 1.384 1.385h6.568l.536 3.172-3.752 3.484v4.825l8.844 4.825v2.322l5.45 2.234.535-1.25 3.82 2.05 4.404-4.402-1.622-9.384-2.78-1.158 1.39-1.622 13.785.81 15.32-10.25.265-.723-1.568-3.97-1.737-2.084 1.158-1.97z"/>\n    <path id="MOGADOURO" class="js-map-target map-target" d="M173.134 202.584l-8.527-6.514.355-4.62-4.855-2.013-.71-2.368-5.094-6.752-7.224-1.184-5.094 1.302-2.37-3.553-6.394 1.658-2.37 2.252-.176-.132 1.006-.816-6.277 5.093-2.487-.83-.592 1.896-11.844 4.974-.473-4.737-2.962-.12-5.21 5.094v2.11l-3.095 2.323v5.45l5.54 3.037 1.428-1.55h2.592l-1.876 8.072h-3.93l-4.557 9.47v2.41l-.894.537-.804 1.55-2.502-2.264-.268 3.215-1.43.983 1.424 2.76h9.437l3.227 5.486 3.037.434 3.172.324 2.093-.86 3.244-7.297 3.94-2.78 6.602 8.572 1.39-.116.054.248 6.133-6.77v-2.628h2.352l1.132 1.133 1.437-1.438h2.57l1.285 1.285v-2.374h1.85v3.137h5.23v-3.92l4.965-3.922 1.742 1.744 2.527.435 2.7-1.83-2.178-2.614 4.008-3.224 3.31.436 1.656-1.917v-2.613l3.136-1.568-1.655-2.353z"/>\n</svg>\n'}),define("text!maps/gfx/CASTELO_BRANCO.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="IDANHA-A-NOVA" class="js-map-target map-target" d="M210.344 154.722l-2.136-.28v-4.086l-2.23-1.95.65-1.486-3.714-1.022v-3.622l-2.415-2.6-.93 1.114-2.88-1.114-1.578 2.322-3.993 1.393h-2.88l-2.323 1.022-3.436-2.043-3.528 3.157-3.297-1.718-1.997-1.998-2.043 1.857h-2.23l-2.136-2.6-3.53 4.178-2.043 3.808-3.622-1.3-2.787-5.387-6.687 5.665-2.228.743-3.343 3.808-1.487 9.752h1.95l1.114 5.665 2.23 2.322v4.737l1.578 2.972-5.572 10.216.836 1.765 5.293-1.58 3.53 3.902 6.036 2.88h8.636l-6.687 14.302v2.506l-4.737 4.644v1.95l16.16 3.066 2.322-2.6h6.13l1.857.928 8.266-1.95 3.994-10.867-1.58-.743 1.766-6.594 1.114-.743-1.857-4.55v-4.088l2.6-1.023 2.787-.557 2.786-4.922h1.95l2.044-3.437v-7.243l-1.208-1.207 1.81-1.812 1.812-2.832v-8.137l1.626-2.22 1.3-1.3z"/>\n    <path id="PENAMACOR" class="js-map-target map-target" d="M149.068 139.324L147 148.56l1.58-.525 6.688-5.666 2.787 5.386 3.622 1.3 2.043-3.808 3.53-4.18 2.135 2.6h2.23l2.043-1.856 1.997 1.997 3.297 1.717 3.53-3.158 3.435 2.042 2.322-1.02h2.88l3.992-1.394 1.58-2.322 2.878 1.114.726-.87v-.114l-.964-2.328-6.745-.723-3.854-5.3-.08-5.62-1.606-1.445 1.285-2.008.963-4.898 4.416-3.533 1.447.564 2.248-3.453-8.51-6.1-.885-.162-.4 1.847-9.074.482-.723-1.044.883-1.124-1.686-2.57.08-2.25-2.087-1.284-2.41 2.33-.4 4.736-4.417 3.372-1.204-.963-.883-.16-2.73-2.007-3.534 1.285-.402 1.445-1.525 2.248-2.41-1.685h-2.33l2.01 7.387-2.01 2.088.724 1.766 2.41.24-.162 1.286-3.452 2.248.16 2.81-2.087 1.526v3.212l1.124 1.124-.32 3.854z"/>\n    <path id="VILA_VELHA_DE_RODAO" class="js-map-target map-target" d="M122.965 216.263l.873-7.307-1.2-2.618-14.615-1.2-1.31-1.2-.217-3.053.218-1.636-.98-3.273-2.4.327-5.018 6.87-5.78 4.036-2.51.11-1.635-.764-2.444.158-1.49 1.626.27 3.522-3.52 9.213-.408 2.823.678 2.867-2.303 3.25 2.167 5.962-2.438 1.355-2.032 5.148 3.387-1.355 3.115-3.252 1.762-.54 1.083-3.93 4.47-.678 1.627-3.522-.407-3.25 6.232-3.388 4.063 4.74 6.91-3.407v-2.823l6.773-.407 1.22-2.167 3.242.6.436-1.746z"/>\n    <path id="COVILHA" class="js-map-target map-target" d="M137.543 89.206h-3.245l-2.01-1.8h-1.352l-1.014.785h-2.258v-2.906l-4.568 1.714-3.97 4.697v4.517l-2.18 2.44v2.102h-5.218l-1.298.96h-.882l-1.324-2.05h-2.284v1.998l-1 1v1.284l-5.904 5.477h-3.608l-6.8 6.36H83.67l-1.297 1.193v4.075l-3.66 4.387 1.272 1.272v2.672h3.348v3.245l3.348 3.348 2.104-2.103h3.166l2.75.96.624-2.465 1.623 1.622 2.374-3.128v-1.92h1.22l.936.933h1.323l1.064-1.064 1.557 1.558h4.387l2.297-2.297-1.492-1.49v-1.74h4.93l5.024-5.022h7.825l12.46-5.957-.805-.804-1.973-1.09v-15.65h-1.79l6.306-5.763.288-1.656-2.24-2.318z"/>\n    <path id="BELMONTE" class="js-map-target map-target" d="M149.228 108.732l-3.21-1.445-1.447-2.49 3.374-1.605 4.978-6.343V84l-3.168-1.52-1.47 2.706-2.24-2.242-3.168 2.087v3.864l-.288 1.656-6.307 5.762h1.792v15.65l1.973 1.09.656.658h4.065l4.893-4.893z"/>\n    <path id="FUNDAO" class="js-map-target map-target" d="M79.175 153.893h5.294l2.762 2.764v-2.098h4.828l.584-.792 3.49-2.836 2.727-4.69 8.072-2.945 5.017 1.854 7.416-.762 3.163 5.453-.546 3.055 2.072 6.435 4.8-.764v-2.508l7.306-1.418 1.527 2.072 1.853 5.626h1.98l1.486-9.752 3.342-3.808 2.23-.743-1.58.526 2.066-9.236 2.088-2.328.32-3.854-1.123-1.124v-3.212l2.087-1.526-.16-2.81 3.452-2.248.16-1.285-2.408-.24-.723-1.767 2.01-2.088-2.01-7.387-3.102-.635-4.893 4.893H140.7l.15.148-12.46 5.958h-7.824l-5.023 5.022h-4.93v1.74l1.49 1.49-2.296 2.298h-4.386l-1.556-1.557-1.065 1.065h-1.324l-.935-.934h-1.22v1.922l-2.373 3.127-1.623-1.623-.623 2.466-2.75-.96h-3.166l-1.314 1.313 1.66 1.128v3.196l-2.197.932.915.916-4.4 4.4v1.476l-2.686-2.685v-2.11h-1.687v4.66l1.166 1.166-1.158 1.16.965.965-.872.873z"/>\n    <path id="CASTELO_BRANCO" class="js-map-target map-target" d="M156.01 218.673l-4.796 2.28-5.454 2.945-7.09-2.212-2.508 1.012-5.453-2.51-10.362-1.09.436-1.744 2.18-1.09.874-7.308-1.2-2.618-14.615-1.2-1.31-1.2-.217-3.053.218-1.636-.98-3.273-2.4.327-5.018 6.87-5.78 4.036-2.51.11-1.635-.764.437-1.854-1.854-3.6-1.2-6.325.655-5.454-1.855-1.308.764-1.31-1.745-2.07v-1.856l3.054-.11 1.745-1.745.328-3.163-1.527-.654 1.092-4.145 4.035.437 2.073-4.254-1.855-.327-1.2-1.637.982-1.854-.98-3.273.762-1.964 2.835-2.617v-1.745l-2.29-1.962 3.49-2.836 2.726-4.69 8.072-2.945 5.017 1.854 7.416-.762 3.163 5.453-.546 3.055 2.072 6.435 4.8-.764v-2.508l7.306-1.418 1.527 2.072 1.853 5.626H143.473l1.114 5.665 2.23 2.322v4.737l1.578 2.972-5.572 10.216.836 1.765 5.293-1.58 3.53 3.902 6.036 2.88h8.636l-6.687 14.302v2.506l-4.737 4.644v1.95l.277.053zM82.465 180.24h-1.798l-2.116-2.115-1.477 1.48-1.45-1.45-2.493 3.188v2.145h4.928l1.276 1.276.956-.957 1.537-1.536 1.765.51.148-1.336-1.275-1.203z"/>\n    <path id="OLEIROS" class="js-map-target map-target" d="M71.762 183.502l1.368-.687v-1.472l2.493-3.19 1.45 1.45 1.478-1.478 2.117 2.116h1.798l1.275 1.204-.134 1.21.125.12 2.916-.104 1.745-1.745.328-3.163-1.527-.654 1.092-4.145 4.035.437 2.073-4.254-1.855-.327-1.2-1.637.982-1.854-.98-3.273.762-1.964 2.835-2.617v-1.745l-2.29-1.962-.585.79h-4.828v2.1l-2.763-2.765h-5.295v-1.378l-2.413-3.313H73.82l-1.208-1.208h-1.3L67.1 150.78h-1.3l-1.86 2.17 2.17 4.806h-1.92v.643H58.83v2.012l-1.704 1.703-1.486-1.486h-2.23v1.05l-.588.59-1.858-1.858-1.564 1.564 2.214 2.214h-1.89l-2.135-2.137v3.964h-2.54l-1.547-1.548v1.98h-1.92l-1.61-1.61v2.787l.82.82-.837.838 2.825 3.562h2.45v3.516h5.59l2.373 2.374v2.634l10.844 3.836v4.582l-1.065 1.066v1.65h2.877v-1.544l1.09 1.092h2.69l3.557-3.556v-2.97h-1.425z"/>\n    <path id="SERTA" class="js-map-target map-target" d="M62.972 191.982v-1.128l1.065-1.066v-4.582l-10.844-3.835v-2.633l-2.374-2.374h-5.59v-3.516h-2.45l-2.824-3.562-.097.097-.073.072H38.58l-.775-.774H35.76v2.292h-.266l-1.066 1.49-1.563 5.327-3.267 2.272-1.386 1.386-1.456-1.1-2.557 2.698v2.06l-2.06 1.28-1.138-1.35-1.492 1.704h-5.967l.995 4.617h-1.99l-1.136 2.842 1.066 1.562.213 1.705-.07 1.49 2.628 1.706 2.7-1.847 2.273 5.967-1.775 1.776 1.563 1.562h1.847l1.776-2.983 4.902-2.7 9.377 5.824h6.606l2.912-3.623 1.847-1.846 1.385-1.385h4.37l3.32-3.322v-1.758l1.736-1.736 1.004 1.003 1.576-1.576-1.1-1.1z"/>\n    <path id="VILA_DE_REI" class="js-map-target map-target" d="M19.738 212.558l.72-.72v1.34l-.55.55v6.377l-.394.395v3.088h1.496l.874.874 4.368.874 1.27 1.27H31.037l2.466 2.467h7.308l1.495-1.494 1.063 1.06h1.484l-2.887-6.68-1.03-.453 1.05-1.05v-1.26h2.042v-4l-.763-.762 1.588-1.588v-2.722l.62-.618-.956-1.243H37.91l-9.378-5.825-4.9 2.7-1.777 2.982h-1.847v.725l-.63.63v1.02l-.85.85.86.86z"/>\n    <path id="PROENCA-A-NOVA" class="js-map-target map-target" d="M86.973 201.103l-1.2-6.326.655-5.454-1.855-1.308.764-1.31-1.745-2.07v-1.856l-1.765-.51-1.537 1.537-.956.957-1.276-1.276H73.13v-.673l-1.368.687v2.024h1.425v2.97l-3.556 3.556h-2.69l-1.09-1.092v1.545H62.97v-.523l-1.407.938 1.1 1.1-1.575 1.577-1.004-1.003-1.736 1.736v1.758l-3.32 3.32h-4.37l-1.385 1.386-1.847 1.847-.475.592.838.482h2.17l.804-.804 2.813 3.354 2.732-2.2v-1.556l2.652 2.652v9.805l-.885.884v2.57h3.376l.918-.917h2.217l2.99 2.99v1.544h2.314l1.97 1.97v1.084h1.728v2.894h1.206v2.01l1.647 1.647 1.995 3.336.467.356 2.438-1.355-2.167-5.96 2.303-3.252-.678-2.867.407-2.823 3.522-9.213-.27-3.522 1.49-1.626 2.444-.158.437-1.854z"/>\n</svg>\n'}),define("text!maps/gfx/COIMBRA.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="PENELA" class="js-map-target map-target" d="M117.672 226.405v7.24l-4.915-3.627v-3.042h-1.64v3.393l-9.126 9.946h-6.2v-1.52h2.456v-3.512h2.81l-4.33-5.734v-3.744l-3.512-6.67-2.574 2.106 1.822 1.822v2.976l-5.216-4.452v-2.173h-2.26l-.154-3.003h7.696v-1.877l-4.692-4.693v-3.19h4.325v1.952h5.735l18.723 10.53-2.223 2.927z"/>\n    <path id="MIRA" class="js-map-target map-target" d="M32.25 108.34l-7.325 29.726 9.982 2.977 5.866-.613 1.14 1.664 3.59-.175.787-5.167 3.152-3.59-2.19-2.978 2.365-.35-.263-2.802-4.64-5.516z"/>\n    <path id="VAGOS" class="js-map-target map-target" d="M62.576 97.262h-2.758l-2.233 1.095h-4.422L51.98 99.54h-2.013v-3.153H38.76l-3.226-1.37-3.284 13.324 12.464 13.177 4.64 5.516 5.604 3.24 2.715-1.05.35-7.356 2.714-5.166-2.45-2.276 2.188-5.516-.963-3.152 2.45-3.153z"/>\n    <path id="CANTANHEDE" class="js-map-target map-target" d="M83.8 138.322l-4.975-4.13v-3.097l-10.7 4.412-1.22-9.104 1.784-2.16-2.066-5.818-5.887-1.724-2.714 5.167-.35 7.355-2.715 1.05-5.604-3.24.263 2.803-2.364.35 2.19 2.978-3.153 3.59-.788 5.166-3.59.174-1.14-1.664-5.865.613-9.982-2.977-3.26 13.678 9.95 6.664h7.508l-.657-3.332 14.267 3.38 4.787-.423 3.66 4.974 8.353-3.473.975 5.396 3.155 5.21 3.285-2.816 3.38 2.16.937-5.163-2.158-4.223-3.097-.093-.376-5.444 6.946-.094z"/>\n    <path id="FIGUEIRA_DA_FOZ" class="js-map-target map-target" d="M43.253 174.55l-3.566-7.883-.75-8.26h-7.322l-9.95-6.663L10.498 183l6.194 5.536 1.972 5.35-5.913 20.273 4.692 2.346-.28 3.097 4.41-.28 1.126-1.128 6.946 3.473v-3.003l5.35-3.098 5.63 1.69-2.158-8.54-1.22-2.254 1.502-1.22-3.003-7.133-1.784-.188 1.69-3.942 9.2-5.725 1.782-6.29h-2.44z"/>\n    <path id="MONTEMOR-O-VELHO" class="js-map-target map-target" d="M69.758 185.753l.293-3.922 1.405-1.404v-3.16h-2.282l-1.815-2.225.176-3.862-2.693-4.858.528-1.64v-3.414l-4.188 1.74-3.66-4.973-4.787.422-14.267-3.38.657 3.333h-.187l.75 8.26 3.567 7.883.94 7.416h2.44l-1.784 6.29-9.2 5.724-1.69 3.942 1.5.158 2.34-.562 1.696 1.58h10.36l1.874-1.463h1.814l1.288-1.522-4.975-5.15 2.048-5.62h3.103l3.22 2.517h2.633l9.25 6.32 1.58-1.58-.06-2.516z"/>\n    <path id="CONDEIXA-A-NOVA" class="js-map-target map-target" d="M84.832 216.412h7.696v-1.877l-4.692-4.693v-3.19h4.325v1.952h4.814l.624-2.724-1.686-7.725-2.753-2.135-1.574 1.966h-7.472l-1.096-1.095h-2.05v-4.634l1.292-1.293.618-2.977-1.124-.338-2.19 1.798-6.743-4.438-1.19 5.076.06 2.517-1.58 1.58-.535-.364-.07.125-1.347.675-1.967.28 1.18 2.136-1.853 1.574v5.956l1.91 1.63h2.528l3.653 8.09h6.854l1.63 3.483h2.81z"/>\n    <path id="PAMPILHOSA_DA_SERRA" class="js-map-target map-target" d="M198.327 215.546l1.067-1.066-1.18-1.18 1.416-1.417-1.425-1.425v-5.698h2.062v2.578l3.283 3.283v-1.803l5.38-5.38-1.12-1.12 2.687-1.138v-3.91l-2.03-1.377-.964.964-4.093-4.093v-3.966h-4.093v-3.268l-1.555-1.555-3.142-4.755-1.59 1.59v2.347h-1.21l-1.44-1.438h-2.574l-1.325-1.326v-2.537h-2.157l-2.12 3.786v1.97l-1.438.983v1.74h-5.15l-1.967 4.24h-1.818l-1.892 3.71v1.667h1.287v2.725h2.574v2.878h-3.635l-5.073-2.348h-5.527l-3.786 3.483v3.118l1.81 1.81 2.505 6.43v6.89h-3.03l-4.996 2.877v2.65h-1.288l-.984 1.287.606 1.666-3.256 2.347v3.18h-2.726v2.423l-1.476 1.476.795.795h1.515v-2.802h2.5l.945.946h1.476l.09-.088 1.14-1.142-1.002-1.003v-3.406l1.968 1.968h2.347v-2.423l1.892 1.892h3.104v-4.845l2.612 2.612h2.31l-2.707-2.708 1.913-1.912 2.27 2.272.72-.72v-1.287h2.726l1.816 1.817 2.082-2.082v-2.46h6.55v-.787h2.346l-2.65-5.876 2.272-2.65h1.59l5.148-3.407h1.59l1.477 1.476h3.597l2.95 4.05z"/>\n    <path id="GOIS" class="js-map-target map-target" d="M134.47 205.055l5.128 3.52h1.69l-2.068 9.188v2.852l2.79 2.79v2.46l5.215 5.845-.077.055 3.256-2.347-.606-1.666.984-1.287h1.287v-2.65l4.996-2.877h3.03v-6.89l-2.506-6.43-1.81-1.81v-3.117l3.785-3.482h5.527l5.073 2.348h3.634v-2.878h-2.575v-2.725h-1.287v-1.666l.17-.334h-1.748v-7.39l-3.82-3.473v3.174h-5.903v1.29h-4.216l-6.497-7.788-1.29 1.29h-1.736l-3.522-3.274h-4.216l-1.08 2.518 1.4 1.4v3.1l-1.412 1.415 3.373 6.1-3.09 4.366v3.31l-1.95 1.95v3.26z"/>\n    <path id="COIMBRA" class="js-map-target map-target" d="M110.737 180.98l.845-2.11-3.802-2.254-4.927-7.18 1.056-.704v-2.604l.914-.915-2.957-3.238-3.238.28v-2.25l.985-2.113v-3.8h2.534l1.022-1.69-1.586-1.69v-2.253l-5.49-1.41 1.196 2.043-1.48 1.478v1.83h-3.096l-3.66 1.69.422 4.787-1.55 3.66h-2.533v-2.44h-6.288l2.158 4.224-.938 5.163-3.38-2.16-3.284 2.817-3.155-5.21-.975-5.396-4.165 1.732v3.415l-.527 1.64 2.694 4.858-.176 3.863 1.815 2.225h2.282v3.16l-1.404 1.406-.292 3.923 1.873 4.33 1.19-5.075 6.743 4.438 2.19-1.798 1.125.338-.618 2.977-1.293 1.293v4.635h2.05l1.097 1.096h7.472l1.573-1.966 2.752 2.135 1.022 4.683 4.51-3.74h2.957v-3.616l-3.148-4.224v-1.408h3.15l1.69 1.408v-2.816h-1.83l-1.832-1.736 1.267-2.628 2.675.282v-2.816l2.03 1.408h3.743z"/>\n    <path id="ARGANIL" class="js-map-target map-target" d="M199.342 167.698h-3.933l-.853-1.876-2.525 1.383-7.288-5.55h-3.427l-2.75-.435v-1.35l-3.138.723-1.015 1.255h-.772v-1.16l.893-.892-.737-1.81-1.508.773h-1.16l-.598-.972-2.52 3.6-.726-.725h-2.523v2.147l.805 1.127-2.2 2.738-.806-.912-.86 2.308-1.26-1.26-.833.832-1.61 3.865-.912-.913h-.912l-3.92-7.086-1.34 1.074-.807 2.254h-.913l-.483-1.288h-1.72v-3.008l-.857-.857.43-2.31v-1.448l-1.343.43h-1.88l-2.04 2.576h-4.01v3.665l-2.162 2.16h-4.268l-1.37 1.37 3.168 1.932h1.396l1.208-1.208 1.396 1.395-3.14 3.84 1.45 1.663v3.22l1.108 1.332 1.08-2.518h4.215l3.522 3.274h1.736l1.29-1.29 6.498 7.788h4.217v-1.29h5.903v-3.174l3.82 3.472v7.39h1.748l-.17.335 1.892-3.71h1.818l1.968-4.24h5.15v-1.74l1.437-.985v-1.97l2.12-3.785h2.158v2.537l1.326 1.325h2.574l1.44 1.437h1.21v-2.347l1.59-1.59 3.142 4.755 4.474-5.362v-4.982z"/>\n    <path id="LOUSA" class="js-map-target map-target" d="M115.923 194.837l-3.907 3.906 2.826 3.546v1.575h1.64l4.2 2.43.92 1.97 2.196 1.61h2.247l2.423 2.424 4.09-3.303 1.912-3.942-.07.144v-3.26l1.95-1.95v-3.31l3.09-4.364-3.372-6.1 1.413-1.415v-3.1l-1.4-1.4-1.11-1.33-2.797 1.915-2.43 2.43-6.5 2.363-1.97-1.773-4.66-.59v2.034h-2.3l2.234 3.94-.624 1.378z"/>\n    <path id="VILA_NOVA_DE_POIARES" class="js-map-target map-target" d="M136.662 170.245l-1.396-1.396-1.208 1.207h-1.396l-3.167-1.932.37-.372h-8v1.905l-2.626 1.18-1.568-1.246-1.42 2.166-2.463-1.51-3.152 1.97v1.05l-3.4 2.558.542.79 3.802 2.253-.845 2.11 1.408 1.972 2.17 2.397h2.297v-2.036l4.662.59 1.97 1.774 6.5-2.364 2.43-2.43 2.797-1.915v-3.222l-1.45-1.664z"/>\n    <path id="MIRANDA_DO_CORVO" class="js-map-target map-target" d="M123.798 211.74l-1.37.985-3.07.384-2.74 6.025-18.723-10.53h-.92l.623-2.725-.664-3.042 4.51-3.74h2.957v-3.616l-3.148-4.224v-1.408h3.15l1.69 1.408v-2.816h-1.83l-1.832-1.736 1.267-2.628 2.675.282v-2.816l2.03 1.408h3.743l2.17 2.397 2.232 3.94-.624 1.378v4.17l-3.907 3.905 2.826 3.546v1.575h1.64l4.2 2.43.92 1.97 2.196 1.61z"/>\n    <path id="PENACOVA" class="js-map-target map-target" d="M104.617 147.584l-3.03.875v2.252l1.585 1.69-1.023 1.69h-2.535v3.8l-.986 2.112v2.252l3.237-.28 2.957 3.237-.915.915v2.604l-1.057.704 4.78 6.965-.395-.574 3.4-2.557v-1.052l3.15-1.97 2.464 1.51 1.42-2.166 1.567 1.247 2.625-1.182v-1.905h8l1-.997h4.267l2.16-2.16v-3.665h4.013l2.04-2.576h1.88l1.34-.43.012-1.1-1.184-1.522v-4.057h-1.803l-1.353-1.353h-3.607l-2.423-1.916-1.07 2.198h-1.41l-1.015-1.747-1.747.958-1.24-.79-4.31 2.2v2.225l-1.016-1.015-.705.705h-1.184l-2.366-2.31h-1.747l-4.734-6.2h-4.058v1.634l-2.987-3.494-2 .64z"/>\n    <path id="OLIVEIRA_DO_HOSPITAL" class="js-map-target map-target" d="M201.622 149.537v-1.562l-3.417-.446v-1.936l1.11-2.01v-9.447h-1.86l-2.678.753-3.72-1.72v-4.092l3.422-2.38h2.603l2.01-3.05-4.83-5.507v-3.465l-3.137.7-10.418 7.883.305 1.058-1.636.893-2.902 4.09-2.244 1.563 2.022 4.167 1.413.52 2.456 3.274-2.205 3.645h3.62l-.894 3.57h1.415l-.52 2.605-1.49.297-.073 3.57-3.646-.445-5.505-.67-3.05 2.01 1.637 1.568 1.127 2.813.6.97h1.158l1.507-.772.736 1.81-.893.893v1.158h.772l1.014-1.255 3.136-.724v1.35l2.75.434h3.428l7.288 5.55 2.525-1.382.1.22 1.385-1.476v-2.68l2.163-1.487v-4.24h1.78l2.083-2.456 1.265.595h1.71l1.006-2.903-.336-1.71z"/>\n    <path id="TABUA" class="js-map-target map-target" d="M168.013 161.388l-.725-.725h-2.523v2.147l.805 1.127-2.2 2.738-.806-.912-.86 2.308-1.26-1.26-.833.832-1.61 3.865-.912-.913h-.912l-3.92-7.086-1.34 1.074-.807 2.254h-.913l-.483-1.288h-1.72v-3.008l-.857-.857.43-2.31v-1.448l.01-1.1-1.184-1.523v-4.057h-1.803l-1.2-1.2.446-1.586 2.816.656 4.505-4.6 1.783.283 1.596-2.723 2.16.094 1.5-2.252.75-.89 6.57-.987 2.535-2.815h2.066l3.098-4.317h2.04l1.998 4.122 1.413.52 2.456 3.274-2.205 3.645h3.62l-.894 3.57h1.415l-.52 2.605-1.49.297-.073 3.57-3.646-.445-5.505-.67-3.05 2.01 1.637 1.568 1.127 2.813z"/>\n    <path id="SOURE" class="js-map-target map-target" d="M84.986 219.416l-.085-1.653h-2.81l-1.628-3.484h-6.854l-3.652-8.09h-2.53l-1.91-1.63v-5.956l1.855-1.573-1.18-2.134 1.968-.28 1.348-.675.07-.124.533.365-9.25-6.32h-2.633l-3.22-2.517h-3.102l-2.048 5.62 4.975 5.15-1.288 1.522H51.73l-1.873 1.463h-10.36l-1.698-1.58-2.34.562-1.5-.158 1.785.188 3.003 7.133-1.502 1.22 1.22 2.253 2.144 8.48 9.776.906.563 2.346 4.88 1.783v4.037h4.6l4.598-7.227h6.57v14.267l2.01 2.808 2.45-2.812.662-5.526 4.642.59 5.6-4.883.284-1.896v-2.172z"/>\n</svg>\n'}),define("text!maps/gfx/EVORA.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="BORBA" class="js-map-target map-target" d="M163.144 122.135L160 128.42l1.32 1.32-1.696 2.7 3.897 3.897v3.394h-5.404l-6.913 9.176 1.383 2.765 1.194-1.193 6.85 6.85 2.514-4.022-1.194-1.194 2.384-4.128 8.613-5.612-3.645-10.432v-5.656z"/>\n    <path id="EVORA" class="js-map-target map-target" d="M145.422 207.35l5.28-7.793v-2.765l.647-.87-5.57-.725v-1.482l-2.684.24-1.362-2.244 1.242-1.44-2.363-1.323.68-1.963 4.13-1.843-2.407-3.725-4.166 3.886-2.965-1.842v-2.604h1.683v-1.522h-1.843l-1.242-4.087 3.405-.84v-3.887l-7.25-7.933v-.88l-3.687-6.41h-1.28l-.362-4.248h-2.283l-1.242-2.764-1.362 2.203 1.042 1.042v1.642l-2.724 1.323h-2.644v3.725l-1.643 1.363 1.844 3.005-1.923 2.604v3.164h-4.446v2.765l-1.382-1.383v-2.104l-2.304 1.122v-3.125h-1.362v-3.005h-1.923l-2.885-3.445h-1.2l-.803 2.724H95.06l-.8-.8v2.924l-1.082-1.082v-1.362H87.67v4.078l1.448.724 1.592 3.81v4.342l-1.785 1.254h-1.64l-1.254-2.17v2.315h-1.06l-.772-.772-1.35 1.35v-2.893l-6.03-1.592-.917-.917-1.736 1.592v1.206l1.688.628-1.688 2.026 1.254 5.354h1.69l.674 2.026 2.122 1.978h3.89l2.128 2.08v4.736l-1.25 1.25v1.764h-2.755l-1.464 2.93.895.804v2.36h2.08v3h-1.2l1.56 4.68h3.98v4.6h1.12l7.44-6.2h2.44l1.5-1.08h4.558v3.2l1.58.86-2.86 2.58v2.97h2.21l2.245-1.788v-1.202h2.685v1.562l1.683-1.04 2.123 1.08v1.643l2.285 1.523 1.923-3.205v-1.763l4.447-4.406v-1.364h3.966l2.165-4.166 1.682 1.04h3.326l.96-2.122h2.445v5.37l5.93 3.546h1.804z"/>\n    <path id="REDONDO" class="js-map-target map-target" d="M153.78 150.477l-1.184 1.184.772 1.03v1.3l-4.517-1.235-.91 1.365-3.15-.812h-2.6l-4.158 3.41-3.022-1.526v3.802l-4.373 2.827v.765l7.25 7.933v3.886l-3.404.84 1.242 4.088h1.843v1.522h-1.683v2.604l2.965 1.843 4.166-3.885 2.406 3.726-4.128 1.844-.68 1.963 2.362 1.322-1.242 1.44 1.362 2.245 2.685-.24v1.482l5.57.725 5.933-7.958-5.1-2.928-.895-.894 2.274-3.41v-1.43h2.957v-2.146h2.533l-2.176-7.05v-5.1l1.364-1.366v-3.282h1.236l.812-1.56v-1.813z"/>\n    <path id="VILA_VICOSA" class="js-map-target map-target" d="M194.72 145.69l-1.405-.486 2.81-4.268-.973-1.945v-2.16l-1.35.865-1.568-2.81h-2.377v1.62h-1.566l-.81 1.46-2.323-1.945-1.513 1.89h-1.89v1.892l.756.81-3.35 2.7h-1.404v-1.565l-1.837.972v-1.838l-2.973 1.488-8.613 5.612-2.384 4.13 1.194 1.193-2.514 4.022-.342-.342v1.814l-.742 1.424h2.213v3.92h3.814v-4.816h-2.24v-2.575h9.44l.24 2.05 2.766-1.335-1.097-3.672 4.626-3.433 2.48 3.386 1.406-1.408 2.36 1.12 1.717-2.145 2.05-4.006h2.576v1.336l2.225-.2v-2.16z"/>\n    <path id="ALANDROAL" class="js-map-target map-target" d="M191.756 153.224l2.345-.286 2.997-2.385-1.62-1.945-1.352-.162-2.226.2v-1.335h-2.576l-2.05 4.007-1.718 2.146-2.36-1.12-1.407 1.406-2.48-3.387-4.627 3.433 1.097 3.672-2.766 1.336-.24-2.05h-9.44v2.574h2.24v4.817h-3.815v-3.92h-2.214l-.07.133h-1.235v3.282l-1.363 1.365v5.1l2.176 7.05h-2.534v2.146h-2.958v1.43l-2.274 3.412.894.894 5.1 2.928.08-.106h5.027v2.776l3.267-.377 1.985 2.01h5.18v-1.76l3.016-.502 4.525 3.52v7.177l1.236.498 2.43-1.384 2.098-2.623v-2.575h-1.096l-1.336 1.633v-7.21l.906-.907v-3.482l2.29-2.622v-2.67h1.812l1.62-6.158 2.195-1.234v-1.335h-2.624v-14.45z"/>\n    <path id="VIANA_DO_ALENTEJO" class="js-map-target map-target" d="M105.757 216.456h-2.21v-2.97l2.86-2.58-1.58-.86v-3.2h-4.56l-1.5 1.08h-2.44l-7.44 6.2h-1.12v-4.6h-3.98l-1.56-4.68h1.2v-3h-2.08v-2.36l-.894-.805-.173-1.894-2.11-1.206-1.808 1.723-3.316.818 1.335-2.454-.86-.56-1.336 1.034h-4.866l-2.17 1.55-1.36-1.55h-1.293l-3.463 3.66v2.09l.495 2.674H57.15l1.882 1.685-4.657 6.637h5.647l1.19 2.873 4.26 1.982h5.053l2.972 4.16h1.795V220.5h1.43l1.047 2.2h3.247l.63-1.363h5.028l.628.262 1.415-1.363 1.624.47 2.776 3.878h2.934l2.148-2.672 6.13 2.672 2.147-1.677-.786-1.362 1.782-4.662z"/>\n    <path id="ESTREMOZ" class="js-map-target map-target" d="M121.783 148.283l1.242 2.764h2.283l.36 4.247h1.283l3.687 6.41v.117l4.373-2.826v-3.802l3.022 1.527 4.158-3.412h2.6l3.15.812.91-1.365 4.518 1.235v-1.3l-.772-1.03 1.184-1.183-1.194 1.194-1.383-2.764 6.913-9.175h5.405v-3.393l-3.896-3.896 1.697-2.7-1.32-1.32 3.144-6.285 1.534-1.243-1.317-1.037 2.172-4.567-4.246-1.038-.407-1.66h-3.745l-2.3-2.876-1.386 1.147h-1.313l1.52 2.28v2.347l-2.9 1.658v.967h-4.56l-4.073 3.66v1.243l-1.934 1.657-4.49-2.624-2.347 2.348-3.867-3.798-1.52 1.933.277 1.106-2.9 2.694-2.556-.553-.69 1.865 7.044 2.762-.414 1.796.898.69 1.013-1.45 3.338 1.036.62 2.072-1.173 1.726 1.52 1.727 1.933.69-1.312 1.244 1.38 1.174-.55 1.59.55 2.14-4.626.966-.483-1.795-1.934 1.518-1.243-.553-1.657 2.14-1.38-1.656-2.004.55-2.21-1.587-.207 1.934.308 2.37z"/>\n    <path id="ARRAIOLOS" class="js-map-target map-target" d="M79.583 142.53l-2.062 2.182-.12 2.912-1.335.182.945 1.02v2.558l5.354 4.63v1.16l1.206 1.687 1.69-.964 2.41 3.57v.118h5.508v1.362l1.08 1.082v-2.925l.803.8h3.005l.802-2.723h1.2l2.886 3.445h1.923v3.005h1.362v3.125l2.304-1.122v2.104l1.382 1.382v-2.766h4.447v-3.165l1.924-2.605-1.843-3.004 1.644-1.362v-3.725h2.644l2.724-1.323v-1.642l-1.04-1.042 1.086-1.76-.31-2.37.208-1.933 2.21 1.588 2.003-.55 1.38 1.656 1.657-2.14 1.243.552 1.934-1.52.483 1.796 4.627-.967-.552-2.14.552-1.59-1.38-1.173 1.31-1.243-1.932-.69-1.52-1.726 1.174-1.726-.62-2.072-3.34-1.036-1.012 1.45-.898-.69.415-1.796-6.897-2.705-11.14-2.113.166-2.604-2.005-.167-1.614 2.95-3.006.446-.11 1.28-2.005 1.28-1.84-.277 1.337 3.062-1.002 1.893-1.503-1.058-.987 3.653-6.576 2.698-3.53-1.66-4.566-2.198-2.744 5.103-2.053 2.136z"/>\n    <path id="PORTEL" class="js-map-target map-target" d="M160.202 240.694l1.633-2.177h2.45l1.247-1.18v-1.456l-5.405-2.765-5.844-9.237-1.32 1.32-3.52-10.935h-4.02v-3.1h-1.806l-5.93-3.546v-5.37h-2.443l-.96 2.124h-3.327l-1.682-1.04-2.164 4.166h-3.965v1.363l-4.447 4.405v1.763l-1.923 3.205-2.284-1.522v-1.642l-2.122-1.08-1.683 1.04v-1.562H108v1.202l-2.243 1.788 1.715.428-1.78 4.662.785 1.362-2.148 1.677-.124-.054 3.102 2.106.223 1.69 1.067-.98 7.775 5.155h1.955l1.022 1.245h1.6l1.865-1.777 1.266 1.266 2.556-.11 3.687 2.354 3.288 3.466h1.734l3.02 2 4.667-1.734 3.155 1.333h2.488l3.022 2.266.888-1.156 9.046 1.147z"/>\n    <path id="REGUENGOS_DE_MONSARAZ" class="js-map-target map-target" d="M175.838 190.005l-3.017.503v1.76h-5.178l-1.985-2.01-3.268.376v-2.776h-5.028l-6.66 8.934v2.765l-5.28 7.793v6.914h4.022l3.52 10.933 1.32-1.32 5.843 9.238 5.405 2.766 2.513-2.01v-3.268h3.645v-2.388l-2.765-4.776 1.383-1.383v-3.645l-1.383-1.382 4.65-3.52h2.39v-1.382l-1.573-1.57v-3.71h2.703v-3.015h3.268v-10.306z"/>\n    <path id="MOURAO" class="js-map-target map-target" d="M210.365 239.243l-3.9-5.624-.092-3.267-1.542-2.63-2.085-.182-3.99-6.53v-1.36l-9.707-11.702-.726-2.993-1.633-1.452-.908.108-.272-.832-3.91-1.578-1.237-.498v3.13h-3.268v3.015h-2.703v3.708l1.572 1.57v1.383h-2.388l-4.65 3.52 1.382 1.382v3.645l-1.383 1.383 2.765 4.776v.223l1.756-1.984 1.088-2.087h4.173l2.63-3.447 1.905.907 1.18-1.724h1.904l.817-1.088h1.36v2.358l2.54 3.175v2.72l2.994 4.355 5.987 1.18-1.09 3.81 4.9 10.16.907 1.087.383.013v-3.446h2.89v-2.262h2.805z"/>\n    <path id="MORA" class="js-map-target map-target" d="M72.93 107.648l-5.353 6.17-1.338-1.263.168.16-.11.09-1.82 1.64.79 1.333-1.092 4.883-3.397 4.702 7.58 4.004.123 1.94 1.395-1.09 1.03 1.212 1.032-1.274 2.972 2.427-3.58 2.063.123 2.305 2.608 1.213 1.03 4.005 1.397-2.063 3.093 2.427-.516-.406 2.053-2.136 2.744-5.103 4.567 2.197 3.53 1.66 6.575-2.697.987-3.653 1.503 1.058 1.002-1.893-1.336-3.062 1.84.278 2.003-1.28.11-1.28 3.008-.446 1.615-2.95-3.676-7.183-3.598-.97-2.214 3.6-7.75 1.245 1.66-6.09-2.628-1.522-4.15-3.598-2.077 1.107-.415 3.736-1.8 2.214-1.106-2.49-.97-3.598 2.354-1.108.277-2.214H79.02v2.49h-2.074l-1.028-1.946-1.278 1.156z"/>\n    <path id="VENDAS_NOVAS" class="js-map-target map-target" d="M47.123 159.806l-8.48-4.933.987-2.48-2.56-.32-1.306-.933-2.773.32-.518-.667-.09-.002-2.446 2.382v1.268l1.134.934v1.735l-2.335.733-1.335 2.67-3.603 2.402-2.402.734v1.133l-3.07 3.537h-1.437l-1.027 1.732-1.704.965-.17 1.63-3.168 2.3 2.532 8.965 3.572-.452 2.96 1.677 1.895-1.677v-3.737l-1.05-2.666 8.45-7.306h1.307l1.067-1.865h.64l.96 1.653 1.76 1.626h1.014l1.546-2.373.64.748h.88l.96-.88 2.053 1.813h1.92l1.333-3.6 1.307.855v-3.04l-.294-1.227.853-1.333z"/>\n    <path id="MONTEMOR-O-NOVO" class="js-map-target map-target" d="M89.118 166.386l-1.447-.724v-4.196l-2.41-3.57-1.69.965-1.206-1.687v-1.158l-5.354-4.63v-2.558l-.945-1.02-3.518-1.942.303-3.033h-1.698l-.364 1.213-1.76-.607.97-1.82-2.97-3.032-2.792 1.94-3.396-2.668 1.395-1.88H60.78l-3.944-3.943-1.03 3.76-1.336-2.486-3.336 3.577-4.125-2.972-1.275 1.153.97 1.577-3.578 2.73-1.395-.547v-1.76l-2.85 1.882v1.82l-4.065 3.336-.728-1.94h-2.973l-5.642 6.914 4.66-.512 2.337.8v1.335l-2.536 2.47 2.445-2.382.092.003.52.667 2.772-.32 1.306.933 2.56.32-.986 2.48 8.48 4.933v2.32l-.855 1.332.293 1.227v3.04l-1.307-.854-1.333 3.6h-1.92l-2.053-1.812-.96.88h-.88l-.64-.747-1.546 2.374H34.91l-1.76-1.626-.96-1.653h-.64l-1.066 1.866h-1.306l-8.452 7.307 1.05 2.666v3.737l.398 4.16h5.45l.098 2.974 3.072-2.576-2.08-3.072 3.764-.99v2.675h1.387l.99 1.685-.197 1.387h1.288l2.18-2.18 1.585.99h2.478l1.288-2.08 4.36-1.98 7.728 14.762h-1.486v2.675h4.954v-2.09l3.463-3.66h1.292l1.36 1.55 2.17-1.55h4.867l1.335-1.034.86.56-1.334 2.455 3.316-.817 1.808-1.723 2.11 1.206.173 1.895 1.464-2.928h2.756v-1.765l1.25-1.25v-4.736l-2.13-2.078h-3.89l-2.12-1.978-.676-2.026h-1.69l-1.253-5.354 1.688-2.026-1.688-.627v-1.205l1.737-1.592.917.917 6.03 1.592v2.894l1.35-1.35.772.77h1.06v-2.314l1.255 2.17h1.64l1.785-1.254v-4.34z"/>\n</svg>\n'}),define("text!maps/gfx/FARO.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="VILA_DO_BISPO" class="js-map-target map-target" d="M34.608 194.466h-2.16v-1.8l-3.962-3.12-6.002 2.4-2.04-.6-4.082 7.802-2.16.84v4.322l-2.64 1.56v2.64L10 211.273h3.6l2.522 3.48 2.88-1.56 1.32-1.32 4.803-3.96h1.8v-1.802l10.684-1.8v-6.243z"/>\n    <path id="ALJEZUR" class="js-map-target map-target" d="M50.694 155.693l-1.44-2.76H43.49l-3.36-5.763h-2.88l-1.656-.742-8.908 18.148h-1.32v4.442h.9v2.46l1.5 1.5-5.762 11.525h-2.16l2.16 4.44-1.374 2.734.174-.332 2.04.6 6.002-2.4 4.442-3h1.56l2.64-1.922v-3l3.002-2.042v-4.68h2.4v-5.282l-1.32-2.4 8.403-9.364z"/>\n    <path id="LAGOS" class="js-map-target map-target" d="M53.094 185.343l-4.2-3.36h-1.56v-2.822H43.25v1.382h-1.92l-.91-.912-2.93 1.992v3l-2.642 1.922h-1.56l-4.442 3-.238.096 3.84 3.026v1.8h2.16l3 3.6v6.244l2.522-.72 2.76-1.8h5.283l2.64 1.08v-4.803l2.642-1.44h3.24z"/>\n    <path id="SILVES" class="js-map-target map-target" d="M110.545 163.46v-1.513l-.07-.012-7.924-6.602h-3v-2.76l.86-1.148-.967-.785v-2.577h-3.568l-1.652-1.586v2.378l-1.256.33-1.586-1.123h-2.377l-1.19.86-.867-.28v.33l-6.002 1.32v5.04h-2.88v1.747l3.736 2.48-.793 1.454.86 1.322-1.19.264v2.71l-1.917 1.784 1.652 1.784h-1.09v2.28l-.892-.893-2.974 1.388v1.586l-3.436 3.766h-1.454l-1.784-1.388-.86 1.388h-.13v2.048h1.386v4.03l1.322 1.917h1.322l1.85 1.72v.792l2.775-.264 1.52 3.172h-.925v1.52l2.18.132 2.247.53 2.18-.2 2.577-.667 1.19 4.236-1.85.067v1.387l2.71 1.785 1.98.527 2.71 1.85 1.585-4.295 1.125-4.163 4.823.263 3.767-1.32-1.057-1.983.33-4.626 1.652-3.9.264-3.633 4.164-7.466h1.32l1.19-1.256-2.51-4.295z"/>\n    <path id="MONCHIQUE" class="js-map-target map-target" d="M81.007 161.014l.793-1.454-3.737-2.48v.054l-7.023-1.86-1.02 1.02-6.842-5.522-1.56 1.8h-5.162l-1.44 3.96h-1.08l-2.162-3.6h-2.52l1.44 2.76-.72 2.162-8.403 9.363 1.32 2.4v5.283h-2.4v4.68l-2.9 1.974 2.83-1.924.91.912h1.92v-1.38h4.083v2.82h1.56l.172.137.29-1.546h1.123v-3.436l1.32-.463 1.06.793v1.586h.924l1.652-1.982v-2.71l1.52-1.586h1.916l.53.53.66-1.455.792.794v1.85l2.686 2.512h4.385l.86-1.388 1.783 1.388h1.454l3.436-3.767v-1.587l2.974-1.388.892.893v-2.28h1.09l-1.652-1.784 1.916-1.785v-2.71l1.19-.264z"/>\n    <path id="PORTIMAO" class="js-map-target map-target" d="M73.672 187.512v-.793l-1.85-1.72H70.5l-1.322-1.915v-4.03H67.79v-2.05H63.54l-2.686-2.51v-1.85l-.793-.794-.66 1.455-.53-.53h-1.916l-1.52 1.587v2.71l-1.652 1.982h-.925v-1.586l-1.058-.793-1.322.463v3.436h-1.124l-.29 1.545 4.03 3.223 3.602 11.284h4.156l1.52.73h1.586v-1.122l3.833.53v1.915h.992v-3.106l-1.123-1.454.593-1.123 3.106-1.262v-2.108h1.717l1.31-2.183z"/>\n    <path id="VILA_REAL_DE_SANTO_ANTONIO" class="js-map-target map-target" d="M195.947 188.806l-8.31 4.462V175.98l4.295-1.227.39 8.477 2.565 3.68 1.06 1.896zm12.268-2.453l-.613-3.904-.836-.726h-.837v1.06l.334.892-1.032.28-.92-.67h-1.115v1.895h-2.733l-.614.67v1.506l.614.446 4.35-.278 3.736 1.003.39 1.116 1.06-.614-1.785-2.677z"/>\n    <path id="ALCOUTIM" class="js-map-target map-target" d="M203.712 153.52l-2.363-2.058-.305-1.295 2.133-.305v-1.22l-1.37-.99v-3.277l-1.602-2.362v-2.134l.61-1.297-2.134-.838-1.295-2.515.152-1.448-2.973-.61h-4.115l-2.058-.533-1.372.075v1.905h-2.59v1.982h-2.516v2.134l-2.743-1.753-1.448 1.22-1.524-1.525-5.944.38-5.334 3.126-1.448-1.22-.457 1.6-6.783 4.04-1.524.533h-2.44v1.982l-2.36-.46-.84 1.602-1.024-.26v2.115l1.1 1.65-1.1 1.524 1.406 2.135 3.962.534 5.26.685 1.447-1.372 3.43 1.295 4.496 7.47-.076 4.266h5.335l.686 3.2.61.763 1.524-.838h1.525l.76.76 1.45-.685.532-1.372v-5.868l.762-.61 1.83-5.486-.99-.916.837-1.143 2.897-.15 2.515-2.288 7.85 3.05v-1.297l2.82 2.058 5.028-.076z"/>\n    <path id="CASTRO_MARIM" class="js-map-target map-target" d="M207.14 179.507l-.99-2.21-1.225-.915.235-2.21 1.22-1.37-.382-1.45-1.295-1.37-1.067-4.802.457-2.134-1.067-1.905 1.143-1.6-.23-2.133-5.03.076-2.82-2.058v1.296l-7.848-3.048-2.515 2.287-2.896.15-.837 1.144.99.915-1.83 5.486-.76.61v5.867l-.08.207 1.45.708 3.887 4.04 1.753-.458.395 1.304 4.134-1.18.39 8.476 2.565 3.68 1.06 1.896 4.272-1.182-.37-.268v-1.505l.614-.67h2.733v-1.895h1.115l.92.67 1.032-.28-.335-.892v-1.06h.836l.445.387.007-.24z"/>\n    <path id="TAVIRA" class="js-map-target map-target" d="M187.638 175.98l.16-.046-.395-1.304-1.753.457-3.886-4.04-1.452-.707.08-.207-.533 1.372-1.45.686-.76-.76h-1.526l-1.524.837-.61-.762-.685-3.2h-5.335l.076-4.268-4.496-7.47-3.43-1.294-1.447 1.372-5.26-.686-3.96-.535-.134-.2-.63 1.572-2.44 3.43.915 1.6-1.067.838v2.286l-1.295.763v2.134l3.658 2.896v1.98h-1.904l1.295 2.364h1.45l1.218-1.372h1.677l1.296 1.372h7.012v1.295l-2.82 4.65h-2.286v1.523h.762v1.455l.95.95-.645.644-2.287-.61v2.058l1.525 1.524v3.886h-1.22v1.448l2.06.84v.99h7.24l2.21 8.306 2.742 2.82 13.49-9.22 5.416-4.632z"/>\n    <path id="FARO" class="js-map-target map-target" d="M154.994 214.496l-1.495 1.09h-1.05l-4.242-3.473v-7.916l.444-.444 1.172.93h1.817l3.838-3.555v-1.212l-1.918-.767v-.708l.626-.626v-2.077l-3.272-1.6-1.454.97h-1.17l-2.788.484-1.212-1.736h-1.858l-.605-1.13h-2.303l-3.998 3.27h-.767l-1.294 1.252v1.373l1.878 1.88h1.717l1.293 3.25v1.212h-1.413v2.26h-1.616v1.375l.93.93v2.34l-2.06 1.82 12.56 7.47h2.95l.867-.868 2.848-2 4.968-3.35-.808-.446z"/>\n    <path id="LAGOA__ALGARVE" class="js-map-target map-target" d="M85.566 197.424v-1.387l1.85-.066-1.19-4.235-2.576.667-2.18.2-2.247-.53-2.18-.132v-1.52h.924l-1.52-3.172-2.06.196-1.31 2.183H71.36v2.108l-3.107 1.262-.594 1.123 1.122 1.454v3.106l3.146 1.04 6.52 2.33 6.803-.82 2.855-2.134z"/>\n    <path id="LOULE" class="js-map-target map-target" d="M134.193 213.69l2.06-1.82v-2.34l-.93-.93v-1.374h1.617v-2.26h1.413v-1.213l-1.292-3.25h-1.716l-1.878-1.88v-1.373l1.293-1.252h.766l3.998-3.27h1.414v-2.95h-1.494v-3.716l-1.293-1.858 1.455-1.09v-1.858l3.23-1.333 1.334 1.94h1.17l.324-2.95-.97-2.504 3.157-1.323-1.294-2.363h1.905v-1.98l-3.657-2.897v-2.134l1.295-.762v-2.285l1.067-.838-.914-1.6 2.44-3.43.63-1.573.132.2-1.406-2.133 1.1-1.523-1.1-1.65v.054h-1.32l-1.08 1.082h-4.802l-7.322 2.28v2.88l1.2 2.402-9.243 7.083-1.202-1.68-13.733-2.27v1.512l-.925 1.453 2.51 4.295-1.19 1.256h-1.32l-4.164 7.467-.248 3.412 6.216 3.04h2.11l1.417 2.235-1.762 5.386-1.86 1.48.883.882-.503 1.228h-2.11l1.512 2.74h4.408l-.88.85v.977l4.66 4.158-3.497-1.355 3.3 1.48 2.532.663 12.423 8.684.224-.05z"/>\n    <path id="ALBUFEIRA" class="js-map-target map-target" d="M114.637 200.16v-.976l.88-.85h-4.408l-1.513-2.74h2.11l.504-1.23-.88-.88 1.858-1.48 1.763-5.387-1.416-2.236h-2.11l-6.216-3.038-.016.223-1.652 3.9-.33 4.625 1.057 1.982-3.767 1.32-4.823-.263-1.125 4.162-1.585 4.295-.122-.083.028.083 3.4 2.447h2.552l4.032-2.11h2.394l2.646-.283 3.843-.25 7.558 2.928z"/>\n    <path id="OLHAO" class="js-map-target map-target" d="M163.78 195.74H154.185v2.076l-.626.626v.707l1.918.766v1.212l-3.837 3.554h-1.816l-1.172-.93-.444.445v7.916l4.24 3.474h1.05l1.496-1.09h2.584l.808.444 10.346-8.074-2.743-2.82z"/>\n    <path id="SAO_BRAS_DE_ALPORTEL" class="js-map-target map-target" d="M149.46 195.11l1.454-.97 3.272 1.6h2.353v-.99l-2.06-.84v-1.448h1.22v-3.886l-1.524-1.524v-2.058l2.287.61.644-.645-.95-.95v-1.455h-.76v-1.524h2.285l2.82-4.648v-1.295h-7.01l-1.297-1.372h-1.677l-1.22 1.372h-1.447l-3.156 1.322.97 2.504-.323 2.948h-1.17l-1.334-1.94-3.23 1.334v1.858l-1.455 1.09 1.294 1.858v3.716h1.494v2.95h.89l.604 1.13h1.858l1.212 1.736 2.787-.484z"/>\n</svg>\n'}),define("text!maps/gfx/GUARDA.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="SABUGAL" class="js-map-target map-target" d="M211.247 252.072l-6.842-6.625-4.67-5.974-1.412-9.23 2.824-5.214-7.385-3.042-9.666-1.52-.652-3.367-4.56-1.628-2.173 1.194-6.95 8.146-2.606-1.738-3.693-10.535-2.93-1.413-.87-4.344-3.04.76-1.196 3.26 1.738 3.583-.326 4.452 2.824 5.322.108 4.78-6.082 3.474.543 1.846-3.476-.325-1.086 3.584-6.516 4.126-5.322-1.847 1.195-1.956-3.04-2.172-5.323.652-1.303 4.56-1.848 1.196-4.018-2.715-2.498.434-1.955 3.04v17.377l-6.732 8.58-4.562 2.172 1.955 3.366 4.345 1.955 4.78.978h3.15l3.257 2.28 2.063-3.04.543-1.955 4.78-1.738 3.692 2.716 1.194.218 1.63 1.303 5.973-4.56.543-6.408 3.258-3.15 2.824 1.738-.11 3.04 2.282 3.476-1.195 1.52.976 1.413 12.273-.653.542-2.498 1.195.216 11.512 8.254 14.443-.76 2.824-5.54-.543-4.234 7.71-6.95 5.65-.98-.22-6.84z"/>\n    <path id="FIGUEIRA_DE_CASTELO_RODRIGO" class="js-map-target map-target" d="M196.316 120.614v-6.17l-2.057-5.784-13.498-15.426.58-2.175-.29-1.09-5.418.265-.925-2.115-2.91 2.38.33.938-.33-.014-.78-.11 1 2.306-2.994 7.327-9.366 4.628-6.92-1.8-3.6.257 1.157 6.94v6.172l-1.67 1.67v6.556l-3.086 3.47 2.957 4.5v2.828l2.57 1.028v1.8l5.4 3.6h6.684l2.315 2.056v4.5l5.4.9v4.498l3.34 1.285-.256 2.185 2.827.643 5.656-6.556 2.828 2.828 10.413-4.627 5.528-.514 1.03-2.57v-3.986l-.9-1.67v-6.814l3.855-.514v-8.613l-4.242-.257z"/>\n    <path id="VILA_NOVA_DE_FOZ_COA" class="js-map-target map-target" d="M152.74 103.775l6.92 1.8 9.366-4.628 2.995-7.327-1-2.307.78.11-2.774-.395.53-1.85-4.36-2.34-.61 1.428-6.217-2.548v-2.65l-10.09-5.502v-5.503l4.28-3.975-.61-3.617h-7.49l-1.58-1.58 3.77-1.935v-7.54h-2.854v4.584l-6.216 2.24v6.727h-6.217l-1.63-2.038h-4.79l-3.27-2.626-6.858 2.443-4.04-1.598-3.664 7.14-1.127 8.737-1.785 4.604 1.503 8.362 6.296 2.537h7.61l2.35 2.347 3.1-3.006v-4.884h5.918l5.543 5.45.376 1.596h-3.382v3.664l3.57 4.603v3.85h-1.878v4.04l-1.69 1.692h6.857l2.817 4.604v-7.516l5.953-6.938z"/>\n    <path id="PINHEL" class="js-map-target map-target" d="M163.28 196.455v-7.97l2.57-3.085v-2.956l2.443-4.885-.643-9.384 10.027-7.2-.9-2.313-2.828-.643.256-2.185-3.342-1.285v-4.5l-5.4-.9v-4.498l-2.313-2.057h-6.683l-5.4-3.6v-1.8l-2.57-1.027v-2.828l-2.956-4.5 3.086-3.47v-6.555l1.67-1.67v-6.172l-1.156-6.94-5.953 6.937v7.516l-6.324 7.255v7.267l-4.505 4.36.582 1.453-1.817 2.688v4.505l-2.906 1.38v6.032l4.723 2.034 1.235 2.615-2.69 5.74-1.96.072v-2.76h-5.668v4.432l-2.76 3.995v3.705l-.945 2.108h4.286l.727 1.96h2.398l2.325-4.068.8-.8 1.053-1.052v8.03h2.29l.435 3.63-.726 2.036 1.234 1.235v1.888l-1.163 1.163v4.65l1.6 1.454h3.85v-7.63h4.288l3.705-2.905 2.652 2.65-.98 4.178.58 3.997h2.907l3.488 2.98 3.415-2.472 2.422 1.448z"/>\n    <path id="ALMEIDA" class="js-map-target map-target" d="M199.9 158.663l.887-8.83-5.114.475-10.412 4.627-2.827-2.828-5.656 6.556.9 2.314-10.027 7.2.643 9.382-2.442 4.884v2.956l-2.57 3.085v7.97l-1.543 1.286 1.286 4.243-3.363 4.8.87 4.344 2.93 1.412 3.694 10.534 2.606 1.738 6.95-8.146 2.173-1.194 4.56 1.63.653 3.365 9.666 1.52 7.385 3.042 3.754-2.605v-2.66l2.985-2.986-1.452-10.163-9.194-4.84 2.58-2.58v-2.904l7.258-16.13-1.29-1.29-1.452-13.067z"/>\n    <path id="TRANCOSO" class="js-map-target map-target" d="M121.096 169.555l2.76-3.996v-4.434h5.67v2.76l1.96-.07 2.69-5.74-1.236-2.617-4.723-2.035v-6.03l2.906-1.382v-4.505l.29-.426-21.173-13.59-2.18 2.804-3.428-.312.78-8.567h-9.347l-4.88-5.296-.76 1.012-2.442 6.824 2.864 2.106 2.696 2.106-9.1 15.585-.122-.14-.094 1.793-2.18.78 1.713 4.205 6.074 4.362v5.297l-6.543 7.01 7.323 7.008 3.894-4.36 21.808-.313-.31 2.804 3.737-1.09 1.354.875z"/>\n    <path id="MEDA" class="js-map-target map-target" d="M132.94 138.82l-.582-1.453 4.505-4.36v-7.266l6.324-7.254-2.818-4.604h-6.86l1.692-1.69v-4.04h1.88v-3.853l-3.57-4.604v-3.664h3.38l-.375-1.597-5.543-5.45h-5.92v4.886l-3.1 3.007-2.348-2.348h-7.61l-5.672-2.287-1.847 2.692-7.633-.467 1.402 3.414-.935 1.726 10.438 4.424-1.402 9.752-5.452 1.402-3.598 6.23h8.115l-.778 8.568 3.427.312 2.18-2.804 21.172 13.59z"/>\n    <path id="AGUIAR_DA_BEIRA" class="js-map-target map-target" d="M89.834 158.253v-3.5l-6.075-4.362-1.715-4.205 2.18-.78.096-1.793-12.007-13.76h-8.256l-4.212 4.466-1.938 5.476-2.81 3.275v2.96l-3.74 5.918 7.945 3.272 3.27 4.984-5.918 4.83v2.037l7.033 6.492h4.353l.945.944L71.49 172h4.682l.74.74 4.352-3.696-1.232-4.846 1.643-1.56.082-1.972h4.928z"/>\n    <path id="FORNOS_DE_ALGODRES" class="js-map-target map-target" d="M74.412 198.764l2.025-3.822 2.18 1.87 3.84-2.65-2.28-4.828 2.28-1.09 5.663-6.698-.31-3.116 2.49-3.583v-1.077l-7.01-6.71 6.544-7.01v-1.797l-3.15 2.413h-4.927l-.082 1.972-1.643 1.56 1.232 4.846-4.353 3.696-.738-.74H71.49l-2.505 2.506-2.67 2.34v3.944l1.233 1.232-3.45 3.45v2.875l-4.764 10.842v2.79l.944.946 4.23-5.052 5.586-3.532v3.122h1.068l-1.232 1.232v2.628l-1.315 1.314 4.084 3.987 3.27-3.583z"/>\n    <path id="MANTEIGAS" class="js-map-target map-target" d="M60.373 266.798h1.194l1.755-1.3h7.057v-2.843l2.948-3.3v-6.108l5.37-6.355 6.18-2.317v3.932h3.054l1.37-1.064v-8.382l2.04-2.038-2.614-2.926v-4.18L85.7 233.93h-6.9l-1.97-1.807-2.547.904v1.888H71.49l-1.232-.33v2.958l-7.146 1.725v.74l.904.776-3.78 7.767-1.477 4.435v5.832l-2.958 5.204h2.78z"/>\n    <path id="GOUVEIA" class="js-map-target map-target" d="M86.115 229.915l-6.407-21.576-7.01-1.715-4.083-3.987 1.315-1.314v-2.628l1.232-1.232h-1.068v-3.122l-5.585 3.532-4.232 5.052-1.236.79-5.607 1.144-2.18-1.246-6.648 2.492v2.077h-2.492l-1.142 1.142H37.65l-2.7 2.908-.214.09-.41 4.79-1.454 3.22-2.492 2.18 1.142 1.144h5.712l7.27 4.154v3.635h4.673l3.22 9.035h4.672l2.967 8.675.2-.602 3.78-7.767-.905-.775v-.74l7.146-1.724v-2.957l1.232.328h2.793v-1.89l2.546-.903 1.97 1.807h6.9l3.028-4.017z"/>\n    <path id="GUARDA" class="js-map-target map-target" d="M159.66 224.16l-2.824-5.322.326-4.452-1.738-3.584 1.195-3.26 3.04-.76 3.363-4.8-1.286-4.24-2.422-1.45-3.415 2.472-3.488-2.98h-2.906l-.58-3.996.98-4.177-2.653-2.65-3.705 2.905h-4.287v7.63h-3.85l-1.6-1.454v-4.65l1.164-1.162v-1.89l-1.235-1.234.725-2.035-.436-3.633h-2.29v-8.03l-1.053 1.054-.8.8-2.324 4.07h-2.398l-.727-1.962h-4.286v10.54h-7.487l-4.18 8.153-1.255 7.005-7.63 10.243-10.036-2.717-6.83 9.943 3.38 11.382h2.614v4.18l2.613 2.927-2.037 2.04v8.38h1.83l2.717 2.438h4.39l4.18-3.554 3.033 3.135v-5.225l4.285-2.822 3.032 3.03 1.986-3.657 4.285 2.054 1.956-3.04 2.498-.435 4.018 2.715 1.847-1.195 1.302-4.56 5.322-.653 3.04 2.172-1.194 1.955 5.322 1.846 6.516-4.127 1.086-3.585 3.475.325-.544-1.846 6.082-3.475z"/>\n    <path id="CELORICO_DA_BEIRA" class="js-map-target map-target" d="M119.742 171.11l-3.738 1.09.31-2.805-21.807.312-3.894 4.36-.312-.297v1.077l-2.49 3.583.31 3.116-5.664 6.698-2.28 1.09 2.28 4.83-3.838 2.647-2.18-1.868-2.026 3.822 1.558 4.278-3.27 3.583 7.008 1.714 3.014 10.148.042.003 6.8-9.9L99.6 211.31l7.63-10.243 1.254-7.004 4.18-8.152h7.488v-10.54l.944-2.108v-1.275z"/>\n    <path id="SEIA" class="js-map-target map-target" d="M60.037 249.155l-2.968-8.675h-4.674l-3.22-9.035h-4.673v-3.634l-7.27-4.153h-5.71l-1.143-1.143 2.492-2.18 1.454-3.22.41-4.79.213-.09-6.334 2.668-.936.29-4.985 4.05H15.84l-.35 2.812-.695.154v3.835l5.343 6.09-2.223 3.377h-2.88l-3.788 2.634v4.527l4.116 1.905 2.964-.834h2.058v10.456l-1.23 2.223v2.14l3.782.493v1.728l4.527.166.372 1.893-1.113 3.21H24.83l-1.4-.66-2.304 2.718h-1.97v4.692l-2.393 1.646v2.964l-1.534 1.632.833 1.834h4.35l3.204 6.565 1.755-1.614h6.705l9.198-8.6h4.88l7.987-7.41v-1.737l1.35-1.352v-2.704h.31l2.957-5.204v-5.832l1.477-4.435z"/>\n</svg>\n'}),define("text!maps/gfx/LEIRIA.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="OBIDOS" class="js-map-target map-target" d="M70.34 216.918v-3.703l-5.306-.3-1.352-1.702-6.406-1.902-2.852 1.102v-1.15l-1.3-2.703v-1.403h-2.3l-.3.416-7.574 6.556.177-.154 3.39 6.193 1.6 7.256-.242.13 1.444 2.222h1.117l.584-2.102h2.753l3.078-3.078h3.28v1.877l1.982 1.983h1.72v-2.333l2.603-.95 1.6 1.6h1.102v-1h2.253v-.95h4.654v-1.953z"/>\n    <path id="PENICHE" class="js-map-target map-target" d="M13.61 206.07v1.21l-1.157 1.157H10.82v-1.36l1.714-1.713 1.075.707zm32.907 12.1l-3.39-6.194-5.376 3.035h-1.638v1.697H31.76v-1.938h-4.24l-2.014 2.014v1.9h6.932v4.975l3.137 3.135v3.335h5.236l1.252 1.15 1.452-3.05h1.8v-1.303l2.804-1.5-1.6-7.258z"/>\n    <path id="CALDAS_DA_RAINHA" class="js-map-target map-target" d="M84.313 218.868l2.703-5.87-4.417-3.89v-1.713h1.45l2.703-3.033v-3.824H82.73l-5.142-3.495H73.5l-3.1 3.165-3.23-1.253v-2.637l-4.08-5.234-.02.02h-2.09l-10.156 14.053h2.3v1.402l1.3 2.7v1.152l2.852-1.1 6.406 1.9 1.352 1.702 5.305.3v3.704l5.704 3.954v1.952H71.39v.95h-.09l.55 1.357v4.155l1.452-.132 1.912-2.505h3.1l2.373 4.022h3.296l1.187-1.12.99-3.825-1.847-2.044z"/>\n    <path id="MARINHA_GRANDE" class="js-map-target map-target" d="M84.906 153.856h1.78l2.704-2.77v4.023l4.22 3.296 2.373-2.374v-1.978l2.308-2.307h1.65l2.57-3.76v-1.383l1.353-2.638v-1.285l-1.616-1.615h-4.483v-3.428l1.582-3.033v-2.506l-2.176-1.846-1.978-2.77V126.1h1.978l2.967-1.516v-1.517l-2.044-.46v-1.386h-3.23V123h-1.12l-1.32-1.45H89.47L79.376 148.36z"/>\n    <path id="BOMBARRAL" class="js-map-target map-target" d="M69.625 230.51v2.252h-2.592v5.32l-3.275 3.344-1.09-1.092-4.196 3.904-.845-.845v-1.702l-2.127-2.126v-1.626h.926v-2.453l1.55-1.55-1.95-3.004v-3.152h-5.589l.584-2.102h2.753l3.078-3.078h3.28v1.877l1.982 1.983h1.72v-2.333l2.603-.95 1.6 1.6h1.102v-1H71.3l.55 1.356v3.89l-.724 1.49z"/>\n    <path id="NAZARE" class="js-map-target map-target" d="M86.82 165.065h-5.404l-1.876 2.242h-1.69l-1.86-1.978h-1.514l-1.854 5.315v2.967h1.526v1.876l-6.507 8.632h2.955l.993 4.88 2.242 1.252h1.288l1.373-1.196v-3.617l-1.272-1.242v-5.226l4.287-.646h3.413l1.156 1.204 2.4-2.333v-3.384l-1.37-2.022h2.376v-3.37l1.91-2.102z"/>\n    <path id="ALCOBACA" class="js-map-target map-target" d="M98.61 179.752l-4.388-10.655 3.21-1.243v-2.897h-.79v-2.468l-3.028-1.68v-2.408l-.004.004-4.22-3.297v-4.023l-2.703 2.77h-1.78l-5.532-5.495-1.214 3.264v5.092l-3.684 8.61h1.513l1.86 1.98h1.69l1.876-2.243h5.403l2.57 1.253-1.91 2.102v3.37h-2.376l1.37 2.023v3.384l-2.4 2.333-1.156-1.204h-3.413l-4.287.646v5.226l1.273 1.24v3.618l-1.372 1.196H73.83L71.588 189l-.993-4.88H67.64l-3.503 4.093v1.49h1.724l-1.645 1.644-.39-1.175h-.863l-.55.912v.02h.66l.018-.02 4.08 5.234v2.637l3.23 1.253 3.1-3.165h4.088l5.143 3.495h4.023v3.824l-2.704 3.033H82.6v1.714l4.416 3.89 1.408-1.44h3.134l6.425-12.535 2.507-9.166v-3.605l3.37-5.25-2.665-2.663z"/>\n    <path id="POMBAL" class="js-map-target map-target" d="M159.62 121.22l-5.407-3.354v-1.236l-5.64-7.88V97.008h-5.408l-3.785 5.948h-3.785v-3.322l-4.018-1.468-.463-1.93-8.047-.746.012.05-4.636-1.39-4.403 2.55v2.47l-5.716-2.858-.927.927-3.63.23.23-2.548-3.862-1.932-5.33 14.37 8.575 4.635 15.76 8.266 4.48 11.126 2.55.695 2.935-.617 8.807 6.644.386 1.468 1.7.386 1.93 2.32 7.418-4.096 2.935-5.33 2.32 2.472 4.016-3.71-.772-4.634z"/>\n    <path id="LEIRIA" class="js-map-target map-target" d="M130.264 152.4h1.622l-2.008-4.945v-4.48l8.42-3.4-.386-1.468-8.807-6.644-2.935.618-2.55-.694-4.48-11.125-15.76-8.265-8.576-4.635-5.333 14.19h2.953l1.32 1.45h1.12v-1.78h3.23v1.384l2.044.46v1.518l-2.967 1.516h-1.978v1.385l1.978 2.77 2.176 1.845v2.506l-1.582 3.033v3.428h4.483l1.616 1.616v1.286l-1.352 2.638v1.384l-2.57 3.76h-1.65l-2.307 2.306v1.978l-2.37 2.37v2.408l3.03 1.68v2.467h.788v2.547l5.563-2.59v-3.245l5.485-4.48h3.013l2.164 3.707H124.934l2.01 6.566 7.647-4.326 2.163-6.103-6.49-2.24z"/>\n    <path id="BATALHA" class="js-map-target map-target" d="M128.796 178.82l.155-6.567-2.008-4.79-2.01-6.566H113.655l-2.163-3.708h-3.012l-5.485 4.48v3.244l10.892 4.944 2.473-.772 3.09 3.708 1.855-.54 3.012 6.797v1.238l4.404 3.012 2.626-2.085z"/>\n    <path id="ANSIAO" class="js-map-target map-target" d="M174.56 118.572l4.307-2-1.39-6.288-3.888 4.236h-5.106v-1.252h2.023v-2.89h2.312l-3.565-4.72v-3.082l-2.89-5.49-2.12 1.734 1.5 1.5v2.45l-4.292-3.665-.234 1.56-4.61 4.02-3.82-.486-.547 4.547-2.015 2.315 3.985 5.568v1.236l5.408 3.353-1.365 4.43 4.237.988.91-1.576h1.577l4.426 2.668 2.366-1.88 1.03 1.395h2.305l-.788-3.154 1.515-2.303z"/>\n    <path id="FIGUEIRO_DOS_VINHOS" class="js-map-target map-target" d="M185.772 138.906l-1.072-1.572 1.144-2.86h2l-1-4.645h6.005l1.5-1.717.166.197v-1.995l-3.022-5.864h-1.67v-5.23l.407-4.6 1.49-1.22 1.172-2.345-.496-6.044v-3.607l3.225-3.225.474-2.007-2.706-2.705h-1.85v1.533l-1.127.812-2.525.316-2.256 4.96-1.83 2.408 2.696 3.576v5.96l-4.045-2.986v-2.504h-1.348v2.793l-3.625 3.95 1.39 6.288-4.306 2.002 1.275 3.215 2.047-2.047h3.147l2.345.802v2.75l-3.97 5.774v9.382l3.835.857h2.582z"/>\n    <path id="PEDROGAO_GRANDE" class="js-map-target map-target" d="M194.17 108.148h-1.824l-.627 1.253-1.49 1.22-.405 4.6v5.23h1.67l3.02 5.865v1.995l.978 1.16 2.073-1.285v-2.073l2.574-2.716 1.465 1.108L203 123.11l3.287-2.287 1.572-5.36 1.07-1.5h-.976l-.655-.655 1.215-1.215V110.1h2.243v-2.618l.063-.046-4.29-4.812V100.6l-2.297-2.296v-2.348l-3.118-.606v3.118l1.258 2.79-3.5 2.46v4.922h-2.078v2.844h-2.625z"/>\n    <path id="CASTANHEIRA_DE_PERA" class="js-map-target map-target" d="M196.094 92.17l-.473 2.008-3.224 3.225v3.608l.496 6.045-.546 1.093h1.824v3.336h2.625v-2.844h2.078v-4.922l3.5-2.46-1.258-2.79V95.35l3.118.606 1.7-7.562h-1.39l-4.22-2.897-1.573 3.245-3.367 2.717z"/>\n    <path id="PORTO_DE_MOS" class="js-map-target map-target" d="M128.72 183.3l-4.405-3.012v-1.237l-3.012-6.797-1.855.54-3.09-3.707-2.473.772-10.892-4.944-5.562 2.59v.35l-3.208 1.243 4.387 10.655 2.585-1.41 2.664 2.664-3.37 5.25v3.603l-2.358 8.62h1.874l1.442-1.506h6.258l4.635-1.39 1.855.85h3.322l1.468 1.004 1.39-1.39h2.395l-2.24-8.344 1.39-1.622 3.168 2.626 1.275-1.274h.85l1.66-2.743v-1.512z"/>\n    <path id="ALVAIAZERE" class="js-map-target map-target" d="M179.406 129.066l3.97-5.773v-2.75l-2.347-.803h-3.148l-2.047 2.047-1.516 2.304.787 3.155h-2.304l-1.03-1.395-2.367 1.88-4.427-2.668H163.4l-.91 1.576-4.237-.988-.41 1.332.77 4.635 2.164 5.815-.31 5.62 1.932 4.325-.773.985.308 2.414 3.245-1.93.983-2.354 3.162-1.58 3.44 1.952 2.046-3.254h1.767l.56-.65 1.3.836v1.58h1.768v-1.952l-.79-.79.743-.745v-2.186l-1.184-1.186.43-.07z"/>\n</svg>\n'}),define("text!maps/gfx/LISBOA.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="OEIRAS" class="js-map-target map-target" d="M86.564 260.047h-10.75v-4.33H65.813l-2.642 2.09h.552l-4.03 15.378H57.3v7.844l1.12.504 11.425-7.29h12.016l2.758 1.577 2.622-6.482v-2.12l2.783-2.783v-.928z"/>\n    <path id="AMADORA" class="js-map-target map-target" d="M80.443 257.508h-4.628v2.54h10.75l3.46 3.46v-9.94h3.843v-3.892l-6.408-5.306v-6.12h-5.636v6.456l-3.658 3.658 2.277 2.277z"/>\n    <path id="ODIVELAS" class="js-map-target map-target" d="M87.384 238.25h.076v6.12l6.408 5.306v-.48l13.17-9.555v-1.3l-1.787-3.393h-2.38v2.263h-1.67l-4.287-4.765H93.34v-2.56l-6.134-2.92-2.263.776v2.8h-2.978v4.288h5.42z"/>\n    <path id="CASCAIS" class="js-map-target map-target" d="M60.05 257.34l-2.74-2.74-6.67 3.573h-3.99l-3.932-6.134H39.62l-1.34 1.34-3.602-2.592H33.07v-1.905H18.062l-2.8 2.858 2.865 3.08v6.5l-4.062 6.092v1.896l6.838 5.01h7.245l1.692 1.693h3.047l1.49-1.42-1.83-1.83L38.1 271l19.202 10.03v-7.845h2.39l4.07-15.846z"/>\n    <path id="SINTRA" class="js-map-target map-target" d="M81.965 230.54h2.978v-2.8l.31-.105-2.752-2.872v-2.978h2.74v-3.752h-1.31V215.3h-1.406v-2.12H78.92l-4.136-4.773v-3.605h-3.71l-5.41 4.878h-6.15l-6.89-3.075V203l-7.74-2.97v-4.983l-4.136-3.817H32.61l-7.4 21.622v1.548l-14.95 29.66 5.003 7.68 2.8-2.857H33.07v1.905h1.608l3.603 2.59 1.34-1.34h3.098l3.93 6.135h3.99l6.67-3.573 2.74 2.74h4.05l.047.043 1.667-1.666h10.003v1.79h4.628v-6.866l-2.277-2.276 3.658-3.658v-6.457h5.56v-3.422h-5.42z"/>\n    <path id="LOURES" class="js-map-target map-target" d="M128.9 221.65v-2.59l-3.054-2.778-2.037 2.59h-1.76l-2.13 5.555h-2.128v-8.516h4.258v-3.053l-4.072-8.794h9.626l2.592-2.592v-5.275l-2.592-.74v-2.866l-3.24 2.396h-3.85l-2.982-1.79-3.697-5.367h-4.89l-3.2 3.294-9.517 9.517-3.737-3.737H87.35l-2.49 2.492 2.013 3.5v10.708l-1.377 1.696H83.93v2.733h1.31v3.752H82.5v2.978l2.753 2.872 1.953-.67 6.134 2.92v2.56h3.573l4.288 4.765h1.67v-2.263h2.38l1.787 3.394v1.3l.347-.25 2.584 2.584 7.355 2.584 2.518 2.783h.928v-7.685h3.596l1.574-8.285 3.795-6.017.648-2.036z"/>\n    <path id="LOURINHA" class="js-map-target map-target" d="M99.316 89.492v-3.306l-4.13-4.13v-3.16h1.797V74.13l3.014-3.014-3.792-5.833V59.16H83.178l-2.805-4.316-4.972 2.663v2.528h-3.5l-2.818 5.93-2.43-2.236H56.478v24.865l-4.274 9.744h7.932v4.082l3.305 1.847h3.305l2.236-2.237h2.334l3.694-3.89h9.82v-8.262h10.4l6.32 7.486v-5.638z"/>\n    <path id="TORRES_VEDRAS" class="js-map-target map-target" d="M105.93 132.12v-3.16l7.44-7.44-5.393-19.155-.186-1.86-6.238-3.14-6.32-7.484h-10.4v8.264h-9.82l-3.694 3.89h-2.334l-2.236 2.235h-3.305l-3.305-1.848V98.34h-7.932l-10.603 24.18v3.843l-9.113 15.7h1.976v4.935h2.655l5.395-3.905 3.72 4.463h6.322v5.765l5.95 4.093v4.65l6.324 2.045 2.42-3.348v-5.207h2.045v3.533h8.37l5.02 5.394h2.603l3.162-5.208h2.79v5.208l12.646-1.488v-4.09l3.533-3.535h7.066V140.49z"/>\n    <path id="MAFRA" class="js-map-target map-target" d="M100.973 182.536l-1.75 1.75h-1.96v-2.28h-5.62v1.908h-4.56v-4.56h5.62V164.31l-1.463.172v-5.208h-2.79l-3.162 5.208h-2.603l-5.02-5.394h-8.37v-3.533H67.25v5.207l-2.42 3.348-6.322-2.046v-4.65l-5.95-4.09v-5.766h-6.324l-3.72-4.463-5.393 3.905h-2.654v8.13l-2.415 4.5v20.97l3.02 3.02-2.46 7.612h8.138l4.135 3.817v4.984l7.74 2.97v3.605l6.892 3.075h6.15l5.408-4.878h3.71v3.605l4.136 4.772h3.604v2.12h2.97l1.377-1.697v-10.71l-2.013-3.498 2.49-2.492h5.144l3.738 3.738 9.517-9.516v-8.588z"/>\n    <path id="SOBRAL_DE_MONTE_AGRACO" class="js-map-target map-target" d="M114.486 153.854v1.513h-7.067l-3.534 3.534v4.092l-11.183 1.316v15.047h-5.62v4.56h4.56v-1.91h5.62v2.28h1.96l1.75-1.75h2.282l1.214-2.513-4.11-5.168 2.386-2.783h2.518l1.855 5.567h1.457v-2.783h5.3v-4.373l3.71-3.047v5.17h1.59l3.182-3.182V156.7z"/>\n    <path id="ALENQUER" class="js-map-target map-target" d="M163.97 156.037l-2.52-2.65 5.832-15.637-2.12-4.903h-2.253v-2.916h9.937l-5.035-9.407v-8.216l-2.386 2.517-6.493-4.77v-6.36h-6.758l-2.783-2.784h-3.18l-4.11 3.644h-13.118l-7.553 2.717-7.42-5.432h-6.085l.052.527 5.393 19.155-7.44 7.44v3.16l8.556 8.37v13.364l7.873 2.845v3.577h1.59V156.7l7.552 5.3v-2.65h6.493l2.187 6.294 2.584-2.584h5.433v2.85h4.174l3.114-3.115h4.505l4.903 4.903h2.253l2.252-6.228-1.247-5.433z"/>\n    <path id="CADAVAL" class="js-map-target map-target" d="M152.822 62.594l-.002.006-2.305 2.177h-6.404l-4.61-7.813h-6.02l-3.714 4.867-2.818.257v-.516l-1.41 2.898h-2.914v4.373h-5.036v10.337l-6.36 6.494-2.12-2.12-8.15 7.584.594.594v5.638l6.24 3.14.185 1.86-.052-.528h6.085l7.42 5.433 7.554-2.716h13.12l4.108-3.644h2.727l9.198-34.945z"/>\n    <path id="VILA_FRANCA_DE_XIRA" class="js-map-target map-target" d="M183.237 177.22l5.37-2.778v-5.832l5.553-6.85-6.202-4.073-7.128-.833-1.85 2.5 4.35 2.22v2.408h-4.907l-2.592 1.758-3.61-2.592 2.5-3.517v-1.943l-5.318 3.783-2.253 6.228h-2.254l-4.903-4.903h-4.505l-3.114 3.114H148.2v-2.85h-5.434l-2.584 2.584 2.788 6.483v9.257l-3.054-1.76-2.407 1.02-1.76 2.87h-3.517l-5.74-5.277h-2.406v2.777l-2.592.925 4.536 4.443v2.684l1.574 2.037v4.35l2.592.74v5.277l-2.592 2.593h-9.626l4.072 8.794v3.054h-4.258v8.517h2.13l2.128-5.554h1.76l2.036-2.59 3.054 2.776v2.59l1.48 1.667-.647 2.036-3.795 6.017-1.574 8.285 12.127-12.82 5.74-9.906v12.033l8.33 11.85 7.314-10.924.462-3.426 8.054-7.035 8.146-12.313v-5.83l5.646-7.22V187.4l11.108-5.646-.972-.972z"/>\n    <path id="ARRUDA_DOS_VINHOS" class="js-map-target map-target" d="M124.364 194.986l3.24-2.397v-1.486l-1.573-2.037v-2.684l-4.535-4.444 2.592-.926v-2.777h2.407l5.74 5.276h3.516l1.76-2.87 2.406-1.018 3.054 1.76v-9.258l-2.788-6.483-2.187-6.294h-6.493V162l-7.553-5.3v3.577h-1.59v9.144l-3.182 3.182h-1.59v-5.17l-3.71 3.05v4.372h-5.3v2.783h-1.46l-1.854-5.566h-2.518l-2.385 2.784 4.11 5.168-1.215 2.514h2.49v8.588l3.2-3.295h4.89l3.697 5.367 2.983 1.79z"/>\n    <path id="AZAMBUJA" class="js-map-target map-target" d="M204.102 135.86l1.743-1.743-6.623-7.32h-5.693l-4.068-4.997h-3.486l-2.09-6.97-8.367-8.484h3.252l2.673-5.345h4.88l2.905 2.906h4.764l6.506-4.067V94.26l-4.183-6.158-7.087-1.046-3.254-8.947h-3.137l-7.09 4.997h-6.854l-7.67-6.623-6.45 2.247-5.837 22.18h.452l2.783 2.783h6.758v6.36l6.493 4.77 2.386-2.516v8.216l5.035 9.408h-9.938v2.917h2.25l2.122 4.903-5.83 15.637 2.517 2.65h4.185l1.247 5.433 5.32-3.783v1.944l-2.5 3.518 3.61 2.592 2.59-1.758h4.907v-2.407l-4.35-2.222 1.85-2.5 7.128.834.423.278 1.87-.328 8.54.724 2.895-2.17.094-2.088 4.065-6.158 4.416-.58z"/>\n    <path id="LISBOA" class="js-map-target map-target" d="M82.947 279.367h8.667l5.417-3.25h12.707l8.274-5.713 3.153-4.137 2.56-9.16v-16.744l.64-.708h-3.595v7.686h-.927l-2.517-2.782-7.355-2.584-2.584-2.584-13.516 9.806v4.373h-3.843v10.865l-2.783 2.783v2.12l-2.62 6.483z"/>\n</svg>\n'}),define("text!maps/gfx/MADEIRA.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="SAO_VICENTE" class="js-map-target map-target" d="M114.975 149.288l.376-3.077-1.65-.375-1.877-2.627-2.702-1.35-3.677.074-1.2-1.8h-1.728l-3.002 3h-2.027l-3.078 2.103-2.402-.075-4.578 1.05-2.252-.375-2.928.976-4.578-1.65-1.877 1.576v1.576l-.976 1.35-3.303 8.784 1.05 2.702 4.88 6.155h1.577l1.877 4.58 5.18-1.202 1.426-2.25h2.852l2.402 2.026 4.88-1.952 1.125 1.5 3.153.452.9-1.2.526.9h1.652l3.603-2.027v.674l1.802-1.576 1.126.225 1.276-1.35.45-2.553-2.178-2.027 4.28-4.88-1.352-.674 1.35-4.88z"/>\n    <path id="PONTA_DO_SOL" class="js-map-target map-target" d="M80.897 171.882l-1.876-4.58h-1.576l-4.88-6.154.043.053-2.618 1.427-3.916 2.183.3 1.506-1.204 1.58-2.108 2.335-1.58.077-2.11-1.506-1.204 2.26-.828 3.086-.678 2.033-5.27 3.463-1.958 3.84-.226 2.484 3.03 1.692 1.75 3.046 1.015-.225.282 1.525 5.192 4.514 2.483-.678 2.99.338 2.766-5.53v-1.41l4.232-5.926 1.298-.903-.338-1.466.903-2.54.678-2.03 1.975-1.243.734.566.96-1.524.112-1.13 1.8-1.2z"/>\n    <path id="FUNCHAL" class="js-map-target map-target" d="M139.283 213.412l1.684-.842.263-1.262-3.367-3.368-.58-3.05-.788-2.37.58-2.366-.633-2.578-.84-1.684-1.37.21-2.893-3.84-1.427-2.44-2.327-3.003-1.426-3.38-1.652.452-2.1-.225-.677-.976-1.2-.45-.525-2.1.084-.647-1.46.193-.895 1.66-1.532-.766-1.785 1.71v1.175h-1.306l-1.763.848-.392 2.285-3.264 1.567v1.828l-1.502 1.175 1.045 1.567v1.632l-1.11 1.697.764.765v2.824l1.326.196v4.766h-.914l-.784 3.917-.98.98v1.696l-2.35 2.35 4.506 1.044 2.676 2.09.653 1.762h2.285l1.566-1.045 1.176.72 2.154-.72 1.697-1.566 1.894.392 1.698-1.436 4.83-.13 4.766 1.044 3.2 1.044 2.153 1.11 1.58.332.368-3.052z"/>\n    <path id="CAMARA_DE_LOBOS" class="js-map-target map-target" d="M105.54 209.512l.978-.98.784-3.916h.914v-4.766l-1.325-.196v-2.825l-.763-.766 1.11-1.697v-1.632l-1.045-1.567 1.502-1.175v-1.828l3.264-1.567.39-2.285 1.764-.848h1.306v-1.175l1.785-1.71 1.532.766.894-1.66 1.46-.193.14-1.08-1.5-.977-1.653-.225.15-1.575.826-2.027-.375-2.852-1.877-1.877h-3.527l-1.27-1.53.52.103-1.126-.225-1.802 1.576v-.675l-3.603 2.025h-1.65l-.527-.9-.74.99.46 1.795-.913 3.07.457.586-1.698 1.045.783 3.656.523 1.698-1.96.13-.39 1.828-2.024.914-.588.522.13 1.698-1.125 1.126v2.66l-1.558 1.56v1.64l-1.106 1.105v1.962l-1.89 1.566v2.807l-1.696 1.697h-2.35l-3.068 2.546 4.308 3.134h5.063l1.646 1.647h3.735l3.068 2.14 1.306.783 2.35-2.35z"/>\n    <path id="RIBEIRA_BRAVA" class="js-map-target map-target" d="M84.062 205.856l3.068-2.546h2.35l1.697-1.697v-2.807l1.89-1.567v-1.963l1.105-1.106v-1.64l1.56-1.558v-2.66l1.125-1.126-.13-1.698.587-.522 2.024-.914.39-1.828 1.96-.13-.523-1.698-.783-3.655 1.697-1.044-.458-.587.914-3.07-.462-1.796-.16.212-3.152-.45-1.126-1.502-4.88 1.952-2.4-2.027h-2.853l-1.426 2.25-5.18 1.202.174-.04-1.8 1.2-.114 1.13-.96 1.524-.733-.565-1.975 1.243-.677 2.03-.902 2.54.338 1.468-1.298.904-4.232 5.925v1.41l-2.765 5.53 5.694 2.794 1.45 2.867h2.172l5.805 3.002 3.352 1.277z"/>\n    <path id="SANTA_CRUZ" class="js-map-target map-target" d="M169.846 196.953l-3.903-2.553-3.078-3.678-1.5-2.852-3.754-.675-1.8-1.652-1.652.15-2.702-2.177-3.003-1.276-2.627-.3-3.228 2.552-1.276 2.327h-3.978l-.976.9-1.276-.075-1.2 1.276-1.427-.524-.15 1.8-1.35-.825-1.052.452 1.426 2.44 2.893 3.84 1.368-.21.842 1.684.632 2.578-.58 2.367.79 2.37.58 3.05 3.366 3.368-.263 1.262-1.684.842 1.105 1.736-.368 3.052 2.683 1.63.63.685.58-1.684 3.525-.104 2.315.263 2.473-2.527 1.79-1.262 1.577-.104 2.525-2.894.37-1.79h1.156l.842-3.576 4.104-5.05 4.26-.527 1.843-.738 1.63-3.57-.9-.45z"/>\n    <path id="PORTO_SANTO" class="js-map-target map-target" d="M202.048 29.973l-2.29 2.642.44 2.114 1.322 2.64-2.642.265-1.85-1.585-1.85.792.53-1.057-2.555-.264-.88 1.058-2.114-1.32-6.606 2.817-6.43 5.9-4.93 4.14-6.694 2.906-1.233-2.64-2.29-.265-2.378-5.02.968-.97 2.29.266.793-2.025 1.498-.97 1.057-1.232 2.113-2.113v-4.316l1.057-4.315 2.026-.617-.175-1.85 3.17-.088 2.378-1.233 1.497-3.346 1.145.44 2.994-.88 1.144-1.498 1.233.793 1.673-1.76 3.61-1.234 1.146-2.466 1.233 3.083 2.377.264 1.41 2.114 2.553 1.146 1.85-.705 1.232-1.232.53 4.315-2.643 2.114v1.76h1.672l.616 3.436zm-38.045 28.974l1.41-1.41-.353-3.345-.793-1.674-.528 1.41-1.675 2.553-1.673.794-.704 2.73.968 1.41 1.938-.97.352 2.378.88 1.145 1.498.353-.352-3.435-.97-1.938z"/>\n    <path id="PORTO_MONIZ" class="js-map-target map-target" d="M71.514 158.446l3.303-8.782.976-1.352v-1.576l1.877-1.576-3.553-.636-2.218-1.663h-3.803l-2.614-1.98v-1.9l-2.297-1.347-2.138.475h-2.456l-4.435-4.118v-1.743l-3.88-3.168v-3.248l-4.436-3.96v-1.664l-3.8.555-3.803-1.98-2.06.237-2.772 1.426-.87 1.9-1.506 1.03h-1.347l-2.14 2.773v.79h-1.028l-2.693 2.773 2.93 3.01 2.852 1.108.87 2.536.16 1.346 3.8 4.99h1.348l4.118 2.456 3.01-2.377 2.376 2.06-.317 1.743 1.346 2.297-.317 2.93h1.662l1.11 3.644v1.584l2.613 2.614 2.297 1.03 3.485.08 3.247.386 3.168.96 8.055-3.348z"/>\n    <path id="CALHETA__MADEIRA" class="js-map-target map-target" d="M51.392 179.643l5.27-3.464.678-2.034.828-3.086 1.205-2.26 2.108 1.507 1.582-.076 2.108-2.333 1.205-1.58-.3-1.507 3.914-2.183 2.617-1.426-.042-.052-.963-2.477.035.09-8.055 3.347-3.168-.96-3.247-.386-3.485-.078-2.297-1.03-2.614-2.614v-1.584l-1.108-3.643H46l.316-2.93-1.347-2.297.316-1.742-2.376-2.06-3.01 2.378-4.118-2.456h-1.347l-3.802-4.99-.158-1.346-.87-2.535-2.853-1.107-2.93-3.01-2.93 1.822-1.902.475-1.188 2.376-5.227 3.485-1.664.318v1.742l1.744 1.584 2.376 1.9 1.267 4.278.396 3.168.792 1.822-.95 1.98.95 2.772 1.98 1.347.634 2.93 3.01 3.09.474 1.743 2.376.87v3.328l3.327 2.694h1.346l2.376 2.772h2.296l3.485 3.485 5.863 3.01 2.138 1.19.476 1.74 1.942.337.226-2.484z"/>\n    <path id="SANTANA" class="js-map-target map-target" d="M149.235 160.893l-.634-2.455h-2.217l-1.425-3.565 1.584-1.584.713-.713h-3.17l-.95-.95-3.563-3.882-1.584-3.168-2.654-.753-1.188-1.188-2.653-2.653h-2.455l-3.565 1.426h-12.276l-.872 1.424h-1.25l.748.374 1.876 2.627 1.65.376-.375 3.078.376 1.802-1.35 4.88 1.35.674-4.278 4.88 2.177 2.026-.45 2.552-1.277 1.35-.52-.103 1.27 1.53h3.528l1.878 1.876.375 2.852-.826 2.027-.15 1.576 1.652.226 1.5.976-.14 1.08-.085.647.525 2.1 1.2.45.677.977 2.1.225 1.653-.45 1.426 3.377.164.21h3.664l.792-.792 1.11-1.108v-3.17l1.424-1.424V178.2h2.733l1.148 1.148V178h3.803l1.584-1.504v-3.168l.792-.792v-2.614l1.346-2.93 1.98-.555.95 1.11 2.042-3.882v-2.772z"/>\n    <path id="MACHICO" class="js-map-target map-target" d="M209.61 188.463h-1.146l-.84-1.835h-1.377l-2.83-2.83-.688-2.447-2.678-.61.383-1.606-2.6-1.377-1.3 1.912h-1.912l-1.912-1.684v2.448h-2.905v-1.683l-2.218 1.3-1.07-2.675-1.836 2.118-1.222-1.583-1.453-1.682-7.8-2.295-.918.918-1.262-1.26-.88.88-.764-.766h-1.146l-1.53-3.288h-1.376l-2.218 1.91-1.147-.993h-1.377l-3.364-2.906-1.3 1.3-2.6-2.6 1.147-1.147h-1.454l-.927-4.818h-1.972v2.503l-2.042 3.88-.95-1.108-1.98.555-1.347 2.93v2.614l-.793.792v3.168L142.423 178h-3.802v1.348l-1.147-1.15h-2.733v2.338l-1.425 1.425v3.17l-1.11 1.108-.79.792h-3.665l2.163 2.792 1.05-.45 1.352.825.15-1.8 1.426.524 1.202-1.275 1.276.075.976-.9h3.978l1.276-2.328 3.228-2.552 2.627.3 3.003 1.276 2.702 2.177 1.65-.15 1.803 1.652 3.754.675 1.5 2.852 3.08 3.68 3.902 2.55 1.576-.45.9.45 2.647-2.14v-1.99l-1.253-1.33 1.1-1.098h1.682l4.28-5.984h2.142l.995-.765.305 2.677 1.683-1.682 1.07-2.065h6.654l2.293 1.912v-1.3h1.3v-2.065l2.906 1.147v1.07l.993 1.147-.46.994h1.3l1.836 2.677h1.376l2.677 1.99h2.14l.918-2.754z"/>\n    <path fill="none" stroke="#323C32" stroke-width=".4" stroke-miterlimit="10" d="M142 0h78v78h-78z"/>\n</svg>\n'}),define("text!maps/gfx/PORTALEGRE.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="PONTE_DE_SOR" class="js-map-target map-target" d="M85.3 148h-7.2l-2.2 2.2-5.9-5.4h-2.4l-3-4.5H60v2.8h-3.4v3.9l-7.4 11.8h-5.7v-1.7h-2.2l-3.8 4.2 1.2 2.7-4.7 3.5v2.3l-7.4 6.8h-2.9l-7.2 4.5v1.6l-5.7 6.9v2.3l7.3 3.5v4.1l1.7 1.5h1.6l.7 6.3 2.7 2.7 2.3-.6 1.6 1.6-1.3 1.5 1.5 1.4 6-7h1.9l8.7-7.8v-3.4l5.5-6.3h7.9l2-2 1.9 1.9.8-.8v-1.3h3.2v-2.1l-2-1.9 3.9-3.9-1.3-1.2 4.5-4.5h3.7v-3.7l2.9 1.6h2.7v-2.2l2-1.5h-5l-1.1-1.1 2.4-2.3v-3.6l-2.2-2.2 8-3.3z"/>\n    <path id="CAMPO_MAIOR" class="js-map-target map-target" d="M208.1 201.9l1.5-2.6v-1.2l-1.8-1.4-.5-2.2-.9-1.5-7.2-5.4h-3.9l-3.2 1.7-2.6.4-1.3 1.4-5.2-1.7 1.5 1.7-1.7 1.6v4.4l4.7 4.8-1.1.7v3.7l-4.4 2.1 2.2 2.6h2.2l7.8 14.3h1.4l1 1.6 4-4v-2l5.5-6.8 3.1-7.7 1.6-1.4z"/>\n    <path id="ARRONCHES" class="js-map-target map-target" d="M186.4 206.3v-3.7l1.1-.7-4.7-4.8v-4.4l1.7-1.6-1.5-1.7-1-2.4 2.1-4.3-1.1-.8 1-4.2-4.5-1.5-3.7-1.1h-2.7l-4-3.8-1.7 1.4-7.5 1-2.4 1-1.4-.8-5.3-.2 3.2 2.8-1.2 1.2v1.3l-3.8.8-1.5 2.8 5.7 4.9-1.7 1.8-1.1 3.3 2.4 1.3h1.5v3.2h3.6l2.8 1.7v2.2h1.1l1.7-2h4.6l2.8 1.4h2l3.1 3.9h4.1l1.9 1.7v2.4z"/>\n    <path id="CRATO" class="js-map-target map-target" d="M128.3 167.6h1.3l-.9-2.1-2.9-2.4 3.8-1.5-.5-6.5 2.5-3.8-1.7-1.8.6-.8-7.3-6.6-3.8-.6-1.5-.9-3.2-2.3h-3l-2.2-8-3.1-1.4-3.3 3.3-1.3 7.2H94l-17.8 8.2-1.5 1.5 1.2 1.1 2.2-2.2h7.2v1.4l1-.4 3.9 2.4 1.6-1 .3 1.9 6.6 3.1 3.8 6.1 18.7 11.5 4.7-.7 7.7 5h2.6l.2-1.5z"/>\n    <path id="PORTALEGRE" class="js-map-target map-target" d="M167.7 162.9l2.4-4.5-5.7-4.7.1-1.1-5.6-5.2-5.7.9-1 .8.2 2.7-4.1-.5-.7-3.1-4.3-.2.8-2.1-1.6-1.9.5-3.5-3.4-4.2-7 1.8-1.2 1.4-7.1.2v1.5l-1.2.9h.1l7.3 6.6-.6.8 1.7 1.8-2.5 3.8.5 6.5-3.8 1.5 2.9 2.4.9 2.1h-1.3l8.1 8.2-.2 1.5 3.3.6 5.9 4.8h2.2l-.1-.1 1.5-2.8 3.8-.8v-1.3l1.2-1.2-3.2-2.8 5.3.2 1.4.8 2.4-1 7.5-1 1.7-1.4-.2-6.4z"/>\n    <path id="MONFORTE" class="js-map-target map-target" d="M125.7 196.7l4.8 5.3-5.4 4.6 4.7 5.9h4.2l.5 1.9 4.8 1.1-2.5 5.2 1.5 1.2-1.7 1.4 6.9 4.6v6.5l.6-.3 1.9-1.8 1.9-.3-1.4-4.1 4.7-.7 1.7-1.4-2.4-1 1.7-1.4v-2.5l-1.8-.9 4.8-10.1v-1.5l-.7-.7 4.4-3.7v-1l1.8-2v-2.2l-2.8-1.7h-3.6v-3.2h-1.5l-2.4-1.3 1.1-3.3 1.7-1.8-5.7-4.9.1.1h-2.2l-5.9-4.8-3.3-.6h-2.6l-4.5-2.9-1.7 3.2v2.9l-6 2.8 6 11.7z"/>\n    <path id="AVIS" class="js-map-target map-target" d="M84.2 176.2l1.1-3h-2.7l-1.4-2.2v.5h-2.7l-2.9-1.6v3.7h-3.7l-4.5 4.5 1.3 1.2-3.9 3.9 2 1.9v2.1h-3.2v1.3l-.8.8-1.9-1.9-2 2H51l-5.5 6.3v3.4l-7.2 6.5 1.1 2.2h2.4V205h4.6l-.3 2.5-2.6 1.3 1.1 4 1.2 2.8 2-2.5.5-4.2 2.3-1.2 4.7 4 3 1.7-1.9 6.9 8.7-1.4 2.5-4.1 4.1 1.1 3.6-1.4-.3-5.2 2.3.2.2 2.2 2.3.2 1.7-4.6h2.7l2.2 3.6 8.4-2.5 1.8 1.9 2.1-1.5 2.2.1.8-3-1-1.5 2.8-2.5-3.9-2 .8-6.3-2.5-2.8-1.7.5-2.7-2.5-.3-3.9-3.3 1.1-1-3.4 1-1.1-1.4-2.5-4.6 1.2-.6-1.4 2.9-1.1z"/>\n    <path id="ALTER_DO_CHAO" class="js-map-target map-target" d="M126.8 180.8l.6-.3v-2.9l1.7-3.2 3.4 2.2-6.6-4.3-4.7.7-18.7-11.5-3.8-6.1-6.6-3.1-.3-1.9-1.6 1-3.9-2.4-1 .4v5.9l-8 3.3 2.2 2.2v3.6l-2.4 2.3 1.1 1.1h5l-2 1.5v1.7l1.4 2.2h2.7l-1.1 3 2 1.5-2.9 1.1.6 1.4 4.6-1.2 1.4 2.5-1 1.1 1 3.4 3.3-1.1 2.4-.9 1 1.8 9.3 1.8 1.7 1.7 2.1-5.3 4.1-1.6 5.3.3 4.8-3.9z"/>\n    <path id="FRONTEIRA" class="js-map-target map-target" d="M127.2 209.3l-1.6 1.2h-.9l-5.4-2.7-4.2.6.1 2.2-3.3 1.6v-3.1l-2.9-2.5-7.2-1-.9 3.3.8-3-1-1.5 2.8-2.5-3.9-2 .8-6.3-2.5-2.8-1.7.5-2.7-2.5-.3-3.9 2.4-.9 1 1.8 9.3 1.8 1.7 1.7 2.1-5.3 4.1-1.6 5.3.3 4.8-3.9 2.9 2 .6-.3-6 2.8 6 11.7-1.7 1.7 4.8 5.3-5.4 4.6 4.7 5.9z"/>\n    <path id="GAVIAO" class="js-map-target map-target" d="M93 132.4l-1.6 1.5-4.4-6.5h-3.5v-4.3h-4l-2.7-3.9H79l2.2-3.1-4.5-4.9-10.7-5.4-3.5 9.8-3.2 3.1 1 3.2-1.4 1.8 1.7 4.4 6.8 3.9 1.4 2.3-4.2 6 3 4.5H70l4.7 4.3 1.5-1.5 17.8-8.2 2.2-5z"/>\n    <path id="NISA" class="js-map-target map-target" d="M134 112.6l-.8-10.6-1.7-.7-4.5-7.9.3-4-2.1-1.8-.7 1.3-6.9.4v2.9l-7 3.4-4.1-4.8-6.3 3.5.4 3.3-1.7 3.5-4.5.7-1.1 4-1.8.6-3.2 3.3-3.4 1.3-2.2 4.7-1.6.3.1.1-2.2 3.1h-2.2l2.7 3.9h4v4.3H87l4.4 6.5 1.6-1.5 3.2 2-2.2 5h7.8l1.3-7.2 3.3-3.3 3.1 1.4 2.2 8h3l3.2 2.3 1.4-3.7-1.4-9.8 2.2-2.6 1.4-1.1-.6-4.2-1.2-3.6 1.2-1.1 3.1-.2-2.1-4.4 9.8 3.2z"/>\n    <path id="CASTELO_DE_VIDE" class="js-map-target map-target" d="M131.7 113.1l-9.8-3.2 2.1 4.4-3.1.2-1.2 1.1 1.2 3.6.6 4.2-1.4 1.1-2.2 2.6 1.4 9.8-1.4 3.7 1.5.9 3.8.6h-.1l1.2-.9v-1.5l7.1-.2 1.2-1.4 7-1.8 1.1 1.4 2-2.1h1.3l1.2-5.4h-1.6v-1.8l.8-1.9v-6.1h1.6l2.2-1.2-2.2-2.7v-4.9l-4.9-.3-5.4-7.7-2.5-1.6.8 10.6z"/>\n    <path id="MARVAO" class="js-map-target map-target" d="M159.2 130.6V127l1.5-1.7-7.2-3.8-.5-1.5-2.1.6-2.7-1.4-2.2 1.2h-1.6v6.1l-.8 1.9v1.8h1.6l-1.2 5.4h-1.3l-2 2.1 2.3 2.8-.5 3.5 1.6 1.9-.8 2.1 4.3.2.7 3.1 4.1.5-.2-2.7 1-.8 5.7-.9.4.3v-3.6l-2.7-4.8 3.4-7.2z"/>\n    <path id="ELVAS" class="js-map-target map-target" d="M198.4 230.7v-2.5l-1.7-1.4-.1.1-1-1.6h-1.4l-7.8-14.3h-2.2l-2.2-2.6h.1-.1V206l-1.9-1.7H176l-3.1-3.9h-2l-2.8-1.4h-4.6l-1.7 2h-1.1l-1.8 2v1l-4.4 3.7.7.7v1.5l-4.8 10.1 1.8.9v2.5l-1.7 1.4 2.4 1-1.7 1.4-4.7.7 1.4 4.1-1.9.3-1.9 1.8-.6.3 4.1 11.7 3.4-1.7v2.1l2-1.1v1.7h1.6l3.8-3-.9-.9V241h2.2l1.7-2.1 2.6 2.2.9-1.7h1.8v-1.8h2.6l1.8 3.2 1.5-1v2.5l1.1 2.1-3.1 4.9 1.5.5-.6.7v2.4l1.5.2 1.8 2.2 1.6-1.2v-2.4l3.8-1.5 1.4-1.5v-1.6l5.2-3.8h3.4l1.5-2 3-5.9h1.5l.9-.9h1.3v-1.7l1-1.2z"/>\n    <path id="SOUSEL" class="js-map-target map-target" d="M124.2 210.5h.5l-5.4-2.7-4.2.6.1 2.2-3.3 1.6v-3.1l-2.9-2.5-7.2-1-.9 3.3-2.2-.1-2.1 1.5-1.8-1.9-8.4 2.5-2.2-3.6h-2.7l-1.7 4.6-2.3-.2-.2-2.2-2.3-.2.3 5.2-3.6 1.4 4.1 8.1 2.3.2-.2 2.9 12.6 2.4h-.2l.8-2.1 2.9.6 3.2-3.1-.3-1.2 1.7-2.2 4.4 4.3 2.6-2.6 5.1 2.9 2.2-1.9v-1.4l4.6-4.1h5.1v-1.1l3.3-1.8v-2.7z"/>\n</svg>\n'}),define("text!maps/gfx/PORTO.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="PAREDES" class="js-map-target map-target" d="M114.65 186.812v-5.985h-4.314l-1.624-1.624h-7.237l-4.825 3.712h-2.227V181.8l-2.227-3.153-7.423 4.64 2.956 2.638v4.038l-4.543 4.542 2.097 2.096-2.446 2.446 3.183 3.494v4.193h-1.784l-5.125 7.453 8.697 14.907 4.39-3.126 2.597 2.598 4.454 1.485 1.67 3.34 1.114 1.114v-7.052l-4.825-9.464 4.825-4.083-1.67-2.783v-2.598l3.154-4.083h4.268l-1.484-3.525 1.484-2.783h1.856l2.97-2.413 2.04-4.826 4.64-4.082z"/>\n    <path id="PORTO" class="js-map-target map-target" d="M59.004 207.974v-5.824H52.62l-1.405-1.404h-3.508l-1.088 1.088h-3.264l-1.35-1.35h-1.597v2.017h-3.44l-5.753 1.264v2.035l4.42 7.226 5.263-1.894h3.58l2.806 2.736h6.175l.983-1.193h1.684l1.053 1.053v-1.684l3.65-2.316v-1.754z"/>\n    <path id="GONDOMAR" class="js-map-target map-target" d="M100.918 233.39l-1.67-3.34-4.454-1.485-1.706-1.706-1.347-.568-3.933 2.8-8.696-14.906-.383-2.61h-4.345v-3.725l-6.362-12.996H64.1l-2.754 2.754h-5.82l-1.243 4.542h4.72v5.824h1.826v1.754l-3.65 2.316v1.684l-.506-.506 1.258 4.638h4.035l5.277 7.08 1.55 5.956 3.183 2.948 7.526-1.94 8.536 10.63v4.113l8.922 4.966v3.414l1.583-2.017v-5.245l-2.902-2.902v-4.734h4.423v-2.406l1.74-1.164v-2.283z"/>\n    <path id="VILA_NOVA_DE_GAIA" class="js-map-target map-target" d="M79.503 231.904l-7.526 1.94-3.182-2.948-1.55-5.956-5.278-7.08h-4.035l-1.258-4.638-.547-.547h-1.684l-.982 1.193h-6.174l-2.807-2.736H40.9l-5.263 1.894-.672 2.66 3.57 12.106v11.33l2.327 7.448-.593 3.717h3.086l6.08-3.112 2.48 2.69-.66.662h9.16v-4.5l6.44-3.803 3.957 9.08h5.043v-4.13l4.966-1.69-5.82-3.182v-3.104h4.967l1.628 2.483h2.095l1.746-2.383z"/>\n    <path id="POVOA_DE_VARZIM" class="js-map-target map-target" d="M48.907 134.417l-3.43-.663-4.86-2.102-6.57-9.457-5.122 2.233-1.05-3.416-4.466.395-3.81-3.94-7.225-.658.02-.145L10 132.58l4.15 12.856 5.713.068.748 1.564h3.402l.952-2.04-1.734-1.735v-2.21l3.775-2.72v-4.49l-.578-.58 2.76-3.706 6.932 5.306h4.83l5.44 7.482 3.605-2.38h3.47v-3.402l-2.585-3.13z"/>\n    <path id="VILA_DO_CONDE" class="js-map-target map-target" d="M49.315 154.686l-2.925-12.31-5.44-7.483h-4.83l-6.932-5.306-2.76 3.707.577.58v4.488l-3.775 2.72v2.21l1.734 1.736-.952 2.04h-3.4l-.75-1.564-5.713-.068 3.604 9.318 3.13.613v8.094l2.108 11.36h5.85l.34 3.827 2.788.73 1.565-1.836h3.945l1.088 1.973 1.837-1.428-.75-4.49h4.9l2.244-5.577-3.266-7.278 2.516-6.054z"/>\n    <path id="MATOSINHOS" class="js-map-target map-target" d="M48.435 193.553l-.022-5.918-4.477.017-3.275-2.504.017 4.08-3.673.015-.013-3.265-6.058-1.406-.007-2.04 1.966-1.708-.957-1.425-2.79-.722-.356-3.825-5.645.02-.535 2.452.02 5.305 3.628 6.177.013 3.47-.945 1.907 6.108 9.568h.002l5.588-1.25 3.44-.012-.01-2.017 1.597-.006 1.356 1.345 3.263-.012 1.084-1.09 3.508-.015 1.37 1.36-.02-5.73z"/>\n    <path id="MAIA" class="js-map-target map-target" d="M46.8 168.018l-2.246 5.578h-4.898l.75 4.49-1.838 1.427-1.088-1.972h-3.945l-1.565 1.837.953 1.43-1.973 1.7v2.04l6.054 1.428v3.265h3.673v-4.08l3.265 2.516h4.477v5.918l4.16 2.788v5.73l.04.038h1.663l1.244-4.542h5.755v-2.358l-2.205-2.26 1.433-1.433v-2.37l-2.04-1.102v-4.024l3.693 2.26h1.544l3.527-9.203 2.866-2.297v-4.262h-2.59l-3.307 4.19h-3.858l-.33 4.022h-2.812l-3.692-6.89-3.03.167v-1.434z"/>\n    <path id="TROFA" class="js-map-target map-target" d="M51.522 152.664v2.022H46.05l-2.516 6.054 3.265 7.278 3.68 2.595v1.434l3.03-.166 3.693 6.89h2.81l.332-4.023h3.858l3.307-4.19h2.59l1.405-2.117v-5.845l-.928-.928v-3.062l2.04-2.04v-2.228l-2.318-1.673z"/>\n    <path id="VALONGO" class="js-map-target map-target" d="M68.808 175.856l-1.574 1.26-3.527 9.205h-1.544l-3.692-2.26v4.025l2.04 1.102v2.37l-1.433 1.433 2.205 2.26v2.358h.064l2.755-2.754h3.92l6.362 12.997v3.725h4.345l.384 2.61 5.126-7.452h1.785v-4.193l-3.182-3.494 2.446-2.445-2.097-2.095 4.542-4.542v-4.038l-2.957-2.64-1.484-.834-8.63 1.764-4.083-2.134v-3.433z"/>\n    <path id="PASSOS_DE_FERREIRA" class="js-map-target map-target" d="M111.774 161.48v-1.854l-2.534-2.964-7.765 1.386-2.413-2.412-3.572 2.737 1.717 1.717-.557 3.06-8.165 3.806v5.196l-4.083 5.38v3.62l-1.113 1.3 1.483.834 7.423-4.64 2.227 3.155v1.115h2.227l4.825-3.712h7.237l.928.928v-4.638l2.412-7.794h-1.855l3.34-6.217z"/>\n    <path id="LOUSADA" class="js-map-target map-target" d="M138.867 168.626l-1.484-4.918h-2.134v2.32h-1.67l-5.568-4.454-1.95 1.95-3.71-1.95 2.412-2.412v-2.413l-2.82-3.036-2.005 1.087-2.506-.114-3.062-2.39-5.103 4.36-.03.006 2.534 2.964v1.855h1.763l-3.34 6.218h1.855l-2.412 7.794v4.64l.696.695h4.314v5.985h4.64l3.433-1.95.464-2.968 4.175 2.32h4.64l3.99-1.67 1.576-8.815 4.176-3.248v-1.856z"/>\n    <path id="FELGUEIRAS" class="js-map-target map-target" d="M155.908 153.36l-4.766-4.41 2.053-4.41.34.113-5.43-1.81-.564-4.636-3.392.226-.904-3.618-8.48.34-.114 3.957-4.976-.43v1.18l-7.508 6.402v7.33l-.22.12 2.818 3.035v2.412l-2.412 2.412 3.71 1.95 1.95-1.95 5.567 4.454h1.67v-2.32h2.133l1.484 4.918h2.877l4.2-5.032h4.646l1.456-1.456h3.75l3.92-4.367-1.043-3.182z"/>\n    <path id="SANTO_TIRSO" class="js-map-target map-target" d="M111.31 147.563v-3.318l-.18-.158-9.047 4.297-2.487-2.035-2.94 2.26-.227-3.505 2.26-2.672h-4.333l-4.253 5.67H86.22l-1.848-3.02h-4.93l-6.225 1.356-2.712 3.882v2.342H70.3l2.318 1.673v2.227l-2.04 2.04v3.063l.927.928v5.845l-1.405 2.118v4.262l-1.292 1.036 1.77 2.79v3.434l4.082 2.134 8.63-1.763 1.112-1.298v-3.62l4.083-5.38v-5.196l8.165-3.805.557-3.06-1.717-1.717 3.572-2.737 2.413 2.412 7.794-1.392 5.102-4.36z"/>\n    <path id="AMARANTE" class="js-map-target map-target" d="M205.81 181.716v-6.988h-3.61v-2.896l-.86-1.888 1.722-3.472-4.946-6.237h-4.62l-2.387-3.465 4.08-3.62v-1.154l-1.925-3.08h-3.42v-3.646l-2.5 3-2.49 5.542-6.218 5.767-2.6 1.695-7.69-7.576-1.47 3.504-2.262 1.244-3.618-2.827-2.324-1.032 1.043 3.183-3.92 4.368h-3.75l-1.456 1.456h-4.647l-4.2 5.032v1.856l-4.175 3.247-1.577 8.814 8.922 3.858 6.82-7.138h2.61v2.077l-7.032 7.78h5.22l3.676 2.29v-2.77h10.387l7.35 7.19v3.143h1.386l3.196-3.835 4.208-1.81.8.798 3.09-3.942 2.236 2.237-1.225 1.866 3.09 3.09h5.166v-2.664l9.942-11.485v-1.385l.032-.102z"/>\n    <path id="PENAFIEL" class="js-map-target map-target" d="M135.99 182.544l-3.99 1.67h-4.638l-4.175-2.32-.464 2.97-3.433 1.948-4.64 4.082-2.04 4.825-2.97 2.412h-1.856l-1.484 2.783 1.484 3.526h-4.268l-3.155 4.084v2.598l1.672 2.783-4.825 4.083 4.825 9.464v7.052l-.227-.227v2.283l-1.74 1.164v2.405h2.79l2.73 2.73h1.48l5.156-5.158h2.274l3.734-3.734v-2.496l.65-.65 2.798-4.22h6.026l5.944-9.33v-5.117l5.45-2.394 3.057-3.057-1.902-2.226h-2.97v-1.816l-5.12-2.888-.082-4.918 4.045-4.08 8.42.495 1.32-1.487-.95-3.38z"/>\n    <path id="MARCO_DE_CANAVESES" class="js-map-target map-target" d="M166.593 188.64h-10.387v2.77l-3.676-2.29h-5.22l7.03-7.78v-2.076h-2.61l-6.818 7.138.952 3.38-1.32 1.487-8.42-.496-4.046 4.08.082 4.918 5.12 2.89v1.815h2.97l1.903 2.226-3.058 3.058-5.45 2.395v5.118l-5.943 9.33h-6.026l-2.797 4.218-.138.138h1.64l2.305 4.506h2.516v-1.657h4.75l2.694-2.85h2.374l2.76-3.824h5.647l7.316 2.63h3.978l7.83-5.197-2.246-6.61-2.44-1.282v-1.476l7.51-3.786 5.197-5.07v-5.84l3.374-1.53v-3.14z"/>\n    <path id="BAIAO" class="js-map-target map-target" d="M210 183.618l-4.19-1.902.054.024-.032.102v1.385l-9.94 11.485v2.663h-5.168l-3.09-3.09 1.226-1.864-2.237-2.236-3.09 3.942-.8-.8-4.207 1.812-3.197 3.835h-1.386l-3.373 1.53v5.84l-5.197 5.07-7.508 3.785v1.476l2.44 1.283 2.245 6.61 2.96 2.53h6.792l3.91-1.442 1.39 1.39v.163l3.146-3.383h3.514l5.995-3.307h2.274l1.965-1.964h3.308l.93 1.24h1.654l2.79-.62v-5.168l2.482-3.205v-2.376l2.267-2.268-2.43-2.43 2.54-2.538v-6.305l-1.396-1.395 3.36-6.977z"/>\n</svg>\n'}),define("text!maps/gfx/SANTAREM.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="ABRANTES" class="js-map-target map-target" d="M186.8 136.2l-8-4.5-2-5.2-2-2.2h-1.5v1.4h-5v-6.4h-.6V116l1.1-1.1-5-5v1.7h-4.6v6.9h-1.3l-1.9 1.9-2.1-2.1h-2l-1-1.1h-2.1l-2.2-2.2.9-2.7h-1.9l.7-3.2-.9-.9v-2.8h1.8v-3.7l2.2-1.7v-1.9l-1.1-1.9 1.2-1.5 1.3-2.1h-2.4l-1.5-1.5-5.2-1.1-1.1-1h-4.2v2.7l-.8.8V94l-2.6 4.2h3.3l1.2 1.3-1.9 1.9-1.4 2.5h-2.8l-3.2 3.3v3.1h-3.1l-6.3 5.6 2.9 1.6h1.4v1.9h3.8l1.1-1.1h2.2l2.2 7.7-1.8 1.8h-2.1l-.7.7.8.8h1.5l4.7 12.2.8 1.2h1.3v3.1l.7.6v2.6l-1.2 3.9-4.1 2.3h-1.5l-.3-.9 3.4 10.5h2.2l1.1 4.5 4 3.9 5.4 1.6 2.1 2.3 4.3-3.1-1.4-3.3 4.4-4.9h2.7v1.9h6.7l8.7-13.8v-4.6h4V146h5.4l5-7z"/>\n    <path id="CORUCHE" class="js-map-target map-target" d="M151.4 270.3L150 265l-3.4-1.6-.2-3.1 4.8-2.7-4-3.3-1.3 1.7-1.4-1.6-1.9 1.5-.1-2.6-10.1-5.3 4.5-6.3 1.5-6.4-1.1-1.8 2.4-2.2.2-.1-.2-.2 1.6-1.7-1.9-2-2.8.8-3.2-3.2-.7-7.4h-1.9l-2-1.8V211l-8.4-4.1-.3.1-2.8 1.1h-3v2.5l-2.8 2.1h-1.3l-2.6-7.1-5.4-.4-6 2.1-1.8-.5-1.3-2.8-11.2 1.9-1.7 2v1.4l-2.4 1.5 3.1 8.8-.6 1.3H79l-1.6 4.2-3 2.8v1l-3.9 1-6.3 4.8L58 233l-1.5 3.1-1.8 3.4 2.5 3.1 9.2 4.1 1.1 2.4-3.7 8.8 1 8.6 2.6 2.5h2.7l1.4-4.4 3.9-1.9h2.3l-1.6 2.8v8l-1.8 1 4.6 3.7 1.4-1.1 5.3 2.4 7.5-9.2H97l1 2.6 5.4-4.5V266l3.7-2.5v2.3l1.9.8 4.7-3.6-1.2-2.1 1.6-1.6 5.5 4 4.4-4.8 1.8 3.3 1.4-5 5.2 5.3h1.9l-1.8 2.5 4.5 3.5 3.7-2.6 3.9 4.1-1.2 2.4 2.3.8.5-1.6h2.2l-.4 4 4.7 2.6 1.8-.3.1-3.8 2.8-2.9-4.1-3.3z"/>\n    <path id="BENAVENTE" class="js-map-target map-target" d="M67.5 249.1l-1.1-2.4-9.2-4.1-2.5-3.1 1.8-3.4.3-.6-1.7-.4-.1-2.4-4.8-.2-3.5-3.8-2.1-.4-1.2-4.2-2.6.4 1-2-1.1-1.8L39 222l-5.2-.4-1.2.2 3.5 2.3-3.4 4.2v3.6l-3.2 1.7 4.3 2.1.6.6-6.8 3.5v4.1l-3.5 4.4v3.5l-4.9 7.6-5 4.3-.2 1.6 5.4 7 2 7.4-.1 2.6 2.7 3.1 1.4-2.9 3.9.6 6.8-4.3 5.1 5.4 2.7 1.6 6.9-2.4 1.3-7 6.7-12v-2.7l3.6 4.3 2.4.5-1-8.6z"/>\n    <path id="VILA_NOVA_DE_OUREM" class="js-map-target map-target" d="M106 78.6l-.1-11.1-3.8 2.3-.4-2.9.9-1.1-2.3-5.2.4-6.6-2.6-7-4.7 4.5-2.8-3-3.5 6.4-8.8 4.8L76 57l-2-.5-10 4v5.4l2.4 5.8h-2v2.9l7.8 2.7-2.6 7.2-9.1 5.1 2.4 5.7-.2 7.8 3 2.9-.2.2 5.8 6.1 8.7-9.2 1.9-1.1v-2.7l11.6-7.7v-1.9l-1.7-1.9 2.1-7.2 3.8-4.7 3.1-1.3 3.8 4.5v1.8l1.5 1.5 1.3-1.8z"/>\n    <path id="SALVATERRA_DE_MAGOS" class="js-map-target map-target" d="M40.8 219.4l-.1 1.3 1.1 1.8-1 2 2.6-.4 1.2 4.2 2.1.4 3.5 3.8 4.8.2.1 2.4 1.7.4-.3.6L58 233l6.2 1.7 6.3-4.8 3.9-1v-1l3-2.8 1.6-4.2h1.3l.6-1.3-3.1-8.8 2.4-1.5v-1.4l-2.9-2.3-.6-4h-1.8l-2.7-1.1v2.9h-3.3l-.9-1h-3.3l-.8-.8H62l-3.9-2.5v.9l-2.2 2.5v1.3l-6.2 7.2v2.3l-3.7 2-2.7.3z"/>\n    <path id="CARTAXO" class="js-map-target map-target" d="M40 186.2l-4 2.5h-2.9l-1.7-1.8h-3l-1.7 3.3h-2l5.2 5.2 1.2 4.2h2.2l2.5 3.1h3.4l4.1 4.5-1.1 1 3.8 7.1 3.7-2V211l6.2-7.2v-1.3l2.2-2.5v-2l5.1-8.5V187l-3.8 4.6v-2.8l-1.5-4.7-1.3 3.4-2.4 2.8-.7-2.4h-1.7l-3.8-5h-2.9l-1 1.8H40z"/>\n    <path id="RIO_MAIOR" class="js-map-target map-target" d="M39.9 161.9l1.5-1.7v-3l4.1-5.7h-5.6l-4.1-7.7-8.8-1.7v-1.6l3.8-3.9-1-4.1.2-3.4-1.5-2.6h-2.2l-.2.7-7.7 14.9h-3.7l-1.7 1.7-3.2 6.9v5.8l2.2 2.4-1.1 4.5 3.2 2.1-2 7.8 3.9-1.4 4.7 4.1h4.2l4.3-3.1h1.9l.4 1h1.3l1.5 1.5 2.2-1.7 1.7.8 2.7-2.4v-3.8l2.3 1.5v2.1h3v-3.5z"/>\n    <path id="SANTAREM" class="js-map-target map-target" d="M83 152.5l-1.7-2.8 1.5-1.7 2.1-6.4-4.2-2.9h-1.6l-.2 1.7h-1l-2.2-4.3h-1.6l-1.3-2.3-1.3 3.2-1.9-.9-2.2 2.8-2.3-1.3-2.6 1.3-1.1 2.4-3.9-3.5-.9 1.4-2.7 1.7-3.2.3-1-1.1 1.3-2 2.4-3.9h2.7l2.3-1.8L57 130h-2.3l-.1-2.2h-1.9l-1.8-1.1v-1.5l-1.6-1.1h-4l-2.2-1-5.5 1.6h-7.4l-1.7 1.8 1.5 2.6-.2 3.4 1 4.1-3.8 3.9v1.6l8.8 1.7 4.1 7.7h5.6l-4.1 5.7v3l-1.5 1.7 6.3 6.5v3.5h-3v-2.1l-2.3-1.5v3.8l-2.7 2.4-1.7-.8-2.2 1.7-1.5-1.5h-1.3l1.6 4.5 4.4.6 2.5 3.8v1.9h4.1l1-1.8H48l3.8 5h1.7l.7 2.4 2.4-2.8 1.3-3.4 1.5 4.7v2.8l3.3-4 .5-2.2 1.6-7.3 2.4-1.8 4.4-1.3 1.3-2.4v-5.8l2.5-2.5h3l4.1-4.9v-1.9l-3.5-1.8 2.6-3.2z"/>\n    <path id="ALCANENA" class="js-map-target map-target" d="M71.3 124.1v-2.8l-6.3-3.4 6.3-5.6-5.8-6.1-2.7 2.1v1.8l-2 3.3h-1l-1.5 1.5-3.8-3.1-1.6 1.9 2.6 9.9h-2.8l-1.7 1.7-.1 1.4 1.8 1.1h1.9l.1 2.2H57l1.4 2.4-2.3 1.8h-2.7l-2.4 3.9-1.3 2 1 1.1 3.2-.3 2.7-1.7.9-1.4 3.9 3.5 1.1-2.4 2.6-1.3 2.3 1.3 2.2-2.8 1.9.9 1.1-2.8v-5.9l1.8-1.1V126z"/>\n    <path id="TORRES_NOVAS" class="js-map-target map-target" d="M95.7 110.5l4.3-4.6v-1.5l-4.6-7.7V93l-1.9-1.6v.2l-11.6 7.7v2.7l-1.9 1.1-8.7 9.2-6.3 5.6 6.3 3.4v2.8l3.1 1.9v1.2l-1.8 1.1v5.9l.2-.4 1.3 2.3h1.6l2.2 4.3h1l.2-1.7h1.6l4.2 2.9v.2h3.5l4.3-2.9 3.9-5.9-2.1-1.4.3-6 7-4.4v-3.1l-2.8-5.6z"/>\n    <path id="ENTRONCAMENTO" class="js-map-target map-target" d="M94.5 131.6l2.1 1.4h1.8l2.1-3.4v-4.7l1.1-1.8.2-1.9-7 4.4z"/>\n    <path id="ALPIARCA" class="js-map-target map-target" d="M93.5 175.5h-3.1l-3.5-4v-5.2l-3-4.6h-3.3l-2.2 2.6h-3l-2.5 2.5v5.8l-1.3 2.4-.4.1 3.9 5.7 7.9 8.7 1.4 1.2 7.1-7.1v-4.3l3.7-3z"/>\n    <path id="ALMEIRIM" class="js-map-target map-target" d="M99.4 203.1v.5h-2.1v-1.3l2.5-3.3h1.6l2.8-5.3-4.1-2.3-.2-2.8h-1.2v-3l-2.8-1.6-4.4-.5v.1l-7.1 7.1-1.4-1.2-7.9-8.7-3.9-5.7.4-.1-4.4 1.3-2.4 1.8-1.6 7.3v4.1l-5.1 8.5v2-.9l3.9 2.5h1.9l.8.8H68l.9 1h3.3v-2.9l2.7 1.1h1.8l.6 4 2.9 2.3 1.7-2 11.2-1.9 1.3 2.8 1.8.5 6-2.1.2.1-1.1-2.2z"/>\n    <path id="CHAMUSCA" class="js-map-target map-target" d="M146.6 174.8l-5.4-1.6-4-3.9-1.1-4.5h-2.2l-3.4-10.5-2.9-5.7.7-7.5-4.9-4.9-3.1-8.5-1.7 1.6h-2.9l-.3-1.2h-3.3l-1.3 1.7h-5.5l-2.8 2.8 1.3 5.5-3.6 8.3-6.4 4.2-6.3 8.5-5.1.5-1.8 2.1h3.3l3 4.6v5.2l3.5 4h3.1l1.7.8-3.7 3v4.2l4.4.5 2.8 1.6v3h1.2l.2 2.8 4.1 2.3-2.8 5.3h-1.6l-2.5 3.3v1.3h2.1v-.5h1.9l1.1 2.2 5.2.3 2.6 7.1h1.3l2.8-2.1v-2.5h3l2.8-1.1.3-.1 8.4 4.1-8.7-4.2v-2.7l6.8-8.1v-1.9l8.4-5.3h3.5l8.7-8V178l1.2-.9z"/>\n    <path id="GOLEGA" class="js-map-target map-target" d="M98.4 133h-1.8l-3.9 5.9-4.3 2.9h-3.5v-.2l-2.1 6.4-1.5 1.7 1.7 2.8h-1.4l-2.6 3.2 3.5 1.8v1.9l-.1.2 5.1-.5 6.3-8.5 6.4-4.2 3.6-8.3-1.3-5.5 2.8-2.8-.6-1.5-4.2 1.3z"/>\n    <path id="VILA_NOVA_DA_BARQUINHA" class="js-map-target map-target" d="M101.8 121.2l-.2 1.9-1.1 1.8v4.7l4.2-1.3.6 1.5h5.5l1.3-1.7h3.3l.3 1.2h2.9l1.7-1.6.4-.7v-4l1.8-1.9v-1.7h.6v-1.9h-1.4l-2.9-1.6-2.8 2.7v4.4l-2 2h-2l-2.7-2.7v-1.8l-2.2-2.8h-2.3l-3 1.5z"/>\n    <path id="CONSTANCIA" class="js-map-target map-target" d="M122.5 119.4v1.7l-1.8 1.9v4l-.4.7 3.1 8.5 4.9 4.9-.7 7.5 2.9 5.7.3.9h1.5l4.1-2.3 1.2-3.9v-2.6l-.7-.6v-3.1h-1.3l-.8-1.2-4.7-12.2h-1.5l-.8-.8.7-.7h2.1l1.8-1.8-2.2-7.7H128l-1.1 1.1h-3.8z"/>\n    <path id="SARDOAL" class="js-map-target map-target" d="M148.3 96.2l1.1 1.9v1.9l-2.2 1.7v3.7h-1.8v2.8l.9.9-.7 3.2h1.9l-.9 2.7 2.2 2.2h2.1l1 1.1h2l2.1 2.1 1.9-1.9h1.3v-6.9h4.6v-1.7l.1.1v-1.4l.2-.5v-8.5h-1.6v-2.3l-1.8-1.8h-5.1l-3-2.9h-1.8l-1.3 2.1z"/>\n    <path id="TOMAR" class="js-map-target map-target" d="M107.4 80.6l-1.3 1.8-1.5-1.5v-1.8l-3.8-4.5-3.1 1.3-3.8 4.7-2.1 7.2 1.7 1.9v1.7l1.9 1.6v3.7l4.6 7.7v1.5l-4.3 4.6 3.3 2 2.8 5.6v1.1l3-1.5h2.3l2.2 2.8v1.8l2.7 2.7h2l2-2v-4.4l2.8-2.7 6.3-5.6h3.1v-3.1l3.2-3.3h2.8l1.4-2.5 1.9-1.9-1.2-1.3H133l2.6-4.2v-1.5l.8-.8V89l-1-2.4h-6.3v-3l-2.3-2.8v3l-1.9 3.3-2.5.7v-5.3l-2.1-2.1h2.3v-2.9h-5.3l-3.2 3.3-4.6-2.8h-2.1l-.9 1.3z"/>\n    <path id="FERREIRA_DO_ZEZERE" class="js-map-target map-target" d="M136.4 89l-1-2.4h-6.3v-3l-2.3-2.8v3l-1.9 3.3-2.5.7v-5.3l-2.1-2.1h2.3v-2.9h-5.3l-3.2 3.3-4.6-2.8h-2.1l-.9 1.3.9 1.3-1.4-2-.1-11.1 1.2-2.8 3.8-1.9 4.1 2.4 2.4-3.9h2.1l.6-.8 1.6 1v1.9h2.1v-2.3l-.9-1 .8-.8v-2.6l-1.4-1.4.5-.1 4.6 1h3.1l.2 1.6-.1 1.7 3.1 2.1 3.3-2.2 2.7 7.1-2.2 2.1 1.9 1.9v.9l-.7.7v1.2l-1.1 1 1.1 1.1.4.4.9-.9v1.6l-.7.7v7.6l-.5.5V89z"/>\n    <path id="MACAO" class="js-map-target map-target" d="M189 85.2h-4.1v-3.1l1.1-1V69.3l-3.2-3.1V68l-3.2 2.7-3.4-4-1 .9h-2.6l-1-.6-2.9 3.7 1.2 1.4-.8.8v3.2l-1.9 1.9.9 1v4.7h-2.4v1.5l-1.3 1.3 1.3.5 3.4 8h-1.8l-1.2-1.2-1.8 1.7h-3.6l1.8 1.8v2.3h1.6v8.5l-.2.5v1.4l4.9 4.9-1.1 1.1v3.3h.6v6.4h5v-1.4h1.5l2 2.2 1.6-2.1-1.1-3.8 3.7-3.7 4.2-11.5 12.6 6.4 5.2 5.8-.1-.2 1.9-.3 2.6-5.5 2.4-6.2-.5-.4-2.4-4-2-2v-2.4h-1.4v-3.4h-2.1v-1.3l-2.3-2.4h-2.8v-1.8l-3.6-3.6h-2.6z"/>\n</svg>\n'}),define("text!maps/gfx/SETUBAL.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="ALCACER_DO_SAL" class="js-map-target map-target" d="M202.622 164.72h-2.466l-4.084-5.716h-6.942l-5.853-2.722-1.634-3.948h-7.76l6.4-9.12-2.587-2.314h3.267l-.68-3.675h-6.807v-3.676h2.042L164.9 113.266l-5.99 2.723-1.77 2.858h-3.402l-2.178-1.36-2.995 2.994h-1.77l.273-1.906-1.36-2.314H143.8v-3.675l-5.17 1.36 2.857 4.22-4.22 3.54-.136-4.084h-7.485l-.545-5.717-2.586 2.314-4.084-2.314-11.843 1.497-6.26 7.35h-3.677l1.77 2.995-5.036 7.08-10.618.952v5.172l9.256 28.994h4.084l1.974 1.974h19.67l2.177 8.508 17.424 5.31h4.085v-3.132l3.403-1.634v4.9l9.392 7.35v3.268l5.853 2.995h3.812l2.042-2.178h7.078l5.037-5.58 6.67 7.213 2.858-4.492h5.717l3.267-2.994 7.487-1.498v-10.073z"/>\n    <path id="SETUBAL" class="js-map-target map-target" d="M97.384 130.827l5.036-7.08-1.77-2.993h.948l-2.405-1.273-.19-1.996-1.616-1.52 1.616-1.426.475-5.323 1.33-1.52-1.995-1.237-1.046 1.806H93.87l-5.418 3.232-3.137-2.662H83.32l-1.332 2.567-1.14-1.9-5.324-.19-1.045 3.517h-9.127l-.57 2.47h-4.087l-3.992-4.086h-2.09l-4.85-5.702h-1.793l.37 5.513-1.807 2.187v5.038l-1.996 4.467 1.71 4.088 1.332-.286 3.467 6.75h2.33l3.612-3.232.38-2.757h7.89l2.185-5.798.95-.95 1.902 1.9h3.707l5.228 4.943 7.922 4.375z"/>\n    <path id="SESIMBRA" class="js-map-target map-target" d="M51.047 133.263l-3.468-6.75-1.332.287-1.71-4.088 1.995-4.467v-5.038l1.806-2.186-.348-5.204-2.22-.784-1.71 5.99.76 1.52-2.567 1.425-1.378-1.378.143-3.28-3.422 1.806h-1.9l-3.423-4.848h-6.18l-3.385 2.025-1.46 2.347 1.234 10.076-2.376 9.6-3.232 5.704-2.28 6.37 4.89.664 4.9-4.182h6.368l3.517-1.14 1.094-1.094 6.32 1.283 8.46-3.04.965-1.617z"/>\n    <path id="ALMADA" class="js-map-target map-target" d="M19.83 106.553l1.526 3.916 1.354-2.177 3.386-2.025h.166l-.577-3.042-2.535-2.85.855-1.522-.76-.666.76-5.513 2.727-3.327h3.262l1.615-1.806-2.947-2.09.76-3.328-1.426-1.426-6.083 3.042h-9.886L8.05 85.83l3.408 3.803 4.277 6.844z"/>\n    <path id="GRANDOLA" class="js-map-target map-target" d="M182.052 187.726l-5.037 5.58h-7.078l-2.042 2.18h-3.812l-5.853-2.996v-3.267l-9.392-7.35v-4.9l-3.403 1.633v3.13h-4.084l-17.423-5.308-2.178-8.508h-19.67l-1.974-1.974h-4.084l-9.256-28.994v-5.172l.388-.035-7.922-4.375-5.228-4.943h-3.707l-.286-.285v3.802l13.69 13.878 6.083 13.118 2.566 12.262 1.33 21.957-4.373 21.29 16.255 4.85h2.946v-5.134h6.94l2.28 5.418 3.327 2.757 28.517 13.688 5.228-.285 3.517-3.897v-6.178l1.568-1.57.808-7.175 1.568-1.57 3.47 3.47h1.046v-2.28l1.52-1.52v-5.04l2.663.57v-3.326l4.37 2.376v1.806h4.28v-8.08l1.425-3.612 2.756 1.996h4.564l.33-.813z"/>\n    <path id="SANTIAGO_DO_CACEM" class="js-map-target map-target" d="M177.202 236.863l-3.322-6.21-3.755 1.3-2.167-1.925-1.733 1.202-7.908-9.602v4.218l-3.517 3.897-5.228.285-28.517-13.687-3.326-2.756-2.283-5.418h-6.94v5.133h-2.945l-16.255-4.85-4.84 16.57 2.89 2.31-1.734 5.056 1.3.722 3.034-4.045 3.61 4.334-1.588 4.91 8.52 9.1h5.924l-.434 4.48h2.89l-2.456 2.166 3.466 2.31h-3.466l1.444 1.734-1.733 5.056h-3.756l1.444 14.01-3.872.294 9.076 14.043 3.28-3.8 8.462 4.318 2.763-1.38h2.762l3.8-14.333h3.798l-1.21-5.18 2.937-2.418 10.965-.26 2.503-2.503 3.022.95 1.64-1.64 6.562 1.726 1.724.217 3.755.578 5.92 2.827V265.6l4.143-6.735v-7.598l3.453-5.008v-8.634z"/>\n    <path id="SINES" class="js-map-target map-target" d="M109.89 256.364l-3.466-2.31 2.455-2.168h-2.89l.434-4.478H100.5l-8.52-9.1 1.588-4.91-3.61-4.335-3.035 4.045-1.3-.722 1.734-5.056-2.89-2.31-1.01 2.31L81 232.24l-5.2 10.4-2.31 1.88v2.02h2.744l2.312 1.88.577 2.455 2.023-1.156 1.877-.29 3.743 2.022 1.746 5.634.554 1.59 1.398 17.41 3.023 3.5 1.9-2.245h4.49l.075.117 3.872-.293-1.445-14.01h3.755l1.733-5.057-1.444-1.733z"/>\n    <path id="PALMELA" class="js-map-target map-target" d="M122.34 91.106l-1.558-3.942-7.518 3.758-1.467-2.567-3.3-1.833 2.292-2.75-9.17-2.568-4.858 4.4h-3.76l.46-6.14 3.392.824 2.842-2.384 2.933 1.008 3.025-4.858-10.268-2.567V69.72l-4.31 1.492-2.84-1.65-.192-.205-5.386 14.04-12.65 1.224v2.548L68.09 88.39l-3.872-1.324v1.325l-1.426 1.02 1.324 2.344-1.222 1.834-.714 3.362-2.343-3.974H57.39l.51 5.808-5.504 1.733v1.528l-2.63 3.463 4.847 5.703h2.09l3.993 4.088h4.087l.57-2.47h9.126l1.044-3.518 5.324.19 1.14 1.9 1.33-2.566h1.997l3.137 2.662 5.418-3.232h3.897l1.046-1.806 1.996 1.236-1.332 1.52-.475 5.324-1.616 1.425 1.616 1.52.19 1.998 2.405 1.274h2.728l6.26-7.35 6.937-.878-3.48-12.315 4.355-3.158.23-2.242 2.345-1.324 1.41-2.38z"/>\n    <path id="MONTIJO" class="js-map-target map-target" d="M140.584 63.97l3.21 1.1v1.833l-3.485 3.392v1.742l1.558 1.283v2.384l-3.21 1.008-1.833 3.667-4.95 3.3-3.3 1.008v1.56l-4.218 4.858h-2.017l-1.558-3.942-7.518 3.758-1.467-2.567-3.3-1.833 2.292-2.75-9.17-2.568-4.858 4.4h-3.76l.46-6.14 3.392.824 2.842-2.384 2.933 1.008 3.025-4.858-10.268-2.567V69.72l2.842-.984 1.282-7.173 6.968-12.446v-2.842l3.667 4.492 2.533.488 2.667 2.584h2.833l1.417-4.5 4.083-2h2.334l-1.667 2.915v8.25l-1.833 1 4.75 3.917 1.5-1.166 5.417 2.417 6.404-.704zM58.824 81.46v6.42l3.15.305.816 1.223 1.426-1.02v-1.324l3.872 1.325 1.923-1.222V84.62l-1.616-8.253-7.948-4.38-7.337 2.037-3.057-1.835-3.363 2.14-.408 6.874 1.63-.104 7.643-2.593 3.27 2.955z"/>\n    <path id="ALCOCHETE" class="js-map-target map-target" d="M60.446 71.986l7.948 4.38 1.617 8.255L82.66 83.4l5.385-14.04-5.034-5.39-7.06 4.493-4.033-.64-1.467 3.025-2.842-3.21.184-2.658-2.11-7.7-5.59-7.255-.065.487-4.632 6.918 1.677.276 3.85-1.615 1.925 3.042-5.712-.497-4.285 4.78 1.428 1.678 8.135-.42-3.664 2.034h-4.16l-2.237-1.428L49 68.57l1.053 3.62 3.056 1.834z"/>\n    <path id="SEIXAL" class="js-map-target map-target" d="M26.732 89.348l-2.727 3.327-.76 5.513.76.666-.855 1.52 2.535 2.852.577 3.042h6.013l3.422 4.848h1.9l3.423-1.806-.143 3.28 1.378 1.377 2.567-1.425-.76-1.52 1.71-5.99-.296-1.754v-3.41l-1.786-3.79V94.51l-3.085-5.36-3.14-.54-3.193.487-2.663-1.555-1.616 1.806z"/>\n    <path id="BARREIRO" class="js-map-target map-target" d="M46.45 91.48v-7.903l2.274-1.95.094-.834-.905.307-1.63.104-.51.586-2.083.217-1.678 2.814-3.572 1.733-1.292 2.106.318-.05 3.14.54 3.084 5.36v1.57l1.786 3.788v3.41l.297 1.754 2.22.784-.022-.308h1.795l2.63-3.463v-1.528l.28-.088v-5.65H50.51z"/>\n    <path id="MOITA" class="js-map-target map-target" d="M62.892 93.588l-.714 3.362-2.343-3.974H57.39l.51 5.808-5.504 1.733.28-.088v-5.65H50.51l-4.06-3.3v-7.903l2.274-1.95.094-.834 6.737-2.286 3.27 2.955v6.42l3.15.305.815 1.223 1.324 2.344z"/>\n</svg>\n'}),define("text!maps/gfx/VIANA_DO_CASTELO.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="VIANA_DO_CASTELO" class="js-map-target map-target" d="M10.57 206.03l7.635 22.91 7.342 4.11-1.762 6.168 4.7 15.565 35.242-11.747 4.405 3.818 2.937-6.755v-17.916l-7.05-5.874 1.47-4.405-8.812-13.51 1.762-12.628-14.684-5.58-1.468 10.28-18.503-2.644-3.818 7.636-6.754-4.113"/>\n    <path id="CAMINHA" class="js-map-target map-target" d="M53.62 167.495H49.82v-2.517l-8.055-2.797-3.972-5.09-1.957-7.327H28.17l-15.215 18.74v5.537l-1.146 1.146v7.02l2.837 2.84v2.474l-2.25 1.79.816 2.037 6.754 4.112 3.818-7.637 18.503 2.643 1.468-10.28 14.684 5.58 3.684-4.79 1.342-7.328z"/>\n    <path id="VILA_NOVA_DE_CERVEIRA" class="js-map-target map-target" d="M64.797 144.992v-9.91l-.91-.91v-5.892l-2.572-2.57-3.75 2.14H54.78l-9.963 6v7.393l-8.92 8.763 1.894 7.085 3.973 5.09 8.055 2.798v2.517h3.803l9.846 6.153 3.527-2.838v-3.535l-4.178-7.874h3.053l2.57-2.57 3.804-3.803v-8.035z"/>\n    <path id="VALENCA" class="js-map-target map-target" d="M95.918 110.71v-5.14h-9.963l-2.143-2.144-13.39 2.464v3.642l-3.75 3.107v8.14l-4.982 5.304 2.196 2.196v5.892l.91.91v9.91h7.446l3.107-.643 4.284-5.143 7.392-2.57 5.678-8.357 7.392 3.32v-16.845z"/>\n    <path id="MELGACO" class="js-map-target map-target" d="M209.1 98.25l-7.047-3.82L185.9 100.6V80.04l1.468-3.23-4.405-5.58-7.048 6.754-4.112-3.377-4.7 2.496.882 4.7-20.558 12.628 12.922 37.005h4.845l5.14-14.097 7.342 2.937 4.11-3.818 2.644.588-.787 11.67-5.966 9.77 1.468 10.278 12.63-16.447v-4.7l5.58-1.76 2.348-5.58 10.867-3.23z"/>\n    <path id="MONCAO" class="js-map-target map-target" d="M147.427 94.43l-3.194-2.36h-3.107l-3.428 5.678h-2.035l-1.5-2.357h-2.892l-3.32 2.894h-3.214l-1.93-1.93h-22.174v5.25l-4.714 3.965v5.14l4.178 4.045V131.6l4.553.27 2.516 2.516h4.18l1.927-2.25h10.07v-3h18.962l6.963-2.25v-2.248h8.707z"/>\n    <path id="ARCOS_DE_VALDEVEZ" class="js-map-target map-target" d="M184.43 117.045l-2.642-.588-4.11 3.818-7.343-2.937-5.14 14.097h-4.846l-2.375-6.797h-8.707v2.25l-6.963 2.25h-18.962v3h-10.07l-1.928 2.248h-4.18l-2.24 8.203 3.91 6.554v8.67l-5.18 6.978-2.643 5.92-.916 4.97-.987 5.603 2.22 1.163v5.71l1.585 4.65h9.093l1.797-3.276h11.736l1.587-2.432h4.018l1.48-1.692h6.238l1.586 1.692h8.35l2.856-5.815h3.277l6.027-6.66v-3.278l21.674-5.498v-5.393l-3.912-3.912v-5.71l.423-2.072-1.468-10.28 5.966-9.77z"/>\n    <path id="PAREDES_DE_COURA" class="js-map-target map-target" d="M90.823 165.856l-2.578 1.82h-6.37l-5.763 6.673-5.61-3.792-3.51-.24v-3.043l-4.177-7.874h3.053l2.57-2.57 3.804-3.803v-8.035l3.107-.643 4.284-5.143 7.392-2.57 5.678-8.357 7.392 3.32 4.553.27 2.516 2.516-2.242 8.203 3.912 6.554v8.67l-5.18 6.978-2.644 5.92-.066.362z"/>\n    <path id="PONTE_DA_BARCA" class="js-map-target map-target" d="M189.858 163.43l-7.224 2.42-21.674 5.497v3.277l-6.027 6.66h-3.277L148.8 187.1h-8.35l-1.587-1.692h-6.238l-1.48 1.692h-4.018l-1.586 2.432h-11.735l-.846 1.544.764 1.733-2.275 5.957 3.942 2.73-2.88 8.34 3.487 2.73 1.667-1.667 8.342-6.522 9.856-1.213 2.58-3.792 4.245 4.4 4.096-.608h8.256l1.602-1.365 1.82-6.066 6.673 4.094 10.465-6.218 7.43-7.583h3.792l3.944 1.972v-17.14z"/>\n    <path id="PONTE_DE_LIMA" class="js-map-target map-target" d="M115.392 201.497l-3.943-2.73 2.274-5.958-.765-1.734-.952 1.733h-9.093l-1.586-4.653v-5.71l-2.22-1.162.986-5.603.85-4.608-10.123-5.218-2.578 1.82h-6.37l-5.763 6.673-5.61-3.792-3.51-.24v.492l-3.526 2.838-1.342 7.328-3.684 4.79-1.762 12.63 8.81 13.51-1.468 4.404 7.05 5.874v17.227l2.616.305v2.882h3.488l3.488 3.488 5.156-3.792 4.095 6.977 8.038-1.972v-6.37l-3.184-5.46 2.73-4.55 3.034-.15 2.426-13.65-1.516-1.517 8.34-5.004v4.095l6.22-2.122-3.49-2.73z"/>\n</svg>\n'}),define("text!maps/gfx/VILA_REAL.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="CHAVES" class="js-map-target map-target" d="M203.478 96.94l-3.72-13.02 3.255-10.23-1.705-3.255.97-1.224-2.83.295-3.874 3.41h-3.255l-7.286 4.34-4.34.775-1.705 2.79-9.3-.31-1.55-3.875-13.794 13.794.93-3.72-1.24-1.55 1.084-1.705-5.27-2.325v-3.72l1.396-.93-2.325-2.015h-6.974l-1.24-2.48-4.65 2.325 2.325 3.72-5.114 3.41-9.454 2.79h-4.495l-4.03-.775 1.24 3.1h3.41l3.41 4.494-2.635 2.014-.93 3.41 3.565 2.325-1.085 3.72 3.875 6.2-7.75 8.368v7.285l1.86 5.115-3.1 4.495-2.635.31v4.65l5.812 3.72v5.424l2.984 2.984 4.69-5.618h4.493l.776-1.86 3.565 3.41v3.875l1.55 3.1 2.326-3.72h3.875l7.44-6.355v-3.41l-2.79-3.1 5.58-1.705v-2.634l2.325-1.395-3.41-4.65v-3.565h3.41v-3.565l4.805-1.162 1.59 1.588 2.13.66-.62 4.184v2.48h2.79l1.705-4.34-2.17-3.41v-3.875l7.595-3.255 4.804-5.58 6.355-8.68h9.3l1.24 2.79 3.873-.774v-2.79l3.323-.537z"/>\n    <path id="VALPACOS" class="js-map-target map-target" d="M207.508 104.534l1.395-4.185-5.425-3.41.378.237-3.323.537v2.79l-3.874.775-1.24-2.79h-9.3l-6.356 8.68-4.804 5.578-7.595 3.255v3.875l2.17 3.41-1.705 4.34h-2.79v-2.48l.62-4.185-2.13-.66-1.59-1.587-4.805 1.162v3.565h-3.41v3.565l3.41 4.65-2.325 1.395v2.634l-5.58 1.705 2.79 3.1v3.41l-7.44 6.355h-3.874l-2.325 3.72-1.55-3.1v-3.875l-.283-.272-3.28 4.922v7.284h3.874l6.82 19.22 4.496.31 1.395-2.015h2.17l4.495-7.75 4.03 2.636-.465 4.34 4.34 3.565-.93 2.635-3.875.31.31 6.355 8.37 5.115 4.185-4.185h3.254v-2.325h6.355l-.776-4.65 3.565-10.54h13.174l-7.285-15.498 1.704-3.1-2.713-2.713 3.334-7.672-.31-4.03 7.13-13.64 1.084-9.61 2.858-1.394.862-3.564 3.875-4.185z"/>\n    <path id="MURCA" class="js-map-target map-target" d="M171.003 218.727l-1.85-4.57 2.126-1.58-3.173-6.52v-4.7l1.48-4.79-1.48-2.912.013-.107-8.195-5.008-.31-6.355 3.875-.31.93-2.634-4.34-3.564.465-4.34-4.03-2.635-4.494 7.75h-2.17l-1.394 2.016-4.495-.31 2 5.16-5.85 10.812-3.59-3.59-5.184 4.033h-3.81l-7.09 9.662 6.735 1.95h5.14l2.838-1.507 3.988 5.052h8.154l2.66-1.773 3.455 5.14h5.407v3.635h3.457l1.86 3.455v2.482l-.85.85 1.684 1.684 4.484.835 1.152-2.216 3.634-.09 4.874-1.24 4.066.725-7.925-3.222z"/>\n    <path id="MONTALEGRE" class="js-map-target map-target" d="M120.132 96.702l-.35-.228.93-3.41 2.635-2.015-3.41-4.495h-3.41l-1.24-3.1 3.542-10.477 2.782-3.036h-16.19l-2.152-3.29h-2.024l-3.036-4.426-4.3 1.138-4.05 3.67-4.426-2.025-6.072 3.667H67.345v6.325l-5.693 1.012-1.012 3.542-3.92-3.29 1.643-19.1h-4.806L50.774 71.08l-7.717 1.52-5.06-.887-3.415 7.337h-2.024l-2.024 5.692h-4.68l-3.188 2.96.53-.177 1.266 5.187-3.29 3.795v7.59l-3.414 3.415-1.392 7.084-7.463 9.107 14.927-.632 1.77-2.276 4.05 3.415 8.6 2.403-4.047 7.97-.127 9.487.38 4.174 3.288.76 3.922-1.393 2.656 3.417h5.313l3.542 1.897h2.277L57.1 150.9l3.034 2.024 5.187-7.627-10.75-4.896 1.01-1.896-4.438-3.67 1.403-2.276h2.53l1.138-3.542v-8.222l2.657-3.036 4.68 2.403v2.152l3.415 1.265 1.14-2.53v-4.807l1.264-3.162h3.92l1.518 3.795 2.783-2.53 3.67 3.92h2.403v-2.655h15.812l5.566-2.53 3.163-4.175v-4.554l8.476-9.867z"/>\n    <path id="BOTICAS" class="js-map-target map-target" d="M117.147 133.983l3.1-4.495-1.86-5.115v-7.285l7.75-8.37-3.875-6.2 1.085-3.72-3.215-2.096-3.453-2.22-8.477 9.867v4.553l-3.162 4.175-5.565 2.53H83.663v2.656H81.26l-3.67-3.92-2.782 2.53-1.518-3.796h-3.92l-1.266 3.162v4.807l-1.14 2.53-3.414-1.265v-2.15l-4.68-2.404-2.657 3.036v8.222l-1.138 3.542h-2.53l-1.403 2.277 4.44 3.67-1.013 1.896 10.75 4.897h2.377l5.24 9.578h1.414l1.997-2.994h2.66l5.74-8.566v-5.99l5.906-2.66 6.155 5.572v1.33l-2.662 2.08v3.494l-3.992 2.412v3.743l2.495 1.497h5.156v-2.495H95.31l1.165-2.412 6.82-2.828v-2.288l3.16-4.367 6.24-1.664 1.817.202v-4.65z"/>\n    <path id="SABROSA" class="js-map-target map-target" d="M115.65 272.895l4.258 1.123h1.833l7.034-5.792 1.25-2.684-.363-2.917 2.146-2.098-.953-2.43 1.43-4.426v-7.457l-12.63-29.338v-9.53l-3.097.952-2.044-6.672-6.087 4.645 1.197 2.26.4 3.856h2.392l5.716 6.248-2.79 7.578 1.062 5.45-3.19 7.446-4.92 3.456 3.99 2.526-2.66 2.526v4.255l-2.393 4.122 2.392 3.59.665 5.982-1.463 1.595-.266 1.86-2.66 3.19 4.786 1.276 3.193-.59z"/>\n    <path id="ALIJO" class="js-map-target map-target" d="M135.903 267.134l3.597-5.524h7.9l4.368-4.688 3.245 1.117 2.442-2.295-.814-2.515v-3.33l2.072-2.22 5.475 1.63v-1.63l-1.554-1.11v-2.736l1.998-3.478-1.627-1.33v-1.85l6.215-5.92-2.367-2.22 2.598-3-4.484-.835-1.684-1.683.85-.85v-2.482l-1.86-3.456h-3.458v-3.635h-5.407l-3.456-5.14-2.66 1.772h-8.154l-3.988-5.052-2.837 1.507h-5.14l-6.735-1.95-.78 3.112v9.53l12.627 29.34v7.457l-1.43 4.428.954 2.43-2.145 2.097.364 2.917-1.25 2.684 1.734-3.725z"/>\n    <path id="VILA_POUCA_DE_AGUIAR" class="js-map-target map-target" d="M143.96 178.156l-6.82-19.22h-3.874v-7.284l3.28-4.922.285.272-3.564-3.41-.775 1.86h-4.493l-4.69 5.62-2.983-2.985v-5.425l-5.812-3.72-1.818-.203-6.238 1.663-3.16 4.366v2.287l-6.82 2.828-1.165 2.412h2.496v2.495H92.65l-2.42 4.45h-4.214v5.168l10.256 7.235-2.385 3.816-5.088-4.133-3.34 6.52h-3.578l-2.305 2.145 3.577 5.883 7.235 3.34 1.59 3.736-1.432 2.783v4.055l17.877 6.482 6.087-4.645 2.044 6.672 3.098-.953.78-3.112 7.09-9.66h3.812l5.185-4.034 3.59 3.59 5.85-10.813z"/>\n    <path id="RIBEIRA_DE_PENA" class="js-map-target map-target" d="M91.98 192.95l-1.59-3.736-7.236-3.34-3.577-5.882 2.305-2.146h3.578l3.34-6.52 5.087 4.135 2.385-3.815-10.256-7.235v-5.167h4.214l2.42-4.45-2.496-1.498v-3.743l3.992-2.412v-3.494l2.662-2.08v-1.33l-6.155-5.572-5.906 2.66v5.99l-5.74 8.567h-2.66l-1.996 2.995h-.32l-.274 3.27-2.45 2.94-2.722-.11v5.907l-5.554 3.35v4.464h-6.207l-1.524.436.98 1.524-2.397 4.792.87 2.613-1.74 2.288 5.88 7.514h2.83l2.94-1.198 6.317 5.445.98 3.515h8.167l3.702 2.364h4.246l2.472-4.202v-4.055z"/>\n    <path id="MONDIM_DE_BASTO" class="js-map-target map-target" d="M71.96 201.625l-.98-3.516-6.316-5.446-2.94 1.198h-2.832l-5.88-7.514 1.742-2.287-.87-2.612-1.634-1.525-3.267 1.416-1.525 3.375-1.198 4.79 1.416 3.16-.673-.28.455 3.982-5.88 4.573.653 3.812h-2.177l-1.524 3.05 2.503-.764-.435 5.554-.314.377v3.51h3.293l1.854 2.966v1.112l-3.93 3.486 2.3 3.337h4.45l4.762 6.007 2.513-2.513v-1.343l7.926-3.633h2.152l6.674-9.566v-5.264l1.483-3.41 4.82-3.19v-2.84z"/>\n    <path id="VILA_REAL" class="js-map-target map-target" d="M110.287 265.564l-.665-5.983-2.393-3.588 2.392-4.12v-4.256l2.66-2.526-3.99-2.526 4.92-3.456 3.19-7.445-1.063-5.45 2.79-7.58-5.716-6.247h-2.393l-.398-3.856-1.197-2.26-17.877-6.482-2.472 4.2H83.83l-3.703-2.363H78.58v2.84l-4.82 3.19-1.484 3.41v5.266l-6.674 9.567h-2.15l-7.927 3.634v1.344l-2.513 2.513-1.657 3.343.828 1.82v2.788h3.476v6.73l4.183-3.88 4.85-1.092h6.91l3.033 3.153 2.182-1.7v3.154l3.76 1.455v-4.61l5.637-3.277 1.76 1.76v3.458h-1.578v6.185l-1.88 2.183v1.697l4.366 3.335 2.79-1.88 4 2.668h3.092l.88.88h3.182l6.356 5.21z"/>\n    <path id="SANTA_MARTA_DE_PENAGUIAO" class="js-map-target map-target" d="M84.518 254.858l1.88-2.183v-6.184h1.578v-3.457l-1.76-1.76-5.64 3.278v4.61l-3.758-1.456v-3.153l-2.182 1.7-3.032-3.154h-6.91l-4.85 1.09-4.185 3.88 5.27 2.394h4.65v4.39l3.573-1.893 1.27 1.27-1.098 2.56v4.48l2.583 2.582h5.812v2.065l6.415 3.1h2.67l2.078-9.125-4.365-3.335z"/>\n    <path id="PESO_DA_REGUA" class="js-map-target map-target" d="M102.827 261.557h-3.183l-.88-.88h-3.09l-4.002-2.667-2.79 1.88-2.078 9.125h-2.67l-6.414-3.1v-2.066h-5.812l-2.583-2.584v-4.478l1.098-2.56-1.27-1.27-3.573 1.893v-4.39h-4.65l-1.236-.56v2.784l-3.235 6.72 1.342 1.343v.498l2.39 2.19v2.49h7.067l1.343 1.342 2.04-1.443 1.99 2.29-2.886 4.653v2.215h1.494l1.892 2.19h2.09v-4.18l1.792-.797h1.792l3.086 2.787h4.403l4.655 2.19h4.68l.944.946h2.937l1.773-3.136 4.616-2.77 2.658-3.19.266-1.863.36-.392z"/>\n    <path id="MESAO_FRIO" class="js-map-target map-target" d="M69.747 272.767l2.887-4.653-1.99-2.29-2.04 1.443-1.345-1.343h-7.07v-2.49l-2.388-2.19v5.576l-2.444 2.444 2.34 2.34-2.185 2.184v2.29l-2.39 3.085v4.977h2.888v-3.982H58v-3.086l2.29-1.89.947-.947h8.51z"/>\n</svg>\n'}),define("text!maps/gfx/VISEU.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 340">\n    <path id="SAO_JOAO_DA_PESQUEIRA" class="js-map-target map-target" d="M205.48 100.668l-.17-.946 1.823-4.697 1.15-8.914 3.738-7.283.135.053-2.957-1.327h-6.974l-.987-3.092h-2.04v-2.104l-3.684-7.172-7.368-3.618-2.886-.994-3.885 4.17h-7.026l-3.2 4.912-4.797-2.342-1.542 3.313 4.57 3.255v2.97l2.228 4.227-5.426 3.713v1.656l10.738 1.314 3.312 1.542-4.055.742-3.313 2.742 1.828 8.167-1.028 4.428-.457 5.57 6.054 2.97 3.828.34 1.428-3.368v-8.34l3.17-3.17 5.398-.37V96.27l5.31 1.485v2.913z"/>\n    <path id="CASTRO_DAIRE" class="js-map-target map-target" d="M127.614 126.63l-1.747-1.746 1.31-1.31v-2.096h-2.01l-5.064-1.66-4.89 5.502-6.637-6.637-3.406-2.008h-5.415l4.105-7.86-11.004 1.572-2.532 4.104v2.71l-2.882 4.103h-3.58l-6.9 2.882-4.454-5.49H63.66l-8.015 8.676 1.397 5.81v4.58l.795-1.26 2.445-5.154h4.54l4.106 1.223.35 2.968h4.453l-2.008 3.842-.61 3.494 2.444.524 4.105-3.057 1.398 1.398-1.878 3.1 2.402 2.402 2.926-1.135v3.624l-1.878 1.877 7.86 3.23-1.485 5.765h4.716l2.62 5.065 4.105-.262 6.725 3.144 4.454-4.018 2.358-6.55 4.628-3.32v-2.444l-4.628-3.057v-2.88l-4.105-4.89v-5.24h2.358l7.51-8.472 5.59 3.493 2.88-1.833h2.097z"/>\n    <path id="MOIMENTA_DA_BEIRA" class="js-map-target map-target" d="M168.222 124.185l1.485-10.742-8.81-8.19-7.87-4.91-2.97 9.694-4.803-2.62-2.008 6.114-6.113-5.152h-4.542v16.244l-5.555 1.43.58.578.69 2.68 10.18-1.064 1.88 1.877-2.446 8.908-2.796 4.455 4.54 8.47 1.748-1.833 3.93 1.223.35-2.533 3.405-1.572-3.755-.786 2.096-1.572-.524-3.842h2.794l6.637-6.2 6.2-.35 4.193-4.367-2.096-1.746.786-3.668z"/>\n    <path id="VILA_NOVA_DE_PAIVA" class="js-map-target map-target" d="M135.124 143.485l2.795-4.454 2.444-8.907-1.878-1.877-10.18 1.065.006.027h-2.096l-2.88 1.834-5.59-3.492-7.51 8.47h-2.36v5.24l4.106 4.892v2.88l4.628 3.058v2.445l9.17 12.838.087 3.58 4.192 2.01h2.706l1.048.61.786-1.396-.873-2.62.35-4.104 4.278-9.694-1.31-2.27 2.62-1.66z"/>\n    <path id="SERNANCELHE" class="js-map-target map-target" d="M188.768 140.862l2.492-6.962.774-1.03-5.415-6.276 1.546-3.35-4.383-5.416-.886-3.584-3.636-.325-6.053-2.97.213-2.593-2.013 1.22-1.7 3.866-1.485 10.742-2.794.524-.786 3.667 2.096 1.746-4.192 4.367-6.2.35-6.638 6.2h-2.794l.524 3.842-2.096 1.572 3.755.786h3.23l3.266 7.63 2.492 2.15 1.977-5.587 4.297-4.555h8.422l12.376 14.18 9.283-15.9-2.75-2.148z"/>\n    <path id="SAO_PEDRO_DO_SUL" class="js-map-target map-target" d="M91.72 160.602h-4.715l1.485-5.764-7.86-3.23 1.878-1.88v-3.623l-2.926 1.135-2.402-2.4 1.878-3.102-1.397-1.397-4.104 3.058-2.445-.524.612-3.494 2.01-3.842h-4.455l-.35-2.97-4.104-1.222h-4.54l-2.446 5.153-.795 1.26v2.186l2.353 2.353 1.765 5.514v3.162l-4.633 2.06-7.207-4.633-4.56 5.44h-1.617l-6.103-5-4.515 2.17 3.625 6.94-2.32 6.593 5.29 1.465v1.384l-4.434 7.283 5.574 3.296h6.754l.814-1.098 8.3 4.72 5.78.854 5.736-2.442 2.238.65 1.87-2.97 2.036 2.238 1.668-1.587 1.912-4.273h3.5l.976.977h5.29l7.69-7.976-.483-1.4z"/>\n    <path id="TABUACO" class="js-map-target map-target" d="M180.232 89.302l-3.312-1.542-10.738-1.314V84.79l5.426-3.713-2.228-4.227v-2.97l-4.57-3.255-6.254 5.15h-1.63l-3.785-.998h-1.577l-2.84.526 3.314 3.785-1.735 1.683v9.254h3.154v4.68l-1.104.683.616 5.148 7.93 4.718 8.81 8.19 1.7-3.866 2.012-1.22.244-2.976 1.028-4.427-1.828-8.167 3.313-2.742z"/>\n    <path id="TAROUCA" class="js-map-target map-target" d="M115.213 125.32l4.89-5.502 5.065 1.66h2.01v2.096l-1.31 1.31 1.167 1.168 5.556-1.43v-16.244h4.543l6.113 5.153 1.893-5.762h-2.213l-.214-2.452-2.35-2.346-2.235 2.772-3.626-1.813v-3.606h2.433l1.3-1.3-3.626-4.8h-7.466l1.168 2.347-2.34.534-1.708 3.52 2.346 2.56-2.49 2.665h-6.574l-1.706 4.265-4.372.64v2.985l-1.707 2.24-.663 3.225z"/>\n    <path id="PENEDONO" class="js-map-target map-target" d="M197.014 138.27l-4.98-5.4-5.415-6.276 1.546-3.35-4.383-5.416-.886-3.584.19.017 1.43-3.368v-8.34l3.17-3.17 5.397-.37V96.27l5.31 1.485v2.913h7.087l-.17-.946 1.535 8.53.635.256-1.885 2.746-7.787-.476 1.43 3.483-.953 1.762 10.648 4.513-1.43 9.95-5.563 1.43-3.67 6.356z"/>\n    <path id="SATAO" class="js-map-target map-target" d="M159.508 172.757l-8.105-3.337 3.814-6.04v-3.02l2.868-3.34-2.492-2.15-3.266-7.63h-3.23l-3.406 1.572-.348 2.533-3.93-1.223-1.747 1.834-2.62 1.66 1.31 2.27-4.28 9.694-.348 4.104.873 2.62-.786 1.397-1.048-.61h-2.707l-4.193-2.01-3.23 10.1 4.77 2.86-4.292 8.265 2.702 2.383 5.88-4.926 5.88 2.543 8.582-6.675 4.607 1.27 6.04-2.052v-2.08l6.038-4.925z"/>\n    <path id="NELAS" class="js-map-target map-target" d="M127.724 227.903l-6.834.954-10.807-8.9h-3.814l-2.385-2.066-3.973 1.113.242-.368-2.466 2.434.635 2.383-6.833 7.31 2.066 11.602 5.244 8.423 11.76-8.9 4.25-.947.36-2.866h6.99l5.087-4.132.955-.297z"/>\n    <path id="CINFAES" class="js-map-target map-target" d="M65.28 91.56l-2.536-2.165-6.705 4.45H52.63l-6.265-2.252H41.53L39.17 94.87h-2.033l-2.308 2.438H30.76v1.42h.78l1.444 1.443h3.032v3.08h1.54v4.86h-2.214l1.036 4.182 2.133-1.76 3.898 1.984-2.06 1.03v3.015l3.898-1.323 3.236 2.427h3.53l1.397 2.794h3.014l3.346-3.713 2.758-2.758v-2.132h2.132v6.84h8.848l4.454 5.49 6.9-2.882h3.58l2.882-4.104v-2.71l.314-.508-4.76-2.086-.86.86H83.3l-1.013-1.015 1.674-2.642v-3.26l-2.29-4.76-6.037-5.023v-4.538l-1.19-1.19-3.348 1.234z"/>\n    <path id="RESENDE" class="js-map-target map-target" d="M101.875 81.236h-1.77v3.54h-2.568l-2.39.532H93.73l-.796-1.062H90.1l-1.68 1.682H86.47l-5.134 2.832h-3.01l-2.695 2.897v4.398l6.037 5.023 2.29 4.76v3.26l-1.673 2.643 1.013 1.015h1.72l.858-.86 4.76 2.087-.314.51 2.532-4.105 4.148-.593.8-4.834 5.044-6.232 2.833-5.807V90.09l3.72-4.072-1.772-2.567v-1.594l-3.717-5.046-2.035 1.682z"/>\n    <path id="LAMEGO" class="js-map-target map-target" d="M129.05 90.53v-7.17l2.48-2.478V78.58h-.355l-4.14-1.947h-3.915l-2.745-2.48h-1.593l-1.593.71v3.717h-1.86l-1.682-1.947h-1.328v-.664h-7.57l-.84.84 3.718 5.046v1.593l1.77 2.566-3.717 4.072v2.833l-2.832 5.808-5.045 6.232-.8 4.834-4.147.593 11.004-1.572-4.105 7.86h5.415l3.406 2.008.52.522.665-3.225 1.708-2.24v-2.986l4.372-.64 1.706-4.265h6.574l2.49-2.667-2.346-2.56 1.707-3.52 2.342-.532-1.168-2.345-.04-1.747z"/>\n    <path id="ARMAMAR" class="js-map-target map-target" d="M153.456 90.024h-3.154V80.77l1.735-1.682-3.313-3.785-4.255-1.134-4.106 2.463-1.576 2.788h-2.612l-.84-.84h-3.807v2.302l-2.48 2.478v7.17l-1.947 1.948.04 1.747h7.466l3.624 4.8-1.3 1.3h-2.432v3.604l3.626 1.812 2.236-2.772 2.35 2.346.213 2.452h2.212l.114-.35 4.804 2.62 2.91-9.503-.616-5.148 1.104-.683z"/>\n    <path id="PENALVA_DO_CASTELO" class="js-map-target map-target" d="M161.67 202.08l2.73 1.54 3.52-3.52-1.257-1.256v-4.022l2.724-2.388-.964-.964h-4.44l-7.177-6.622-6.04 2.053-4.607-1.27-8.583 6.675-5.88-2.543-5.88 4.926-4.07 5.664 5.28 3.436 3.1-1.76 1.928 1.173-1.508 2.013 1.508 1.76h2.18l3.1-1.174 1.592 1.59 4.86 1.342 5.95-.754v-4.106h10.14z"/>\n    <path id="VISEU" class="js-map-target map-target" d="M98.323 223.453l-.635-2.384 2.466-2.435 3.36-4.346h2.543l2.702-2.703h3.02l4.793-4.794h5.175l2.074-2.074h2.048l1.53-1.143-.372.21-5.28-3.435 4.07-5.664-2.703-2.383 4.29-8.264-4.767-2.86 3.23-10.1-.088-3.58-9.17-12.837-4.628 3.32-2.358 6.55-4.454 4.016-6.725-3.145-4.104.262.484 1.4-7.69 7.977h-5.29l-.976-.977h-3.5l-1.912 4.272-.243.23h2.344l1.484 4.57-.847 2.33-1.695 4.77 1.06 1.164-2.755 1.8-1.166 3.92-3.39 3.074H68.34l-4.45 5.933 3.92 3.71h3.18l5.932 6.144 1.907-1.166 1.694 1.696 3.708 1.377-1.06 4.45-1.06 1.802-2.224 1.907v3.283h4.132l3.92 1.378h3.6z"/>\n    <path id="MANGUALDE" class="js-map-target map-target" d="M159.54 217.614l4.86-11.06v-2.934l-2.73-1.54-1.794 1.792h-10.14v4.106l-5.95.754-4.86-1.34-1.59-1.593-3.102 1.172h-2.18l-1.507-1.76 1.508-2.01-1.927-1.174-2.73 1.55-1.528 1.14h-2.048l-2.074 2.075h-5.175l-4.794 4.794h-3.02l-2.703 2.702h-2.542l-3.36 4.345-.023.307-.22.06 3.973-1.11 2.384 2.065h3.813l10.807 8.9 6.834-.954.478 5.742 6.46-2.722 2.756-2.967h3.39l1.166-1.165h2.542v-2.118l6.78-2.543 2.226 1.27 5.72-1.165 1.262-.808-.963-.964z"/>\n    <path id="VOUZELA" class="js-map-target map-target" d="M79.04 183.14l-1.483-4.57h-2.344l-1.425 1.356-2.035-2.238-1.87 2.97-2.24-.65-5.736 2.44-5.778-.854-.26-.147v2.68h-1.106v1.887l-3.983 5.09-1.413-1.416H47.45l-.944.943-5.934 1.708-1.284-1.284h-3.74l-1.528 1.528-2.276 2.276v4.422l-2.73 2.926 2.015 1.95-1.497 3.4 4.357 2.91 1.496-2.797 4.942.064-.13 3.77 4.812 2.863 5.723.26 2.73-3.707v-5.332l8.39-.13 2.037.673 4.45-5.932h1.907l3.39-3.073 1.166-3.92 2.754-1.8-1.06-1.166 1.696-4.77z"/>\n    <path id="OLIVEIRA_DE_FRADES" class="js-map-target map-target" d="M55.87 181.447v2.68h-1.106v1.887l-3.983 5.09-1.413-1.416H47.45l-.944.943-5.934 1.708-1.284-1.284h-3.74l-1.528 1.528-2.276 2.276v4.422l-2.73 2.926 2.015 1.95-1.497 3.4h-2.666l-1.815-1.253v-8.207l-1.096-2.954.928-3.896H22.1l-3.375-3.865.844-3.037-2.363-3.796 7.76-2.784 4.725-4.218.76-3.543 2.073-2.194-.555-2.952 1.86-.31 5.29 1.465v1.384l-4.434 7.283 5.574 3.296h6.754l.814-1.098 8.042 4.572zm-15.672 30.058l.13-3.77-4.942-.066-1.496 2.795v1.56h3.642l.39 3.447 4.422 1.366-.91.91-.91 1.626v4.552h4.486v-2.276l5.267-4.487.456-2.536-5.723-.26-4.812-2.862z"/>\n    <path id="MORTAGUA" class="js-map-target map-target" d="M33.646 237.114l-2.32 2.207-4.52-1.147-5.308 3.157-3.27 1.67v4.344l2.33 3.18v4.872h-2.12L15.51 259l1.445 1.058-1.445 2.543h-1.733l.424 3.497-.84.332v4.135l-1.205 1.507.753.98 2.26-.725 3.37 3.945v-1.845h4.58l5.345 6.998h1.972l2.672 2.608h1.336l.795-.795 1.146 1.145v-2.513l4.866-2.48 1.4.89 1.972-1.082 1.145 1.972h1.59l.217-.444v-3.187l.106-3.073 1.907-1.06-2.86-3.072 3.178-2.437-1.165-4.344 1.27-.74-.93-2.014 2.202-8.158h-1.27l-1.696-4.662H46.41l-3.18-2.33v-2.12l-3.708-7.416h-3.39l-2.242 1.06z"/>\n    <path id="SANTA_COMBA_DAO" class="js-map-target map-target" d="M72.684 251.582v-.794h-2.967v-1.96h-1.59l-3.6 2.436-2.968.106-.424-2.86-3.497 3.284h-5.192l-1.3 1.344-2.068 7.662.93 2.013-1.27.74 1.165 4.345-3.178 2.437 2.86 3.073-1.907 1.06-.106 3.07v3.188l-.216.444 1.21-2.48 2.734 2.162h4.072l.173.173.503-1.79 3.178.74 5.086-5.19 2.013.318 1.8-3.073 2.438.106 1.695-2.543-2.543-1.483-.635-3.602.847-3.39-1.378-2.013v-2.12z"/>\n    <path id="CARREGAL_DO_SAL" class="js-map-target map-target" d="M98.8 250.788l-5.244-8.423-2.066-11.6.05-.054h-3.6l-.013-.004-.622 1.488 1.377 3.602-10.277 7.59 1.06 1.628-.424 1.59-6.144 2.965-.348 1.218h.136v.794l-4.132 5.404v2.12l1.377 2.012-.848 3.39.635 3.602 2.543 1.483.848-1.003 7.416-1.115 2.86-3.18h2.33l3.498-4.873h2.302l-.024-.05 2.532-1.763 3.275-4.62 1.848-1.008z"/>\n    <path id="TONDELA" class="js-map-target map-target" d="M88.682 235.796l-1.377-3.602.622-1.488.013.005-3.92-1.377h-4.132v-3.284l2.225-1.908 1.06-1.8 1.06-4.45-3.71-1.378-1.694-1.696-1.908 1.166-5.933-6.145h-3.18l-3.92-3.71-2.037-.672-8.39.13v5.332l-2.73 3.707-.456 2.536-5.267 4.487v2.276h-4.487v-4.552l.91-1.626.91-.91-4.42-1.366-.39-3.446H33.89l-4.198 1.54-7.262 1.65 1.58 5.023 2.868 2.94v7.89h3.013l4 5.812-.244.232.244.06 2.242-1.06h3.39l3.708 7.416v2.12l3.18 2.33h1.906l1.695 4.662h1.272l-.134.496 1.3-1.344h5.19l3.498-3.284.423 2.86 2.966-.106 3.602-2.436h1.59v1.96h2.83l.348-1.22 6.145-2.965.425-1.59-1.06-1.627z"/>\n</svg>\n'}),define("maps/portugal",["require","lodash","jquery","widgets/base","maps/templates/base","text!maps/gfx/NACIONAL.svg","text!maps/gfx/ACORES.svg","text!maps/gfx/AVEIRO.svg","text!maps/gfx/BEJA.svg","text!maps/gfx/BRAGA.svg","text!maps/gfx/BRAGANCA.svg","text!maps/gfx/CASTELO_BRANCO.svg","text!maps/gfx/COIMBRA.svg","text!maps/gfx/EVORA.svg","text!maps/gfx/FARO.svg","text!maps/gfx/GUARDA.svg","text!maps/gfx/LEIRIA.svg","text!maps/gfx/LISBOA.svg","text!maps/gfx/MADEIRA.svg","text!maps/gfx/PORTALEGRE.svg","text!maps/gfx/PORTO.svg","text!maps/gfx/SANTAREM.svg","text!maps/gfx/SETUBAL.svg","text!maps/gfx/VIANA_DO_CASTELO.svg","text!maps/gfx/VILA_REAL.svg","text!maps/gfx/VISEU.svg"],function(t){var r=t("lodash"),i=t("jquery"),n=t("widgets/base"),e=t("maps/templates/base"),a={NACIONAL:{map:t("text!maps/gfx/NACIONAL.svg"),children:{ACORES:{map:t("text!maps/gfx/ACORES.svg")},AVEIRO:{map:t("text!maps/gfx/AVEIRO.svg")},BEJA:{map:t("text!maps/gfx/BEJA.svg")},BRAGA:{map:t("text!maps/gfx/BRAGA.svg")},BRAGANCA:{map:t("text!maps/gfx/BRAGANCA.svg")},CASTELO_BRANCO:{map:t("text!maps/gfx/CASTELO_BRANCO.svg")},COIMBRA:{map:t("text!maps/gfx/COIMBRA.svg")},EVORA:{map:t("text!maps/gfx/EVORA.svg")},FARO:{map:t("text!maps/gfx/FARO.svg")},GUARDA:{map:t("text!maps/gfx/GUARDA.svg")},LEIRIA:{map:t("text!maps/gfx/LEIRIA.svg")},LISBOA:{map:t("text!maps/gfx/LISBOA.svg")},MADEIRA:{map:t("text!maps/gfx/MADEIRA.svg")},PORTALEGRE:{map:t("text!maps/gfx/PORTALEGRE.svg")},PORTO:{map:t("text!maps/gfx/PORTO.svg")},SANTAREM:{map:t("text!maps/gfx/SANTAREM.svg")},SETUBAL:{map:t("text!maps/gfx/SETUBAL.svg")},VIANA_DO_CASTELO:{map:t("text!maps/gfx/VIANA_DO_CASTELO.svg")},VILA_REAL:{map:t("text!maps/gfx/VILA_REAL.svg")},VISEU:{map:t("text!maps/gfx/VISEU.svg")}}}},o="imp-portugal-map";function s(t,e){n.call(this,o,t),e=e||{},this._default=e.defaultMap||s.DEFAULT_MAP,this._locations=s.LOCATIONS,this._update=r.bind(this._update,this),this._onMapOut=r.bind(this._onMapOut,this),this._onMapHover=r.bind(this._onMapHover,this),this._onMapClick=r.bind(this._onMapClick,this),this._onMapUpClick=r.bind(this._onMapUpClick,this)}return e=r.template(e),s.prototype=Object.create(n.prototype),s.MAPS=a,s.DEFAULT_MAP="NACIONAL",s.LOCATIONS={ACORES:"AORES",BRAGANCA:"BRAGANA",EVORA:"VORA",SANTAREM:"SANTARM",SETUBAL:"SETBAL","ANGRA DO HEROISMO":"ANGRA DO HEROSMO",POVOACAO:"POVOAO","PRAIA DA VITORIA":"PRAIA DA VITRIA","SAO ROQUE DO PICO":"SO ROQUE DO PICO",AGUEDA:"GUEDA",ILHAVO:"LHAVO","OLIVEIRA DE AZEMEIS":"OLIVEIRA DE AZEMIS","SAO JOAO DA MADEIRA":"SO JOO DA MADEIRA",ALMODOVAR:"ALMODVAR",MERTOLA:"MRTOLA",GUIMARAES:"GUIMARES","POVOA DE LANHOSO":"PVOA DE LANHOSO","VILA NOVA DE FAMALICAO":"VILA NOVA DE FAMALICO","ALFANDEGA DA FE":"ALFNDEGA DA F","CARRAZEDA DE ANSIAES":"CARRAZEDA DE ANSIES",COVILHA:"COVILH",FUNDAO:"FUNDO","PROENCA-A-NOVA":"PROENA-A-NOVA",SERTA:"SERT",LOUSA:"LOUS",TABUA:"TBUA","VILA VICOSA":"VILA VIOSA",LOULE:"LOUL",OLHAO:"OLHO",PORTIMAO:"PORTIMO","SAO BRAS DE ALPORTEL":"SO BRS DE ALPORTEL","VILA REAL DE SANTO ANTONIO":"VILA REAL DE SANTO ANTNIO",MEDA:"MDA","VILA NOVA DE FOZ COA":"VILA NOVA DE FOZ CA",ALVAIAZERE:"ALVAIZERE",ANSIAO:"ANSIO","FIGUEIRO DOS VINHOS":"FIGUEIR DOS VINHOS",NAZARE:"NAZAR",OBIDOS:"BIDOS","PORTO DE MOS":"PORTO DE MS",LOURINHA:"LOURINH","SOBRAL DE MONTE AGRACO":"SOBRAL DE MONTE AGRAO","CAMARA DE LOBOS":"CMARA DE LOBOS","SAO VICENTE":"SO VICENTE","PONTE DE SOR":"PONTE DE SR",BAIAO:"BAIO","PACOS DE FERREIRA":"PAOS DE FERREIRA","POVOA DE VARZIM":"PVOA DE VARZIM",ALPIARCA:"ALPIARA",CONSTANCIA:"CONSTNCIA","FERREIRA DO ZEZERE":"FERREIRA DO ZZERE",GOLEGA:"GOLEG",MACAO:"MAO",OUREM:"OURM",MELGACO:"MELGAO",MONCAO:"MONO",VALENCA:"VALENA",ALIJO:"ALIJ","MESAO FRIO":"MESO FRIO",MURCA:"MURA","PESO DA REGUA":"PESO DA RGUA",VALPACOS:"VALPAOS",CINFAES:"CINFES",MORTAGUA:"MORTGUA","SANTA COMBA DAO":"SANTA COMBA DO","SAO JOAO DA PESQUEIRA":"SO JOO DA PESQUEIRA","SAO PEDRO DO SUL":"SO PEDRO DO SUL",SATAO:"SATO",TABUACO:"TABUAO"},s.init=function(t,e){return n.init(t,o,s,e)},s.start=function(t,e){return n.start(t,o,s,e)},s.destroy=function(t,e){return n.destroy(t,o,s,e)},s.prototype.start=function(){this._current=this._default,this._active=void 0,this._$element.html(e({it:{map:""}})),this._$map=this._$element.find(".js-results-map"),this._$mapUp=this._$element.find(".js-map-up"),this._$mapLabel=this._$element.find(".js-map-label"),this._$element.on("mouseleave",".js-map-target",this._onMapOut).on("mouseover",".js-map-target",this._onMapHover).on("click",".js-map-target",this._onMapClick).on("click",".js-map-up",this._onMapUpClick),this._update()},s.prototype.stop=function(){this._$element.off("mouseleave",".js-map-target",this._onMapOut).off("mouseover",".js-map-target",this._onMapHover).off("click",".js-map-target",this._onMapClick).off("click",".js-map-up",this._onMapUpClick)},s.prototype.setCurrent=function(t){this._current!==t&&(this._current=t,this._update())},s.prototype._onMapOut=function(){var t=this._getLabel(this._active||this._current);this._$mapLabel.text(t||"")},s.prototype._onMapHover=function(t){var e=this._getTarget(t),n=this._getLabel(e);this._$mapLabel.text(n||"")},s.prototype._onMapClick=function(t){var e=this._getTarget(t);this._current!==e&&(this._current=e,this._update(),this.trigger("map-change",this._current))},s.prototype._onMapUpClick=function(){var t=this._current.split("/"),e=0===(t=t.slice(0,-1)).length?this._default:t.join("/");this._current!==e&&(this._current=e,this._update(),this.trigger("map-change",this._current))},s.prototype._update=function(){var t=this._getMap(this._current),e=this._getLabel(this._current||"");this._active=!t&&this._current.split("/").pop()||void 0,t&&this._$map.html(t);var i,n=this._$map.find(".js-map-target").attr("class",(i="active",function(t,e){var n=(e||"").split(" ");return(n=r.filter(n,function(t){return t!==i})).join(" ")}));this._active&&n.filter("#"+this._active).attr("class",n.attr("class")+" active"),this._$mapLabel.text(e||""),this._$mapUp.toggle(-1!==this._current.indexOf("/"))},s.prototype._getMap=function(t){var e=this._get(t);return e||t===this._default?e&&e.map||"":this._getMap(this._default)},s.prototype._getTarget=function(t){var e,n;return e=this._current,this._active&&(e=e.split("/").slice(0,-1).join("/")),n=[e,i(t.target).attr("id")],r.filter(n,function(t){return!!t}).join("/")},s.prototype._getLabel=function(t){var e=t.split("/").pop()||"",n=this._get(t);return n||t===this._default?n&&n.label||this._locations[e.replace(/_/g," ")]?this._locations[e.replace(/_/g," ")]:e.replace(/_/g," ")||"":this._getLabel(this._default)},s.prototype._get=function(t){for(var e=t.split("/"),n={children:s.MAPS},i=0;i<e.length;i++){if(!n.children){n=void 0;break}n=n.children[e[i]]}return n||t===this._default?n:this._getLabel(this._default)},s}),define("imaps",["require","maps/portugal"],function(t){"use strict";var e={portugal:t("maps/portugal")},i=null;function r(t){return e[t]}return{init:function(t,e){var n=r(i=e.type);return n?n.init(t,e):[]},start:function(t,e){var n=r(i=e.type);return n?n.start(t,e):[]},stopAll:function(t,e){var n=r(i=e.type);return n?n.stop(t,e):[]},destroy:function(t){var e=r(i);return e?e.destroy(t):[]}}}),define("bag-widgets/utils/diatrics",[],function(){for(var t=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"OE",letters:""},{base:"oe",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],e={},n=0;n<t.length;n++)for(var i=t[n].letters,r=0;r<i.length;r++)e[i[r]]=t[n].base;return{remove:function(t){return t.replace(/[^\u0000-\u007E]/g,function(t){return e[t]||t})}}}),define("bag-widgets/common",["require","lodash","fetch","bluebird","sys/store","bag-widgets/utils/diatrics"],function(t){var s=t("lodash"),n=t("fetch"),l=t("bluebird"),u=t("sys/store"),e=t("bag-widgets/utils/diatrics");return{plain:function(t){return t?e.remove(t.trim().toUpperCase().replace(/ |\/|\\/g,"_")):t},formatHour:function(t){var e=new Date(t||""),n=""+e.getHours();1===n.length&&(n="0"+n);var i=""+e.getMinutes();return 1===i.length&&(i="0"+i),n+":"+i},formatPercentage:function(t){if(void 0!==t&&null!==t)return(100*t|0)/100+"%"},buildEntryRenderer:function(n){return n=s.template(n),function(t,e){return(t=t||{}).dataset=e||{},t.result=t.result||{},t.details=t.details||{},s.isFunction(t.dataset.details)?t.more=t.dataset.details({it:t}):s.isString(t.dataset.details)&&(t.more=""+t.dataset.details),n({it:t})}},getDoc:function(t){var e=n(this._baseUrl+"/"+(t||"")).then(function(t){return t.json()});return l.resolve(e)},getStore:function(t,e,n,i){var r=u.permanent.read(e),a=+new Date;if(r&&a<r.expires)return l.resolve(r.value);var o=this._getDoc(t).then(function(t){if(!t||0===t.length)throw new Error("Empty list");return t});return s.isFunction(i)&&(o=o.then(i)),o.then(function(t){return u.permanent.save(e,{value:t,expires:a+n}),t})},sort:{alphabetical:function(t,e){var n=t.toLowerCase(),i=e.toLowerCase();return n<i?-1:n>i?1:0}}}}),define("bag-widgets/tpl/simple",[],function(){return'<div class="inner">\n    <header class="resultsHeader">\n        <%= it.header || "" %>\n    </header>\n\n    <main class="resultsContainer">\n        <ul class="results-content__carousel js-result-entries"></ul>\n    </main>\n\n    <footer class="resultsFooter">\n        <%= it.footer || "" %>\n    </footer>\n</div>'}),define("bag-widgets/tpl/simple-header",[],function(){return'<p class="label">Resultados</p>'}),define("bag-widgets/tpl/simple-footer",[],function(){return'<div class="status">\n    <p>ltima atualizao s <span class="js-update-stamp">Aguarde</span></p>\n</div>\n\n<% if (it.moreLink) { %>\n<a class="link" href="<%= it.moreLink %>" target="_blank"><%= it.moreLinkText || "Ver Mais" %></a>\n<% } %>'}),define("bag-widgets/tpl/simple-entry",[],function(){return"<li class=\"id_<%= it.details.id.replace('.', '_').replace('/', '_').toLowerCase() %>\">    <div class=\"partyLogo id_<%= it.details.id.replace('.', '_').replace('/', '_').toLowerCase() %>\"></div>    <div class=\"partyName\"><%= (it.details.name || it.details.initials) %></div>    <div class=\"partyVotes\"><%= it.result.votes || '--' %></div>    <div class=\"partyPercent\"><%= it.result.percent || '--' %></div></li>"}),define("bag-widgets/simple",["require","lodash","widgets/base","bag-widgets/common","bag-widgets/tpl/simple","bag-widgets/tpl/simple-header","bag-widgets/tpl/simple-footer","bag-widgets/tpl/simple-entry"],function(t){var r=t("lodash"),n=t("widgets/base"),a=t("bag-widgets/common"),i=t("bag-widgets/tpl/simple"),o=t("bag-widgets/tpl/simple-header"),s=t("bag-widgets/tpl/simple-footer"),l=t("bag-widgets/tpl/simple-entry"),u="imp-bag-widget-simple";function c(t,e){n.call(this,u,t),e=e||{},this._update=r.bind(this._update,this),this._className=e.className||"simpleResultContainer",this._onDataLoaded=e.onDataLoaded||this._onDataLoaded,this._baseUrl=e.baseUrl||".",this._moreLink=e.moreLink,this._moreLinkText=e.moreLinkText,this._doc=e.doc,this._header=r.template(e.header||o),this._footer=r.template(e.footer||s),this._renderEntry=a.buildEntryRenderer(e.entry||l),this._renderEntry=r.bind(this._renderEntry,this)}return i=r.template(i),c.prototype=Object.create(n.prototype),c.init=function(t,e){return n.init(t,u,c,e)},c.start=function(t,e){return n.start(t,u,c,e)},c.prototype.start=function(){var t=this._header({it:{moreLink:this._moreLink,moreLinkText:this._moreLinkText}}),e=this._footer({it:{moreLink:this._moreLink,moreLinkText:this._moreLinkText}});this._$element.addClass(this._className).html(i({it:{header:t,footer:e,moreLink:this._moreLink,moreLinkText:this._moreLinkText}})),this._$results=this._$element.find(".js-result-entries"),this._$update=this._$element.find(".js-update-stamp"),this.refresh()},c.prototype.stop=function(){},c.prototype.refresh=function(){this._getDoc(this._doc).then(this._update).caught(function(t){console.error(t)})},c.prototype._update=function(t){var e,n;if(n=(e=(t=t||{})&&t.doc||{}).results||{},e.results=r.map(n||{},function(t,e){return null!==t.percent&&(t.percentValue=t.percent,t.percent=a.formatPercentage(t.percent)),{result:t,details:{key:e,id:t.id,initials:t.initials}}}),r.isFunction(this._onDataLoaded)&&this._onDataLoaded){var i=this._onDataLoaded(e);void 0!==i&&(e=i)}this._$results.html(r.map(e.results,this._renderEntry).join("")),this._$update.text(a.formatHour(t.updatedStamp))},c.prototype.getStore=a.getStore,c.prototype._getDoc=function(t){return a.getDoc.call(this,t).then(function(t){return t&&t[0]})},c}),define("bag-widgets/tpl/detailed",[],function(){return'<div class="results-content results-content--detailed">    <div class="resultsFilter">        <form class="js-controls" onkeypress="return event.keyCode !== 13;">            <% if (it.showKeyFilter) { %>            <label for="key-filter"><%= it.keyFilterLabel %></label>            <input type="text" placeholder="<%= it.keyFilterLabel %>" id="key-filter" name="key-filter" class="js-key-filter-control" disabled />            <% } %>            <label for="results-country"><%= it.datasetLabel %></label>            <select id="results-country" name="dataset" class="js-dataset-control" disabled></select>            <% if (it.showDistrict) { %>            <label for="results-district">Distrito</label>            <select id="results-district" name="district" class="js-district-control" disabled>                <option>DISTRITO</option>            </select>            <% } %>            <% if (it.showCounty) { %>            <label for="results-county">Concelho</label>            <select id="results-county" name="county" class="js-county-control" disabled>                <option>CONCELHO</option>            </select>            <% } %>            <% if (it.showNeighbourhood) { %>            <label for="results-neighbourhood">Freguesia</label>            <select id="results-neighbourhood" name="neighbourhood" class="js-neighbourhood-control" disabled>                <option>FREGUESIA</option>            </select>            <% } %>            <div class="js-filters"></div>        </form>        <div class="map js-map"></div>    <% if (it.disclaimer) { %>    <div class="disclaimer-outer">        <%= it.disclaimer %>    </div>    <% } %>    </div>    <table class="resultsTable">        <thead class="js-result-head resultsTableHead"></thead>        <tbody class="js-result-entries resultsTableContent"></tbody>        <tfoot class="js-result-footer resultsTableFooter"></tfoot>    </table></div>'}),define("bag-widgets/tpl/detailed-entry",[],function(){return'<tr class="id_<%= it.details.id && it.details.id.replace(\'.\', \'_\').toLowerCase() %> <%= it.details.className %> result-entry <% if (it.more) { %>js-entry-toggle<% } %>" data-key="<%= it.details.key %>">    <% if (it.details.idx) { %>        <td class="column columnNum"><%= it.details.idx %></td>    <% } %>    <% for (var k = 0; k < it.dataset.columns.length; k++) { %>        <td class="column <%= it.dataset.columns[k].className %>"        <% if (it.dataset.columns[k].title) { %> title="<%= _.template(it.dataset.columns[k].title)({ it: it }) %>" <% } %>        <span><%= _.get(it.result, it.dataset.columns[k].key) || "--" %></span>        </td>    <% } %></tr><% if (it.more) { %><tr class="columnDetails <%= it.details.className %>">    <td class="column columnNum"></td>    <td colspan="7" class="columnDetailsInner">        <%= it.more %>    </td></tr><% } %>'}),define("bag-widgets/tpl/detailed-header",[],function(){return'<tr>\n<% if (it.customHeader) { %> \n    <%= it.customHeader %>\n</tr>\n<tr>\n<% } %>\n    <% if (it.showIndexColumn) { %>\n    <th class="column columnLabel columnNum">#</th>\n    <% } %> <% for (var k = 0; k < it.dataset.columns.length; k++) { %>\n    <th class="column columnLabel <% if (it.dataset.columns[k].sortable) { %>columnSortable js-sort <% } %> <%= it.dataset.columns[k].className %>"    <% if (it.dataset.columns[k].headerTitle) { %>title="<%= it.dataset.columns[k].headerTitle %>"<% } %>\n    data-target="<%= it.dataset.columns[k].key %>"> <span><%= it.dataset.columns[k].label %></span>    </th>    <% } %>\n</tr>'}),define("bag-widgets/tpl/detailed-loading",[],function(){return'<tr class="loadingEntry js-loading-entry">    <td class="column columnMessage" colspan="<%= it.dataset.columns.length + 1 %>"><%= it.message || "" %></td></tr>'}),define("bag-widgets/tpl/detailed-option",[],function(){return'<option value="<%= it.id %>"><%= it.name %></option>'}),define("bag-widgets/tpl/detailed-controls",[],function(){return'<div><% for (var k in it.filters) { %>    <% if (it.filters[k].values) { %>    <label for="results-<%= it.filters[k]["key"] %>">        <%= it.filters[k]["label"] || it.filters[k]["key"] %>    </label>    <select id="results-<%= it.filters[k]["key"] %>" name="results-<%= it.filters[k]["key"] %>" data-key="<%= it.filters[k]["key"] %>" class="js-filter-control">        <% for (var o in it.filters[k].values) { %>        <option <% if (it.filters[k]["startValue"] == o) { %>selected<% } %> value="<%= o %>"><%= it.filters[k].values[o] || o %></option>        <% } %>    </select>    <% } else { %>    <label for="results-<%= it.filters[k]["key"] %>" class="checkbox">        <%= it.filters[k]["label"] || it.filters[k]["key"] %>        <input type="checkbox" <% if (it.filters[k]["startValue"]) { %>checked<% } %> id="results-<%= it.filters[k]["key"] %>" name="results-<%= it.filters[k]["key"] %>" data-key="<%= it.filters[k]["key"] %>" class="js-filter-control" />    </label>    <% } %><% } %></div>'}),define("bag-widgets/tpl/detailed-more",[],function(){return'<button class="more-button js-more">Ver mais resultados</button>'}),define("bag-widgets/tpl/detailed-no-results",[],function(){return"Sem resultados"}),define("bag-widgets/detailed",["require","lodash","jquery","widgets/base","bluebird","imaps","bag-widgets/common","bag-widgets/tpl/detailed","bag-widgets/tpl/detailed-entry","bag-widgets/tpl/detailed-header","bag-widgets/tpl/detailed-loading","bag-widgets/tpl/detailed-option","bag-widgets/tpl/detailed-controls","bag-widgets/tpl/detailed-more","bag-widgets/tpl/detailed-no-results"],function(t){var o=t("lodash"),r=t("jquery"),n=t("widgets/base"),a=t("bluebird"),i=t("imaps"),s=t("bag-widgets/common"),l=t("bag-widgets/tpl/detailed"),e=t("bag-widgets/tpl/detailed-entry"),u=t("bag-widgets/tpl/detailed-header"),c=t("bag-widgets/tpl/detailed-loading"),h=t("bag-widgets/tpl/detailed-option"),d=t("bag-widgets/tpl/detailed-controls"),p=t("bag-widgets/tpl/detailed-more"),f=t("bag-widgets/tpl/detailed-no-results"),m="imp-bag-widget-detailed",v="_DEFAULT_";function g(t,e){if(n.call(this,m,t),e=e||{},this._update=o.bind(this._update,this),this._updateFooter=o.bind(this._updateFooter,this),this._renderCustomFooter=o.bind(this._renderCustomFooter,this),this.refresh=o.bind(this.refresh,this),this.loadMore=o.bind(this.loadMore,this),this._load=o.throttle(this._load,300),this._onKeyFilterChange=o.bind(o.debounce(this._onKeyFilterChange,500),this),this._onDatasetChange=o.bind(this._onDatasetChange,this),this._onDistrictChange=o.bind(this._onDistrictChange,this),this._onCountyChange=o.bind(this._onCountyChange,this),this._onNeighbourhoodChange=o.bind(this._onNeighbourhoodChange,this),this._onFilterChange=o.bind(this._onFilterChange,this),this._onHeaderClick=o.bind(this._onHeaderClick,this),this._onEntryClick=o.bind(this._onEntryClick,this),this._onMapChange=o.bind(this._onMapChange,this),this._onDataLoaded=e.onDataLoaded||this._onDataLoaded,this._expirationTime=e.expirationTime||36e5,this._baseUrl=e.baseUrl||".",this._locations=e.locations||{},this._datasetLabel=e.datasetName||"Pas",this._datasets=e.datasets||{},this._className=e.className||"detailedResultContainer",this._loadMore=void 0===e.loadMore||e.loadMore,this._pageSize=e.pageSize||100,this._sectionListKey=e.sectionListKey||"imp-bag-widget-regions",this._keyFilterLabel=e.keyFilterLabel||"Pesquisar",this._showKeyFilter=void 0===e.showKeyFilter||e.showKeyFilter,this._showDistrict=void 0===e.showDistrict||e.showDistrict,this._showCounty=void 0===e.showCounty||e.showCounty,this._showNeighbourhood=void 0===e.showNeighbourhood||e.showNeighbourhood,this._showIndexColumn=void 0===e.showIndexColumn||e.showIndexColumn,this._disclaimer=e.disclaimer,this._customHeader=e.customHeader,this._customFooter=e.customFooter&&o.template(e.customFooter),this._current={dataset:void 0,district:void 0,county:void 0,neighbourhood:void 0,sortKey:"",sortDirection:"ASC",filters:{},offset:0,keyFilter:void 0},0===o.size(this._datasets))throw new Error("Missing dataset. At least one dataset is required.");o.forEach(this._datasets,function(t,e){return t.isDefault&&(this._defaultDataset=e),t.details&&(t.details=o.template(t.details)),t.option=h({it:{id:e,name:t.label}}),t},this)}function y(t){var e=r(t.target).val();return e===v&&(e=void 0),e}function _(t,e){var n,i,r;return(r=t[i=e[0]]||{}).id=i,r.name=i.replace(/_/g," "),r.children=r.children||[],(n=e.slice(1)).length>0&&r.children.push(n),t[i]=r,t}return l=o.template(l),u=o.template(u),c=o.template(c),d=o.template(d),h=o.template(h),g.prototype=Object.create(n.prototype),g.init=function(t,e){return n.init(t,m,g,e)},g.start=function(t,e){return n.start(t,m,g,e)},g.prototype.start=function(){var e=this;this._$element.addClass(this._className).html(l({it:{keyFilterLabel:this._keyFilterLabel,datasetLabel:this._datasetLabel,showDistrict:this._showDistrict,showCounty:this._showCounty,showNeighbourhood:this._showNeighbourhood,showKeyFilter:this._showKeyFilter,disclaimer:this._disclaimer,customHeader:this._customHeader}})),this._current={dataset:this._defaultDataset,district:void 0,county:void 0,neighbourhood:void 0,offset:0,keyFilter:void 0},this._current.filters=this._findDefaultFilters(this._current.dataset),this._current.sortKey=this._findDefaultSort(this._current.dataset),this._current.sortDirection="ASC",this._enabled=!1,this._$header=this._$element.find(".js-result-head"),this._$results=this._$element.find(".js-result-entries"),this._$footer=this._$element.find(".js-result-footer"),this._$filters=this._$element.find(".js-filters"),this._$keyFilter=this._$element.find(".js-key-filter-control"),this._$dataset=this._$element.find(".js-dataset-control"),this._$district=this._$element.find(".js-district-control"),this._$county=this._$element.find(".js-county-control"),this._$neighbourhood=this._$element.find(".js-neighbourhood-control"),this._$map=this._$element.find(".js-map"),this._map=i.start(this._$map,{type:"portugal"}).pop(),this._getSectionList().then(function(t){e._sections=t,e._$dataset.html(o.collect(e._datasets,"option").join("\n")).val(e._current.dataset).removeAttr("disabled"),e._$keyFilter.removeAttr("disabled"),e._enabled=!0,e.refresh()}).caught(function(t){console.error(t)}),this._map.on("map-change",this._onMapChange),this._$keyFilter.on("change paste keyup",this._onKeyFilterChange),this._$dataset.on("change",this._onDatasetChange),this._$district.on("change",this._onDistrictChange),this._$county.on("change",this._onCountyChange),this._$neighbourhood.on("change",this._onNeighbourhoodChange),this._$header.on("click",".js-sort",this._onHeaderClick),this._$results.on("click",".js-more",this.loadMore).on("click",".js-entry-toggle",this._onEntryClick),this._$element.on("change",".js-filter-control",this._onFilterChange)},g.prototype.stop=function(){this._enabled=!1,this._map.off("map-change",this._onMapChange),i.destroy(this._map),this._$element.off("change",".js-filter-control",this._onFilterChange),this._$results.off("click",".js-more",this.loadMore).off("click",".js-entry-toggle",this._onEntryClick),this._$header.off("click",".js-sort",this._onHeaderClick),this._$keyFilter.off("change paste keyup",this._onKeyFilterChange),this._$dataset.off("change",this._onDatasetChange),this._$district.off("change",this._onDistrictChange),this._$county.off("change",this._onCountyChange),this._$neighbourhood.off("change",this._onNeighbourhoodChange)},g.prototype._onHeaderClick=function(t){var e=r(t.currentTarget).attr("data-target");e&&(e===this._current.sortKey?this._setCurrent("sortDirection","ASC"===this._current.sortDirection?"DESC":"ASC"):this._setCurrent("sortKey",e))},g.prototype._onEntryClick=function(t){var e=r(t.currentTarget);this._$results.find(".js-entry-toggle").not(e).removeClass("active"),e.toggleClass("active")},g.prototype._onMapChange=function(t,e){if(!this._enabled)return!1;var n=e.split("/");3===n.length?this._setCurrent("county",n[2]):2==n.length?n[1]==this._current.district?this._setCurrent("county",void 0):this._setCurrent("district",n[1]):this._setCurrent("district",void 0)},g.prototype._onKeyFilterChange=function(t){if(!this._enabled)return!1;var e=y(t);e?this._setCurrent("keyFilter",s.plain(e)):this._setCurrent("keyFilter",void 0)},g.prototype._onDatasetChange=function(t){if(!this._enabled)return!1;var e=y(t);this._setCurrent("dataset",e)},g.prototype._onDistrictChange=function(t){if(!this._enabled)return!1;var e=y(t);this._setCurrent("district",e)},g.prototype._onCountyChange=function(t){if(!this._enabled)return!1;var e=y(t);this._setCurrent("county",e)},g.prototype._onNeighbourhoodChange=function(t){if(!this._enabled)return!1;var e=y(t);this._setCurrent("neighbourhood",e)},g.prototype._onFilterChange=function(t){if(!this._enabled)return!1;var e=r(t.currentTarget),n=r(t.target).attr("data-key");n&&(e.is("[type=checkbox]")?this._setFilter(n,e.prop("checked")):this._setFilter(n,y(t)))},g.prototype._setFilter=function(t,e){this._current.filters[t]!==e&&(void 0===e||!1===e?delete this._current.filters[t]:this._current.filters[t]=e,this.refresh())},g.prototype._setCurrent=function(t,e){if(this._current[t]!==e){switch(t){case"dataset":this._current.dataset=e,this._current.district=void 0,this._current.county=void 0,this._current.neighbourhood=void 0,this._current.offset=0,this._current.filters=this._findDefaultFilters(e);break;case"district":this._current.district=e,this._current.county=void 0,this._current.neighbourhood=void 0,this._current.offset=0;break;case"county":this._current.county=e,this._current.neighbourhood=void 0,this._current.offset=0;break;case"neighbourhood":this._current.neighbourhood=e,this._current.offset=0;break;case"sortKey":this._current.sortKey=e,this._current.sortDirection="ASC",this._current.offset=0;break;case"sortDirection":this._current.sortDirection=e,this._current.offset=0;break;default:this._current[t]=e}this.refresh()}},g.prototype.refresh=function(){var t;this._enabled&&(this._enabled=!1,this._current.printed!==this._current.dataset&&(t=this._datasets[this._current.dataset],this._$header.html(u({it:{dataset:t,customHeader:this._customHeader,showIndexColumn:this._showIndexColumn}})),this._$filters.html(d({it:t})),!1===t.showDistrict?this._$district.hide():this._$district.css("display",""),!1===t.showCounty?this._$county.hide():this._$county.css("display",""),!1===t.showNeighbourhood?this._$neighbourhood.hide():this._$neighbourhood.css("display",""),this._current.printed=this._current.dataset),this._$results.empty(),a.all([this._load(!0),this._updateControls(),this._updateMap()]))},g.prototype.loadMore=function(){return this._current.offset+=this._pageSize,this._load()},g.prototype._load=function(t){var e=this;if(this._enabled||t){this._enabled=!1;var n=this._$results.find(".js-loading-entry");if(0==n.length)n=r(this._renderLoading("A carregar...")),this._$results.append(n);else{var i=r(this._renderLoading("A carregar..."));n.replaceWith(i),n=i}this._fetchData().then(this._update).then(function(){e._enabled=!0,n.remove()}).catch(function(t){e._enabled=!0,n.replaceWith(e._renderLoading('Ocorreu um erro. <a class="js-reload" href="#">Tentar Novamente?</a>')),console.error(t)})}},g.prototype._fetchData=function(){var t,e,n,i;e={limit:this._pageSize};var r=this._datasets[this._current.dataset];for(var a in t=[r.uri||this._current.dataset],this._showDistrict&&t.push(this._current.district),this._showCounty&&t.push(this._current.county),this._showNeighbourhood&&t.push(this._current.neighbourhood),this._current.keyFilter?(t=o.map(t,function(t){return t||"*"})).push("*"+this._current.keyFilter+"*"):t=o.filter(t,function(t){return!!t}),this._current.sortKey&&(e.sortKey=this._current.sortKey,e.sortDirection=this._current.sortDirection),this._current.offset&&(e.offset=this._current.offset),t=t.join("/"),(i=o.map(this._current.filters,function(t,e){return e+":"+t})).length>0&&(e.filter=i.join(" AND ")),n=[],e)e.hasOwnProperty(a)&&n.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return n.length>0&&(t=t+"?"+n.join("&")),this._getDoc(t).caught(function(t){console.error(t)})},g.prototype._updateControls=function(){var t,e,n,i;return t=this._datasets[this._current.dataset],i=(n=(e=this._sections[t.uri||this._current.dataset])&&e.children&&e.children[this._current.district]||{})&&n.children&&n.children[this._current.county]||{},e&&(n=e.children&&e.children[this._current.district]||{},void 0===t.useMap||t.useMap?this._$map.css("display",""):this._$map.hide(),!1!==t.showNeighbourhood&&(this._current.county?(this._renderControls(this._$neighbourhood,i.children,"FREGUESIA",this._current.neighbourhood),this._$neighbourhood.removeAttr("disabled")):this._$neighbourhood.attr("disabled","disabled")),!1!==t.showDistrict&&(this._current.district?(this._renderControls(this._$county,n.children,"CONCELHO",this._current.county),this._$county.removeAttr("disabled")):this._$county.attr("disabled","disabled")),!1!==t.showCounty&&(this._renderControls(this._$district,e.children,"DISTRITO",this._current.district),Object.keys(e.children).length>0&&this._$district.removeAttr("disabled")),this._$header.find(".js-sort").removeClass("sorted sorted-asc sorted-desc").filter("[data-target="+this._current.sortKey+"]").addClass("sorted sorted-"+this._current.sortDirection.toLowerCase())),a.resolve()},g.prototype._updateMap=function(){var t=o.filter(["NACIONAL",this._current.district,this._current.county],function(t){return!!t}).join("/");return this._map.setCurrent(t),a.resolve()},g.prototype._updateFooter=function(t){this._$footer.append(this._renderCustomFooter(t))},g.prototype._update=function(t){var e,n=this._current.offset,i=this._datasets[this._current.dataset];if(t=[].concat(t||[]),this._$results.toggleClass("hasDetails",!!i.details),e=o.map(t,function(t){var e=t.doc;return{result:e,details:{key:t.key,id:e.id,updatedStamp:t.updatedStamp}}}),o.isFunction(this._onDataLoaded)&&this._onDataLoaded){var r=this._onDataLoaded(e);void 0!==r&&(e=r)}this._$results.append(o.map(e,function(t,e){return this._showIndexColumn&&(t.details.idx=1+n+e),this._renderEntry(t,i)},this).join("")),this._loadMore&&t.length===this._pageSize&&this._$results.append(this._renderLoading(p)),0===t.length&&0===this._current.offset&&this._$results.append(this._renderLoading(f))},g.prototype._renderControls=function(t,e,n,i){var r=[];for(var a in e)e.hasOwnProperty(a)&&("DISTRITO"!=n&&"CONCELHO"!=n||this._locations[e[a].name]&&(e[a].name=this._locations[e[a].name]),r.push(e[a]));r=r.sort(function(t,e){return s.sort.alphabetical(t.name,e.name)}),n&&r.unshift({name:n,id:v}),r=o.map(r,function(t){return h({it:t})}),t.html(r.join("")),(i||n)&&t.val(i||v)},g.prototype._renderEntry=s.buildEntryRenderer(e),g.prototype._renderLoading=function(t){return c({it:{message:t,dataset:this._datasets[this._current.dataset]}})},g.prototype._renderCustomFooter=function(t){return this._customFooter({it:t})},g.prototype._getSectionList=function(){return this.getStore(void 0,this._sectionListKey,this._expirationTime,function(t){return function t(e,n,i){i=i||0;n=n||1;for(var r in e)e.hasOwnProperty(r)&&(e[r].children=o.reduce(e[r].children||[],_,{}),i<n&&(e[r].children=t(e[r].children,n,i+1)));return e}(o.chain(t||[]).sort(s.sort.alphabetical).map(function(t){return t.split("/")}).filter(function(t){for(var e=!0,n=0;n<t.length;n++)e=e&&!!t[n];return e}).reduce(_,{}).value(),2)})},g.prototype.getStore=s.getStore,g.prototype._getDoc=s.getDoc,g.prototype._findDefaultSort=function(t){if(t=this._datasets[t])return o.chain(t.columns).filter(function(t){return t.isDefaultSort}).map(function(t){return t.key}).value().pop()},g.prototype._findDefaultFilters=function(t){if(t=this._datasets[t])return o.chain(t.filters).filter(function(t){return t.hasOwnProperty("startValue")&&t.startValue!==v}).map(function(t){return[t.key,t.startValue]}).object().value()},g}),define("bag-widgets",["require","sys/polyfills","bag-widgets/common","bag-widgets/simple","bag-widgets/detailed"],function(t){"use strict";return t("sys/polyfills"),{Common:t("bag-widgets/common"),Simple:t("bag-widgets/simple"),Detailed:t("bag-widgets/detailed")}}),define("parts/escolas/tpl/2016_details_12",["require"],function(t){return'<table>    <thead>    <tr>        <th colspan="3" class="column columnLabel columnName">Mdias</th>    </tr>    <tr>        <th class="column"></th>        <th class="column">Exame</th>        <th class="column">Interna</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column columnName">Biologia e Geologia</td>        <td class="column"><%= it.result.exams && it.result.exams["Biologia_e_Geologia"] &&            it.result.exams["Biologia_e_Geologia"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Biologia_e_Geologia"] &&            it.result.exams["Biologia_e_Geologia"].media_interna || "--" %>        </td>    </tr>    <tr>        <td class="column columnName">Matemtica</td>        <td class="column"><%= it.result.exams && it.result.exams["Matematica_A"] &&            it.result.exams["Matematica_A"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Matematica_A"] &&            it.result.exams["Matematica_A"].media_interna || "--" %>        </td>    </tr>    <tr>        <td class="column columnName">Portugus</td>        <td class="column"><%= it.result.exams && it.result.exams["Portugues"] &&            it.result.exams["Portugues"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Portugues"] &&            it.result.exams["Portugues"].media_interna || "--" %>        </td>    </tr>    <tr>        <td class="column columnName">Fsica e Qumica</td>        <td class="column"><%= it.result.exams && it.result.exams["Fisica_e_Quimica_A"] &&            it.result.exams["Fisica_e_Quimica_A"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Fisica_e_Quimica_A"] &&            it.result.exams["Fisica_e_Quimica_A"].media_interna || "--" %>        </td>    </tr>    </tbody></table><table class="tableExtra">    <thead>    <tr>        <th colspan="2" class="column columnSeparator"></th>    </tr>    </thead>    <tbody>    <tr>        <td class="column columnName">Pos. Ranking +100 Provas</td>        <td class="column" ><%= it.result.ranking_100provas || "--" %></td>    </tr>    <tr>        <td class="column columnName">Pos. +<%= it.numProvas %> Provas</td>        <td class="column" ><%= it.result.ranking_100provas || "--" %></td>    </tr>    <tr>        <td class="column columnName">N. Provas</td>        <td class="column" ><%= it.result.num_testes || "--" %></td>    </tr>    <tr>        <td class="column columnName">Concelho</td>        <td class="column" ><%= it.result.concelho || "--" %></td>    </tr>    <tr>        <td class="column columnName" title="Indicador de Sucesso">Indicador de Sucesso</td>        <td class="column" ><%= it.result.indicador_de_sucesso || "--" %></td>    </tr></table><table>    <thead>    <tr>        <th colspan="2" class="column columnLabel columnName">Taxa de Reteno</th>    </tr>    </thead>    <tr>        <td class="column columnName">12 ano</td>        <td class="column" ><%= it.result.retencao_12ano || "--" %></td>    </tr>    <tr>        <td class="column columnName">11 ano</td>        <td class="column" ><%= it.result.retencao_11ano || "--" %></td>    </tr>    <tr>        <td class="column columnName">10 ano</td>        <td class="column" ><%= it.result.retencao_10ano || "--" %></td>    </tr></table><table>    <thead>    <tr>        <th colspan="2" class="column columnSeparator"></th>    </tr>    </thead>    <tr>        <td class="column columnName">% alunos carenciados no 12 ano</td>        <td class="column" ><%= it.result.alunos_com_ase || "--" %></td>    </tr>    <tr>        <td class="column columnName">% professores dos quadros</td>        <td class="column" ><%= it.result.professores_quadro || "--" %></td>    </tr></table><table>    <thead>    <tr>        <th colspan="3" class="column columnSeparator"></th>    </tr>    <tr>        <th class="column"></th>        <th class="column">Pais</th>        <th class="column">Mes</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column columnName">Habilitaes (mdia de anos de escolaridade)</td>        <td class="column"><%= it.result.habilitacoes_pais_secundario || "--" %></td>        <td class="column"><%= it.result.habilitacoes_maes_secundario || "--" %></td>    </tr>    </tbody></table><table>    <thead>    <tr>        <th colspan="3" class="column columnLabel columnName">Posio no Ranking Geral</th>    </tr>    <tr>        <th class="column">2016</th>        <th class="column">2015</th>        <th class="column">Variao</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column"><%= it.result.ranking || "--" %></td>        <td class="column"><%= it.result.ranking_ano_anterior || "--" %></td>        <td class="column"><%= it.result.ranking_delta || "--" %></td>    </tr>    <tr>        <td colspan="3" class="column columnSeparator"></td>    </tr>    </tbody></table>'}),define("parts/escolas/tpl/2016_details_9",["require"],function(t){return'<table>    <thead>    <tr>        <th colspan="3" class="column columnLabel columnName">Mdias</th>    </tr>    <tr>        <th class="column"></th>        <th class="column">Exame<br />0 a 100</th>        <th class="column">Interna<br />1 a 5</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column columnName">Matemtica</td>        <td class="column"><%= it.result.exams && it.result.exams["Matematica"] &&            it.result.exams["Matematica"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Matematica"] &&            it.result.exams["Matematica"].media_interna || "--" %>        </td>    </tr>    <tr>        <td class="column columnName">Portugus</td>        <td class="column"><%= it.result.exams && it.result.exams["Portugues"] &&            it.result.exams["Portugues"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Portugues"] &&            it.result.exams["Portugues"].media_interna || "--" %>        </td>    </tr>    </tbody></table><table class="tableExtra">    <thead>    <tr>        <th colspan="2" class="column columnLabel columnName">Mais Informaes</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column columnName">Pos. Ranking +50 Provas</td>        <td class="column" ><%= it.result.ranking_50provas || "--" %></td>    </tr>    <tr>        <td class="column columnName">Pos. +<%= it.numProvas %> Provas</td>        <td class="column" ><%= it.result.ranking_50provas || "--" %></td>    </tr>    <tr>        <td class="column columnName">N. Provas</td>        <td class="column" ><%= it.result.num_testes || "--" %></td>    </tr>    <tr>        <td class="column columnName">Concelho</td>        <td class="column" ><%= it.result.concelho || "--" %></td>    </tr>    <tr>        <td class="column columnName" title="Indicador de Sucesso">Indicador de Sucesso</td>        <td class="column" ><%= it.result.indicador_de_sucesso || "--" %></td>    </tr></table><table>    <thead>    <tr>        <th colspan="2" class="column columnLabel columnName">Taxa de Reteno</th>    </tr>    </thead>    <tr>        <td class="column columnName">9 ano</td>        <td class="column" ><%= it.result.retencao_9ano || "--" %></td>    </tr>    <tr>        <td class="column columnName">8 ano</td>        <td class="column" ><%= it.result.retencao_8ano || "--" %></td>    </tr>    <tr>        <td class="column columnName">7 ano</td>        <td class="column" ><%= it.result.retencao_7ano || "--" %></td>    </tr></table><table>    <thead>    <tr>        <th colspan="3" class="column columnLabel columnName">Posio no Ranking Geral</th>    </tr>    <tr>        <th class="column">2016</th>        <th class="column">2015</th>        <th class="column">Variao</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column"><%= it.result.ranking || "--" %></td>        <td class="column"><%= it.result.ranking_ano_anterior || "--" %></td>        <td class="column"><%= it.result.ranking_delta || "--" %></td>    </tr>    <tr>        <td colspan="3" class="column columnSeparator"></td>    </tr>    </tbody></table>'}),define("parts/escolas/2016",["require","bag-widgets/detailed","widgets/base","lodash","parts/escolas/tpl/2016_details_12","parts/escolas/tpl/2016_details_9","module"],function(t){var i=t("bag-widgets/detailed"),n=t("widgets/base"),e=t("lodash"),r=t("parts/escolas/tpl/2016_details_12"),a=t("parts/escolas/tpl/2016_details_9"),o=t("module"),s="imp-ranking-escolas-2016",l=o.config(),u={key:"tipo",label:"Escolas",startValue:"_DEFAULT_",values:{_DEFAULT_:"Todas as Escolas",PUB:"Pblicas",PRI:"Privadas"}},c={"12ANO":{uri:"12",label:"Secundrio",isDefault:!0,details:r,filters:[u,{key:"in_ranking_100provas",label:"+100 Provas",startValue:!0}],columns:[{key:"nome",label:"Escola",className:"columnName"},{key:"ranking",label:"Pos. Geral",className:"columnRank",isDefaultSort:!0,sortable:!0,title:"Variao face a 2015: <%= it.result.ranking_delta || '--' %>"},{key:"ranking_100provas",label:"Pos. +100 Provas",sortable:!0,className:"columnExtra"},{key:"media",label:"Mdia",sortable:!0,headerTitle:"Mdia dos exames numa escala de 0 a 100 pontos.",className:"columnAverage"},{key:"num_exames",label:"N. Provas",sortable:!0,className:"columnExtra"},{key:"concelho",label:"Concelho",className:"columnExtra"},{key:"indicador_sucesso",label:"Indicador de Sucesso",sortable:!0,className:"columnExtra",headerTitle:"Diferena entre a % de percursos de sucesso no 3. ciclo na escola e a % de percursos de sucesso entre os alunos de todo o pas que, nos trs anos anteriores, no final do 6. ano, tiveram resultados semelhantes aos alunos desta escola. Ter um percurso de sucesso  ter nota positiva nos dois exames no 9., sem ter chumbado no 7. e 8.. O valor apresentado corresponde  mdia dos ltimos dois anos letivos (2015-2016). Nas escolas sem valor a amostra ficava aqum dos 50 alunos e no foi contabilizada."}]},"9ANO":{uri:"9",label:"Bsico",details:a,filters:[u,{key:"in_ranking_50provas",label:"+50 Provas",startValue:!0}],columns:[{key:"nome",label:"Escola",className:"columnName"},{key:"ranking",label:"Pos. Geral",className:"columnRank",isDefaultSort:!0,sortable:!0,title:"Variao face a 2015: <%= it.result.ranking_delta || '--' %>"},{key:"ranking_50provas",label:"Pos. +50 Provas",sortable:!0,className:"columnExtra"},{key:"media",label:"Mdia",sortable:!0,headerTitle:"Mdia dos exames numa escala de 0 a 100 pontos.",className:"columnAverage"},{key:"num_exames",label:"N. Provas",sortable:!0,className:"columnExtra"},{key:"concelho",label:"Concelho",className:"columnExtra"},{key:"indicador_sucesso",label:"Indicador de Sucesso",sortable:!0,className:"columnExtra",headerTitle:"Diferena entre a % de percursos de sucesso no secundrio na escola e a % de percursos de sucesso entre os alunos de todo o pas que, nos trs anos anteriores, no final do 9. ano, tiveram resultados semelhantes aos alunos desta escola. Ter um percurso de sucesso  ter nota positiva nos dois exames no 12., sem ter chumbado no 10. e 11.. O valor apresentado corresponde  mdia dos ltimos trs anos letivos (2014-2016). Nas escolas sem valor a amostra ficava aqum dos 50 alunos e no foi contabilizada."}]}};function h(t,e){var n={baseUrl:"baseUrl"in e?e.baseUrl:l.fbag.url+"/rest/v1_1/schools_ranking/2016",keyFilterLabel:"Pesquisar por escola",loadMore:!0,showNeighbourhood:!1,disclaimer:'<p class="disclaimer">Legenda: Pblica <span class="type_pub">&nbsp;</span> Privada <span class="type_pri">&nbsp;</span></p>\n\n<p class="disclaimer">Os rankings ordenam todas as escolas pela mdia obtida pelos alunos internos na 1 fase dos exames nacionais. Mas pode fazer as suas prprias ordenaes, filtrando os estabelecimentos de ensino por concelho, tipo (pblico/privado) ou nmero de provas</p>\n<p class="disclaimer">As informaes relativas s taxas de reteno reportam a 2014/15 (ltimos dados disponveis). Para consultar informaes de contexto (apenas disponveis para as secundrias pblicas do continente) clique em cada escola. </p>',datasets:c};i.call(this,t,n)}function d(t,e){if(void 0!==t&&null!==t){var n=(1e4*t|0)/100;return p(e?n+"%":n)}}function p(t){if(void 0!==t&&null!==t)return(""+t).replace(".",",")}return h.prototype=Object.create(i.prototype),h.init=function(t,e){return n.init(t,s,h,e)},h.start=function(t,e){return n.start(t,s,h,e)},h.prototype.start=function(){i.prototype.start.apply(this,arguments),this._$element.prepend('<header class="resultsHeader"><p class="logo"><span>Ranking das Escolas 2016</span></p><p class="label">Resultados<span>Nvel de Ensino, Distrito e Concelho</span></p></header>')},h.prototype.stop=function(){i.prototype.stop.apply(this,arguments)},h.prototype._onDataLoaded=function(t){return e.map(t,function(t){var e=t.result,n=t.details;e.media=p(e.media),e.indicador_sucesso=d(e.indicador_sucesso,!1),e.retencao_12ano=d(e.retencao_12ano,!0),e.retencao_11ano=d(e.retencao_11ano,!0),e.retencao_10ano=d(e.retencao_10ano,!0),e.retencao_9ano=d(e.retencao_9ano,!0),e.retencao_8ano=d(e.retencao_8ano,!0),e.retencao_7ano=d(e.retencao_7ano,!0),e.taxa_abandono=p(e.taxa_abandono);var i;i=e,["Matematica_A","Fisica_e_Quimica_A","Biologia_e_Geologia","Portugues"].forEach(function(t){var e=i.exams[t];void 0!==e&&null!==e&&(e.media_exame=p(e.media_exame),e.media_interna=p(e.media_interna))}),e.habilitacoes_maes_secundario=p(e.habilitacoes_maes_secundario),e.habilitacoes_pais_secundario=p(e.habilitacoes_pais_secundario),void 0!==e.alunos_com_ase&&null!=e.alunos_com_ase&&(e.alunos_sem_ase=p((100*(100-e.alunos_sem_ase)|0)/100+"%"),e.alunos_com_ase=p(e.alunos_com_ase+"%")),void 0!==e.professores_quadro&&null!=e.professores_quadro&&(e.professores_quadro=p(e.professores_quadro+"%")),e.ranking&&e.ranking_ano_anterior?e.ranking_delta=e.ranking_ano_anterior-e.ranking:e.ranking_delta=0,e.ranking_delta>0?(e.ranking_class="rank_up",e.ranking_delta="+"+e.ranking_delta):e.ranking_delta<0&&(e.ranking_class="rank_down",e.ranking_delta=""+e.ranking_delta);var r=[n.className||"",e.ranking_class];return e.tipo&&r.push("type_"+e.tipo.toLowerCase()),n.className=r.join(" "),t})},h}),define("parts/escolas/tpl/details_12",["require"],function(t){return'<table>    <thead>    <tr>        <th colspan="3" class="column columnLabel columnName">Mdias</th>    </tr>    <tr>        <th class="column"></th>        <th class="column">Exame</th>        <th class="column">Interna</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column columnName">Biologia e Geologia</td>        <td class="column"><%= it.result.exams && it.result.exams["Biologia_e_Geologia"] &&            it.result.exams["Biologia_e_Geologia"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Biologia_e_Geologia"] &&            it.result.exams["Biologia_e_Geologia"].media_interna || "--" %>        </td>    </tr>    <tr>        <td class="column columnName">Matemtica</td>        <td class="column"><%= it.result.exams && it.result.exams["Matematica_A"] &&            it.result.exams["Matematica_A"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Matematica_A"] &&            it.result.exams["Matematica_A"].media_interna || "--" %>        </td>    </tr>    <tr>        <td class="column columnName">Portugus</td>        <td class="column"><%= it.result.exams && it.result.exams["Portugues"] &&            it.result.exams["Portugues"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Portugues"] &&            it.result.exams["Portugues"].media_interna || "--" %>        </td>    </tr>    <tr>        <td class="column columnName">Fsica e Qumica</td>        <td class="column"><%= it.result.exams && it.result.exams["Fisica_e_Quimica_A"] &&            it.result.exams["Fisica_e_Quimica_A"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Fisica_e_Quimica_A"] &&            it.result.exams["Fisica_e_Quimica_A"].media_interna || "--" %>        </td>    </tr>    </tbody></table><table class="tableExtra">    <thead>    <tr>        <th colspan="2" class="column columnSeparator"></th>    </tr>    </thead>    <tbody>    <tr>        <td class="column columnName">Pos. +100 Provas</td>        <td class="column" ><%= it.result.ranking_100provas || "--" %></td>    </tr>    <tr>        <td class="column columnName">N. Provas</td>        <td class="column" ><%= it.result.num_exames || "--" %></td>    </tr>    <tr>        <td class="column columnName">Concelho</td>        <td class="column" ><%= it.result.concelho || "--" %></td>    </tr>    <tr>        <td class="column columnName" title="Indicador de Sucesso">Indicador de Sucesso</td>        <td class="column" ><%= it.result.indicador_sucesso || "--" %></td>    </tr></table><table>    <thead>    <tr>        <th colspan="3" class="column columnLabel columnName">Taxa de Reteno</th>    </tr>    <tr>        <th class="column"></th>        <th class="column">Mdia na Escola</th>        <th class="column">Mdia Nacional</th>    </tr>    </thead>    <tr>        <td class="column columnName">12 ano</td>        <td class="column" ><%= it.result.retencao_12ano || "--" %></td>        <td class="column" ><%= it.result.retencao_nacional_12ano || "--" %></td>    </tr>    <tr>        <td class="column columnName">11 ano</td>        <td class="column" ><%= it.result.retencao_11ano || "--" %></td>        <td class="column" ><%= it.result.retencao_nacional_11ano || "--" %></td>    </tr>    <tr>        <td class="column columnName">10 ano</td>        <td class="column" ><%= it.result.retencao_10ano || "--" %></td>        <td class="column" ><%= it.result.retencao_nacional_10ano || "--" %></td>    </tr></table><table>    <thead>    <tr>        <th colspan="3" class="column columnSeparator"></th>    </tr>    </thead>    <tr>        <td class="column columnName">% alunos carenciados no 12 ano</td>        <td class="column" ><%= it.result.alunos_com_ase || "--" %></td>        <td class="column" ><%= it.result.alunos_com_ase_nacional || "--" %></td>    </tr>    <tr>        <td class="column columnName">% professores dos quadros</td>        <td class="column" ><%= it.result.professores_quadro || "--" %></td>        <td class="column" ><%= it.result.professores_quadro_nacional || "--" %></td>    </tr></table><table>    <thead>    <tr>        <th colspan="3" class="column columnSeparator"></th>    </tr>    <tr>        <th class="column"></th>        <th class="column">Pais</th>        <th class="column">Mes</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column columnName">Habilitaes (mdia de anos de escolaridade)</td>        <td class="column"><%= it.result.habilitacoes_pais_secundario || "--" %></td>        <td class="column"><%= it.result.habilitacoes_maes_secundario || "--" %></td>    </tr>    </tbody></table><table>    <thead>    <tr>        <th colspan="3" class="column columnLabel columnName">Posio no Ranking Geral</th>    </tr>    <tr>        <th class="column"><%= it.details.year %></th>        <th class="column"><%= it.details.previousYear %></th>        <th class="column">Variao</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column"><%= it.result.ranking || "--" %></td>        <td class="column"><%= it.result.ranking_ano_anterior || "--" %></td>        <td class="column"><%= it.result.ranking_delta || "--" %></td>    </tr>    <tr>        <td colspan="3" class="column columnSeparator"></td>    </tr>    </tbody></table>'}),define("parts/escolas/tpl/details_9",["require"],function(t){return'<table>    <thead>    <tr>        <th colspan="3" class="column columnLabel columnName">Mdias</th>    </tr>    <tr>        <th class="column"></th>        <th class="column">Exame<br />0 a 100</th>        <th class="column">Interna<br />1 a 5</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column columnName">Matemtica</td>        <td class="column"><%= it.result.exams && it.result.exams["Matematica"] &&            it.result.exams["Matematica"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Matematica"] &&            it.result.exams["Matematica"].media_interna || "--" %>        </td>    </tr>    <tr>        <td class="column columnName">Portugus</td>        <td class="column"><%= it.result.exams && it.result.exams["Portugues"] &&            it.result.exams["Portugues"].media_exame || "--" %>        </td>        <td class="column"><%= it.result.exams && it.result.exams["Portugues"] &&            it.result.exams["Portugues"].media_interna || "--" %>        </td>    </tr>    </tbody></table><table class="tableExtra">    <thead>    <tr>        <th colspan="2" class="column columnLabel columnName">Mais Informaes</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column columnName">Pos. +50 Provas</td>        <td class="column" ><%= it.result.ranking_50provas || "--" %></td>    </tr>    <tr>        <td class="column columnName">N. Provas</td>        <td class="column" ><%= it.result.num_exames || "--" %></td>    </tr>    <tr>        <td class="column columnName">Concelho</td>        <td class="column" ><%= it.result.concelho || "--" %></td>    </tr>    <tr>        <td class="column columnName" title="Indicador de Sucesso">Indicador de Sucesso</td>        <td class="column" ><%= it.result.indicador_sucesso || "--" %></td>    </tr></table><table>    <thead>    <tr>        <th colspan="3" class="column columnLabel columnName">Taxa de Reteno</th>    </tr>    <tr>        <th class="column"></th>        <th class="column">Mdia na Escola</th>        <th class="column">Mdia Nacional</th>    </tr>    </thead>    <tr>        <td class="column columnName">9 ano</td>        <td class="column" ><%= it.result.retencao_9ano || "--" %></td>        <td class="column" ><%= it.result.retencao_nacional_9ano || "--" %></td>    </tr>    <tr>        <td class="column columnName">8 ano</td>        <td class="column" ><%= it.result.retencao_8ano || "--" %></td>        <td class="column" ><%= it.result.retencao_nacional_8ano || "--" %></td>    </tr>    <tr>        <td class="column columnName">7 ano</td>        <td class="column" ><%= it.result.retencao_7ano || "--" %></td>        <td class="column" ><%= it.result.retencao_nacional_7ano || "--" %></td>    </tr></table><table>    <thead>    <tr>        <th colspan="3" class="column columnLabel columnName">Posio no Ranking Geral</th>    </tr>    <tr>        <th class="column"><%= it.details.year %></th>        <th class="column"><%= it.details.previousYear %></th>        <th class="column">Variao</th>    </tr>    </thead>    <tbody>    <tr>        <td class="column"><%= it.result.ranking || "--" %></td>        <td class="column"><%= it.result.ranking_ano_anterior || "--" %></td>        <td class="column"><%= it.result.ranking_delta || "--" %></td>    </tr>    <tr>        <td colspan="3" class="column columnSeparator"></td>    </tr>    </tbody></table>'}),define("parts/escolas/tpl/details_Profissional",["require"],function(t){return'<table>     <thead>       <tr>         <th colspan="3" class="column columnLabel columnName">Cursos</th>       </tr>     </thead>     <tbody>       <% for (var k = 0; k < it.result.cursos.length; k++) { %>       <tr>         <td class="column columnName"><%= it.result.cursos[k].nome %></td>       </tr>       <% } %>     </tbody>   </table>'}),define("parts/escolas/escolas",["require","bag-widgets/detailed","widgets/base","lodash","parts/escolas/tpl/details_12","parts/escolas/tpl/details_9","parts/escolas/tpl/details_Profissional","module"],function(t){var a,o=t("bag-widgets/detailed"),n=t("widgets/base"),e=t("lodash"),s=t("parts/escolas/tpl/details_12"),l=t("parts/escolas/tpl/details_9"),u=t("parts/escolas/tpl/details_Profissional"),i=t("module"),r="imp-ranking-escolas-2017",c=i.config(),h={key:"tipo",label:"Escolas",startValue:"_DEFAULT_",values:{_DEFAULT_:"Todas as Escolas",PUB:"Pblicas",PRI:"Privadas"}},d={key:"in_ranking_100provas",label:"+100 Provas",startValue:!0},p={key:"in_ranking_50provas",label:"+50 Provas",startValue:!0},f={ACORES:"AORES",BRAGANCA:"BRAGANA",EVORA:"VORA",SANTAREM:"SANTARM",SETUBAL:"SETBAL","ANGRA DO HEROISMO":"ANGRA DO HEROSMO",POVOACAO:"POVOAO","PRAIA DA VITORIA":"PRAIA DA VITRIA","SAO ROQUE DO PICO":"SO ROQUE DO PICO",AGUEDA:"GUEDA",ILHAVO:"LHAVO","OLIVEIRA DE AZEMEIS":"OLIVEIRA DE AZEMIS","SAO JOAO DA MADEIRA":"SO JOO DA MADEIRA",ALMODOVAR:"ALMODVAR",MERTOLA:"MRTOLA",GUIMARAES:"GUIMARES","POVOA DE LANHOSO":"PVOA DE LANHOSO","VILA NOVA DE FAMALICAO":"VILA NOVA DE FAMALICO","ALFANDEGA DA FE":"ALFNDEGA DA F","CARRAZEDA DE ANSIAES":"CARRAZEDA DE ANSIES",COVILHA:"COVILH",FUNDAO:"FUNDO","PROENCA-A-NOVA":"PROENA-A-NOVA",SERTA:"SERT",LOUSA:"LOUS",TABUA:"TBUA","VILA VICOSA":"VILA VIOSA",LOULE:"LOUL",OLHAO:"OLHO",PORTIMAO:"PORTIMO","SAO BRAS DE ALPORTEL":"SO BRS DE ALPORTEL","VILA REAL DE SANTO ANTONIO":"VILA REAL DE SANTO ANTNIO",MEDA:"MDA","VILA NOVA DE FOZ COA":"VILA NOVA DE FOZ CA",ALVAIAZERE:"ALVAIZERE",ANSIAO:"ANSIO","FIGUEIRO DOS VINHOS":"FIGUEIR DOS VINHOS",NAZARE:"NAZAR",OBIDOS:"BIDOS","PORTO DE MOS":"PORTO DE MS",LOURINHA:"LOURINH","SOBRAL DE MONTE AGRACO":"SOBRAL DE MONTE AGRAO","CAMARA DE LOBOS":"CMARA DE LOBOS","SAO VICENTE":"SO VICENTE","PONTE DE SOR":"PONTE DE SR",BAIAO:"BAIO","PACOS DE FERREIRA":"PAOS DE FERREIRA","POVOA DE VARZIM":"PVOA DE VARZIM",ALPIARCA:"ALPIARA",CONSTANCIA:"CONSTNCIA","FERREIRA DO ZEZERE":"FERREIRA DO ZZERE",GOLEGA:"GOLEG",MACAO:"MAO",OUREM:"OURM",MELGACO:"MELGAO",MONCAO:"MONO",VALENCA:"VALENA",ALIJO:"ALIJ","MESAO FRIO":"MESO FRIO",MURCA:"MURA","PESO DA REGUA":"PESO DA RGUA",VALPACOS:"VALPAOS",CINFAES:"CINFES",MORTAGUA:"MORTGUA","SANTA COMBA DAO":"SANTA COMBA DO","SAO JOAO DA PESQUEIRA":"SO JOO DA PESQUEIRA","SAO PEDRO DO SUL":"SO PEDRO DO SUL",SATAO:"SATO",TABUACO:"TABUAO"};function m(t,e){a=e.year;var n,i,r={baseUrl:"baseUrl"in e?e.baseUrl:c.fbag.url+"/rest/v1_1/schools_ranking/"+a,keyFilterLabel:"Pesquisar por escola",loadMore:!0,showNeighbourhood:!1,disclaimer:(i=a,'<p class="disclaimer">Legenda: Pblica <span class="type_pub">&nbsp;</span> Privada <span class="type_pri">&nbsp;</span></p>\n\n<p class="disclaimer">Os rankings ordenam todas as escolas pela mdia obtida pelos alunos internos na 1 fase dos exames nacionais e tambm pelos que, sendo externos, frequentaram a escola o ano inteiro. Mas pode fazer as suas prprias ordenaes, filtrando os estabelecimentos de ensino por concelho, tipo (pblico/privado) ou nmero de provas</p>\n<p class="disclaimer">As informaes relativas s taxas de reteno reportam a '+b(i,2)+"/"+b(i,1)+" (ltimos dados disponveis). Para consultar informaes de contexto (apenas disponveis para as secundrias pblicas do continente) clique em cada escola.</p>"),datasets:(n=a,{"12ANO":{uri:"12",label:"Secundrio",isDefault:!0,details:s,filters:[h,d],columns:[{key:"nome",label:"Escola",className:"columnName"},{key:"ranking_100provas",label:"Pos. +100 Provas",sortable:!0,className:"columnExtra"},{key:"ranking",label:"Pos. Geral",className:"columnRank",sortable:!0,isDefaultSort:!0,title:"Variao face a"+n+": <%= it.result.ranking_delta || '--' %>"},{key:"media",label:"Mdia",sortable:!0,headerTitle:"Mdia dos exames numa escala de 0 a 20 pontos.",className:"columnAverage"},{key:"num_exames",label:"N. Provas",sortable:!0,className:"columnExtra"},{key:"concelho",label:"Concelho",className:"columnExtra"},{key:"indicador_sucesso",label:"Indicador de Sucesso",sortable:!0,className:"columnExtra",headerTitle:"Diferena entre a % de percursos de sucesso no 3. ciclo na escola e a % de percursos de sucesso entre os alunos de todo o pas que, nos trs anos anteriores, no final do 9. ano, tiveram resultados semelhantes aos alunos desta escola. Ter um percurso de sucesso  ter nota positiva nos dois exames no 12., sem ter chumbado no 10. e 11.. O valor apresentado corresponde  mdia dos ltimos trs anos letivos ("+b(n,2)+"-"+n+"). Nas escolas sem valor a amostra ficava aqum dos 50 alunos e no foi contabilizada."}]},"9ANO":{uri:"9",label:"Bsico",details:l,filters:[h,p],columns:[{key:"nome",label:"Escola",className:"columnName"},{key:"ranking_50provas",label:"Pos. +50 Provas",sortable:!0,className:"columnExtra"},{key:"ranking",label:"Pos. Geral",className:"columnRank",sortable:!0,isDefaultSort:!0,title:"Variao face a "+n+": <%= it.result.ranking_delta || '--' %>"},{key:"media",label:"Mdia",sortable:!0,headerTitle:"Mdia dos exames numa escala de 0 a 100 pontos.",className:"columnAverage"},{key:"num_exames",label:"N. Provas",sortable:!0,className:"columnExtra"},{key:"concelho",label:"Concelho",className:"columnExtra"},{key:"indicador_sucesso",label:"Indicador de Sucesso",sortable:!0,className:"columnExtra",headerTitle:"Diferena entre a % de percursos de sucesso no 3. ciclo e a % de percursos de sucesso entre os alunos de todo o pas que, no final do 6. ano, tiveram resultados semelhantes aos alunos desta escola. Ter um percurso de sucesso  ter nota positiva nos dois exames no 9., sem ter chumbado no 7. e 8.. O valor corresponde  mdia dos trs ltimos anos letivos ("+b(n,2)+"-"+n+").Nas escolas sem valor a amostra ficava aqum dos 50 alunos e no foi contabilizada"}]},PROFISSIONAL:{uri:"PROFISSIONAL",label:"Cursos Profissionais",details:u,filters:[],columns:[{key:"nome",label:"Escola",className:"columnName"},{key:"concelho",label:"Concelho",sortable:!0,className:"columnExtra"},{key:"ranking",label:"Pos. Geral",sortable:!0,isDefaultSort:!0,className:"columnAverage"},{key:"indicador_conclusao",label:"Ind. de Concluso",className:"columnAverage",headerTitle:"Diferena entre a percentagem de concluses dos cursos em 3 anos na escola e a mdia nacional para alunos com um perfil anterior semelhante (idade com que entraram no ensino profissional e ao social escolar)."},{key:"conclusao_tempo_normal",label:"Concluso no tempo normal",sortable:!0,className:"columnExtra",headerTitle:"Percentagem de alunos da escola que concluram o curso profissional at trs anos depois de terem ingressado nesta modalidade de ensino, oriundos do 9 ano."},{key:"taxa_abandono",label:"Taxa de abandono",sortable:!0,className:"columnExtra",headerTitle:"Percentagem de alunos que no concluram os cursos profissionais em 3 anos nem esto inscritos no ensino secundrio."},{key:"num_alunos",label:"Nmero de alunos",className:"columnExtra",headerTitle:"Nos casos em que o nmero de alunos  inferior a 20 o Ministrio no calculou indicadores de concluso."}]}}),locations:f};o.call(this,t,r)}function v(t){if(void 0!==t&&null!==t)return y(t+"%")}function g(t,e){if(void 0!==t&&null!==t){var n=(1e4*t|0)/100;return y(e?n+"%":n)}}function y(t){if(void 0!==t&&null!==t)return _(t).replace(".",",")}function _(t){if(void 0!==t&&null!==t)return""+t}function b(t,e){var n=parseInt(t);return _(n-=e)}return m.prototype=Object.create(o.prototype),m.init=function(t,e){return n.init(t,r,m,e)},m.start=function(t,e){return n.start(t,r,m,e)},m.prototype.start=function(){o.prototype.start.apply(this,arguments),this._$element.prepend('<header class="resultsHeader"><p class="logo"><span>Ranking das Escolas</span></p><p class="label">Resultados<span>Nvel de Ensino, Distrito e Concelho</span></p></header>')},m.prototype.stop=function(){o.prototype.stop.apply(this,arguments)},m.prototype._onDataLoaded=function(t){return e.map(t,function(t){var e=t.result,n=t.details;e.media=y(e.media),e.indicador_sucesso=g(e.indicador_sucesso,!1),e.retencao_12ano=g(e.retencao_12ano,!0),e.retencao_11ano=g(e.retencao_11ano,!0),e.retencao_10ano=g(e.retencao_10ano,!0),e.retencao_9ano=g(e.retencao_9ano,!0),e.retencao_8ano=g(e.retencao_8ano,!0),e.retencao_7ano=g(e.retencao_7ano,!0),e.taxa_abandono=v(e.taxa_abandono),e.conclusao_tempo_normal=v(e.conclusao_tempo_normal),e.indicador_conclusao=y(e.indicador_conclusao),e.retencao_nacional_12ano=g(e.retencao_nacional_12ano,!0),e.retencao_nacional_11ano=g(e.retencao_nacional_11ano,!0),e.retencao_nacional_10ano=g(e.retencao_nacional_10ano,!0),e.retencao_nacional_9ano=g(e.retencao_nacional_9ano,!0),e.retencao_nacional_8ano=g(e.retencao_nacional_8ano,!0),e.retencao_nacional_7ano=g(e.retencao_nacional_7ano,!0);!function(n,t){if(void 0===n.exams||null===n.exams)return;t.forEach(function(t){var e=n.exams[t];void 0!==e&&null!==e&&(e.media_exame=y(e.media_exame),e.media_interna=y(e.media_interna))})}(e,["Matematica_A","Fisica_e_Quimica_A","Biologia_e_Geologia","Portugues"]),e.habilitacoes_maes_secundario=y(e.habilitacoes_maes_secundario),e.habilitacoes_pais_secundario=y(e.habilitacoes_pais_secundario),void 0!==e.alunos_com_ase&&null!=e.alunos_com_ase&&(e.alunos_sem_ase=y(((100*(100-e.alunos_com_ase)|0)/100).toFixed(2)+"%"),e.alunos_com_ase=y(e.alunos_com_ase.toFixed(2)+"%")),void 0!==e.alunos_com_ase_nacional&&null!=e.alunos_com_ase_nacional&&(e.alunos_sem_ase_nacional=y(((100*(100-e.alunos_com_ase_nacional)|0)/100).toFixed(2)+"%"),e.alunos_com_ase_nacional=y(e.alunos_com_ase_nacional.toFixed(2)+"%")),void 0!==e.professores_quadro&&null!=e.professores_quadro&&(e.professores_quadro=y(e.professores_quadro+"%")),void 0!==e.professores_quadro_nacional&&null!=e.professores_quadro_nacional&&(e.professores_quadro_nacional=y(e.professores_quadro_nacional.toFixed(2)+"%")),e.ranking&&e.ranking_ano_anterior?e.ranking_delta=e.ranking_ano_anterior-e.ranking:e.ranking_delta=0,e.ranking_delta>0?(e.ranking_class="rank_up",e.ranking_delta="+"+e.ranking_delta):e.ranking_delta<0&&(e.ranking_class="rank_down",e.ranking_delta=""+e.ranking_delta);var i=[n.className||"",e.ranking_class];return e.tipo&&i.push("type_"+e.tipo.toLowerCase()),n.className=i.join(" "),n.year=a,n.previousYear=b(a,1),t})},m}),function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define("telefunken",[],e):"object"===typeof exports?exports.telefunken=e():t.Telefunken=e()}("undefined"!==typeof self?self:this,function(){return function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=26)}([function(e,t,n){(function(Xr){(function(){var t,qr=this;t=function(){var t="undefined"!==typeof qr?qr:"undefined"!==typeof Xr?Xr:"undefined"!==typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n,p="undefined"!==typeof qr?qr:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},i={},r=(Object.freeze||Object)({default:i}),a=r&&i||r,o="undefined"!==typeof t?t:"undefined"!==typeof qr?qr:{};"undefined"!==typeof document?n=document:(n=o["__GLOBAL_DOCUMENT_CACHE@4"])||(n=o["__GLOBAL_DOCUMENT_CACHE@4"]=a);var s,l,u,c,f=n,h=p.navigator&&p.navigator.userAgent||"",d=/AppleWebKit\/([\d.]+)/i.exec(h),m=d?parseFloat(d.pop()):null,v=/iPad/i.test(h),g=/iPhone/i.test(h)&&!v,y=/iPod/i.test(h),_=g||v||y,b=(s=h.match(/OS (\d+)_/i))&&s[1]?s[1]:null,w=/Android/i.test(h),T=function(){var t=h.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),n=t[2]&&parseFloat(t[2]);return e&&n?parseFloat(t[1]+"."+t[2]):e||null}(),x=w&&/webkit/i.test(h)&&T<2.3,E=w&&T<5&&m<537,S=/Firefox/i.test(h),A=/Edge/i.test(h),M=!A&&/Chrome/i.test(h),C=(l=h.match(/Chrome\/(\d+)/))&&l[1]?parseFloat(l[1]):null,k=/MSIE\s8\.0/.test(h),O=(u=/MSIE\s(\d+)\.\d/.exec(h),!(c=u&&parseFloat(u[1]))&&/Trident\/7.0/i.test(h)&&/rv:11.0/.test(h)&&(c=11),c),L=/Safari/i.test(h)&&!M&&!w&&!A,R=L||_,P=it()&&("ontouchstart"in p||p.DocumentTouch&&p.document instanceof p.DocumentTouch),I=it()&&"backgroundSize"in p.document.createElement("video").style,D=(Object.freeze||Object)({IS_IPAD:v,IS_IPHONE:g,IS_IPOD:y,IS_IOS:_,IOS_VERSION:b,IS_ANDROID:w,ANDROID_VERSION:T,IS_OLD_ANDROID:x,IS_NATIVE_ANDROID:E,IS_FIREFOX:S,IS_EDGE:A,IS_CHROME:M,CHROME_VERSION:C,IS_IE8:k,IE_VERSION:O,IS_SAFARI:L,IS_ANY_SAFARI:R,TOUCH_ENABLED:P,BACKGROUND_SIZE_SUPPORTED:I}),j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},U=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},B=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},F=function(t,e){return t.raw=e,t},V=Object.prototype.toString,H=function(t){return W(t)?Object.keys(t):[]};function z(e,n){H(e).forEach(function(t){return n(e[t],t)})}function G(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return Object.assign?Object.assign.apply(Object,[n].concat(e)):(e.forEach(function(t){t&&z(t,function(t,e){n[e]=t})}),n)}function W(t){return!!t&&"object"===("undefined"===typeof t?"undefined":j(t))}function q(t){return W(t)&&"[object Object]"===V.call(t)&&t.constructor===Object}var X=void 0,Y="info",$=[],Z=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!!O&&O<11,i=X.levels[Y],r=new RegExp("^("+i+")$");if("log"!==t&&e.unshift(t.toUpperCase()+":"),$&&$.push([].concat(e)),e.unshift("VIDEOJS:"),p.console){var a=p.console[t];a||"debug"!==t||(a=p.console.info||p.console.log),a&&i&&r.test(t)&&(n&&(e=e.map(function(e){if(W(e)||Array.isArray(e))try{return JSON.stringify(e)}catch(t){return String(e)}return String(e)}).join(" ")),a.apply?a[Array.isArray(e)?"apply":"call"](p.console,e):a(e))}};(X=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];Z("log",e)}).levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:Y},X.level=function(t){if("string"===typeof t){if(!X.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');Y=t}return Y},X.history=function(){return $?[].concat($):[]},X.history.clear=function(){$&&($.length=0)},X.history.disable=function(){null!==$&&($.length=0,$=null)},X.history.enable=function(){null===$&&($=[])},X.error=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Z("error",e)},X.warn=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Z("warn",e)},X.debug=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Z("debug",e)};var K=X;var J=function(t){for(var e="",n=0;n<arguments.length;n++)e+=t[n].replace(/\n\r?\s*/g,"")+(arguments[n+1]||"");return e};function Q(t,e){if(!t||!e)return"";if("function"!==typeof p.getComputedStyle)return t.currentStyle[e]||"";var n=p.getComputedStyle(t);return n?n[e]:""}var tt=F(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function et(t){return"string"===typeof t&&/\S/.test(t)}function nt(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function it(){return f===p.document&&"undefined"!==typeof f.createElement}function rt(t){return W(t)&&1===t.nodeType}function at(){try{return p.parent!==p.self}catch(t){return!0}}function ot(i){return function(t,e){if(!et(t))return f[i](null);et(e)&&(e=f.querySelector(e));var n=rt(e)?e:f;return n[i]&&n[i](t)}}function st(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],r=f.createElement(t);return Object.getOwnPropertyNames(n).forEach(function(t){var e=n[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(K.warn(J(tt,t,e)),r.setAttribute(t,e)):"textContent"===t?lt(r,e):r[t]=e}),Object.getOwnPropertyNames(e).forEach(function(t){r.setAttribute(t,e[t])}),i&&Mt(r,i),r}function lt(t,e){return"undefined"===typeof t.textContent?t.innerText=e:t.textContent=e,t}function ut(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function ct(t,e){return nt(e),t.classList?t.classList.contains(e):(n=e,new RegExp("(^|\\s)"+n+"($|\\s)")).test(t.className);var n}function ht(t,e){return t.classList?t.classList.add(e):ct(t,e)||(t.className=(t.className+" "+e).trim()),t}function dt(t,e){return t.classList?t.classList.remove(e):(nt(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function pt(t,e,n){var i=ct(t,e);if("function"===typeof n&&(n=n(t,e)),"boolean"!==typeof n&&(n=!i),n!==i)return n?ht(t,e):dt(t,e),t}function ft(n,i){Object.getOwnPropertyNames(i).forEach(function(t){var e=i[t];null===e||"undefined"===typeof e||!1===e?n.removeAttribute(t):n.setAttribute(t,!0===e?"":e)})}function mt(t){var e={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0)for(var i=t.attributes,r=i.length-1;r>=0;r--){var a=i[r].name,o=i[r].value;"boolean"!==typeof t[a]&&-1===n.indexOf(","+a+",")||(o=null!==o),e[a]=o}return e}function vt(t,e){return t.getAttribute(e)}function gt(t,e,n){t.setAttribute(e,n)}function yt(t,e){t.removeAttribute(e)}function _t(){f.body.focus(),f.onselectstart=function(){return!1}}function bt(){f.onselectstart=function(){return!0}}function wt(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==e[t]&&(n[t]=e[t])}),n.height||(n.height=parseFloat(Q(t,"height"))),n.width||(n.width=parseFloat(Q(t,"width"))),n}}function Tt(t){var e=void 0;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var n=f.documentElement,i=f.body,r=n.clientLeft||i.clientLeft||0,a=p.pageXOffset||i.scrollLeft,o=e.left+a-r,s=n.clientTop||i.clientTop||0,l=p.pageYOffset||i.scrollTop,u=e.top+l-s;return{left:Math.round(o),top:Math.round(u)}}function xt(t,e){var n={},i=Tt(t),r=t.offsetWidth,a=t.offsetHeight,o=i.top,s=i.left,l=e.pageY,u=e.pageX;return e.changedTouches&&(u=e.changedTouches[0].pageX,l=e.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(o-l+a)/a)),n.x=Math.max(0,Math.min(1,(u-s)/r)),n}function Et(t){return W(t)&&3===t.nodeType}function St(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function At(t){return"function"===typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"===typeof t&&(t=t()),rt(t)||Et(t)?t:"string"===typeof t&&/\S/.test(t)?f.createTextNode(t):void 0}).filter(function(t){return t})}function Mt(e,t){return At(t).forEach(function(t){return e.appendChild(t)}),e}function Ct(t,e){return Mt(St(t),e)}function kt(t){return void 0===t.button&&void 0===t.buttons||(0===t.button&&void 0===t.buttons||(9===O||0===t.button&&1===t.buttons))}var Ot=ot("querySelector"),Lt=ot("querySelectorAll"),Rt=(Object.freeze||Object)({isReal:it,isEl:rt,isInFrame:at,createEl:st,textContent:lt,prependTo:ut,hasClass:ct,addClass:ht,removeClass:dt,toggleClass:pt,setAttributes:ft,getAttributes:mt,getAttribute:vt,setAttribute:gt,removeAttribute:yt,blockTextSelection:_t,unblockTextSelection:bt,getBoundingClientRect:wt,findPosition:Tt,getPointerPosition:xt,isTextNode:Et,emptyEl:St,normalizeContent:At,appendContent:Mt,insertContent:Ct,isSingleLeftClick:kt,$:Ot,$$:Lt}),Pt=1;function It(){return Pt++}var Dt={},jt="vdata"+(new Date).getTime();function Nt(t){var e=t[jt];return e||(e=t[jt]=It()),Dt[e]||(Dt[e]={}),Dt[e]}function Ut(t){var e=t[jt];return!!e&&!!Object.getOwnPropertyNames(Dt[e]).length}function Bt(e){var t=e[jt];if(t){delete Dt[t];try{delete e[jt]}catch(t){e.removeAttribute?e.removeAttribute(jt):e[jt]=null}}}function Ft(t,e){var n=Nt(t);0===n.handlers[e].length&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&Bt(t)}function Vt(e,n,t,i){t.forEach(function(t){e(n,t,i)})}function Ht(t){function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped){var i=t||p.event;for(var r in t={},i)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&i.preventDefault||(t[r]=i[r]));if(t.target||(t.target=t.srcElement||f),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){i.preventDefault&&i.preventDefault(),t.returnValue=!1,i.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),t.cancelBubble=!0,i.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,null!==t.clientX&&void 0!==t.clientX){var a=f.documentElement,o=f.body;t.pageX=t.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),t.pageY=t.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t}var zt=!1;!function(){try{var t=Object.defineProperty({},"passive",{get:function(){zt=!0}});p.addEventListener("test",null,t),p.removeEventListener("test",null,t)}catch(t){}}();var Gt=["touchstart","touchmove"];function Wt(o,t,e){if(Array.isArray(t))return Vt(Wt,o,t,e);var s=Nt(o);if(s.handlers||(s.handlers={}),s.handlers[t]||(s.handlers[t]=[]),e.guid||(e.guid=It()),s.handlers[t].push(e),s.dispatcher||(s.disabled=!1,s.dispatcher=function(t,e){if(!s.disabled){t=Ht(t);var n=s.handlers[t.type];if(n)for(var i=n.slice(0),r=0,a=i.length;r<a&&!t.isImmediatePropagationStopped();r++)try{i[r].call(o,t,e)}catch(t){K.error(t)}}}),1===s.handlers[t].length)if(o.addEventListener){var n=!1;zt&&Gt.indexOf(t)>-1&&(n={passive:!0}),o.addEventListener(t,s.dispatcher,n)}else o.attachEvent&&o.attachEvent("on"+t,s.dispatcher)}function qt(t,e,n){if(Ut(t)){var i=Nt(t);if(i.handlers){if(Array.isArray(e))return Vt(qt,t,e,n);var r=function(t,e){i.handlers[e]=[],Ft(t,e)};if(void 0!==e){var a=i.handlers[e];if(a)if(n){if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);Ft(t,e)}else r(t,e)}else for(var s in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},s)&&r(t,s)}}}function Xt(t,e,n){var i=Ut(t)?Nt(t):{},r=t.parentNode||t.ownerDocument;if("string"===typeof e&&(e={type:e,target:t}),e=Ht(e),i.dispatcher&&i.dispatcher.call(t,e,n),r&&!e.isPropagationStopped()&&!0===e.bubbles)Xt.call(null,r,e,n);else if(!r&&!e.defaultPrevented){var a=Nt(e.target);e.target[e.type]&&(a.disabled=!0,"function"===typeof e.target[e.type]&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function Yt(e,n,i){if(Array.isArray(n))return Vt(Yt,e,n,i);var t=function t(){qt(e,n,t),i.apply(this,arguments)};t.guid=i.guid=i.guid||It(),Wt(e,n,t)}var $t=(Object.freeze||Object)({fixEvent:Ht,on:Wt,off:qt,trigger:Xt,one:Yt}),Zt=!1,Kt=void 0,Jt=function(){if(it()){var t=f.getElementsByTagName("video"),e=f.getElementsByTagName("audio"),n=f.getElementsByTagName("video-js"),i=[];if(t&&t.length>0)for(var r=0,a=t.length;r<a;r++)i.push(t[r]);if(e&&e.length>0)for(var o=0,s=e.length;o<s;o++)i.push(e[o]);if(n&&n.length>0)for(var l=0,u=n.length;l<u;l++)i.push(n[l]);if(i&&i.length>0)for(var c=0,h=i.length;c<h;c++){var d=i[c];if(!d||!d.getAttribute){Qt(1);break}void 0===d.player&&null!==d.getAttribute("data-setup")&&Kt(d)}else Zt||Qt(1)}};function Qt(t,e){e&&(Kt=e),p.setTimeout(Jt,t)}it()&&"complete"===f.readyState?Zt=!0:Yt(p,"load",function(){Zt=!0});var te=function(t){var e=f.createElement("style");return e.className=t,e},ee=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e},ne=function(t,e,n){e.guid||(e.guid=It());var i=function(){return e.apply(t,arguments)};return i.guid=n?n+"_"+e.guid:e.guid,i},ie=function(e,n){var i=Date.now();return function(){var t=Date.now();t-i>=n&&(e.apply(void 0,arguments),i=t)}},re=function(){};re.prototype.allowedEvents_={},re.prototype.addEventListener=re.prototype.on=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},Wt(this,t,e),this.addEventListener=n},re.prototype.removeEventListener=re.prototype.off=function(t,e){qt(this,t,e)},re.prototype.one=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},Yt(this,t,e),this.addEventListener=n},re.prototype.dispatchEvent=re.prototype.trigger=function(t){var e=t.type||t;"string"===typeof t&&(t={type:e}),t=Ht(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),Xt(this,t)};var ae=function(e){return e instanceof re||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"===typeof e[t]})},oe=function(t){return"string"===typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length},se=function(t){if(!t.nodeName&&!ae(t))throw new Error("Invalid target; must be a DOM node or evented object.")},le=function(t){if(!oe(t))throw new Error("Invalid event type; must be a non-empty string or array.")},ue=function(t){if("function"!==typeof t)throw new Error("Invalid listener; must be a function.")},ce=function(t,e){var n=e.length<3||e[0]===t||e[0]===t.eventBusEl_,i=void 0,r=void 0,a=void 0;return a=n?(i=t.eventBusEl_,e.length>=3&&e.shift(),r=e[0],e[1]):(i=e[0],r=e[1],e[2]),se(i),le(r),ue(a),{isTargetingSelf:n,target:i,type:r,listener:a=ne(t,a)}},he=function(t,e,n,i){se(t),t.nodeName?$t[e](t,n,i):t[e](n,i)},de={on:function(){for(var t=this,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=ce(this,n),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;if(he(o,"on",s,l),!a){var u=function(){return t.off(o,s,l)};u.guid=l.guid;var c=function(){return t.off("dispose",u)};c.guid=l.guid,he(this,"on","dispose",u),he(o,"on","dispose",c)}},one:function(){for(var r=this,t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=ce(this,e),a=i.isTargetingSelf,o=i.target,s=i.type,l=i.listener;if(a)he(o,"one",s,l);else{var u=function t(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];r.off(o,s,t),l.apply(null,n)};u.guid=l.guid,he(o,"one",s,u)}},off:function(t,e,n){if(!t||oe(t))qt(this.eventBusEl_,t,e);else{var i=t,r=e;se(i),le(r),ue(n),n=ne(this,n),this.off("dispose",n),i.nodeName?(qt(i,r,n),qt(i,"dispose",n)):ae(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(t,e){return Xt(this.eventBusEl_,t,e)}};function pe(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(e){if(!t[e].nodeName)throw new Error('The eventBusKey "'+e+'" does not refer to an element.');t.eventBusEl_=t[e]}else t.eventBusEl_=st("span",{className:"vjs-event-bus"});return G(t,de),t.on("dispose",function(){t.off(),p.setTimeout(function(){t.eventBusEl_=null},0)}),t}var fe={state:{},setState:function(t){var n=this;"function"===typeof t&&(t=t());var i=void 0;return z(t,function(t,e){n.state[e]!==t&&((i=i||{})[e]={from:n.state[e],to:t}),n.state[e]=t}),i&&ae(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function me(t,e){return G(t,fe),t.state=G({},t.state,e),"function"===typeof t.handleStateChanged&&ae(t)&&t.on("statechanged",t.handleStateChanged),t}function ve(t){return"string"!==typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}function ge(){for(var n={},t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.forEach(function(t){t&&z(t,function(t,e){q(t)?(q(n[e])||(n[e]={}),n[e]=ge(n[e],t)):n[e]=t})}),n}var ye=function(){function u(t,e,n){if(N(this,u),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=ge({},this.options_),e=this.options_=ge(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+It()}this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),!1!==e.evented&&pe(this,{eventBusKey:this.el_?"el_":null}),me(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==e.initChildren&&this.initChildren(),this.ready(n),!1!==e.reportTouchActivity&&this.enableTouchActivity()}return u.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Bt(this.el_),this.el_=null),this.player_=null},u.prototype.player=function(){return this.player_},u.prototype.options=function(t){return K.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),t&&(this.options_=ge(this.options_,t)),this.options_},u.prototype.el=function(){return this.el_},u.prototype.createEl=function(t,e,n){return st(t,e,n)},u.prototype.localize=function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[n],o=n&&n.split("-")[0],s=i&&i[o],l=e;return a&&a[t]?l=a[t]:s&&s[t]&&(l=s[t]),r&&(l=l.replace(/\{(\d+)\}/g,function(t,e){var n=r[e-1],i=n;return"undefined"===typeof n&&(i=t),i})),l},u.prototype.contentEl=function(){return this.contentEl_||this.el_},u.prototype.id=function(){return this.id_},u.prototype.name=function(){return this.name_},u.prototype.children=function(){return this.children_},u.prototype.getChildById=function(t){return this.childIndex_[t]},u.prototype.getChild=function(t){if(t)return t=ve(t),this.childNameIndex_[t]},u.prototype.addChild=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,i=void 0,r=void 0;if("string"===typeof t){r=ve(t);var a=e.componentClass||r;e.name=r;var o=u.getComponent(a);if(!o)throw new Error("Component "+a+" does not exist");if("function"!==typeof o)return null;i=new o(this.player_||this,e)}else i=t;if(this.children_.splice(n,0,i),"function"===typeof i.id&&(this.childIndex_[i.id()]=i),(r=r||i.name&&ve(i.name()))&&(this.childNameIndex_[r]=i),"function"===typeof i.el&&i.el()){var s=this.contentEl().children[n]||null;this.contentEl().insertBefore(i.el(),s)}return i},u.prototype.removeChild=function(t){if("string"===typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===t){e=!0,this.children_.splice(n,1);break}if(e){this.childIndex_[t.id()]=null,this.childNameIndex_[t.name()]=null;var i=t.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},u.prototype.initChildren=function(){var r=this,i=this.options_.children;if(i){var a=this.options_,t=void 0,n=u.getComponent("Tech");(t=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(e){return!t.some(function(t){return"string"===typeof t?e===t:e===t.name})})).map(function(t){var e=void 0,n=void 0;return n="string"===typeof t?i[e=t]||r.options_[e]||{}:(e=t.name,t),{name:e,opts:n}}).filter(function(t){var e=u.getComponent(t.opts.componentClass||ve(t.name));return e&&!n.isTech(e)}).forEach(function(t){var e=t.name,n=t.opts;if(void 0!==a[e]&&(n=a[e]),!1!==n){!0===n&&(n={}),n.playerOptions=r.options_.playerOptions;var i=r.addChild(e,n);i&&(r[e]=i)}})}},u.prototype.buildCSSClass=function(){return""},u.prototype.ready=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},u.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},u.prototype.$=function(t,e){return Ot(t,e||this.contentEl())},u.prototype.$$=function(t,e){return Lt(t,e||this.contentEl())},u.prototype.hasClass=function(t){return ct(this.el_,t)},u.prototype.addClass=function(t){ht(this.el_,t)},u.prototype.removeClass=function(t){dt(this.el_,t)},u.prototype.toggleClass=function(t,e){pt(this.el_,t,e)},u.prototype.show=function(){this.removeClass("vjs-hidden")},u.prototype.hide=function(){this.addClass("vjs-hidden")},u.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},u.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},u.prototype.getAttribute=function(t){return vt(this.el_,t)},u.prototype.setAttribute=function(t,e){gt(this.el_,t,e)},u.prototype.removeAttribute=function(t){yt(this.el_,t)},u.prototype.width=function(t,e){return this.dimension("width",t,e)},u.prototype.height=function(t,e){return this.dimension("height",t,e)},u.prototype.dimensions=function(t,e){this.width(t,!0),this.height(e)},u.prototype.dimension=function(t,e,n){if(void 0!==e)return null!==e&&e===e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[t],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+ve(t)],10)},u.prototype.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if("function"===typeof p.getComputedStyle){var n=p.getComputedStyle(this.el_);e=n.getPropertyValue(t)||n[t]}if(0===(e=parseFloat(e))){var i="offset"+ve(t);e=this.el_[i]}return e},u.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},u.prototype.currentWidth=function(){return this.currentDimension("width")},u.prototype.currentHeight=function(){return this.currentDimension("height")},u.prototype.focus=function(){this.el_.focus()},u.prototype.blur=function(){this.el_.blur()},u.prototype.emitTapEvents=function(){var e=0,i=null,r=void 0;this.on("touchstart",function(t){1===t.touches.length&&(i={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},e=(new Date).getTime(),r=!0)}),this.on("touchmove",function(t){if(t.touches.length>1)r=!1;else if(i){var e=t.touches[0].pageX-i.pageX,n=t.touches[0].pageY-i.pageY;Math.sqrt(e*e+n*n)>10&&(r=!1)}});var t=function(){r=!1};this.on("touchleave",t),this.on("touchcancel",t),this.on("touchend",function(t){!(i=null)===r&&((new Date).getTime()-e<200&&(t.preventDefault(),this.trigger("tap")))})},u.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=ne(this.player(),this.player().reportUserActivity),n=void 0;this.on("touchstart",function(){e(),this.clearInterval(n),n=this.setInterval(e,250)});var t=function(t){e(),this.clearInterval(n)};this.on("touchmove",e),this.on("touchend",t),this.on("touchcancel",t)}},u.prototype.setTimeout=function(t,e){var n=this;t=ne(this,t);var i=p.setTimeout(t,e),r=function(){return n.clearTimeout(i)};return r.guid="vjs-timeout-"+i,this.on("dispose",r),i},u.prototype.clearTimeout=function(t){p.clearTimeout(t);var e=function(){};return e.guid="vjs-timeout-"+t,this.off("dispose",e),t},u.prototype.setInterval=function(t,e){var n=this;t=ne(this,t);var i=p.setInterval(t,e),r=function(){return n.clearInterval(i)};return r.guid="vjs-interval-"+i,this.on("dispose",r),i},u.prototype.clearInterval=function(t){p.clearInterval(t);var e=function(){};return e.guid="vjs-interval-"+t,this.off("dispose",e),t},u.prototype.requestAnimationFrame=function(t){var e=this;if(this.supportsRaf_){t=ne(this,t);var n=p.requestAnimationFrame(t),i=function(){return e.cancelAnimationFrame(n)};return i.guid="vjs-raf-"+n,this.on("dispose",i),n}return this.setTimeout(t,1e3/60)},u.prototype.cancelAnimationFrame=function(t){if(this.supportsRaf_){p.cancelAnimationFrame(t);var e=function(){};return e.guid="vjs-raf-"+t,this.off("dispose",e),t}return this.clearTimeout(t)},u.registerComponent=function(t,e){if("string"!==typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var n=u.getComponent("Tech"),i=n&&n.isTech(e),r=u===e||u.prototype.isPrototypeOf(e.prototype);if(i||!r){var a=void 0;throw a=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+a+".")}t=ve(t),u.components_||(u.components_={});var o=u.getComponent("Player");if("Player"===t&&o&&o.players){var s=o.players,l=Object.keys(s);if(s&&l.length>0&&l.map(function(t){return s[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return u.components_[t]=e},u.getComponent=function(t){if(t)return t=ve(t),u.components_&&u.components_[t]?u.components_[t]:void 0},u}();function _e(t,e,n,i){return function(t,e,n){if("number"!==typeof e||e<0||e>n)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+n+").")}(t,i,n.length-1),n[i][e]}function be(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:_e.bind(null,"start",0,t),end:_e.bind(null,"end",1,t)}}function we(t,e){return Array.isArray(t)?be(t):void 0===t||void 0===e?be():be([[t,e]])}function Te(t,e){var n=0,i=void 0,r=void 0;if(!e)return 0;t&&t.length||(t=we(0,0));for(var a=0;a<t.length;a++)i=t.start(a),(r=t.end(a))>e&&(r=e),n+=r-i;return n/e}ye.prototype.supportsRaf_="function"===typeof p.requestAnimationFrame&&"function"===typeof p.cancelAnimationFrame,ye.registerComponent("Component",ye);for(var xe={},Ee=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Se=Ee[0],Ae=void 0,Me=0;Me<Ee.length;Me++)if(Ee[Me][1]in f){Ae=Ee[Me];break}if(Ae)for(var Ce=0;Ce<Ae.length;Ce++)xe[Se[Ce]]=Ae[Ce];function ke(t){if(t instanceof ke)return t;"number"===typeof t?this.code=t:"string"===typeof t?this.message=t:W(t)&&("number"===typeof t.code&&(this.code=t.code),G(this,t)),this.message||(this.message=ke.defaultMessages[this.code]||"")}ke.prototype.code=0,ke.prototype.message="",ke.prototype.status=null,ke.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ke.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Oe=0;Oe<ke.errorTypes.length;Oe++)ke[ke.errorTypes[Oe]]=Oe,ke.prototype[ke.errorTypes[Oe]]=Oe;var Le=function(t,e){var n,i=null;try{n=JSON.parse(t,e)}catch(t){i=t}return[i,n]};function Re(t){return void 0!==t&&"function"===typeof t.then}function Pe(t){Re(t)&&t.then(null,function(t){})}var Ie=function(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,e,n){return i[e]&&(t[e]=i[e]),t},{cues:i.cues&&Array.prototype.map.call(i.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},De=function(t){var e=t.$$("track"),n=Array.prototype.map.call(e,function(t){return t.track});return Array.prototype.map.call(e,function(t){var e=Ie(t.track);return t.src&&(e.src=t.src),e}).concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===n.indexOf(t)}).map(Ie))},je=function(t,n){return t.forEach(function(t){var e=n.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return e.addCue(t)})}),n.textTracks()},Ne="vjs-modal-dialog",Ue=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=st("div",{className:Ne+"-content"},{role:"document"}),n.descEl_=st("p",{className:Ne+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),lt(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},r.prototype.buildCSSClass=function(){return Ne+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},r.prototype.handleKeyPress=function(t){27===t.which&&this.closeable()&&this.close()},r.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},r.prototype.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},r.prototype.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",ne(this,this.handleKeyPress)),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.prototype.opened=function(t){return"boolean"===typeof t&&this[t?"open":"close"](),this.opened_},r.prototype.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",ne(this,this.handleKeyPress)),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.prototype.closeable=function(t){if("boolean"===typeof t){var e=this.closeable_=!!t,n=this.getChild("closeButton");if(e&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close)}!e&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},r.prototype.fill=function(){this.fillWith(this.content())},r.prototype.fillWith=function(t){var e=this.contentEl(),n=e.parentNode,i=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(e),this.empty(),Ct(e,t),this.trigger("modalfill"),i?n.insertBefore(e,i):n.appendChild(e);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},r.prototype.empty=function(){this.trigger("beforemodalempty"),St(this.contentEl()),this.trigger("modalempty")},r.prototype.content=function(t){return"undefined"!==typeof t&&(this.content_=t),this.content_},r.prototype.conditionalFocus_=function(){var t=f.activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,(e.contains(t)||e===t)&&(this.previouslyActiveEl_=t,this.focus(),this.on(f,"keydown",this.handleKeyDown))},r.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(f,"keydown",this.handleKeyDown)},r.prototype.handleKeyDown=function(t){if(9===t.which){for(var e=this.focusableEls_(),n=this.el_.querySelector(":focus"),i=void 0,r=0;r<e.length;r++)if(n===e[r]){i=r;break}f.activeElement===this.el_&&(i=0),t.shiftKey&&0===i?(e[e.length-1].focus(),t.preventDefault()):t.shiftKey||i!==e.length-1||(e[0].focus(),t.preventDefault())}},r.prototype.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(t){return(t instanceof p.HTMLAnchorElement||t instanceof p.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof p.HTMLInputElement||t instanceof p.HTMLSelectElement||t instanceof p.HTMLTextAreaElement||t instanceof p.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof p.HTMLIFrameElement||t instanceof p.HTMLObjectElement||t instanceof p.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},r}(ye);Ue.prototype.options_={pauseOnOpen:!0,temporary:!0},ye.registerComponent("ModalDialog",Ue);var Be=function(a){function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;N(this,o);var n=B(this,a.call(this));if(!e&&(e=n,k))for(var i in e=f.createElement("custom"),o.prototype)"constructor"!==i&&(e[i]=o.prototype[i]);e.tracks_=[],Object.defineProperty(e,"length",{get:function(){return this.tracks_.length}});for(var r=0;r<t.length;r++)e.addTrack(t[r]);return B(n,e)}return U(o,a),o.prototype.addTrack=function(t){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack"}))},o.prototype.removeTrack=function(t){for(var e=void 0,n=0,i=this.length;n<i;n++)if(this[n]===t){(e=this[n]).off&&e.off(),this.tracks_.splice(n,1);break}e&&this.trigger({track:e,type:"removetrack"})},o.prototype.getTrackById=function(t){for(var e=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===t){e=r;break}}return e},o}(re);for(var Fe in Be.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Be.prototype.allowedEvents_)Be.prototype["on"+Fe]=null;var Ve=function(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].enabled=!1)},He=function(o){function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];N(this,s);for(var n=void 0,i=e.length-1;i>=0;i--)if(e[i].enabled){Ve(e,e[i]);break}if(k){for(var r in n=f.createElement("custom"),Be.prototype)"constructor"!==r&&(n[r]=Be.prototype[r]);for(var a in s.prototype)"constructor"!==a&&(n[a]=s.prototype[a])}return(n=t=B(this,o.call(this,e,n))).changing_=!1,B(t,n)}return U(s,o),s.prototype.addTrack=function(t){var e=this;t.enabled&&Ve(this,t),o.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){e.changing_||(e.changing_=!0,Ve(e,t),e.changing_=!1,e.trigger("change"))})},s}(Be),ze=function(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].selected=!1)},Ge=function(o){function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];N(this,s);for(var n=void 0,i=e.length-1;i>=0;i--)if(e[i].selected){ze(e,e[i]);break}if(k){for(var r in n=f.createElement("custom"),Be.prototype)"constructor"!==r&&(n[r]=Be.prototype[r]);for(var a in s.prototype)"constructor"!==a&&(n[a]=s.prototype[a])}return(n=t=B(this,o.call(this,e,n))).changing_=!1,Object.defineProperty(n,"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),B(t,n)}return U(s,o),s.prototype.addTrack=function(t){var e=this;t.selected&&ze(this,t),o.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){e.changing_||(e.changing_=!0,ze(e,t),e.changing_=!1,e.trigger("change"))})},s}(Be),We=function(a){function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];N(this,o);var n=void 0;if(k){for(var i in n=f.createElement("custom"),Be.prototype)"constructor"!==i&&(n[i]=Be.prototype[i]);for(var r in o.prototype)"constructor"!==r&&(n[r]=o.prototype[r])}return t=B(this,a.call(this,e,n)),B(n=t,n)}return U(o,a),o.prototype.addTrack=function(t){a.prototype.addTrack.call(this,t),t.addEventListener("modechange",ne(this,function(){this.trigger("change")}));-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",ne(this,function(){this.trigger("selectedlanguagechange")}))},o}(Be),qe=function(){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];N(this,a);var e=this;if(k)for(var n in e=f.createElement("custom"),a.prototype)"constructor"!==n&&(e[n]=a.prototype[n]);e.trackElements_=[],Object.defineProperty(e,"length",{get:function(){return this.trackElements_.length}});for(var i=0,r=t.length;i<r;i++)e.addTrackElement_(t[i]);if(k)return e}return a.prototype.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},a.prototype.getTrackElementByTrack_=function(t){for(var e=void 0,n=0,i=this.trackElements_.length;n<i;n++)if(t===this.trackElements_[n].track){e=this.trackElements_[n];break}return e},a.prototype.removeTrackElement_=function(t){for(var e=0,n=this.trackElements_.length;e<n;e++)if(t===this.trackElements_[e]){this.trackElements_.splice(e,1);break}},a}(),Xe=function(){function i(t){N(this,i);var e=this;if(k)for(var n in e=f.createElement("custom"),i.prototype)"constructor"!==n&&(e[n]=i.prototype[n]);if(i.prototype.setCues_.call(e,t),Object.defineProperty(e,"length",{get:function(){return this.length_}}),k)return e}return i.prototype.setCues_=function(t){var e=this.length||0,n=0,i=t.length;this.cues_=t,this.length_=t.length;var r=function(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})};if(e<i)for(n=e;n<i;n++)r.call(this,n)},i.prototype.getCueById=function(t){for(var e=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===t){e=r;break}}return e},i}(),Ye={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},$e={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ze={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ke={disabled:"disabled",hidden:"hidden",showing:"showing"},Je=function(s){function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(this,l);var e=B(this,s.call(this)),n=e;if(k)for(var i in n=f.createElement("custom"),l.prototype)"constructor"!==i&&(n[i]=l.prototype[i]);var r={id:t.id||"vjs_track_"+It(),kind:t.kind||"",label:t.label||"",language:t.language||""},a=function(t){Object.defineProperty(n,t,{get:function(){return r[t]},set:function(){}})};for(var o in r)a(o);return B(e,n)}return U(l,s),l}(re),Qe=function(t){var e=["protocol","hostname","port","pathname","search","hash","host"],n=f.createElement("a");n.href=t;var i=""===n.host&&"file:"!==n.protocol,r=void 0;i&&((r=f.createElement("div")).innerHTML='<a href="'+t+'"></a>',n=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),f.body.appendChild(r));for(var a={},o=0;o<e.length;o++)a[e[o]]=n[e[o]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=p.location.protocol),i&&f.body.removeChild(r),a},tn=function(t){if("string"===typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(t);if(e)return e.pop().toLowerCase()}return""},en=function(t){var e=p.location,n=Qe(t);return(":"===n.protocol?e.protocol:n.protocol)+n.host!==e.protocol+e.host},nn=(Object.freeze||Object)({parseUrl:Qe,getAbsoluteURL:function(t){if(!t.match(/^https?:\/\//)){var e=f.createElement("div");e.innerHTML='<a href="'+t+'">x</a>',t=e.firstChild.href}return t},getFileExtension:tn,isCrossOrigin:en}),rn=function(t){var e=an.call(t);return"[object Function]"===e||"function"===typeof t&&"[object RegExp]"!==e||"undefined"!==typeof qr&&(t===qr.setTimeout||t===qr.alert||t===qr.confirm||t===qr.prompt)},an=Object.prototype.toString;var on=e(function(t,e){(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}}),sn=function(t,e,n){if(!rn(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this);"[object Array]"===ln.call(t)?function(t,e,n){for(var i=0,r=t.length;i<r;i++)un.call(t,i)&&e.call(n,t[i],i,t)}(t,e,n):"string"===typeof t?function(t,e,n){for(var i=0,r=t.length;i<r;i++)e.call(n,t.charAt(i),i,t)}(t,e,n):function(t,e,n){for(var i in t)un.call(t,i)&&e.call(n,t[i],i,t)}(t,e,n)},ln=Object.prototype.toString,un=Object.prototype.hasOwnProperty;var cn=function(t){if(!t)return{};var a={};return sn(on(t).split("\n"),function(t){var e,n=t.indexOf(":"),i=on(t.slice(0,n)).toLowerCase(),r=on(t.slice(n+1));"undefined"===typeof a[i]?a[i]=r:(e=a[i],"[object Array]"===Object.prototype.toString.call(e)?a[i].push(r):a[i]=[a[i],r])}),a},hn=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)dn.call(n,i)&&(t[i]=n[i])}return t},dn=Object.prototype.hasOwnProperty;var pn=mn;function fn(t,e,n){var i=t;return rn(e)?(n=e,"string"===typeof t&&(i={uri:t})):i=hn(e,{uri:t}),i.callback=n,i}function mn(t,e,n){return vn(e=fn(t,e,n))}function vn(i){if("undefined"===typeof i.callback)throw new Error("callback argument missing");var r=!1,a=function(t,e,n){r||(r=!0,i.callback(t,e,n))};function e(t){return clearTimeout(l),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,a(t,m)}function t(){if(!o){var t;clearTimeout(l),t=i.useXDR&&void 0===s.status?200:1223===s.status?204:s.status;var e=m,n=null;return 0!==t?(e={body:function(){var t=void 0;if(t=s.response?s.response:s.responseText||function(t){if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}(s),f)try{t=JSON.parse(t)}catch(t){}return t}(),statusCode:t,method:c,headers:{},url:u,rawRequest:s},s.getAllResponseHeaders&&(e.headers=cn(s.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),a(n,e,e.body)}}var n,o,s=i.xhr||null;s||(s=i.cors||i.useXDR?new mn.XDomainRequest:new mn.XMLHttpRequest);var l,u=s.url=i.uri||i.url,c=s.method=i.method||"GET",h=i.body||i.data,d=s.headers=i.headers||{},p=!!i.sync,f=!1,m={body:void 0,headers:{},statusCode:0,method:c,url:u,rawRequest:s};if("json"in i&&!1!==i.json&&(f=!0,d.accept||d.Accept||(d.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(d["content-type"]||d["Content-Type"]||(d["Content-Type"]="application/json"),h=JSON.stringify(!0===i.json?h:i.json))),s.onreadystatechange=function(){4===s.readyState&&setTimeout(t,0)},s.onload=t,s.onerror=e,s.onprogress=function(){},s.onabort=function(){o=!0},s.ontimeout=e,s.open(c,u,!p,i.username,i.password),p||(s.withCredentials=!!i.withCredentials),!p&&i.timeout>0&&(l=setTimeout(function(){if(!o){o=!0,s.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",e(t)}},i.timeout)),s.setRequestHeader)for(n in d)d.hasOwnProperty(n)&&s.setRequestHeader(n,d[n]);else if(i.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(s.responseType=i.responseType),"beforeSend"in i&&"function"===typeof i.beforeSend&&i.beforeSend(s),s.send(h||null),s}mn.XMLHttpRequest=p.XMLHttpRequest||function(){},mn.XDomainRequest="withCredentials"in new mn.XMLHttpRequest?mn.XMLHttpRequest:p.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(i){mn["delete"===i?"del":i]=function(t,e,n){return(e=fn(t,e,n)).method=i.toUpperCase(),vn(e)}});var gn=function(t,e){var n=new p.WebVTT.Parser(p,p.vttjs,p.WebVTT.StringDecoder()),i=[];n.oncue=function(t){e.addCue(t)},n.onparsingerror=function(t){i.push(t)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(t),i.length>0&&(p.console&&p.console.groupCollapsed&&p.console.groupCollapsed("Text Track parsing errors for "+e.src),i.forEach(function(t){return K.error(t)}),p.console&&p.console.groupEnd&&p.console.groupEnd()),n.flush()},yn=function(h){function d(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(N(this,d),!e.tech)throw new Error("A tech was not provided.");var n=ge(e,{kind:Ze[e.kind]||"subtitles",language:e.language||e.srclang||""}),i=Ke[n.mode]||"disabled",r=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(i="hidden");var a=t=B(this,h.call(this,n));if(a.tech_=n.tech,k)for(var o in d.prototype)"constructor"!==o&&(a[o]=d.prototype[o]);a.cues_=[],a.activeCues_=[];var s=new Xe(a.cues_),l=new Xe(a.activeCues_),u=!1,c=ne(a,function(){this.activeCues,u&&(this.trigger("cuechange"),u=!1)});return"disabled"!==i&&a.tech_.ready(function(){a.tech_.on("timeupdate",c)},!0),Object.defineProperty(a,"default",{get:function(){return r},set:function(){}}),Object.defineProperty(a,"mode",{get:function(){return i},set:function(t){var e=this;Ke[t]&&("showing"===(i=t)&&this.tech_.ready(function(){e.tech_.on("timeupdate",c)},!0),this.trigger("modechange"))}}),Object.defineProperty(a,"cues",{get:function(){return this.loaded_?s:null},set:function(){}}),Object.defineProperty(a,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return l;for(var t=this.tech_.currentTime(),e=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];r.startTime<=t&&r.endTime>=t?e.push(r):r.startTime===r.endTime&&r.startTime<=t&&r.startTime+.5>=t&&e.push(r)}if(u=!1,e.length!==this.activeCues_.length)u=!0;else for(var a=0;a<e.length;a++)-1===this.activeCues_.indexOf(e[a])&&(u=!0);return this.activeCues_=e,l.setCues_(this.activeCues_),l},set:function(){}}),n.src?(a.src=n.src,function(t,r){var e={uri:t},n=en(t);n&&(e.cors=n),pn(e,ne(this,function(t,e,n){if(t)return K.error(t,e);if(r.loaded_=!0,"function"!==typeof p.WebVTT){if(r.tech_){var i=function(){return gn(n,r)};r.tech_.on("vttjsloaded",i),r.tech_.on("vttjserror",function(){K.error("vttjs failed to load, stopping trying to process "+r.src),r.tech_.off("vttjsloaded",i)})}}else gn(n,r)}))}(n.src,a)):a.loaded_=!0,B(t,a)}return U(d,h),d.prototype.addCue=function(t){var e=t;if(p.vttjs&&!(t instanceof p.vttjs.VTTCue)){for(var n in e=new p.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)n in e||(e[n]=t[n]);e.id=t.id,e.originalCue_=t}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},d.prototype.removeCue=function(t){for(var e=this.cues_.length;e--;){var n=this.cues_[e];if(n===t||n.originalCue_&&n.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},d}(Je);yn.prototype.allowedEvents_={cuechange:"cuechange"};var _n=function(o){function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(this,s);var n=ge(e,{kind:$e[e.kind]||""}),i=t=B(this,o.call(this,n)),r=!1;if(k)for(var a in s.prototype)"constructor"!==a&&(i[a]=s.prototype[a]);return Object.defineProperty(i,"enabled",{get:function(){return r},set:function(t){"boolean"===typeof t&&t!==r&&(r=t,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,B(t,i)}return U(s,o),s}(Je),bn=function(o){function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(this,s);var n=ge(e,{kind:Ye[e.kind]||""}),i=t=B(this,o.call(this,n)),r=!1;if(k)for(var a in s.prototype)"constructor"!==a&&(i[a]=s.prototype[a]);return Object.defineProperty(i,"selected",{get:function(){return r},set:function(t){"boolean"===typeof t&&t!==r&&(r=t,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),B(t,i)}return U(s,o),s}(Je),wn=function(o){function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(this,s);var e=B(this,o.call(this)),n=void 0,i=e;if(k)for(var r in i=f.createElement("custom"),s.prototype)"constructor"!==r&&(i[r]=s.prototype[r]);var a=new yn(t);return i.kind=a.kind,i.src=a.src,i.srclang=a.language,i.label=a.label,i.default=a.default,Object.defineProperty(i,"readyState",{get:function(){return n}}),Object.defineProperty(i,"track",{get:function(){return a}}),n=0,a.addEventListener("loadeddata",function(){n=2,i.trigger({type:"load",target:i})}),k?B(e,i):e}return U(s,o),s}(re);wn.prototype.allowedEvents_={load:"load"},wn.NONE=0,wn.LOADING=1,wn.LOADED=2,wn.ERROR=3;var Tn={audio:{ListClass:He,TrackClass:_n,capitalName:"Audio"},video:{ListClass:Ge,TrackClass:bn,capitalName:"Video"},text:{ListClass:We,TrackClass:yn,capitalName:"Text"}};Object.keys(Tn).forEach(function(t){Tn[t].getterName=t+"Tracks",Tn[t].privateName=t+"Tracks_"});var xn={remoteText:{ListClass:We,TrackClass:yn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:qe,TrackClass:wn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},En=ge(Tn,xn);xn.names=Object.keys(xn),Tn.names=Object.keys(Tn),En.names=[].concat(xn.names).concat(Tn.names);var Sn=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function An(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function Mn(t){function e(t,e,n,i){return 3600*(0|t)+60*(0|e)+(0|n)+(0|i)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function Cn(){this.values=Sn(null)}function kn(t,e,n,i){var r=i?t.split(i):[t];for(var a in r)if("string"===typeof r[a]){var o=r[a].split(n);if(2===o.length)e(o[0],o[1])}}function On(e,t,a){var n,i,o,r=e;function s(){var t=Mn(e);if(null===t)throw new An(An.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function l(){e=e.replace(/^\s+/,"")}if(l(),t.startTime=s(),l(),"--\x3e"!==e.substr(0,3))throw new An(An.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),l(),t.endTime=s(),l(),n=e,i=t,o=new Cn,kn(n,function(t,e){switch(t){case"region":for(var n=a.length-1;n>=0;n--)if(a[n].id===e){o.set(t,a[n].region);break}break;case"vertical":o.alt(t,e,["rl","lr"]);break;case"line":var i=e.split(","),r=i[0];o.integer(t,r),o.percent(t,r)&&o.set("snapToLines",!1),o.alt(t,r,["auto"]),2===i.length&&o.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=e.split(","),o.percent(t,i[0]),2===i.length&&o.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":o.percent(t,e);break;case"align":o.alt(t,e,["start","middle","end","left","right"])}},/:/,/\s/),i.region=o.get("region",null),i.vertical=o.get("vertical",""),i.line=o.get("line","auto"),i.lineAlign=o.get("lineAlign","start"),i.snapToLines=o.get("snapToLines",!0),i.size=o.get("size",100),i.align=o.get("align","middle"),i.position=o.get("position",{start:0,left:0,middle:50,end:100,right:100},i.align),i.positionAlign=o.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},i.align)}((An.prototype=Sn(Error.prototype)).constructor=An).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Cn.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var Ln={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},Rn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Pn={v:"title",lang:"lang"},In={rt:"ruby"};function Dn(a,n){function t(){if(!n)return null;var t,e=n.match(/^([^<]*)(<[^>]+>?)?/);return t=e[1]?e[1]:e[2],n=n.substr(t.length),t}function e(t){return Ln[t]}function i(t){for(;f=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(f[0],e);return t}function r(t,e){var n=Rn[t];if(!n)return null;var i=a.document.createElement(n);i.localName=n;var r=Pn[t];return r&&e&&(i[r]=e.trim()),i}for(var o,s,l,u=a.document.createElement("div"),c=u,h=[];null!==(o=t());)if("<"!==o[0])c.appendChild(a.document.createTextNode(i(o)));else{if("/"===o[1]){h.length&&h[h.length-1]===o.substr(2).replace(">","")&&(h.pop(),c=c.parentNode);continue}var d,p=Mn(o.substr(1,o.length-2));if(p){d=a.document.createProcessingInstruction("timestamp",p),c.appendChild(d);continue}var f=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!f)continue;if(!(d=r(f[1],f[3])))continue;if(s=c,In[(l=d).localName]&&In[l.localName]!==s.localName)continue;f[2]&&(d.className=f[2].substr(1).replace("."," ")),h.push(f[1]),c.appendChild(d),c=d}return u}var jn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Nn(t){for(var e=0;e<jn.length;e++){var n=jn[e];if(t>=n[0]&&t<=n[1])return!0}return!1}function Un(){}function Bn(t,e,n){var i=/MSIE\s8\.0/.test(navigator.userAgent),r="rgba(255, 255, 255, 1)",a="rgba(0, 0, 0, 0.8)";i&&(r="rgb(255, 255, 255)",a="rgb(0, 0, 0)"),Un.call(this),this.cue=e,this.cueDiv=Dn(t,e.text);var o={color:r,backgroundColor:a,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};i||(o.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",o.unicodeBidi="plaintext"),this.applyStyles(o,this.cueDiv),this.div=t.document.createElement("div"),o={textAlign:"middle"===e.align?"center":e.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},i||(o.direction=function(t){var e=[],n="";if(!t||!t.childNodes)return"ltr";function r(t,e){for(var n=e.childNodes.length-1;n>=0;n--)t.push(e.childNodes[n])}function a(t){if(!t||!t.length)return null;var e=t.pop(),n=e.textContent||e.innerText;if(n){var i=n.match(/^.*(\n|\r)/);return i?i[t.length=0]:n}return"ruby"===e.tagName?a(t):e.childNodes?(r(t,e),a(t)):void 0}for(r(e,t);n=a(e);)for(var i=0;i<n.length;i++)if(Nn(n.charCodeAt(i)))return"rtl";return"ltr"}(this.cueDiv),o.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(o),this.div.appendChild(this.cueDiv);var s=0;switch(e.positionAlign){case"start":s=e.position;break;case"middle":s=e.position-e.size/2;break;case"end":s=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function Fn(t){var e,n,i,r,a=/MSIE\s8\.0/.test(navigator.userAgent);if(t.div){n=t.div.offsetHeight,i=t.div.offsetWidth,r=t.div.offsetTop;var o=(o=t.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();t=t.div.getBoundingClientRect(),e=o?Math.max(o[0]&&o[0].height||0,t.height/o.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||n,this.bottom=t.bottom||r+(t.height||n),this.width=t.width||i,this.lineHeight=void 0!==e?e:t.lineHeight,a&&!this.lineHeight&&(this.lineHeight=13)}function Vn(t,e,s,l){var n=new Fn(e),i=e.cue,r=function(t){if("number"===typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,n=e.textTrackList,i=0,r=0;r<n.length&&n[r]!==e;r++)"showing"===n[r].mode&&i++;return-1*++i}(i),a=[];if(i.snapToLines){var o;switch(i.vertical){case"":a=["+y","-y"],o="height";break;case"rl":a=["+x","-x"],o="width";break;case"lr":a=["-x","+x"],o="width"}var u=n.lineHeight,c=u*Math.round(r),h=s[o]+u,d=a[0];Math.abs(c)>h&&(c=c<0?-1:1,c*=Math.ceil(h/u)*u),r<0&&(c+=""===i.vertical?s.height:s.width,a=a.reverse()),n.move(d,c)}else{var p=n.lineHeight/s.height*100;switch(i.lineAlign){case"middle":r-=p/2;break;case"end":r-=p}switch(i.vertical){case"":e.applyStyles({top:e.formatStyle(r,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(r,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(r,"%")})}a=["+y","-x","+x","-y"],n=new Fn(e)}var f=function(t,e){for(var n,i=new Fn(t),r=1,a=0;a<e.length;a++){for(;t.overlapsOppositeAxis(s,e[a])||t.within(s)&&t.overlapsAny(l);)t.move(e[a]);if(t.within(s))return t;var o=t.intersectPercentage(s);r>o&&(n=new Fn(t),r=o),t=new Fn(i)}return n||i}(n,a);e.move(f.toCSSCompatValues(s))}function Hn(){}Un.prototype.applyStyles=function(t,e){for(var n in e=e||this.div,t)t.hasOwnProperty(n)&&(e.style[n]=t[n])},Un.prototype.formatStyle=function(t,e){return 0===t?0:t+e},(Bn.prototype=Sn(Un.prototype)).constructor=Bn,Fn.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},Fn.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},Fn.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},Fn.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},Fn.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},Fn.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},Fn.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},Fn.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,i=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||i,height:t.height||e,bottom:t.bottom||i+(t.height||e),width:t.width||n}},Hn.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!==typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},Hn.convertCueToDOMTree=function(t,e){return t&&e?Dn(t,e):null};Hn.processCues=function(i,r,t){if(!i||!r||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var a=i.document.createElement("div");if(a.style.position="absolute",a.style.left="0",a.style.right="0",a.style.top="0",a.style.bottom="0",a.style.margin="1.5%",t.appendChild(a),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(r)){var o=[],s=Fn.getSimpleBoxPosition(a),l={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var t,e,n=0;n<r.length;n++)e=r[n],t=new Bn(i,e,l),a.appendChild(t.div),Vn(0,t,s,o),e.displayState=t.div,o.push(Fn.getSimpleBoxPosition(t))}()}else for(var e=0;e<r.length;e++)a.appendChild(r[e].displayState)},(Hn.Parser=function(t,e,n){n||(n=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(t){if(!(t instanceof An))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var a=this;function e(){for(var t=a.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,a.buffer=t.substr(e),n}function n(t){t.match(/X-TIMESTAMP-MAP/)?kn(t,function(t,e){switch(t){case"X-TIMESTAMP-MAP":n=e,i=new Cn,kn(n,function(t,e){switch(t){case"MPEGT":i.integer(t+"S",e);break;case"LOCA":i.set(t+"L",Mn(e))}},/[^\d]:/,/,/),a.ontimestampmap&&a.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}var n,i},/=/):kn(t,function(t,e){switch(t){case"Region":!function(t){var r=new Cn;if(kn(t,function(t,e){switch(t){case"id":r.set(t,e);break;case"width":r.percent(t,e);break;case"lines":r.integer(t,e);break;case"regionanchor":case"viewportanchor":var n=e.split(",");if(2!==n.length)break;var i=new Cn;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;r.set(t+"X",i.get("x")),r.set(t+"Y",i.get("y"));break;case"scroll":r.alt(t,e,["up"])}},/=/,/\s/),r.has("id")){var e=new(a.vttjs.VTTRegion||a.window.VTTRegion);e.width=r.get("width",100),e.lines=r.get("lines",3),e.regionAnchorX=r.get("regionanchorX",0),e.regionAnchorY=r.get("regionanchorY",100),e.viewportAnchorX=r.get("viewportanchorX",0),e.viewportAnchorY=r.get("viewportanchorY",100),e.scroll=r.get("scroll",""),a.onregion&&a.onregion(e),a.regionList.push({id:r.get("id"),region:e})}}(e)}},/:/)}t&&(a.buffer+=a.decoder.decode(t,{stream:!0}));try{var i;if("INITIAL"===a.state){if(!/\r\n|\n/.test(a.buffer))return this;var r=(i=e()).match(/^WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new An(An.Errors.BadSignature);a.state="HEADER"}for(var o=!1;a.buffer;){if(!/\r\n|\n/.test(a.buffer))return this;switch(o?o=!1:i=e(),a.state){case"HEADER":/:/.test(i)?n(i):i||(a.state="ID");continue;case"NOTE":i||(a.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){a.state="NOTE";break}if(!i)continue;if(a.cue=new(a.vttjs.VTTCue||a.window.VTTCue)(0,0,""),a.state="CUE",-1===i.indexOf("--\x3e")){a.cue.id=i;continue}case"CUE":try{On(i,a.cue,a.regionList)}catch(t){a.reportOrThrowError(t),a.cue=null,a.state="BADCUE";continue}a.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(o=!0)){a.oncue&&a.oncue(a.cue),a.cue=null,a.state="ID";continue}a.cue.text&&(a.cue.text+="\n"),a.cue.text+=i;continue;case"BADCUE":i||(a.state="ID");continue}}}catch(t){a.reportOrThrowError(t),"CUETEXT"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new An(An.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var zn=Hn,Gn={"":!0,lr:!0,rl:!0},Wn={start:!0,middle:!0,end:!0,left:!0,right:!0};function qn(t){return"string"===typeof t&&(!!Wn[t.toLowerCase()]&&t.toLowerCase())}function Xn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function Yn(t,e,n){var i=this,r=/MSIE\s8\.0/.test(navigator.userAgent),a={};r?i=document.createElement("custom"):a.enumerable=!0,i.hasBeenReset=!1;var o="",s=!1,l=t,u=e,c=n,h=null,d="",p=!0,f="auto",m="start",v=50,g="middle",y=50,_="middle";if(Object.defineProperty(i,"id",Xn({},a,{get:function(){return o},set:function(t){o=""+t}})),Object.defineProperty(i,"pauseOnExit",Xn({},a,{get:function(){return s},set:function(t){s=!!t}})),Object.defineProperty(i,"startTime",Xn({},a,{get:function(){return l},set:function(t){if("number"!==typeof t)throw new TypeError("Start time must be set to a number.");l=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",Xn({},a,{get:function(){return u},set:function(t){if("number"!==typeof t)throw new TypeError("End time must be set to a number.");u=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",Xn({},a,{get:function(){return c},set:function(t){c=""+t,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",Xn({},a,{get:function(){return h},set:function(t){h=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",Xn({},a,{get:function(){return d},set:function(t){var e,n="string"===typeof(e=t)&&!!Gn[e.toLowerCase()]&&e.toLowerCase();if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");d=n,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",Xn({},a,{get:function(){return p},set:function(t){p=!!t,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",Xn({},a,{get:function(){return f},set:function(t){if("number"!==typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",Xn({},a,{get:function(){return m},set:function(t){var e=qn(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",Xn({},a,{get:function(){return v},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",Xn({},a,{get:function(){return g},set:function(t){var e=qn(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",Xn({},a,{get:function(){return y},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",Xn({},a,{get:function(){return _},set:function(t){var e=qn(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");_=e,this.hasBeenReset=!0}})),i.displayState=void 0,r)return i}Yn.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(qr,this.text)};var $n=Yn,Zn={"":!0,up:!0};function Kn(t){return"number"===typeof t&&t>=0&&t<=100}var Jn=function(){var e=100,n=3,i=0,r=100,a=0,o=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Kn(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return n},set:function(t){if("number"!==typeof t)throw new TypeError("Lines must be set to a number.");n=t}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(t){if(!Kn(t))throw new Error("RegionAnchorX must be between 0 and 100.");r=t}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(t){if(!Kn(t))throw new Error("RegionAnchorY must be between 0 and 100.");i=t}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(t){if(!Kn(t))throw new Error("ViewportAnchorY must be between 0 and 100.");o=t}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(t){if(!Kn(t))throw new Error("ViewportAnchorX must be between 0 and 100.");a=t}},scroll:{enumerable:!0,get:function(){return s},set:function(t){var e,n="string"===typeof(e=t)&&!!Zn[e.toLowerCase()]&&e.toLowerCase();if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");s=n}}})},Qn=e(function(t){var e=t.exports={WebVTT:zn,VTTCue:$n,VTTRegion:Jn};p.vttjs=e,p.WebVTT=e.WebVTT;var n=e.VTTCue,i=e.VTTRegion,r=p.VTTCue,a=p.VTTRegion;e.shim=function(){p.VTTCue=n,p.VTTRegion=i},e.restore=function(){p.VTTCue=r,p.VTTRegion=a},p.VTTCue||e.shim()});var ti=function(e){function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};N(this,r),n.reportTouchActivity=!1;var i=B(this,e.call(this,null,n,t));return i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),En.names.forEach(function(t){var e=En[t];n&&n[e.getterName]&&(i[e.privateName]=n[e.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){!1===n["native"+t+"Tracks"]&&(i["featuresNative"+t+"Tracks"]=!1)}),!1===n.nativeCaptions||!1===n.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==n.nativeCaptions&&!0!==n.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new En.text.ListClass,i.initTrackListeners(),n.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}return U(r,e),r.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},r.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},r.prototype.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ne(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),1===(this.bufferedPercent_=t)&&this.stopTrackingProgress()}),500)},r.prototype.onDurationChange=function(t){this.duration_=this.duration()},r.prototype.buffered=function(){return we(0,0)},r.prototype.bufferedPercent=function(){return Te(this.buffered(),this.duration_)},r.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},r.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},r.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.prototype.dispose=function(){this.clearTracks(Tn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},r.prototype.clearTracks=function(t){var r=this;(t=[].concat(t)).forEach(function(t){for(var e=r[t+"Tracks"]()||[],n=e.length;n--;){var i=e[n];"text"===t&&r.removeRemoteTextTrack(i),e.removeTrack(i)}})},r.prototype.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;){var n=t[e];this.removeRemoteTextTrack(n)}},r.prototype.reset=function(){},r.prototype.error=function(t){return void 0!==t&&(this.error_=new ke(t),this.trigger("error")),this.error_},r.prototype.played=function(){return this.hasStarted_?we(0,0):we()},r.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.prototype.initTrackListeners=function(){var r=this;Tn.names.forEach(function(t){var e=Tn[t],n=function(){r.trigger(t+"trackchange")},i=r[e.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),r.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})},r.prototype.addWebVttScript_=function(){var t=this;if(!p.WebVTT)if(f.body.contains(this.el())){if(!this.options_["vtt.js"]&&q(Qn)&&Object.keys(Qn).length>0)return void this.trigger("vttjsloaded");var e=f.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),p.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)},r.prototype.emulateTextTracks=function(){var t=this,n=this.textTracks(),e=this.remoteTextTracks(),i=function(t){return n.addTrack(t.track)},r=function(t){return n.removeTrack(t.track)};e.on("addtrack",i),e.on("removetrack",r),this.addWebVttScript_();var a=function(){return t.trigger("texttrackchange")},o=function(){a();for(var t=0;t<n.length;t++){var e=n[t];e.removeEventListener("cuechange",a),"showing"===e.mode&&e.addEventListener("cuechange",a)}};o(),n.addEventListener("change",o),n.addEventListener("addtrack",o),n.addEventListener("removetrack",o),this.on("dispose",function(){e.off("addtrack",i),e.off("removetrack",r),n.removeEventListener("change",o),n.removeEventListener("addtrack",o),n.removeEventListener("removetrack",o);for(var t=0;t<n.length;t++){n[t].removeEventListener("cuechange",a)}})},r.prototype.addTextTrack=function(t,e,n){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=t.textTracks();r.kind=e,n&&(r.label=n),i&&(r.language=i),r.tech=t;var o=new En.text.TrackClass(r);return a.addTrack(o),o}(this,t,e,n)},r.prototype.createRemoteTextTrack=function(t){var e=ge(t,{tech:this});return new xn.remoteTextEl.TrackClass(e)},r.prototype.addRemoteTextTrack=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i=this.createRemoteTextTrack(e);return!0!==n&&!1!==n&&(K.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),n=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==n&&this.ready(function(){return t.autoRemoteTextTracks_.addTrack(i.track)}),i},r.prototype.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},r.prototype.getVideoPlaybackQuality=function(){return{}},r.prototype.setPoster=function(){},r.prototype.playsinline=function(){},r.prototype.setPlaysinline=function(){},r.prototype.canPlayType=function(){return""},r.canPlayType=function(){return""},r.canPlaySource=function(t,e){return r.canPlayType(t.type)},r.isTech=function(t){return t.prototype instanceof r||t instanceof r||t===r},r.registerTech=function(t,e){if(r.techs_||(r.techs_={}),!r.isTech(e))throw new Error("Tech "+t+" must be a Tech");if(!r.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!r.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=ve(t),r.techs_[t]=e,"Tech"!==t&&r.defaultTechOrder_.push(t),e},r.getTech=function(t){if(t)return t=ve(t),r.techs_&&r.techs_[t]?r.techs_[t]:p&&p.videojs&&p.videojs[t]?(K.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),p.videojs[t]):void 0},r}(ye);En.names.forEach(function(t){var e=En[t];ti.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),ti.prototype.featuresVolumeControl=!0,ti.prototype.featuresFullscreenResize=!1,ti.prototype.featuresPlaybackRate=!1,ti.prototype.featuresProgressEvents=!1,ti.prototype.featuresTimeupdateEvents=!1,ti.prototype.featuresNativeTextTracks=!1,ti.withSourceHandlers=function(r){r.registerSourceHandler=function(t,e){var n=r.sourceHandlers;n||(n=r.sourceHandlers=[]),void 0===e&&(e=n.length),n.splice(e,0,t)},r.canPlayType=function(t){for(var e=r.sourceHandlers||[],n=void 0,i=0;i<e.length;i++)if(n=e[i].canPlayType(t))return n;return""},r.selectSourceHandler=function(t,e){for(var n=r.sourceHandlers||[],i=0;i<n.length;i++)if(n[i].canHandleSource(t,e))return n[i];return null},r.canPlaySource=function(t,e){var n=r.selectSourceHandler(t,e);return n?n.canHandleSource(t,e):""};["seekable","duration"].forEach(function(t){var e=this[t];"function"===typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(t){var e=r.selectSourceHandler(t,this.options_);e||(r.nativeSourceHandler?e=r.nativeSourceHandler:K.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),e!==r.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=e.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},ye.registerComponent("Tech",ti),ti.registerTech("Tech",ti),ti.defaultTechOrder_=[];var ei={};function ni(t,e,n){t.setTimeout(function(){return function n(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=arguments[2];var a=arguments[3];var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];var e=t[0],l=t.slice(1);if("string"===typeof e)n(i,ei[e],r,a,o,s);else if(e){var u=e(a);u.setSource(G({},i),function(t,e){if(t)return n(i,l,r,a,o,s);o.push(u),n(e,i.type===e.type?l:ei[e.type],r,a,o,s)})}else l.length?n(i,l,r,a,o,s):s?r(i,o):n(i,ei["*"],r,a,o,!0)}(e,ei[e.type],n,t)},1)}var ii={buffered:1,currentTime:1,duration:1,seekable:1,played:1},ri={setCurrentTime:1};function ai(n){return function(t,e){return e[n]?e[n](t):t}}var oi=function(u){function c(t,e,n){N(this,c);var i=ge({createEl:!1},e),r=B(this,u.call(this,t,i,n));if(e.playerOptions.sources&&0!==e.playerOptions.sources.length)t.src(e.playerOptions.sources);else for(var a=0,o=e.playerOptions.techOrder;a<o.length;a++){var s=ve(o[a]),l=ti.getTech(s);if(s||(l=ye.getComponent(s)),l&&l.isSupported()){t.loadTech_(s);break}}return r}return U(c,u),c}(ye);ye.registerComponent("MediaLoader",oi);var si=function(r){function i(t,e){N(this,i);var n=B(this,r.call(this,t,e));return n.emitTapEvents(),n.enable(),n}return U(i,r),i.prototype.createEl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=G({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},e),"button"===t&&K.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),n=G({role:"button","aria-live":"polite"},n),this.tabIndex_=e.tabIndex;var i=r.prototype.createEl.call(this,t,e,n);return this.createControlTextEl(i),i},i.prototype.dispose=function(){this.controlTextEl_=null,r.prototype.dispose.call(this)},i.prototype.createControlTextEl=function(t){return this.controlTextEl_=st("span",{className:"vjs-control-text"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},i.prototype.controlText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===t)return this.controlText_||"Need Text";var n=this.localize(t);this.controlText_=t,lt(this.controlTextEl_,n),this.nonIconControl||e.setAttribute("title",n)},i.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},i.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},i.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},i.prototype.handleClick=function(t){},i.prototype.handleFocus=function(t){Wt(f,"keydown",ne(this,this.handleKeyPress))},i.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.trigger("click")):r.prototype.handleKeyPress&&r.prototype.handleKeyPress.call(this,t)},i.prototype.handleBlur=function(t){qt(f,"keydown",ne(this,this.handleKeyPress))},i}(ye);ye.registerComponent("ClickableComponent",si);var li=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.update(),t.on("posterchange",ne(n,n.update)),n}return U(r,i),r.prototype.dispose=function(){this.player().off("posterchange",this.update),i.prototype.dispose.call(this)},r.prototype.createEl=function(){var t=st("div",{className:"vjs-poster",tabIndex:-1});return I||(this.fallbackImg_=st("img"),t.appendChild(this.fallbackImg_)),t},r.prototype.update=function(t){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},r.prototype.setSrc=function(t){if(this.fallbackImg_)this.fallbackImg_.src=t;else{var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e}},r.prototype.handleClick=function(t){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},r}(si);ye.registerComponent("PosterImage",li);var ui="#222",ci={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function hi(t,e){return"rgba("+parseInt(t[1]+t[1],16)+","+parseInt(t[2]+t[2],16)+","+parseInt(t[3]+t[3],16)+","+e+")"}function di(t,e,n){try{t.style[e]=n}catch(t){return}}var pi=function(r){function a(n,t,e){N(this,a);var i=B(this,r.call(this,n,t,e));return n.on("loadstart",ne(i,i.toggleDisplay)),n.on("texttrackchange",ne(i,i.updateDisplay)),n.on("loadstart",ne(i,i.preselectTrack)),n.ready(ne(i,function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",ne(this,this.updateDisplay));for(var t=this.options_.playerOptions.tracks||[],e=0;e<t.length;e++)this.player_.addRemoteTextTrack(t[e],!0);this.preselectTrack()}})),i}return U(a,r),a.prototype.preselectTrack=function(){for(var t={captions:1,subtitles:1},e=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage,i=void 0,r=void 0,a=void 0,o=0;o<e.length;o++){var s=e[o];n&&n.enabled&&n.language===s.language?s.kind===n.kind?a=s:a||(a=s):n&&!n.enabled?r=i=a=null:s.default&&("descriptions"!==s.kind||i?s.kind in t&&!r&&(r=s):i=s)}a?a.mode="showing":r?r.mode="showing":i&&(i.mode="showing")},a.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},a.prototype.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},a.prototype.clearDisplay=function(){"function"===typeof p.WebVTT&&p.WebVTT.processCues(p,[],this.el_)},a.prototype.updateDisplay=function(){var t=this.player_.textTracks();this.clearDisplay();for(var e=null,n=null,i=t.length;i--;){var r=t[i];"showing"===r.mode&&("descriptions"===r.kind?e=r:n=r)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):e&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))},a.prototype.updateForTrack=function(t){if("function"===typeof p.WebVTT&&t.activeCues){for(var e=this.player_.textTrackSettings.getValues(),n=[],i=0;i<t.activeCues.length;i++)n.push(t.activeCues[i]);p.WebVTT.processCues(p,n,this.el_);for(var r=n.length;r--;){var a=n[r];if(a){var o=a.displayState;if(e.color&&(o.firstChild.style.color=e.color),e.textOpacity&&di(o.firstChild,"color",hi(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(o.firstChild.style.backgroundColor=e.backgroundColor),e.backgroundOpacity&&di(o.firstChild,"backgroundColor",hi(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(e.windowOpacity?di(o,"backgroundColor",hi(e.windowColor,e.windowOpacity)):o.style.backgroundColor=e.windowColor),e.edgeStyle&&("dropshadow"===e.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+ui:"raised"===e.edgeStyle?o.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+ui:"depressed"===e.edgeStyle?o.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+ui:"uniform"===e.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+ui)),e.fontPercent&&1!==e.fontPercent){var s=p.parseFloat(o.style.fontSize);o.style.fontSize=s*e.fontPercent+"px",o.style.height="auto",o.style.top="auto",o.style.bottom="2px"}e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=ci[e.fontFamily])}}}},a}(ye);ye.registerComponent("TextTrackDisplay",pi);var fi=function(t){function e(){return N(this,e),B(this,t.apply(this,arguments))}return U(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},e}(ye);ye.registerComponent("LoadingSpinner",fi);var mi=function(e){function t(){return N(this,t),B(this,e.apply(this,arguments))}return U(t,e),t.prototype.createEl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t="button",e=G({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},e),n=G({type:"button","aria-live":"polite"},n);var i=ye.prototype.createEl.call(this,"button",e,n);return this.createControlTextEl(i),i},t.prototype.addChild=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.constructor.name;return K.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),ye.prototype.addChild.call(this,t,e)},t.prototype.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.prototype.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(si);ye.registerComponent("Button",mi);var vi=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-big-play-button"},r.prototype.handleClick=function(t){var e=this.player_.play();if(!(this.mouseused_&&t.clientX&&t.clientY)){var n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(i){var r=function(){return i.focus()};Re(e)?e.then(r,function(){}):this.setTimeout(r,1)}else this.player_.focus()}},r.prototype.handleKeyPress=function(t){this.mouseused_=!1,i.prototype.handleKeyPress.call(this,t)},r.prototype.handleMouseDown=function(t){this.mouseused_=!0},r}(mi);vi.prototype.controlText_="Play Video",ye.registerComponent("BigPlayButton",vi);var gi=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.controlText(e&&e.controlText||n.localize("Close")),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-close-button "+i.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},r}(mi);ye.registerComponent("CloseButton",gi);var yi=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.on(t,"play",n.handlePlay),n.on(t,"pause",n.handlePause),n.on(t,"ended",n.handleEnded),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-play-control "+i.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},r.prototype.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},r.prototype.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},r.prototype.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},r.prototype.handleEnded=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},r}(mi);function _i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;t=t<0?0:t;var n=Math.floor(t%60),i=Math.floor(t/60%60),r=Math.floor(t/3600),a=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(r=i=n="-"),(r=r>0||o>0?r+":":"")+(i=((r||a>=10)&&i<10?"0"+i:i)+":")+(n=n<10?"0"+n:n)}yi.prototype.controlText_="Play",ye.registerComponent("PlayToggle",yi);var bi=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.throttledUpdateContent=ie(ne(n,n.updateContent),25),n.on(t,"timeupdate",n.throttledUpdateContent),n}return U(r,i),r.prototype.createEl=function(t){var e=this.buildCSSClass(),n=i.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control"});return this.contentEl_=st("div",{className:e+"-display"},{"aria-live":"off"},st("span",{className:"vjs-control-text",textContent:this.localize(this.controlText_)})),this.updateTextNode_(),n.appendChild(this.contentEl_),n},r.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,i.prototype.dispose.call(this)},r.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=f.createTextNode(this.formattedTime_||"0:00"),this.contentEl_.appendChild(this.textNode_)}},r.prototype.formatTime_=function(t){return _i(t)},r.prototype.updateFormattedTime_=function(t){var e=this.formatTime_(t);e!==this.formattedTime_&&(this.formattedTime_=e,this.requestAnimationFrame(this.updateTextNode_))},r.prototype.updateContent=function(t){},r}(ye);bi.prototype.controlText_="Time",ye.registerComponent("TimeDisplay",bi);var wi=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.on(t,"ended",n.handleEnded),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-current-time"},r.prototype.updateContent=function(t){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(e)},r.prototype.handleEnded=function(t){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},r}(bi);wi.prototype.controlText_="Current Time",ye.registerComponent("CurrentTimeDisplay",wi);var Ti=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.on(t,"durationchange",n.updateContent),n.on(t,"loadedmetadata",n.throttledUpdateContent),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-duration"},r.prototype.updateContent=function(t){var e=this.player_.duration();e&&this.duration_!==e&&(this.duration_=e,this.updateFormattedTime_(e))},r}(bi);Ti.prototype.controlText_="Duration Time",ye.registerComponent("DurationDisplay",Ti);var xi=function(t){function e(){return N(this,e),B(this,t.apply(this,arguments))}return U(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},e}(ye);ye.registerComponent("TimeDivider",xi);var Ei=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.on(t,"durationchange",n.throttledUpdateContent),n.on(t,"ended",n.handleEnded),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-remaining-time"},r.prototype.formatTime_=function(t){return"-"+i.prototype.formatTime_.call(this,t)},r.prototype.updateContent=function(t){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},r.prototype.handleEnded=function(t){this.player_.duration()&&this.updateFormattedTime_(0)},r}(bi);Ei.prototype.controlText_="Remaining Time",ye.registerComponent("RemainingTimeDisplay",Ei);var Si=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}return U(r,i),r.prototype.createEl=function(){var t=i.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=st("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},r.prototype.dispose=function(){this.contentEl_=null,i.prototype.dispose.call(this)},r.prototype.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},r}(ye);ye.registerComponent("LiveDisplay",Si);var Ai=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}return U(r,i),r.prototype.enabled=function(){return this.enabled_},r.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},r.prototype.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},r.prototype.createEl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.className=e.className+" vjs-slider",e=G({tabIndex:0},e),n=G({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),i.prototype.createEl.call(this,t,e,n)},r.prototype.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;t.preventDefault(),_t(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},r.prototype.handleMouseMove=function(t){},r.prototype.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;bt(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},r.prototype.update=function(){if(this.el_){var t=this.getPercent(),e=this.bar;if(e){("number"!==typeof t||t!==t||t<0||t===1/0)&&(t=0);var n=(100*t).toFixed(2)+"%",i=e.el().style;return this.vertical()?i.height=n:i.width=n,t}}},r.prototype.calculateDistance=function(t){var e=xt(this.el_,t);return this.vertical()?e.y:e.x},r.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},r.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepBack()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepForward())},r.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},r.prototype.handleClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},r.prototype.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},r}(ye);ye.registerComponent("Slider",Ai);var Mi=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.partEls_=[],n.on(t,"progress",n.update),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},r.prototype.dispose=function(){this.partEls_=null,i.prototype.dispose.call(this)},r.prototype.update=function(t){var e=this.player_.buffered(),n=this.player_.duration(),i=this.player_.bufferedEnd(),r=this.partEls_,a=function(t,e){var n=t/e||0;return 100*(n>=1?1:n)+"%"};this.el_.style.width=a(i,n);for(var o=0;o<e.length;o++){var s=e.start(o),l=e.end(o),u=r[o];u||(u=this.el_.appendChild(st()),r[o]=u),u.style.left=a(s,i),u.style.width=a(l-s,i)}for(var c=r.length;c>e.length;c--)this.el_.removeChild(r[c-1]);r.length=e.length},r}(ye);ye.registerComponent("LoadProgressBar",Mi);var Ci=function(t){function e(){return N(this,e),B(this,t.apply(this,arguments))}return U(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},e.prototype.update=function(t,e,n){var i=wt(this.el_),r=wt(this.player_.el()),a=t.width*e;if(r&&i){var o=t.left-r.left+a,s=t.width-a+(r.right-t.right),l=i.width/2;o<l?l+=l-o:s<l&&(l=s),l<0?l=0:l>i.width&&(l=i.width),this.el_.style.right="-"+l+"px",lt(this.el_,n)}},e}(ye);ye.registerComponent("TimeTooltip",Ci);var ki=function(t){function e(){return N(this,e),B(this,t.apply(this,arguments))}return U(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},e.prototype.update=function(n,i){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var t=_i(r.player_.scrubbing()?r.player_.getCache().currentTime:r.player_.currentTime(),r.player_.duration()),e=r.getChild("timeTooltip");e&&e.update(n,i,t)})},e}(ye);ki.prototype.options_={children:[]},O&&!(O>8)||_||w||ki.prototype.options_.children.push("timeTooltip"),ye.registerComponent("PlayProgressBar",ki);var Oi=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.update=ie(ne(n,n.update),25),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.prototype.update=function(n,i){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var t=r.player_.duration(),e=_i(i*t,t);r.el_.style.left=n.width*i+"px",r.getChild("timeTooltip").update(n,i,e)})},r}(ye);Oi.prototype.options_={children:["timeTooltip"]},ye.registerComponent("MouseTimeDisplay",Oi);var Li=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.update=ie(ne(n,n.update),30),n.on(t,"timeupdate",n.update),n.on(t,"ended",n.handleEnded),n.updateInterval=null,n.on(t,["playing"],function(){n.clearInterval(n.updateInterval),n.updateInterval=n.setInterval(function(){n.requestAnimationFrame(function(){n.update()})},30)}),n.on(t,["ended","pause","waiting"],function(){n.clearInterval(n.updateInterval)}),n.on(t,["timeupdate","ended"],n.update),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},r.prototype.update_=function(t,e){var n=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*e).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[_i(t,n),_i(n,n)],"{1} of {2}")),this.bar.update(wt(this.el_),e)},r.prototype.update=function(t){var e=i.prototype.update.call(this);return this.update_(this.getCurrentTime_(),e),e},r.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},r.prototype.handleEnded=function(t){this.update_(this.player_.duration(),1)},r.prototype.getPercent=function(){var t=this.getCurrentTime_()/this.player_.duration();return t>=1?1:t},r.prototype.handleMouseDown=function(t){kt(t)&&(this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),i.prototype.handleMouseDown.call(this,t))},r.prototype.handleMouseMove=function(t){if(kt(t)){var e=this.calculateDistance(t)*this.player_.duration();e===this.player_.duration()&&(e-=.1),this.player_.currentTime(e)}},r.prototype.enable=function(){i.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},r.prototype.disable=function(){i.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},r.prototype.handleMouseUp=function(t){i.prototype.handleMouseUp.call(this,t),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&this.player_.play()},r.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},r.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},r.prototype.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},r.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleAction(t)):i.prototype.handleKeyPress&&i.prototype.handleKeyPress.call(this,t)},r}(Ai);Li.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},O&&!(O>8)||_||w||Li.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Li.prototype.playerEvent="timeupdate",ye.registerComponent("SeekBar",Li);var Ri=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.handleMouseMove=ie(ne(n,n.handleMouseMove),25),n.throttledHandleMouseSeek=ie(ne(n,n.handleMouseSeek),25),n.enable(),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},r.prototype.handleMouseMove=function(t){var e=this.getChild("seekBar"),n=e.getChild("mouseTimeDisplay"),i=e.el(),r=wt(i),a=xt(i,t).x;a>1?a=1:a<0&&(a=0),n&&n.update(r,a)},r.prototype.handleMouseSeek=function(t){this.getChild("seekBar").handleMouseMove(t)},r.prototype.enabled=function(){return this.enabled_},r.prototype.disable=function(){this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},r.prototype.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},r.prototype.handleMouseDown=function(t){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},r.prototype.handleMouseUp=function(t){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},r}(ye);Ri.prototype.options_={children:["seekBar"]},ye.registerComponent("ProgressControl",Ri);var Pi=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.on(t,"fullscreenchange",n.handleFullscreenChange),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+i.prototype.buildCSSClass.call(this)},r.prototype.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.prototype.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},r}(mi);Pi.prototype.controlText_="Fullscreen",ye.registerComponent("FullscreenToggle",Pi);var Ii=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})},Di=function(t){function e(){return N(this,e),B(this,t.apply(this,arguments))}return U(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(ye);ye.registerComponent("VolumeLevel",Di);var ji=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.on("slideractive",n.updateLastVolume_),n.on(t,"volumechange",n.updateARIAAttributes),t.ready(function(){return n.updateARIAAttributes()}),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},r.prototype.handleMouseDown=function(t){kt(t)&&i.prototype.handleMouseDown.call(this,t)},r.prototype.handleMouseMove=function(t){kt(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},r.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},r.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},r.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},r.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},r.prototype.updateARIAAttributes=function(t){var e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},r.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},r.prototype.updateLastVolume_=function(){var t=this,e=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(e)})},r}(Ai);ji.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},ji.prototype.playerEvent="volumechange",ye.registerComponent("VolumeBar",ji);var Ni=function(i){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(this,r),e.vertical=e.vertical||!1,("undefined"===typeof e.volumeBar||q(e.volumeBar))&&(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical);var n=B(this,i.call(this,t,e));return Ii(n,t),n.throttledHandleMouseMove=ie(ne(n,n.handleMouseMove),25),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}return U(r,i),r.prototype.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},r.prototype.handleMouseDown=function(t){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},r.prototype.handleMouseUp=function(t){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},r.prototype.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},r}(ye);Ni.prototype.options_={children:["volumeBar"]},ye.registerComponent("VolumeControl",Ni);var Ui=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return Ii(n,t),n.on(t,["loadstart","volumechange"],n.update),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-mute-control "+i.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(t){var e=this.player_.volume(),n=this.player_.lastVolume_();if(0===e){var i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},r.prototype.update=function(t){this.updateIcon_(),this.updateControlText_()},r.prototype.updateIcon_=function(){var t=this.player_.volume(),e=3;0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);for(var n=0;n<4;n++)dt(this.el_,"vjs-vol-"+n);ht(this.el_,"vjs-vol-"+e)},r.prototype.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},r}(mi);Ui.prototype.controlText_="Mute",ye.registerComponent("MuteToggle",Ui);var Bi=function(i){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(this,r),"undefined"!==typeof e.inline?e.inline=e.inline:e.inline=!0,("undefined"===typeof e.volumeControl||q(e.volumeControl))&&(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline);var n=B(this,i.call(this,t,e));return Ii(n,t),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.muteToggle,"focus",n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n.on(n.muteToggle,"blur",n.sliderInactive_),n}return U(r,i),r.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},r.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},r.prototype.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},r}(ye);Bi.prototype.options_={children:["muteToggle","volumeControl"]},ye.registerComponent("VolumePanel",Bi);var Fi=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return e&&(n.menuButton_=e.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyPress),n}return U(r,i),r.prototype.addItem=function(e){this.addChild(e),e.on("click",ne(this,function(t){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())}))},r.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=st(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var e=i.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return e.appendChild(this.contentEl_),Wt(e,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),e},r.prototype.dispose=function(){this.contentEl_=null,i.prototype.dispose.call(this)},r.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepForward()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepBack())},r.prototype.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},r.prototype.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},r.prototype.focus=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.children().slice();e.length&&e[0].className&&/vjs-menu-title/.test(e[0].className)&&e.shift(),e.length>0&&(t<0?t=0:t>=e.length&&(t=e.length-1),e[this.focusedChild_=t].el_.focus())},r}(ye);ye.registerComponent("Menu",Fi);var Vi=function(r){function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(this,a);var n=B(this,r.call(this,t,e));n.menuButton_=new mi(t,e),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var i=mi.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+i,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"focus",n.handleFocus),n.on(n.menuButton_,"blur",n.handleBlur),n.on("keydown",n.handleSubmenuKeyPress),n}return U(a,r),a.prototype.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},a.prototype.createMenu=function(){var t=new Fi(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=st("li",{className:"vjs-menu-title",innerHTML:ve(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,t.children_.unshift(e),ut(e,t.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)t.addItem(this.items[n]);return t},a.prototype.createItems=function(){},a.prototype.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},a.prototype.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+mi.prototype.buildCSSClass()+" "+r.prototype.buildCSSClass.call(this)},a.prototype.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+r.prototype.buildCSSClass.call(this)},a.prototype.controlText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(t,e)},a.prototype.handleClick=function(t){this.one(this.menu.contentEl(),"mouseleave",ne(this,function(t){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},a.prototype.focus=function(){this.menuButton_.focus()},a.prototype.blur=function(){this.menuButton_.blur()},a.prototype.handleFocus=function(){Wt(f,"keydown",ne(this,this.handleKeyPress))},a.prototype.handleBlur=function(){qt(f,"keydown",ne(this,this.handleKeyPress))},a.prototype.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus())):38!==t.which&&40!==t.which||this.buttonPressed_||(this.pressButton(),t.preventDefault())},a.prototype.handleSubmenuKeyPress=function(t){27!==t.which&&9!==t.which||(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus()))},a.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),_&&at())return;this.menu.focus()}},a.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},a.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},a.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},a}(ye);ye.registerComponent("MenuButton",Vi);var Hi=function(a){function o(t,e){N(this,o);var n=e.tracks,i=B(this,a.call(this,t,e));if(i.items.length<=1&&i.hide(),!n)return B(i);var r=ne(i,i.update);return n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),i.player_.on("ready",r),i.player_.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)}),i}return U(o,a),o}(Vi);ye.registerComponent("TrackButton",Hi);var zi=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.selectable=e.selectable,n.selected(e.selected),n.selectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitem"),n}return U(r,i),r.prototype.createEl=function(t,e,n){return this.nonIconControl=!0,i.prototype.createEl.call(this,"li",G({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},e),n)},r.prototype.handleClick=function(t){this.selected(!0)},r.prototype.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText("")))},r}(si);ye.registerComponent("MenuItem",zi);var Gi=function(l){function u(t,e){N(this,u);var n=e.track,i=t.textTracks();e.label=n.label||n.language||"Unknown",e.selected="showing"===n.mode;var r=B(this,l.call(this,t,e));r.track=n;var a=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];r.handleTracksChange.apply(r,e)},o=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];r.handleSelectedLanguageChange.apply(r,e)};if(t.on(["loadstart","texttrackchange"],a),i.addEventListener("change",a),i.addEventListener("selectedlanguagechange",o),r.on("dispose",function(){t.off(["loadstart","texttrackchange"],a),i.removeEventListener("change",a),i.removeEventListener("selectedlanguagechange",o)}),void 0===i.onchange){var s=void 0;r.on(["tap","click"],function(){if("object"!==j(p.Event))try{s=new p.Event("change")}catch(t){}s||(s=f.createEvent("Event")).initEvent("change",!0,!0),i.dispatchEvent(s)})}return r.handleTracksChange(),r}return U(u,l),u.prototype.handleClick=function(t){var e=this.track.kind,n=this.track.kinds,i=this.player_.textTracks();if(n||(n=[e]),l.prototype.handleClick.call(this,t),i)for(var r=0;r<i.length;r++){var a=i[r];a===this.track&&n.indexOf(a.kind)>-1?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled")}},u.prototype.handleTracksChange=function(t){this.selected("showing"===this.track.mode)},u.prototype.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},u.prototype.dispose=function(){this.track=null,l.prototype.dispose.call(this)},u}(zi);ye.registerComponent("TextTrackMenuItem",Gi);var Wi=function(n){function i(t,e){return N(this,i),e.track={player:t,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.label?e.track.label=e.label:e.track.label=e.kinds.join(" and ")+" off",e.selectable=!0,B(this,n.call(this,t,e))}return U(i,n),i.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),n=!0,i=0,r=e.length;i<r;i++){var a=e[i];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}this.selected(n)},i.prototype.handleSelectedLanguageChange=function(t){for(var e=this.player().textTracks(),n=!0,i=0,r=e.length;i<r;i++){var a=e[i];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},i}(Gi);ye.registerComponent("OffTextTrackMenuItem",Wi);var qi=function(n){function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N(this,i),e.tracks=t.textTracks(),B(this,n.call(this,t,e))}return U(i,n),i.prototype.createItems=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gi,n=void 0;this.label_&&(n=this.label_+" off"),t.push(new Wi(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a=i[r];if(this.kinds_.indexOf(a.kind)>-1){var o=new e(this.player_,{track:a,selectable:!0});o.addClass("vjs-"+a.kind+"-menu-item"),t.push(o)}}return t},i}(Hi);ye.registerComponent("TextTrackButton",qi);var Xi=function(o){function s(t,e){N(this,s);var n=e.track,i=e.cue,r=t.currentTime();e.selectable=!0,e.label=i.text,e.selected=i.startTime<=r&&r<i.endTime;var a=B(this,o.call(this,t,e));return a.track=n,a.cue=i,n.addEventListener("cuechange",ne(a,a.update)),a}return U(s,o),s.prototype.handleClick=function(t){o.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},s.prototype.update=function(t){var e=this.cue,n=this.player_.currentTime();this.selected(e.startTime<=n&&n<e.endTime)},s}(zi);ye.registerComponent("ChaptersTrackMenuItem",Xi);var Yi=function(i){function r(t,e,n){return N(this,r),B(this,i.call(this,t,e,n))}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildWrapperCSSClass.call(this)},r.prototype.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),i.prototype.update.call(this)},r.prototype.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},r.prototype.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;e>=0;e--){var n=t[e];if(n.kind===this.kind_)return n}},r.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ve(this.kind_))},r.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),i.prototype.createMenu.call(this)},r.prototype.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var n=0,i=e.length;n<i;n++){var r=e[n],a=new Xi(this.player_,{track:this.track_,cue:r});t.push(a)}return t},r}(qi);Yi.prototype.kind_="chapters",Yi.prototype.controlText_="Chapters",ye.registerComponent("ChaptersButton",Yi);var $i=function(o){function s(t,e,n){N(this,s);var i=B(this,o.call(this,t,e,n)),r=t.textTracks(),a=ne(i,i.handleTracksChange);return r.addEventListener("change",a),i.on("dispose",function(){r.removeEventListener("change",a)}),i}return U(s,o),s.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),n=!1,i=0,r=e.length;i<r;i++){var a=e[i];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},s.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+o.prototype.buildCSSClass.call(this)},s.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+o.prototype.buildWrapperCSSClass.call(this)},s}(qi);$i.prototype.kind_="descriptions",$i.prototype.controlText_="Descriptions",ye.registerComponent("DescriptionsButton",$i);var Zi=function(i){function r(t,e,n){return N(this,r),B(this,i.call(this,t,e,n))}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildWrapperCSSClass.call(this)},r}(qi);Zi.prototype.kind_="subtitles",Zi.prototype.controlText_="Subtitles",ye.registerComponent("SubtitlesButton",Zi);var Ki=function(i){function r(t,e){N(this,r),e.track={player:t,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem";var n=B(this,i.call(this,t,e));return n.addClass("vjs-texttrack-settings"),n.controlText(", opens "+e.kind+" settings dialog"),n}return U(r,i),r.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},r}(Gi);ye.registerComponent("CaptionSettingsMenuItem",Ki);var Ji=function(i){function r(t,e,n){return N(this,r),B(this,i.call(this,t,e,n))}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-captions-button "+i.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+i.prototype.buildWrapperCSSClass.call(this)},r.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||(t.push(new Ki(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,t)},r}(qi);Ji.prototype.kind_="captions",Ji.prototype.controlText_="Captions",ye.registerComponent("CaptionsButton",Ji);var Qi=function(r){function t(){return N(this,t),B(this,r.apply(this,arguments))}return U(t,r),t.prototype.createEl=function(t,e,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),i+="</span>",r.prototype.createEl.call(this,t,G({innerHTML:i},e),n)},t}(Gi);ye.registerComponent("SubsCapsMenuItem",Qi);var tr=function(i){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(this,r);var n=B(this,i.call(this,t,e));return n.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(ve(n.label_)),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildWrapperCSSClass.call(this)},r.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||(t.push(new Ki(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=i.prototype.createItems.call(this,t,Qi)},r}(qi);tr.prototype.kinds_=["captions","subtitles"],tr.prototype.controlText_="Subtitles",ye.registerComponent("SubsCapsButton",tr);var er=function(o){function s(t,e){N(this,s);var n=e.track,i=t.audioTracks();e.label=n.label||n.language||"Unknown",e.selected=n.enabled;var r=B(this,o.call(this,t,e));r.track=n;var a=ne(r,r.handleTracksChange);return i.addEventListener("change",a),r.on("dispose",function(){i.removeEventListener("change",a)}),r}return U(s,o),s.prototype.handleClick=function(t){var e=this.player_.audioTracks();o.prototype.handleClick.call(this,t);for(var n=0;n<e.length;n++){var i=e[n];i.enabled=i===this.track}},s.prototype.handleTracksChange=function(t){this.selected(this.track.enabled)},s}(zi);ye.registerComponent("AudioTrackMenuItem",er);var nr=function(n){function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N(this,i),e.tracks=t.audioTracks(),B(this,n.call(this,t,e))}return U(i,n),i.prototype.buildCSSClass=function(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},i.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},i.prototype.createItems=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var e=this.player_.audioTracks(),n=0;n<e.length;n++){var i=e[n];t.push(new er(this.player_,{track:i,selectable:!0}))}return t},i}(Hi);nr.prototype.controlText_="Audio Track",ye.registerComponent("AudioTrackButton",nr);var ir=function(a){function o(t,e){N(this,o);var n=e.rate,i=parseFloat(n,10);e.label=n,e.selected=1===i,e.selectable=!0;var r=B(this,a.call(this,t,e));return r.label=n,r.rate=i,r.on(t,"ratechange",r.update),r}return U(o,a),o.prototype.handleClick=function(t){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},o.prototype.update=function(t){this.selected(this.player().playbackRate()===this.rate)},o}(zi);ir.prototype.contentElType="button",ye.registerComponent("PlaybackRateMenuItem",ir);var rr=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.updateVisibility(),n.updateLabel(),n.on(t,"loadstart",n.updateVisibility),n.on(t,"ratechange",n.updateLabel),n}return U(r,i),r.prototype.createEl=function(){var t=i.prototype.createEl.call(this);return this.labelEl_=st("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},r.prototype.dispose=function(){this.labelEl_=null,i.prototype.dispose.call(this)},r.prototype.buildCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildWrapperCSSClass.call(this)},r.prototype.createMenu=function(){var t=new Fi(this.player()),e=this.playbackRates();if(e)for(var n=e.length-1;n>=0;n--)t.addChild(new ir(this.player(),{rate:e[n]+"x"}));return t},r.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},r.prototype.handleClick=function(t){for(var e=this.player().playbackRate(),n=this.playbackRates(),i=n[0],r=0;r<n.length;r++)if(n[r]>e){i=n[r];break}this.player().playbackRate(i)},r.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},r.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},r.prototype.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},r.prototype.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},r}(Vi);rr.prototype.controlText_="Playback Rate",ye.registerComponent("PlaybackRateMenuButton",rr);var ar=function(t){function e(){return N(this,e),B(this,t.apply(this,arguments))}return U(e,t),e.prototype.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(ye);ye.registerComponent("Spacer",ar);var or=function(e){function t(){return N(this,t),B(this,e.apply(this,arguments))}return U(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="&nbsp;",t},t}(ar);ye.registerComponent("CustomControlSpacer",or);var sr=function(t){function e(){return N(this,e),B(this,t.apply(this,arguments))}return U(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},e}(ye);sr.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},ye.registerComponent("ControlBar",sr);var lr=function(i){function r(t,e){N(this,r);var n=B(this,i.call(this,t,e));return n.on(t,"error",n.open),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-error-display "+i.prototype.buildCSSClass.call(this)},r.prototype.content=function(){var t=this.player().error();return t?this.localize(t.message):""},r}(Ue);lr.prototype.options_=ge(Ue.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),ye.registerComponent("ErrorDisplay",lr);var ur="vjs-text-track-settings",cr=["#000","Black"],hr=["#00F","Blue"],dr=["#0FF","Cyan"],pr=["#0F0","Green"],fr=["#F0F","Magenta"],mr=["#F00","Red"],vr=["#FFF","White"],gr=["#FF0","Yellow"],yr=["1","Opaque"],_r=["0.5","Semi-Transparent"],br=["0","Transparent"],wr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[cr,vr,mr,pr,hr,gr,fr,dr]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[yr,_r,br]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[vr,cr,mr,pr,hr,gr,fr,dr]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[yr,_r]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[br,_r,yr]}};function Tr(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}wr.windowColor.options=wr.backgroundColor.options;var xr=function(i){function r(t,e){N(this,r),e.temporary=!1;var n=B(this,i.call(this,t,e));return n.updateDisplay=ne(n,n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=st("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===e.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),z(wr,function(t){n.on(n.$(t.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}return U(r,i),r.prototype.dispose=function(){this.endDialog=null,i.prototype.dispose.call(this)},r.prototype.createElSelect_=function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",r=wr[t],a=r.id.replace("%s",this.id_);return["<"+e+' id="'+a+'" class="'+("label"===e?"vjs-label":"")+'">',this.localize(r.label),"</"+e+">",'<select aria-labelledby="'+(""!==i?i+" ":"")+a+'">'].concat(r.options.map(function(t){var e=a+"-"+t[1];return['<option id="'+e+'" value="'+t[0]+'" ','aria-labelledby="'+(""!==i?i+" ":"")+a+" "+e+'">',n.localize(t[1]),"</option>"].join("")})).concat("</select>").join("")},r.prototype.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},r.prototype.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},r.prototype.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},r.prototype.createElColors_=function(){return st("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},r.prototype.createElFont_=function(){return st("div",{className:'vjs-track-settings-font">',innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},r.prototype.createElControls_=function(){var t=this.localize("restore all settings to the default values");return st("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},r.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},r.prototype.label=function(){return this.localize("Caption Settings Dialog")},r.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},r.prototype.buildCSSClass=function(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},r.prototype.getValues=function(){var o=this;return function(n,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return H(n).reduce(function(t,e){return i(t,n[e],e)},t)}(wr,function(t,e,n){var i,r,a=(i=o.$(e.selector),r=e.parser,Tr(i.options[i.options.selectedIndex].value,r));return void 0!==a&&(t[n]=a),t},{})},r.prototype.setValues=function(n){var i=this;z(wr,function(t,e){!function(t,e,n){if(e)for(var i=0;i<t.options.length;i++)if(Tr(t.options[i].value,n)===e){t.selectedIndex=i;break}}(i.$(t.selector),n[e],t.parser)})},r.prototype.setDefaults=function(){var n=this;z(wr,function(t){var e=t.hasOwnProperty("default")?t.default:0;n.$(t.selector).selectedIndex=e})},r.prototype.restoreSettings=function(){var t=void 0;try{t=JSON.parse(p.localStorage.getItem(ur))}catch(t){K.warn(t)}t&&this.setValues(t)},r.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?p.localStorage.setItem(ur,JSON.stringify(t)):p.localStorage.removeItem(ur)}catch(t){K.warn(t)}}},r.prototype.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},r.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(f,"keydown",this.handleKeyDown);var t=this.player_.controlBar,e=t&&t.subsCapsButton,n=t&&t.captionsButton;e?e.focus():n&&n.focus()},r}(Ue);ye.registerComponent("TextTrackSettings",xr);var Er=F(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),Sr=function(c){function h(t,e){N(this,h);var n=B(this,c.call(this,t,e)),i=t.source,r=!1;if(i&&(n.el_.currentSrc!==i.src||t.tag&&3===t.tag.initNetworkState_)?n.setSource(i):n.handleLateInit_(n.el_),n.el_.hasChildNodes()){for(var a=n.el_.childNodes,o=a.length,s=[];o--;){var l=a[o];"track"===l.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(l),n.remoteTextTracks().addTrack(l.track),n.textTracks().addTrack(l.track),r||n.el_.hasAttribute("crossorigin")||!en(l.src)||(r=!0)):s.push(l))}for(var u=0;u<s.length;u++)n.el_.removeChild(s[u])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&r&&K.warn(J(Er)),n.restoreMetadataTracksInIOSNativePlayer_(),(P||g||E)&&!0===t.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}return U(h,c),h.prototype.dispose=function(){h.disposeMediaElement(this.el_),this.options_=null,c.prototype.dispose.call(this)},h.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var i=this.textTracks(),r=void 0,t=function(){r=[];for(var t=0;t<i.length;t++){var e=i[t];"metadata"===e.kind&&r.push({track:e,storedMode:e.mode})}};t(),i.addEventListener("change",t),this.on("dispose",function(){return i.removeEventListener("change",t)});var e=function t(){for(var e=0;e<r.length;e++){var n=r[e];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}i.removeEventListener("change",t)};this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",t),i.removeEventListener("change",e),i.addEventListener("change",e)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",t),i.addEventListener("change",t),i.removeEventListener("change",e)})},h.prototype.proxyNativeTracks_=function(){var o=this;Tn.names.forEach(function(t){var e=Tn[t],r=o.el()[e.getterName],a=o[e.getterName]();if(o["featuresNative"+e.capitalName+"Tracks"]&&r&&r.addEventListener){var i={change:function(t){a.trigger({type:"change",target:a,currentTarget:a,srcElement:a})},addtrack:function(t){a.addTrack(t.track)},removetrack:function(t){a.removeTrack(t.track)}},n=function(){for(var t=[],e=0;e<a.length;e++){for(var n=!1,i=0;i<r.length;i++)if(r[i]===a[e]){n=!0;break}n||t.push(a[e])}for(;t.length;)a.removeTrack(t.shift())};Object.keys(i).forEach(function(e){var n=i[e];r.addEventListener(e,n),o.on("dispose",function(t){return r.removeEventListener(e,n)})}),o.on("loadstart",n),o.on("dispose",function(t){return o.off("loadstart",n)})}})},h.prototype.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var e=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(e,t),h.disposeMediaElement(t),t=e}else{t=f.createElement("video");var n=ge({},this.options_.tag&&mt(this.options_.tag));P&&!0===this.options_.nativeControlsForTouch||delete n.controls,ft(t,G(n,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&gt(t,"preload",this.options_.preload);for(var i=["loop","muted","playsinline","autoplay"],r=0;r<i.length;r++){var a=i[r],o=this.options_[a];"undefined"!==typeof o&&(o?gt(t,a,a):yt(t,a),t[a]=o)}return t},h.prototype.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var e=!1,n=function(){e=!0};this.on("loadstart",n);var i=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",i),e||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),t.readyState>=2&&r.push("loadeddata"),t.readyState>=3&&r.push("canplay"),t.readyState>=4&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(t){this.trigger(t)},this)})}},h.prototype.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(t){K(t,"Video is not ready. (Video.js)")}},h.prototype.duration=function(){var e=this;if(this.el_.duration===1/0&&w&&M&&0===this.el_.currentTime){return this.on("timeupdate",function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN}return this.el_.duration||NaN},h.prototype.width=function(){return this.el_.offsetWidth},h.prototype.height=function(){return this.el_.offsetHeight},h.prototype.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){t.off("webkitbeginfullscreen",n),t.off("webkitendfullscreen",e)})}},h.prototype.supportsFullScreen=function(){if("function"===typeof this.el_.webkitEnterFullScreen){var t=p.navigator&&p.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},h.prototype.enterFullScreen=function(){var t=this.el_;t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},h.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},h.prototype.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},h.prototype.reset=function(){h.resetMediaElement(this.el_)},h.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},h.prototype.setControls=function(t){this.el_.controls=!!t},h.prototype.addTextTrack=function(t,e,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,e,n):c.prototype.addTextTrack.call(this,t,e,n)},h.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return c.prototype.createRemoteTextTrack.call(this,t);var e=f.createElement("track");return t.kind&&(e.kind=t.kind),t.label&&(e.label=t.label),(t.language||t.srclang)&&(e.srclang=t.language||t.srclang),t.default&&(e.default=t.default),t.id&&(e.id=t.id),t.src&&(e.src=t.src),e},h.prototype.addRemoteTextTrack=function(t,e){var n=c.prototype.addRemoteTextTrack.call(this,t,e);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},h.prototype.removeRemoteTextTrack=function(t){if(c.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var e=this.$$("track"),n=e.length;n--;)t!==e[n]&&t!==e[n].track||this.el().removeChild(e[n])},h.prototype.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),p.performance&&"function"===typeof p.performance.now?t.creationTime=p.performance.now():p.performance&&p.performance.timing&&"number"===typeof p.performance.timing.navigationStart&&(t.creationTime=p.Date.now()-p.performance.timing.navigationStart),t},h}(ti);if(it()){Sr.TEST_VID=f.createElement("video");var Ar=f.createElement("track");Ar.kind="captions",Ar.srclang="en",Ar.label="English",Sr.TEST_VID.appendChild(Ar)}Sr.isSupported=function(){try{Sr.TEST_VID.volume=.5}catch(t){return!1}return!(!Sr.TEST_VID||!Sr.TEST_VID.canPlayType)},Sr.canPlayType=function(t){return Sr.TEST_VID.canPlayType(t)},Sr.canPlaySource=function(t,e){return Sr.canPlayType(t.type)},Sr.canControlVolume=function(){try{var t=Sr.TEST_VID.volume;return Sr.TEST_VID.volume=t/2+.1,t!==Sr.TEST_VID.volume}catch(t){return!1}},Sr.canControlPlaybackRate=function(){if(w&&M&&C<58)return!1;try{var t=Sr.TEST_VID.playbackRate;return Sr.TEST_VID.playbackRate=t/2+.1,t!==Sr.TEST_VID.playbackRate}catch(t){return!1}},Sr.supportsNativeTextTracks=function(){return R},Sr.supportsNativeVideoTracks=function(){return!(!Sr.TEST_VID||!Sr.TEST_VID.videoTracks)},Sr.supportsNativeAudioTracks=function(){return!(!Sr.TEST_VID||!Sr.TEST_VID.audioTracks)},Sr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Sr.prototype.featuresVolumeControl=Sr.canControlVolume(),Sr.prototype.featuresPlaybackRate=Sr.canControlPlaybackRate(),Sr.prototype.movingMediaElementInDOM=!_,Sr.prototype.featuresFullscreenResize=!0,Sr.prototype.featuresProgressEvents=!0,Sr.prototype.featuresTimeupdateEvents=!0,Sr.prototype.featuresNativeTextTracks=Sr.supportsNativeTextTracks(),Sr.prototype.featuresNativeVideoTracks=Sr.supportsNativeVideoTracks(),Sr.prototype.featuresNativeAudioTracks=Sr.supportsNativeAudioTracks();var Mr=Sr.TEST_VID&&Sr.TEST_VID.constructor.prototype.canPlayType,Cr=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,kr=/^video\/mp4/i;Sr.patchCanPlayType=function(){T>=4&&!S?Sr.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&Cr.test(t)?"maybe":Mr.call(this,t)}:x&&(Sr.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&kr.test(t)?"maybe":Mr.call(this,t)})},Sr.unpatchCanPlayType=function(){var t=Sr.TEST_VID.constructor.prototype.canPlayType;return Sr.TEST_VID.constructor.prototype.canPlayType=Mr,t},Sr.patchCanPlayType(),Sr.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"===typeof t.load&&function(){try{t.load()}catch(t){}}()}},Sr.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),n=e.length;n--;)t.removeChild(e[n]);t.removeAttribute("src"),"function"===typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Sr.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){Sr.prototype["set"+ve(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(t){Sr.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(e){Sr.prototype["set"+ve(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(t){Sr.prototype[t]=function(){return this.el_[t]()}}),ti.withSourceHandlers(Sr),Sr.nativeSourceHandler={},Sr.nativeSourceHandler.canPlayType=function(t){try{return Sr.TEST_VID.canPlayType(t)}catch(t){return""}},Sr.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Sr.nativeSourceHandler.canPlayType(t.type);if(t.src){var n=tn(t.src);return Sr.nativeSourceHandler.canPlayType("video/"+n)}return""},Sr.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)},Sr.nativeSourceHandler.dispose=function(){},Sr.registerSourceHandler(Sr.nativeSourceHandler),ti.registerTech("Html5",Sr);var Or=F(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),Lr=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","resize","volumechange","texttrackchange"],Rr=function(c){function h(t,e,n){if(N(this,h),t.id=t.id||"vjs_video_"+It(),(e=G(h.getTagSettings(t),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if("function"===typeof t.closest){var i=t.closest("[lang]");i&&i.getAttribute&&(e.language=i.getAttribute("lang"))}else for(var r=t;r&&1===r.nodeType;){if(mt(r).hasOwnProperty("lang")){e.language=r.getAttribute("lang");break}r=r.parentNode}var a=B(this,c.call(this,null,e,n));if(a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=t,a.tagAttributes=t&&mt(t),a.language(a.options_.language),e.languages){var o={};Object.getOwnPropertyNames(e.languages).forEach(function(t){o[t.toLowerCase()]=e.languages[t]}),a.languages_=o}else a.languages_=h.prototype.options_.languages;a.cache_={},a.poster_=e.poster||"",a.controls_=!!e.controls,a.cache_.lastVolume=1,t.controls=!1,t.removeAttribute("controls"),a.scrubbing_=!1,a.el_=a.createEl(),pe(a,{eventBusKey:"el_"});var s=ge(a.options_);if(e.plugins){var l=e.plugins;Object.keys(l).forEach(function(t){if("function"!==typeof this[t])throw new Error('plugin "'+t+'" does not exist');this[t](l[t])},a)}a.options_.playerOptions=s,a.middleware_=[],a.initChildren(),a.isAudio("audio"===t.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),_||a.addClass("vjs-workinghover"),h.players[a.id_]=a;var u="6.6.0".split(".")[0];return a.addClass("vjs-v"+u),a.userActive(!0),a.reportUserActivity(),a.listenForUserActivity_(),a.on("fullscreenchange",a.handleFullscreenChange_),a.on("stageclick",a.handleStageClick_),a.changingSrc_=!1,a.playWaitingForReady_=!1,a.playOnLoadstart_=null,a.forceAutoplayInChrome_(),a}return U(h,c),h.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),h.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),c.prototype.dispose.call(this)},h.prototype.createEl=function(){var e=this.tag,n=void 0,t=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),i="video-js"===this.tag.tagName.toLowerCase();t?n=this.el_=e.parentNode:i||(n=this.el_=c.prototype.createEl.call(this,"div"));var r=mt(e);if(i){for(n=this.el_=e,e=this.tag=f.createElement("video");n.children.length;)e.appendChild(n.firstChild);ct(n,"video-js")||ht(n,"video-js"),n.appendChild(e),t=this.playerElIngest_=n}if(e.setAttribute("tabindex","-1"),e.removeAttribute("width"),e.removeAttribute("height"),Object.getOwnPropertyNames(r).forEach(function(t){"class"===t?(n.className+=" "+r[t],i&&(e.className+=" "+r[t])):(n.setAttribute(t,r[t]),i&&e.setAttribute(t,r[t]))}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused"),!0!==p.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=te("vjs-styles-dimensions");var a=Ot(".vjs-styles-defaults"),o=Ot("head");o.insertBefore(this.styleEl_,a?a.nextSibling:o.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var s=e.getElementsByTagName("a"),l=0;l<s.length;l++){var u=s.item(l);ht(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!t&&e.parentNode.insertBefore(n,e),ut(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=n},h.prototype.width=function(t,e){return this.dimension("width",t,e)},h.prototype.height=function(t,e){return this.dimension("height",t,e)},h.prototype.dimension=function(t,e,n){var i=t+"_";if(void 0===e)return this[i]||0;if(""===e)return this[i]=void 0,void this.updateStyleEl_();var r=parseFloat(e);isNaN(r)?K.error('Improper value "'+e+'" supplied for for '+t):(this[i]=r,this.updateStyleEl_(),this.isReady_&&!n&&this.trigger("playerresize"))},h.prototype.fluid=function(t){if(void 0===t)return!!this.fluid_;this.fluid_=!!t,t?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},h.prototype.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},h.prototype.updateStyleEl_=function(){if(!0!==p.VIDEOJS_NO_DYNAMIC_STYLE){var t=void 0,e=void 0,n=void 0,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=i[1]/i[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,e=void 0!==this.height_?this.height_:t*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),ee(this.styleEl_,"\n      ."+n+" {\n        width: "+t+"px;\n        height: "+e+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var a="number"===typeof this.width_?this.width_:this.options_.width,o="number"===typeof this.height_?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(a>=0&&(s.width=a),o>=0&&(s.height=o))}},h.prototype.loadTech_=function(t,e){var n=this;this.tech_&&this.unloadTech_();var i=ve(t),r=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==i&&this.tag&&(ti.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a={source:e,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"]};En.names.forEach(function(t){var e=En[t];a[e.getterName]=n[e.privateName]}),G(a,this.options_[i]),G(a,this.options_[r]),G(a,this.options_[t.toLowerCase()]),this.tag&&(a.tag=this.tag),e&&e.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);var o=ti.getTech(t);if(!o)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new o(a),this.tech_.ready(ne(this,this.handleTechReady_),!0),je(this.textTracksJson_||[],this.tech_),Lr.forEach(function(t){n.on(n.tech_,t,n["handleTech"+ve(t)+"_"])}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||ut(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},h.prototype.unloadTech_=function(){var n=this;En.names.forEach(function(t){var e=En[t];n[e.privateName]=n[e.getterName]()}),this.textTracksJson_=De(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},h.prototype.tech=function(t){return void 0===t&&K.warn(J(Or)),this.tech_},h.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},h.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},h.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused())try{delete this.tag.poster}catch(t){K("deleting tag.poster throws in some browsers",t)}},h.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},h.prototype.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},h.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},h.prototype.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return t.removeClass("vjs-waiting")})},h.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},h.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},h.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},h.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},h.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},h.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(K.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},h.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},h.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},h.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},h.prototype.handleTechClick_=function(t){kt(t)&&this.controls_&&(this.paused()?this.play():this.pause())},h.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},h.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},h.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},h.prototype.handleTechTouchEnd_=function(t){t.preventDefault()},h.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},h.prototype.handleStageClick_=function(){this.reportUserActivity()},h.prototype.handleTechFullscreenChange_=function(t,e){e&&this.isFullscreen(e.isFullscreen),this.trigger("fullscreenchange")},h.prototype.handleTechError_=function(){var t=this.tech_.error();this.error(t)},h.prototype.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},h.prototype.getCache=function(){return this.cache_},h.prototype.techCall_=function(r,a){this.ready(function(){if(r in ri)return t=this.middleware_,e=this.tech_,i=a,e[n=r](t.reduce(ai(n),i));var t,e,n,i;try{this.tech_&&this.tech_[r](a)}catch(t){throw K(t),t}},!0)},h.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in ii)return t=this.middleware_,n=this.tech_,i=e,t.reduceRight(ai(i),n[i]());var t,n,i;try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw K("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw K("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw K(t),t}}},h.prototype.play=function(){var t=this;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return this.techGet_("play");this.playOnLoadstart_=function(){t.playOnLoadstart_=null,Pe(t.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){t.playWaitingForReady_=!1,Pe(t.play())})}},h.prototype.pause=function(){this.techCall_("pause")},h.prototype.paused=function(){return!1!==this.techGet_("paused")},h.prototype.played=function(){return this.techGet_("played")||we(0,0)},h.prototype.scrubbing=function(t){if("undefined"===typeof t)return this.scrubbing_;this.scrubbing_=!!t,t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},h.prototype.currentTime=function(t){return"undefined"!==typeof t?(t<0&&(t=0),void this.techCall_("setCurrentTime",t)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},h.prototype.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&((this.cache_.duration=t)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},h.prototype.remainingTime=function(){return this.duration()-this.currentTime()},h.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},h.prototype.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=we(0,0)),t},h.prototype.bufferedPercent=function(){return Te(this.buffered(),this.duration())},h.prototype.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),n=t.end(t.length-1);return n>e&&(n=e),n},h.prototype.volume=function(t){var e=void 0;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(e>0&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},h.prototype.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},h.prototype.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},h.prototype.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},h.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},h.prototype.isFullscreen=function(t){if(void 0===t)return!!this.isFullscreen_;this.isFullscreen_=!!t},h.prototype.requestFullscreen=function(){var n=xe;this.isFullscreen(!0),n.requestFullscreen?(Wt(f,n.fullscreenchange,ne(this,function t(e){this.isFullscreen(f[n.fullscreenElement]),!1===this.isFullscreen()&&qt(f,n.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[n.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},h.prototype.exitFullscreen=function(){var t=xe;this.isFullscreen(!1),t.requestFullscreen?f[t.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},h.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=f.documentElement.style.overflow,Wt(f,"keydown",ne(this,this.fullWindowOnEscKey)),f.documentElement.style.overflow="hidden",ht(f.body,"vjs-full-window"),this.trigger("enterFullWindow")},h.prototype.fullWindowOnEscKey=function(t){27===t.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},h.prototype.exitFullWindow=function(){this.isFullWindow=!1,qt(f,"keydown",this.fullWindowOnEscKey),f.documentElement.style.overflow=this.docOrigOverflow,dt(f.body,"vjs-full-window"),this.trigger("exitFullWindow")},h.prototype.canPlayType=function(t){for(var e=void 0,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=ti.getTech(r);if(a||(a=ye.getComponent(r)),a){if(a.isSupported()&&(e=a.canPlayType(t)))return e}else K.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},h.prototype.selectSource=function(t){var n,i=this,e=this.options_.techOrder.map(function(t){return[t,ti.getTech(t)]}).filter(function(t){var e=t[0],n=t[1];return n?n.isSupported():(K.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(t,n,i){var r=void 0;return t.some(function(e){return n.some(function(t){if(r=i(e,t))return!0})}),r},a=function(t,e){var n=t[0];if(t[1].canPlaySource(e,i.options_[n.toLowerCase()]))return{source:e,tech:n}};return(this.options_.sourceOrder?r(t,e,(n=a,function(t,e){return n(e,t)})):r(e,t,a))||!1},h.prototype.src=function(t){var r=this;if("undefined"===typeof t)return this.cache_.src||"";var a=function e(t){if(Array.isArray(t)){var n=[];t.forEach(function(t){t=e(t),Array.isArray(t)?n=n.concat(t):W(t)&&n.push(t)}),t=n}else t="string"===typeof t&&t.trim()?[{src:t}]:W(t)&&"string"===typeof t.src&&t.src&&t.src.trim()?[t]:[];return t}(t);a.length?(this.cache_.sources=a,this.changingSrc_=!0,this.cache_.source=a[0],ni(this,a[0],function(t,e){var n,i;if(r.middleware_=e,r.src_(t))return a.length>1?r.src(a.slice(1)):(r.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void r.triggerReady());r.changingSrc_=!1,r.cache_.src=t.src,n=e,i=r.tech_,n.forEach(function(t){return t.setTech&&t.setTech(i)})})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},h.prototype.src_=function(t){var e,n,i=this.selectSource([t]);return!i||(e=i.tech,n=this.techName_,ve(e)!==ve(n)?(this.changingSrc_=!0,this.loadTech_(i.tech,i.source)):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),"auto"===this.options_.preload&&this.load()},!0),!1)},h.prototype.load=function(){this.techCall_("load")},h.prototype.reset=function(){this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},h.prototype.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},h.prototype.currentSource=function(){return this.cache_.source||{}},h.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},h.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},h.prototype.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},h.prototype.autoplay=function(t){return void 0!==t?(this.techCall_("setAutoplay",t),this.options_.autoplay=t,void this.ready(this.forceAutoplayInChrome_)):this.techGet_("autoplay",t)},h.prototype.forceAutoplayInChrome_=function(){this.paused()&&(this.autoplay()||this.options_.autoplay)&&M&&!w&&this.play()},h.prototype.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},h.prototype.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},h.prototype.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),this.poster_=t,this.techCall_("setPoster",t),this.trigger("posterchange")},h.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},h.prototype.controls=function(t){if(void 0===t)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},h.prototype.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},h.prototype.error=function(t){return void 0===t?this.error_||null:null===t?(this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new ke(t),this.addClass("vjs-error"),K.error("(CODE:"+this.error_.code+" "+ke.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},h.prototype.reportUserActivity=function(t){this.userActivity_=!0},h.prototype.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},h.prototype.listenForUserActivity_=function(){var e=void 0,n=void 0,i=void 0,r=ne(this,this.reportUserActivity);this.on("mousedown",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)}),this.on("mousemove",function(t){t.screenX===n&&t.screenY===i||(n=t.screenX,i=t.screenY,r())}),this.on("mouseup",function(t){r(),this.clearInterval(e)}),this.on("keydown",r),this.on("keyup",r);var a=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var t=this.options_.inactivityTimeout;t<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},h.prototype.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},h.prototype.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},h.prototype.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},h.prototype.addTextTrack=function(t,e,n){if(this.tech_)return this.tech_.addTextTrack(t,e,n)},h.prototype.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},h.prototype.removeRemoteTextTrack=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).track,e=void 0===t?arguments[0]:t;if(this.tech_)return this.tech_.removeRemoteTextTrack(e)},h.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},h.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},h.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},h.prototype.language=function(t){if(void 0===t)return this.language_;this.language_=String(t).toLowerCase()},h.prototype.languages=function(){return ge(h.prototype.options_.languages,this.languages_)},h.prototype.toJSON=function(){var t=ge(this.options_),e=t.tracks;t.tracks=[];for(var n=0;n<e.length;n++){var i=e[n];(i=ge(i)).player=void 0,t.tracks[n]=i}return t},h.prototype.createModal=function(t,e){var n=this;(e=e||{}).content=t||"";var i=new Ue(this,e);return this.addChild(i),i.on("dispose",function(){n.removeChild(i)}),i.open(),i},h.getTagSettings=function(t){var e={sources:[],tracks:[]},n=mt(t),i=n["data-setup"];if(ct(t,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=Le(i||"{}"),a=r[0],o=r[1];a&&K.error(a),G(n,o)}if(G(e,n),t.hasChildNodes())for(var s=t.childNodes,l=0,u=s.length;l<u;l++){var c=s[l],h=c.nodeName.toLowerCase();"source"===h?e.sources.push(mt(c)):"track"===h&&e.tracks.push(mt(c))}return e},h.prototype.flexNotSupported_=function(){var t=f.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},h}(ye);En.names.forEach(function(t){var e=En[t];Rr.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),Rr.players={};var Pr=p.navigator;Rr.prototype.options_={techOrder:ti.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:Pr&&(Pr.languages&&Pr.languages[0]||Pr.userLanguage||Pr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(t){Rr.prototype[t]=function(){return this.techGet_(t)}}),Lr.forEach(function(t){Rr.prototype["handleTech"+ve(t)+"_"]=function(){return this.trigger(t)}}),ye.registerComponent("Player",Rr);var Ir="plugin",Dr="activePlugins_",jr={},Nr=function(t){return jr.hasOwnProperty(t)},Ur=function(t){return Nr(t)?jr[t]:void 0},Br=function(t,e){t[Dr]=t[Dr]||{},t[Dr][e]=!0},Fr=function(t,e,n){var i=(n?"before":"")+"pluginsetup";t.trigger(i,e),t.trigger(i+":"+e.name,e)},Vr=function(r,a){return a.prototype.name=r,function(){Fr(this,{name:r,plugin:a,instance:null},!0);for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=new(Function.prototype.bind.apply(a,[null].concat([this].concat(e))));return this[r]=function(){return i},Fr(this,i.getEventHash()),i}},Hr=function(){function a(t){if(N(this,a),this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,pe(this),delete this.trigger,me(this,this.constructor.defaultState),Br(t,this.name),this.dispose=ne(this,this.dispose),t.on("dispose",this.dispose)}return a.prototype.version=function(){return this.constructor.VERSION},a.prototype.getEventHash=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.name=this.name,t.plugin=this.constructor,t.instance=this,t},a.prototype.trigger=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Xt(this.eventBusEl_,t,this.getEventHash(e))},a.prototype.handleStateChanged=function(t){},a.prototype.dispose=function(){var t=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[Dr][t]=!1,this.player=this.state=null,e[t]=Vr(t,jr[t])},a.isBasic=function(t){var e="string"===typeof t?Ur(t):t;return"function"===typeof e&&!a.prototype.isPrototypeOf(e.prototype)},a.registerPlugin=function(t,e){if("string"!==typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+("undefined"===typeof t?"undefined":j(t))+".");if(Nr(t))K.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Rr.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!==typeof e)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+("undefined"===typeof e?"undefined":j(e))+".");var n,i,r;return jr[t]=e,t!==Ir&&(a.isBasic(e)?Rr.prototype[t]=(n=t,i=e,r=function(){Fr(this,{name:n,plugin:i,instance:null},!0);var t=i.apply(this,arguments);return Br(this,n),Fr(this,{name:n,plugin:i,instance:t}),t},Object.keys(i).forEach(function(t){r[t]=i[t]}),r):Rr.prototype[t]=Vr(t,e)),e},a.deregisterPlugin=function(t){if(t===Ir)throw new Error("Cannot de-register base plugin.");Nr(t)&&(delete jr[t],delete Rr.prototype[t])},a.getPlugins=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(jr),n=void 0;return t.forEach(function(t){var e=Ur(t);e&&((n=n||{})[t]=e)}),n},a.getPluginVersion=function(t){var e=Ur(t);return e&&e.VERSION||""},a}();Hr.getPlugin=Ur,Hr.BASE_PLUGIN_NAME=Ir,Hr.registerPlugin(Ir,Hr),Rr.prototype.usingPlugin=function(t){return!!this[Dr]&&!0===this[Dr][t]},Rr.prototype.hasPlugin=function(t){return!!Nr(t)};function zr(t,n,e){var i=void 0;if("string"===typeof t){var r=zr.getPlayers();if(0===t.indexOf("#")&&(t=t.slice(1)),r[t])return n&&K.warn('Player "'+t+'" is already initialised. Options will not be applied.'),e&&r[t].ready(e),r[t];i=Ot("#"+t)}else i=t;if(!i||!i.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");if(i.player||Rr.players[i.playerId])return i.player||Rr.players[i.playerId];rt(i)&&!f.body.contains(i)&&K.warn("The element supplied is not included in the DOM"),n=n||{},zr.hooks("beforesetup").forEach(function(t){var e=t(i,ge(n));W(e)&&!Array.isArray(e)?n=ge(n,e):K.error("please return an object in beforesetup hooks")});var a=new(ye.getComponent("Player"))(i,n,e);return zr.hooks("setup").forEach(function(t){return t(a)}),a}if("undefined"===typeof HTMLVideoElement&&it()&&(f.createElement("video"),f.createElement("audio"),f.createElement("track"),f.createElement("video-js")),zr.hooks_={},zr.hooks=function(t,e){return zr.hooks_[t]=zr.hooks_[t]||[],e&&(zr.hooks_[t]=zr.hooks_[t].concat(e)),zr.hooks_[t]},zr.hook=function(t,e){zr.hooks(t,e)},zr.hookOnce=function(n,t){zr.hooks(n,[].concat(t).map(function(e){return function t(){zr.removeHook(n,t),e.apply(void 0,arguments)}}))},zr.removeHook=function(t,e){var n=zr.hooks(t).indexOf(e);return!(n<=-1)&&(zr.hooks_[t]=zr.hooks_[t].slice(),zr.hooks_[t].splice(n,1),!0)},!0!==p.VIDEOJS_NO_DYNAMIC_STYLE&&it()){var Gr=Ot(".vjs-styles-defaults");if(!Gr){Gr=te("vjs-styles-defaults");var Wr=Ot("head");Wr&&Wr.insertBefore(Gr,Wr.firstChild),ee(Gr,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}return Qt(1,zr),zr.VERSION="6.6.0",zr.options=Rr.prototype.options_,zr.getPlayers=function(){return Rr.players},zr.players=Rr.players,zr.getComponent=ye.getComponent,zr.registerComponent=function(t,e){ti.isTech(e)&&K.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),ye.registerComponent.call(ye,t,e)},zr.getTech=ti.getTech,zr.registerTech=ti.registerTech,zr.use=function(t,e){ei[t]=ei[t]||[],ei[t].push(e)},zr.browser=D,zr.TOUCH_ENABLED=P,zr.extend=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){t.apply(this,arguments)},i={};for(var r in"object"===("undefined"===typeof e?"undefined":j(e))?(e.constructor!==Object.prototype.constructor&&(n=e.constructor),i=e):"function"===typeof e&&(n=e),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":j(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.super_=e)}(n,t),i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n},zr.mergeOptions=ge,zr.bind=ne,zr.registerPlugin=Hr.registerPlugin,zr.plugin=function(t,e){return K.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Hr.registerPlugin(t,e)},zr.getPlugins=Hr.getPlugins,zr.getPlugin=Hr.getPlugin,zr.getPluginVersion=Hr.getPluginVersion,zr.addLanguage=function(t,e){var n;return t=(""+t).toLowerCase(),zr.options.languages=ge(zr.options.languages,((n={})[t]=e,n)),zr.options.languages[t]},zr.log=K,zr.createTimeRange=zr.createTimeRanges=we,zr.formatTime=_i,zr.parseUrl=Qe,zr.isCrossOrigin=en,zr.EventTarget=re,zr.on=Wt,zr.one=Yt,zr.off=qt,zr.trigger=Xt,zr.xhr=pn,zr.TextTrack=yn,zr.AudioTrack=_n,zr.VideoTrack=bn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){zr[t]=function(){return K.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),Rt[t].apply(null,arguments)}}),zr.computedStyle=Q,zr.dom=Rt,zr.url=nn,zr},e.exports=t()}).call(window)}).call(t,n(2))},function(t,e,n){function r(){}Object.defineProperty(e,"__esModule",{value:!0}),e.unique=function(e){var n=-1;return function(t){return e+"_"+ ++n}},e.noop=r,e.callbackTimeout=function(t,e,n){var i=setTimeout(function(){e=r,n()},t);return function(){clearTimeout(i),e.apply(this,arguments)}},e.createElementWithID=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=document.createElement("div");i.id=e,n&&(t.innerHTML="");return t.appendChild(i),i},e.isPositiveInt=function(t,e){return!isNaN(parseFloat(t))&&isFinite(t)&&t>0?t:e},e.stringEndsWith=function(t,e){return i.call(t,e)},e.hideFlashEl=function(t){t.style.position="absolute",t.style.left="-1px",t.style.top="-1px",t.style.width="1px",t.style.height="1px"};var i=String.prototype.endsWith?String.prototype.endsWith:function(t,e){var n=this.toString();(void 0===e||e>n.length)&&(e=n.length),e-=t.length;var i=n.indexOf(t,e);return-1!==i&&i===e}},function(Eia,Fia){var Gia;Gia=function(){return this}();try{Gia=Gia||Function("return this")()||eval("this")}catch(t){"object"===typeof window&&(Gia=window)}Eia.exports=Gia},function(e,t,n){(function(Q,H,u){var t;t=function(){var t,e,n;return function a(o,s,l){function u(n,t){if(!s[n]){if(!o[n]){var e="function"==typeof _dereq_&&_dereq_;if(!t&&e)return e(n,!0);if(c)return c(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[n]={exports:{}};o[n][0].call(r.exports,function(t){var e=o[n][1][t];return u(e||t)},r,r.exports,a,o,s,l)}return s[n].exports}for(var c="function"==typeof _dereq_&&_dereq_,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,n){"use strict";e.exports=function(t){var i=t._SomePromiseArray;function e(t){var e=new i(t),n=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),n}t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,n){"use strict";var i;try{throw new Error}catch(t){i=t}var r=t("./schedule"),a=t("./queue"),o=t("./util");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=r}function l(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function u(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function c(t){this._normalQueue._pushOne(t),this._queueTick()}function h(t){for(;t.length()>0;)d(t)}function d(t){var e=t.shift();if("function"!==typeof e)e._settlePromises();else{var n=t.shift(),i=t.shift();e.call(n,i)}}s.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},s.prototype.disableTrampolineIfNecessary=function(){o.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(t,e){e?(Q.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),Q.exit(2)):this.throwLater(t)},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!==typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.prototype.settlePromises=o.hasDevTools?(s.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?l.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},s.prototype.invoke=function(t,e,n){this._trampolineEnabled?u.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},function(t){this._trampolineEnabled?c.call(this,t):this._schedule(function(){t._settlePromises()})}):(s.prototype.invokeLater=l,s.prototype.invoke=u,c),s.prototype._drainQueues=function(){h(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,h(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},e.exports=s,e.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(a,o,s,l){var u=!1,n=function(t,e){this._reject(e)},c=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(n,n,null,this,t)},h=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},d=function(t,e){e.promiseRejectionQueued||this._reject(t)};a.prototype.bind=function(t){u||(u=!0,a.prototype._propagateFrom=l.propagateFromFunction(),a.prototype._boundValue=l.boundValueFunction());var e=s(t),n=new a(o);n._propagateFrom(this,1);var i=this._target();if(n._setBoundTo(e),e instanceof a){var r={promiseRejectionQueued:!1,promise:n,target:i,bindingPromise:e};i._then(o,c,void 0,n,r),e._then(h,d,void 0,n,r),n._setOnCancel(e)}else n._resolveCallback(i);return n},a.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},a.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},a.bind=function(t,e){return a.resolve(e).bind(t)}}},{}],4:[function(t,e,n){"use strict";var i;"undefined"!==typeof Promise&&(i=Promise);var r=t("./promise")();r.noConflict=function(){try{Promise===r&&(Promise=i)}catch(t){}return r},e.exports=r},{"./promise":22}],5:[function(t,e,n){"use strict";var i=Object.create;if(i){var r=i(null),a=i(null);r[" size"]=a[" size"]=0}e.exports=function(r){var i,a=t("./util"),o=a.canEvaluate;a.isIdentifier;function e(t,e){var n;if(null!=t&&(n=t[e]),"function"===typeof n)return n;var i="Object "+a.classString(t)+" has no method '"+a.toString(e)+"'";throw new r.TypeError(i)}function n(t){return e(t,this.pop()).apply(t,this)}function s(t){return t[this]}function l(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}r.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(n,void 0,void 0,e,void 0)},r.prototype.get=function(t){var e;if("number"===typeof t)e=l;else if(o){var n=i(t);e=null!==n?n:s}else e=s;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(l,t,e){"use strict";t.exports=function(t,e,n,i){var r=l("./util"),a=r.tryCatch,o=r.errorObj,s=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(t,e){if(r.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"===typeof t){if(!e){var i=a(t).call(this._boundValue());i===o&&(this._attachExtraTrace(i.e),s.throwLater(i.e))}}else t._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,t)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(h){var d=t("./util"),p=t("./es5").keys,f=d.tryCatch,m=d.errorObj;return function(l,u,c){return function(t){var e=c._boundValue();t:for(var n=0;n<l.length;++n){var i=l[n];if(i===Error||null!=i&&i.prototype instanceof Error){if(t instanceof i)return f(u).call(e,t)}else if("function"===typeof i){var r=f(i).call(e,t);if(r===m)return r;if(r)return f(u).call(e,t)}else if(d.isObject(t)){for(var a=p(i),o=0;o<a.length;++o){var s=a[o];if(i[s]!=t[s])continue t}return f(u).call(e,t)}}return h}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(a){var o=!1,n=[];function s(){this._trace=new s.CapturedTrace(l())}function l(){var t=n.length-1;if(t>=0)return n[t]}return a.prototype._promiseCreated=function(){},a.prototype._pushContext=function(){},a.prototype._popContext=function(){return null},a._peekContext=a.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},s.prototype._popContext=function(){if(void 0===this._trace)return null;var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e},s.CapturedTrace=null,s.create=function(){if(o)return new s},s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var t=a.prototype._pushContext,e=a.prototype._popContext,n=a._peekContext,i=a.prototype._peekContext,r=a.prototype._promiseCreated;s.deactivateLongStackTraces=function(){a.prototype._pushContext=t,a.prototype._popContext=e,a._peekContext=n,a.prototype._peekContext=i,a.prototype._promiseCreated=r,o=!1},o=!0,a.prototype._pushContext=s.prototype._pushContext,a.prototype._popContext=s.prototype._popContext,a._peekContext=a.prototype._peekContext=l,a.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},s}},{}],9:[function(J,t,e){"use strict";t.exports=function(o,i){var n,r,a,s=o._getDomain,l=o._async,u=J("./errors").Warning,c=J("./util"),h=J("./es5"),d=c.canAttachTrace,p=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,f=/\((?:timers\.js):\d+:\d+\)/,m=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,g=null,y=!1,t=!(0==c.env("BLUEBIRD_DEBUG")),e=!(0==c.env("BLUEBIRD_WARNINGS")||!t&&!c.env("BLUEBIRD_WARNINGS")),_=!(0==c.env("BLUEBIRD_LONG_STACK_TRACES")||!t&&!c.env("BLUEBIRD_LONG_STACK_TRACES")),b=0!=c.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(e||!!c.env("BLUEBIRD_W_FORGOTTEN_RETURN"));o.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},o.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},o.prototype._notifyUnhandledRejectionIsHandled=function(){z("rejectionHandled",n,void 0,this)},o.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},o.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},o.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),z("unhandledRejection",r,t,this)}},o.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},o.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},o.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},o.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},o.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},o.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},o.prototype._warn=function(t,e,n){return B(t,e,n||this)},o.onPossiblyUnhandledRejection=function(t){var e=s();r="function"===typeof t?null===e?t:c.domainBind(e,t):void 0},o.onUnhandledRejectionHandled=function(t){var e=s();n="function"===typeof t?null===e?t:c.domainBind(e,t):void 0};var w=function(){};o.longStackTraces=function(){if(l.haveItemsQueued()&&!K.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!K.longStackTraces&&W()){var t=o.prototype._captureStackTrace,e=o.prototype._attachExtraTrace,n=o.prototype._dereferenceTrace;K.longStackTraces=!0,w=function(){if(l.haveItemsQueued()&&!K.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");o.prototype._captureStackTrace=t,o.prototype._attachExtraTrace=e,o.prototype._dereferenceTrace=n,i.deactivateLongStackTraces(),l.enableTrampoline(),K.longStackTraces=!1},o.prototype._captureStackTrace=j,o.prototype._attachExtraTrace=N,o.prototype._dereferenceTrace=U,i.activateLongStackTraces(),l.disableTrampolineIfNecessary()}},o.hasLongStackTraces=function(){return K.longStackTraces&&W()};var T=function(){try{if("function"===typeof CustomEvent){var t=new CustomEvent("CustomEvent");return c.global.dispatchEvent(t),function(t,e){var n={detail:e,cancelable:!0};h.defineProperty(n,"promise",{value:e.promise}),h.defineProperty(n,"reason",{value:e.reason});var i=new CustomEvent(t.toLowerCase(),n);return!c.global.dispatchEvent(i)}}if("function"!==typeof Event)return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),c.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!c.global.dispatchEvent(n)};var t=new Event("CustomEvent");return c.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,h.defineProperty(n,"promise",{value:e.promise}),h.defineProperty(n,"reason",{value:e.reason}),!c.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),x=c.isNode?function(){return Q.emit.apply(Q,arguments)}:c.global?function(t){var e="on"+t.toLowerCase(),n=c.global[e];return!!n&&(n.apply(c.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function E(t,e){return{promise:e}}var S={promiseCreated:E,promiseFulfilled:E,promiseRejected:E,promiseResolved:E,promiseCancelled:E,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:E},A=function(t){var e=!1;try{e=x.apply(null,arguments)}catch(t){l.throwLater(t),e=!0}var n=!1;try{n=T(t,S[t].apply(null,arguments))}catch(t){l.throwLater(t),n=!0}return n||e};function M(){return!1}function C(t,e,n){var i=this;try{t(e,n,function(t){if("function"!==typeof t)throw new TypeError("onCancel must be a function, got: "+c.toString(t));i._attachCancellationCallback(t)})}catch(t){return t}}function k(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?c.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function O(){return this._onCancelField}function L(t){this._onCancelField=t}function R(){this._cancellationParent=void 0,this._onCancelField=void 0}function P(t,e){if(0!==(1&e)){var n=(this._cancellationParent=t)._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}o.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?o.longStackTraces():!t.longStackTraces&&o.hasLongStackTraces()&&w()),"warnings"in t){var e=t.warnings;K.warnings=!!e,b=K.warnings,c.isObject(e)&&"wForgottenReturn"in e&&(b=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!K.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");o.prototype._clearCancellationData=R,o.prototype._propagateFrom=P,o.prototype._onCancel=O,o.prototype._setOnCancel=L,o.prototype._attachCancellationCallback=k,o.prototype._execute=C,I=P,K.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!K.monitoring?(K.monitoring=!0,o.prototype._fireEvent=A):!t.monitoring&&K.monitoring&&(K.monitoring=!1,o.prototype._fireEvent=M)),o},o.prototype._fireEvent=M,o.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},o.prototype._onCancel=function(){},o.prototype._setOnCancel=function(t){},o.prototype._attachCancellationCallback=function(t){},o.prototype._captureStackTrace=function(){},o.prototype._attachExtraTrace=function(){},o.prototype._dereferenceTrace=function(){},o.prototype._clearCancellationData=function(){},o.prototype._propagateFrom=function(t,e){};var I=function(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function D(){var t=this._boundTo;return void 0!==t&&t instanceof o?t.isFulfilled()?t.value():void 0:t}function j(){this._trace=new $(this._peekContext())}function N(t,e){if(d(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=V(t);c.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),c.notEnumerableProp(t,"__stackCleaned__",!0)}}}function U(){this._trace=void 0}function B(t,e,n){if(K.warnings){var i,r=new u(t);if(e)n._attachExtraTrace(r);else if(K.longStackTraces&&(i=o._peekContext()))i.attachExtraTrace(r);else{var a=V(r);r.stack=a.message+"\n"+a.stack.join("\n")}A("warning",r)||H(r,"",!0)}}function F(t){for(var e=[],n=0;n<t.length;++n){var i=t[n],r="    (No stack trace)"===i||v.test(i),a=r&&q(i);r&&!a&&(y&&" "!==i.charAt(0)&&(i="    "+i),e.push(i))}return e}function V(t){var e=t.stack,n=t.toString();return e="string"===typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var i=e[n];if("    (No stack trace)"===i||v.test(i))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:F(e)}}function H(t,e,n){if("undefined"!==typeof console){var i;if(c.isObject(t)){var r=t.stack;i=e+g(r,t)}else i=e+String(t);"function"===typeof a?a(i,n):"function"!==typeof console.log&&"object"!==typeof console.log||console.log(i)}}function z(t,e,n,i){var r=!1;try{"function"===typeof e&&(r=!0,"rejectionHandled"===t?e(i):e(n,i))}catch(t){l.throwLater(t)}"unhandledRejection"===t?A(t,n,i)||r||H(n,"Unhandled rejection "):A(t,i)}function G(t){var e;if("function"===typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"===typeof t.toString?t.toString():c.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}function W(){return"function"===typeof Z}var q=function(){return!1},X=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Y(t){var e=t.match(X);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function $(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);Z(this,$),e>32&&this.uncycle()}c.inherits($,Error),(i.CapturedTrace=$).prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},i=0,r=this;void 0!==r;++i)e.push(r),r=r._parent;for(i=(t=this._length=i)-1;i>=0;--i){var a=e[i].stack;void 0===n[a]&&(n[a]=i)}for(i=0;i<t;++i){var o=n[e[i].stack];if(void 0!==o&&o!==i){o>0&&(e[o-1]._parent=void 0,e[o-1]._length=1),e[i]._parent=void 0,e[i]._length=1;var s=i>0?e[i-1]:this;o<t-1?(s._parent=e[o+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var l=s._length+1,u=i-2;u>=0;--u)e[u]._length=l,l++;return}}}},$.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=V(t),n=e.message,i=[e.stack],r=this;void 0!==r;)i.push(F(r.stack.split("\n"))),r=r._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var i=t[n],r=e.length-1,a=e[r],o=-1,s=i.length-1;s>=0;--s)if(i[s]===a){o=s;break}for(s=o;s>=0;--s){var l=i[s];if(e[r]!==l)break;e.pop(),r--}e=i}}(i),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(i),c.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,i)),c.notEnumerableProp(t,"__stackCleaned__",!0)}};var Z=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"===typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():G(e)};if("number"===typeof Error.stackTraceLimit&&"function"===typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=t,g=e;var n=Error.captureStackTrace;return q=function(t){return p.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var i,r=new Error;if("string"===typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,g=e,y=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){i="stack"in t}return"stack"in r||!i||"number"!==typeof Error.stackTraceLimit?(g=function(t,e){return"string"===typeof t?t:"object"!==typeof e&&"function"!==typeof e||void 0===e.name||void 0===e.message?G(e):e.toString()},null):(v=t,g=e,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!==typeof console&&"undefined"!==typeof console.warn&&(a=function(t){console.warn(t)},c.isNode&&Q.stderr.isTTY?a=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:c.isNode||"string"!==typeof(new Error).stack||(a=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var K={warnings:e,longStackTraces:!1,cancellation:!1,monitoring:!1};return _&&o.longStackTraces(),{longStackTraces:function(){return K.longStackTraces},warnings:function(){return K.warnings},cancellation:function(){return K.cancellation},monitoring:function(){return K.monitoring},propagateFromFunction:function(){return I},boundValueFunction:function(){return D},checkForgottenReturns:function(t,e,n,i,r){if(void 0===t&&null!==e&&b){if(void 0!==r&&r._returnedNonUndefined())return;if(0===(65535&i._bitField))return;n&&(n+=" ");var a="",o="";if(e._trace){for(var s=e._trace.stack.split("\n"),l=F(s),u=l.length-1;u>=0;--u){var c=l[u];if(!f.test(c)){var h=c.match(m);h&&(a="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(l.length>0){var d=l[0];for(u=0;u<s.length;++u)if(s[u]===d){u>0&&(o="\n"+s[u-1]);break}}}var p="a promise was created in a "+n+"handler "+a+"but was not returned from it, see http://goo.gl/rRqMUw"+o;i._warn(p,!0,e)}},setBounds:function(t,e){if(W()){for(var n,i,r=t.stack.split("\n"),a=e.stack.split("\n"),o=-1,s=-1,l=0;l<r.length;++l)if(u=Y(r[l])){n=u.fileName,o=u.line;break}for(l=0;l<a.length;++l){var u;if(u=Y(a[l])){i=u.fileName,s=u.line;break}}o<0||s<0||!n||!i||n!==i||o>=s||(q=function(t){if(p.test(t))return!0;var e=Y(t);return!!(e&&e.fileName===n&&o<=e.line&&e.line<=s)})}},warn:B,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),B(n)},CapturedTrace:$,fireDomEvent:T,fireGlobalEvent:x}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(n){function i(){return this.value}function r(){throw this.reason}n.prototype.return=n.prototype.thenReturn=function(t){return t instanceof n&&t.suppressUnhandledRejections(),this._then(i,void 0,void 0,{value:t},void 0)},n.prototype.throw=n.prototype.thenThrow=function(t){return this._then(r,void 0,void 0,{reason:t},void 0)},n.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},n.prototype.catchReturn=function(t){if(arguments.length<=1)return t instanceof n&&t.suppressUnhandledRejections(),this._then(void 0,i,void 0,{value:t},void 0);var e=arguments[1];e instanceof n&&e.suppressUnhandledRejections();return this.caught(t,function(){return e})}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,n){var i=t.reduce,e=t.all;function r(){return e(this)}t.prototype.each=function(t){return i(this,t,n,0)._then(r,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,n,n)},t.each=function(t,e){return i(t,e,n,0)._then(r,void 0,void 0,t,void 0)},t.mapSeries=function(t,e){return i(t,e,n,n)}}},{}],12:[function(t,e,n){"use strict";var i,r,a=t("./es5"),o=a.freeze,s=t("./util"),l=s.inherits,u=s.notEnumerableProp;function c(e,n){function i(t){if(!(this instanceof i))return new i(t);u(this,"message","string"===typeof t?t:n),u(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(i,Error),i}var h=c("Warning","warning"),d=c("CancellationError","cancellation error"),p=c("TimeoutError","timeout error"),f=c("AggregateError","aggregate error");try{i=TypeError,r=RangeError}catch(t){i=c("TypeError","type error"),r=c("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<m.length;++v)"function"===typeof Array.prototype[m[v]]&&(f.prototype[m[v]]=Array.prototype[m[v]]);a.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var g=0;function y(t){if(!(this instanceof y))return new y(t);u(this,"name","OperationalError"),u(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(u(this,"message",t.message),u(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}f.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var i=this[n]===this?"[Circular AggregateError]":this[n]+"",r=i.split("\n"),a=0;a<r.length;++a)r[a]=t+r[a];e+=(i=r.join("\n"))+"\n"}return g--,e},l(y,Error);var _=Error.__BluebirdErrorTypes__;_||(_=o({CancellationError:d,TimeoutError:p,OperationalError:y,RejectionError:y,AggregateError:f}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:i,RangeError:r,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var i=function(){"use strict";return void 0===this}();if(i)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:i,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,a={}.toString,o={}.constructor.prototype,s=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===a.call(t)}catch(t){return!1}},keys:s,names:s,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return o}},isES5:i,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,i){var r=t.map;t.prototype.filter=function(t,e){return r(this,t,e,i)},t.filter=function(t,e,n){return r(t,e,n,i)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(s,o,l){var u=t("./util"),c=s.CancellationError,h=u.errorObj,d=t("./catch_filter")(l);function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function p(t){this.finallyHandler=t}function f(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),!(t.cancelPromise=null))}function m(){return g.call(this,this.promise._target()._settledValue())}function v(t){if(!f(this,t))return h.e=t,h}function g(t){var e=this.promise,n=this.handler;if(!this.called){this.called=!0;var i=this.isFinallyHandler()?n.call(e._boundValue()):n.call(e._boundValue(),t);if(i===l)return i;if(void 0!==i){e._setReturnedNonUndefined();var r=o(i,e);if(r instanceof s){if(null!=this.cancelPromise){if(r._isCancelled()){var a=new c("late cancellation observer");return e._attachExtraTrace(a),h.e=a,h}r.isPending()&&r._attachCancellationCallback(new p(this))}return r._then(m,v,void 0,this,void 0)}}}return e.isRejected()?(f(this),h.e=t,h):(f(this),t)}return r.prototype.isFinallyHandler=function(){return 0===this.type},p.prototype._resultCancelled=function(){f(this.finallyHandler)},s.prototype._passThrough=function(t,e,n,i){return"function"!==typeof t?this.then():this._then(n,i,void 0,new r(this,e,t),void 0)},s.prototype.lastly=s.prototype.finally=function(t){return this._passThrough(t,0,g,g)},s.prototype.tap=function(t){return this._passThrough(t,1,g)},s.prototype.tapCatch=function(t){var e=arguments.length;if(1===e)return this._passThrough(t,1,void 0,g);var n,i=new Array(e-1),r=0;for(n=0;n<e-1;++n){var a=arguments[n];if(!u.isObject(a))return s.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(a)));i[r++]=a}i.length=r;var o=arguments[n];return this._passThrough(d(i,o,this),1,void 0,g)},r}},{"./catch_filter":7,"./util":36}],16:[function(n,t,e){"use strict";t.exports=function(s,i,o,l,t,u){var c=n("./errors").TypeError,e=n("./util"),h=e.errorObj,d=e.tryCatch,p=[];function f(t,e,n,i){if(u.cancellation()){var r=new s(o),a=this._finallyPromise=new s(o);this._promise=r.lastly(function(){return a}),r._captureStackTrace(),r._setOnCancel(this)}else{(this._promise=new s(o))._captureStackTrace()}this._stack=i,this._generatorFunction=t,this._receiver=e,this._generator=void 0,this._yieldHandlers="function"===typeof n?[n].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}e.inherits(f,t),f.prototype._isResolved=function(){return null===this._promise},f.prototype._cleanup=function(){this._promise=this._generator=null,u.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},f.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if("undefined"!==typeof this._generator.return)this._promise._pushContext(),t=d(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var e=new s.CancellationError("generator .return() sentinel");s.coroutine.returnSentinel=e,this._promise._attachExtraTrace(e),this._promise._pushContext(),t=d(this._generator.throw).call(this._generator,e),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},f.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=d(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},f.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=d(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},f.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof s){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},f.prototype.promise=function(){return this._promise},f.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},f.prototype._continue=function(t){var e=this._promise;if(t===h)return this._cleanup(),this._cancellationPhase?e.cancel():e._rejectCallback(t.e,!1);var n=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?e.cancel():e._resolveCallback(n);var i=l(n,this._promise);if(i instanceof s||null!==(i=function(t,e,n){for(var i=0;i<e.length;++i){n._pushContext();var r=d(e[i])(t);if(n._popContext(),r===h){n._pushContext();var a=s.reject(h.e);return n._popContext(),a}var o=l(r,n);if(o instanceof s)return o}return null}(i,this._yieldHandlers,this._promise))){var r=(i=i._target())._bitField;0===(50397184&r)?(this._yieldedPromise=i)._proxy(this,null):0!==(33554432&r)?s._async.invoke(this._promiseFulfilled,this,i._value()):0!==(16777216&r)?s._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled()}else this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},s.coroutine=function(i,t){if("function"!==typeof i)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,a=f,o=(new Error).stack;return function(){var t=i.apply(this,arguments),e=new a(void 0,void 0,r,o),n=e.promise();return e._generator=t,e._promiseFulfilled(void 0),n}},s.coroutine.addYieldHandler=function(t){if("function"!==typeof t)throw new c("expecting a function but got "+e.classString(t));p.push(t)},s.spawn=function(t){if(u.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!==typeof t)return i("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var e=new f(t,this),n=e.promise();return e._run(s.spawn),n}}},{"./errors":12,"./util":36}],17:[function(s,t,e){"use strict";t.exports=function(t,r,e,n,i,a){var o=s("./util");o.canEvaluate,o.tryCatch,o.errorObj;t.join=function(){var t,e=arguments.length-1;e>0&&"function"===typeof arguments[e]&&(t=arguments[e]);var n=[].slice.call(arguments);t&&n.pop();var i=new r(n).promise();return void 0!==t?i.spread(t):i}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(p,t,a,f,o,m){var s=p._getDomain,l=e("./util"),v=l.tryCatch,g=l.errorObj,u=p._async;function c(t,e,n,i){this.constructor$(t),this._promise._captureStackTrace();var r=s();this._callback=null===r?e:l.domainBind(r,e),this._preservedValues=i===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],u.invoke(this._asyncInit,this,void 0)}function r(t,e,n,i){if("function"!==typeof e)return a("expecting a function but got "+l.classString(e));var r=0;if(void 0!==n){if("object"!==typeof n||null===n)return p.reject(new TypeError("options argument must be an object but it is "+l.classString(n)));if("number"!==typeof n.concurrency)return p.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(n.concurrency)));r=n.concurrency}return new c(t,e,r="number"===typeof r&&isFinite(r)&&r>=1?r:0,i).promise()}l.inherits(c,t),c.prototype._asyncInit=function(){this._init$(void 0,-2)},c.prototype._init=function(){},c.prototype._promiseFulfilled=function(t,e){var n=this._values,i=this.length(),r=this._preservedValues,a=this._limit;if(e<0){if(n[e=-1*e-1]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(a>=1&&this._inFlight>=a)return n[e]=t,this._queue.push(e),!1;null!==r&&(r[e]=t);var o=this._promise,s=this._callback,l=o._boundValue();o._pushContext();var u=v(s).call(l,t,e,i),c=o._popContext();if(m.checkForgottenReturns(u,c,null!==r?"Promise.filter":"Promise.map",o),u===g)return this._reject(u.e),!0;var h=f(u,this._promise);if(h instanceof p){var d=(h=h._target())._bitField;if(0===(50397184&d))return a>=1&&this._inFlight++,(n[e]=h)._proxy(this,-1*(e+1)),!1;if(0===(33554432&d))return 0!==(16777216&d)?this._reject(h._reason()):this._cancel(),!0;u=h._value()}n[e]=u}return++this._totalResolved>=i&&(null!==r?this._filter(n,r):this._resolve(n),!0)},c.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var i=t.pop();this._promiseFulfilled(n[i],i)}},c.prototype._filter=function(t,e){for(var n=e.length,i=new Array(n),r=0,a=0;a<n;++a)t[a]&&(i[r++]=e[a]);i.length=r,this._resolve(i)},c.prototype.preservedValues=function(){return this._preservedValues},p.prototype.map=function(t,e){return r(this,t,e,null)},p.map=function(t,e,n,i){return r(t,e,n,i)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(o,s,t,l,u){var c=e("./util"),h=c.tryCatch;o.method=function(i){if("function"!==typeof i)throw new o.TypeError("expecting a function but got "+c.classString(i));return function(){var t=new o(s);t._captureStackTrace(),t._pushContext();var e=h(i).apply(this,arguments),n=t._popContext();return u.checkForgottenReturns(e,n,"Promise.method",t),t._resolveFromSyncValue(e),t}},o.attempt=o.try=function(t){if("function"!==typeof t)return l("expecting a function but got "+c.classString(t));var e,n=new o(s);if(n._captureStackTrace(),n._pushContext(),arguments.length>1){u.deprecated("calling Promise.try with more than 1 argument");var i=arguments[1],r=arguments[2];e=c.isArray(i)?h(t).apply(r,i):h(t).call(r,i)}else e=h(t)();var a=n._popContext();return u.checkForgottenReturns(e,a,"Promise.try",n),n._resolveFromSyncValue(e),n},o.prototype._resolveFromSyncValue=function(t){t===c.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var o=t("./util"),s=o.maybeWrapAsError,l=t("./errors").OperationalError,u=t("./es5");var c=/^(?:name|message|stack|cause)$/;function h(t){var e,n;if((n=t)instanceof Error&&u.getPrototypeOf(n)===Error.prototype){(e=new l(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var i=u.keys(t),r=0;r<i.length;++r){var a=i[r];c.test(a)||(e[a]=t[a])}return e}return o.markAsOriginatingFromRejection(t),t}e.exports=function(r,a){return function(t,e){if(null!==r){if(t){var n=h(s(t));r._attachExtraTrace(n),r._reject(n)}else if(a){var i=[].slice.call(arguments,1);r._fulfill(i)}else r._fulfill(e);r=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){var i=e("./util"),r=t._async,a=i.tryCatch,o=i.errorObj;function s(t,e){if(!i.isArray(t))return l.call(this,t,e);var n=a(e).apply(this._boundValue(),[null].concat(t));n===o&&r.throwLater(n.e)}function l(t,e){var n=this._boundValue(),i=void 0===t?a(e).call(n,null):a(e).call(n,null,t);i===o&&r.throwLater(i.e)}function u(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var i=a(e).call(this._boundValue(),t);i===o&&r.throwLater(i.e)}t.prototype.asCallback=t.prototype.nodeify=function(t,e){if("function"==typeof t){var n=l;void 0!==e&&Object(e).spread&&(n=s),this._then(n,u,void 0,this,t)}return this}}},{"./util":36}],22:[function(O,L,t){"use strict";L.exports=function(){var l=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},s=function(){return new A.PromiseInspection(this._target())},o=function(t){return A.reject(new h(t))};function u(){}var p,c={},f=O("./util");p=f.isNode?function(){var t=Q.domain;return void 0===t&&(t=null),t}:function(){return null},f.notEnumerableProp(A,"_getDomain",p);var t=O("./es5"),e=O("./async"),m=new e;t.defineProperty(A,"_async",{value:m});var n=O("./errors"),h=A.TypeError=n.TypeError;A.RangeError=n.RangeError;var v=A.CancellationError=n.CancellationError;A.TimeoutError=n.TimeoutError,A.OperationalError=n.OperationalError,A.RejectionError=n.OperationalError,A.AggregateError=n.AggregateError;var g=function(){},d={},y={},_=O("./thenables")(A,g),b=O("./promise_array")(A,g,_,o,u),i=O("./context")(A),r=i.create,w=O("./debuggability")(A,i),T=(w.CapturedTrace,O("./finally")(A,_,y)),x=O("./catch_filter")(y),a=O("./nodeback"),E=f.errorObj,S=f.tryCatch;function A(t){t!==g&&function(t,e){if(null==t||t.constructor!==A)throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!==typeof e)throw new h("expecting a function but got "+f.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function M(t){this.promise._resolveCallback(t)}function C(t){this.promise._rejectCallback(t,!1)}function k(t){var e=new A(g);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return A.prototype.toString=function(){return"[object Promise]"},A.prototype.caught=A.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,i=new Array(e-1),r=0;for(n=0;n<e-1;++n){var a=arguments[n];if(!f.isObject(a))return o("Catch statement predicate: expecting an object but got "+f.classString(a));i[r++]=a}return i.length=r,t=arguments[n],this.then(void 0,x(i,t,this))}return this.then(void 0,t)},A.prototype.reflect=function(){return this._then(s,s,void 0,this,void 0)},A.prototype.then=function(t,e){if(w.warnings()&&arguments.length>0&&"function"!==typeof t&&"function"!==typeof e){var n=".then() only accepts functions but was passed: "+f.classString(t);arguments.length>1&&(n+=", "+f.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},A.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},A.prototype.spread=function(t){return"function"!==typeof t?o("expecting a function but got "+f.classString(t)):this.all()._then(t,void 0,void 0,d,void 0)},A.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},A.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},A.prototype.error=function(t){return this.caught(f.originatesFromRejection,t)},A.getNewLibraryCopy=L.exports,A.is=function(t){return t instanceof A},A.fromNode=A.fromCallback=function(t){var e=new A(g);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,i=S(t)(a(e,n));return i===E&&e._rejectCallback(i.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},A.all=function(t){return new b(t).promise()},A.resolve=A.fulfilled=A.cast=function(t){var e=_(t);return e instanceof A||((e=new A(g))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},A.reject=A.rejected=function(t){var e=new A(g);return e._captureStackTrace(),e._rejectCallback(t,!0),e},A.setScheduler=function(t){if("function"!==typeof t)throw new h("expecting a function but got "+f.classString(t));return m.setScheduler(t)},A.prototype._then=function(t,e,n,i,r){var a=void 0!==r,o=a?r:new A(g),s=this._target(),l=s._bitField;a||(o._propagateFrom(this,3),o._captureStackTrace(),void 0===i&&0!==(2097152&this._bitField)&&(i=0!==(50397184&l)?this._boundValue():s===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,o));var u=p();if(0!==(50397184&l)){var c,h,d=s._settlePromiseCtx;0!==(33554432&l)?(h=s._rejectionHandler0,c=t):0!==(16777216&l)?(h=s._fulfillmentHandler0,c=e,s._unsetRejectionIsUnhandled()):(d=s._settlePromiseLateCancellationObserver,h=new v("late cancellation observer"),s._attachExtraTrace(h),c=e),m.invoke(d,s,{handler:null===u?c:"function"===typeof c&&f.domainBind(u,c),promise:o,receiver:i,value:h})}else s._addCallbacks(t,e,o,i,u);return o},A.prototype._length=function(){return 65535&this._bitField},A.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},A.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},A.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},A.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},A.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},A.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},A.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},A.prototype._isFinal=function(){return(4194304&this._bitField)>0},A.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},A.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},A.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},A.prototype._setAsyncGuaranteed=function(){m.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},A.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==c)return void 0===e&&this._isBound()?this._boundValue():e},A.prototype._promiseAt=function(t){return this[4*t-4+2]},A.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},A.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},A.prototype._boundValue=function(){},A.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,i=t._promise0,r=t._receiverAt(0);void 0===r&&(r=c),this._addCallbacks(e,n,i,r,null)},A.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),i=t._rejectionHandlerAt(e),r=t._promiseAt(e),a=t._receiverAt(e);void 0===a&&(a=c),this._addCallbacks(n,i,r,a,null)},A.prototype._addCallbacks=function(t,e,n,i,r){var a=this._length();if(a>=65531&&(a=0,this._setLength(0)),0===a)this._promise0=n,this._receiver0=i,"function"===typeof t&&(this._fulfillmentHandler0=null===r?t:f.domainBind(r,t)),"function"===typeof e&&(this._rejectionHandler0=null===r?e:f.domainBind(r,e));else{var o=4*a-4;this[o+2]=n,this[o+3]=i,"function"===typeof t&&(this[o+0]=null===r?t:f.domainBind(r,t)),"function"===typeof e&&(this[o+1]=null===r?e:f.domainBind(r,e))}return this._setLength(a+1),a},A.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},A.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var n=_(t,this);if(!(n instanceof A))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var r=i._bitField;if(0===(50397184&r)){var a=this._length();a>0&&i._migrateCallback0(this);for(var o=1;o<a;++o)i._migrateCallbackAt(this,o);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!==(33554432&r))this._fulfill(i._value());else if(0!==(16777216&r))this._reject(i._reason());else{var s=new v("late cancellation observer");i._attachExtraTrace(s),this._reject(s)}}else this._reject(l())}},A.prototype._rejectCallback=function(t,e,n){var i=f.ensureErrorObject(t),r=i===t;if(!r&&!n&&w.warnings()){var a="a promise was rejected with a non-error: "+f.classString(t);this._warn(a,!0)}this._attachExtraTrace(i,!!e&&r),this._reject(t)},A.prototype._resolveFromExecutor=function(t){if(t!==g){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,i=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==i&&e._rejectCallback(i,!0)}},A.prototype._settlePromiseFromHandler=function(t,e,n,i){var r=i._bitField;if(0===(65536&r)){var a;i._pushContext(),e===d?n&&"number"===typeof n.length?a=S(t).apply(this._boundValue(),n):(a=E).e=new h("cannot .spread() a non-array: "+f.classString(n)):a=S(t).call(e,n);var o=i._popContext();0===(65536&(r=i._bitField))&&(a===y?i._reject(n):a===E?i._rejectCallback(a.e,!1):(w.checkForgottenReturns(a,o,"",i,this),i._resolveCallback(a)))}},A.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},A.prototype._followee=function(){return this._rejectionHandler0},A.prototype._setFollowee=function(t){this._rejectionHandler0=t},A.prototype._settlePromise=function(t,e,n,i){var r=t instanceof A,a=this._bitField,o=0!==(134217728&a);0!==(65536&a)?(r&&t._invokeInternalOnCancel(),n instanceof T&&n.isFinallyHandler()?(n.cancelPromise=t,S(e).call(n,i)===E&&t._reject(E.e)):e===s?t._fulfill(s.call(n)):n instanceof u?n._promiseCancelled(t):r||t instanceof b?t._cancel():n.cancel()):"function"===typeof e?r?(o&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,i,t)):e.call(n,i,t):n instanceof u?n._isResolved()||(0!==(33554432&a)?n._promiseFulfilled(i,t):n._promiseRejected(i,t)):r&&(o&&t._setAsyncGuaranteed(),0!==(33554432&a)?t._fulfill(i):t._reject(i))},A.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,i=t.receiver,r=t.value;"function"===typeof e?n instanceof A?this._settlePromiseFromHandler(e,i,r,n):e.call(i,r,n):n instanceof A&&n._reject(r)},A.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},A.prototype._settlePromise0=function(t,e,n){var i=this._promise0,r=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(i,t,r,e)},A.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},A.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():m.settlePromises(this),this._dereferenceTrace())}},A.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return m.fatalError(t,f.isNode);(65535&e)>0?m.settlePromises(this):this._ensurePossibleRejectionHandled()}},A.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var i=this._fulfillmentHandlerAt(n),r=this._promiseAt(n),a=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,a,e)}},A.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var i=this._rejectionHandlerAt(n),r=this._promiseAt(n),a=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,a,e)}},A.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var i=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,i,t),this._fulfillPromises(e,i)}this._setLength(0)}this._clearCancellationData()},A.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},A.defer=A.pending=function(){return w.deprecated("Promise.defer","new Promise"),{promise:new A(g),resolve:M,reject:C}},f.notEnumerableProp(A,"_makeSelfResolutionError",l),O("./method")(A,g,_,o,w),O("./bind")(A,g,_,w),O("./cancel")(A,b,o,w),O("./direct_resolve")(A),O("./synchronous_inspection")(A),O("./join")(A,b,_,g,m,p),(A.Promise=A).version="3.5.4",O("./map.js")(A,b,o,_,g,w),O("./call_get.js")(A),O("./using.js")(A,o,_,r,g,w),O("./timers.js")(A,g,w),O("./generators.js")(A,o,g,_,u,w),O("./nodeify.js")(A),O("./promisify.js")(A,g),O("./props.js")(A,b,_,o),O("./race.js")(A,g,_,o),O("./reduce.js")(A,b,o,_,g,w),O("./settle.js")(A,b,w),O("./some.js")(A,b,o),O("./filter.js")(A,g),O("./each.js")(A,g),O("./any.js")(A),f.toFastProperties(A),f.toFastProperties(A.prototype),k({a:1}),k({b:2}),k({c:3}),k(1),k(function(){}),k(void 0),k(!1),k(new A(g)),w.setBounds(e.firstLineError,f.lastLineError),A}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(i,t,e){"use strict";t.exports=function(s,n,l,o,t){var u=i("./util");u.isArray;function e(t){var e=this._promise=new s(n);t instanceof s&&e._propagateFrom(t,3),e._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return u.inherits(e,t),e.prototype.length=function(){return this._length},e.prototype.promise=function(){return this._promise},e.prototype._init=function t(e,n){var i=l(this._values,this._promise);if(i instanceof s){var r=(i=i._target())._bitField;if(this._values=i,0===(50397184&r))return this._promise._setAsyncGuaranteed(),i._then(t,this._reject,void 0,this,n);if(0===(33554432&r))return 0!==(16777216&r)?this._reject(i._reason()):this._cancel();i=i._value()}if(null!==(i=u.asArray(i)))0!==i.length?this._iterate(i):-5===n?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(n));else{var a=o("expecting an array or an iterable object but got "+u.classString(i)).reason();this._promise._rejectCallback(a,!1)}},e.prototype._iterate=function(t){var e=this.getActualLength(t.length);this._length=e,this._values=this.shouldCopyValues()?new Array(e):this._values;for(var n=this._promise,i=!1,r=null,a=0;a<e;++a){var o=l(t[a],n);r=o instanceof s?(o=o._target())._bitField:null,i?null!==r&&o.suppressUnhandledRejections():null!==r?0===(50397184&r)?(o._proxy(this,a),this._values[a]=o):i=0!==(33554432&r)?this._promiseFulfilled(o._value(),a):0!==(16777216&r)?this._promiseRejected(o._reason(),a):this._promiseCancelled(a):i=this._promiseFulfilled(o,a)}i||n._setAsyncGuaranteed()},e.prototype._isResolved=function(){return null===this._values},e.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},e.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},e.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},e.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},e.prototype._promiseCancelled=function(){return this._cancel(),!0},e.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},e.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof s)t.cancel();else for(var e=0;e<t.length;++e)t[e]instanceof s&&t[e].cancel()}},e.prototype.shouldCopyValues=function(){return!0},e.prototype.getActualLength=function(t){return t},e}},{"./util":36}],24:[function(i,t,e){"use strict";t.exports=function(u,c){var p={},f=i("./util"),h=i("./nodeback"),d=f.withAppended,m=f.maybeWrapAsError,t=f.canEvaluate,v=i("./errors").TypeError,g={__isPromisified__:!0},e=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),y=function(t){return f.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function o(t){return!e.test(t)}function _(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function b(t,e,n,i){for(var r,a,o,s,l=f.inheritedDataKeys(t),u=[],c=0;c<l.length;++c){var h=l[c],d=t[h],p=i===y||y(h,d,t);"function"!==typeof d||_(d)||(r=t,a=h,o=e,void 0,(s=f.getDataPropertyOrDefault(r,a+o,g))&&_(s))||!i(h,d,t,p)||u.push(h,d)}return function(t,e,n){for(var i=0;i<t.length;i+=2){var r=t[i];if(n.test(r))for(var a=r.replace(n,""),o=0;o<t.length;o+=2)if(t[o]===a)throw new v("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(u,e,n),u}var n,w=function(t){return t.replace(/([$])/,"\\$")};var T=t?n:function(r,a,t,e,n,o){var s=function(){return this}(),l=r;function i(){var t=a;a===p&&(t=this);var e=new u(c);e._captureStackTrace();var n="string"===typeof l&&this!==s?this[l]:r,i=h(e,o);try{n.apply(t,d(arguments,i))}catch(t){e._rejectCallback(m(t),!0,!0)}return e._isFateSealed()||e._setAsyncGuaranteed(),e}return"string"===typeof l&&(r=e),f.notEnumerableProp(i,"__isPromisified__",!0),i};function x(t,e,n,i,r){for(var a=new RegExp(w(e)+"$"),o=b(t,e,a,n),s=0,l=o.length;s<l;s+=2){var u=o[s],c=o[s+1],h=u+e;if(i===T)t[h]=T(u,p,u,c,e,r);else{var d=i(c,function(){return T(u,p,u,c,e,r)});f.notEnumerableProp(d,"__isPromisified__",!0),t[h]=d}}return f.toFastProperties(t),t}u.promisify=function(t,e){if("function"!==typeof t)throw new v("expecting a function but got "+f.classString(t));if(_(t))return t;var n,i=void 0===(e=Object(e)).context?p:e.context,r=!!e.multiArgs,a=T(n=t,i,void 0,n,null,r);return f.copyDescriptors(t,a,o),a},u.promisifyAll=function(t,e){if("function"!==typeof t&&"object"!==typeof t)throw new v("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,i=e.suffix;"string"!==typeof i&&(i="Async");var r=e.filter;"function"!==typeof r&&(r=y);var a=e.promisifier;if("function"!==typeof a&&(a=T),!f.isIdentifier(i))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var o=f.inheritedDataKeys(t),s=0;s<o.length;++s){var l=t[o[s]];"constructor"!==o[s]&&f.isClass(l)&&(x(l.prototype,i,r,a,n),x(l,i,r,a,n))}return x(t,i,r,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(h,t,e){"use strict";t.exports=function(i,t,r,a){var s,e=h("./util"),o=e.isObject,l=h("./es5");"function"===typeof Map&&(s=Map);var u=function(){var n=0,i=0;function r(t,e){this[n]=t,this[n+i]=e,n++}return function(t){i=t.size,n=0;var e=new Array(2*t.size);return t.forEach(r,e),e}}();function c(t){var e,n=!1;if(void 0!==s&&t instanceof s)e=u(t),n=!0;else{var i=l.keys(t),r=i.length;e=new Array(2*r);for(var a=0;a<r;++a){var o=i[a];e[a]=t[o],e[a+r]=o}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function n(t){var e,n=r(t);return o(n)?(e=n instanceof i?n._then(i.props,void 0,void 0,void 0,void 0):new c(n).promise(),n instanceof i&&e._propagateFrom(n,2),e):a("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}e.inherits(c,t),c.prototype._init=function(){},c.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new s,n=t.length/2|0,i=0;i<n;++i){var r=t[n+i],a=t[i];e.set(r,a)}return e}(this._values);else{n={};for(var i=this.length(),r=0,a=this.length();r<a;++r)n[this._values[r+i]]=this._values[r]}return this._resolve(n),!0}return!1},c.prototype.shouldCopyValues=function(){return!1},c.prototype.getActualLength=function(t){return t>>1},i.prototype.props=function(){return n(this)},i.props=function(t){return n(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},i.prototype.push=function(t,e,n){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var r=this._front+i-3;this._checkCapacity(i);var a=this._capacity-1;this[r+0&a]=t,this[r+1&a]=e,this[r+2&a]=n,this._length=i},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,i,r){for(var a=0;a<r;++a)n[a+i]=t[a+e],t[a+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(u,c,h,d){var p=t("./util"),f=function(e){return e.then(function(t){return n(t,e)})};function n(t,e){var n=h(t);if(n instanceof u)return f(n);if(null===(t=p.asArray(t)))return d("expecting an array or an iterable object but got "+p.classString(t));var i=new u(c);void 0!==e&&i._propagateFrom(e,3);for(var r=i._fulfill,a=i._reject,o=0,s=t.length;o<s;++o){var l=t[o];(void 0!==l||o in t)&&u.cast(l)._then(r,a,void 0,i,null)}return i}u.race=function(t){return n(t,void 0)},u.prototype.race=function(){return n(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(o,t,r,n,a,s){var l=o._getDomain,u=e("./util"),c=u.tryCatch;function h(t,e,n,i){this.constructor$(t);var r=l();this._fn=null===r?e:u.domainBind(r,e),void 0!==n&&(n=o.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=i===a?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function d(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function p(t,e,n,i){return"function"!==typeof e?r("expecting a function but got "+u.classString(e)):new h(t,e,n,i).promise()}function f(t){this.accum=t,this.array._gotAccum(t);var e=n(this.value,this.array._promise);return e instanceof o?(this.array._currentCancellable=e)._then(i,void 0,void 0,this,void 0):i.call(this,e)}function i(t){var e,n=this.array,i=n._promise,r=c(n._fn);i._pushContext(),(e=void 0!==n._eachValues?r.call(i._boundValue(),t,this.index,this.length):r.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof o&&(n._currentCancellable=e);var a=i._popContext();return s.checkForgottenReturns(e,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",i),e}u.inherits(h,t),h.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==a&&this._eachValues.push(t)},h.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},h.prototype._init=function(){},h.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},h.prototype.shouldCopyValues=function(){return!1},h.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},h.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof o&&this._currentCancellable.cancel(),this._initialValue instanceof o&&this._initialValue.cancel())},h.prototype._iterate=function(t){var e,n,i=(this._values=t).length;if(n=void 0!==this._initialValue?(e=this._initialValue,0):(e=o.resolve(t[0]),1),!(this._currentCancellable=e).isRejected())for(;n<i;++n){var r={accum:null,value:t[n],index:n,length:i,array:this};e=e._then(f,void 0,void 0,r,void 0)}void 0!==this._eachValues&&(e=e._then(this._eachComplete,void 0,void 0,this,void 0)),e._then(d,d,void 0,e,this)},o.prototype.reduce=function(t,e){return p(this,t,e,null)},o.reduce=function(t,e,n,i){return p(t,e,n,i)}}},{"./util":36}],29:[function(t,e,n){"use strict";var i,r=t("./util"),a=r.getNativePromise();if(r.isNode&&"undefined"===typeof MutationObserver){var o=H.setImmediate,s=Q.nextTick;i=r.isRecentNode?function(t){o.call(H,t)}:function(t){s.call(Q,t)}}else if("function"===typeof a&&"function"===typeof a.resolve){var l=a.resolve();i=function(t){l.then(t)}}else i="undefined"===typeof MutationObserver||"undefined"!==typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!==typeof u?function(t){u(t)}:"undefined"!==typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var n=document.createElement("div"),i={attributes:!0},r=!1,a=document.createElement("div");new MutationObserver(function(){n.classList.toggle("foo"),r=!1}).observe(a,i);return function(t){var e=new MutationObserver(function(){e.disconnect(),t()});e.observe(n,i),r||(r=!0,a.classList.toggle("foo"))}}();e.exports=i},{"./util":36}],30:[function(a,t,e){"use strict";t.exports=function(t,e,n){var i=t.PromiseInspection;function r(t){this.constructor$(t)}a("./util").inherits(r,e),r.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},r.prototype._promiseFulfilled=function(t,e){var n=new i;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},r.prototype._promiseRejected=function(t,e){var n=new i;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},t.settle=function(t){return n.deprecated(".settle()",".reflect()"),new r(t).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(c,t,e){"use strict";t.exports=function(t,e,r){var n=c("./util"),i=c("./errors").RangeError,a=c("./errors").AggregateError,o=n.isArray,s={};function l(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new l(t),i=n.promise();return n.setHowMany(e),n.init(),i}n.inherits(l,e),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=o(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(t){this._howMany=t},l.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},l.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},l.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(s),this._checkOutcome())},l.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new a,e=this.length();e<this._values.length;++e)this._values[e]!==s&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(t){this._values.push(t)},l.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new i(e)},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return u(t,e)},t.prototype.some=function(t){return u(this,t)},t._SomePromiseArray=l}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},a=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},o=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return o.call(this._target())},t.prototype.isRejected=function(){return a.call(this._target())},t.prototype.isFulfilled=function(){return r.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),i.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(s,l){var u=t("./util"),c=u.errorObj,r=u.isObject;var a={}.hasOwnProperty;return function(t,e){if(r(t)){if(t instanceof s)return t;var n=function(t){try{return t.then}catch(t){return c.e=t,c}}(t);if(n===c){e&&e._pushContext();var i=s.reject(n.e);return e&&e._popContext(),i}if("function"===typeof n)return function(t){try{return a.call(t,"_promise0")}catch(t){return!1}}(t)?(i=new s(l),t._then(i._fulfill,i._reject,void 0,i,null),i):function(t,e,n){var i=new s(l),r=i;n&&n._pushContext(),i._captureStackTrace(),n&&n._popContext();var a=!0,o=u.tryCatch(e).call(t,function(t){i&&(i._resolveCallback(t),i=null)},function(t){i&&(i._rejectCallback(t,a,!0),i=null)});return a=!1,i&&o===c&&(i._rejectCallback(o.e,!0,!0),i=null),r}(t,n,e)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(r,a,s){var l=t("./util"),u=r.TimeoutError;function c(t){this.handle=t}c.prototype._resultCancelled=function(){clearTimeout(this.handle)};var o=function(t){return e(+this).thenReturn(t)},e=r.delay=function(t,e){var n,i;return void 0!==e?(n=r.resolve(e)._then(o,null,null,t,void 0),s.cancellation()&&e instanceof r&&n._setOnCancel(e)):(n=new r(a),i=setTimeout(function(){n._fulfill()},+t),s.cancellation()&&n._setOnCancel(new c(i)),n._captureStackTrace()),n._setAsyncGuaranteed(),n};r.prototype.delay=function(t){return e(t,this)};function n(t){return clearTimeout(this.handle),t}function i(t){throw clearTimeout(this.handle),t}r.prototype.timeout=function(t,r){var a,o;t=+t;var e=new c(setTimeout(function(){var t,e,n,i;a.isPending()&&(t=a,n=o,i="string"!==typeof(e=r)?e instanceof Error?e:new u("operation timed out"):new u(e),l.markAsOriginatingFromRejection(i),t._attachExtraTrace(i),t._reject(i),null!=n&&n.cancel())},t));return s.cancellation()?(o=this.then(),(a=o._then(n,i,void 0,e,void 0))._setOnCancel(e)):a=this._then(n,i,void 0,e,void 0),a}}},{"./util":36}],35:[function(o,t,e){"use strict";t.exports=function(d,p,f,e,t,m){var v=o("./util"),n=o("./errors").TypeError,i=o("./util").inherits,g=v.errorObj,y=v.tryCatch,r={};function u(t){setTimeout(function(){throw t},0)}function _(r,a){var o=0,s=r.length,l=new d(t);return function t(){if(o>=s)return l._fulfill();var e,n,i=(e=r[o++],(n=f(e))!==e&&"function"===typeof e._isDisposable&&"function"===typeof e._getDisposer&&e._isDisposable()&&n._setDisposable(e._getDisposer()),n);if(i instanceof d&&i._isDisposable()){try{i=f(i._getDisposer().tryDispose(a),r.promise)}catch(t){return u(t)}if(i instanceof d)return i._then(t,u,null,null,null)}t()}(),l}function b(t,e,n){this._data=t,this._promise=e,this._context=n}function a(t,e,n){this.constructor$(t,e,n)}function w(t){return b.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function T(t){this.length=t,this.promise=null,this[t-1]=null}b.prototype.data=function(){return this._data},b.prototype.promise=function(){return this._promise},b.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():r},b.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var i=e!==r?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,i},b.isDisposer=function(t){return null!=t&&"function"===typeof t.resource&&"function"===typeof t.tryDispose},i(a,b),a.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},T.prototype._resultCancelled=function(){for(var t=this.length,e=0;e<t;++e){var n=this[e];n instanceof d&&n.cancel()}},d.using=function(){var t=arguments.length;if(t<2)return p("you must pass at least 2 arguments to Promise.using");var e,a=arguments[t-1];if("function"!==typeof a)return p("expecting a function but got "+v.classString(a));var o=!0;2===t&&Array.isArray(arguments[0])?(t=(e=arguments[0]).length,o=!1):(e=arguments,t--);for(var n=new T(t),i=0;i<t;++i){var r=e[i];if(b.isDisposer(r)){var s=r;(r=r.promise())._setDisposable(s)}else{var l=f(r);l instanceof d&&(r=l._then(w,null,null,{resources:n,index:i},void 0))}n[i]=r}var u=new Array(n.length);for(i=0;i<u.length;++i)u[i]=d.resolve(n[i]).reflect();var c=d.all(u).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return g.e=n.error(),g;if(!n.isFulfilled())return void c.cancel();t[e]=n.value()}h._pushContext(),a=y(a);var i=o?a.apply(void 0,t):a(t),r=h._popContext();return m.checkForgottenReturns(i,r,"Promise.using",h),i}),h=c.lastly(function(){var t=new d.PromiseInspection(c);return _(n,t)});return(n.promise=h)._setOnCancel(n),h},d.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},d.prototype._isDisposable=function(){return(131072&this._bitField)>0},d.prototype._getDisposer=function(){return this._disposer},d.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},d.prototype.disposer=function(t){if("function"===typeof t)return new a(t,this,e());throw new n}}},{"./errors":12,"./util":36}],36:[function(t,e,n){"use strict";var u=t("./es5"),i="undefined"==typeof navigator,r={e:{}},a,o="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof H?H:void 0!==this?this:null;function s(){try{var t=a;return a=null,t.apply(this,arguments)}catch(t){return r.e=t,r}}function l(t){return a=t,s}var c=function(e,n){var i={}.hasOwnProperty;function t(){for(var t in this.constructor=e,(this.constructor$=n).prototype)i.call(n.prototype,t)&&"$"!==t.charAt(t.length-1)&&(this[t+"$"]=n.prototype[t])}return t.prototype=n.prototype,e.prototype=new t,e.prototype};function h(t){return null==t||!0===t||!1===t||"string"===typeof t||"number"===typeof t}function d(t){return"function"===typeof t||"object"===typeof t&&null!==t}function p(t){return h(t)?new Error(S(t)):t}function f(t,e){var n,i=t.length,r=new Array(i+1);for(n=0;n<i;++n)r[n]=t[n];return r[n]=e,r}function m(t,e,n){if(!u.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:n:void 0}function v(t,e,n){if(h(t))return t;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return u.defineProperty(t,e,i),t}function g(t){throw t}var y=function(){var r=[Array.prototype,Object.prototype,Function.prototype],s=function(t){for(var e=0;e<r.length;++e)if(r[e]===t)return!0;return!1};if(u.isES5){var l=Object.getOwnPropertyNames;return function(t){for(var e=[],n=Object.create(null);null!=t&&!s(t);){var i;try{i=l(t)}catch(t){return e}for(var r=0;r<i.length;++r){var a=i[r];if(!n[a]){n[a]=!0;var o=Object.getOwnPropertyDescriptor(t,a);null!=o&&null==o.get&&null==o.set&&e.push(a)}}t=u.getPrototypeOf(t)}return e}}var a={}.hasOwnProperty;return function(t){if(s(t))return[];var e=[];t:for(var n in t)if(a.call(t,n))e.push(n);else{for(var i=0;i<r.length;++i)if(a.call(r[i],n))continue t;e.push(n)}return e}}(),_=/this\s*\.\s*\S+\s*=/;function b(t){try{if("function"===typeof t){var e=u.names(t.prototype),n=u.isES5&&e.length>1,i=e.length>0&&!(1===e.length&&"constructor"===e[0]),r=_.test(t+"")&&u.names(t).length>0;if(n||i||r)return!0}return!1}catch(t){return!1}}function w(t){function e(){}e.prototype=t;var n=new e;function i(){return typeof n.foo}return i(),i(),t}var T=/^[a-z$_][a-z$_0-9]*$/i;function x(t){return T.test(t)}function E(t,e,n){for(var i=new Array(t),r=0;r<t;++r)i[r]=e+r+n;return i}function S(t){try{return t+""}catch(t){return"[no string representation]"}}function A(t){return t instanceof Error||null!==t&&"object"===typeof t&&"string"===typeof t.message&&"string"===typeof t.name}function M(t){try{v(t,"isOperational",!0)}catch(t){}}function C(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function k(t){return A(t)&&u.propertyIsWritable(t,"stack")}var O="stack"in new Error?function(t){return k(t)?t:new Error(S(t))}:function(t){if(k(t))return t;try{throw new Error(S(t))}catch(t){return t}};function L(t){return{}.toString.call(t)}function R(t,e,n){for(var i=u.names(t),r=0;r<i.length;++r){var a=i[r];if(n(a))try{u.defineProperty(e,a,u.getDescriptor(t,a))}catch(t){}}}var P=function(t){return u.isArray(t)?t:null};if("undefined"!==typeof Symbol&&Symbol.iterator){var I="function"===typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],i=t[Symbol.iterator]();!(e=i.next()).done;)n.push(e.value);return n};P=function(t){return u.isArray(t)?t:null!=t&&"function"===typeof t[Symbol.iterator]?I(t):null}}var D="undefined"!==typeof Q&&"[object process]"===L(Q).toLowerCase(),j="undefined"!==typeof Q&&"undefined"!==typeof Q.env;function N(t){return j?Q.env[t]:void 0}function U(){if("function"===typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function B(t,e){return t.bind(e)}var F={isClass:b,isIdentifier:x,inheritedDataKeys:y,getDataPropertyOrDefault:m,thrower:g,isArray:u.isArray,asArray:P,notEnumerableProp:v,isPrimitive:h,isObject:d,isError:A,canEvaluate:i,errorObj:r,tryCatch:l,inherits:c,withAppended:f,maybeWrapAsError:p,toFastProperties:w,filledRange:E,toString:S,canAttachTrace:k,ensureErrorObject:O,originatesFromRejection:C,markAsOriginatingFromRejection:M,classString:L,copyDescriptors:R,hasDevTools:"undefined"!==typeof chrome&&chrome&&"function"===typeof chrome.loadTimes,isNode:D,hasEnvVariables:j,env:N,global:o,getNativePromise:U,domainBind:B},V;F.isRecentNode=F.isNode&&(Q.versions&&Q.versions.node?V=Q.versions.node.split(".").map(Number):Q.version&&(V=Q.version.split(".").map(Number)),0===V[0]&&V[1]>10||V[0]>0),F.isNode&&F.toFastProperties(Q);try{throw new Error}catch(t){F.lastLineError=t}e.exports=F},{"./es5":13}]},{},[4])(4)},e.exports=t(),"undefined"!==typeof window&&null!==window?window.P=window.Promise:"undefined"!==typeof self&&null!==self&&(self.P=self.Promise)}).call(t,n(13),n(2),n(28).setImmediate)},function(t,e,n){(function(){t.exports={client:n(16),tracker:n(67),parser:n(17),util:n(6)}}).call(void 0)},function(t,e,n){var l,u,c,h,s,d,b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w="undefined",T="object",p="Shockwave Flash",f="application/x-shockwave-flash",m="SWFObjectExprInst",i="onreadystatechange",v=window,g=document,y=navigator,_=!1,r=[],x=[],E=[],o=[],a=!1,S=!1,A=!0,M=!1,C=function(){var t=b(g.getElementById)!==w&&b(g.getElementsByTagName)!==w&&b(g.createElement)!==w,e=y.userAgent.toLowerCase(),n=y.platform.toLowerCase(),i=/win/.test(n||e),r=/mac/.test(n||e),a=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o="Microsoft Internet Explorer"===y.appName,s=[0,0,0],l=null;if(b(y.plugins)!==w&&b(y.plugins[p])===T)(l=y.plugins[p].description)&&b(y.mimeTypes)!==w&&y.mimeTypes[f]&&y.mimeTypes[f].enabledPlugin&&(o=!(_=!0),l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=G(l.replace(/^(.*)\..*$/,"$1")),s[1]=G(l.replace(/^.*\.(.*)\s.*$/,"$1")),s[2]=/[a-zA-Z]/.test(l)?G(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(b(v.ActiveXObject)!==w)try{var u=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");u&&(l=u.GetVariable("$version"))&&(o=!0,s=[G((l=l.split(" ")[1].split(","))[0]),G(l[1]),G(l[2])])}catch(t){}return{w3:t,pv:s,wk:a,ie:o,win:i,mac:r}}();C.w3&&((b(g.readyState)!==w&&("complete"===g.readyState||"interactive"===g.readyState)||b(g.readyState)===w&&(g.getElementsByTagName("body")[0]||g.body))&&k(),a||(b(g.addEventListener)!==w&&g.addEventListener("DOMContentLoaded",k,!1),C.ie&&(g.attachEvent(i,function t(){"complete"===g.readyState&&(g.detachEvent(i,t),k())}),v==top&&function e(){if(!a){try{g.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}k()}}()),C.wk&&function t(){a||(/loaded|complete/.test(g.readyState)?k():setTimeout(t,0))}()));function k(){if(!a&&document.getElementsByTagName("body")[0]){try{var t,e=z("span");e.style.display="none",(t=g.getElementsByTagName("body")[0].appendChild(e)).parentNode.removeChild(t),e=t=null}catch(t){return}a=!0;for(var n=r.length,i=0;i<n;i++)r[i]()}}function O(t){a?t():r[r.length]=t}function L(){var t=x.length;if(t>0)for(var e=0;e<t;e++){var n=x[e].id,i=x[e].callbackFn,r={success:!1,id:n};if(C.pv[0]>0){var a=H(n);if(a)if(!W(x[e].swfVersion)||C.wk&&C.wk<312)if(x[e].expressInstall&&P()){var o={};o.data=x[e].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var s={},l=a.getElementsByTagName("param"),u=l.length,c=0;c<u;c++)"movie"!==l[c].getAttribute("name").toLowerCase()&&(s[l[c].getAttribute("name")]=l[c].getAttribute("value"));I(o,s,n,i)}else D(a),i&&i(r);else X(n,!0),i&&(r.success=!0,r.ref=R(n),r.id=n,i(r))}else if(X(n,!0),i){var h=R(n);h&&b(h.SetVariable)!==w&&(r.success=!0,r.ref=h,r.id=h.id),i(r)}}}function R(t){var e=null,n=H(t);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(e=b(n.SetVariable)!==w?n:n.getElementsByTagName(T)[0]||n),e}function P(){return!S&&W("6.0.65")&&(C.win||C.mac)&&!(C.wk&&C.wk<312)}function I(t,e,n,i){var r=H(n);if(n=V(n),c=i||null,h={success:!(S=!0),id:n},r){u="OBJECT"===r.nodeName.toUpperCase()?(l=j(r),null):(l=r,n),t.id=m,(b(t.width)===w||!/%$/.test(t.width)&&G(t.width)<310)&&(t.width="310"),(b(t.height)===w||!/%$/.test(t.height)&&G(t.height)<137)&&(t.height="137");var a=C.ie?"ActiveX":"PlugIn",o="MMredirectURL="+encodeURIComponent(v.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+a+"&MMdoctitle="+encodeURIComponent(g.title.slice(0,47)+" - Flash Player Installation");if(b(e.flashvars)!==w?e.flashvars+="&"+o:e.flashvars=o,C.ie&&4!=r.readyState){var s=z("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",B(r)}N(t,e,n)}}function D(t){if(C.ie&&4!=t.readyState){t.style.display="none";var e=z("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(j(t),e),B(t)}else t.parentNode.replaceChild(j(t),t)}function j(t){var e=z("div");if(C.win&&C.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(T)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1==i[a].nodeType&&"PARAM"===i[a].nodeName||8==i[a].nodeType||e.appendChild(i[a].cloneNode(!0))}}return e}function N(t,e,n){var i,r,a,o,s=H(n);if(n=V(n),C.wk&&C.wk<312)return i;if(s){var l,u,c,h=C.ie?z("div"):z(T);for(c in b(t.id)===w&&(t.id=n),e)e.hasOwnProperty(c)&&"movie"!==c.toLowerCase()&&U(h,c,e[c]);for(l in C.ie&&(r=t.data,a=h.innerHTML,(o=z("div")).innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+r+"'>"+a+"</object>",h=o.firstChild),t)t.hasOwnProperty(l)&&("styleclass"===(u=l.toLowerCase())?h.setAttribute("class",t[l]):"classid"!==u&&"data"!==u&&h.setAttribute(l,t[l]));C.ie?E[E.length]=t.id:(h.setAttribute("type",f),h.setAttribute("data",t.data)),s.parentNode.replaceChild(h,s),i=h}return i}function U(t,e,n){var i=z("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function B(t){var n=H(t);n&&"OBJECT"===n.nodeName.toUpperCase()&&(C.ie?(n.style.display="none",function t(){if(4==n.readyState){for(var e in n)"function"===typeof n[e]&&(n[e]=null);n.parentNode.removeChild(n)}else setTimeout(t,10)}()):n.parentNode.removeChild(n))}function F(t){return t&&t.nodeType&&1===t.nodeType}function V(t){return F(t)?t.id:t}function H(t){if(F(t))return t;var e=null;try{e=g.getElementById(t)}catch(t){}return e}function z(t){return g.createElement(t)}function G(t){return parseInt(t,10)}function W(t){t+="";var e=C.pv,n=t.split(".");return n[0]=G(n[0]),n[1]=G(n[1])||0,n[2]=G(n[2])||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function q(t,e,n,i){var r=g.getElementsByTagName("head")[0];if(r){var a="string"===typeof n?n:"screen";if(i&&(d=s=null),!s||d!=a){var o=z("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),s=r.appendChild(o),C.ie&&b(g.styleSheets)!==w&&g.styleSheets.length>0&&(s=g.styleSheets[g.styleSheets.length-1]),d=a}s&&(b(s.addRule)!==w?s.addRule(t,e):b(g.createTextNode)!==w&&s.appendChild(g.createTextNode(t+" {"+e+"}")))}}function X(t,e){if(A){var n=e?"visible":"hidden",i=H(t);a&&i?i.style.visibility=n:"string"===typeof t&&q("#"+t,"visibility:"+n)}}function Y(t){return null!==/[\\\"<>\.;]/.exec(t)&&("undefined"===typeof encodeURIComponent?"undefined":b(encodeURIComponent))!==w?encodeURIComponent(t):t}r[0]=function(){_?function(){var n=g.getElementsByTagName("body")[0],i=z(T);i.setAttribute("style","visibility: hidden;"),i.setAttribute("type",f);var r=n.appendChild(i);if(r){var a=0;!function t(){if(b(r.GetVariable)!==w)try{var e=r.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),C.pv=[G(e[0]),G(e[1]),G(e[2])])}catch(t){C.pv=[8,0,0]}else if(a<10)return a++,void setTimeout(t,10);n.removeChild(i),r=null,L()}()}else L()}():L()};C.ie&&window.attachEvent("onunload",function(){for(var t=o.length,e=0;e<t;e++)o[e][0].detachEvent(o[e][1],o[e][2]);for(var n=E.length,i=0;i<n;i++)B(E[i]);for(var r in C)C[r]=null;for(var a in C=null,swfobject)swfobject[a]=null;swfobject=null});t.exports={registerObject:function(t,e,n,i){if(C.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,x[x.length]=r,X(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){if(C.w3)return R(t)},embedSWF:function(l,u,c,h,d,p,f,m,v,g){var y=V(u),_={success:!1,id:y};C.w3&&!(C.wk&&C.wk<312)&&l&&u&&c&&h&&d?(X(y,!1),O(function(){c+="",h+="";var t={};if(v&&("undefined"===typeof v?"undefined":b(v))===T)for(var e in v)t[e]=v[e];t.data=l,t.width=c,t.height=h;var n={};if(m&&("undefined"===typeof m?"undefined":b(m))===T)for(var i in m)n[i]=m[i];if(f&&("undefined"===typeof f?"undefined":b(f))===T)for(var r in f)if(f.hasOwnProperty(r)){var a=M?encodeURIComponent(r):r,o=M?encodeURIComponent(f[r]):f[r];b(n.flashvars)!==w?n.flashvars+="&"+a+"="+o:n.flashvars=a+"="+o}if(W(d)){var s=N(t,n,u);t.id==y&&X(y,!0),_.success=!0,_.ref=s,_.id=s.id}else{if(p&&P())return t.data=p,void I(t,n,u,g);X(y,!0)}g&&g(_)})):g&&g(_)},switchOffAutoHideShow:function(){A=!1},enableUriEncoding:function(t){M=("undefined"===typeof t?"undefined":b(t))===w||t},ua:C,getFlashPlayerVersion:function(){return{major:C.pv[0],minor:C.pv[1],release:C.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(t,e,n){return C.w3?N(t,e,n):void 0},showExpressInstall:function(t,e,n,i){C.w3&&P()&&I(t,e,n,i)},removeSWF:function(t){C.w3&&B(t)},createCSS:function(t,e,n,i){C.w3&&q(t,e,n,i)},addDomLoadEvent:O,addLoadEvent:function(t){if(b(v.addEventListener)!==w)v.addEventListener("load",t,!1);else if(b(g.addEventListener)!==w)g.addEventListener("load",t,!1);else if(b(v.attachEvent)!==w)i="onload",r=t,(n=v).attachEvent(i,r),o[o.length]=[n,i,r];else if("function"===typeof v.onload){var e=v.onload;v.onload=function(){e(),t()}}else v.onload=t;var n,i,r},getQueryParamValue:function(t){var e=g.location.search||g.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),!t)return Y(e);for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==t)return Y(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var t=H(m);t&&l&&(t.parentNode.replaceChild(l,t),u&&(X(u,!0),C.ie&&(l.style.display="block")),c&&c(h)),S=!1}},version:"2.3"}},function(e,t,n){(function(){var t;t=function(){function t(){}return t.track=function(t,e){var n,i,r,a,o,s;for(s=[],a=0,o=(i=this.resolveURLTemplates(t,e)).length;a<o;a++)n=i[a],"undefined"!==typeof window&&null!==window&&(r=new Image,s.push(r.src=n));return s},t.resolveURLTemplates=function(t,e){var n,i,r,a,o,s,l,u;n=[],null==e&&(e={}),"CACHEBUSTING"in e||(e.CACHEBUSTING=Math.round(1e10*Math.random())),e.random=e.CACHEBUSTING;for(i=0,a=t.length;i<a;i++)if(l=t[i]){for(r in e)u=e[r],o="["+r+"]",s="%%"+r+"%%",l=(l=l.replace(o,u)).replace(s,u);n.push(l)}return n},t.storage=function(){var n,e;try{e="undefined"!==typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(t){t,e=null}return(null==e||function(t){var e;try{if(e="__VASTUtil__",t.setItem(e,e),t.getItem(e)!==e)return!0}catch(t){return t,!0}return!1}(e))&&(n={},e={length:0,getItem:function(t){return n[t]},setItem:function(t,e){n[t]=e,this.length=Object.keys(n).length},removeItem:function(t){delete n[t],this.length=Object.keys(n).length},clear:function(){n={},this.length=0}}),e}(),t}(),e.exports=t}).call(void 0)},function(o,t,e){(function(){var n,t,e,i,r=function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=function(){this.trackingEvents={}},e=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.type="linear",this.duration=0,this.skipDelay=null,this.mediaFiles=[],this.videoClickThroughURLTemplate=null,this.videoClickTrackingURLTemplates=[],this.videoCustomClickURLTemplates=[],this.adParameters=null}return r(e,n),e}(),i=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.type="nonlinear",this.variations=[],this.videoClickTrackingURLTemplates=[]}return r(e,n),e}(),t=function(t){function e(){this.type="companion",this.variations=[],this.videoClickTrackingURLTemplates=[]}return r(e,n),e}(),o.exports={VASTCreativeLinear:e,VASTCreativeNonLinear:i,VASTCreativeCompanion:t}}).call(void 0)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.MultipleValuesRegistry=function(){function t(){r(this,t),this._registries={}}return i(t,[{key:"add",value:function(t,e){this._registries[t]||(this._registries[t]=[]),-1===this._registries[t].indexOf(e)&&this._registries[t].push(e)}},{key:"get",value:function(t){return this._registries[t]||[]}},{key:"filterKeys",value:function(t){return Object.keys(this._registries).filter(t)}},{key:"findByValue",value:function(e){var n=this;return Object.keys(this._registries).filter(function(t){return-1!==n._registries[t].indexOf(e)})}},{key:"remove",value:function(t,e){if(this._registries[t]){var n=this._registries[t].indexOf(e);if(!(n<0))return this._registries[t].splice(n,1)}}},{key:"removeByKey",value:function(t){var e=this._registries[t];return delete this._registries[t],e}},{key:"removeByValue",value:function(e){var n=this;return this.findByValue(e).map(function(t){return n.remove(t,e)})}},{key:"removeAll",value:function(){var t=this._registries;return this._registries={},t}},{key:"size",value:function(){return Object.keys(this._registries).length}}]),t}(),e.SingleValueRegistry=function(){function t(){r(this,t),this._registries={}}return i(t,[{key:"add",value:function(t,e){this._registries[t]=e}},{key:"get",value:function(t){return this._registries[t]}},{key:"filterKeys",value:function(t){return Object.keys(this._registries).filter(t)}},{key:"findByValue",value:function(e){var n=this;return Object.keys(this._registries).filter(function(t){return n._registries[t]===e})}},{key:"remove",value:function(t){var e=this._registries[t];return delete this._registries[t],e}},{key:"removeByValue",value:function(t){var e=this;return this.findByValue(t).map(function(t){return e.remove(t)})}},{key:"removeAll",value:function(){var t=this._registries;return this._registries={},t}},{key:"size",value:function(){return Object.keys(this._registries).length}}]),t}()},function(t,e,n){function i(i,r,a){r||(r=250);var o=void 0,s=void 0;return function(){var t=a||this,e=+new Date,n=arguments;o&&e<o+r?(clearTimeout(s),s=setTimeout(function(){o=e,i.apply(t,n)},r)):(o=e,i.apply(t,n))}}Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=i,e.default={throttle:i}},function(e,t,n){(function(x){n(0);(function(){var T,t;(T=(T=this)||{}).videojs=n(0),t=function(p){"use strict";p=p&&p.hasOwnProperty("default")?p.default:p;var t="undefined"!==typeof T?T:"undefined"!==typeof x?x:"undefined"!==typeof self?self:{},c="undefined"!==typeof T?T:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},o=function(t,e){e.isImmediatePropagationStopped=function(){return!0},e.cancelBubble=!0,e.isPropagationStopped=function(){return!0}},s=function(t,e,n){o(0,n),t.trigger({type:e+n.type,state:t.ads.state,originalEvent:n})};function r(t){var e,n,i,r,a;"playing"===t.type?(a=t,(r=this).ads.isInAdMode()&&(r.ads.isContentResuming()?r.ads._contentEnding&&s(r,"content",a):r.ads._cancelledPlay?o(0,a):s(r,"ad",a))):"ended"===t.type?function(t,e){if(t.ads.isInAdMode()){if(t.ads.isContentResuming())return;s(t,"ad",e)}else s(t,"content",e)}(this,t):"loadstart"===t.type||"loadeddata"===t.type||"loadedmetadata"===t.type?function(t,e){if(!("loadstart"===e.type&&!t.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===e.type&&!t.ads._hasThereBeenALoadedData||"loadedmetadata"===e.type&&!t.ads._hasThereBeenALoadedMetaData))if(t.ads.isAdPlaying())s(t,"ad",e);else{if(t.currentSrc()!==t.ads.contentSrc)return;s(t,"content",e)}}(this,t):"play"===t.type?(n=t,i=(e=this).ads._cancelledPlay&&!e.ads.isInAdMode(),e.ads.isAdPlaying()?s(e,"ad",n):(e.ads.isContentResuming()||i)&&s(e,"content",n)):this.ads.isInAdMode()&&(this.ads.isContentResuming()?s(this,"content",t):s(this,"ad",t))}function a(t){var e=void 0;e=p.browser.IS_IOS&&t.ads.isLive(t)&&t.seekable().length>0?t.currentTime()-t.seekable().end(0):t.currentTime();var n=t.$(".vjs-tech"),i=t.remoteTextTracks?t.remoteTextTracks():[],r=t.textTracks?t.textTracks():[],a=[],o=[],s={ended:t.ended(),currentSrc:t.currentSrc(),src:t.tech_.src(),currentTime:e,type:t.currentType()};n&&(s.nativePoster=n.poster,s.style=n.getAttribute("style"));for(var l=0;l<i.length;l++){var u=i[l];a.push({track:u,mode:u.mode}),u.mode="disabled"}s.suppressedRemoteTracks=a;for(var c=0;c<r.length;c++){var h=r[c];o.push({track:h,mode:h.mode}),h.mode="disabled"}return s.suppressedTracks=o,s}function u(t){t.ads.cancelPlayTimeout||(t.ads.cancelPlayTimeout=c.setTimeout(function(){t.ads.cancelPlayTimeout=null,t.paused()||t.pause(),t.ads._cancelledPlay=!0},1))}var e,n={},i=(Object.freeze||Object)({default:n}),l=i&&n||i,h="undefined"!==typeof t?t:"undefined"!==typeof T?T:{};"undefined"!==typeof document?e=document:(e=h["__GLOBAL_DOCUMENT_CACHE@4"])||(e=h["__GLOBAL_DOCUMENT_CACHE@4"]=l);var d=e,f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(t,e){return e?encodeURIComponent(t):t},v=function(t,e,n){if(t&&t[n])for(var i=t[n],r=Object.keys(i),a=0;a<r.length;a++){e["{mediainfo."+n+"."+r[a]+"}"]=i[r[a]]}};var g={processMetadataTracks:function(e,n){for(var t=e.textTracks(),i=function(t){"metadata"===t.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(t),n(e,t))},r=0;r<t.length;r++)i(t[r]);t.addEventListener("addtrack",function(t){i(t.track)})},setMetadataTrackMode:function(t){},getSupportedAdCue:function(t,e){return e},isSupportedAdCue:function(t,e){return!0},getCueId:function(t,e){return e.id}};g.processAdTrack=function(t,e,n,i){t.ads.includedCues={};for(var r=0;r<e.length;r++){var a=e[r],o=this.getSupportedAdCue(t,a);if(!this.isSupportedAdCue(t,a))return void p.log.warn("Skipping as this is not a supported ad cue.",a);var s=this.getCueId(t,a),l=a.startTime;if(h=t,void 0!==(d=s)&&h.ads.includedCues[d])return void p.log("Skipping ad already seen with ID "+s);i&&i(t,o,s,l),n(t,o,s,l),u=t,void 0!==(c=s)&&""!==c&&(u.ads.includedCues[c]=!0)}var u,c,h,d};var y=p.getTech("Html5").Events,_=function(t){var e=t.$(".vjs-tech");e&&e.removeAttribute("poster")},b={timeout:5e3,prerollTimeout:100,postrollTimeout:100,debug:!1,stitchedAds:!1},w=function(t){var o=this,s=p.mergeOptions(b,t),e=y.concat(["firstplay","loadedalldata","playing"]);o.on(e,r),c.setTimeout(function(){o.ads._hasThereBeenALoadStartDuringPlayerLife||""===o.src()||p.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see https://github.com/videojs/videojs-contrib-ads#important-note-about-initialization")},5e3),o.on("ended",function(){o.hasClass("vjs-has-started")||o.addClass("vjs-has-started")}),o.on(["addurationchange","adcanplay"],function(){o.ads.snapshot&&o.currentSrc()===o.ads.snapshot.currentSrc||o.ads.isAdPlaying()&&o.play()}),o.on("nopreroll",function(){o.ads.nopreroll_=!0}),o.on("nopostroll",function(){o.ads.nopostroll_=!0}),o.on(["ads-ad-started","playing"],function(){o.removeClass("vjs-ad-loading")}),o.on("playing",function(){o.ads._cancelledPlay=!1}),o.one("loadstart",function(){o.ads._hasThereBeenALoadStartDuringPlayerLife=!0}),o.on("loadeddata",function(){o.ads._hasThereBeenALoadedData=!0}),o.on("loadedmetadata",function(){o.ads._hasThereBeenALoadedMetaData=!0}),o.ads={state:"content-set",disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,adType:null,VERSION:"__VERSION__",reset:function(){o.ads.disableNextSnapshotRestore=!1,o.ads._contentEnding=!1,o.ads._contentHasEnded=!1,o.ads.snapshot=null,o.ads.adType=null,o.ads._hasThereBeenALoadedData=!1,o.ads._hasThereBeenALoadedMetaData=!1,o.ads._cancelledPlay=!1},startLinearAdMode:function(){"preroll?"!==o.ads.state&&"content-playback"!==o.ads.state&&"postroll?"!==o.ads.state||(o.ads._inLinearAdMode=!0,o.trigger("adstart"))},endLinearAdMode:function(){"ad-playback"===o.ads.state&&(o.ads._inLinearAdMode=!1,o.trigger("adend"),o.removeClass("vjs-ad-loading"))},skipLinearAdMode:function(){"ad-playback"!==o.ads.state&&o.trigger("adskip")},stitchedAds:function(t){return void 0!==t&&(this._stitchedAds=!!t),this._stitchedAds},videoElementRecycled:function(){if(o.ads.shouldPlayContentBehindAd(o))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var t=o.tech_.src()!==this.snapshot.src,e=o.currentSrc()!==this.snapshot.currentSrc;return t||e},isLive:function(t){return t.duration()===1/0||"8"===p.browser.IOS_VERSION&&0===t.duration()},shouldPlayContentBehindAd:function(t){return!p.browser.IS_IOS&&!p.browser.IS_ANDROID&&t.duration()===1/0},isInAdMode:function(){return"ads-ready?"===o.ads.state||"preroll?"===o.ads.state||"ad-playback"===o.ads.state||"content-resuming"===o.ads.state},isContentResuming:function(){return"content-resuming"===o.ads.state},isAdPlaying:function(){return this._inLinearAdMode}},o.ads.stitchedAds(s.stitchedAds),o.ads.cueTextTracks=g,o.ads.adMacroReplacement=function(t,s,e){void 0===s&&(s=!1);var n={};for(var i in void 0!==e&&(n=e),n["{player.id}"]=this.options_["data-player"],n["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",n["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",n["{mediainfo.description}"]=this.mediainfo?this.mediainfo.description:"",n["{mediainfo.tags}"]=this.mediainfo?this.mediainfo.tags:"",n["{mediainfo.reference_id}"]=this.mediainfo?this.mediainfo.reference_id:"",n["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",n["{mediainfo.ad_keys}"]=this.mediainfo?this.mediainfo.ad_keys:"",n["{player.duration}"]=this.duration(),n["{timestamp}"]=(new Date).getTime(),n["{document.referrer}"]=d.referrer,n["{window.location.href}"]=c.location.href,n["{random}"]=Math.floor(1e12*Math.random()),v(this.mediainfo,n,"custom_fields"),v(this.mediainfo,n,"customFields"),n)t=t.split(i).join(m(n[i],s));return t=t.replace(/{pageVariable\.([^}]+)}/g,function(t,e){for(var n=void 0,i=c,r=e.split("."),a=0;a<r.length;a++)a===r.length-1?n=i[r[a]]:i=i[r[a]];var o="undefined"===typeof n?"undefined":f(n);return null===n?"null":void 0===n?(p.log.warn('Page variable "'+e+'" not found'),""):"string"!==o&&"number"!==o&&"boolean"!==o?(p.log.warn('Page variable "'+e+'" is not a supported type'),""):m(String(n),s)})}.bind(o),function(e){e.ads.contentSrc=e.currentSrc();var t=function(){if("ad-playback"!==e.ads.state){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t)}};e.on("loadstart",t),c.setTimeout(t,1)}(o),o.on("contentupdate",o.ads.reset);var l={"content-set":{events:{adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="ads-ready"},play:function(){this.state="ads-ready?",u(o),_(o)},adserror:function(){this.state="content-playback"},adskip:function(){this.state="content-playback"}}},"ads-ready":{events:{play:function(){this.state="preroll?",u(o)},adskip:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"preroll?":{enter:function(){o.ads.nopreroll_?(o.trigger("readyforpreroll"),c.setTimeout(function(){o.trigger("nopreroll")},1)):(o.addClass("vjs-ad-loading"),o.ads.adTimeoutTimeout=c.setTimeout(function(){o.trigger("adtimeout")},s.prerollTimeout),o.ads._hasThereBeenALoadStartDuringPlayerLife?o.trigger("readyforpreroll"):o.one("loadstart",function(){o.trigger("readyforpreroll")}))},leave:function(){c.clearTimeout(o.ads.adTimeoutTimeout)},events:{play:function(){u(o)},adstart:function(){this.state="ad-playback",o.ads.adType="preroll"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"},nopreroll:function(){this.state="content-playback"}}},"ads-ready?":{enter:function(){o.addClass("vjs-ad-loading"),o.ads.adTimeoutTimeout=c.setTimeout(function(){o.trigger("adtimeout")},s.timeout)},leave:function(){c.clearTimeout(o.ads.adTimeoutTimeout),o.removeClass("vjs-ad-loading")},events:{play:function(){u(o)},adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="preroll?"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"ad-playback":{enter:function(){o.ads.shouldPlayContentBehindAd(o)||(this.snapshot=a(o)),o.ads.shouldPlayContentBehindAd(o)&&(this.preAdVolume_=o.volume(),o.volume(0)),o.addClass("vjs-ad-playing"),o.hasClass("vjs-live")&&o.removeClass("vjs-live"),_(o),o.ads.cancelPlayTimeout&&c.setTimeout(function(){c.clearTimeout(o.ads.cancelPlayTimeout),o.ads.cancelPlayTimeout=null},1)},leave:function(){o.removeClass("vjs-ad-playing"),o.ads.isLive(o)&&o.addClass("vjs-live"),o.ads.shouldPlayContentBehindAd(o)||function(e,n){if(!0!==e.ads.disableNextSnapshotRestore){var i=e.$(".vjs-tech"),r=20,a=n.suppressedRemoteTracks,o=n.suppressedTracks,s=void 0,t=function(){for(var t=0;t<a.length;t++)(s=a[t]).track.mode=s.mode;for(var e=0;e<o.length;e++)(s=o[e]).track.mode=s.mode},l=function(){var t=void 0;p.browser.IS_IOS&&e.ads.isLive(e)?n.currentTime<0&&(t=e.seekable().length>0?e.seekable().end(0)+n.currentTime:e.currentTime(),e.currentTime(t)):n.ended?e.currentTime(e.duration()):e.currentTime(n.currentTime),n.ended||e.play(),e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},u=function t(){if(e.off("contentcanplay",t),e.ads.tryToResumeTimeout_&&(e.clearTimeout(e.ads.tryToResumeTimeout_),e.ads.tryToResumeTimeout_=null),(i=e.el().querySelector(".vjs-tech")).readyState>1)return l();if(void 0===i.seekable)return l();if(i.seekable.length>0)return l();if(r--)c.setTimeout(t,50);else try{l()}catch(t){p.log.warn("Failed to resume the content after an advertisement",t)}};n.nativePoster&&(i.poster=n.nativePoster),"style"in n&&i.setAttribute("style",n.style||""),e.ads.videoElementRecycled()?(e.one("contentloadedmetadata",t),p.browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src({src:n.currentSrc,type:n.type}),e.one("contentcanplay",u),e.ads.tryToResumeTimeout_=e.setTimeout(u,2e3)):e.ended()&&n.ended||(t(),e.play())}else e.ads.disableNextSnapshotRestore=!1}(o,this.snapshot),o.ads.shouldPlayContentBehindAd(o)&&o.volume(this.preAdVolume_)},events:{adend:function(){this.state="content-resuming",o.ads.adType=null},adserror:function(){o.ads.endLinearAdMode()}}},"content-resuming":{enter:function(){this._contentHasEnded&&(c.clearTimeout(o.ads._fireEndedTimeout),o.ads._fireEndedTimeout=c.setTimeout(function(){o.trigger("ended")},1e3))},leave:function(){c.clearTimeout(o.ads._fireEndedTimeout)},events:{contentupdate:function(){this.state="content-set"},contentresumed:function(){this.state="content-playback"},playing:function(){this.state="content-playback"},ended:function(){this.state="content-playback"}}},"postroll?":{enter:function(){o.ads._contentEnding=!0,this.snapshot=a(o),o.ads.nopostroll_?c.setTimeout(function(){o.ads.state="content-resuming",o.trigger("ended")},1):(o.addClass("vjs-ad-loading"),o.ads.adTimeoutTimeout=c.setTimeout(function(){o.trigger("adtimeout")},s.postrollTimeout))},leave:function(){c.clearTimeout(o.ads.adTimeoutTimeout),o.removeClass("vjs-ad-loading")},events:{adstart:function(){this.state="ad-playback",o.ads.adType="postroll"},adskip:function(){this.state="content-resuming",c.setTimeout(function(){o.trigger("ended")},1)},adtimeout:function(){this.state="content-resuming",c.setTimeout(function(){o.trigger("ended")},1)},adserror:function(){this.state="content-resuming",c.setTimeout(function(){o.trigger("ended")},1)},contentupdate:function(){this.state="ads-ready?"}}},"content-playback":{enter:function(){o.ads.cancelPlayTimeout&&(c.clearTimeout(o.ads.cancelPlayTimeout),o.ads.cancelPlayTimeout=null),o.trigger({type:"contentplayback",triggerevent:o.ads.triggerevent}),o.ads._cancelledPlay&&o.paused()&&o.play()},events:{adsready:function(){o.trigger("readyforpreroll")},adstart:function(){this.state="ad-playback","preroll"!==o.ads.adType&&(o.ads.adType="midroll")},contentupdate:function(){o.paused()?this.state="content-set":this.state="ads-ready?"},contentended:function(){this._contentHasEnded?this.state="content-resuming":(this._contentEnding=!1,this._contentHasEnded=!0,this.state="postroll?")}}}},n=function(t){var e=o.ads.state,n=l[e].events;if(n){var i=n[t.type];i&&i.apply(o.ads)}if(e!==o.ads.state){var r=e,a=o.ads.state;o.ads.triggerevent=t.type,l[r].leave&&l[r].leave.apply(o.ads),l[a].enter&&l[a].enter.apply(o.ads),s.debug&&p.log("ads",o.ads.triggerevent+" triggered: "+r+" -> "+a)}},i=function(){var t=o.textTracks();if(!o.ads.shouldPlayContentBehindAd(o)&&o.ads.isAdPlaying()&&o.tech_.featuresNativeTextTracks&&p.browser.IS_IOS&&!Array.isArray(o.textTracks()))for(var e=0;e<t.length;e++){var n=t[e];"showing"===n.mode&&(n.mode="disabled")}};o.ready(function(){o.textTracks().addEventListener("change",i)}),o.on(y.concat(["adtimeout","contentupdate","contentplaying","contentended","contentresumed","adstart","adend","adskip","adsready","adserror","adscanceled","nopreroll"]),n),o.on("dispose",function(){o.ads.adTimeoutTimeout&&c.clearTimeout(o.ads.adTimeoutTimeout),o.ads._fireEndedTimeout&&c.clearTimeout(o.ads._fireEndedTimeout),o.ads.cancelPlayTimeout&&c.clearTimeout(o.ads.cancelPlayTimeout),o.ads.tryToResumeTimeout_&&o.clearTimeout(o.ads.tryToResumeTimeout_),o.textTracks().removeEventListener("change",i)}),o.paused()||n({type:"play"})};return(p.registerPlugin||p.plugin)("ads",w),w},e.exports=t(n(0))}).call(window)}).call(t,n(2))},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n.name=n.constructor.name,n.code=e,n.message=t,"function"===typeof Error.captureStackTrace?Error.captureStackTrace(n,n.constructor.name):n.stack=new Error(t).stack,n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,Error),i}();e.default=i},function(t,e,n){(function(a){Object.defineProperty(e,"__esModule",{value:!0});var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t=function(t,e){var n=(e.location&&"http:"===e.location.protocol?"http:":"https:")+"//static.impresa.pt/tfkn/86/";if("object"===o(t.exports)&&"string"!==typeof t.exports.nodeName)n=a;else if(e.getElementsByTagName)for(var i=e.getElementsByTagName("script"),r=0;r<i.length;r++)i[r].src.match(/telefunken(\.min)?\.js(\?.*)?$/)&&(n=""+i[r].src);return(n=n.split("/")).pop(),n=n.join("/")}("undefined"!==typeof window?window:{},"undefined"!==typeof document?document:{});e.default=t}).call(e,"/index.js")},function(t,e){var n,i,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(t){n=a}try{i="function"===typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&p())}function p(){if(!c){var t=s(d);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=n(0);var o=((i=a)&&i.__esModule?i:{default:i}).default.getComponent("Button"),s=function(t){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return n.on(t,"playing",n.handlePlay),n.on(t,"play",n.handlePlay),n.on(t,"pause",n.handlePause),n.on(t,"ended",n.handleEnded),n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,o),r(i,[{key:"handlePlay",value:function(t){this.updateVisibility()}},{key:"handlePause",value:function(t){this.updateVisibility()}},{key:"handleEnded",value:function(t){this.updateVisibility()}},{key:"updateVisibility",value:function(){var t=this.player_.pl&&this.player_.pl.getEntries()||[];this.player_.pl&&t.length>1?this.show():this.hide()}}]),i}();e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=n(0);var o=((i=a)&&i.__esModule?i:{default:i}).default.getComponent("Button"),s=function(t){function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return n.value_=e.value,n.updateVisibility(),n.on(t,"playing",n.handlePlay),n.on(t,"play",n.handlePlay),n.on(t,"pause",n.handlePause),n.on(t,"ended",n.handleEnded),n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,o),r(i,[{key:"handlePlay",value:function(t){this.updateVisibility()}},{key:"handlePause",value:function(t){this.updateVisibility()}},{key:"handleEnded",value:function(t){this.updateVisibility()}},{key:"updateVisibility",value:function(){this.player_.isAdPlaying()||(this.player_.isLive()?this.hide():this.show(),this.player_.paused()?this.addClass("vjs-disabled"):this.value_?this.removeClass("vjs-disabled"):this.addClass("vjs-disabled"))}}]),i}();e.default=s},function(n,s,i){(function(){var t,o,e;o=i(17),e=i(6),t=function(){function t(){}var n,i;return t.cappingFreeLunch=0,t.cappingMinimumTimeInterval=0,t.options={withCredentials:!1,timeout:0},t.get=function(t,e,n){var i,r,a;if(r=+new Date,i=s.extend=function(t,e){var n,i;for(n in e)i=e[n],t[n]=i;return t},n||("function"===typeof e&&(n=e),a={}),a=i(this.options,e),this.totalCallsTimeout<r?(this.totalCalls=1,this.totalCallsTimeout=r+36e5):this.totalCalls++,this.cappingFreeLunch>=this.totalCalls)n(null);else{if(!(r-this.lastSuccessfullAd<this.cappingMinimumTimeInterval))return o.parse(t,a,function(t){return n(t)});n(null)}},i=e.storage,n=Object.defineProperty,["lastSuccessfullAd","totalCalls","totalCallsTimeout"].forEach(function(e){n(t,e,{get:function(){return i.getItem(e)},set:function(t){return i.setItem(e,t)},configurable:!1,enumerable:!0})}),null==t.totalCalls&&(t.totalCalls=0),null==t.totalCallsTimeout&&(t.totalCallsTimeout=0),t}(),n.exports=t}).call(void 0)},function(i,t,a){(function(){var e,r,f,b,w,O,L,N,R,U,P,t,m,n,v=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=a(52),m=a(60),f=a(61),b=a(62),w=a(63),n=a(6),N=a(7).VASTCreativeLinear,L=a(7).VASTCreativeCompanion,R=a(7).VASTCreativeNonLinear,U=a(64),O=a(65),P=a(66),e=a(19).EventEmitter,t=function(){var i;function t(){}return i=[],t.addURLTemplateFilter=function(t){"function"===typeof t&&i.push(t)},t.removeURLTemplateFilter=function(){return i.pop()},t.countURLTemplateFilters=function(){return i.length},t.clearUrlTemplateFilters=function(){return i=[]},t.parse=function(t,e,n){return n||("function"===typeof e&&(n=e),e={}),this._parse(t,null,e,function(t,e){return n(e)})},t.vent=new e,t.track=function(t,e){return this.vent.emit("VAST-error",e),n.track(t,e)},t.on=function(t,e){return this.vent.on(t,e)},t.once=function(t,e){return this.vent.once(t,e)},t._parse=function(h,d,p,f){var t,e,n,x;for(f||("function"===typeof p&&(f=p),p={}),e=0,n=i.length;e<n;e++)t=i[e],h=t(h);return null==d&&(d=[]),d.push(h),r.get(h,p,(x=this,function(t,e){var r,w,n,i,a,o,s,l,u,c,T;if(null!=t)return f(t);if(T=new m,null==(null!=e?e.documentElement:void 0)||"VAST"!==e.documentElement.nodeName)return f();for(n=0,a=(u=e.documentElement.childNodes).length;n<a;n++)"Error"===(l=u[n]).nodeName&&T.errorURLTemplates.push(x.parseNodeText(l));for(i=0,o=(c=e.documentElement.childNodes).length;i<o;i++)"Ad"===(l=c[i]).nodeName&&(null!=(r=x.parseAdElement(l))?T.ads.push(r):x.track(T.errorURLTemplates,{ERRORCODE:101}));for(w=function(t){var e,n,i;if(null==t&&(t=!1),T){for(e=0,n=(i=T.ads).length;e<n;e++)if(null!=(r=i[e]).nextWrapperURL)return;return 0===T.ads.length&&(t||x.track(T.errorURLTemplates,{ERRORCODE:303}),T=null),f(null,T)}},s=T.ads.length;s--;)null!=(r=T.ads[s]).nextWrapperURL&&function(b){var t,e,n;d.length>=10||(n=b.nextWrapperURL,v.call(d,n)>=0)?(x.track(b.errorURLTemplates,{ERRORCODE:302}),T.ads.splice(T.ads.indexOf(b),1),w()):(0===b.nextWrapperURL.indexOf("//")?(e=location.protocol,b.nextWrapperURL=""+e+b.nextWrapperURL):-1===b.nextWrapperURL.indexOf("://")&&(t=h.slice(0,h.lastIndexOf("/")),b.nextWrapperURL=t+"/"+b.nextWrapperURL),x._parse(b.nextWrapperURL,d,p,function(t,e){var n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,g,y,_;if(r=!1,null!=t)x.track(b.errorURLTemplates,{ERRORCODE:301}),T.ads.splice(T.ads.indexOf(b),1),r=!0;else if(null==e)x.track(b.errorURLTemplates,{ERRORCODE:303}),T.ads.splice(T.ads.indexOf(b),1),r=!0;else for(T.errorURLTemplates=T.errorURLTemplates.concat(e.errorURLTemplates),o=T.ads.indexOf(b),T.ads.splice(o,1),s=0,l=(m=e.ads).length;s<l;s++){if((_=m[s]).errorURLTemplates=b.errorURLTemplates.concat(_.errorURLTemplates),_.impressionURLTemplates=b.impressionURLTemplates.concat(_.impressionURLTemplates),null!=b.trackingEvents)for(d=0,u=(v=_.creatives).length;d<u;d++)if("linear"===(i=v[d]).type||"nonlinear"===i.type)for(p=0,c=(g=Object.keys(b.trackingEvents)).length;p<c;p++)a=g[p],(n=i.trackingEvents)[a]||(n[a]=[]),i.trackingEvents[a]=i.trackingEvents[a].concat(b.trackingEvents[a]);if(null!=b.videoClickTrackingURLTemplates)for(f=0,h=(y=_.creatives).length;f<h;f++)"linear"!==(i=y[f]).type&&"nonlinear"!==i.type||(i.videoClickTrackingURLTemplates=i.videoClickTrackingURLTemplates.concat(b.videoClickTrackingURLTemplates));T.ads.splice(o,0,_)}return delete b.nextWrapperURL,w(r)}))}(r);return w()}))},t.childByName=function(t,e){var n,i,r,a;for(i=0,r=(a=t.childNodes).length;i<r;i++)if((n=a[i]).nodeName===e)return n},t.childsByName=function(t,e){var n,i,r,a,o;for(i=[],r=0,a=(o=t.childNodes).length;r<a;r++)(n=o[r]).nodeName===e&&i.push(n);return i},t.parseAdElement=function(t){var e,n,i,r;for(n=0,i=(r=t.childNodes).length;n<i;n++){if((e=r[n]).id=t.getAttribute("id"),"Wrapper"===e.nodeName)return this.parseWrapperElement(e);if("InLine"===e.nodeName)return this.parseInLineElement(e)}},t.parseWrapperElement=function(t){var e,n,i,r,a,o,s;for(e=this.parseInLineElement(t),null!=(s=this.childByName(t,"VASTAdTagURI"))?e.nextWrapperURL=this.parseNodeText(s):null!=(s=this.childByName(t,"VASTAdTagURL"))&&(e.nextWrapperURL=this.parseNodeText(this.childByName(s,"URL"))),i=0,r=(a=e.creatives).length;i<r;i++)o=null,"linear"!==(n=a[i]).type&&"nonlinear"!==n.type||null!=(o=n)&&(null!=o.trackingEvents&&(e.trackingEvents=o.trackingEvents),null!=o.videoClickTrackingURLTemplates&&(e.videoClickTrackingURLTemplates=o.videoClickTrackingURLTemplates));if(null!=e.nextWrapperURL)return e},t.parseInLineElement=function(t){var e,n,i,r,a,o,s,l,u,c,h,d,p;for((e=new f).id=t.id,r=0,s=(h=t.childNodes).length;r<s;r++)switch((c=h[r]).nodeName){case"Error":e.errorURLTemplates.push(this.parseNodeText(c));break;case"Impression":e.impressionURLTemplates.push(this.parseNodeText(c));break;case"Creatives":for(a=0,l=(d=this.childsByName(c,"Creative")).length;a<l;a++)for(o=0,u=(p=d[a].childNodes).length;o<u;o++)switch((i=p[o]).nodeName){case"Linear":(n=this.parseCreativeLinearElement(i))&&e.creatives.push(n);break;case"NonLinearAds":(n=this.parseNonLinear(i))&&e.creatives.push(n);break;case"CompanionAds":(n=this.parseCompanionAd(i))&&e.creatives.push(n)}break;case"Extensions":this.parseExtension(e.extensions,this.childsByName(c,"Extension"))}return e},t.parseExtension=function(t,e){var n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,g,y,_;for(_=[],l=0,d=e.length;l<d;l++){if(o=e[l],i=new b,o.attributes)for(u=0,p=(v=o.attributes).length;u<p;u++)s=v[u],i.attributes[s.nodeName]=s.nodeValue;for(c=0,f=(g=o.childNodes).length;c<f;c++)if("#text"!==(n=g[c]).nodeName){if((r=new w).name=n.nodeName,r.value=this.parseNodeText(n),n.attributes)for(h=0,m=(y=n.attributes).length;h<m;h++)a=y[h],r.attributes[a.nodeName]=a.nodeValue;i.children.push(r)}_.push(t.push(i))}return _},t.parseCreativeLinearElement=function(t){var e,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,g,y,_,b,w,T,x,E,S,A,M,C,k,O,L,R,P,I,D,j;if((r=new N).duration=this.parseDuration(this.parseNodeText(this.childByName(t,"Duration"))),-1===r.duration&&"Wrapper"!==t.parentNode.parentNode.parentNode.nodeName)return null;if(null==(R=t.getAttribute("skipoffset"))?r.skipDelay=null:"%"===R.charAt(R.length-1)?(E=parseInt(R,10),r.skipDelay=r.duration*(E/100)):r.skipDelay=this.parseDuration(R),null!=(j=this.childByName(t,"VideoClicks"))){for(r.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(j,"ClickThrough")),s=0,h=(S=this.childsByName(j,"ClickTracking")).length;s<h;s++)i=S[s],r.videoClickTrackingURLTemplates.push(this.parseNodeText(i));for(l=0,d=(A=this.childsByName(j,"CustomClick")).length;l<d;l++)a=A[l],r.videoCustomClickURLTemplates.push(this.parseNodeText(a))}for(null!=(e=this.childByName(t,"AdParameters"))&&(r.adParameters=this.parseNodeText(e)),u=0,p=(M=this.childsByName(t,"TrackingEvents")).length;u<p;u++)for(I=M[u],c=0,f=(C=this.childsByName(I,"Tracking")).length;c<f;c++)if(o=(P=C[c]).getAttribute("event"),D=this.parseNodeText(P),null!=o&&null!=D){if("progress"===o){if(!(x=P.getAttribute("offset")))continue;o="%"===x.charAt(x.length-1)?"progress-"+x:"progress-"+Math.round(this.parseDuration(x))}null==(n=r.trackingEvents)[o]&&(n[o]=[]),r.trackingEvents[o].push(D)}for(g=0,m=(k=this.childsByName(t,"MediaFiles")).length;g<m;g++)for(w=k[g],T=0,v=(O=this.childsByName(w,"MediaFile")).length;T<v;T++)b=O[T],(_=new U).id=b.getAttribute("id"),_.fileURL=this.parseNodeText(b),_.deliveryType=b.getAttribute("delivery"),_.codec=b.getAttribute("codec"),_.mimeType=b.getAttribute("type"),_.apiFramework=b.getAttribute("apiFramework"),_.bitrate=parseInt(b.getAttribute("bitrate")||0),_.minBitrate=parseInt(b.getAttribute("minBitrate")||0),_.maxBitrate=parseInt(b.getAttribute("maxBitrate")||0),_.width=parseInt(b.getAttribute("width")||0),_.height=parseInt(b.getAttribute("height")||0),(L=b.getAttribute("scalable"))&&"string"===typeof L&&("true"===(L=L.toLowerCase())?_.scalable=!0:"false"===L&&(_.scalable=!1)),(y=b.getAttribute("maintainAspectRatio"))&&"string"===typeof y&&("true"===(y=y.toLowerCase())?_.maintainAspectRatio=!0:"false"===y&&(_.maintainAspectRatio=!1)),r.mediaFiles.push(_);return r},t.parseNonLinear=function(t){var e,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,g,y,_,b,w,T,x,E,S,A,M,C,k;for(n=new R,a=0,c=(b=this.childsByName(t,"TrackingEvents")).length;a<c;a++)for(C=b[a],s=0,h=(w=this.childsByName(C,"Tracking")).length;s<h;s++)i=(M=w[s]).getAttribute("event"),k=this.parseNodeText(M),null!=i&&null!=k&&(null==(e=n.trackingEvents)[i]&&(e[i]=[]),n.trackingEvents[i].push(k));for(l=0,d=(T=this.childsByName(t,"NonLinear")).length;l<d;l++){for(_=T[l],(y=new P).id=_.getAttribute("id")||null,y.width=_.getAttribute("width"),y.height=_.getAttribute("height"),y.minSuggestedDuration=_.getAttribute("minSuggestedDuration"),y.apiFramework=_.getAttribute("apiFramework"),u=0,p=(x=this.childsByName(_,"HTMLResource")).length;u<p;u++)r=x[u],y.type=r.getAttribute("creativeType")||"text/html",y.htmlResource=this.parseNodeText(r);for(v=0,f=(E=this.childsByName(_,"IFrameResource")).length;v<f;v++)o=E[v],y.type=o.getAttribute("creativeType")||0,y.iframeResource=this.parseNodeText(o);for(g=0,m=(S=this.childsByName(_,"StaticResource")).length;g<m;g++)A=S[g],y.type=A.getAttribute("creativeType")||0,y.staticResource=this.parseNodeText(A);y.nonlinearClickThroughURLTemplate=this.parseNodeText(this.childByName(_,"NonLinearClickThrough")),n.variations.push(y)}return n},t.parseCompanionAd=function(t){var e,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,g,y,_,b,w,T,x,E,S,A,M,C,k;for(r=new L,s=0,d=(b=this.childsByName(t,"Companion")).length;s<d;s++){for(i=b[s],(n=new O).id=i.getAttribute("id")||null,n.width=i.getAttribute("width"),n.height=i.getAttribute("height"),u=0,p=(w=this.childsByName(i,"HTMLResource")).length;u<p;u++)o=w[u],n.type=o.getAttribute("creativeType")||"text/html",n.htmlResource=this.parseNodeText(o);for(c=0,f=(T=this.childsByName(i,"IFrameResource")).length;c<f;c++)l=T[c],n.type=l.getAttribute("creativeType")||0,n.iframeResource=this.parseNodeText(l);for(h=0,m=(x=this.childsByName(i,"StaticResource")).length;h<m;h++)A=x[h],n.type=A.getAttribute("creativeType")||0,n.staticResource=this.parseNodeText(A);for(y=0,v=(E=this.childsByName(i,"TrackingEvents")).length;y<v;y++)for(C=E[y],_=0,g=(S=this.childsByName(C,"Tracking")).length;_<g;_++)a=(M=S[_]).getAttribute("event"),k=this.parseNodeText(M),null!=a&&null!=k&&(null==(e=n.trackingEvents)[a]&&(e[a]=[]),n.trackingEvents[a].push(k));n.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(i,"CompanionClickThrough")),r.variations.push(n)}return r},t.parseDuration=function(t){var e,n,i,r,a;return null==t?-1:3!==(e=t.split(":")).length?-1:(a=e[2].split("."),r=parseInt(a[0]),2===a.length&&(r+=parseFloat("0."+a[1])),i=parseInt(60*e[1]),n=parseInt(60*e[0]*60),isNaN(n||isNaN(i||isNaN(r||i>3600||r>60)))?-1:n+i+r)},t.parseNodeText=function(t){return t&&(t.textContent||t.text||"").trim()},t}(),i.exports=t}).call(void 0)},function(t,o,s){(function(r,a){var t,e,m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e=function(n,i){return function(){var t;if(s(57)&&"undefined"!==typeof requirejs)t=requirejs.toUrl("./index.js");else if("object"===m(o)&&"object"===m(r))t=a;else{var e=i.getElementsByTagName("script");t=e[e.length-1].src}(t=t.split("/")).pop(),t=t.join("/"),n.flensed={base_path:t},"undefined"!==typeof swfobject&&(n.swfobject=swfobject)}(),function(u){var c=u,h=u.document,d="undefined",s=null,l=null,p=null,f=u.parseInt,t=u.setTimeout;if(m(u.flensed)===d)u.flensed={};else if(m(u.flensed.ua)!==d)return;s=u.flensed,t(function(){var t=!1,e=h.getElementsByTagName("script"),n=e.length;try{s.base_path.toLowerCase(),t=!0}catch(t){s.base_path=""}if(("undefined"===typeof e?"undefined":m(e))!==d&&null!==e&&!t)for(var i=0,r=0;r<n;r++)if(m(e[r].src)!==d&&(i=e[r].src.indexOf("flensed.js"))>=0){s.base_path=e[r].src.substr(0,i);break}},0),s.parseXMLString=function(t){var e=null;c.ActiveXObject?((e=new u.ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)):e=(new u.DOMParser).parseFromString(t,"text/xml");return e},s.getObjectById=function(t){try{if(h.layers)return h.layers[t];if(h.all)return h.all[t];if(h.getElementById)return h.getElementById(t)}catch(t){}return null},s.createCSS=function(t,e,n,i){if(!s.ua.ie||!s.ua.mac){var r=h.getElementsByTagName("head")[0];if(r){var a=n&&"string"===("undefined"===typeof n?"undefined":m(n))?n:"screen";if(i&&(p=l=null),!l||p!==a){var o=h.createElement("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),l=r.appendChild(o),s.ua.ie&&s.ua.win&&m(h.styleSheets)!==d&&h.styleSheets.length>0&&(l=h.styleSheets[h.styleSheets.length-1]),p=a}s.ua.ie&&s.ua.win?l&&"object"===m(l.addRule)&&l.addRule(t,e):l&&m(h.createTextNode)!==d&&l.appendChild(h.createTextNode(t+" {"+e+"}"))}}},s.bindEvent=function(t,e,n){e=e.toLowerCase();try{m(t.addEventListener)!==d?t.addEventListener(e.replace(/^on/,""),n,!1):m(t.attachEvent)!==d&&t.attachEvent(e,n)}catch(t){}},s.unbindEvent=function(t,e,n){e=e.toLowerCase();try{m(t.removeEventListener)!==d?t.removeEventListener(e.replace(/^on/,""),n,!1):m(t.detachEvent)!==d&&t.detachEvent(e,n)}catch(t){}},s.throwUnhandledError=function(t){throw new u.Error(t)},s.error=function(t,e,n,i){return{number:t,name:e,description:n,message:n,srcElement:i,toString:function(){return t+", "+e+", "+n}}},s.ua=function(){var t="Shockwave Flash",e="application/x-shockwave-flash",n=u.navigator,i=m(h.getElementById)!==d&&m(h.getElementsByTagName)!==d&&m(h.createElement)!==d,r=[0,0,0],a=null;if(m(n.plugins)!==d&&"object"===m(n.plugins[t]))!(a=n.plugins[t].description)||m(n.mimeTypes)!==d&&n.mimeTypes[e]&&!n.mimeTypes[e].enabledPlugin||(a=a.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=f(a.replace(/^(.*)\..*$/,"$1"),10),r[1]=f(a.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/r/.test(a)?f(a.replace(/^.*r(.*)$/,"$1"),10):0);else if(m(c.ActiveXObject)!==d)try{var o=new u.ActiveXObject("ShockwaveFlash.ShockwaveFlash");o&&(a=o.GetVariable("$version"))&&(a=a.split(" ")[1].split(","),r=[f(a[0],10),f(a[1],10),f(a[2],10)])}catch(t){}var s=n.userAgent.toLowerCase(),l=n.platform.toLowerCase();return{w3cdom:i,pv:r,webkit:!!/webkit/.test(s)&&parseFloat(s.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),ie:!1,ieVer:0,win:/win/.test(l||s),mac:/mac/.test(l||s)}}()}(n),n.flensed},void 0===(t=function(){e(window,document)}.apply(o,[]))||(r.exports=t)}).call(o,s(56)(t),"/index.js")},function(t,e,n){var i,r="object"===typeof Reflect?Reflect:null,c=r&&"function"===typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!==t};function o(){o.init.call(this)}((t.exports=o).EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function l(t,e,n,i){var r,a,o,s;if("function"!==typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),o=a[e]),void 0===o)o=a[e]=n,++t._eventsCount;else if("function"===typeof o?o=a[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=u(t))>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,s=l,console&&console.warn&&console.warn(s)}return t}function h(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,c(this.listener,this.target,t))}.bind(i);return r.listener=n,i.wrapFn=r}function d(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):f(r,r.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!==typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=r[t];if(void 0===s)return!1;if("function"===typeof s)c(s,this,e);else{var l=s.length,u=f(s,l);for(n=0;n<l;++n)c(u[n],this,e)}return!0},o.prototype.on=o.prototype.addListener=function(t,e){return l(this,t,e,!1)},o.prototype.prependListener=function(t,e){return l(this,t,e,!0)},o.prototype.once=function(t,e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,h(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,h(this,t,e)),this},o.prototype.off=o.prototype.removeListener=function(t,e){var n,i,r,a,o;if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},o.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},o.prototype.listeners=function(t){return d(this,t,!0)},o.prototype.rawListeners=function(t){return d(this,t,!1)},o.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var a={showCountdown:!1},i=function(){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.ended_=!1,this.player_=t,this.ad_=e,this.settings_=Object.assign({},a,n)}return r(i,[{key:"hasCountdown",value:function(){return this.settings_.showCountdown}},{key:"canSkip",value:function(){return!1!==this.settings_.skip&&(!0===this.settings_.skip||this.settings_.skip>=0)}},{key:"skip",value:function(){this.ended_=!0,this.player_.trigger("adended")}},{key:"abort",value:function(){this.skip()}},{key:"finish",value:function(){this.ended_=!0}},{key:"dispose",value:function(){this.ended_||(this.ended_=!0,this.player_.trigger("adended"))}}]),i}();e.default=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=n(0),o=(i=r)&&i.__esModule?i:{default:i};var s=o.default.getComponent("ClickableComponent"),l=function(t){function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,n));return i.vast_=e,i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,s),a(r,[{key:"vast",value:function(){return this.vast_}}]),r}();e.default=l,o.default.registerComponent("VASTClickableComponent",l)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},r=s(n(0)),o=s(n(21));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e,n));return i.update=i.update.bind(i),t.on("adtimeupdate",i.update),i.canSkip=void 0,i.timeLeft=void 0,i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,o.default),i(r,[{key:"dispose",value:function(){this.player().off("adtimeupdate",this.update),a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"dispose",this).call(this)}},{key:"createEl",value:function(){return a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"createEl",this).call(this,"div",{className:"vast-skip-button"})}},{key:"update",value:function(){var t=this.vast(),e=t.canSkip(),n=t.timeLeft();this.canSkip===e&&this.timeLeft===n||(this.canSkip=e,this.timeLeft=n,e?n>0?(this.removeClass("enabled"),this.el().innerHTML='<span class="vast-skip-message">Pode ignorar o anncio dentro de</span> <span class="vast-skip-timer">'+n+"s</span>"):(this.addClass("enabled"),this.el().innerHTML='<span class="vast-skip-message">Ignorar anncio</span>'):(this.removeClass("enabled"),this.el().innerHTML='<span class="vast-skip-message">O vdeo comea dentro de</span> <span class="vast-skip-timer">'+n+"s</span>"))}},{key:"handleClick",value:function(t){if(this.hasClass("enabled")&&this.vast().skip(),void 0===t.stopPropagation)return!1;t.stopPropagation()}}]),r}();e.default=l,r.default.registerComponent("VASTSkipButtonComponent",l)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.getPlayerDimensions=r,e.getViewMode=a,e.addEventListener=o,e.removeEventListener=s;var i=e.VIEW_MODE={NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"};function r(t){return{width:t.el().offsetWidth,height:t.el().offsetHeight}}function a(t){return t.isFullscreen()?i.FULLSCREEN:i.NORMAL}function o(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function s(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}e.default={VIEW_MODE:i,getPlayerDimensions:r,getViewMode:a,addEventListener:o,removeEventListener:s}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var s=n(1).unique,r=n(1).isPositiveInt,a=n(1).stringEndsWith,l=n(8).SingleValueRegistry,u=n(8).MultipleValuesRegistry,c=n(76),o="vpaid_video_flash_handler",h=e.JSFlashBridge=function(){function o(t,e,n,i,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this._el=t,this._flashID=n,this._flashURL=e,this._width=i,this._height=r,this._handlers=new u,this._callbacks=new l,this._uniqueMethodIdentifier=s(this._flashID),this._ready=!1,this._handShakeHandler=a,c.addInstance(this._flashID,this)}return i(o,[{key:"on",value:function(t,e){this._handlers.add(t,e)}},{key:"off",value:function(t,e){return this._handlers.remove(t,e)}},{key:"offEvent",value:function(t){return this._handlers.removeByKey(t)}},{key:"offAll",value:function(){return this._handlers.removeAll()}},{key:"callFlashMethod",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i="";n&&(i=this._uniqueMethodIdentifier()+"_"+t,this._callbacks.add(i,n));try{this._el[t]([i].concat(e))}catch(t){n?d.call(this,i,t):this._trigger("AdError",t)}}},{key:"removeCallback",value:function(t){return this._callbacks.removeByValue(t)}},{key:"removeCallbackByMethodName",value:function(e){var n=this;this._callbacks.filterKeys(function(t){return a(t,e)}).forEach(function(t){n._callbacks.remove(t)})}},{key:"removeAllCallbacks",value:function(){return this._callbacks.removeAll()}},{key:"_trigger",value:function(e,n){var i=this;this._handlers.get(e).forEach(function(t){"AdClickThru"===e?t(n):setTimeout(function(){i._handlers.get(e).length>0&&t(n)},0)})}},{key:"_callCallback",value:function(t,e,n,i){this._callbacks.get(e)?d.call(this,e,n,i):n&&""===e&&this.trigger("AdError",n)}},{key:"_handShake",value:function(t,e){this._ready=!0,this._handShakeHandler&&(this._handShakeHandler(t,e),delete this._handShakeHandler)}},{key:"getSize",value:function(){return{width:this._width,height:this._height}}},{key:"setSize",value:function(t,e){this._width=r(t,this._width),this._height=r(e,this._height),this._el.setAttribute("width",this._width),this._el.setAttribute("height",this._height)}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(t){this.setSize(t,this._height)}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(t){this.setSize(this._width,t)}},{key:"getFlashID",value:function(){return this._flashID}},{key:"getFlashURL",value:function(){return this._flashURL}},{key:"isReady",value:function(){return this._ready}},{key:"destroy",value:function(){this.offAll(),this.removeAllCallbacks(),c.removeInstanceByID(this._flashID),this._el.parentElement&&this._el.parentElement.removeChild(this._el)}}]),o}();function d(e,n,i){var r=this;setTimeout(function(){var t=r._callbacks.get(e);t&&(r._callbacks.remove(e),t(n,i))},0)}Object.defineProperty(h,"VPAID_FLASH_HANDLER",{writable:!1,configurable:!1,value:o}),window[o]=function(t,e,n,i,r,a){var o=c.getInstanceByID(t);o&&("handShake"===n?o._handShake(r,a):"event"!==e?o._callCallback(n,i,r,a):o._trigger(n,a))}},function(t,e,n){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(){}var o={};function s(t){var e=o[t];e&&(clearTimeout(e),delete o[t])}function l(t,e,n){var i=document.createElement("iframe");return i.src=e||"about:blank",i.marginWidth="0",i.marginHeight="0",i.frameBorder="0",i.width="100%",i.height="100%",u(i),n&&(i.style.zIndex=n),i.setAttribute("SCROLLING","NO"),t.innerHTML="",t.appendChild(i),i}function u(t){t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.margin="0px",t.style.padding="0px",t.style.border="none",t.style.width="100%",t.style.height="100%"}function c(n,i){return Object.keys(i).forEach(function(t){var e="object"===("undefined"===typeof e?"undefined":r(e))?JSON.stringify(i[t]):i[t];n=n.replace(new RegExp("{{"+t+"}}","g"),e)}),n}function h(t,e){var n=t.contentWindow&&t.contentWindow.document;return!!n&&(n.write(e),!0)}t.exports={noop:a,validate:function(t,e){return t?null:new Error(e)},clearCallbackTimeout:s,callbackTimeout:function(t,e,n){var i,r;return r=setTimeout(function(){e=a,delete r[i],n()},t),o[i=function(){e.apply(this,arguments)&&s(i)}]=r,i},createElementInEl:function(t,e,n){var i=document.createElement(e);return n&&(i.id=n),t.appendChild(i),i},createIframeWithContent:function(t,e,n){var i=l(t,null,n.zIndex);if(h(i,c(e,n)))return i},createIframe:l,setFullSizeStyle:u,simpleTemplate:c,setIframeContent:h,extend:function(e,n){return Object.keys(n).forEach(function(t){e[t]=n[t]}),e},unique:function(t){var e=-1;return function(){return t+"_"+ ++e}}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.VideoJS=e.events=void 0,e.init=f,n(27);var i=r(n(12)),l=n(9),o=r(n(0)),u=r(n(3));function r(t){return t&&t.__esModule?t:{default:t}}function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}n(30),n(35),n(38),n(10),n(40),n(43),n(46),n(47),n(50);var a={VIDEO_STARTED:"video-started",VIDEO_ENDED:"video-ended",FULLSCREEN_CHANGE:"fullscreenchange",TIME_UPDATE:"timeupdate",PLAY:"play",PAUSE:"pause",SEEKING:"seeking",SEEKED:"seeked",LOAD_START:"loadstart",VOLUME_CHANGE:"volumechange",PREROLL_START:"ads-pod-started",PREROLL_END:"ads-pod-ended",PLAYLIST_NEXT:"vjs-playlist-next",PLAYLIST_PREV:"vjs-playlist-prev",PLAYLIST_END:"vjs-playlist-ended",PLAYLIST_CHANGE:"vjs-playlist-change"},h=".vjs-tech",d=300,p={clickAndDrag:!0,showNotice:!1,VREnable:!0,autoMobileOrientation:!0};o.default.options.flash.swf=i.default+"/video-js.swf","undefined"!==typeof window&&(window.videojs=o.default),o.default.addLanguage("pt-PT",{Play:"Reproduzir",Pause:"Pausar",Replay:"Reiniciar","Current Time":"Tempo","Duration Time":"Durao","Remaining Time":"Tempo Restante","Stream Type":"Tipo de Stream",LIVE:"DIRETO",Loaded:"Carregado",Progress:"Progresso",Fullscreen:"Ecr Completo","Non-Fullscreen":"Sair do modo Ecr Completo",Mute:"Sem som",Unmute:"Com som","Playback Rate":"Velocidade de reproduo",Subtitles:"Legendas","subtitles off":"desativar legendas",Captions:"Anotaes","captions off":"desativar anotaes",Chapters:"Captulos","Close Modal Dialog":"Fechar Janela Modal",Descriptions:"Descries","descriptions off":"desativar descries","Audio Track":"Faixa udio","You aborted the media playback":"Parou a reproduo do vdeo.","A network error caused the media download to fail part-way.":"Um erro na rede fez o vdeo falhar parcialmente.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"O vdeo no pode ser carregado, ou porque houve um problema na rede ou no servidor, ou porque formato do vdeo no  compatvel.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"A reproduo foi interrompida por um problema com o vdeo ou porque o formato no  compatvel com o seu navegador.","No compatible source was found for this media.":"No foi encontrada uma fonte de vdeo compatvel.","The media is encrypted and we do not have the keys to decrypt it.":"O vdeo est encriptado e no h uma chave para o desencriptar.","Play Video":"Reproduzir Vdeo",Close:"Fechar","Modal Window":"Janela Modal","This is a modal window":"Isto  uma janela modal","This modal can be closed by pressing the Escape key or activating the close button.":"Esta modal pode ser fechada pressionando a tecla ESC ou ativando o boto de fechar.",", opens captions settings dialog":", abre janela com definies de legendas",", opens subtitles settings dialog":", abre janela com definies de legendas",", opens descriptions settings dialog":", abre janela com definies de descries",", selected":", seleccionado"});var s=o.default.getComponent("Player");function f(t,e,n){var i=void 0;(e=e||{}).inhibitClick=void 0===e.inhibitClick||e.inhibitClick,"language"in e||(e.language="pt-PT"),!e.vast||"skip"in e.vast||(e.vast.skip=-1),e.playlist&&(e.playlist=[].concat(e.playlist||[]).map(function(t){var e=Object.assign({},t);return e.title=t.title,e.poster=t.poster,"string"===typeof t.src?e.src=[{src:t.src,type:t.type||"video/mp4"}]:e.src=[].concat(t.src||[]),e}));var r,a;return e.html5=Object.assign(e.html5||{},{hls:{enableLowInitialPlaylist:!0}}),i=(0,o.default)(t,e,function(){e.inhibitClick&&b(i.el(),"contextmenu",function(t){return t.preventDefault(),!1})}),e.vast&&(i.on("vast-preroll-start",T),i.on("vast-preroll-removed",x),i.on("ads-pod-started",m),i.on("ads-pod-ended",v),i.ads({debug:!!e.debug,timeout:1e4}),i.vast(e.vast)),i.lock(e.lock),i._tfkReady=new u.default(function(t){i.ready(function(){return t(function(i,r,a){var o=this,s=arguments;return new u.default(function(t){if(i.el().querySelector(h).removeAttribute("muted"),r.panorama){var e=Object.assign({},p,r.panorama);i.panorama(e),i._resizeCanvas=(0,l.throttle)(i._resizeCanvas,d,i),b(window,"resize",i._resizeCanvas),b(window,"orientationchange",i._resizeCanvas),y(i)}var n;i.persistvolume({namespace:"imp-telefunken",defaultVolume:r.defaultVolume}),i.on("play",E),i.on("ended",S),r.skip&&i.skip(r.skip),r.playlist&&(i.on("vjs-playlist-change",g),i.playList(r.playlist)),t(),(n=a)&&"[object Function]"===Object.prototype.toString.call(n)&&a.apply(o,s)})}(i,e,n))})}),i.ready=(a=(r=i).ready,function(){var t=Array.prototype.slice.call(arguments);return r._tfkReady.then(function(){a.apply(r,t)}),r}),i}function m(){o.default.getComponent("Canvas")&&_(this)}function v(){y(this)}function g(){y(this)}function y(t){var e=o.default.getComponent("Canvas"),n=t.pl,i=n&&t.pl.videos[t.pl.current].projection;!("Flash"===t.tech({IWillNotUseThisInPlugins:!0}).name())&&e&&(!n||n&&i)?function(t){var e=[].concat(c(t.el().querySelectorAll(h))),n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.style.visibility="hidden"}}catch(t){i=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}}(t):_(t)}function _(t){var e=[].concat(c(t.el().querySelectorAll(h))),n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.style.removeProperty("visibility")}}catch(t){i=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}}function b(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n)}function w(t,e,n){t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener(e,n)}function T(t){this.trigger(a.PREROLL_START)}function x(t){this.trigger(a.PREROLL_END)}function E(t){var e=this;this.one("timeupdate",function(){e.trigger(a.VIDEO_STARTED,[t])})}function S(t){this.trigger(a.VIDEO_ENDED,[t])}s.prototype.isAdPlaying=function(){return this.ads&&this.ads.state&&0!==this.ads.state.indexOf("content-")},s.prototype.isLive=function(){return this.duration()===1/0||"8"===o.default.browser.IOS_VERSION&&0===this.duration()},s.prototype.setSource=function(t){var e=this;this.isAdPlaying()?(this.vast.dispose(),this.one("vast-preroll-removed",function(){return e.src(t)})):this.src(t)},s.prototype.next=function(){var t=this;this.ready(function(){if(!t.isAdPlaying()&&t.pl)return t.pl.next()})},s.prototype.prev=function(){var t=this;this.ready(function(){if(!t.isAdPlaying()&&t.pl)return t.pl.prev()})},s.prototype._playList=s.prototype.playList,s.prototype.playList=function(t){var e=this,n=arguments;this.ready(function(){e.isAdPlaying()&&!isNaN(parseInt(t,10))||e._playList.apply(e,n)})},s.prototype._dispose=s.prototype.dispose,s.prototype.dispose=function(){return w(window,"resize",this._resizeCanvas),w(window,"orientationchange",this._resizeCanvas),this._dispose.apply(this,arguments)},s.prototype._resizeCanvas=function(){this.getChild("Canvas").handleResize()};e.events=a,e.VideoJS=o.default;e.default={init:f,VideoJS:o.default,events:a}},function(t,e){},function(t,r,a){(function(t){var e="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}r.setTimeout=function(){return new i(n.call(setTimeout,e,arguments),clearTimeout)},r.setInterval=function(){return new i(n.call(setInterval,e,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(e,this._id)},r.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},r.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},r._unrefActive=r.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},a(29),r.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,r.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(r,a(2))},function(t,e,n){(function(t,f){!function(n,i){"use strict";if(!n.setImmediate){var r,a,e,o,t,s=1,l={},u=!1,c=n.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(n);h=h&&h.setTimeout?h:n,r="[object process]"==={}.toString.call(n.process)?function(t){f.nextTick(function(){p(t)})}:function(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}()?(o="setImmediate$"+Math.random()+"$",t=function(t){t.source===n&&"string"===typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},n.addEventListener?n.addEventListener("message",t,!1):n.attachEvent("onmessage",t),function(t){n.postMessage(o+t,"*")}):n.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){p(t.data)},function(t){e.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(a=c.documentElement,function(t){var e=c.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,a.removeChild(e),e=null},a.appendChild(e)}):function(t){setTimeout(p,0,t)},h.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[s]=i,r(s),s++},h.clearImmediate=d}function d(t){delete l[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{d(t),u=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(e,n(2),n(13))},function(t,e,o){function n(t){return t&&"object"===typeof t&&"default"in t?t.default:t}var i=n(o(0)),r=n(o(31)),a={};"undefined"!==typeof window&&(a=window);var s={canvas:!!a.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!a.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!a.Worker,fileapi:a.File&&a.FileReader&&a.FileList&&a.Blob,Check_Version:function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName)if(-1!==navigator.appVersion.indexOf("Trident"))t=11;else{e=navigator.userAgent;null!==new RegExp("Edge/([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}return t},supportVideoTexture:function(){var t=this.Check_Version();return-1===t||t>=13},isLiveStreamOnSafari:function(t){var e=[].slice.call(t.querySelectorAll("source")),n=!1;t.src&&t.src.indexOf(".m3u8")>-1&&e.push({src:t.src,type:"application/x-mpegURL"});for(var i=0;i<e.length;i++){var r=e[i];if(("application/x-mpegURL"===r.type||"application/vnd.apple.mpegurl"===r.type)&&/(Safari|AppleWebKit)/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)){n=!0;break}}return n},getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",this.webgl||(t.innerHTML=a.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),t},addGetWebGLMessage:function(t){var e,n,i;e=void 0!==(t=t||{}).parent?t.parent:document.body,n=void 0!==t.id?t.id:"oldie",(i=s.getWebGLErrorMessage()).id=n,e.appendChild(i)}},l={prev_currentTime:0,counter:0,isBuffering:function(t){return t==this.prev_currentTime?this.counter++:this.counter=0,this.prev_currentTime=t,this.counter>10&&(this.counter=10,!0)}};var u={whichTransitionEvent:function(){var t,e=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]},mobileAndTabletcheck:function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},isIos:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},isRealIphone:function(){return/iPhone|iPod/i.test(navigator.platform)},fovToProjection:function(t,e,n,i){var r=Math.PI/180;return function(t,e,n,i){n=void 0===n?.01:n,i=void 0===i?1e4:i;var r,a,o,s,l=(e=void 0===e||e)?-1:1,u=new THREE.Matrix4,c=u.elements,h=(a=2/((r=t).leftTan+r.rightTan),o=(r.leftTan-r.rightTan)*a*.5,s=2/(r.upTan+r.downTan),{scale:[a,s],offset:[o,(r.upTan-r.downTan)*s*.5]});return c[0]=h.scale[0],c[1]=0,c[2]=h.offset[0]*l,c[3]=0,c[4]=0,c[5]=h.scale[1],c[6]=-h.offset[1]*l,c[7]=0,c[8]=0,c[9]=0,c[10]=i/(n-i)*-l,c[11]=i*n/(n-i),c[12]=0,c[13]=0,c[14]=l,c[15]=0,u.transpose(),u}({upTan:Math.tan(t.upDegrees*r),downTan:Math.tan(t.downDegrees*r),leftTan:Math.tan(t.leftDegrees*r),rightTan:Math.tan(t.rightDegrees*r)},e,n,i)},extend:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n]);return e},deepCopy:function(t){var e={};for(var n in t)e[n]=t[n];return e},getTouchesDistance:function(t){return Math.sqrt((t[0].clientX-t[1].clientX)*(t[0].clientX-t[1].clientX)+(t[0].clientY-t[1].clientY)*(t[0].clientY-t[1].clientY))}},d=function(r,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{constructor:function(t,e){this.settings=e,this.width=t.el().offsetWidth,this.height=t.el().offsetHeight,this.lon=e.initLon,this.lat=e.initLat,this.phi=0,this.theta=0,this.videoType=e.videoType,this.clickToToggle=e.clickToToggle,this.mouseDown=!1,this.isUserInteracting=!1,this.renderer=new a.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.autoClear=!1,this.renderer.setClearColor(0,1);var n=o.getTech(t);if(this.supportVideoTexture=s.supportVideoTexture(),this.liveStreamOnSafari=s.isLiveStreamOnSafari(n),this.liveStreamOnSafari&&(this.supportVideoTexture=!1),this.supportVideoTexture)this.texture=new a.Texture(n);else{this.helperCanvas=t.addChild("HelperCanvas",{video:n,width:e.helperCanvas.width?e.helperCanvas.width:this.width,height:e.helperCanvas.height?e.helperCanvas.height:this.height});var i=this.helperCanvas.el();this.texture=new a.Texture(i)}n.style.visibility="hidden",this.texture.generateMipmaps=!1,this.texture.minFilter=a.LinearFilter,this.texture.maxFilter=a.LinearFilter,this.texture.format=a.RGBFormat,this.el_=this.renderer.domElement,this.el_.classList.add("vjs-video-canvas"),e.el=this.el_,r.call(this,t,e),this.attachControlEvents(),this.player().on("play",function(){this.time=(new Date).getTime(),this.startAnimation()}.bind(this))},attachControlEvents:function(){this.on("mousemove",this.handleMouseMove.bind(this)),this.on("touchmove",this.handleTouchMove.bind(this)),this.on("mousedown",this.handleMouseDown.bind(this)),this.on("touchstart",this.handleTouchStart.bind(this)),this.on("mouseup",this.handleMouseUp.bind(this)),this.on("touchend",this.handleTouchEnd.bind(this)),this.settings.scrollable&&(this.on("mousewheel",this.handleMouseWheel.bind(this)),this.on("MozMousePixelScroll",this.handleMouseWheel.bind(this))),this.on("mouseenter",this.handleMouseEnter.bind(this)),this.on("mouseleave",this.handleMouseLease.bind(this)),this.on("dispose",this.handleDispose.bind(this))},handleDispose:function(t){this.off("mousemove",this.handleMouseMove.bind(this)),this.off("touchmove",this.handleTouchMove.bind(this)),this.off("mousedown",this.handleMouseDown.bind(this)),this.off("touchstart",this.handleTouchStart.bind(this)),this.off("mouseup",this.handleMouseUp.bind(this)),this.off("touchend",this.handleTouchEnd.bind(this)),this.settings.scrollable&&(this.off("mousewheel",this.handleMouseWheel.bind(this)),this.off("MozMousePixelScroll",this.handleMouseWheel.bind(this))),this.off("mouseenter",this.handleMouseEnter.bind(this)),this.off("mouseleave",this.handleMouseLease.bind(this)),this.off("dispose",this.handleDispose.bind(this)),this.stopAnimation()},startAnimation:function(){this.render_animation=!0,this.animate()},stopAnimation:function(){this.render_animation=!1,this.requestAnimationId&&cancelAnimationFrame(this.requestAnimationId)},handleResize:function(){this.width=this.player().el().offsetWidth,this.height=this.player().el().offsetHeight,this.renderer.setSize(this.width,this.height)},handleMouseUp:function(t){if(this.mouseDown=!1,this.clickToToggle){var e=t.clientX||t.changedTouches&&t.changedTouches[0].clientX,n=t.clientY||t.changedTouches&&t.changedTouches[0].clientY;if("undefined"===typeof e||"undefined"===n)return;var i=Math.abs(e-this.onPointerDownPointerX),r=Math.abs(n-this.onPointerDownPointerY);i<.1&&r<.1&&(this.player().paused()?this.player().play():this.player().pause())}},handleMouseDown:function(t){t.preventDefault();var e=t.clientX||t.touches&&t.touches[0].clientX,n=t.clientY||t.touches&&t.touches[0].clientY;"undefined"!==typeof e&&"undefined"!==n&&(this.mouseDown=!0,this.onPointerDownPointerX=e,this.onPointerDownPointerY=n,this.onPointerDownLon=this.lon,this.onPointerDownLat=this.lat)},handleTouchStart:function(t){t.touches.length>1&&(this.isUserPinch=!0,this.multiTouchDistance=u.getTouchesDistance(t.touches)),this.handleMouseDown(t)},handleTouchEnd:function(t){this.isUserPinch=!1,this.handleMouseUp(t)},handleMouseMove:function(t){var e=t.clientX||t.touches&&t.touches[0].clientX,n=t.clientY||t.touches&&t.touches[0].clientY;if("undefined"!==typeof e&&"undefined"!==n)if(this.settings.clickAndDrag)this.mouseDown&&(this.lon=.2*(this.onPointerDownPointerX-e)+this.onPointerDownLon,this.lat=.2*(n-this.onPointerDownPointerY)+this.onPointerDownLat);else{var i=e-this.el_.offsetLeft,r=n-this.el_.offsetTop;this.lon=i/this.width*430-225,this.lat=r/this.height*-180+90}},handleTouchMove:function(t){(!this.isUserPinch||t.touches.length<=1)&&this.handleMouseMove(t)},handleMobileOrientation:function(t){if("undefined"!==typeof t.rotationRate){var e=t.rotationRate.alpha,n=t.rotationRate.beta,i="undefined"!==typeof t.portrait?t.portrait:window.matchMedia("(orientation: portrait)").matches,r="undefined"!==typeof t.landscape?t.landscape:window.matchMedia("(orientation: landscape)").matches,a=t.orientation||window.orientation;if(i)this.lon=this.lon-n*this.settings.mobileVibrationValue,this.lat=this.lat+e*this.settings.mobileVibrationValue;else if(r){var o=-90;"undefined"!=typeof a&&(o=a),this.lon=-90==o?this.lon+e*this.settings.mobileVibrationValue:this.lon-e*this.settings.mobileVibrationValue,this.lat=-90==o?this.lat+n*this.settings.mobileVibrationValue:this.lat-n*this.settings.mobileVibrationValue}}},handleMouseWheel:function(t){t.stopPropagation(),t.preventDefault()},handleMouseEnter:function(t){this.isUserInteracting=!0},handleMouseLease:function(t){this.isUserInteracting=!1,this.mouseDown&&(this.mouseDown=!1)},animate:function(){if(this.render_animation){if(this.requestAnimationId=requestAnimationFrame(this.animate.bind(this)),!this.player().paused()&&"undefined"!==typeof this.texture&&(!this.isPlayOnMobile&&this.player().readyState()>=2||this.isPlayOnMobile&&this.player().hasClass("vjs-playing"))){var t=(new Date).getTime();if(t-this.time>=30&&(this.texture.needsUpdate=!0,this.time=t),this.isPlayOnMobile){var e=this.player().currentTime();l.isBuffering(e)?this.player().hasClass("vjs-panorama-mobile-inline-video-buffering")||this.player().addClass("vjs-panorama-mobile-inline-video-buffering"):this.player().hasClass("vjs-panorama-mobile-inline-video-buffering")&&this.player().removeClass("vjs-panorama-mobile-inline-video-buffering")}}this.render()}},render:function(){if(!this.isUserInteracting){var t=this.lat>this.settings.initLat?-1:1,e=this.lon>this.settings.initLon?-1:1;this.settings.backToVerticalCenter&&(this.lat=this.lat>this.settings.initLat-Math.abs(this.settings.returnStepLat)&&this.lat<this.settings.initLat+Math.abs(this.settings.returnStepLat)?this.settings.initLat:this.lat+this.settings.returnStepLat*t),this.settings.backToHorizonCenter&&(this.lon=this.lon>this.settings.initLon-Math.abs(this.settings.returnStepLon)&&this.lon<this.settings.initLon+Math.abs(this.settings.returnStepLon)?this.settings.initLon:this.lon+this.settings.returnStepLon*e)}this.lat=Math.max(this.settings.minLat,Math.min(this.settings.maxLat,this.lat)),this.lon=Math.max(this.settings.minLon,Math.min(this.settings.maxLon,this.lon)),this.phi=a.Math.degToRad(90-this.lat),this.theta=a.Math.degToRad(this.lon),this.supportVideoTexture||this.helperCanvas.update(),this.renderer.clear()},playOnMobile:function(){this.isPlayOnMobile=!0,this.settings.autoMobileOrientation&&window.addEventListener("devicemotion",this.handleMobileOrientation.bind(this))},el:function(){return this.el_}}},c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h="undefined"!==typeof window&&u.mobileAndTabletcheck(),p={clickAndDrag:h,showNotice:!0,NoticeMessage:"Please use your mouse drag and drop the video.",autoHideNotice:3e3,scrollable:!0,initFov:75,maxFov:105,minFov:51,initLat:0,initLon:-180,returnStepLat:.5,returnStepLon:2,backToVerticalCenter:!h,backToHorizonCenter:!h,clickToToggle:!1,minLat:-85,maxLat:85,minLon:-1/0,maxLon:1/0,videoType:"equirectangular",rotateX:0,rotateY:0,rotateZ:0,autoMobileOrientation:!1,mobileVibrationValue:h&&u.isIos()?.022:1,VREnable:!0,VRGapDegree:2.5,closePanorama:!1,helperCanvas:{},dualFish:{width:1920,height:1080,circle1:{x:.240625,y:.553704,rx:.23333,ry:.43148,coverX:.913,coverY:.9},circle2:{x:.757292,y:.553704,rx:.232292,ry:.4296296,coverX:.913,coverY:.9308}}};function f(e,t){var n,i,r=(i=(n=e).getChild("Canvas"),function(){n.el().style.width=window.innerWidth+"px",n.el().style.height=window.innerHeight+"px",i.handleResize()});e.controlBar.fullscreenToggle.off("tap",t),e.controlBar.fullscreenToggle.on("tap",function(){var t=e.getChild("Canvas");e.isFullscreen()?(e.isFullscreen(!1),e.exitFullWindow(),e.el().style.width="",e.el().style.height="",t.handleResize(),window.removeEventListener("devicemotion",r)):(e.isFullscreen(!0),e.enterFullWindow(),r(),window.addEventListener("devicemotion",r))})}var m,v,g,y,_,b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{NoticeMessage:""},n=t.addChild("Notice",e);e.autoHideNotice>0&&setTimeout(function(){n.addClass("vjs-video-notice-fadeOut");var e=u.whichTransitionEvent();n.on(e,function t(){n.hide(),n.removeClass("vjs-video-notice-fadeOut"),n.off(e,t)})},e.autoHideNotice)};function w(t){return t.tech({IWillNotUseThisInPlugins:!0}).el()}if("undefined"!==typeof window){var T=i.getComponent("Component"),x=(y=T,(_=document.createElement("div")).className="vjs-video-notice-label",{constructor:function(t,e){"object"==c(e.NoticeMessage)?(_=e.NoticeMessage,e.el=e.NoticeMessage):"string"==typeof e.NoticeMessage&&(_.innerHTML=e.NoticeMessage,e.el=_),y.call(this,t,e)},el:function(){return _}});i.registerComponent("Notice",i.extend(T,x));var E=(v=T,(g=document.createElement("canvas")).className="vjs-video-helper-canvas",{constructor:function(t,e){this.videoElement=e.video,this.width=e.width,this.height=e.height,g.width=this.width,g.height=this.height,g.style.display="none",e.el=g,this.context=g.getContext("2d"),this.context.drawImage(this.videoElement,0,0,this.width,this.height),v.call(this,t,e)},getContext:function(){return this.context},update:function(){this.context.drawImage(this.videoElement,0,0,this.width,this.height)},el:function(){return g}});i.registerComponent("HelperCanvas",i.extend(T,E));var S=i.getComponent("Button"),A=(m=S,{constructor:function(t,e){m.call(this,t,e)},buildCSSClass:function(){return"vjs-VR-control "+m.prototype.buildCSSClass.call(this)},handleClick:function(){var t=this.player().getChild("Canvas");t.VRMode?t.disableVR():t.enableVR(),t.VRMode?this.addClass("enable"):this.removeClass("enable"),t.VRMode?this.player().trigger("VRModeOn"):this.player().trigger("VRModeOff")},controlText_:"VR"});i.registerComponent("VRButton",i.extend(S,A)),i.plugin("panorama",function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=["equirectangular","fisheye","3dVideo","dual_fisheye"],t=function(t){var e=this;n.mergeOption&&(t=n.mergeOption(p,t)),"undefined"!==typeof n._init&&"function"===typeof n._init?(-1==i.indexOf(t.videoType)&&(t.videoType=p.videoType),n._init(t),this.ready(function(){!function(t,e,n){if(t.addClass("vjs-panorama"),!s.webgl)return b(t,{NoticeMessage:s.getWebGLErrorMessage(),autoHideNotice:e.autoHideNotice}),e.callback&&e.callback();t.addChild("Canvas",u.deepCopy(e));var i=t.getChild("Canvas");if(h){var r=n.getTech(t);if(u.isRealIphone()){var a=o(32);r.setAttribute("playsinline",""),a(r,!0)}u.isIos()&&f(t,n.getFullscreenToggleClickFn(t)),t.addClass("vjs-panorama-mobile-inline-video"),t.removeClass("vjs-using-native-controls"),i.playOnMobile()}e.showNotice&&t.on("playing",function(){b(t,u.deepCopy(e))}),e.VREnable&&t.controlBar.addChild("VRButton",{},t.controlBar.children().length-1),i.hide(),t.on("play",function(){i.show()}),t.on("fullscreenchange",function(){i.handleResize()}),e.callback&&e.callback()}(e,t,n)})):console.error("plugin must implement init function().")};return t.VERSION="0.1.7",t}({_init:function(t){var e="3dVideo"!==t.videoType?function(t,S){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},A=d(t,S,e);return u.extend(A,{constructor:function(t,e){A.constructor.call(this,t,e),this.VRMode=!1,this.scene=new S.Scene,this.camera=new S.PerspectiveCamera(e.initFov,this.width/this.height,1,2e3),this.camera.target=new S.Vector3(0,0,0);var n="equirectangular"===this.videoType?new S.SphereGeometry(500,60,40):new S.SphereBufferGeometry(500,60,40).toNonIndexed();if("fisheye"===this.videoType){for(var i=n.attributes.normal.array,r=n.attributes.uv.array,a=0,o=i.length/3;a<o;a++){var s=i[3*a+0],l=i[3*a+1],u=i[3*a+2],c=Math.asin(Math.sqrt(s*s+u*u)/Math.sqrt(s*s+l*l+u*u))/Math.PI;l<0&&(c=1-c);var h=0==s&&0==u?0:Math.acos(s/Math.sqrt(s*s+u*u));u<0&&(h*=-1),r[2*a+0]=-.8*c*Math.cos(h)+.5,r[2*a+1]=.8*c*Math.sin(h)+.5}n.rotateX(e.rotateX),n.rotateY(e.rotateY),n.rotateZ(e.rotateZ)}else if("dual_fisheye"===this.videoType){for(var d=n.attributes.normal.array,p=n.attributes.uv.array,f=d.length/3,m=0;m<f/2;m++){var v=d[3*m+0],g=d[3*m+1],y=d[3*m+2],_=0==v&&0==y?1:Math.acos(g)/Math.sqrt(v*v+y*y)*(2/Math.PI);p[2*m+0]=v*e.dualFish.circle1.rx*_*e.dualFish.circle1.coverX+e.dualFish.circle1.x,p[2*m+1]=y*e.dualFish.circle1.ry*_*e.dualFish.circle1.coverY+e.dualFish.circle1.y}for(var b=f/2;b<f;b++){var w=d[3*b+0],T=d[3*b+1],x=d[3*b+2],E=0==w&&0==x?1:Math.acos(-T)/Math.sqrt(w*w+x*x)*(2/Math.PI);p[2*b+0]=-w*e.dualFish.circle2.rx*E*e.dualFish.circle2.coverX+e.dualFish.circle2.x,p[2*b+1]=x*e.dualFish.circle2.ry*E*e.dualFish.circle2.coverY+e.dualFish.circle2.y}n.rotateX(e.rotateX),n.rotateY(e.rotateY),n.rotateZ(e.rotateZ)}n.scale(-1,1,1),this.mesh=new S.Mesh(n,new S.MeshBasicMaterial({map:this.texture})),this.scene.add(this.mesh)},enableVR:function(){if(this.VRMode=!0,"undefined"!==typeof vrHMD){var t=vrHMD.getEyeParameters("left"),e=vrHMD.getEyeParameters("right");this.eyeFOVL=t.recommendedFieldOfView,this.eyeFOVR=e.recommendedFieldOfView}this.cameraL=new S.PerspectiveCamera(this.camera.fov,this.width/2/this.height,1,2e3),this.cameraR=new S.PerspectiveCamera(this.camera.fov,this.width/2/this.height,1,2e3)},disableVR:function(){this.VRMode=!1,this.renderer.setViewport(0,0,this.width,this.height),this.renderer.setScissor(0,0,this.width,this.height)},handleResize:function(){A.handleResize.call(this),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.VRMode&&(this.cameraL.aspect=this.camera.aspect/2,this.cameraR.aspect=this.camera.aspect/2,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix())},handleMouseWheel:function(t){A.handleMouseWheel(t),t.wheelDeltaY?this.camera.fov-=.05*t.wheelDeltaY:t.wheelDelta?this.camera.fov-=.05*t.wheelDelta:t.detail&&(this.camera.fov+=1*t.detail),this.camera.fov=Math.min(this.settings.maxFov,this.camera.fov),this.camera.fov=Math.max(this.settings.minFov,this.camera.fov),this.camera.updateProjectionMatrix(),this.VRMode&&(this.cameraL.fov=this.camera.fov,this.cameraR.fov=this.camera.fov,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix())},handleTouchMove:function(t){if(A.handleTouchMove.call(this,t),this.isUserPinch){var e=u.getTouchesDistance(t.touches);t.wheelDeltaY=2*(e-this.multiTouchDistance),this.handleMouseWheel.call(this,t),this.multiTouchDistance=e}},render:function(){if(A.render.call(this),this.camera.target.x=500*Math.sin(this.phi)*Math.cos(this.theta),this.camera.target.y=500*Math.cos(this.phi),this.camera.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.camera.lookAt(this.camera.target),this.VRMode){var t=this.width/2,e=this.height;if("undefined"!==typeof vrHMD)this.cameraL.projectionMatrix=u.fovToProjection(this.eyeFOVL,!0,this.camera.near,this.camera.far),this.cameraR.projectionMatrix=u.fovToProjection(this.eyeFOVR,!0,this.camera.near,this.camera.far);else{var n=this.lon+this.settings.VRGapDegree,i=this.lon-this.settings.VRGapDegree,r=S.Math.degToRad(n),a=S.Math.degToRad(i),o=u.deepCopy(this.camera.target);o.x=500*Math.sin(this.phi)*Math.cos(r),o.z=500*Math.sin(this.phi)*Math.sin(r),this.cameraL.lookAt(o);var s=u.deepCopy(this.camera.target);s.x=500*Math.sin(this.phi)*Math.cos(a),s.z=500*Math.sin(this.phi)*Math.sin(a),this.cameraR.lookAt(s)}this.renderer.setViewport(0,0,t,e),this.renderer.setScissor(0,0,t,e),this.renderer.render(this.scene,this.cameraL),this.renderer.setViewport(t,0,t,e),this.renderer.setScissor(t,0,t,e),this.renderer.render(this.scene,this.cameraR)}else this.renderer.render(this.scene,this.camera)}})}(T,r,{getTech:w}):function(t,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=d(t,c,e);return u.extend(h,{constructor:function(t,e){h.constructor.call(this,t,e),this.VRMode=!1,this.scene=new c.Scene;var n=this.width/this.height;this.cameraL=new c.PerspectiveCamera(e.initFov,n,1,2e3),this.cameraL.target=new c.Vector3(0,0,0),this.cameraR=new c.PerspectiveCamera(e.initFov,n/2,1,2e3),this.cameraR.position.set(1e3,0,0),this.cameraR.target=new c.Vector3(1e3,0,0);for(var i=new c.SphereBufferGeometry(500,60,40).toNonIndexed(),r=new c.SphereBufferGeometry(500,60,40).toNonIndexed(),a=i.attributes.uv.array,o=i.attributes.normal.array,s=0;s<o.length/3;s++)a[2*s+1]=a[2*s+1]/2;var l=r.attributes.uv.array,u=r.attributes.normal.array;for(s=0;s<u.length/3;s++)l[2*s+1]=l[2*s+1]/2+.5;i.scale(-1,1,1),r.scale(-1,1,1),this.meshL=new c.Mesh(i,new c.MeshBasicMaterial({map:this.texture})),this.meshR=new c.Mesh(r,new c.MeshBasicMaterial({map:this.texture})),this.meshR.position.set(1e3,0,0),this.scene.add(this.meshL),e.callback&&e.callback()},handleResize:function(){h.handleResize.call(this);var t=this.width/this.height;this.VRMode?(t/=2,this.cameraL.aspect=t,this.cameraR.aspect=t,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix()):(this.cameraL.aspect=t,this.cameraL.updateProjectionMatrix())},handleMouseWheel:function(t){h.handleMouseWheel(t),t.wheelDeltaY?this.cameraL.fov-=.05*t.wheelDeltaY:t.wheelDelta?this.cameraL.fov-=.05*t.wheelDelta:t.detail&&(this.cameraL.fov+=1*t.detail),this.cameraL.fov=Math.min(this.settings.maxFov,this.cameraL.fov),this.cameraL.fov=Math.max(this.settings.minFov,this.cameraL.fov),this.cameraL.updateProjectionMatrix(),this.VRMode&&(this.cameraR.fov=this.cameraL.fov,this.cameraR.updateProjectionMatrix())},enableVR:function(){this.VRMode=!0,this.scene.add(this.meshR),this.handleResize()},disableVR:function(){this.VRMode=!1,this.scene.remove(this.meshR),this.handleResize()},render:function(){if(h.render.call(this),this.cameraL.target.x=500*Math.sin(this.phi)*Math.cos(this.theta),this.cameraL.target.y=500*Math.cos(this.phi),this.cameraL.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.cameraL.lookAt(this.cameraL.target),this.VRMode){var t=this.width/2,e=this.height;this.cameraR.target.x=1e3+500*Math.sin(this.phi)*Math.cos(this.theta),this.cameraR.target.y=500*Math.cos(this.phi),this.cameraR.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.cameraR.lookAt(this.cameraR.target),this.renderer.setViewport(0,0,t,e),this.renderer.setScissor(0,0,t,e),this.renderer.render(this.scene,this.cameraL),this.renderer.setViewport(t,0,t,e),this.renderer.setScissor(t,0,t,e),this.renderer.render(this.scene,this.cameraR)}else this.renderer.render(this.scene,this.cameraL)}})}(T,r,{getTech:w});i.registerComponent("Canvas",i.extend(T,e))},mergeOption:function(t,e){return i.mergeOptions(t,e)},getTech:w,getFullscreenToggleClickFn:function(t){return t.controlBar.fullscreenToggle.handleClick}}))}t.exports=function(t,e){return t.panorama(e)}},function(t,e,n){function i(){}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"WebGLRenderTargetCube",function(){return Je}),n.d(e,"WebGLRenderTarget",function(){return Ke}),n.d(e,"WebGLRenderer",function(){return Qa}),n.d(e,"ShaderLib",function(){return Kn}),n.d(e,"UniformsLib",function(){return Yn}),n.d(e,"UniformsUtils",function(){return $n}),n.d(e,"ShaderChunk",function(){return Zn}),n.d(e,"FogExp2",function(){return to}),n.d(e,"Fog",function(){return eo}),n.d(e,"Scene",function(){return no}),n.d(e,"LensFlare",function(){return io}),n.d(e,"Sprite",function(){return ao}),n.d(e,"LOD",function(){return oo}),n.d(e,"SkinnedMesh",function(){return uo}),n.d(e,"Skeleton",function(){return so}),n.d(e,"Bone",function(){return lo}),n.d(e,"Mesh",function(){return ca}),n.d(e,"LineSegments",function(){return po}),n.d(e,"LineLoop",function(){return fo}),n.d(e,"Line",function(){return ho}),n.d(e,"Points",function(){return vo}),n.d(e,"Group",function(){return go}),n.d(e,"VideoTexture",function(){return yo}),n.d(e,"DataTexture",function(){return nn}),n.d(e,"CompressedTexture",function(){return _o}),n.d(e,"CubeTexture",function(){return rn}),n.d(e,"CanvasTexture",function(){return bo}),n.d(e,"DepthTexture",function(){return wo}),n.d(e,"Texture",function(){return $e}),n.d(e,"CompressedTextureLoader",function(){return Ts}),n.d(e,"DataTextureLoader",function(){return xs}),n.d(e,"CubeTextureLoader",function(){return Ss}),n.d(e,"TextureLoader",function(){return As}),n.d(e,"ObjectLoader",function(){return ul}),n.d(e,"MaterialLoader",function(){return Qs}),n.d(e,"BufferGeometryLoader",function(){return tl}),n.d(e,"DefaultLoadingManager",function(){return bs}),n.d(e,"LoadingManager",function(){return _s}),n.d(e,"JSONLoader",function(){return ll}),n.d(e,"ImageLoader",function(){return Es}),n.d(e,"FontLoader",function(){return kl}),n.d(e,"FileLoader",function(){return ws}),n.d(e,"Loader",function(){return sl}),n.d(e,"Cache",function(){return ys}),n.d(e,"AudioLoader",function(){return vu}),n.d(e,"SpotLightShadow",function(){return Os}),n.d(e,"SpotLight",function(){return Ls}),n.d(e,"PointLight",function(){return Rs}),n.d(e,"RectAreaLight",function(){return js}),n.d(e,"HemisphereLight",function(){return Cs}),n.d(e,"DirectionalLightShadow",function(){return Ps}),n.d(e,"DirectionalLight",function(){return Is}),n.d(e,"AmbientLight",function(){return Ds}),n.d(e,"LightShadow",function(){return ks}),n.d(e,"Light",function(){return Ms}),n.d(e,"StereoCamera",function(){return gu}),n.d(e,"PerspectiveCamera",function(){return tr}),n.d(e,"OrthographicCamera",function(){return Qi}),n.d(e,"CubeCamera",function(){return yu}),n.d(e,"ArrayCamera",function(){return $a}),n.d(e,"Camera",function(){return Ji}),n.d(e,"AudioListener",function(){return _u}),n.d(e,"PositionalAudio",function(){return wu}),n.d(e,"AudioContext",function(){return mu}),n.d(e,"AudioAnalyser",function(){return Tu}),n.d(e,"Audio",function(){return bu}),n.d(e,"VectorKeyframeTrack",function(){return Gs}),n.d(e,"StringKeyframeTrack",function(){return Ys}),n.d(e,"QuaternionKeyframeTrack",function(){return qs}),n.d(e,"NumberKeyframeTrack",function(){return Xs}),n.d(e,"ColorKeyframeTrack",function(){return Zs}),n.d(e,"BooleanKeyframeTrack",function(){return $s}),n.d(e,"PropertyMixer",function(){return xu}),n.d(e,"PropertyBinding",function(){return Su}),n.d(e,"KeyframeTrack",function(){return Ks}),n.d(e,"AnimationUtils",function(){return Us}),n.d(e,"AnimationObjectGroup",function(){return Au}),n.d(e,"AnimationMixer",function(){return Cu}),n.d(e,"AnimationClip",function(){return Js}),n.d(e,"Uniform",function(){return ku}),n.d(e,"InstancedBufferGeometry",function(){return Ou}),n.d(e,"BufferGeometry",function(){return ea}),n.d(e,"GeometryIdCount",function(){return Vr}),n.d(e,"Geometry",function(){return Hr}),n.d(e,"InterleavedBufferAttribute",function(){return Lu}),n.d(e,"InstancedInterleavedBuffer",function(){return Pu}),n.d(e,"InterleavedBuffer",function(){return Ru}),n.d(e,"InstancedBufferAttribute",function(){return Iu}),n.d(e,"Face3",function(){return er}),n.d(e,"Object3D",function(){return Ki}),n.d(e,"Raycaster",function(){return Du}),n.d(e,"Layers",function(){return Ri}),n.d(e,"EventDispatcher",function(){return i}),n.d(e,"Clock",function(){return Uu}),n.d(e,"QuaternionLinearInterpolant",function(){return Ws}),n.d(e,"LinearInterpolant",function(){return Vs}),n.d(e,"DiscreteInterpolant",function(){return Hs}),n.d(e,"CubicInterpolant",function(){return Fs}),n.d(e,"Interpolant",function(){return Bs}),n.d(e,"Triangle",function(){return ua}),n.d(e,"Math",function(){return De}),n.d(e,"Spherical",function(){return Bu}),n.d(e,"Cylindrical",function(){return Fu}),n.d(e,"Plane",function(){return Mi}),n.d(e,"Frustum",function(){return Ci}),n.d(e,"Sphere",function(){return Si}),n.d(e,"Ray",function(){return sa}),n.d(e,"Matrix4",function(){return en}),n.d(e,"Matrix3",function(){return Ai}),n.d(e,"Box3",function(){return Ei}),n.d(e,"Box2",function(){return Jn}),n.d(e,"Line3",function(){return la}),n.d(e,"Euler",function(){return Li}),n.d(e,"Vector4",function(){return Ze}),n.d(e,"Vector3",function(){return tn}),n.d(e,"Vector2",function(){return bt}),n.d(e,"Quaternion",function(){return Qe}),n.d(e,"Color",function(){return Wn}),n.d(e,"MorphBlendMesh",function(){return Vu}),n.d(e,"ImmediateRenderObject",function(){return Hu}),n.d(e,"VertexNormalsHelper",function(){return zu}),n.d(e,"SpotLightHelper",function(){return Gu}),n.d(e,"SkeletonHelper",function(){return Wu}),n.d(e,"PointLightHelper",function(){return qu}),n.d(e,"RectAreaLightHelper",function(){return Xu}),n.d(e,"HemisphereLightHelper",function(){return Yu}),n.d(e,"GridHelper",function(){return $u}),n.d(e,"PolarGridHelper",function(){return Zu}),n.d(e,"FaceNormalsHelper",function(){return Ku}),n.d(e,"DirectionalLightHelper",function(){return Ju}),n.d(e,"CameraHelper",function(){return Qu}),n.d(e,"BoxHelper",function(){return tc}),n.d(e,"ArrowHelper",function(){return ec}),n.d(e,"AxisHelper",function(){return nc}),n.d(e,"CatmullRomCurve3",function(){return lc}),n.d(e,"CubicBezierCurve3",function(){return uc}),n.d(e,"QuadraticBezierCurve3",function(){return cc}),n.d(e,"LineCurve3",function(){return hc}),n.d(e,"ArcCurve",function(){return dc}),n.d(e,"EllipseCurve",function(){return _l}),n.d(e,"SplineCurve",function(){return bl}),n.d(e,"CubicBezierCurve",function(){return wl}),n.d(e,"QuadraticBezierCurve",function(){return Tl}),n.d(e,"LineCurve",function(){return gl}),n.d(e,"Shape",function(){return Al}),n.d(e,"Path",function(){return Sl}),n.d(e,"ShapePath",function(){return Ml}),n.d(e,"Font",function(){return Cl}),n.d(e,"CurvePath",function(){return yl}),n.d(e,"Curve",function(){return vl}),n.d(e,"ShapeUtils",function(){return Vo}),n.d(e,"SceneUtils",function(){return pc}),n.d(e,"WireframeGeometry",function(){return To}),n.d(e,"ParametricGeometry",function(){return xo}),n.d(e,"ParametricBufferGeometry",function(){return Eo}),n.d(e,"TetrahedronGeometry",function(){return Mo}),n.d(e,"TetrahedronBufferGeometry",function(){return Co}),n.d(e,"OctahedronGeometry",function(){return ko}),n.d(e,"OctahedronBufferGeometry",function(){return Oo}),n.d(e,"IcosahedronGeometry",function(){return Lo}),n.d(e,"IcosahedronBufferGeometry",function(){return Ro}),n.d(e,"DodecahedronGeometry",function(){return Po}),n.d(e,"DodecahedronBufferGeometry",function(){return Io}),n.d(e,"PolyhedronGeometry",function(){return So}),n.d(e,"PolyhedronBufferGeometry",function(){return Ao}),n.d(e,"TubeGeometry",function(){return Do}),n.d(e,"TubeBufferGeometry",function(){return jo}),n.d(e,"TorusKnotGeometry",function(){return No}),n.d(e,"TorusKnotBufferGeometry",function(){return Uo}),n.d(e,"TorusGeometry",function(){return Bo}),n.d(e,"TorusBufferGeometry",function(){return Fo}),n.d(e,"TextGeometry",function(){return Go}),n.d(e,"TextBufferGeometry",function(){return Wo}),n.d(e,"SphereGeometry",function(){return qo}),n.d(e,"SphereBufferGeometry",function(){return Xo}),n.d(e,"RingGeometry",function(){return Yo}),n.d(e,"RingBufferGeometry",function(){return $o}),n.d(e,"PlaneGeometry",function(){return ra}),n.d(e,"PlaneBufferGeometry",function(){return aa}),n.d(e,"LatheGeometry",function(){return Zo}),n.d(e,"LatheBufferGeometry",function(){return Ko}),n.d(e,"ShapeGeometry",function(){return Jo}),n.d(e,"ShapeBufferGeometry",function(){return Qo}),n.d(e,"ExtrudeGeometry",function(){return Ho}),n.d(e,"ExtrudeBufferGeometry",function(){return zo}),n.d(e,"EdgesGeometry",function(){return ts}),n.d(e,"ConeGeometry",function(){return is}),n.d(e,"ConeBufferGeometry",function(){return rs}),n.d(e,"CylinderGeometry",function(){return es}),n.d(e,"CylinderBufferGeometry",function(){return ns}),n.d(e,"CircleGeometry",function(){return as}),n.d(e,"CircleBufferGeometry",function(){return os}),n.d(e,"BoxGeometry",function(){return na}),n.d(e,"BoxBufferGeometry",function(){return ia}),n.d(e,"ShadowMaterial",function(){return ls}),n.d(e,"SpriteMaterial",function(){return ro}),n.d(e,"RawShaderMaterial",function(){return us}),n.d(e,"ShaderMaterial",function(){return Ti}),n.d(e,"PointsMaterial",function(){return mo}),n.d(e,"MeshPhysicalMaterial",function(){return hs}),n.d(e,"MeshStandardMaterial",function(){return cs}),n.d(e,"MeshPhongMaterial",function(){return ds}),n.d(e,"MeshToonMaterial",function(){return ps}),n.d(e,"MeshNormalMaterial",function(){return fs}),n.d(e,"MeshLambertMaterial",function(){return ms}),n.d(e,"MeshDepthMaterial",function(){return xi}),n.d(e,"MeshBasicMaterial",function(){return oa}),n.d(e,"LineDashedMaterial",function(){return vs}),n.d(e,"LineBasicMaterial",function(){return co}),n.d(e,"Material",function(){return wi}),n.d(e,"Float64BufferAttribute",function(){return Jr}),n.d(e,"Float32BufferAttribute",function(){return Kr}),n.d(e,"Uint32BufferAttribute",function(){return Zr}),n.d(e,"Int32BufferAttribute",function(){return $r}),n.d(e,"Uint16BufferAttribute",function(){return Yr}),n.d(e,"Int16BufferAttribute",function(){return Xr}),n.d(e,"Uint8ClampedBufferAttribute",function(){return qr}),n.d(e,"Uint8BufferAttribute",function(){return Wr}),n.d(e,"Int8BufferAttribute",function(){return Gr}),n.d(e,"BufferAttribute",function(){return zr}),n.d(e,"REVISION",function(){return Ct}),n.d(e,"MOUSE",function(){return c}),n.d(e,"CullFaceNone",function(){return H}),n.d(e,"CullFaceBack",function(){return z}),n.d(e,"CullFaceFront",function(){return G}),n.d(e,"CullFaceFrontBack",function(){return h}),n.d(e,"FrontFaceDirectionCW",function(){return kt}),n.d(e,"FrontFaceDirectionCCW",function(){return d}),n.d(e,"BasicShadowMap",function(){return p}),n.d(e,"PCFShadowMap",function(){return N}),n.d(e,"PCFSoftShadowMap",function(){return U}),n.d(e,"FrontSide",function(){return B}),n.d(e,"BackSide",function(){return $}),n.d(e,"DoubleSide",function(){return Z}),n.d(e,"FlatShading",function(){return Ot}),n.d(e,"SmoothShading",function(){return f}),n.d(e,"NoColors",function(){return Lt}),n.d(e,"FaceColors",function(){return m}),n.d(e,"VertexColors",function(){return g}),n.d(e,"NoBlending",function(){return W}),n.d(e,"NormalBlending",function(){return q}),n.d(e,"AdditiveBlending",function(){return X}),n.d(e,"SubtractiveBlending",function(){return Y}),n.d(e,"MultiplyBlending",function(){return K}),n.d(e,"CustomBlending",function(){return J}),n.d(e,"AddEquation",function(){return Rt}),n.d(e,"SubtractEquation",function(){return Pt}),n.d(e,"ReverseSubtractEquation",function(){return It}),n.d(e,"MinEquation",function(){return Dt}),n.d(e,"MaxEquation",function(){return jt}),n.d(e,"ZeroFactor",function(){return Nt}),n.d(e,"OneFactor",function(){return Ut}),n.d(e,"SrcColorFactor",function(){return Bt}),n.d(e,"OneMinusSrcColorFactor",function(){return Ft}),n.d(e,"SrcAlphaFactor",function(){return Vt}),n.d(e,"OneMinusSrcAlphaFactor",function(){return Ht}),n.d(e,"DstAlphaFactor",function(){return zt}),n.d(e,"OneMinusDstAlphaFactor",function(){return Gt}),n.d(e,"DstColorFactor",function(){return Wt}),n.d(e,"OneMinusDstColorFactor",function(){return qt}),n.d(e,"SrcAlphaSaturateFactor",function(){return Xt}),n.d(e,"NeverDepth",function(){return Q}),n.d(e,"AlwaysDepth",function(){return tt}),n.d(e,"LessDepth",function(){return et}),n.d(e,"LessEqualDepth",function(){return nt}),n.d(e,"EqualDepth",function(){return it}),n.d(e,"GreaterEqualDepth",function(){return rt}),n.d(e,"GreaterDepth",function(){return at}),n.d(e,"NotEqualDepth",function(){return ot}),n.d(e,"MultiplyOperation",function(){return F}),n.d(e,"MixOperation",function(){return V}),n.d(e,"AddOperation",function(){return st}),n.d(e,"NoToneMapping",function(){return lt}),n.d(e,"LinearToneMapping",function(){return Yt}),n.d(e,"ReinhardToneMapping",function(){return ut}),n.d(e,"Uncharted2ToneMapping",function(){return ct}),n.d(e,"CineonToneMapping",function(){return ht}),n.d(e,"UVMapping",function(){return v}),n.d(e,"CubeReflectionMapping",function(){return dt}),n.d(e,"CubeRefractionMapping",function(){return pt}),n.d(e,"EquirectangularReflectionMapping",function(){return ft}),n.d(e,"EquirectangularRefractionMapping",function(){return mt}),n.d(e,"SphericalReflectionMapping",function(){return vt}),n.d(e,"CubeUVReflectionMapping",function(){return gt}),n.d(e,"CubeUVRefractionMapping",function(){return yt}),n.d(e,"RepeatWrapping",function(){return $t}),n.d(e,"ClampToEdgeWrapping",function(){return Zt}),n.d(e,"MirroredRepeatWrapping",function(){return Kt}),n.d(e,"NearestFilter",function(){return Jt}),n.d(e,"NearestMipMapNearestFilter",function(){return Qt}),n.d(e,"NearestMipMapLinearFilter",function(){return te}),n.d(e,"LinearFilter",function(){return ee}),n.d(e,"LinearMipMapNearestFilter",function(){return ne}),n.d(e,"LinearMipMapLinearFilter",function(){return ie}),n.d(e,"UnsignedByteType",function(){return re}),n.d(e,"ByteType",function(){return ae}),n.d(e,"ShortType",function(){return oe}),n.d(e,"UnsignedShortType",function(){return se}),n.d(e,"IntType",function(){return le}),n.d(e,"UnsignedIntType",function(){return ue}),n.d(e,"FloatType",function(){return ce}),n.d(e,"HalfFloatType",function(){return he}),n.d(e,"UnsignedShort4444Type",function(){return de}),n.d(e,"UnsignedShort5551Type",function(){return pe}),n.d(e,"UnsignedShort565Type",function(){return fe}),n.d(e,"UnsignedInt248Type",function(){return me}),n.d(e,"AlphaFormat",function(){return ve}),n.d(e,"RGBFormat",function(){return ge}),n.d(e,"RGBAFormat",function(){return ye}),n.d(e,"LuminanceFormat",function(){return _e}),n.d(e,"LuminanceAlphaFormat",function(){return be}),n.d(e,"RGBEFormat",function(){return y}),n.d(e,"DepthFormat",function(){return we}),n.d(e,"DepthStencilFormat",function(){return Te}),n.d(e,"RGB_S3TC_DXT1_Format",function(){return xe}),n.d(e,"RGBA_S3TC_DXT1_Format",function(){return Ee}),n.d(e,"RGBA_S3TC_DXT3_Format",function(){return Se}),n.d(e,"RGBA_S3TC_DXT5_Format",function(){return Ae}),n.d(e,"RGB_PVRTC_4BPPV1_Format",function(){return Me}),n.d(e,"RGB_PVRTC_2BPPV1_Format",function(){return Ce}),n.d(e,"RGBA_PVRTC_4BPPV1_Format",function(){return ke}),n.d(e,"RGBA_PVRTC_2BPPV1_Format",function(){return Oe}),n.d(e,"RGB_ETC1_Format",function(){return Le}),n.d(e,"LoopOnce",function(){return _}),n.d(e,"LoopRepeat",function(){return b}),n.d(e,"LoopPingPong",function(){return w}),n.d(e,"InterpolateDiscrete",function(){return T}),n.d(e,"InterpolateLinear",function(){return x}),n.d(e,"InterpolateSmooth",function(){return E}),n.d(e,"ZeroCurvatureEnding",function(){return S}),n.d(e,"ZeroSlopeEnding",function(){return A}),n.d(e,"WrapAroundEnding",function(){return M}),n.d(e,"TrianglesDrawMode",function(){return Re}),n.d(e,"TriangleStripDrawMode",function(){return Pe}),n.d(e,"TriangleFanDrawMode",function(){return Ie}),n.d(e,"LinearEncoding",function(){return C}),n.d(e,"sRGBEncoding",function(){return k}),n.d(e,"GammaEncoding",function(){return O}),n.d(e,"RGBEEncoding",function(){return L}),n.d(e,"LogLuvEncoding",function(){return R}),n.d(e,"RGBM7Encoding",function(){return P}),n.d(e,"RGBM16Encoding",function(){return I}),n.d(e,"RGBDEncoding",function(){return D}),n.d(e,"BasicDepthPacking",function(){return j}),n.d(e,"RGBADepthPacking",function(){return _t}),n.d(e,"CubeGeometry",function(){return na}),n.d(e,"Face4",function(){return fc}),n.d(e,"LineStrip",function(){return vc}),n.d(e,"LinePieces",function(){return gc}),n.d(e,"MeshFaceMaterial",function(){return yc}),n.d(e,"MultiMaterial",function(){return _c}),n.d(e,"PointCloud",function(){return bc}),n.d(e,"Particle",function(){return wc}),n.d(e,"ParticleSystem",function(){return Tc}),n.d(e,"PointCloudMaterial",function(){return xc}),n.d(e,"ParticleBasicMaterial",function(){return Ec}),n.d(e,"ParticleSystemMaterial",function(){return Sc}),n.d(e,"Vertex",function(){return Ac}),n.d(e,"DynamicBufferAttribute",function(){return Mc}),n.d(e,"Int8Attribute",function(){return Cc}),n.d(e,"Uint8Attribute",function(){return kc}),n.d(e,"Uint8ClampedAttribute",function(){return Oc}),n.d(e,"Int16Attribute",function(){return Lc}),n.d(e,"Uint16Attribute",function(){return Rc}),n.d(e,"Int32Attribute",function(){return Pc}),n.d(e,"Uint32Attribute",function(){return Ic}),n.d(e,"Float32Attribute",function(){return Dc}),n.d(e,"Float64Attribute",function(){return jc}),n.d(e,"ClosedSplineCurve3",function(){return Nc}),n.d(e,"SplineCurve3",function(){return Uc}),n.d(e,"Spline",function(){return Bc}),n.d(e,"BoundingBoxHelper",function(){return Fc}),n.d(e,"EdgesHelper",function(){return Vc}),n.d(e,"WireframeHelper",function(){return Hc}),n.d(e,"XHRLoader",function(){return zc}),n.d(e,"BinaryTextureLoader",function(){return Gc}),n.d(e,"GeometryUtils",function(){return Wc}),n.d(e,"ImageUtils",function(){return qc}),n.d(e,"Projector",function(){return Xc}),n.d(e,"CanvasRenderer",function(){return Yc}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}),Object.assign(i.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t)}}}});var r,a,o,s,l,u,Ct="86",c={LEFT:0,MIDDLE:1,RIGHT:2},H=0,z=1,G=2,h=3,kt=0,d=1,p=0,N=1,U=2,B=0,$=1,Z=2,Ot=1,f=2,Lt=0,m=1,g=2,W=0,q=1,X=2,Y=3,K=4,J=5,Rt=100,Pt=101,It=102,Dt=103,jt=104,Nt=200,Ut=201,Bt=202,Ft=203,Vt=204,Ht=205,zt=206,Gt=207,Wt=208,qt=209,Xt=210,Q=0,tt=1,et=2,nt=3,it=4,rt=5,at=6,ot=7,F=0,V=1,st=2,lt=0,Yt=1,ut=2,ct=3,ht=4,v=300,dt=301,pt=302,ft=303,mt=304,vt=305,gt=306,yt=307,$t=1e3,Zt=1001,Kt=1002,Jt=1003,Qt=1004,te=1005,ee=1006,ne=1007,ie=1008,re=1009,ae=1010,oe=1011,se=1012,le=1013,ue=1014,ce=1015,he=1016,de=1017,pe=1018,fe=1019,me=1020,ve=1021,ge=1022,ye=1023,_e=1024,be=1025,y=ye,we=1026,Te=1027,xe=2001,Ee=2002,Se=2003,Ae=2004,Me=2100,Ce=2101,ke=2102,Oe=2103,Le=2151,_=2200,b=2201,w=2202,T=2300,x=2301,E=2302,S=2400,A=2401,M=2402,Re=0,Pe=1,Ie=2,C=3e3,k=3001,O=3007,L=3002,R=3003,P=3004,I=3005,D=3006,j=3200,_t=3201,De={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=new Array(36),s=0,function(){for(var t=0;t<36;t++)8===t||13===t||18===t||23===t?o[t]="-":14===t?o[t]="4":(s<=2&&(s=33554432+16777216*Math.random()|0),r=15&s,s>>=4,o[t]=a[19===t?3&r|8:r]);return o.join("")}),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*De.DEG2RAD},radToDeg:function(t){return t*De.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};function bt(t,e){this.x=t||0,this.y=e||0}Object.defineProperties(bt.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(bt.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:(l=new bt,u=new bt,function(t,e){return l.set(t,t),u.set(e,e),this.clamp(l,u)}),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this}});var wt,Tt,xt,Et,St,At,Mt,je,Ne,Ue,Be,Fe,Ve,He,ze,Ge,We,qe,Xe,Ye=0;function $e(t,e,n,i,r,a,o,s,l,u){Object.defineProperty(this,"id",{value:Ye++}),this.uuid=De.generateUUID(),this.name="",this.image=void 0!==t?t:$e.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:$e.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Zt,this.wrapT=void 0!==i?i:Zt,this.magFilter=void 0!==r?r:ee,this.minFilter=void 0!==a?a:ie,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:ye,this.type=void 0!==s?s:re,this.offset=new bt(0,0),this.repeat=new bt(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:C,this.version=0,this.onUpdate=null}function Ze(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function Ke(t,e,n){this.uuid=De.generateUUID(),this.width=t,this.height=e,this.scissor=new Ze(0,0,t,e),this.scissorTest=!1,this.viewport=new Ze(0,0,t,e),void 0===(n=n||{}).minFilter&&(n.minFilter=ee),this.texture=new $e(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Je(t,e,n){Ke.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function Qe(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function tn(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function en(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function nn(t,e,n,i,r,a,o,s,l,u,c,h){$e.call(this,null,a,o,s,l,u,i,r,c,h),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:Jt,this.minFilter=void 0!==u?u:Jt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function rn(t,e,n,i,r,a,o,s,l,u){$e.call(this,t=void 0!==t?t:[],e=void 0!==e?e:dt,n,i,r,a,o,s,l,u),this.flipY=!1}$e.DEFAULT_IMAGE=void 0,$e.DEFAULT_MAPPING=v,Object.defineProperty($e.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign($e.prototype,i.prototype,{constructor:$e,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var e,n,i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=De.generateUUID()),void 0===t.images[r.uuid]&&(t.images[r.uuid]={uuid:r.uuid,url:(e=r,void 0!==e.toDataURL?n=e:((n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0,e.width,e.height)),n.width>2048||n.height>2048?n.toDataURL("image/jpeg",.6):n.toDataURL("image/png"))}),i.image=r.uuid}return t.textures[this.uuid]=i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===v){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case $t:t.x=t.x-Math.floor(t.x);break;case Zt:t.x=t.x<0?0:1;break;case Kt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case $t:t.y=t.y-Math.floor(t.y);break;case Zt:t.y=t.y<0?0:1;break;case Kt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.assign(Ze.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,a=t.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],h=a[9],d=a[2],p=a[6],f=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(o+c+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,v=(c+1)/2,g=(f+1)/2,y=(s+u)/4,_=(l+d)/4,b=(h+p)/4;return m>v&&m>g?r=m<.01?(n=0,i=.707106781):(i=y/(n=Math.sqrt(m)),_/n):v>g?r=v<.01?(i=0,n=.707106781):(n=y/(i=Math.sqrt(v)),b/i):g<.01?(i=n=.707106781,r=0):(n=_/(r=Math.sqrt(g)),i=b/r),this.set(n,i,r,e),this}var w=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(u-s)*(u-s));return Math.abs(w)<.001&&(w=1),this.x=(p-h)/w,this.y=(l-d)/w,this.z=(u-s)/w,this.w=Math.acos((o+c+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return void 0===wt&&(wt=new Ze,Tt=new Ze),wt.set(t,t,t,t),Tt.set(e,e,e,e),this.clamp(wt,Tt)},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Object.assign(Ke.prototype,i.prototype,{isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),((Je.prototype=Object.create(Ke.prototype)).constructor=Je).prototype.isWebGLRenderTargetCube=!0,Object.assign(Qe,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,a,o){var s=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],h=r[a+0],d=r[a+1],p=r[a+2],f=r[a+3];if(c!==f||s!==h||l!==d||u!==p){var m=1-o,v=s*h+l*d+u*p+c*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,v*g);m=Math.sin(m*b)/_,o=Math.sin(o*b)/_}var w=o*g;if(s=s*m+h*w,l=l*m+d*w,u=u*m+p*w,c=c*m+f*w,m===1-o){var T=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=T,l*=T,u*=T,c*=T}}t[e]=s,t[e+1]=l,t[e+2]=u,t[e+3]=c}}),Object.defineProperties(Qe.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(Qe.prototype,{set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,a=t.order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(i/2),c=o(r/2),h=s(n/2),d=s(i/2),p=s(r/2);return"XYZ"===a?(this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p):"YXZ"===a?(this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p):"ZXY"===a?(this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p):"ZYX"===a?(this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p):"YZX"===a?(this._x=h*u*c+l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c-h*d*p):"XZY"===a&&(this._x=h*u*c-l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c+h*d*p),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],a=n[8],o=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],d=i+s+h;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(c-l)*e,this._y=(a-u)*e,this._z=(o-r)*e):i>s&&i>h?(e=2*Math.sqrt(1+i-s-h),this._w=(c-l)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(a+u)/e):s>h?(e=2*Math.sqrt(1+s-i-h),this._w=(a-u)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(l+c)/e):(e=2*Math.sqrt(1+h-i-s),this._w=(o-r)/e,this._x=(a+u)/e,this._y=(l+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:(Et=new tn,function(t,e){return void 0===Et&&(Et=new tn),(xt=t.dot(e)+1)<1e-6?(xt=0,Math.abs(t.x)>Math.abs(t.z)?Et.set(-t.y,t.x,0):Et.set(0,-t.z,t.y)):Et.crossVectors(t,e),this._x=Et.x,this._y=Et.y,this._z=Et.z,this._w=xt,this.normalize()}),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,a=t._w,o=e._x,s=e._y,l=e._z,u=e._w;return this._x=n*u+a*o+i*l-r*s,this._y=i*u+a*s+r*o-n*l,this._z=r*u+a*l+n*s-i*o,this._w=a*u-n*o-i*s-r*l,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var l=Math.atan2(s,o),u=Math.sin((1-e)*l)/s,c=Math.sin(e*l)/s;return this._w=a*u+this._w*c,this._x=n*u+this._x*c,this._y=i*u+this._y*c,this._z=r*u+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(tn.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(Fe=new Qe,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Fe.setFromEuler(t))}),applyAxisAngle:(Be=new Qe,function(t,e){return this.applyQuaternion(Be.setFromAxisAngle(t,e))}),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,o=t.z,s=t.w,l=s*e+a*i-o*n,u=s*n+o*e-r*i,c=s*i+r*n-a*e,h=-r*e-a*n-o*i;return this.x=l*s+h*-r+u*-o-c*-a,this.y=u*s+h*-a+c*-r-l*-o,this.z=c*s+h*-o+l*-a-u*-r,this},project:(Ue=new en,function(t){return Ue.multiplyMatrices(t.projectionMatrix,Ue.getInverse(t.matrixWorld)),this.applyMatrix4(Ue)}),unproject:(Ne=new en,function(t){return Ne.multiplyMatrices(t.matrixWorld,Ne.getInverse(t.projectionMatrix)),this.applyMatrix4(Ne)}),transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:(Mt=new tn,je=new tn,function(t,e){return Mt.set(t,t,t),je.set(e,e,e),this.clamp(Mt,je)}),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,i=this.y,r=this.z;return this.x=i*t.z-r*t.y,this.y=r*t.x-n*t.z,this.z=n*t.y-i*t.x,this},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,a=e.x,o=e.y,s=e.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:(At=new tn,function(t){return At.copy(this).projectOnVector(t),this.sub(At)}),reflect:(St=new tn,function(t){return this.sub(St.copy(t).multiplyScalar(2*this.dot(t)))}),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(De.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(en.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,a,o,s,l,u,c,h,d,p,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=a,v[9]=o,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new en).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:(Xe=new tn,function(t){var e=this.elements,n=t.elements,i=1/Xe.setFromMatrixColumn(t,0).length(),r=1/Xe.setFromMatrixColumn(t,1).length(),a=1/Xe.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,this}),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var h=a*u,d=a*c,p=o*u,f=o*c;e[0]=s*u,e[4]=-s*c,e[8]=l,e[1]=d+p*l,e[5]=h-f*l,e[9]=-o*s,e[2]=f-h*l,e[6]=p+d*l,e[10]=a*s}else if("YXZ"===t.order){var m=s*u,v=s*c,g=l*u,y=l*c;e[0]=m+y*o,e[4]=g*o-v,e[8]=a*l,e[1]=a*c,e[5]=a*u,e[9]=-o,e[2]=v*o-g,e[6]=y+m*o,e[10]=a*s}else if("ZXY"===t.order){m=s*u,v=s*c,g=l*u,y=l*c;e[0]=m-y*o,e[4]=-a*c,e[8]=g+v*o,e[1]=v+g*o,e[5]=a*u,e[9]=y-m*o,e[2]=-a*l,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){h=a*u,d=a*c,p=o*u,f=o*c;e[0]=s*u,e[4]=p*l-d,e[8]=h*l+f,e[1]=s*c,e[5]=f*l+h,e[9]=d*l-p,e[2]=-l,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var _=a*s,b=a*l,w=o*s,T=o*l;e[0]=s*u,e[4]=T-_*c,e[8]=w*c+b,e[1]=c,e[5]=a*u,e[9]=-o*u,e[2]=-l*u,e[6]=b*c+w,e[10]=_-T*c}else if("XZY"===t.order){_=a*s,b=a*l,w=o*s,T=o*l;e[0]=s*u,e[4]=-c,e[8]=l*u,e[1]=_*c+T,e[5]=a*u,e[9]=b*c-w,e[2]=w*c-b,e[6]=o*u,e[10]=T*c+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t._x,i=t._y,r=t._z,a=t._w,o=n+n,s=i+i,l=r+r,u=n*o,c=n*s,h=n*l,d=i*s,p=i*l,f=r*l,m=a*o,v=a*s,g=a*l;return e[0]=1-(d+f),e[4]=c-g,e[8]=h+v,e[1]=c+g,e[5]=1-(u+f),e[9]=p-m,e[2]=h-v,e[6]=p+m,e[10]=1-(u+d),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:(Ge=new tn,We=new tn,qe=new tn,function(t,e,n){var i=this.elements;return qe.subVectors(t,e),0===qe.lengthSq()&&(qe.z=1),qe.normalize(),Ge.crossVectors(n,qe),0===Ge.lengthSq()&&(1===Math.abs(n.z)?qe.x+=1e-4:qe.z+=1e-4,qe.normalize(),Ge.crossVectors(n,qe)),Ge.normalize(),We.crossVectors(qe,Ge),i[0]=Ge.x,i[4]=We.x,i[8]=qe.x,i[1]=Ge.y,i[5]=We.y,i[9]=qe.y,i[2]=Ge.z,i[6]=We.z,i[10]=qe.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],b=n[15],w=i[0],T=i[4],x=i[8],E=i[12],S=i[1],A=i[5],M=i[9],C=i[13],k=i[2],O=i[6],L=i[10],R=i[14],P=i[3],I=i[7],D=i[11],j=i[15];return r[0]=a*w+o*S+s*k+l*P,r[4]=a*T+o*A+s*O+l*I,r[8]=a*x+o*M+s*L+l*D,r[12]=a*E+o*C+s*R+l*j,r[1]=u*w+c*S+h*k+d*P,r[5]=u*T+c*A+h*O+d*I,r[9]=u*x+c*M+h*L+d*D,r[13]=u*E+c*C+h*R+d*j,r[2]=p*w+f*S+m*k+v*P,r[6]=p*T+f*A+m*O+v*I,r[10]=p*x+f*M+m*L+v*D,r[14]=p*E+f*C+m*R+v*j,r[3]=g*w+y*S+_*k+b*P,r[7]=g*T+y*A+_*O+b*I,r[11]=g*x+y*M+_*L+b*D,r[15]=g*E+y*C+_*R+b*j,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:(ze=new tn,function(t){for(var e=0,n=t.count;e<n;e++)ze.x=t.getX(e),ze.y=t.getY(e),ze.z=t.getZ(e),ze.applyMatrix4(this),t.setXYZ(e,ze.x,ze.y,ze.z);return t}),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],o=t[5],s=t[9],l=t[13],u=t[2],c=t[6],h=t[10],d=t[14];return t[3]*(+r*s*c-i*l*c-r*o*h+n*l*h+i*o*d-n*s*d)+t[7]*(+e*s*d-e*l*h+r*a*h-i*a*d+i*l*u-r*s*u)+t[11]*(+e*l*c-e*o*d-r*a*c+n*a*d+r*o*u-n*l*u)+t[15]*(-i*o*u-e*s*c+e*o*h+i*a*c-n*a*h+n*s*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],c=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],_=i[15],b=p*y*h-g*f*h+g*c*m-u*y*m-p*c*_+u*f*_,w=v*f*h-d*y*h-v*c*m+l*y*m+d*c*_-l*f*_,T=d*g*h-v*p*h+v*u*m-l*g*m-d*u*_+l*p*_,x=v*p*c-d*g*c-v*u*f+l*g*f+d*u*y-l*p*y,E=r*b+a*w+o*T+s*x;if(0===E){var S="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(S);return console.warn(S),this.identity()}var A=1/E;return n[0]=b*A,n[1]=(g*f*s-p*y*s-g*o*m+a*y*m+p*o*_-a*f*_)*A,n[2]=(u*y*s-g*c*s+g*o*h-a*y*h-u*o*_+a*c*_)*A,n[3]=(p*c*s-u*f*s-p*o*h+a*f*h+u*o*m-a*c*m)*A,n[4]=w*A,n[5]=(d*y*s-v*f*s+v*o*m-r*y*m-d*o*_+r*f*_)*A,n[6]=(v*c*s-l*y*s-v*o*h+r*y*h+l*o*_-r*c*_)*A,n[7]=(l*f*s-d*c*s+d*o*h-r*f*h-l*o*m+r*c*m)*A,n[8]=T*A,n[9]=(v*p*s-d*g*s-v*a*m+r*g*m+d*a*_-r*p*_)*A,n[10]=(l*g*s-v*u*s+v*a*h-r*g*h-l*a*_+r*u*_)*A,n[11]=(d*u*s-l*p*s-d*a*h+r*p*h+l*a*m-r*u*m)*A,n[12]=x*A,n[13]=(d*g*o-v*p*o+v*a*f-r*g*f-d*a*y+r*p*y)*A,n[14]=(v*u*o-l*g*o-v*a*c+r*g*c+l*a*y-r*u*y)*A,n[15]=(l*p*o-d*u*o+d*a*c-r*p*c-l*a*f+r*u*f)*A,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,o=t.y,s=t.z,l=r*a,u=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+n,u*s-i*a,0,l*s-i*o,u*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:(Ve=new tn,He=new en,function(t,e,n){var i=this.elements,r=Ve.set(i[0],i[1],i[2]).length(),a=Ve.set(i[4],i[5],i[6]).length(),o=Ve.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],He.copy(this);var s=1/r,l=1/a,u=1/o;return He.elements[0]*=s,He.elements[1]*=s,He.elements[2]*=s,He.elements[4]*=l,He.elements[5]*=l,He.elements[6]*=l,He.elements[8]*=u,He.elements[9]*=u,He.elements[10]*=u,e.setFromRotationMatrix(He),n.x=r,n.y=a,n.z=o,this}),makePerspective:function(t,e,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(e-t),l=2*r/(n-i),u=(e+t)/(e-t),c=(n+i)/(n-i),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,a){var o=this.elements,s=1/(e-t),l=1/(n-i),u=1/(a-r),c=(e+t)*s,h=(n+i)*l,d=(a+r)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),((nn.prototype=Object.create($e.prototype)).constructor=nn).prototype.isDataTexture=!0,((rn.prototype=Object.create($e.prototype)).constructor=rn).prototype.isCubeTexture=!0,Object.defineProperty(rn.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var an=new $e,on=new rn;function sn(){this.seq=[],this.map={}}var ln=[],un=[],cn=new Float32Array(16),hn=new Float32Array(9);function dn(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,a=ln[r];if(void 0===a&&(a=new Float32Array(r),ln[r]=a),0!==e){i.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function pn(t,e){var n=un[e];void 0===n&&(n=new Int32Array(e),un[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocTextureUnit();return n}function fn(t,e){t.uniform1f(this.addr,e)}function mn(t,e){t.uniform1i(this.addr,e)}function vn(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function gn(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function yn(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function _n(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function bn(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(hn.set(e.elements),t.uniformMatrix3fv(this.addr,!1,hn))}function wn(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(cn.set(e.elements),t.uniformMatrix4fv(this.addr,!1,cn))}function Tn(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTexture2D(e||an,i)}function xn(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTextureCube(e||on,i)}function En(t,e){t.uniform2iv(this.addr,e)}function Sn(t,e){t.uniform3iv(this.addr,e)}function An(t,e){t.uniform4iv(this.addr,e)}function Mn(t,e){t.uniform1fv(this.addr,e)}function Cn(t,e){t.uniform1iv(this.addr,e)}function kn(t,e){t.uniform2fv(this.addr,dn(e,this.size,2))}function On(t,e){t.uniform3fv(this.addr,dn(e,this.size,3))}function Ln(t,e){t.uniform4fv(this.addr,dn(e,this.size,4))}function Rn(t,e){t.uniformMatrix2fv(this.addr,!1,dn(e,this.size,4))}function Pn(t,e){t.uniformMatrix3fv(this.addr,!1,dn(e,this.size,9))}function In(t,e){t.uniformMatrix4fv(this.addr,!1,dn(e,this.size,16))}function Dn(t,e,n){var i=e.length,r=pn(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture2D(e[a]||an,r[a])}function jn(t,e,n){var i=e.length,r=pn(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTextureCube(e[a]||on,r[a])}function Nn(t,e,n){this.id=t,this.addr=n,this.setValue=function(t){switch(t){case 5126:return fn;case 35664:return vn;case 35665:return gn;case 35666:return yn;case 35674:return _n;case 35675:return bn;case 35676:return wn;case 35678:case 36198:return Tn;case 35680:return xn;case 5124:case 35670:return mn;case 35667:case 35671:return En;case 35668:case 35672:return Sn;case 35669:case 35673:return An}}(e.type)}function Un(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Mn;case 35664:return kn;case 35665:return On;case 35666:return Ln;case 35674:return Rn;case 35675:return Pn;case 35676:return In;case 35678:return Dn;case 35680:return jn;case 5124:case 35670:return Cn;case 35667:case 35671:return En;case 35668:case 35672:return Sn;case 35669:case 35673:return An}}(e.type)}function Bn(t){this.id=t,sn.call(this)}Bn.prototype.setValue=function(t,e){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var a=n[i];a.setValue(t,e[a.id])}};var Fn=/([\w\d_]+)(\])?(\[|\.)?/g;function Vn(t,e){t.seq.push(e),t.map[e.id]=e}function Hn(t,e,n){var i=t.name,r=i.length;for(Fn.lastIndex=0;;){var a=Fn.exec(i),o=Fn.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===r){Vn(n,void 0===u?new Nn(s,t,e):new Un(s,t,e));break}var c=n.map[s];void 0===c&&Vn(n,c=new Bn(s)),n=c}}function zn(t,e,n){sn.call(this),this.renderer=n;for(var i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<i;++r){var a=t.getActiveUniform(e,r),o=a.name;Hn(a,t.getUniformLocation(e,o),this)}}zn.prototype.setValue=function(t,e,n){var i=this.map[e];void 0!==i&&i.setValue(t,n,this.renderer)},zn.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},zn.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,i)}},zn.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var Gn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Wn(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}Object.assign(Wn.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(t,e,n){if(t=De.euclideanModulo(t,1),e=De.clamp(e,0,1),n=De.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=a(r,i,t+1/3),this.g=a(r,i,t),this.b=a(r,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(o,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,c=(u=n[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(u=Gn[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,n,i=t||{h:0,s:0,l:0},r=this.r,a=this.g,o=this.b,s=Math.max(r,a,o),l=Math.min(r,a,o),u=(l+s)/2;if(l===s)n=e=0;else{var c=s-l;switch(n=u<=.5?c/(s+l):c/(2-s-l),s){case r:e=(a-o)/c+(a<o?6:0);break;case a:e=(o-r)/c+2;break;case o:e=(r-a)/c+4}e/=6}return i.h=e,i.s=n,i.l=u,i},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var i=this.getHSL();return i.h+=t,i.s+=e,i.l+=n,this.setHSL(i.h,i.s,i.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var qn,Xn,Yn={common:{diffuse:{value:new Wn(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Ze(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new bt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Wn(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Wn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Ze(0,0,1,1)}}},$n={merge:function(t){for(var e={},n=0;n<t.length;n++){var i=this.clone(t[n]);for(var r in i)e[r]=i[r]}return e},clone:function(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}return e}},Zn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = asin( flipNormal * reflectVec.y ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"},Kn={basic:{uniforms:$n.merge([Yn.common,Yn.aomap,Yn.lightmap,Yn.fog]),vertexShader:Zn.meshbasic_vert,fragmentShader:Zn.meshbasic_frag},lambert:{uniforms:$n.merge([Yn.common,Yn.aomap,Yn.lightmap,Yn.emissivemap,Yn.fog,Yn.lights,{emissive:{value:new Wn(0)}}]),vertexShader:Zn.meshlambert_vert,fragmentShader:Zn.meshlambert_frag},phong:{uniforms:$n.merge([Yn.common,Yn.aomap,Yn.lightmap,Yn.emissivemap,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,Yn.gradientmap,Yn.fog,Yn.lights,{emissive:{value:new Wn(0)},specular:{value:new Wn(1118481)},shininess:{value:30}}]),vertexShader:Zn.meshphong_vert,fragmentShader:Zn.meshphong_frag},standard:{uniforms:$n.merge([Yn.common,Yn.aomap,Yn.lightmap,Yn.emissivemap,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,Yn.roughnessmap,Yn.metalnessmap,Yn.fog,Yn.lights,{emissive:{value:new Wn(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Zn.meshphysical_vert,fragmentShader:Zn.meshphysical_frag},points:{uniforms:$n.merge([Yn.points,Yn.fog]),vertexShader:Zn.points_vert,fragmentShader:Zn.points_frag},dashed:{uniforms:$n.merge([Yn.common,Yn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zn.linedashed_vert,fragmentShader:Zn.linedashed_frag},depth:{uniforms:$n.merge([Yn.common,Yn.displacementmap]),vertexShader:Zn.depth_vert,fragmentShader:Zn.depth_frag},normal:{uniforms:$n.merge([Yn.common,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,{opacity:{value:1}}]),vertexShader:Zn.normal_vert,fragmentShader:Zn.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Zn.cube_vert,fragmentShader:Zn.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Zn.equirect_vert,fragmentShader:Zn.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new tn}},vertexShader:Zn.distanceRGBA_vert,fragmentShader:Zn.distanceRGBA_frag}};function Jn(t,e){this.min=void 0!==t?t:new bt(1/0,1/0),this.max=void 0!==e?e:new bt(-1/0,-1/0)}function Qn(y,_){var b,w,s,T,x,E,S,A,M=y.context,C=y.state;function k(){var t,e,n,i,r,a=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),o=new Uint16Array([0,1,2,0,2,3]);b=M.createBuffer(),w=M.createBuffer(),M.bindBuffer(M.ARRAY_BUFFER,b),M.bufferData(M.ARRAY_BUFFER,a,M.STATIC_DRAW),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,w),M.bufferData(M.ELEMENT_ARRAY_BUFFER,o,M.STATIC_DRAW),S=M.createTexture(),A=M.createTexture(),C.bindTexture(M.TEXTURE_2D,S),M.texImage2D(M.TEXTURE_2D,0,M.RGB,16,16,0,M.RGB,M.UNSIGNED_BYTE,null),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.NEAREST),C.bindTexture(M.TEXTURE_2D,A),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,16,16,0,M.RGBA,M.UNSIGNED_BYTE,null),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},t=s,e=M.createProgram(),n=M.createShader(M.FRAGMENT_SHADER),i=M.createShader(M.VERTEX_SHADER),r="precision "+y.getPrecision()+" float;\n",M.shaderSource(n,r+t.fragmentShader),M.shaderSource(i,r+t.vertexShader),M.compileShader(n),M.compileShader(i),M.attachShader(e,n),M.attachShader(e,i),M.linkProgram(e),T=e,x={vertex:M.getAttribLocation(T,"position"),uv:M.getAttribLocation(T,"uv")},E={renderType:M.getUniformLocation(T,"renderType"),map:M.getUniformLocation(T,"map"),occlusionMap:M.getUniformLocation(T,"occlusionMap"),opacity:M.getUniformLocation(T,"opacity"),color:M.getUniformLocation(T,"color"),scale:M.getUniformLocation(T,"scale"),rotation:M.getUniformLocation(T,"rotation"),screenPosition:M.getUniformLocation(T,"screenPosition")}}this.render=function(t,e,n){if(0!==_.length){var i=new tn,r=n.w/n.z,a=.5*n.z,o=.5*n.w,s=16/n.w,l=new bt(s*r,s),u=new tn(1,1,0),c=new bt(1,1),h=new Jn;h.min.set(n.x,n.y),h.max.set(n.x+(n.z-16),n.y+(n.w-16)),void 0===T&&k(),M.useProgram(T),C.initAttributes(),C.enableAttribute(x.vertex),C.enableAttribute(x.uv),C.disableUnusedAttributes(),M.uniform1i(E.occlusionMap,0),M.uniform1i(E.map,1),M.bindBuffer(M.ARRAY_BUFFER,b),M.vertexAttribPointer(x.vertex,2,M.FLOAT,!1,16,0),M.vertexAttribPointer(x.uv,2,M.FLOAT,!1,16,8),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,w),C.disable(M.CULL_FACE),C.buffers.depth.setMask(!1);for(var d=0,p=_.length;d<p;d++){s=16/n.w,l.set(s*r,s);var f=_[d];if(i.set(f.matrixWorld.elements[12],f.matrixWorld.elements[13],f.matrixWorld.elements[14]),i.applyMatrix4(e.matrixWorldInverse),i.applyMatrix4(e.projectionMatrix),u.copy(i),c.x=n.x+u.x*a+a-8,c.y=n.y+u.y*o+o-8,!0===h.containsPoint(c)){C.activeTexture(M.TEXTURE0),C.bindTexture(M.TEXTURE_2D,null),C.activeTexture(M.TEXTURE1),C.bindTexture(M.TEXTURE_2D,S),M.copyTexImage2D(M.TEXTURE_2D,0,M.RGB,c.x,c.y,16,16,0),M.uniform1i(E.renderType,0),M.uniform2f(E.scale,l.x,l.y),M.uniform3f(E.screenPosition,u.x,u.y,u.z),C.disable(M.BLEND),C.enable(M.DEPTH_TEST),M.drawElements(M.TRIANGLES,6,M.UNSIGNED_SHORT,0),C.activeTexture(M.TEXTURE0),C.bindTexture(M.TEXTURE_2D,A),M.copyTexImage2D(M.TEXTURE_2D,0,M.RGBA,c.x,c.y,16,16,0),M.uniform1i(E.renderType,1),C.disable(M.DEPTH_TEST),C.activeTexture(M.TEXTURE1),C.bindTexture(M.TEXTURE_2D,S),M.drawElements(M.TRIANGLES,6,M.UNSIGNED_SHORT,0),f.positionScreen.copy(u),f.customUpdateCallback?f.customUpdateCallback(f):f.updateLensFlares(),M.uniform1i(E.renderType,2),C.enable(M.BLEND);for(var m=0,v=f.lensFlares.length;m<v;m++){var g=f.lensFlares[m];g.opacity>.001&&g.scale>.001&&(u.x=g.x,u.y=g.y,u.z=g.z,s=g.size*g.scale/n.w,l.x=s*r,l.y=s,M.uniform3f(E.screenPosition,u.x,u.y,u.z),M.uniform2f(E.scale,l.x,l.y),M.uniform1f(E.rotation,g.rotation),M.uniform1f(E.opacity,g.opacity),M.uniform3f(E.color,g.color.r,g.color.g,g.color.b),C.setBlending(g.blending,g.blendEquation,g.blendSrc,g.blendDst),y.setTexture2D(g.texture,1),M.drawElements(M.TRIANGLES,6,M.UNSIGNED_SHORT,0))}}}C.enable(M.CULL_FACE),C.enable(M.DEPTH_TEST),C.buffers.depth.setMask(!0),y.resetGLState()}}}function ti(h,d){var p,f,m,v,g,y,_=h.context,b=h.state,w=new tn,T=new Qe,x=new tn;function E(){var t,e,n,i=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),r=new Uint16Array([0,1,2,0,2,3]);p=_.createBuffer(),f=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,p),_.bufferData(_.ARRAY_BUFFER,i,_.STATIC_DRAW),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,f),_.bufferData(_.ELEMENT_ARRAY_BUFFER,r,_.STATIC_DRAW),t=_.createProgram(),e=_.createShader(_.VERTEX_SHADER),n=_.createShader(_.FRAGMENT_SHADER),_.shaderSource(e,["precision "+h.getPrecision()+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),_.shaderSource(n,["precision "+h.getPrecision()+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),_.compileShader(e),_.compileShader(n),_.attachShader(t,e),_.attachShader(t,n),_.linkProgram(t),m=t,v={position:_.getAttribLocation(m,"position"),uv:_.getAttribLocation(m,"uv")},g={uvOffset:_.getUniformLocation(m,"uvOffset"),uvScale:_.getUniformLocation(m,"uvScale"),rotation:_.getUniformLocation(m,"rotation"),scale:_.getUniformLocation(m,"scale"),color:_.getUniformLocation(m,"color"),map:_.getUniformLocation(m,"map"),opacity:_.getUniformLocation(m,"opacity"),modelViewMatrix:_.getUniformLocation(m,"modelViewMatrix"),projectionMatrix:_.getUniformLocation(m,"projectionMatrix"),fogType:_.getUniformLocation(m,"fogType"),fogDensity:_.getUniformLocation(m,"fogDensity"),fogNear:_.getUniformLocation(m,"fogNear"),fogFar:_.getUniformLocation(m,"fogFar"),fogColor:_.getUniformLocation(m,"fogColor"),alphaTest:_.getUniformLocation(m,"alphaTest")};var a=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");a.width=8,a.height=8;var o=a.getContext("2d");o.fillStyle="white",o.fillRect(0,0,8,8),(y=new $e(a)).needsUpdate=!0}function S(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}this.render=function(t,e){if(0!==d.length){void 0===m&&E(),_.useProgram(m),b.initAttributes(),b.enableAttribute(v.position),b.enableAttribute(v.uv),b.disableUnusedAttributes(),b.disable(_.CULL_FACE),b.enable(_.BLEND),_.bindBuffer(_.ARRAY_BUFFER,p),_.vertexAttribPointer(v.position,2,_.FLOAT,!1,16,0),_.vertexAttribPointer(v.uv,2,_.FLOAT,!1,16,8),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,f),_.uniformMatrix4fv(g.projectionMatrix,!1,e.projectionMatrix.elements),b.activeTexture(_.TEXTURE0),_.uniform1i(g.map,0);var n=0,i=0,r=t.fog;r?(_.uniform3f(g.fogColor,r.color.r,r.color.g,r.color.b),r.isFog?(_.uniform1f(g.fogNear,r.near),_.uniform1f(g.fogFar,r.far),_.uniform1i(g.fogType,1),i=n=1):r.isFogExp2&&(_.uniform1f(g.fogDensity,r.density),_.uniform1i(g.fogType,2),i=n=2)):(_.uniform1i(g.fogType,0),i=n=0);for(var a=0,o=d.length;a<o;a++){(l=d[a]).modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,l.matrixWorld),l.z=-l.modelViewMatrix.elements[14]}d.sort(S);var s=[];for(a=0,o=d.length;a<o;a++){var l,u=(l=d[a]).material;if(!1!==u.visible){l.onBeforeRender(h,t,e,void 0,u,void 0),_.uniform1f(g.alphaTest,u.alphaTest),_.uniformMatrix4fv(g.modelViewMatrix,!1,l.modelViewMatrix.elements),l.matrixWorld.decompose(w,T,x),s[0]=x.x,s[1]=x.y;var c=0;t.fog&&u.fog&&(c=i),n!==c&&(_.uniform1i(g.fogType,c),n=c),null!==u.map?(_.uniform2f(g.uvOffset,u.map.offset.x,u.map.offset.y),_.uniform2f(g.uvScale,u.map.repeat.x,u.map.repeat.y)):(_.uniform2f(g.uvOffset,0,0),_.uniform2f(g.uvScale,1,1)),_.uniform1f(g.opacity,u.opacity),_.uniform3f(g.color,u.color.r,u.color.g,u.color.b),_.uniform1f(g.rotation,u.rotation),_.uniform2fv(g.scale,s),b.setBlending(u.blending,u.blendEquation,u.blendSrc,u.blendDst,u.blendEquationAlpha,u.blendSrcAlpha,u.blendDstAlpha,u.premultipliedAlpha),b.buffers.depth.setTest(u.depthTest),b.buffers.depth.setMask(u.depthWrite),u.map?h.setTexture2D(u.map,0):h.setTexture2D(y,0),_.drawElements(_.TRIANGLES,6,_.UNSIGNED_SHORT,0),l.onAfterRender(h,t,e,void 0,u,void 0)}}b.enable(_.CULL_FACE),h.resetGLState()}}}Kn.physical={uniforms:$n.merge([Kn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Zn.meshphysical_vert,fragmentShader:Zn.meshphysical_frag},Object.assign(Jn.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:(Xn=new bt,function(t,e){var n=Xn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var e=t||new bt;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new bt;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return(e||new bt).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return(e||new bt).copy(t).clamp(this.min,this.max)},distanceToPoint:(qn=new bt,function(t){return qn.copy(t).clamp(this.min,this.max).sub(t).length()}),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var ei,ni,ii,ri,ai,oi,si,li,ui,ci,hi,di,pi,fi,mi,vi,gi,yi,_i,bi=0;function wi(){Object.defineProperty(this,"id",{value:bi++}),this.uuid=De.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=q,this.side=B,this.shading=f,this.vertexColors=Lt,this.opacity=1,this.transparent=!1,this.blendSrc=Vt,this.blendDst=Ht,this.blendEquation=Rt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=nt,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.needsUpdate=!0}function Ti(t){wi.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},(this.index0AttributeName=void 0)!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function xi(t){wi.call(this),this.type="MeshDepthMaterial",this.depthPacking=j,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Ei(t,e){this.min=void 0!==t?t:new tn(1/0,1/0,1/0),this.max=void 0!==e?e:new tn(-1/0,-1/0,-1/0)}function Si(t,e){this.center=void 0!==t?t:new tn,this.radius=void 0!==e?e:0}function Ai(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function Mi(t,e){this.normal=void 0!==t?t:new tn(1,0,0),this.constant=void 0!==e?e:0}function Ci(t,e,n,i,r,a){this.planes=[void 0!==t?t:new Mi,void 0!==e?e:new Mi,void 0!==n?n:new Mi,void 0!==i?i:new Mi,void 0!==r?r:new Mi,void 0!==a?a:new Mi]}function ki(y,t,m,e){var _=y.context,b=y.state,w=new Ci,T=new en,x=t.shadows,E=new bt,S=new bt(e.maxTextureSize,e.maxTextureSize),A=new tn,M=new tn,v=1,g=2,n=1+(v|g),C=new Array(n),k=new Array(n),O={},L=[new tn(1,0,0),new tn(-1,0,0),new tn(0,0,1),new tn(0,0,-1),new tn(0,1,0),new tn(0,-1,0)],R=[new tn(0,1,0),new tn(0,1,0),new tn(0,1,0),new tn(0,1,0),new tn(0,0,1),new tn(0,0,-1)],P=[new Ze,new Ze,new Ze,new Ze,new Ze,new Ze],i=new xi;i.depthPacking=_t,i.clipping=!0;for(var r=Kn.distanceRGBA,a=$n.clone(r.uniforms),o=0;o!==n;++o){var s=0!==(o&v),l=0!==(o&g),u=i.clone();u.morphTargets=s,u.skinning=l,C[o]=u;var c=new Ti({defines:{USE_SHADOWMAP:""},uniforms:a,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,morphTargets:s,skinning:l,clipping:!0});k[o]=c}var I=this;function D(t,e,n,i){var r=t.geometry,a=null,o=C,s=t.customDepthMaterial;if(n&&(o=k,s=t.customDistanceMaterial),s)a=s;else{var l=!1;e.morphTargets&&(r&&r.isBufferGeometry?l=r.morphAttributes&&r.morphAttributes.position&&r.morphAttributes.position.length>0:r&&r.isGeometry&&(l=r.morphTargets&&r.morphTargets.length>0)),t.isSkinnedMesh&&!1===e.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var u=t.isSkinnedMesh&&e.skinning,c=0;l&&(c|=v),u&&(c|=g),a=o[c]}if(y.localClippingEnabled&&!0===e.clipShadows&&0!==e.clippingPlanes.length){var h=a.uuid,d=e.uuid,p=O[h];void 0===p&&(p={},O[h]=p);var f=p[d];void 0===f&&(f=a.clone(),p[d]=f),a=f}a.visible=e.visible,a.wireframe=e.wireframe;var m=e.side;return I.renderSingleSided&&m==Z&&(m=B),I.renderReverseSided&&(m===B?m=$:m===$&&(m=B)),a.side=m,a.clipShadows=e.clipShadows,a.clippingPlanes=e.clippingPlanes,a.wireframeLinewidth=e.wireframeLinewidth,a.linewidth=e.linewidth,n&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(i),a}function j(t,e,n,i){if(!1!==t.visible){if(t.layers.test(e.layers)&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(!t.frustumCulled||w.intersectsObject(t))){t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld);var r=m.update(t),a=t.material;if(Array.isArray(a))for(var o=r.groups,s=0,l=o.length;s<l;s++){var u=o[s],c=a[u.materialIndex];if(c&&c.visible){var h=D(t,c,i,M);y.renderBufferDirect(n,null,r,h,t,u)}}else if(a.visible){h=D(t,a,i,M);y.renderBufferDirect(n,null,r,h,t,null)}}for(var d=t.children,p=0,f=d.length;p<f;p++)j(d[p],e,n,i)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=N,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,e){if(!1!==I.enabled&&(!1!==I.autoUpdate||!1!==I.needsUpdate)&&0!==x.length){var n;b.disable(_.BLEND),b.buffers.color.setClear(1,1,1,1),b.buffers.depth.setTest(!0),b.setScissorTest(!1);for(var i=0,r=x.length;i<r;i++){var a=x[i],o=a.shadow,s=a&&a.isPointLight;if(void 0!==o){var l=o.camera;if(E.copy(o.mapSize),E.min(S),s){var u=E.x,c=E.y;P[0].set(2*u,c,u,c),P[1].set(0,c,u,c),P[2].set(3*u,c,u,c),P[3].set(u,c,u,c),P[4].set(3*u,0,u,c),P[5].set(u,0,u,c),E.x*=4,E.y*=2}if(null===o.map){var h={minFilter:Jt,magFilter:Jt,format:ye};o.map=new Ke(E.x,E.y,h),o.map.texture.name=a.name+".shadowMap",l.updateProjectionMatrix()}o.isSpotLightShadow&&o.update(a);var d=o.map,p=o.matrix;M.setFromMatrixPosition(a.matrixWorld),l.position.copy(M),s?(n=6,p.makeTranslation(-M.x,-M.y,-M.z)):(n=1,A.setFromMatrixPosition(a.target.matrixWorld),l.lookAt(A),l.updateMatrixWorld(),p.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),p.multiply(l.projectionMatrix),p.multiply(l.matrixWorldInverse)),y.setRenderTarget(d),y.clear();for(var f=0;f<n;f++){if(s){A.copy(l.position),A.add(L[f]),l.up.copy(R[f]),l.lookAt(A),l.updateMatrixWorld();var m=P[f];b.viewport(m)}T.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),w.setFromMatrix(T),j(t,e,l,s)}}else console.warn("THREE.WebGLShadowMap:",a,"has no shadow.")}var v=y.getClearColor(),g=y.getClearAlpha();y.setClearColor(v,g),I.needsUpdate=!1}}}function Oi(l){var u={};return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),u[t.uuid]},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var e=u[t.uuid];e&&(l.deleteBuffer(e.buffer),delete u[t.uuid])},update:function(t,e){t.isInterleavedBufferAttribute&&(t=t.data);var n,i,r,a,o,s=u[t.uuid];void 0===s?u[t.uuid]=function(t,e){var n=t.array,i=t.dynamic?l.DYNAMIC_DRAW:l.STATIC_DRAW,r=l.createBuffer();l.bindBuffer(e,r),l.bufferData(e,n,i),t.onUploadCallback();var a=l.FLOAT;return n instanceof Float32Array?a=l.FLOAT:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=l.UNSIGNED_SHORT:n instanceof Int16Array?a=l.SHORT:n instanceof Uint32Array?a=l.UNSIGNED_INT:n instanceof Int32Array?a=l.INT:n instanceof Int8Array?a=l.BYTE:n instanceof Uint8Array&&(a=l.UNSIGNED_BYTE),{buffer:r,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}(t,e):s.version<t.version&&(n=s.buffer,r=e,a=(i=t).array,o=i.updateRange,l.bindBuffer(r,n),!1===i.dynamic?l.bufferData(r,a,l.STATIC_DRAW):-1===o.count?l.bufferSubData(r,0,a):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(l.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),s.version=t.version)}}}function Li(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||Li.DefaultOrder}function Ri(){this.mask=1}Object.assign(wi.prototype,i.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]="overdraw"===e?Number(n):n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==q&&(n.blending=this.blending),this.shading!==f&&(n.shading=this.shading),this.side!==B&&(n.side=this.side),this.vertexColors!==Lt&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,n.dithering=this.dithering,e){var r=i(t.textures),a=i(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),((Ti.prototype=Object.create(wi.prototype)).constructor=Ti).prototype.isShaderMaterial=!0,Ti.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=$n.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Ti.prototype.toJSON=function(t){var e=wi.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},((xi.prototype=Object.create(wi.prototype)).constructor=xi).prototype.isMeshDepthMaterial=!0,xi.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Object.assign(Ei.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.length;s<l;s+=3){var u=t[s],c=t[s+1],h=t[s+2];u<e&&(e=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.count;s<l;s++){var u=t.getX(s),c=t.getY(s),h=t.getZ(s);u<e&&(e=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:(oi=new tn,function(t,e){var n=oi.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new tn;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new tn;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:(ai=new tn,function(t){var o=this;return t.updateMatrixWorld(!0),t.traverse(function(t){var e,n,i=t.geometry;if(void 0!==i)if(i.isGeometry){var r=i.vertices;for(e=0,n=r.length;e<n;e++)ai.copy(r[e]),ai.applyMatrix4(t.matrixWorld),o.expandByPoint(ai)}else if(i.isBufferGeometry){var a=i.attributes.position;if(void 0!==a)for(e=0,n=a.count;e<n;e++)ai.fromBufferAttribute(a,e).applyMatrix4(t.matrixWorld),o.expandByPoint(ai)}}),this}),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new tn).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:(ri=new tn,function(t){return this.clampPoint(t.center,ri),ri.distanceToSquared(t.center)<=t.radius*t.radius}),intersectsPlane:function(t){var e,n;return n=t.normal.x>0?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},clampPoint:function(t,e){return(e||new tn).copy(t).clamp(this.min,this.max)},distanceToPoint:(ii=new tn,function(t){return ii.copy(t).clamp(this.min,this.max).sub(t).length()}),getBoundingSphere:(ni=new tn,function(t){var e=t||new Si;return this.getCenter(e.center),e.radius=.5*this.getSize(ni).length(),e}),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(ei=[new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn],function(t){return this.isEmpty()||(ei[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ei[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ei[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ei[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ei[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ei[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ei[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ei[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ei)),this}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(Si.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(si=new Ei,function(t,e){var n=this.center;void 0!==e?n.copy(e):si.setFromPoints(t).getCenter(n);for(var i=0,r=0,a=t.length;r<a;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),i=e||new tn;return i.copy(t),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(t){var e=t||new Ei;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(Ai.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,a,o,s,l){var u=this.elements;return u[0]=t,u[1]=i,u[2]=o,u[3]=e,u[4]=r,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:(li=new tn,function(t){for(var e=0,n=t.count;e<n;e++)li.x=t.getX(e),li.y=t.getY(e),li.z=t.getZ(e),li.applyMatrix3(this),t.setXYZ(e,li.x,li.y,li.z);return t}),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],_=i[7],b=i[2],w=i[5],T=i[8];return r[0]=a*f+o*g+s*b,r[3]=a*m+o*y+s*w,r[6]=a*v+o*_+s*T,r[1]=l*f+u*g+c*b,r[4]=l*m+u*y+c*w,r[7]=l*v+u*_+c*T,r[2]=h*f+d*g+p*b,r[5]=h*m+d*y+p*w,r[8]=h*v+d*_+p*T,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*a*u-e*o*l-n*r*u+n*o*s+i*r*l-i*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],p=d*l-u*h,f=u*c-d*s,m=h*s-l*c,v=r*p+a*f+o*m;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return i[0]=p*y,i[1]=(o*h-d*a)*y,i[2]=(u*a-o*l)*y,i[3]=f*y,i[4]=(d*r-o*c)*y,i[5]=(o*s-u*r)*y,i[6]=m*y,i[7]=(a*c-h*r)*y,i[8]=(l*r-a*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}),Object.assign(Mi.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:(di=new tn,pi=new tn,function(t,e,n){var i=di.subVectors(n,e).cross(pi.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t);return(e||new tn).copy(this.normal).multiplyScalar(n)},intersectLine:(hi=new tn,function(t,e){var n=e||new tn,i=t.delta(hi),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/r;return a<0||a>1?void 0:n.copy(i).multiplyScalar(a).add(t.start)}),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new tn).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(ui=new tn,ci=new Ai,function(t,e){var n=this.coplanarPoint(ui).applyMatrix4(t),i=e||ci.getNormalMatrix(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(Ci.prototype,{set:function(t,e,n,i,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(o-i,c-s,f-h,y-m).normalize(),e[1].setComponents(o+i,c+s,f+h,y+m).normalize(),e[2].setComponents(o+r,c+l,f+d,y+v).normalize(),e[3].setComponents(o-r,c-l,f-d,y-v).normalize(),e[4].setComponents(o-a,c-u,f-p,y-g).normalize(),e[5].setComponents(o+a,c+u,f+p,y+g).normalize(),this},intersectsObject:(gi=new Si,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),gi.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(gi)}),intersectsSprite:(vi=new Si,function(t){return vi.center.set(0,0,0),vi.radius=.7071067811865476,vi.applyMatrix4(t.matrixWorld),this.intersectsSphere(vi)}),intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:(fi=new tn,mi=new tn,function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];fi.x=i.normal.x>0?t.min.x:t.max.x,mi.x=i.normal.x>0?t.max.x:t.min.x,fi.y=i.normal.y>0?t.min.y:t.max.y,mi.y=i.normal.y>0?t.max.y:t.min.y,fi.z=i.normal.z>0?t.min.z:t.max.z,mi.z=i.normal.z>0?t.max.z:t.min.z;var r=i.distanceToPoint(fi),a=i.distanceToPoint(mi);if(r<0&&a<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}}),Li.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Li.DefaultOrder="XYZ",Object.defineProperties(Li.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(Li.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=De.clamp,r=t.elements,a=r[0],o=r[4],s=r[8],l=r[1],u=r[5],c=r[9],h=r[2],d=r[6],p=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===e?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===e?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:(_i=new en,function(t,e,n){return _i.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_i,e,n)}),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(yi=new Qe,function(t){return yi.setFromEuler(this),this.setFromQuaternion(yi,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new tn(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(Ri.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!==(this.mask&t.mask)}});var Pi,Ii,Di,ji,Ni,Ui,Bi,Fi,Vi,Hi,zi,Gi,Wi,qi,Xi,Yi,$i,Zi=0;function Ki(){Object.defineProperty(this,"id",{value:Zi++}),this.uuid=De.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ki.DefaultUp.clone();var t=new tn,e=new Li,n=new Qe,i=new tn(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new en},normalMatrix:{value:new Ai}}),this.matrix=new en,this.matrixWorld=new en,this.matrixAutoUpdate=Ki.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ri,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Ji(){Ki.call(this),this.type="Camera",this.matrixWorldInverse=new en,this.projectionMatrix=new en}function Qi(t,e,n,i,r,a){Ji.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function tr(t,e,n,i){Ji.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function er(t,e,n,i,r,a){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new tn,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Wn,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}Ki.DefaultUp=new tn(0,1,0),Ki.DefaultMatrixAutoUpdate=!0,Object.assign(Ki.prototype,i.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(Yi=new Qe,function(t,e){return Yi.setFromAxisAngle(t,e),this.quaternion.multiply(Yi),this}),rotateX:(Xi=new tn(1,0,0),function(t){return this.rotateOnAxis(Xi,t)}),rotateY:(qi=new tn(0,1,0),function(t){return this.rotateOnAxis(qi,t)}),rotateZ:(Wi=new tn(0,0,1),function(t){return this.rotateOnAxis(Wi,t)}),translateOnAxis:(Gi=new tn,function(t,e){return Gi.copy(t).applyQuaternion(this.quaternion),this.position.add(Gi.multiplyScalar(e)),this}),translateX:(zi=new tn(1,0,0),function(t){return this.translateOnAxis(zi,t)}),translateY:(Hi=new tn(0,1,0),function(t){return this.translateOnAxis(Hi,t)}),translateZ:(Vi=new tn(0,0,1),function(t){return this.translateOnAxis(Vi,t)}),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(Fi=new en,function(t){return t.applyMatrix4(Fi.getInverse(this.matrixWorld))}),lookAt:(Bi=new en,function(t){this.isCamera?Bi.lookAt(this.position,t,this.up):Bi.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(Bi)}),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",t):t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){var e=t||new tn;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Ni=new tn,Ui=new tn,function(t){var e=t||new Qe;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ni,e,Ui),e}),getWorldRotation:(ji=new Qe,function(t){var e=t||new Li;return this.getWorldQuaternion(ji),e.setFromQuaternion(ji,this.rotation.order,!1)}),getWorldScale:(Ii=new tn,Di=new Qe,function(t){var e=t||new tn;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ii,Di,e),e}),getWorldDirection:(Pi=new Qe,function(t){var e=t||new tn;return this.getWorldQuaternion(Pi),e.set(0,0,1).applyQuaternion(Pi)}),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},toJSON:function(n){var t=void 0===n||""===n,e={};t&&(n={geometries:{},materials:{},textures:{},images:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,e){return void 0===t[e.uuid]&&(t[e.uuid]=e.toJSON(n)),e.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(i.geometry=r(n.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var a=[],o=0,s=this.material.length;o<s;o++)a.push(r(n.materials,this.material[o]));i.material=a}else i.material=r(n.materials,this.material);if(this.children.length>0){i.children=[];for(o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(n).object)}if(t){var l=d(n.geometries),u=d(n.materials),c=d(n.textures),h=d(n.images);l.length>0&&(e.geometries=l),u.length>0&&(e.materials=u),c.length>0&&(e.textures=c),h.length>0&&(e.images=h)}return e.object=i,e;function d(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}),Ji.prototype=Object.assign(Object.create(Ki.prototype),{constructor:Ji,isCamera:!0,copy:function(t,e){return Ki.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:($i=new Qe,function(t){var e=t||new tn;return this.getWorldQuaternion($i),e.set(0,0,-1).applyQuaternion($i)}),updateMatrixWorld:function(t){Ki.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Qi.prototype=Object.assign(Object.create(Ji.prototype),{constructor:Qi,isOrthographicCamera:!0,copy:function(t,e){return Ji.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,a){this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:i,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,a=n+t,o=i+e,s=i-e;if(null!==this.view){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;a=(r+=c*(this.view.offsetX/l))+c*(this.view.width/l),s=(o-=h*(this.view.offsetY/u))-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far)},toJSON:function(t){var e=Ki.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),tr.prototype=Object.assign(Object.create(Ji.prototype),{constructor:tr,isPerspectiveCamera:!0,copy:function(t,e){return Ji.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*De.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*De.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*De.RAD2DEG*Math.atan(Math.tan(.5*De.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,a){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:i,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*De.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==a){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,e-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far)},toJSON:function(t){var e=Ki.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Object.assign(er.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var nr,ir,rr,ar,or,sr,lr,ur,cr,hr,dr,pr,fr,mr,vr,gr,yr,_r,br,wr,Tr,xr,Er,Sr,Ar,Mr,Cr,kr,Or,Lr,Rr,Pr,Ir,Dr,jr,Nr,Ur,Br,Fr=0;function Vr(){return Fr++}function Hr(){Object.defineProperty(this,"id",{value:Vr()}),this.uuid=De.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function zr(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=De.generateUUID(),this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Gr(t,e){zr.call(this,new Int8Array(t),e)}function Wr(t,e){zr.call(this,new Uint8Array(t),e)}function qr(t,e){zr.call(this,new Uint8ClampedArray(t),e)}function Xr(t,e){zr.call(this,new Int16Array(t),e)}function Yr(t,e){zr.call(this,new Uint16Array(t),e)}function $r(t,e){zr.call(this,new Int32Array(t),e)}function Zr(t,e){zr.call(this,new Uint32Array(t),e)}function Kr(t,e){zr.call(this,new Float32Array(t),e)}function Jr(t,e){zr.call(this,new Float64Array(t),e)}function Qr(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function ta(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}function ea(){Object.defineProperty(this,"id",{value:Vr()}),this.uuid=De.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function na(t,e,n,i,r,a){Hr.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new ia(t,e,n,i,r,a)),this.mergeVertices()}function ia(t,e,n,i,r,a){ea.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var k=this;i=Math.floor(i)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var O=[],L=[],R=[],P=[],I=0,D=0;function o(t,e,n,i,r,a,o,s,l,u,c){var h,d,p=a/l,f=o/u,m=a/2,v=o/2,g=s/2,y=l+1,_=u+1,b=0,w=0,T=new tn;for(d=0;d<_;d++){var x=d*f-v;for(h=0;h<y;h++){var E=h*p-m;T[t]=E*i,T[e]=x*r,T[n]=g,L.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[n]=s>0?1:-1,R.push(T.x,T.y,T.z),P.push(h/l),P.push(1-d/u),b+=1}}for(d=0;d<u;d++)for(h=0;h<l;h++){var S=I+h+y*d,A=I+h+y*(d+1),M=I+(h+1)+y*(d+1),C=I+(h+1)+y*d;O.push(S,A,C),O.push(A,M,C),w+=6}k.addGroup(D,w,c),D+=w,I+=b}o("z","y","x",-1,-1,n,e,t,a,r,0),o("z","y","x",1,-1,n,e,-t,a,r,1),o("x","z","y",1,1,t,n,e,i,a,2),o("x","z","y",1,-1,t,n,-e,i,a,3),o("x","y","z",1,-1,t,e,n,i,r,4),o("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(O),this.addAttribute("position",new Kr(L,3)),this.addAttribute("normal",new Kr(R,3)),this.addAttribute("uv",new Kr(P,2))}function ra(t,e,n,i){Hr.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new aa(t,e,n,i)),this.mergeVertices()}function aa(t,e,n,i){ea.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r,a,o=t/2,s=e/2,l=Math.floor(n)||1,u=Math.floor(i)||1,c=l+1,h=u+1,d=t/l,p=e/u,f=[],m=[],v=[],g=[];for(a=0;a<h;a++){var y=a*p-s;for(r=0;r<c;r++){var _=r*d-o;m.push(_,-y,0),v.push(0,0,1),g.push(r/l),g.push(1-a/u)}}for(a=0;a<u;a++)for(r=0;r<l;r++){var b=r+c*a,w=r+c*(a+1),T=r+1+c*(a+1),x=r+1+c*a;f.push(b,w,x),f.push(w,T,x)}this.setIndex(f),this.addAttribute("position",new Kr(m,3)),this.addAttribute("normal",new Kr(v,3)),this.addAttribute("uv",new Kr(g,2))}function oa(t){wi.call(this),this.type="MeshBasicMaterial",this.color=new Wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=F,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function sa(t,e){this.origin=void 0!==t?t:new tn,this.direction=void 0!==e?e:new tn}function la(t,e){this.start=void 0!==t?t:new tn,this.end=void 0!==e?e:new tn}function ua(t,e,n){this.a=void 0!==t?t:new tn,this.b=void 0!==e?e:new tn,this.c=void 0!==n?n:new tn}function ca(t,e){Ki.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new ea,this.material=void 0!==e?e:new oa({color:16777215*Math.random()}),this.drawMode=Re,this.updateMorphTargets()}function ha(r,n,a,i){var o,s,l,u,c=new Wn(0),h=0;function d(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,i)}return{getClearColor:function(){return c},setClearColor:function(t,e){c.set(t),d(c,h=void 0!==e?e:1)},getClearAlpha:function(){return h},setClearAlpha:function(t){d(c,h=t)},render:function(t,e,n){var i=t.background;null===i?d(c,h):i&&i.isColor&&(d(i,1),n=!0),(r.autoClear||n)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),i&&i.isCubeTexture?(void 0===l&&(l=new tr,u=new ca(new ia(5,5,5),new Ti({uniforms:Kn.cube.uniforms,vertexShader:Kn.cube.vertexShader,fragmentShader:Kn.cube.fragmentShader,side:$,depthTest:!1,depthWrite:!1,fog:!1}))),l.projectionMatrix.copy(e.projectionMatrix),l.matrixWorld.extractRotation(e.matrixWorld),l.matrixWorldInverse.getInverse(l.matrixWorld),u.material.uniforms.tCube.value=i,u.modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,u.matrixWorld),a.update(u),r.renderBufferDirect(l,null,u.geometry,u.material,u,null)):i&&i.isTexture&&(void 0===o&&(o=new Qi(-1,1,1,-1,0,1),s=new ca(new aa(2,2),new oa({depthTest:!1,depthWrite:!1,fog:!1}))),s.material.map=i,a.update(s),r.renderBufferDirect(o,null,s.geometry,s.material,s,null))}}}function da(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function pa(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function fa(){var l=[],u=-1,c=[],h=-1;return{opaque:l,transparent:c,init:function(){h=u=-1},push:function(t,e,n,i,r){var a,o;o=n.transparent?(a=c,++h):(a=l,++u);var s=a[o];s?(s.id=t.id,s.object=t,s.geometry=e,s.material=n,s.program=n.program,s.renderOrder=t.renderOrder,s.z=i,s.group=r):(s={id:t.id,object:t,geometry:e,material:n,program:n.program,renderOrder:t.renderOrder,z:i,group:r},a.push(s))},finish:function(){l.length=u+1,c.length=h+1},sort:function(){l.sort(da),c.sort(pa)}}}function ma(){var r={};return{get:function(t,e){var n=t.id+","+e.id,i=r[n];return void 0===i&&(i=new fa,r[n]=i),i},dispose:function(){r={}}}}function va(r,a,o){var s,l,u;this.setMode=function(t){s=t},this.setIndex=function(t){l=t.type,u=t.bytesPerElement},this.render=function(t,e){r.drawElements(s,e,l,t*u),o.calls++,o.vertices+=e,s===r.TRIANGLES&&(o.faces+=e/3)},this.renderInstances=function(t,e,n){var i=a.get("ANGLE_instanced_arrays");null!==i?(i.drawElementsInstancedANGLE(s,n,l,e*u,t.maxInstancedCount),o.calls++,o.vertices+=n*t.maxInstancedCount,s===r.TRIANGLES&&(o.faces+=t.maxInstancedCount*n/3)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function ga(a,o,s){var l;this.setMode=function(t){l=t},this.render=function(t,e){a.drawArrays(l,t,e),s.calls++,s.vertices+=e,l===a.TRIANGLES&&(s.faces+=e/3)},this.renderInstances=function(t,e,n){var i=o.get("ANGLE_instanced_arrays");if(null!==i){var r=t.attributes.position;r.isInterleavedBufferAttribute?(n=r.data.count,i.drawArraysInstancedANGLE(l,0,n,t.maxInstancedCount)):i.drawArraysInstancedANGLE(l,e,n,t.maxInstancedCount),s.calls++,s.vertices+=n*t.maxInstancedCount,l===a.TRIANGLES&&(s.faces+=t.maxInstancedCount*n/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function ya(h,d,a){var o={},p={};function s(t){var e=t.target,n=o[e.id];for(var i in null!==n.index&&d.remove(n.index),n.attributes)d.remove(n.attributes[i]);e.removeEventListener("dispose",s),delete o[e.id];var r=p[e.id];r&&(d.remove(r),delete p[e.id]),(r=p[n.id])&&(d.remove(r),delete p[n.id]),a.geometries--}return{get:function(t,e){var n=o[e.id];return n||(e.addEventListener("dispose",s),e.isBufferGeometry?n=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new ea).setFromObject(t)),n=e._bufferGeometry),o[e.id]=n,a.geometries++,n)},update:function(t){var e=t.index,n=t.attributes;for(var i in null!==e&&d.update(e,h.ELEMENT_ARRAY_BUFFER),n)d.update(n[i],h.ARRAY_BUFFER);var r=t.morphAttributes;for(var i in r)for(var a=r[i],o=0,s=a.length;o<s;o++)d.update(a[o],h.ARRAY_BUFFER)},getWireframeAttribute:function(t){var e=p[t.id];if(e)return e;var n,i=[],r=t.index,a=t.attributes;if(null!==r)for(var o=0,s=(n=r.array).length;o<s;o+=3){var l=n[o+0],u=n[o+1],c=n[o+2];i.push(l,u,u,c,c,l)}else for(o=0,s=(n=a.position.array).length/3-1;o<s;o+=3)l=o+0,u=o+1,c=o+2,i.push(l,u,u,c,c,l);return e=new(ta(i)>65535?Zr:Yr)(i,1),d.update(e,h.ELEMENT_ARRAY_BUFFER),p[t.id]=e}}}function _a(){var n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];var e;switch(t.type){case"DirectionalLight":e={direction:new tn,color:new Wn,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new bt};break;case"SpotLight":e={position:new tn,direction:new tn,color:new Wn,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new bt};break;case"PointLight":e={position:new tn,color:new Wn,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new bt};break;case"HemisphereLight":e={direction:new tn,skyColor:new Wn,groundColor:new Wn};break;case"RectAreaLight":e={color:new Wn,position:new tn,halfWidth:new tn,halfHeight:new tn}}return n[t.id]=e}}}function ba(t,r,a){var o={};return{update:function(t){var e=a.frame,n=t.geometry,i=r.get(t,n);return o[i.id]!==e&&(n.isGeometry&&i.updateFromObject(t),r.update(i),o[i.id]=e),i},clear:function(){o={}}}}function wa(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),!1===t.getShaderParameter(i,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i),function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(n)),i}Object.assign(Hr.prototype,i.prototype,{isGeometry:!0,applyMatrix:function(t){for(var e=(new Ai).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(t)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(var a=0,o=r.vertexNormals.length;a<o;a++)r.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:(sr=new en,function(t){return sr.makeRotationX(t),this.applyMatrix(sr),this}),rotateY:(or=new en,function(t){return or.makeRotationY(t),this.applyMatrix(or),this}),rotateZ:(ar=new en,function(t){return ar.makeRotationZ(t),this.applyMatrix(ar),this}),translate:(rr=new en,function(t,e,n){return rr.makeTranslation(t,e,n),this.applyMatrix(rr),this}),scale:(ir=new en,function(t,e,n){return ir.makeScale(t,e,n),this.applyMatrix(ir),this}),lookAt:(nr=new Ki,function(t){nr.lookAt(t),nr.updateMatrix(),this.applyMatrix(nr.matrix)}),fromBufferGeometry:function(t){var a=this,e=null!==t.index?t.index.array:void 0,n=t.attributes,i=n.position.array,o=void 0!==n.normal?n.normal.array:void 0,s=void 0!==n.color?n.color.array:void 0,l=void 0!==n.uv?n.uv.array:void 0,u=void 0!==n.uv2?n.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var c=[],h=[],d=[],r=0,p=0;r<i.length;r+=3,p+=2)a.vertices.push(new tn(i[r],i[r+1],i[r+2])),void 0!==o&&c.push(new tn(o[r],o[r+1],o[r+2])),void 0!==s&&a.colors.push(new Wn(s[r],s[r+1],s[r+2])),void 0!==l&&h.push(new bt(l[p],l[p+1])),void 0!==u&&d.push(new bt(u[p],u[p+1]));function f(t,e,n,i){var r=new er(t,e,n,void 0!==o?[c[t].clone(),c[e].clone(),c[n].clone()]:[],void 0!==s?[a.colors[t].clone(),a.colors[e].clone(),a.colors[n].clone()]:[],i);a.faces.push(r),void 0!==l&&a.faceVertexUvs[0].push([h[t].clone(),h[e].clone(),h[n].clone()]),void 0!==u&&a.faceVertexUvs[1].push([d[t].clone(),d[e].clone(),d[n].clone()])}var m=t.groups;if(m.length>0)for(r=0;r<m.length;r++)for(var v=m[r],g=v.start,y=(p=g,g+v.count);p<y;p+=3)void 0!==e?f(e[p],e[p+1],e[p+2],v.materialIndex):f(p,p+1,p+2,v.materialIndex);else if(void 0!==e)for(r=0;r<e.length;r+=3)f(e[r],e[r+1],e[r+2]);else for(r=0;r<i.length/3;r+=3)f(r,r+1,r+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new en;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new tn,e=new tn,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i,r,a,o;for(void 0===t&&(t=!0),o=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)o[e]=new tn;if(t){var s,l,u,c=new tn,h=new tn;for(i=0,r=this.faces.length;i<r;i++)a=this.faces[i],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],c.subVectors(u,l),h.subVectors(s,l),c.cross(h),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o[(a=this.faces[i]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(e=0,n=this.vertices.length;e<n;e++)o[e].normalize();for(i=0,r=this.faces.length;i<r;i++){var d=(a=this.faces[i]).vertexNormals;3===d.length?(d[0].copy(o[a.a]),d[1].copy(o[a.b]),d[2].copy(o[a.c])):(d[0]=o[a.a].clone(),d[1]=o[a.b].clone(),d[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var i=(n=this.faces[t]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var a=new Hr;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new tn,u={a:new tn,b:new tn,c:new tn},o.push(l),s.push(u)}var l,u,c=this.morphNormals[t];for(a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=c.faceNormals[n],u=c.vertexNormals[n],l.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var t=0,e=this.vertices,n=0,i=e.length;n<i;n++)n>0&&(t+=e[n].distanceTo(e[n-1])),this.lineDistances[n]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ei),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Si),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var i,r=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,l=t.faces,u=this.faceVertexUvs[0],c=t.faceVertexUvs[0],h=this.colors,d=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new Ai).getNormalMatrix(e));for(var p=0,f=o.length;p<f;p++){var m=o[p].clone();void 0!==e&&m.applyMatrix4(e),a.push(m)}for(p=0,f=d.length;p<f;p++)h.push(d[p].clone());for(p=0,f=l.length;p<f;p++){var v,g,y,_=l[p],b=_.vertexNormals,w=_.vertexColors;(v=new er(_.a+r,_.b+r,_.c+r)).normal.copy(_.normal),void 0!==i&&v.normal.applyMatrix3(i).normalize();for(var T=0,x=b.length;T<x;T++)g=b[T].clone(),void 0!==i&&g.applyMatrix3(i).normalize(),v.vertexNormals.push(g);v.color.copy(_.color);for(T=0,x=w.length;T<x;T++)y=w[T],v.vertexColors.push(y.clone());v.materialIndex=_.materialIndex+n,s.push(v)}for(p=0,f=c.length;p<f;p++){var E=c[p],S=[];if(void 0!==E){for(T=0,x=E.length;T<x;T++)S.push(E[T].clone());u.push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,i,r,a,o,s,l={},u=[],c=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)t=this.vertices[n],void 0===l[e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h)]?(l[e]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[e]];var d=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=c[r.a],r.b=c[r.b],r.c=c[r.c],a=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(a[p]===a[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(f,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===e&&(i=[]),o&&o.length===e&&(r=[]);for(n=0;n<e;n++){var s=t[n]._id;i&&i.push(a[s]),r&&r.push(o[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}var o=[],s=[],l={},u=[],c={},h=[],d={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,v=p.vertexNormals.length>0,g=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,_=0;if(_=x(_=x(_=x(_=x(_=x(_=x(_=x(_=x(_,0,0),1,!0),2,!1),3,f),4,m),5,v),6,g),7,y),o.push(_),o.push(p.a,p.b,p.c),o.push(p.materialIndex),f){var b=this.faceVertexUvs[0][r];o.push(A(b[0]),A(b[1]),A(b[2]))}if(m&&o.push(E(p.normal)),v){var w=p.vertexNormals;o.push(E(w[0]),E(w[1]),E(w[2]))}if(g&&o.push(S(p.color)),y){var T=p.vertexColors;o.push(S(T[0]),S(T[1]),S(T[2]))}}function x(t,e,n){return n?t|1<<e:t&~(1<<e)}function E(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]||(l[e]=s.length/3,s.push(t.x,t.y,t.z)),l[e]}function S(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]||(c[e]=u.length,u.push(t.getHex())),c[e]}function A(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]||(d[e]=h.length/2,h.push(t.x,t.y)),d[e]}return t.data={},t.data.vertices=i,t.data.normals=s,u.length>0&&(t.data.colors=u),h.length>0&&(t.data.uvs=[h]),t.data.faces=o,t},clone:function(){return(new Hr).copy(this)},copy:function(t){var e,n,i,r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var l=t.colors;for(e=0,n=l.length;e<n;e++)this.colors.push(l[e].clone());var u=t.faces;for(e=0,n=u.length;e<n;e++)this.faces.push(u[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=c.length;i<r;i++){var h=c[i],d=[];for(a=0,o=h.length;a<o;a++){var p=h[a];d.push(p.clone())}this.faceVertexUvs[e].push(d)}}var f=t.morphTargets;for(e=0,n=f.length;e<n;e++){var m={};if(m.name=f[e].name,void 0!==f[e].vertices)for(m.vertices=[],i=0,r=f[e].vertices.length;i<r;i++)m.vertices.push(f[e].vertices[i].clone());if(void 0!==f[e].normals)for(m.normals=[],i=0,r=f[e].normals.length;i<r;i++)m.normals.push(f[e].normals[i].clone());this.morphTargets.push(m)}var v=t.morphNormals;for(e=0,n=v.length;e<n;e++){var g={};if(void 0!==v[e].vertexNormals)for(g.vertexNormals=[],i=0,r=v[e].vertexNormals.length;i<r;i++){var y=v[e].vertexNormals[i],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),g.vertexNormals.push(_)}if(void 0!==v[e].faceNormals)for(g.faceNormals=[],i=0,r=v[e].faceNormals.length;i<r;i++)g.faceNormals.push(v[e].faceNormals[i].clone());this.morphNormals.push(g)}var b=t.skinWeights;for(e=0,n=b.length;e<n;e++)this.skinWeights.push(b[e].clone());var w=t.skinIndices;for(e=0,n=w.length;e<n;e++)this.skinIndices.push(w[e].clone());var T=t.lineDistances;for(e=0,n=T.length;e<n;e++)this.lineDistances.push(T[e]);var x=t.boundingBox;null!==x&&(this.boundingBox=x.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(zr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(zr.prototype,{isBufferAttribute:!0,setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new Wn),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyIndicesArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];e[n++]=a.a,e[n++]=a.b,e[n++]=a.c}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new bt),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new tn),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Ze),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(Gr.prototype=Object.create(zr.prototype)).constructor=Gr,(Wr.prototype=Object.create(zr.prototype)).constructor=Wr,(qr.prototype=Object.create(zr.prototype)).constructor=qr,(Xr.prototype=Object.create(zr.prototype)).constructor=Xr,(Yr.prototype=Object.create(zr.prototype)).constructor=Yr,($r.prototype=Object.create(zr.prototype)).constructor=$r,(Zr.prototype=Object.create(zr.prototype)).constructor=Zr,(Kr.prototype=Object.create(zr.prototype)).constructor=Kr,(Jr.prototype=Object.create(zr.prototype)).constructor=Jr,Object.assign(Qr.prototype,{computeGroups:function(t){for(var e,n=[],i=void 0,r=t.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,n.push(e)),e={start:3*a,materialIndex:i})}void 0!==e&&(e.count=3*a-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,i=t.vertices,r=t.faceVertexUvs,a=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,s=t.morphTargets,l=s.length;if(l>0){e=[];for(var u=0;u<l;u++)e[u]=[];this.morphTargets.position=e}var c,h=t.morphNormals,d=h.length;if(d>0){c=[];for(u=0;u<d;u++)c[u]=[];this.morphTargets.normal=c}var p=t.skinIndices,f=t.skinWeights,m=p.length===i.length,v=f.length===i.length;for(u=0;u<n.length;u++){var g=n[u];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=g.normal;this.normals.push(_,_,_)}var b,w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var T=g.color;this.colors.push(T,T,T)}if(!0===a)void 0!==(b=r[0][u])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new bt,new bt,new bt));if(!0===o)void 0!==(b=r[1][u])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new bt,new bt,new bt));for(var x=0;x<l;x++){var E=s[x].vertices;e[x].push(E[g.a],E[g.b],E[g.c])}for(x=0;x<d;x++){var S=h[x].vertexNormals[u];c[x].push(S.a,S.b,S.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}}),ea.MaxIndex=65535,Object.assign(ea.prototype,i.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(ta(t)>65535?Zr:Yr)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new zr(e,arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new Ai).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:(mr=new en,function(t){return mr.makeRotationX(t),this.applyMatrix(mr),this}),rotateY:(fr=new en,function(t){return fr.makeRotationY(t),this.applyMatrix(fr),this}),rotateZ:(pr=new en,function(t){return pr.makeRotationZ(t),this.applyMatrix(pr),this}),translate:(dr=new en,function(t,e,n){return dr.makeTranslation(t,e,n),this.applyMatrix(dr),this}),scale:(hr=new en,function(t,e,n){return hr.makeScale(t,e,n),this.applyMatrix(hr),this}),lookAt:(cr=new Ki,function(t){cr.lookAt(t),cr.updateMatrix(),this.applyMatrix(cr.matrix)}),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new Kr(3*e.vertices.length,3),i=new Kr(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new Kr(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Qr).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new zr(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new zr(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new zr(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new zr(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new zr(a,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var o=new(ta(t.indices)>65535?Uint32Array:Uint16Array)(3*t.indices.length);this.setIndex(new zr(o,1).copyIndicesArray(t.indices))}for(var s in this.groups=t.groups,t.morphTargets){for(var l=[],u=t.morphTargets[s],c=0,h=u.length;c<h;c++){var d=u[c],p=new Kr(3*d.length,3);l.push(p.copyVector3sArray(d))}this.morphAttributes[s]=l}if(t.skinIndices.length>0){var f=new Kr(4*t.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var m=new Kr(4*t.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ei);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:(lr=new Ei,ur=new tn,function(){null===this.boundingSphere&&(this.boundingSphere=new Si);var t=this.attributes.position;if(t){var e=this.boundingSphere.center;lr.setFromBufferAttribute(t),lr.getCenter(e);for(var n=0,i=0,r=t.count;i<r;i++)ur.x=t.getX(i),ur.y=t.getY(i),ur.z=t.getZ(i),n=Math.max(n,e.distanceToSquared(ur));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new zr(new Float32Array(i.length),3));else for(var r=e.normal.array,a=0,o=r.length;a<o;a++)r[a]=0;var s,l,u,c=e.normal.array,h=new tn,d=new tn,p=new tn,f=new tn,m=new tn;if(t){var v=t.array;0===n.length&&this.addGroup(0,v.length);for(var g=0,y=n.length;g<y;++g){var _=n[g],b=_.start;for(a=b,o=b+_.count;a<o;a+=3)s=3*v[a+0],l=3*v[a+1],u=3*v[a+2],h.fromArray(i,s),d.fromArray(i,l),p.fromArray(i,u),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),c[s]+=f.x,c[s+1]+=f.y,c[s+2]+=f.z,c[l]+=f.x,c[l+1]+=f.y,c[l+2]+=f.z,c[u]+=f.x,c[u+1]+=f.y,c[u+2]+=f.z}}else for(a=0,o=i.length;a<o;a+=9)h.fromArray(i,a),d.fromArray(i,a+3),p.fromArray(i,a+6),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),c[a]=f.x,c[a+1]=f.y,c[a+2]=f.z,c[a+3]=f.x,c[a+4]=f.y,c[a+5]=f.z,c[a+6]=f.x,c[a+7]=f.y,c[a+8]=f.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0);var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,a=t.attributes[i],o=a.array,s=0,l=a.itemSize*e;s<o.length;s++,l++)r[l]=o[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t,e,n,i,r=this.attributes.normal,a=0,o=r.count;a<o;a++)t=r.getX(a),e=r.getY(a),n=r.getZ(a),i=1/Math.sqrt(t*t+e*e+n*n),r.setXYZ(a,t*i,e*i,n*i)},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new ea,e=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],a=r.array,o=r.itemSize,s=new a.constructor(e.length*o),l=0,u=0,c=0,h=e.length;c<h;c++){l=e[c]*o;for(var d=0;d<o;d++)s[u++]=a[l++]}t.addAttribute(i,new zr(s,o))}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);t.data.index={type:i.array.constructor.name,array:r}}var a=this.attributes;for(var n in a){var o=a[n];r=Array.prototype.slice.call(o.array);t.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:r,normalized:o.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t},clone:function(){return(new ea).copy(this)},copy:function(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var a=t.attributes;for(e in a){var o=a[e];this.addAttribute(e,o.clone())}var s=t.morphAttributes;for(e in s){var l=[],u=s[e];for(n=0,i=u.length;n<i;n++)l.push(u[n].clone());this.morphAttributes[e]=l}var c=t.groups;for(n=0,i=c.length;n<i;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=t.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(na.prototype=Object.create(Hr.prototype)).constructor=na,(ia.prototype=Object.create(ea.prototype)).constructor=ia,(ra.prototype=Object.create(Hr.prototype)).constructor=ra,(aa.prototype=Object.create(ea.prototype)).constructor=aa,((oa.prototype=Object.create(wi.prototype)).constructor=oa).prototype.isMeshBasicMaterial=!0,oa.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.assign(sa.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new tn).copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:(Ar=new tn,function(t){return this.origin.copy(this.at(t,Ar)),this}),closestPointToPoint:function(t,e){var n=e||new tn;n.subVectors(t,this.origin);var i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:(Sr=new tn,function(t){var e=Sr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Sr.copy(this.direction).multiplyScalar(e).add(this.origin),Sr.distanceToSquared(t))}),distanceSqToSegment:(Tr=new tn,xr=new tn,Er=new tn,function(t,e,n,i){Tr.copy(t).add(e).multiplyScalar(.5),xr.copy(e).sub(t).normalize(),Er.copy(this.origin).sub(Tr);var r,a,o,s,l=.5*t.distanceTo(e),u=-this.direction.dot(xr),c=Er.dot(this.direction),h=-Er.dot(xr),d=Er.lengthSq(),p=Math.abs(1-u*u);if(p>0)if(a=u*c-h,s=l*p,(r=u*h-c)>=0)if(a>=-s)if(a<=s){var f=1/p;o=(r*=f)*(r+u*(a*=f)+2*c)+a*(u*r+a+2*h)+d}else a=l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+d;else a=-l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+d;else o=a<=-s?-(r=Math.max(0,-(-u*l+c)))*r+(a=r>0?-l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d:a<=s?(r=0,(a=Math.min(Math.max(-l,-h),l))*(a+2*h)+d):-(r=Math.max(0,-(u*l+c)))*r+(a=r>0?l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d;else a=u>0?-l:l,o=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(xr).multiplyScalar(a).add(Tr),o}),intersectSphere:(wr=new tn,function(t,e){wr.subVectors(t.center,this.origin);var n=wr.dot(this.direction),i=wr.dot(wr)-n*n,r=t.radius*t.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)}),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,i,r,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return i=l>=0?(n=(t.min.x-h.x)*l,(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,(t.min.x-h.x)*l),n>(a=u>=0?(r=(t.min.y-h.y)*u,(t.max.y-h.y)*u):(r=(t.max.y-h.y)*u,(t.min.y-h.y)*u))||r>i?null:((r>n||n!==n)&&(n=r),(a<i||i!==i)&&(i=a),n>(s=c>=0?(o=(t.min.z-h.z)*c,(t.max.z-h.z)*c):(o=(t.max.z-h.z)*c,(t.min.z-h.z)*c))||o>i?null:((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:(br=new tn,function(t){return null!==this.intersectBox(t,br)}),intersectTriangle:(vr=new tn,gr=new tn,yr=new tn,_r=new tn,function(t,e,n,i,r){gr.subVectors(e,t),yr.subVectors(n,t),_r.crossVectors(gr,yr);var a,o=this.direction.dot(_r);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}vr.subVectors(this.origin,t);var s=a*this.direction.dot(yr.crossVectors(vr,yr));if(s<0)return null;var l=a*this.direction.dot(gr.cross(vr));if(l<0)return null;if(s+l>o)return null;var u=-a*vr.dot(_r);return u<0?null:this.at(u/o,r)}),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(la.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return(t||new tn).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new tn).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var n=e||new tn;return this.delta(n).multiplyScalar(t).add(this.start)},closestPointToPointParameter:(Mr=new tn,Cr=new tn,function(t,e){Mr.subVectors(t,this.start),Cr.subVectors(this.end,this.start);var n=Cr.dot(Cr),i=Cr.dot(Mr)/n;return e&&(i=De.clamp(i,0,1)),i}),closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e),r=n||new tn;return this.delta(r).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(ua,{normal:(Pr=new tn,function(t,e,n,i){var r=i||new tn;r.subVectors(n,e),Pr.subVectors(t,e),r.cross(Pr);var a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}),barycoordFromPoint:(Or=new tn,Lr=new tn,Rr=new tn,function(t,e,n,i,r){Or.subVectors(i,e),Lr.subVectors(n,e),Rr.subVectors(t,e);var a=Or.dot(Or),o=Or.dot(Lr),s=Or.dot(Rr),l=Lr.dot(Lr),u=Lr.dot(Rr),c=a*l-o*o,h=r||new tn;if(0===c)return h.set(-2,-1,-1);var d=1/c,p=(l*s-o*u)*d,f=(a*u-o*s)*d;return h.set(1-p-f,f,p)}),containsPoint:(kr=new tn,function(t,e,n,i){var r=ua.barycoordFromPoint(t,e,n,i,kr);return r.x>=0&&r.y>=0&&r.x+r.y<=1})}),Object.assign(ua.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:(Ur=new tn,Br=new tn,function(){return Ur.subVectors(this.c,this.b),Br.subVectors(this.a,this.b),.5*Ur.cross(Br).length()}),midpoint:function(t){return(t||new tn).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return ua.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new Mi).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return ua.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return ua.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:(Ir=new Mi,Dr=[new la,new la,new la],jr=new tn,Nr=new tn,function(t,e){var n=e||new tn,i=1/0;if(Ir.setFromCoplanarPoints(this.a,this.b,this.c),Ir.projectPoint(t,jr),!0===this.containsPoint(jr))n.copy(jr);else{Dr[0].set(this.a,this.b),Dr[1].set(this.b,this.c),Dr[2].set(this.c,this.a);for(var r=0;r<Dr.length;r++){Dr[r].closestPointToPoint(jr,!0,Nr);var a=jr.distanceToSquared(Nr);a<i&&(i=a,n.copy(Nr))}}return n}),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),ca.prototype=Object.assign(Object.create(Ki.prototype),{constructor:ca,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return Ki.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=i.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)n=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}},raycast:function(){var P=new en,I=new sa,D=new Si,j=new tn,N=new tn,U=new tn,B=new tn,F=new tn,V=new tn,H=new bt,z=new bt,G=new bt,s=new tn,W=new tn,u=new tn;function q(t,e,n,i,r,a,o){return ua.barycoordFromPoint(t,e,n,i,s),r.multiplyScalar(s.x),a.multiplyScalar(s.y),o.multiplyScalar(s.z),r.add(a).add(o),r.clone()}function X(t,e,n,i,r,a,o){var s=t.material;if(null===(s.side===$?n.intersectTriangle(a,r,i,!0,o):n.intersectTriangle(i,r,a,s.side!==Z,o)))return null;u.copy(o),u.applyMatrix4(t.matrixWorld);var l=e.ray.origin.distanceTo(u);return l<e.near||l>e.far?null:{distance:l,point:u.clone(),object:t}}function Y(t,e,n,i,r,a,o,s){j.fromBufferAttribute(i,a),N.fromBufferAttribute(i,o),U.fromBufferAttribute(i,s);var l=X(t,e,n,j,N,U,W);return l&&(r&&(H.fromBufferAttribute(r,a),z.fromBufferAttribute(r,o),G.fromBufferAttribute(r,s),l.uv=q(W,j,N,U,H,z,G)),l.face=new er(a,o,s,ua.normal(j,N,U)),l.faceIndex=a),l}return function(t,e){var n,i=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),D.copy(i.boundingSphere),D.applyMatrix4(a),!1!==t.ray.intersectsSphere(D)&&(P.getInverse(a),I.copy(t.ray).applyMatrix4(P),null===i.boundingBox||!1!==I.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o,s,l,u,c,h=i.index,d=i.attributes.position,p=i.attributes.uv;if(null!==h)for(u=0,c=h.count;u<c;u+=3)o=h.getX(u),s=h.getX(u+1),l=h.getX(u+2),(n=Y(this,t,I,d,p,o,s,l))&&(n.faceIndex=Math.floor(u/3),e.push(n));else for(u=0,c=d.count;u<c;u+=3)(n=Y(this,t,I,d,p,o=u,s=u+1,l=u+2))&&(n.index=o,e.push(n))}else if(i.isGeometry){var f,m,v,g,y=Array.isArray(r),_=i.vertices,b=i.faces,w=i.faceVertexUvs[0];w.length>0&&(g=w);for(var T=0,x=b.length;T<x;T++){var E=b[T],S=y?r[E.materialIndex]:r;if(void 0!==S){if(f=_[E.a],m=_[E.b],v=_[E.c],!0===S.morphTargets){var A=i.morphTargets,M=this.morphTargetInfluences;j.set(0,0,0),N.set(0,0,0),U.set(0,0,0);for(var C=0,k=A.length;C<k;C++){var O=M[C];if(0!==O){var L=A[C].vertices;j.addScaledVector(B.subVectors(L[E.a],f),O),N.addScaledVector(F.subVectors(L[E.b],m),O),U.addScaledVector(V.subVectors(L[E.c],v),O)}}j.add(f),N.add(m),U.add(v),f=j,m=N,v=U}if(n=X(this,t,I,f,m,v,W)){if(g&&g[T]){var R=g[T];H.copy(R[0]),z.copy(R[1]),G.copy(R[2]),n.uv=q(W,f,m,v,H,z,G)}n.face=E,n.faceIndex=T,e.push(n)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ta,xa,Ea,Sa,Aa,Ma,Ca,ka,Oa,La,Ra,Pa,Ia,Da,ja=0;function Na(t){switch(t){case C:return["Linear","( value )"];case k:return["sRGB","( value )"];case L:return["RGBE","( value )"];case P:return["RGBM","( value, 7.0 )"];case I:return["RGBM","( value, 16.0 )"];case D:return["RGBD","( value, 256.0 )"];case O:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Ua(t,e){var n=Na(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ba(t){return""!==t}function Fa(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Va(t){return t.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(t,e){var n=Zn[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Va(n)})}function Ha(t){return t.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,n,i){for(var r="",a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]");return r})}function za(t,e,n,i,r){var a=t.context,o=n.extensions,s=n.defines,l=i.vertexShader,u=i.fragmentShader,c="SHADOWMAP_TYPE_BASIC";r.shadowMapType===N?c="SHADOWMAP_TYPE_PCF":r.shadowMapType===U&&(c="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case dt:case pt:h="ENVMAP_TYPE_CUBE";break;case gt:case yt:h="ENVMAP_TYPE_CUBE_UV";break;case ft:case mt:h="ENVMAP_TYPE_EQUIREC";break;case vt:h="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case pt:case mt:d="ENVMAP_MODE_REFRACTION"}switch(n.combine){case F:p="ENVMAP_BLENDING_MULTIPLY";break;case V:p="ENVMAP_BLENDING_MIX";break;case st:p="ENVMAP_BLENDING_ADD"}}var f,m,v,g,y,_,b,w,T=t.gammaFactor>0?t.gammaFactor:1,x=(f=o,m=r,v=t.extensions,[(f=f||{}).derivatives||m.envMapCubeUV||m.bumpMap||m.normalMap||m.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(f.fragDepth||m.logarithmicDepthBuffer)&&v.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",f.drawBuffers&&v.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(f.shaderTextureLOD||m.envMap)&&v.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ba).join("\n")),E=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(s),S=a.createProgram();y=n.isRawShaderMaterial?(g=[E,"\n"].filter(Ba).join("\n"),[x,E,"\n"].filter(Ba).join("\n")):(g=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+i.name,E,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+T,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ba).join("\n"),[x,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+i.name,E,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+T,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+d:"",r.envMap?"#define "+p:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(r.numClippingPlanes-r.numClipIntersection),r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==lt?"#define TONE_MAPPING":"",r.toneMapping!==lt?Zn.tonemapping_pars_fragment:"",r.toneMapping!==lt?function(t,e){var n;switch(e){case Yt:n="Linear";break;case ut:n="Reinhard";break;case ct:n="Uncharted2";break;case ht:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?Zn.encodings_pars_fragment:"",r.mapEncoding?Ua("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?Ua("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?Ua("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?(_="linearToOutputTexel",b=r.outputEncoding,w=Na(b),"vec4 "+_+"( vec4 value ) { return LinearTo"+w[0]+w[1]+"; }"):"",r.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ba).join("\n")),l=Fa(l=Va(l),r),u=Fa(u=Va(u),r),n.isShaderMaterial||(l=Ha(l),u=Ha(u));var A=g+l,M=y+u,C=wa(a,a.VERTEX_SHADER,A),k=wa(a,a.FRAGMENT_SHADER,M);a.attachShader(S,C),a.attachShader(S,k),void 0!==n.index0AttributeName?a.bindAttribLocation(S,0,n.index0AttributeName):!0===r.morphTargets&&a.bindAttribLocation(S,0,"position"),a.linkProgram(S);var O,L,R=a.getProgramInfoLog(S),P=a.getShaderInfoLog(C),I=a.getShaderInfoLog(k),D=!0,j=!0;return!1===a.getProgramParameter(S,a.LINK_STATUS)?(D=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(S,a.VALIDATE_STATUS),"gl.getProgramInfoLog",R,P,I)):""!==R?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",R):""!==P&&""!==I||(j=!1),j&&(this.diagnostics={runnable:D,material:n,programLog:R,vertexShader:{log:P,prefix:g},fragmentShader:{log:I,prefix:y}}),a.deleteShader(C),a.deleteShader(k),this.getUniforms=function(){return void 0===O&&(O=new zn(a,S,t)),O},this.getAttributes=function(){return void 0===L&&(L=function(t,e,n){for(var i={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<r;a++){var o=t.getActiveAttrib(e,a).name;i[o]=t.getAttribLocation(e,o)}return i}(a,S)),L},this.destroy=function(){a.deleteProgram(S),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=ja++,this.code=e,this.usedTimes=1,this.program=S,this.vertexShader=C,this.fragmentShader=k,this}function Ga(c,h){var l=[],d={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function p(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=C,n===C&&e&&(n=O),n}this.getParameters=function(t,e,n,i,r,a){var o=d[t.type],s=a.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(h.floatVertexTextures)return 1024;var n=h.maxVertexUniforms,i=Math.floor((n-20)/4),r=Math.min(i,e.length);return r<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+r+"."),0):r}(a):0,l=c.getPrecision();null!==t.precision&&(l=h.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",l,"instead.");var u=c.getRenderTarget();return{shaderID:o,precision:l,supportsVertexTextures:h.vertexTextures,outputEncoding:p(u?u.texture:null,c.gammaOutput),map:!!t.map,mapEncoding:p(t.map,c.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:p(t.envMap,c.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===gt||t.envMap.mapping===yt),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:p(t.emissiveMap,c.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!n,useFog:t.fog,fogExp:n&&n.isFogExp2,flatShading:t.shading===Ot,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:h.logarithmicDepthBuffer,skinning:t.skinning&&s>0,maxBones:s,useVertexTexture:h.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:c.maxMorphTargets,maxMorphNormals:c.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numClippingPlanes:i,numClipIntersection:r,dithering:t.dithering,shadowMapEnabled:c.shadowMap.enabled&&a.receiveShadow&&e.shadows.length>0,shadowMapType:c.shadowMap.type,toneMapping:c.toneMapping,physicallyCorrectLights:c.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===Z,flipSided:t.side===$,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);for(var r=0;r<a.length;r++)n.push(e[a[r]]);return n.push(t.onBeforeCompile.toString()),n.push(c.gammaOutput),n.join()},this.acquireProgram=function(t,e,n,i){for(var r,a=0,o=l.length;a<o;a++){var s=l[a];if(s.code===i){++(r=s).usedTimes;break}}return void 0===r&&(r=new za(c,i,t,e,n),l.push(r)),r},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=l.indexOf(t);l[e]=l[l.length-1],l.pop(),t.destroy()}},this.programs=l}function Wa(f,r,m,v,g,y,_){var p="undefined"!==typeof WebGL2RenderingContext&&f instanceof WebGL2RenderingContext;function b(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(t.width*n),i.height=Math.floor(t.height*n),i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+i.width+"x"+i.height,t),i}return t}function w(t){return De.isPowerOfTwo(t.width)&&De.isPowerOfTwo(t.height)}function T(t,e){return t.generateMipmaps&&e&&t.minFilter!==Jt&&t.minFilter!==ee}function a(t){return t===Jt||t===Qt||t===te?f.NEAREST:f.LINEAR}function x(t){var e=t.target;e.removeEventListener("dispose",x),function(t){var e=v.get(t);if(t.image&&e.__image__webglTextureCube)f.deleteTexture(e.__image__webglTextureCube);else{if(void 0===e.__webglInit)return;f.deleteTexture(e.__webglTexture)}v.remove(t)}(e),_.textures--}function o(t){var e=t.target;e.removeEventListener("dispose",o),function(t){var e=v.get(t),n=v.get(t.texture);if(!t)return;void 0!==n.__webglTexture&&f.deleteTexture(n.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var i=0;i<6;i++)f.deleteFramebuffer(e.__webglFramebuffer[i]),e.__webglDepthbuffer&&f.deleteRenderbuffer(e.__webglDepthbuffer[i]);else f.deleteFramebuffer(e.__webglFramebuffer),e.__webglDepthbuffer&&f.deleteRenderbuffer(e.__webglDepthbuffer);v.remove(t.texture),v.remove(t)}(e),_.textures--}function s(t,e){var n=v.get(t);if(t.version>0&&n.__version!==t.version){var i=t.image;if(void 0===i)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==i.complete)return void function(t,e,n){void 0===t.__webglInit&&(t.__webglInit=!0,e.addEventListener("dispose",x),t.__webglTexture=f.createTexture(),_.textures++);m.activeTexture(f.TEXTURE0+n),m.bindTexture(f.TEXTURE_2D,t.__webglTexture),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,e.flipY),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),f.pixelStorei(f.UNPACK_ALIGNMENT,e.unpackAlignment);var i=b(e.image,g.maxTextureSize);r=e,(r.wrapS!==Zt||r.wrapT!==Zt||r.minFilter!==Jt&&r.minFilter!==ee)&&!1===w(i)&&(i=function(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.width=De.nearestPowerOfTwo(t.width),e.height=De.nearestPowerOfTwo(t.height),e.getContext("2d").drawImage(t,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+e.width+"x"+e.height,t),e}return t}(i));var r;var a=w(i),o=y(e.format),s=y(e.type);E(f.TEXTURE_2D,e,a);var l,u=e.mipmaps;if(e.isDepthTexture){var c=f.DEPTH_COMPONENT;if(e.type===ce){if(!p)throw new Error("Float Depth Texture only supported in WebGL2.0");c=f.DEPTH_COMPONENT32F}else p&&(c=f.DEPTH_COMPONENT16);e.format===we&&c===f.DEPTH_COMPONENT&&e.type!==se&&e.type!==ue&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),e.type=se,s=y(e.type)),e.format===Te&&(c=f.DEPTH_STENCIL,e.type!==me&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),e.type=me,s=y(e.type))),m.texImage2D(f.TEXTURE_2D,0,c,i.width,i.height,0,o,s,null)}else if(e.isDataTexture)if(u.length>0&&a){for(var h=0,d=u.length;h<d;h++)l=u[h],m.texImage2D(f.TEXTURE_2D,h,o,l.width,l.height,0,o,s,l.data);e.generateMipmaps=!1}else m.texImage2D(f.TEXTURE_2D,0,o,i.width,i.height,0,o,s,i.data);else if(e.isCompressedTexture)for(var h=0,d=u.length;h<d;h++)l=u[h],e.format!==ye&&e.format!==ge?m.getCompressedTextureFormats().indexOf(o)>-1?m.compressedTexImage2D(f.TEXTURE_2D,h,o,l.width,l.height,0,l.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):m.texImage2D(f.TEXTURE_2D,h,o,l.width,l.height,0,o,s,l.data);else if(u.length>0&&a){for(var h=0,d=u.length;h<d;h++)l=u[h],m.texImage2D(f.TEXTURE_2D,h,o,o,s,l);e.generateMipmaps=!1}else m.texImage2D(f.TEXTURE_2D,0,o,o,s,i);T(e,a)&&f.generateMipmap(f.TEXTURE_2D);t.__version=e.version,e.onUpdate&&e.onUpdate(e)}(n,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}m.activeTexture(f.TEXTURE0+e),m.bindTexture(f.TEXTURE_2D,n.__webglTexture)}function E(t,e,n){var i;if(n?(f.texParameteri(t,f.TEXTURE_WRAP_S,y(e.wrapS)),f.texParameteri(t,f.TEXTURE_WRAP_T,y(e.wrapT)),f.texParameteri(t,f.TEXTURE_MAG_FILTER,y(e.magFilter)),f.texParameteri(t,f.TEXTURE_MIN_FILTER,y(e.minFilter))):(f.texParameteri(t,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(t,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),e.wrapS===Zt&&e.wrapT===Zt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",e),f.texParameteri(t,f.TEXTURE_MAG_FILTER,a(e.magFilter)),f.texParameteri(t,f.TEXTURE_MIN_FILTER,a(e.minFilter)),e.minFilter!==Jt&&e.minFilter!==ee&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",e)),i=r.get("EXT_texture_filter_anisotropic")){if(e.type===ce&&null===r.get("OES_texture_float_linear"))return;if(e.type===he&&null===r.get("OES_texture_half_float_linear"))return;(e.anisotropy>1||v.get(e).__currentAnisotropy)&&(f.texParameterf(t,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,g.getMaxAnisotropy())),v.get(e).__currentAnisotropy=e.anisotropy)}}function l(t,e,n,i){var r=y(e.texture.format),a=y(e.texture.type);m.texImage2D(i,0,r,e.width,e.height,0,r,a,null),f.bindFramebuffer(f.FRAMEBUFFER,t),f.framebufferTexture2D(f.FRAMEBUFFER,n,i,v.get(e.texture).__webglTexture,0),f.bindFramebuffer(f.FRAMEBUFFER,null)}function u(t,e){f.bindRenderbuffer(f.RENDERBUFFER,t),e.depthBuffer&&!e.stencilBuffer?(f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,e.width,e.height),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,t)):e.depthBuffer&&e.stencilBuffer?(f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_STENCIL,e.width,e.height),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,t)):f.renderbufferStorage(f.RENDERBUFFER,f.RGBA4,e.width,e.height),f.bindRenderbuffer(f.RENDERBUFFER,null)}function c(t){var e=v.get(t),n=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,e){if(e&&e.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(f.bindFramebuffer(f.FRAMEBUFFER,t),!e.depthTexture||!e.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");v.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),s(e.depthTexture,0);var n=v.get(e.depthTexture).__webglTexture;if(e.depthTexture.format===we)f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.TEXTURE_2D,n,0);else{if(e.depthTexture.format!==Te)throw new Error("Unknown depthTexture format");f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.TEXTURE_2D,n,0)}}(e.__webglFramebuffer,t)}else if(n){e.__webglDepthbuffer=[];for(var i=0;i<6;i++)f.bindFramebuffer(f.FRAMEBUFFER,e.__webglFramebuffer[i]),e.__webglDepthbuffer[i]=f.createRenderbuffer(),u(e.__webglDepthbuffer[i],t)}else f.bindFramebuffer(f.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=f.createRenderbuffer(),u(e.__webglDepthbuffer,t);f.bindFramebuffer(f.FRAMEBUFFER,null)}this.setTexture2D=s,this.setTextureCube=function(t,e){var n=v.get(t);if(6===t.image.length)if(t.version>0&&n.__version!==t.version){n.__image__webglTextureCube||(t.addEventListener("dispose",x),n.__image__webglTextureCube=f.createTexture(),_.textures++),m.activeTexture(f.TEXTURE0+e),m.bindTexture(f.TEXTURE_CUBE_MAP,n.__image__webglTextureCube),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var i=t&&t.isCompressedTexture,r=t.image[0]&&t.image[0].isDataTexture,a=[],o=0;o<6;o++)a[o]=i||r?r?t.image[o].image:t.image[o]:b(t.image[o],g.maxCubemapSize);var s=w(a[0]),l=y(t.format),u=y(t.type);for(E(f.TEXTURE_CUBE_MAP,t,s),o=0;o<6;o++)if(i)for(var c,h=a[o].mipmaps,d=0,p=h.length;d<p;d++)c=h[d],t.format!==ye&&t.format!==ge?m.getCompressedTextureFormats().indexOf(l)>-1?m.compressedTexImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+o,d,l,c.width,c.height,0,c.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):m.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+o,d,l,c.width,c.height,0,l,u,c.data);else r?m.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,a[o].width,a[o].height,0,l,u,a[o].data):m.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,l,u,a[o]);T(t,s)&&f.generateMipmap(f.TEXTURE_CUBE_MAP),n.__version=t.version,t.onUpdate&&t.onUpdate(t)}else m.activeTexture(f.TEXTURE0+e),m.bindTexture(f.TEXTURE_CUBE_MAP,n.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,e){m.activeTexture(f.TEXTURE0+e),m.bindTexture(f.TEXTURE_CUBE_MAP,v.get(t).__webglTexture)},this.setupRenderTarget=function(t){var e=v.get(t),n=v.get(t.texture);t.addEventListener("dispose",o),n.__webglTexture=f.createTexture(),_.textures++;var i=!0===t.isWebGLRenderTargetCube,r=w(t);if(i){e.__webglFramebuffer=[];for(var a=0;a<6;a++)e.__webglFramebuffer[a]=f.createFramebuffer()}else e.__webglFramebuffer=f.createFramebuffer();if(i){for(m.bindTexture(f.TEXTURE_CUBE_MAP,n.__webglTexture),E(f.TEXTURE_CUBE_MAP,t.texture,r),a=0;a<6;a++)l(e.__webglFramebuffer[a],t,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+a);T(t.texture,r)&&f.generateMipmap(f.TEXTURE_CUBE_MAP),m.bindTexture(f.TEXTURE_CUBE_MAP,null)}else m.bindTexture(f.TEXTURE_2D,n.__webglTexture),E(f.TEXTURE_2D,t.texture,r),l(e.__webglFramebuffer,t,f.COLOR_ATTACHMENT0,f.TEXTURE_2D),T(t.texture,r)&&f.generateMipmap(f.TEXTURE_2D),m.bindTexture(f.TEXTURE_2D,null);t.depthBuffer&&c(t)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(T(e,w(t))){var n=t.isWebGLRenderTargetCube?f.TEXTURE_CUBE_MAP:f.TEXTURE_2D,i=v.get(e).__webglTexture;m.bindTexture(n,i),f.generateMipmap(n),m.bindTexture(n,null)}}}function qa(){var i={};return{get:function(t){var e=t.uuid,n=i[e];return void 0===n&&(n={},i[e]=n),n},remove:function(t){delete i[t.uuid]},clear:function(){i={}}}}function Xa(c,n,l){var e=new function(){var e=!1,a=new Ze,n=null,o=new Ze;return{setMask:function(t){n===t||e||(c.colorMask(t,t,t,t),n=t)},setLocked:function(t){e=t},setClear:function(t,e,n,i,r){!0===r&&(t*=i,e*=i,n*=i),a.set(t,e,n,i),!1===o.equals(a)&&(c.clearColor(t,e,n,i),o.copy(a))},reset:function(){e=!1,n=null,o.set(0,0,0,1)}}},i=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?D(c.DEPTH_TEST):j(c.DEPTH_TEST)},setMask:function(t){n===t||e||(c.depthMask(t),n=t)},setFunc:function(t){if(i!==t){if(t)switch(t){case Q:c.depthFunc(c.NEVER);break;case tt:c.depthFunc(c.ALWAYS);break;case et:c.depthFunc(c.LESS);break;case nt:c.depthFunc(c.LEQUAL);break;case it:c.depthFunc(c.EQUAL);break;case rt:c.depthFunc(c.GEQUAL);break;case at:c.depthFunc(c.GREATER);break;case ot:c.depthFunc(c.NOTEQUAL);break;default:c.depthFunc(c.LEQUAL)}else c.depthFunc(c.LEQUAL);i=t}},setLocked:function(t){e=t},setClear:function(t){r!==t&&(c.clearDepth(t),r=t)},reset:function(){e=!1,r=i=n=null}}},r=new function(){var e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(t){t?D(c.STENCIL_TEST):j(c.STENCIL_TEST)},setMask:function(t){n===t||e||(c.stencilMask(t),n=t)},setFunc:function(t,e,n){i===t&&r===e&&a===n||(c.stencilFunc(t,e,n),i=t,r=e,a=n)},setOp:function(t,e,n){o===t&&s===e&&l===n||(c.stencilOp(t,e,n),o=t,s=e,l=n)},setLocked:function(t){e=t},setClear:function(t){u!==t&&(c.clearStencil(t),u=t)},reset:function(){e=!1,u=l=s=o=a=r=i=n=null}}},t=c.getParameter(c.MAX_VERTEX_ATTRIBS),a=new Uint8Array(t),o=new Uint8Array(t),s=new Uint8Array(t),u={},h=null,d=null,p=null,f=null,m=null,v=null,g=null,y=null,_=!1,b=null,w=null,T=null,x=null,E=null,S=null,A=c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS),M=parseFloat(/^WebGL\ ([0-9])/.exec(c.getParameter(c.VERSION))[1]),C=parseFloat(M)>=1,k=null,O={},L=new Ze,R=new Ze;function P(t,e,n){var i=new Uint8Array(4),r=c.createTexture();c.bindTexture(t,r),c.texParameteri(t,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(t,c.TEXTURE_MAG_FILTER,c.NEAREST);for(var a=0;a<n;a++)c.texImage2D(e+a,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,i);return r}var I={};function D(t){!0!==u[t]&&(c.enable(t),u[t]=!0)}function j(t){!1!==u[t]&&(c.disable(t),u[t]=!1)}function N(t,e,n,i,r,a,o,s){t!==W?D(c.BLEND):j(c.BLEND),t===J||t===d&&s===_||(t===X?s?(c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE)):(c.blendEquation(c.FUNC_ADD),c.blendFunc(c.SRC_ALPHA,c.ONE)):t===Y?s?(c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ZERO,c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ONE_MINUS_SRC_ALPHA)):(c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ZERO,c.ONE_MINUS_SRC_COLOR)):t===K?s?(c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA)):(c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ZERO,c.SRC_COLOR)):s?(c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA)):(c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA)),d=t,_=s),t===J?(r=r||e,a=a||n,o=o||i,e===p&&r===v||(c.blendEquationSeparate(l(e),l(r)),p=e,v=r),n===f&&i===m&&a===g&&o===y||(c.blendFuncSeparate(l(n),l(i),l(a),l(o)),f=n,m=i,g=a,y=o)):y=g=v=m=f=p=null}function U(t){b!==t&&(t?c.frontFace(c.CW):c.frontFace(c.CCW),b=t)}function B(t){t!==H?(D(c.CULL_FACE),t!==w&&(t===z?c.cullFace(c.BACK):t===G?c.cullFace(c.FRONT):c.cullFace(c.FRONT_AND_BACK))):j(c.CULL_FACE),w=t}function F(t,e,n){t?(D(c.POLYGON_OFFSET_FILL),x===e&&E===n||(c.polygonOffset(e,n),x=e,E=n)):j(c.POLYGON_OFFSET_FILL)}function V(t){void 0===t&&(t=c.TEXTURE0+A-1),k!==t&&(c.activeTexture(t),k=t)}return I[c.TEXTURE_2D]=P(c.TEXTURE_2D,c.TEXTURE_2D,1),I[c.TEXTURE_CUBE_MAP]=P(c.TEXTURE_CUBE_MAP,c.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:e,depth:i,stencil:r},init:function(){e.setClear(0,0,0,1),i.setClear(1),r.setClear(0),D(c.DEPTH_TEST),i.setFunc(nt),U(!1),B(z),D(c.CULL_FACE),D(c.BLEND),N(q)},initAttributes:function(){for(var t=0,e=a.length;t<e;t++)a[t]=0},enableAttribute:function(t){a[t]=1,0===o[t]&&(c.enableVertexAttribArray(t),o[t]=1),0!==s[t]&&(n.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(t,0),s[t]=0)},enableAttributeAndDivisor:function(t,e){a[t]=1,0===o[t]&&(c.enableVertexAttribArray(t),o[t]=1),s[t]!==e&&(n.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(t,e),s[t]=e)},disableUnusedAttributes:function(){for(var t=0,e=o.length;t!==e;++t)o[t]!==a[t]&&(c.disableVertexAttribArray(t),o[t]=0)},enable:D,disable:j,getCompressedTextureFormats:function(){if(null===h&&(h=[],n.get("WEBGL_compressed_texture_pvrtc")||n.get("WEBGL_compressed_texture_s3tc")||n.get("WEBGL_compressed_texture_etc1")))for(var t=c.getParameter(c.COMPRESSED_TEXTURE_FORMATS),e=0;e<t.length;e++)h.push(t[e]);return h},setBlending:N,setMaterial:function(t){t.side===Z?j(c.CULL_FACE):D(c.CULL_FACE),U(t.side===$),!0===t.transparent?N(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):N(W),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),e.setMask(t.colorWrite),F(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:U,setCullFace:B,setLineWidth:function(t){t!==T&&(C&&c.lineWidth(t),T=t)},setPolygonOffset:F,getScissorTest:function(){return S},setScissorTest:function(t){(S=t)?D(c.SCISSOR_TEST):j(c.SCISSOR_TEST)},activeTexture:V,bindTexture:function(t,e){null===k&&V();var n=O[k];void 0===n&&(n={type:void 0,texture:void 0},O[k]=n),n.type===t&&n.texture===e||(c.bindTexture(t,e||I[t]),n.type=t,n.texture=e)},compressedTexImage2D:function(){try{c.compressedTexImage2D.apply(c,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{c.texImage2D.apply(c,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===L.equals(t)&&(c.scissor(t.x,t.y,t.z,t.w),L.copy(t))},viewport:function(t){!1===R.equals(t)&&(c.viewport(t.x,t.y,t.z,t.w),R.copy(t))},reset:function(){for(var t=0;t<o.length;t++)1===o[t]&&(c.disableVertexAttribArray(t),o[t]=0);u={},O={},w=b=d=k=h=null,e.reset(),i.reset(),r.reset()}}}function Ya(e,n,t){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a=void 0!==t.precision?t.precision:"highp",o=r(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);var s=!0===t.logarithmicDepthBuffer&&!!n.get("EXT_frag_depth"),l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),f=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=u>0,g=!!n.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var t=n.get("EXT_texture_filter_anisotropic");return i=null!==t?e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:s,maxTextures:l,maxVertexTextures:u,maxTextureSize:c,maxCubemapSize:h,maxAttributes:d,maxVertexUniforms:p,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:g,floatVertexTextures:v&&g}}function $a(t){tr.call(this),this.cameras=t||[]}function Za(i){var r=this,o=null,s=null;"VRFrameData"in window&&(s=new window.VRFrameData);var l=new en,u=new en,c=new en,h=new tr;h.bounds=new Ze(0,0,.5,1),h.layers.enable(1);var d=new tr;d.bounds=new Ze(.5,0,.5,1),d.layers.enable(2);var a,p,f=new $a([h,d]);f.layers.enable(1),f.layers.enable(2),window.addEventListener("vrdisplaypresentchange",function(){if(o.isPresenting){var t=o.getEyeParameters("left"),e=t.renderWidth,n=t.renderHeight;p=i.getPixelRatio(),a=i.getSize(),i.setDrawingBufferSize(2*e,n,1)}else r.enabled&&i.setDrawingBufferSize(a.width,a.height,p)},!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return o},this.setDevice=function(t){void 0!==t&&(o=t)},this.getCamera=function(t){if(null===o)return t;o.depthNear=t.near,o.depthFar=t.far,o.getFrameData(s);var e=s.pose;null!==e.position?t.position.fromArray(e.position):t.position.set(0,0,0),null!==e.orientation&&t.quaternion.fromArray(e.orientation),t.updateMatrixWorld();var n=o.stageParameters;if(this.standing&&n&&(u.fromArray(n.sittingToStandingTransform),c.getInverse(u),t.matrixWorld.multiply(u),t.matrixWorldInverse.multiply(c)),!1===o.isPresenting)return t;f.matrixWorld.copy(t.matrixWorld),f.matrixWorldInverse.copy(t.matrixWorldInverse),h.matrixWorldInverse.fromArray(s.leftViewMatrix),d.matrixWorldInverse.fromArray(s.rightViewMatrix),this.standing&&n&&(h.matrixWorldInverse.multiply(c),d.matrixWorldInverse.multiply(c));var i=t.parent;null!==i&&(l.getInverse(i.matrixWorld),h.matrixWorldInverse.multiply(l),d.matrixWorldInverse.multiply(l)),h.matrixWorld.getInverse(h.matrixWorldInverse),d.matrixWorld.getInverse(d.matrixWorldInverse),h.projectionMatrix.fromArray(s.leftProjectionMatrix),d.projectionMatrix.fromArray(s.rightProjectionMatrix),f.projectionMatrix.copy(h.projectionMatrix);var r=o.getLayers();if(r.length){var a=r[0];null!==a.leftBounds&&4===a.leftBounds.length&&h.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===a.rightBounds.length&&d.bounds.fromArray(a.rightBounds)}return f},this.getStandingMatrix=function(){return u},this.submitFrame=function(){o&&o.isPresenting&&o.submitFrame()}}function Ka(n){var i={};return{get:function(t){if(void 0!==i[t])return i[t];var e;switch(t){case"WEBGL_depth_texture":e=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":e=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":e=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":e=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":e=n.getExtension("WEBGL_compressed_texture_etc1");break;default:e=n.getExtension(t)}return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),i[t]=e}}}function Ja(){var c=this,h=null,d=0,p=!1,f=!1,m=new Mi,v=new Ai,g={value:null,needsUpdate:!1};function y(){g.value!==h&&(g.value=h,g.needsUpdate=d>0),c.numPlanes=d,c.numIntersection=0}function _(t,e,n,i){var r=null!==t?t.length:0,a=null;if(0!==r){if(a=g.value,!0!==i||null===a){var o=n+4*r,s=e.matrixWorldInverse;v.getNormalMatrix(s),(null===a||a.length<o)&&(a=new Float32Array(o));for(var l=0,u=n;l!==r;++l,u+=4)m.copy(t[l]).applyMatrix4(s,v),m.normal.toArray(a,u),a[u+3]=m.constant}g.value=a,g.needsUpdate=!0}return c.numPlanes=r,a}this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,n){var i=0!==t.length||e||0!==d||p;return p=e,h=_(t,n,0),d=t.length,i},this.beginShadows=function(){f=!0,_(null)},this.endShadows=function(){f=!1,y()},this.setState=function(t,e,n,i,r,a){if(!p||null===t||0===t.length||f&&!n)f?_(null):y();else{var o=f?0:d,s=4*o,l=r.clippingState||null;g.value=l,l=_(t,i,s,a);for(var u=0;u!==s;++u)l[u]=h[u];r.clippingState=l,this.numIntersection=e?this.numPlanes:0,this.numPlanes+=o}}}function Qa(t){console.log("THREE.WebGLRenderer",Ct);var r=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e=void 0!==t.context?t.context:null,n=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,p=[],f=null,O=new Float32Array(8),m=[],v=[];this.domElement=r,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Yt,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var L,R=this,P=null,u=null,h=null,I=-1,D="",j=null,N=null,c=new Ze,d=null,g=new Ze,U=0,b=r.width,B=r.height,F=1,y=new Ze(0,0,b,B),_=!1,w=new Ze(0,0,b,B),T=new Ci,V=new Ja,H=!1,z=!1,x=new en,G=new tn,E=new en,S=new en,W={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},A={geometries:0,textures:0},M={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:M,memory:A,programs:null};try{var C={alpha:n,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l};if(null===(L=e||r.getContext("webgl",C)||r.getContext("experimental-webgl",C)))throw null!==r.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===L.getShaderPrecisionFormat&&(L.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),r.addEventListener("webglcontextlost",mt,!1)}catch(t){console.error("THREE.WebGLRenderer: "+t)}var q=new Ka(L);q.get("WEBGL_depth_texture"),q.get("OES_texture_float"),q.get("OES_texture_float_linear"),q.get("OES_texture_half_float"),q.get("OES_texture_half_float_linear"),q.get("OES_standard_derivatives"),q.get("ANGLE_instanced_arrays"),q.get("OES_element_index_uint")&&(ea.MaxIndex=4294967296);var X=new Ya(L,q,t),Y=new Xa(L,q,Mt),$=new qa,k=new Wa(L,q,Y,$,X,Mt,A),Z=new Oi(L),K=new ya(L,Z,A),J=new ba(L,K,M),Q=new Ga(this,X),tt=new _a,et=new ma,nt=new ha(this,Y,J,s),it=new Za(this);this.info.programs=Q.programs;var rt=new ga(L,q,M),at=new va(L,q,M);function ot(){return null===u?F:1}function st(){Y.init(),Y.scissor(c.copy(y).multiplyScalar(F)),Y.viewport(g.copy(w).multiplyScalar(F))}function lt(){j=P=null,D="",I=-1,Y.reset()}st(),this.context=L,this.capabilities=X,this.extensions=q,this.properties=$,this.renderLists=et,this.state=Y,this.vr=it;var ut=new ki(this,W,J,X);this.shadowMap=ut;var ct,ht,dt,pt=new ti(this,m),ft=new Qn(this,v);function mt(t){t.preventDefault(),lt(),st(),$.clear(),J.clear()}function vt(t){var e,n=t.target;n.removeEventListener("dispose",vt),gt(e=n),$.remove(e)}function gt(t){var e=$.get(t).program;(t.program=void 0)!==e&&Q.releaseProgram(e)}function yt(t,e){return Math.abs(e[0])-Math.abs(t[0])}function _t(t,e,n,i){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,l=o.geometry,u=void 0===i?o.material:i,c=o.group;if(n.isArrayCamera)for(var h=(N=n).cameras,d=0,p=h.length;d<p;d++){var f=h[d];if(s.layers.test(f.layers)){var m=f.bounds,v=m.x*b,g=m.y*B,y=m.z*b,_=m.w*B;R.setViewport(v,g,y,_),R.setScissor(v,g,y,_),R.setScissorTest(!0),bt(s,e,f,l,u,c)}}else N=null,bt(s,e,n,l,u,c)}}function bt(t,e,n,i,r,a){if(t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.onBeforeRender(R,e,n,i,r,a),t.isImmediateRenderObject){Y.setMaterial(r);var o=Tt(n,e.fog,r,t);D="",s=o,l=r,t.render(function(t){R.renderBufferImmediate(t,s,l)})}else R.renderBufferDirect(n,e.fog,i,r,t,a);var s,l;t.onAfterRender(R,e,n,i,r,a)}function wt(t,e,n){var i=$.get(t),r=Q.getParameters(t,W,e,V.numPlanes,V.numIntersection,n),a=Q.getProgramCode(t,r),o=i.program,s=!0;if(void 0===o)t.addEventListener("dispose",vt);else if(o.code!==a)gt(t);else{if(void 0!==r.shaderID)return;s=!1}if(s){if(r.shaderID){var l=Kn[r.shaderID];i.shader={name:t.type,uniforms:$n.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader),o=Q.acquireProgram(t,i.shader,r,a),i.program=o,t.program=o}var u=o.getAttributes();if(t.morphTargets)for(var c=t.numSupportedMorphTargets=0;c<R.maxMorphTargets;c++)u["morphTarget"+c]>=0&&t.numSupportedMorphTargets++;if(t.morphNormals)for(c=t.numSupportedMorphNormals=0;c<R.maxMorphNormals;c++)u["morphNormal"+c]>=0&&t.numSupportedMorphNormals++;var h=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=V.numPlanes,i.numIntersection=V.numIntersection,h.clippingPlanes=V.uniform),i.fog=e,i.lightsHash=W.hash,t.lights&&(h.ambientLightColor.value=W.ambient,h.directionalLights.value=W.directional,h.spotLights.value=W.spot,h.rectAreaLights.value=W.rectArea,h.pointLights.value=W.point,h.hemisphereLights.value=W.hemi,h.directionalShadowMap.value=W.directionalShadowMap,h.directionalShadowMatrix.value=W.directionalShadowMatrix,h.spotShadowMap.value=W.spotShadowMap,h.spotShadowMatrix.value=W.spotShadowMatrix,h.pointShadowMap.value=W.pointShadowMap,h.pointShadowMatrix.value=W.pointShadowMatrix);var d=i.program.getUniforms(),p=zn.seqWithValue(d.seq,h);i.uniformsList=p}function Tt(t,e,n,i){U=0;var r=$.get(n);if(H&&(z||t!==j)){var a=t===j&&n.id===I;V.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,a)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:n.lights&&r.lightsHash!==W.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===V.numPlanes&&r.numIntersection===V.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(wt(n,e,i),n.needsUpdate=!1);var o,s,l,u,c,h,d,p,f,m,v,g,y=!1,_=!1,b=!1,w=r.program,T=w.getUniforms(),x=r.shader.uniforms;if(w.id!==P&&(L.useProgram(w.program),P=w.id,b=_=y=!0),n.id!==I&&(I=n.id,_=!0),y||t!==j){if(T.setValue(L,"projectionMatrix",t.projectionMatrix),X.logarithmicDepthBuffer&&T.setValue(L,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),j!==(N||t)&&(j=N||t,b=_=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var E=T.map.cameraPosition;void 0!==E&&E.setValue(L,G.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&T.setValue(L,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){T.setOptional(L,i,"bindMatrix"),T.setOptional(L,i,"bindMatrixInverse");var S=i.skeleton;if(S){var A=S.bones;if(X.floatVertexTextures){if(void 0===S.boneTexture){var M=Math.sqrt(4*A.length);M=De.nextPowerOfTwo(Math.ceil(M)),M=Math.max(M,4);var C=new Float32Array(M*M*4);C.set(S.boneMatrices);var k=new nn(C,M,M,ye,ce);S.boneMatrices=C,S.boneTexture=k,S.boneTextureSize=M}T.setValue(L,"boneTexture",S.boneTexture),T.setValue(L,"boneTextureSize",S.boneTextureSize)}else T.setOptional(L,S,"boneMatrices")}}return _&&(T.setValue(L,"toneMappingExposure",R.toneMappingExposure),T.setValue(L,"toneMappingWhitePoint",R.toneMappingWhitePoint),n.lights&&(g=b,(v=x).ambientLightColor.needsUpdate=g,v.directionalLights.needsUpdate=g,v.pointLights.needsUpdate=g,v.spotLights.needsUpdate=g,v.rectAreaLights.needsUpdate=g,v.hemisphereLights.needsUpdate=g),e&&n.fog&&(m=e,(f=x).fogColor.value=m.color,m.isFog?(f.fogNear.value=m.near,f.fogFar.value=m.far):m.isFogExp2&&(f.fogDensity.value=m.density)),(n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshNormalMaterial||n.isMeshDepthMaterial)&&function(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity);t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity);e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var n;e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap);if(void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var i=n.offset,r=n.repeat;t.offsetRepeat.value.set(i.x,i.y,r.x,r.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}(x,n),n.isLineBasicMaterial?xt(x,n):n.isLineDashedMaterial?(xt(x,n),p=n,(d=x).dashSize.value=p.dashSize,d.totalSize.value=p.dashSize+p.gapSize,d.scale.value=p.scale):n.isPointsMaterial?function(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*F,t.scale.value=.5*B,t.map.value=e.map,null!==e.map){var n=e.map.offset,i=e.map.repeat;t.offsetRepeat.value.set(n.x,n.y,i.x,i.y)}}(x,n):n.isMeshLambertMaterial?(c=x,(h=n).emissiveMap&&(c.emissiveMap.value=h.emissiveMap)):n.isMeshToonMaterial?(Et(l=x,u=n),u.gradientMap&&(l.gradientMap.value=u.gradientMap)):n.isMeshPhongMaterial?Et(x,n):n.isMeshPhysicalMaterial?(s=n,(o=x).clearCoat.value=s.clearCoat,o.clearCoatRoughness.value=s.clearCoatRoughness,St(o,s)):n.isMeshStandardMaterial?St(x,n):n.isMeshDepthMaterial?n.displacementMap&&(x.displacementMap.value=n.displacementMap,x.displacementScale.value=n.displacementScale,x.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale);e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale));e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(x,n),void 0!==x.ltcMat&&(x.ltcMat.value=Yn.LTC_MAT_TEXTURE),void 0!==x.ltcMag&&(x.ltcMag.value=Yn.LTC_MAG_TEXTURE),zn.upload(L,r.uniformsList,x,R)),T.setValue(L,"modelViewMatrix",i.modelViewMatrix),T.setValue(L,"normalMatrix",i.normalMatrix),T.setValue(L,"modelMatrix",i.matrixWorld),w}function xt(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function Et(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function St(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function At(t,e){var n,i,r,a,o,s,l,u,c=0,h=0,d=0,p=e.matrixWorldInverse,f=0,m=0,v=0,g=0,y=0;for(n=0,i=t.length;n<i;n++)if(o=(r=t[n]).color,s=r.intensity,l=r.distance,u=r.shadow&&r.shadow.map?r.shadow.map.texture:null,r.isAmbientLight)c+=o.r*s,h+=o.g*s,d+=o.b*s;else if(r.isDirectionalLight){(_=tt.get(r)).color.copy(r.color).multiplyScalar(r.intensity),_.direction.setFromMatrixPosition(r.matrixWorld),G.setFromMatrixPosition(r.target.matrixWorld),_.direction.sub(G),_.direction.transformDirection(p),_.shadow=r.castShadow,r.castShadow&&(a=r.shadow,_.shadowBias=a.bias,_.shadowRadius=a.radius,_.shadowMapSize=a.mapSize),W.directionalShadowMap[f]=u,W.directionalShadowMatrix[f]=r.shadow.matrix,W.directional[f]=_,f++}else if(r.isSpotLight){(_=tt.get(r)).position.setFromMatrixPosition(r.matrixWorld),_.position.applyMatrix4(p),_.color.copy(o).multiplyScalar(s),_.distance=l,_.direction.setFromMatrixPosition(r.matrixWorld),G.setFromMatrixPosition(r.target.matrixWorld),_.direction.sub(G),_.direction.transformDirection(p),_.coneCos=Math.cos(r.angle),_.penumbraCos=Math.cos(r.angle*(1-r.penumbra)),_.decay=0===r.distance?0:r.decay,_.shadow=r.castShadow,r.castShadow&&(a=r.shadow,_.shadowBias=a.bias,_.shadowRadius=a.radius,_.shadowMapSize=a.mapSize),W.spotShadowMap[v]=u,W.spotShadowMatrix[v]=r.shadow.matrix,W.spot[v]=_,v++}else if(r.isRectAreaLight){(_=tt.get(r)).color.copy(o).multiplyScalar(s/(r.width*r.height)),_.position.setFromMatrixPosition(r.matrixWorld),_.position.applyMatrix4(p),S.identity(),E.copy(r.matrixWorld),E.premultiply(p),S.extractRotation(E),_.halfWidth.set(.5*r.width,0,0),_.halfHeight.set(0,.5*r.height,0),_.halfWidth.applyMatrix4(S),_.halfHeight.applyMatrix4(S),W.rectArea[g]=_,g++}else if(r.isPointLight){(_=tt.get(r)).position.setFromMatrixPosition(r.matrixWorld),_.position.applyMatrix4(p),_.color.copy(r.color).multiplyScalar(r.intensity),_.distance=r.distance,_.decay=0===r.distance?0:r.decay,_.shadow=r.castShadow,r.castShadow&&(a=r.shadow,_.shadowBias=a.bias,_.shadowRadius=a.radius,_.shadowMapSize=a.mapSize),W.pointShadowMap[m]=u,W.pointShadowMatrix[m]=r.shadow.matrix,W.point[m]=_,m++}else if(r.isHemisphereLight){var _;(_=tt.get(r)).direction.setFromMatrixPosition(r.matrixWorld),_.direction.transformDirection(p),_.direction.normalize(),_.skyColor.copy(r.color).multiplyScalar(s),_.groundColor.copy(r.groundColor).multiplyScalar(s),W.hemi[y]=_,y++}W.ambient[0]=c,W.ambient[1]=h,W.ambient[2]=d,W.directional.length=f,W.spot.length=v,W.rectArea.length=g,W.point.length=m,W.hemi.length=y,W.hash=f+","+m+","+v+","+g+","+y+","+W.shadows.length}function Mt(t){var e;if(t===$t)return L.REPEAT;if(t===Zt)return L.CLAMP_TO_EDGE;if(t===Kt)return L.MIRRORED_REPEAT;if(t===Jt)return L.NEAREST;if(t===Qt)return L.NEAREST_MIPMAP_NEAREST;if(t===te)return L.NEAREST_MIPMAP_LINEAR;if(t===ee)return L.LINEAR;if(t===ne)return L.LINEAR_MIPMAP_NEAREST;if(t===ie)return L.LINEAR_MIPMAP_LINEAR;if(t===re)return L.UNSIGNED_BYTE;if(t===de)return L.UNSIGNED_SHORT_4_4_4_4;if(t===pe)return L.UNSIGNED_SHORT_5_5_5_1;if(t===fe)return L.UNSIGNED_SHORT_5_6_5;if(t===ae)return L.BYTE;if(t===oe)return L.SHORT;if(t===se)return L.UNSIGNED_SHORT;if(t===le)return L.INT;if(t===ue)return L.UNSIGNED_INT;if(t===ce)return L.FLOAT;if(t===he&&null!==(e=q.get("OES_texture_half_float")))return e.HALF_FLOAT_OES;if(t===ve)return L.ALPHA;if(t===ge)return L.RGB;if(t===ye)return L.RGBA;if(t===_e)return L.LUMINANCE;if(t===be)return L.LUMINANCE_ALPHA;if(t===we)return L.DEPTH_COMPONENT;if(t===Te)return L.DEPTH_STENCIL;if(t===Rt)return L.FUNC_ADD;if(t===Pt)return L.FUNC_SUBTRACT;if(t===It)return L.FUNC_REVERSE_SUBTRACT;if(t===Nt)return L.ZERO;if(t===Ut)return L.ONE;if(t===Bt)return L.SRC_COLOR;if(t===Ft)return L.ONE_MINUS_SRC_COLOR;if(t===Vt)return L.SRC_ALPHA;if(t===Ht)return L.ONE_MINUS_SRC_ALPHA;if(t===zt)return L.DST_ALPHA;if(t===Gt)return L.ONE_MINUS_DST_ALPHA;if(t===Wt)return L.DST_COLOR;if(t===qt)return L.ONE_MINUS_DST_COLOR;if(t===Xt)return L.SRC_ALPHA_SATURATE;if((t===xe||t===Ee||t===Se||t===Ae)&&null!==(e=q.get("WEBGL_compressed_texture_s3tc"))){if(t===xe)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Ee)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Se)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Ae)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===Me||t===Ce||t===ke||t===Oe)&&null!==(e=q.get("WEBGL_compressed_texture_pvrtc"))){if(t===Me)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Ce)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ke)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Oe)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Le&&null!==(e=q.get("WEBGL_compressed_texture_etc1")))return e.COMPRESSED_RGB_ETC1_WEBGL;if((t===Dt||t===jt)&&null!==(e=q.get("EXT_blend_minmax"))){if(t===Dt)return e.MIN_EXT;if(t===jt)return e.MAX_EXT}return t===me&&null!==(e=q.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return L},this.getContextAttributes=function(){return L.getContextAttributes()},this.forceContextLoss=function(){var t=q.get("WEBGL_lose_context");t&&t.loseContext()},this.getMaxAnisotropy=function(){return X.getMaxAnisotropy()},this.getPrecision=function(){return X.precision},this.getPixelRatio=function(){return F},this.setPixelRatio=function(t){void 0!==t&&(F=t,this.setSize(b,B,!1))},this.getSize=function(){return{width:b,height:B}},this.setSize=function(t,e,n){var i=it.getDevice();i&&i.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(b=t,B=e,r.width=t*F,r.height=e*F,!1!==n&&(r.style.width=t+"px",r.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(){return{width:b*F,height:B*F}},this.setDrawingBufferSize=function(t,e,n){b=t,B=e,F=n,r.width=t*n,r.height=e*n,this.setViewport(0,0,t,e)},this.setViewport=function(t,e,n,i){w.set(t,B-e-i,n,i),Y.viewport(g.copy(w).multiplyScalar(F))},this.setScissor=function(t,e,n,i){y.set(t,B-e-i,n,i),Y.scissor(c.copy(y).multiplyScalar(F))},this.setScissorTest=function(t){Y.setScissorTest(_=t)},this.getClearColor=nt.getClearColor,this.setClearColor=nt.setClearColor,this.getClearAlpha=nt.getClearAlpha,this.setClearAlpha=nt.setClearAlpha,this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=L.COLOR_BUFFER_BIT),(void 0===e||e)&&(i|=L.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=L.STENCIL_BUFFER_BIT),L.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,i){this.setRenderTarget(t),this.clear(e,n,i)},this.resetGLState=lt,this.dispose=function(){r.removeEventListener("webglcontextlost",mt,!1),et.dispose()},this.renderBufferImmediate=function(t,e,n){Y.initAttributes();var i=$.get(t);t.hasPositions&&!i.position&&(i.position=L.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=L.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=L.createBuffer()),t.hasColors&&!i.color&&(i.color=L.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(L.bindBuffer(L.ARRAY_BUFFER,i.position),L.bufferData(L.ARRAY_BUFFER,t.positionArray,L.DYNAMIC_DRAW),Y.enableAttribute(r.position),L.vertexAttribPointer(r.position,3,L.FLOAT,!1,0,0)),t.hasNormals){if(L.bindBuffer(L.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&n.shading===Ot)for(var a=0,o=3*t.count;a<o;a+=9){var s=t.normalArray,l=(s[a+0]+s[a+3]+s[a+6])/3,u=(s[a+1]+s[a+4]+s[a+7])/3,c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=l,s[a+1]=u,s[a+2]=c,s[a+3]=l,s[a+4]=u,s[a+5]=c,s[a+6]=l,s[a+7]=u,s[a+8]=c}L.bufferData(L.ARRAY_BUFFER,t.normalArray,L.DYNAMIC_DRAW),Y.enableAttribute(r.normal),L.vertexAttribPointer(r.normal,3,L.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(L.bindBuffer(L.ARRAY_BUFFER,i.uv),L.bufferData(L.ARRAY_BUFFER,t.uvArray,L.DYNAMIC_DRAW),Y.enableAttribute(r.uv),L.vertexAttribPointer(Z.uv,2,L.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==Lt&&(L.bindBuffer(L.ARRAY_BUFFER,i.color),L.bufferData(L.ARRAY_BUFFER,t.colorArray,L.DYNAMIC_DRAW),Y.enableAttribute(r.color),L.vertexAttribPointer(r.color,3,L.FLOAT,!1,0,0)),Y.disableUnusedAttributes(),L.drawArrays(L.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,a){Y.setMaterial(i);var o=Tt(t,e,i,r),s=n.id+"_"+o.id+"_"+(!0===i.wireframe),l=!1;s!==D&&(D=s,l=!0);var u=r.morphTargetInfluences;if(void 0!==u){for(var c=[],h=0,d=u.length;h<d;h++){var p=u[h];c.push([p,h])}c.sort(yt),c.length>8&&(c.length=8);var f=n.morphAttributes;for(h=0,d=c.length;h<d;h++){p=c[h];if(O[h]=p[0],0!==p[0]){var m=p[1];!0===i.morphTargets&&f.position&&n.addAttribute("morphTarget"+h,f.position[m]),!0===i.morphNormals&&f.normal&&n.addAttribute("morphNormal"+h,f.normal[m])}else!0===i.morphTargets&&n.removeAttribute("morphTarget"+h),!0===i.morphNormals&&n.removeAttribute("morphNormal"+h)}h=c.length;for(var v=O.length;h<v;h++)O[h]=0;o.getUniforms().setValue(L,"morphTargetInfluences",O),l=!0}m=n.index;var g,y=n.attributes.position,_=1;!0===i.wireframe&&(m=K.getWireframeAttribute(n),_=2);var b=rt;null!==m&&(g=Z.get(m),(b=at).setIndex(g)),l&&(!function(t,e,n,i){if(n&&n.isInstancedBufferGeometry&&null===q.get("ANGLE_instanced_arrays"))return console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0);Y.initAttributes();var r=n.attributes,a=e.getAttributes(),o=t.defaultAttributeValues;for(var s in a){var l=a[s];if(l>=0){var u=r[s];if(void 0!==u){var c=u.normalized,h=u.itemSize,d=Z.get(u),p=d.buffer,f=d.type,m=d.bytesPerElement;if(u.isInterleavedBufferAttribute){var v=u.data,g=v.stride,y=u.offset;v&&v.isInstancedInterleavedBuffer?(Y.enableAttributeAndDivisor(l,v.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=v.meshPerAttribute*v.count)):Y.enableAttribute(l),L.bindBuffer(L.ARRAY_BUFFER,p),L.vertexAttribPointer(l,h,f,c,g*m,(i*g+y)*m)}else u.isInstancedBufferAttribute?(Y.enableAttributeAndDivisor(l,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):Y.enableAttribute(l),L.bindBuffer(L.ARRAY_BUFFER,p),L.vertexAttribPointer(l,h,f,c,0,i*h*m)}else if(void 0!==o){var _=o[s];if(void 0!==_)switch(_.length){case 2:L.vertexAttrib2fv(l,_);break;case 3:L.vertexAttrib3fv(l,_);break;case 4:L.vertexAttrib4fv(l,_);break;default:L.vertexAttrib1fv(l,_)}}}}Y.disableUnusedAttributes()}(i,o,n),null!==m&&L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,g.buffer));var w=0;null!==m?w=m.count:void 0!==y&&(w=y.count);var T=n.drawRange.start*_,x=n.drawRange.count*_,E=null!==a?a.start*_:0,S=null!==a?a.count*_:1/0,A=Math.max(T,E),M=Math.min(w,T+x,E+S)-1,C=Math.max(0,M-A+1);if(0!==C){if(r.isMesh)if(!0===i.wireframe)Y.setLineWidth(i.wireframeLinewidth*ot()),b.setMode(L.LINES);else switch(r.drawMode){case Re:b.setMode(L.TRIANGLES);break;case Pe:b.setMode(L.TRIANGLE_STRIP);break;case Ie:b.setMode(L.TRIANGLE_FAN)}else if(r.isLine){var k=i.linewidth;void 0===k&&(k=1),Y.setLineWidth(k*ot()),r.isLineSegments?b.setMode(L.LINES):r.isLineLoop?b.setMode(L.LINE_LOOP):b.setMode(L.LINE_STRIP)}else r.isPoints&&b.setMode(L.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&b.renderInstances(n,A,C):b.render(A,C)}},this.compile=function(n,t){p=[],n.traverse(function(t){t.isLight&&p.push(t)}),At(p,t),n.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var e=0;e<t.material.length;e++)wt(t.material[e],n.fog,t);else wt(t.material,n.fog,t)})},this.animate=function(e){(it.getDevice()||window).requestAnimationFrame(function t(){e(),(it.getDevice()||window).requestAnimationFrame(t)})},this.render=function(t,e,n,i){if(e&&e.isCamera){D="",I=-1,!(j=null)===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),it.enabled&&(e=it.getCamera(e)),x.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),T.setFromMatrix(x),p.length=0,m.length=0,v.length=0,z=this.localClippingEnabled,H=V.init(this.clippingPlanes,z,e),(f=et.get(t,e)).init(),function t(e,n,i){if(!e.visible)return;var r=e.layers.test(n.layers);if(r)if(e.isLight)p.push(e);else if(e.isSprite)e.frustumCulled&&!T.intersectsSprite(e)||m.push(e);else if(e.isLensFlare)v.push(e);else if(e.isImmediateRenderObject)i&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(x),f.push(e,null,e.material,G.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||T.intersectsObject(e))){i&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(x);var a=J.update(e),o=e.material;if(Array.isArray(o))for(var s=a.groups,l=0,u=s.length;l<u;l++){var c=s[l],h=o[c.materialIndex];h&&h.visible&&f.push(e,a,h,G.z,c)}else o.visible&&f.push(e,a,o,G.z,null)}var d=e.children;for(var l=0,u=d.length;l<u;l++)t(d[l],n,i)}(t,e,R.sortObjects),f.finish(),!0===R.sortObjects&&f.sort(),H&&V.beginShadows(),function(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];r.castShadow&&(W.shadows[e]=r,e++)}W.shadows.length=e}(p),ut.render(t,e),At(p,e),H&&V.endShadows(),M.frame++,M.calls=0,M.vertices=0,M.faces=0,void(M.points=0)===n&&(n=null),this.setRenderTarget(n),nt.render(t,e,i);var r=f.opaque,a=f.transparent;if(t.overrideMaterial){var o=t.overrideMaterial;r.length&&_t(r,t,e,o),a.length&&_t(a,t,e,o)}else r.length&&_t(r,t,e),a.length&&_t(a,t,e);pt.render(t,e),ft.render(t,e,g),n&&k.updateRenderTargetMipmap(n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),e.isArrayCamera&&R.setScissorTest(!1),it.enabled&&it.submitFrame()}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(t,e){Y.setCullFace(t),Y.setFlipSided(e===kt)},this.allocTextureUnit=function(){var t=U;return t>=X.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+X.maxTextures),U+=1,t},this.setTexture2D=(ct=!1,function(t,e){t&&t.isWebGLRenderTarget&&(ct||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),ct=!0),t=t.texture),k.setTexture2D(t,e)}),this.setTexture=(ht=!1,function(t,e){ht||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),ht=!0),k.setTexture2D(t,e)}),this.setTextureCube=(dt=!1,function(t,e){t&&t.isWebGLRenderTargetCube&&(dt||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),dt=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?k.setTextureCube(t,e):k.setTextureCubeDynamic(t,e)}),this.getRenderTarget=function(){return u},this.setRenderTarget=function(t){(u=t)&&void 0===$.get(t).__webglFramebuffer&&k.setupRenderTarget(t);var e,n=t&&t.isWebGLRenderTargetCube;if(t){var i=$.get(t);e=n?i.__webglFramebuffer[t.activeCubeFace]:i.__webglFramebuffer,c.copy(t.scissor),d=t.scissorTest,g.copy(t.viewport)}else e=null,c.copy(y).multiplyScalar(F),d=_,g.copy(w).multiplyScalar(F);if(h!==e&&(L.bindFramebuffer(L.FRAMEBUFFER,e),h=e),Y.scissor(c),Y.setScissorTest(d),Y.viewport(g),n){var r=$.get(t.texture);L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,i,r,a){if(t&&t.isWebGLRenderTarget){var o=$.get(t).__webglFramebuffer;if(o){var s=!1;o!==h&&(L.bindFramebuffer(L.FRAMEBUFFER,o),s=!0);try{var l=t.texture,u=l.format,c=l.type;if(u!==ye&&Mt(u)!==L.getParameter(L.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(c!==re&&Mt(c)!==L.getParameter(L.IMPLEMENTATION_COLOR_READ_TYPE)&&(c!==ce||!q.get("OES_texture_float")&&!q.get("WEBGL_color_buffer_float"))&&(c!==he||!q.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");L.checkFramebufferStatus(L.FRAMEBUFFER)===L.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&L.readPixels(e,n,i,r,Mt(u),Mt(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&L.bindFramebuffer(L.FRAMEBUFFER,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function to(t,e){this.name="",this.color=new Wn(t),this.density=void 0!==e?e:25e-5}function eo(t,e,n){this.name="",this.color=new Wn(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function no(){Ki.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function io(t,e,n,i,r){Ki.call(this),this.lensFlares=[],this.positionScreen=new tn,(this.customUpdateCallback=void 0)!==t&&this.add(t,e,n,i,r)}function ro(t){wi.call(this),this.type="SpriteMaterial",this.color=new Wn(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function ao(t){Ki.call(this),this.type="Sprite",this.material=void 0!==t?t:new ro}function oo(){Ki.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function so(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new en)}}function lo(){Ki.call(this),this.type="Bone"}function uo(t,e){ca.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new en,this.bindMatrixInverse=new en;var n=new so(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function co(t){wi.call(this),this.type="LineBasicMaterial",this.color=new Wn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function ho(t,e,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new po(t,e);Ki.call(this),this.type="Line",this.geometry=void 0!==t?t:new ea,this.material=void 0!==e?e:new co({color:16777215*Math.random()})}function po(t,e){ho.call(this,t,e),this.type="LineSegments"}function fo(t,e){ho.call(this,t,e),this.type="LineLoop"}function mo(t){wi.call(this),this.type="PointsMaterial",this.color=new Wn(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function vo(t,e){Ki.call(this),this.type="Points",this.geometry=void 0!==t?t:new ea,this.material=void 0!==e?e:new mo({color:16777215*Math.random()})}function go(){Ki.call(this),this.type="Group"}function yo(e,t,n,i,r,a,o,s,l){$e.call(this,e,t,n,i,r,a,o,s,l),this.generateMipmaps=!1;var u=this;!function t(){requestAnimationFrame(t),e.readyState>=e.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}()}function _o(t,e,n,i,r,a,o,s,l,u,c,h){$e.call(this,null,a,o,s,l,u,i,r,c,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function bo(t,e,n,i,r,a,o,s,l){$e.call(this,t,e,n,i,r,a,o,s,l),this.needsUpdate=!0}function wo(t,e,n,i,r,a,o,s,l,u){if((u=void 0!==u?u:we)!==we&&u!==Te)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===we&&(n=se),void 0===n&&u===Te&&(n=me),$e.call(this,null,i,r,a,o,s,u,n,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:Jt,this.minFilter=void 0!==s?s:Jt,this.flipY=!1,this.generateMipmaps=!1}function To(t){ea.call(this),this.type="WireframeGeometry";var e,n,i,r,a,o,s,l,u,c,h=[],d=[0,0],p={},f=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,i=m.length;e<i;e++){var v=m[e];for(n=0;n<3;n++)s=v[f[n]],l=v[f[(n+1)%3]],d[0]=Math.min(s,l),d[1]=Math.max(s,l),void 0===p[u=d[0]+","+d[1]]&&(p[u]={index1:d[0],index2:d[1]})}for(u in p)o=p[u],c=t.vertices[o.index1],h.push(c.x,c.y,c.z),c=t.vertices[o.index2],h.push(c.x,c.y,c.z)}else if(t&&t.isBufferGeometry){var g,y,_,b,w,T;if(c=new tn,null!==t.index){for(g=t.attributes.position,y=t.index,0===(_=t.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),r=0,a=_.length;r<a;++r)for(i=(e=(b=_[r]).start)+b.count;e<i;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),l=y.getX(e+(n+1)%3),d[0]=Math.min(s,l),d[1]=Math.max(s,l),void 0===p[u=d[0]+","+d[1]]&&(p[u]={index1:d[0],index2:d[1]});for(u in p)o=p[u],c.fromBufferAttribute(g,o.index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,o.index2),h.push(c.x,c.y,c.z)}else for(e=0,i=(g=t.attributes.position).count/3;e<i;e++)for(n=0;n<3;n++)w=3*e+n,c.fromBufferAttribute(g,w),h.push(c.x,c.y,c.z),T=3*e+(n+1)%3,c.fromBufferAttribute(g,T),h.push(c.x,c.y,c.z)}this.addAttribute("position",new Kr(h,3))}function xo(t,e,n){Hr.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new Eo(t,e,n)),this.mergeVertices()}function Eo(t,e,n){ea.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,a=[],o=[],s=[],l=[],u=new tn,c=new tn,h=new tn,d=new tn,p=new tn,f=e+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=e;r++){var v=r/e;c=t(v,m,c),o.push(c.x,c.y,c.z),v-1e-5>=0?(h=t(v-1e-5,m,h),d.subVectors(c,h)):(h=t(v+1e-5,m,h),d.subVectors(h,c)),m-1e-5>=0?(h=t(v,m-1e-5,h),p.subVectors(c,h)):(h=t(v,m+1e-5,h),p.subVectors(h,c)),u.crossVectors(d,p).normalize(),s.push(u.x,u.y,u.z),l.push(v,m)}}for(i=0;i<n;i++)for(r=0;r<e;r++){var g=i*f+r,y=i*f+r+1,_=(i+1)*f+r+1,b=(i+1)*f+r;a.push(g,y,b),a.push(y,_,b)}this.setIndex(a),this.addAttribute("position",new Kr(o,3)),this.addAttribute("normal",new Kr(s,3)),this.addAttribute("uv",new Kr(l,2))}function So(t,e,n,i){Hr.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new Ao(t,e,n,i)),this.mergeVertices()}function Ao(i,a,t,e){ea.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:i,indices:a,radius:t,detail:e},t=t||1;var c=[],h=[];function o(t,e,n,i){var r,a,o=Math.pow(2,i),s=[];for(r=0;r<=o;r++){s[r]=[];var l=t.clone().lerp(n,r/o),u=e.clone().lerp(n,r/o),c=o-r;for(a=0;a<=c;a++)s[r][a]=0===a&&r===o?l:l.clone().lerp(u,a/c)}for(r=0;r<o;r++)for(a=0;a<2*(o-r)-1;a++){var h=Math.floor(a/2);a%2===0?(d(s[r][h+1]),d(s[r+1][h]),d(s[r][h])):(d(s[r][h+1]),d(s[r+1][h+1]),d(s[r+1][h]))}}function d(t){c.push(t.x,t.y,t.z)}function s(t,e){var n=3*t;e.x=i[n+0],e.y=i[n+1],e.z=i[n+2]}function p(t,e,n,i){i<0&&1===t.x&&(h[e]=t.x-1),0===n.x&&0===n.z&&(h[e]=i/2/Math.PI+.5)}function f(t){return Math.atan2(t.z,-t.x)}!function(t){for(var e=new tn,n=new tn,i=new tn,r=0;r<a.length;r+=3)s(a[r+0],e),s(a[r+1],n),s(a[r+2],i),o(e,n,i,t)}(e=e||0),function(t){for(var e=new tn,n=0;n<c.length;n+=3)e.x=c[n+0],e.y=c[n+1],e.z=c[n+2],e.normalize().multiplyScalar(t),c[n+0]=e.x,c[n+1]=e.y,c[n+2]=e.z}(t),function(){for(var t=new tn,e=0;e<c.length;e+=3){t.x=c[e+0],t.y=c[e+1],t.z=c[e+2];var n=f(t)/2/Math.PI+.5,i=(r=t,Math.atan2(-r.y,Math.sqrt(r.x*r.x+r.z*r.z))/Math.PI+.5);h.push(n,1-i)}var r;(function(){for(var t=new tn,e=new tn,n=new tn,i=new tn,r=new bt,a=new bt,o=new bt,s=0,l=0;s<c.length;s+=9,l+=6){t.set(c[s+0],c[s+1],c[s+2]),e.set(c[s+3],c[s+4],c[s+5]),n.set(c[s+6],c[s+7],c[s+8]),r.set(h[l+0],h[l+1]),a.set(h[l+2],h[l+3]),o.set(h[l+4],h[l+5]),i.copy(t).add(e).add(n).divideScalar(3);var u=f(i);p(r,l+0,t,u),p(a,l+2,e,u),p(o,l+4,n,u)}})(),function(){for(var t=0;t<h.length;t+=6){var e=h[t+0],n=h[t+2],i=h[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(h[t+0]+=1),n<.2&&(h[t+2]+=1),i<.2&&(h[t+4]+=1))}}()}(),this.addAttribute("position",new Kr(c,3)),this.addAttribute("normal",new Kr(c.slice(),3)),this.addAttribute("uv",new Kr(h,2)),0===e?this.computeVertexNormals():this.normalizeNormals()}function Mo(t,e){Hr.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Co(t,e)),this.mergeVertices()}function Co(t,e){Ao.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ko(t,e){Hr.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Oo(t,e)),this.mergeVertices()}function Oo(t,e){Ao.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Lo(t,e){Hr.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ro(t,e)),this.mergeVertices()}function Ro(t,e){var n=(1+Math.sqrt(5))/2;Ao.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Po(t,e){Hr.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Io(t,e)),this.mergeVertices()}function Io(t,e){var n=(1+Math.sqrt(5))/2,i=1/n;Ao.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Do(t,e,n,i,r,a){Hr.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new jo(t,e,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function jo(s,l,u,c,t){ea.call(this),this.type="TubeBufferGeometry",this.parameters={path:s,tubularSegments:l,radius:u,radialSegments:c,closed:t},l=l||64,u=u||1,c=c||8,t=t||!1;var h=s.computeFrenetFrames(l,t);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var r,d,p=new tn,f=new tn,e=new bt,m=[],v=[],n=[],a=[];function i(t){var e=s.getPointAt(t/l),n=h.normals[t],i=h.binormals[t];for(d=0;d<=c;d++){var r=d/c*Math.PI*2,a=Math.sin(r),o=-Math.cos(r);f.x=o*n.x+a*i.x,f.y=o*n.y+a*i.y,f.z=o*n.z+a*i.z,f.normalize(),v.push(f.x,f.y,f.z),p.x=e.x+u*f.x,p.y=e.y+u*f.y,p.z=e.z+u*f.z,m.push(p.x,p.y,p.z)}}!function(){for(r=0;r<l;r++)i(r);i(!1===t?l:0),function(){for(r=0;r<=l;r++)for(d=0;d<=c;d++)e.x=r/l,e.y=d/c,n.push(e.x,e.y)}(),function(){for(d=1;d<=l;d++)for(r=1;r<=c;r++){var t=(c+1)*(d-1)+(r-1),e=(c+1)*d+(r-1),n=(c+1)*d+r,i=(c+1)*(d-1)+r;a.push(t,e,i),a.push(e,n,i)}}()}(),this.setIndex(a),this.addAttribute("position",new Kr(m,3)),this.addAttribute("normal",new Kr(v,3)),this.addAttribute("uv",new Kr(n,2))}function No(t,e,n,i,r,a,o){Hr.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Uo(t,e,n,i,r,a)),this.mergeVertices()}function Uo(t,e,n,i,r,a){ea.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},t=t||100,e=e||40,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;var o,s,l=[],u=[],c=[],h=[],d=new tn,p=new tn,f=new tn,m=new tn,v=new tn,g=new tn,y=new tn;for(o=0;o<=n;++o){var _=o/n*r*Math.PI*2;for(M(_,r,a,t,f),M(_+.01,r,a,t,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=i;++s){var b=s/i*Math.PI*2,w=-e*Math.cos(b),T=e*Math.sin(b);d.x=f.x+(w*y.x+T*v.x),d.y=f.y+(w*y.y+T*v.y),d.z=f.z+(w*y.z+T*v.z),u.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),c.push(p.x,p.y,p.z),h.push(o/n),h.push(s/i)}}for(s=1;s<=n;s++)for(o=1;o<=i;o++){var x=(i+1)*(s-1)+(o-1),E=(i+1)*s+(o-1),S=(i+1)*s+o,A=(i+1)*(s-1)+o;l.push(x,E,A),l.push(E,S,A)}function M(t,e,n,i,r){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new Kr(u,3)),this.addAttribute("normal",new Kr(c,3)),this.addAttribute("uv",new Kr(h,2))}function Bo(t,e,n,i,r){Hr.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Fo(t,e,n,i,r)),this.mergeVertices()}function Fo(t,e,n,i,r){ea.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||100,e=e||40,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,o,s=[],l=[],u=[],c=[],h=new tn,d=new tn,p=new tn;for(a=0;a<=n;a++)for(o=0;o<=i;o++){var f=o/i*r,m=a/n*Math.PI*2;d.x=(t+e*Math.cos(m))*Math.cos(f),d.y=(t+e*Math.cos(m))*Math.sin(f),d.z=e*Math.sin(m),l.push(d.x,d.y,d.z),h.x=t*Math.cos(f),h.y=t*Math.sin(f),p.subVectors(d,h).normalize(),u.push(p.x,p.y,p.z),c.push(o/i),c.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=i;o++){var v=(i+1)*a+o-1,g=(i+1)*(a-1)+o-1,y=(i+1)*(a-1)+o,_=(i+1)*a+o;s.push(v,g,_),s.push(g,y,_)}this.setIndex(s),this.addAttribute("position",new Kr(l,3)),this.addAttribute("normal",new Kr(u,3)),this.addAttribute("uv",new Kr(c,2))}$a.prototype=Object.assign(Object.create(tr.prototype),{constructor:$a,isArrayCamera:!0}),to.prototype.isFogExp2=!0,to.prototype.clone=function(){return new to(this.color.getHex(),this.density)},to.prototype.toJSON=function(t){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},eo.prototype.isFog=!0,eo.prototype.clone=function(){return new eo(this.color.getHex(),this.near,this.far)},eo.prototype.toJSON=function(t){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},no.prototype=Object.assign(Object.create(Ki.prototype),{constructor:no,copy:function(t,e){return Ki.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Ki.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),io.prototype=Object.assign(Object.create(Ki.prototype),{constructor:io,isLensFlare:!0,copy:function(t){Ki.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,n=t.lensFlares.length;e<n;e++)this.lensFlares.push(t.lensFlares[e]);return this},add:function(t,e,n,i,r,a){void 0===e&&(e=-1),void 0===n&&(n=0),void 0===a&&(a=1),void 0===r&&(r=new Wn(16777215)),void 0===i&&(i=q),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:t,size:e,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:r,blending:i})},updateLensFlares:function(){var t,e,n=this.lensFlares.length,i=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(t=0;t<n;t++)(e=this.lensFlares[t]).x=this.positionScreen.x+i*e.distance,e.y=this.positionScreen.y+r*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),((ro.prototype=Object.create(wi.prototype)).constructor=ro).prototype.isSpriteMaterial=!0,ro.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},ao.prototype=Object.assign(Object.create(Ki.prototype),{constructor:ao,isSprite:!0,raycast:(Ta=new tn,xa=new tn,Ea=new tn,function(t,e){xa.setFromMatrixPosition(this.matrixWorld),t.ray.closestPointToPoint(xa,Ta),Ea.setFromMatrixScale(this.matrixWorld);var n=Ea.x*Ea.y/4;if(!(xa.distanceToSquared(Ta)>n)){var i=t.ray.origin.distanceTo(Ta);i<t.near||i>t.far||e.push({distance:i,point:Ta.clone(),face:null,object:this})}}),clone:function(){return new this.constructor(this.material).copy(this)}}),oo.prototype=Object.assign(Object.create(Ki.prototype),{constructor:oo,copy:function(t){Ki.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);n.splice(i,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object},raycast:(Ma=new tn,function(t,e){Ma.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Ma);this.getObjectForDistance(n).raycast(t,e)}),update:(Sa=new tn,Aa=new tn,function(t){var e=this.levels;if(e.length>1){Sa.setFromMatrixPosition(t.matrixWorld),Aa.setFromMatrixPosition(this.matrixWorld);var n=Sa.distanceTo(Aa);e[0].object.visible=!0;for(var i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(;i<r;i++)e[i].object.visible=!1}}),toJSON:function(t){var e=Ki.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),Object.assign(so.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new en;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:(Ca=new en,ka=new en,function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=t.length;r<a;r++){var o=t[r]?t[r].matrixWorld:ka;Ca.multiplyMatrices(o,e[r]),Ca.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)}),clone:function(){return new so(this.bones,this.boneInverses)}}),lo.prototype=Object.assign(Object.create(Ki.prototype),{constructor:lo,isBone:!0}),uo.prototype=Object.assign(Object.create(ca.prototype),{constructor:uo,isSkinnedMesh:!0,initBones:function(){var t,e,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)e=this.geometry.bones[n],t=new lo,r.push(t),t.name=e.name,t.position.fromArray(e.pos),t.quaternion.fromArray(e.rotq),void 0!==e.scl&&t.scale.fromArray(e.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)-1!==(e=this.geometry.bones[n]).parent&&null!==e.parent&&void 0!==r[e.parent]?r[e.parent].add(r[n]):this.add(r[n])}return this.updateMatrixWorld(!0),r},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var n=this.geometry.skinWeights[e];(t=1/n.lengthManhattan())!==1/0?n.multiplyScalar(t):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new Ze,r=this.geometry.attributes.skinWeight;for(e=0;e<r.count;e++)i.x=r.getX(e),i.y=r.getY(e),i.z=r.getZ(e),i.w=r.getW(e),(t=1/i.lengthManhattan())!==1/0?i.multiplyScalar(t):i.set(1,0,0,0),r.setXYZW(e,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(t){ca.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),((co.prototype=Object.create(wi.prototype)).constructor=co).prototype.isLineBasicMaterial=!0,co.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},ho.prototype=Object.assign(Object.create(Ki.prototype),{constructor:ho,isLine:!0,raycast:(Oa=new en,La=new sa,Ra=new Si,function(t,e){var n=t.linePrecision,i=n*n,r=this.geometry,a=this.matrixWorld;if(null===r.boundingSphere&&r.computeBoundingSphere(),Ra.copy(r.boundingSphere),Ra.applyMatrix4(a),!1!==t.ray.intersectsSphere(Ra)){Oa.getInverse(a),La.copy(t.ray).applyMatrix4(Oa);var o=new tn,s=new tn,l=new tn,u=new tn,c=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var h=r.index,d=r.attributes.position.array;if(null!==h)for(var p=h.array,f=0,m=p.length-1;f<m;f+=c){var v=p[f],g=p[f+1];o.fromArray(d,3*v),s.fromArray(d,3*g),La.distanceSqToSegment(o,s,u,l)>i||(u.applyMatrix4(this.matrixWorld),(b=t.ray.origin.distanceTo(u))<t.near||b>t.far||e.push({distance:b,point:l.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}else for(f=0,m=d.length/3-1;f<m;f+=c)o.fromArray(d,3*f),s.fromArray(d,3*f+3),La.distanceSqToSegment(o,s,u,l)>i||(u.applyMatrix4(this.matrixWorld),(b=t.ray.origin.distanceTo(u))<t.near||b>t.far||e.push({distance:b,point:l.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}else if(r.isGeometry){var y=r.vertices,_=y.length;for(f=0;f<_-1;f+=c){var b;La.distanceSqToSegment(y[f],y[f+1],u,l)>i||(u.applyMatrix4(this.matrixWorld),(b=t.ray.origin.distanceTo(u))<t.near||b>t.far||e.push({distance:b,point:l.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}}}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),po.prototype=Object.assign(Object.create(ho.prototype),{constructor:po,isLineSegments:!0}),fo.prototype=Object.assign(Object.create(ho.prototype),{constructor:fo,isLineLoop:!0}),((mo.prototype=Object.create(wi.prototype)).constructor=mo).prototype.isPointsMaterial=!0,mo.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},vo.prototype=Object.assign(Object.create(Ki.prototype),{constructor:vo,isPoints:!0,raycast:(Pa=new en,Ia=new sa,Da=new Si,function(a,o){var s=this,t=this.geometry,l=this.matrixWorld,e=a.params.Points.threshold;if(null===t.boundingSphere&&t.computeBoundingSphere(),Da.copy(t.boundingSphere),Da.applyMatrix4(l),Da.radius+=e,!1!==a.ray.intersectsSphere(Da)){Pa.getInverse(l),Ia.copy(a.ray).applyMatrix4(Pa);var n=e/((this.scale.x+this.scale.y+this.scale.z)/3),u=n*n,i=new tn;if(t.isBufferGeometry){var r=t.index,c=t.attributes.position.array;if(null!==r)for(var h=r.array,d=0,p=h.length;d<p;d++){var f=h[d];i.fromArray(c,3*f),g(i,f)}else{d=0;for(var m=c.length/3;d<m;d++)i.fromArray(c,3*d),g(i,d)}}else{var v=t.vertices;for(d=0,m=v.length;d<m;d++)g(v[d],d)}}function g(t,e){var n=Ia.distanceSqToPoint(t);if(n<u){var i=Ia.closestPointToPoint(t);i.applyMatrix4(l);var r=a.ray.origin.distanceTo(i);if(r<a.near||r>a.far)return;o.push({distance:r,distanceToRay:Math.sqrt(n),point:i.clone(),index:e,face:null,object:s})}}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),go.prototype=Object.assign(Object.create(Ki.prototype),{constructor:go}),(yo.prototype=Object.create($e.prototype)).constructor=yo,((_o.prototype=Object.create($e.prototype)).constructor=_o).prototype.isCompressedTexture=!0,(bo.prototype=Object.create($e.prototype)).constructor=bo,((wo.prototype=Object.create($e.prototype)).constructor=wo).prototype.isDepthTexture=!0,(To.prototype=Object.create(ea.prototype)).constructor=To,(xo.prototype=Object.create(Hr.prototype)).constructor=xo,(Eo.prototype=Object.create(ea.prototype)).constructor=Eo,(So.prototype=Object.create(Hr.prototype)).constructor=So,(Ao.prototype=Object.create(ea.prototype)).constructor=Ao,(Mo.prototype=Object.create(Hr.prototype)).constructor=Mo,(Co.prototype=Object.create(Ao.prototype)).constructor=Co,(ko.prototype=Object.create(Hr.prototype)).constructor=ko,(Oo.prototype=Object.create(Ao.prototype)).constructor=Oo,(Lo.prototype=Object.create(Hr.prototype)).constructor=Lo,(Ro.prototype=Object.create(Ao.prototype)).constructor=Ro,(Po.prototype=Object.create(Hr.prototype)).constructor=Po,(Io.prototype=Object.create(Ao.prototype)).constructor=Io,(Do.prototype=Object.create(Hr.prototype)).constructor=Do,(jo.prototype=Object.create(ea.prototype)).constructor=jo,(No.prototype=Object.create(Hr.prototype)).constructor=No,(Uo.prototype=Object.create(ea.prototype)).constructor=Uo,(Bo.prototype=Object.create(Hr.prototype)).constructor=Bo,(Fo.prototype=Object.create(ea.prototype)).constructor=Fo;var Vo={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},triangulate:function(){function v(t,e,n,i,r,a){var o,s,l,u,c,h,d,p,f,m,v,g,y,_,b,w,T;if(s=t[a[e]].x,l=t[a[e]].y,u=t[a[n]].x,c=t[a[n]].y,h=t[a[i]].x,(u-s)*((d=t[a[i]].y)-l)-(c-l)*(h-s)<=0)return!1;for(m=h-u,v=d-c,g=s-h,y=l-d,_=u-s,b=c-l,o=0;o<r;o++)if(p=t[a[o]].x,f=t[a[o]].y,!(p===s&&f===l||p===u&&f===c||p===h&&f===d)&&(w=_*(f-l)-b*(p-s),T=g*(f-d)-y*(p-h),m*(f-c)-v*(p-u)>=-Number.EPSILON&&T>=-Number.EPSILON&&w>=-Number.EPSILON))return!1;return!0}return function(t,e){var n=t.length;if(n<3)return null;var i,r,a,o=[],s=[],l=[];if(Vo.area(t)>0)for(r=0;r<n;r++)s[r]=r;else for(r=0;r<n;r++)s[r]=n-1-r;var u=n,c=2*u;for(r=u-1;u>2;){if(c--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),e?l:o;if(u<=(i=r)&&(i=0),u<=(r=i+1)&&(r=0),u<=(a=r+1)&&(a=0),v(t,i,r,a,u,s)){var h,d,p,f,m;for(h=s[i],d=s[r],p=s[a],o.push([t[h],t[d],t[p]]),l.push([s[i],s[r],s[a]]),m=(f=r)+1;m<u;f++,m++)s[f]=s[m];c=2*--u}}return e?l:o}}(),triangulateShape:function(t,e){function n(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function S(t,e,n){return t.x!==e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y}function E(t,e,n,i,r){var a=e.x-t.x,o=e.y-t.y,s=i.x-n.x,l=i.y-n.y,u=t.x-n.x,c=t.y-n.y,h=o*s-a*l,d=o*u-a*c;if(Math.abs(h)>Number.EPSILON){var p;if(h>0){if(d<0||d>h)return[];if((p=l*u-s*c)<0||p>h)return[]}else{if(d>0||d<h)return[];if((p=l*u-s*c)>0||p<h)return[]}if(0===p)return!r||0!==d&&d!==h?[t]:[];if(p===h)return!r||0!==d&&d!==h?[e]:[];if(0===d)return[n];if(d===h)return[i];var f=p/h;return[{x:t.x+f*a,y:t.y+f*o}]}if(0!==d||l*u!==s*c)return[];var m,v,g,y,_,b,w,T,x=0===a&&0===o,E=0===s&&0===l;return x&&E?t.x!==n.x||t.y!==n.y?[]:[t]:x?S(n,i,t)?[t]:[]:E?S(t,e,n)?[n]:[]:(T=0!==a?(y=t.x<e.x?(g=(m=t).x,(v=e).x):(g=(m=e).x,(v=t).x),n.x<i.x?(w=(_=n).x,(b=i).x):(w=(_=i).x,(b=n).x)):(y=t.y<e.y?(g=(m=t).y,(v=e).y):(g=(m=e).y,(v=t).y),n.y<i.y?(w=(_=n).y,(b=i).y):(w=(_=i).y,(b=n).y)),g<=w?y<w?[]:y===w?r?[]:[_]:y<=T?[_,v]:[_,b]:g>T?[]:g===T?r?[]:[m]:y<=T?[m,v]:[m,b])}function A(t,e,n,i){var r=e.x-t.x,a=e.y-t.y,o=n.x-t.x,s=n.y-t.y,l=i.x-t.x,u=i.y-t.y,c=r*s-a*o,h=r*u-a*l;if(Math.abs(c)>Number.EPSILON){var d=l*s-u*o;return c>0?h>=0&&d>=0:h>=0||d>=0}return h>0}n(t),e.forEach(n);for(var i,r,a,o,s,l,u={},c=t.concat(),h=0,d=e.length;h<d;h++)Array.prototype.push.apply(c,e[h]);for(i=0,r=c.length;i<r;i++)void 0!==u[s=c[i].x+":"+c[i].y]&&console.warn("THREE.ShapeUtils: Duplicate point",s,i),u[s]=i;var p=function(t,o){var u,c=t.concat();function e(t,e){var n=c.length-1,i=t-1;i<0&&(i=n);var r=t+1;r>n&&(r=0);var a=A(c[t],c[i],c[r],u[e]);if(!a)return!1;var o=u.length-1,s=e-1;s<0&&(s=o);var l=e+1;return l>o&&(l=0),!!(a=A(u[e],u[s],u[l],c[t]))}function n(t,e){var n,i;for(n=0;n<c.length;n++)if(i=n+1,i%=c.length,E(t,e,c[n],c[i],!0).length>0)return!0;return!1}var s=[];function i(t,e){var n,i,r,a;for(n=0;n<s.length;n++)for(i=o[s[n]],r=0;r<i.length;r++)if(a=r+1,a%=i.length,E(t,e,i[r],i[a],!0).length>0)return!0;return!1}for(var r,a,l,h,d,p,f,m,v,g,y=[],_=0,b=o.length;_<b;_++)s.push(_);for(var w=0,T=2*s.length;s.length>0;){if(--T<0){console.log("Infinite Loop! Holes left:"+s.length+", Probably Hole outside Shape!");break}for(a=w;a<c.length;a++){for(l=c[a],r=-1,_=0;_<s.length;_++)if(d=s[_],void 0===y[p=l.x+":"+l.y+":"+d]){u=o[d];for(var x=0;x<u.length;x++)if(h=u[x],e(a,x)&&!n(l,h)&&!i(l,h)){r=x,s.splice(_,1),f=c.slice(0,a+1),m=c.slice(a),v=u.slice(r),g=u.slice(0,r+1),c=f.concat(v).concat(g).concat(m),w=a;break}if(r>=0)break;y[p]=!0}if(r>=0)break}}return c}(t,e),f=Vo.triangulate(p,!1);for(i=0,r=f.length;i<r;i++)for(o=f[i],a=0;a<3;a++)void 0!==(l=u[s=o[a].x+":"+o[a].y])&&(o[a]=l);return f.concat()},isClockWise:function(t){return Vo.area(t)<0}};function Ho(t,e){Hr.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new zo(t,e)),this.mergeVertices()}function zo(t,e){"undefined"!==typeof t&&(ea.call(this),this.type="ExtrudeBufferGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeVertexNormals())}function Go(t,e){Hr.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Wo(t,e)),this.mergeVertices()}function Wo(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Hr;var i=n.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),zo.call(this,i,e),this.type="TextBufferGeometry"}function qo(t,e,n,i,r,a,o){Hr.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Xo(t,e,n,i,r,a,o)),this.mergeVertices()}function Xo(t,e,n,i,r,a,o){ea.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},t=t||50,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var s,l,u=(a=void 0!==a?a:0)+(o=void 0!==o?o:Math.PI),c=0,h=[],d=new tn,p=new tn,f=[],m=[],v=[],g=[];for(l=0;l<=n;l++){var y=[],_=l/n;for(s=0;s<=e;s++){var b=s/e;d.x=-t*Math.cos(i+b*r)*Math.sin(a+_*o),d.y=t*Math.cos(a+_*o),d.z=t*Math.sin(i+b*r)*Math.sin(a+_*o),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),g.push(b,1-_),y.push(c++)}h.push(y)}for(l=0;l<n;l++)for(s=0;s<e;s++){var w=h[l][s+1],T=h[l][s],x=h[l+1][s],E=h[l+1][s+1];(0!==l||a>0)&&f.push(w,T,E),(l!==n-1||u<Math.PI)&&f.push(T,x,E)}this.setIndex(f),this.addAttribute("position",new Kr(m,3)),this.addAttribute("normal",new Kr(v,3)),this.addAttribute("uv",new Kr(g,2))}function Yo(t,e,n,i,r,a){Hr.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new $o(t,e,n,i,r,a)),this.mergeVertices()}function $o(t,e,n,i,r,a){ea.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},t=t||20,e=e||50,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,s,l,u=[],c=[],h=[],d=[],p=t,f=(e-t)/(i=void 0!==i?Math.max(1,i):1),m=new tn,v=new bt;for(s=0;s<=i;s++){for(l=0;l<=n;l++)o=r+l/n*a,m.x=p*Math.cos(o),m.y=p*Math.sin(o),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/e+1)/2,v.y=(m.y/e+1)/2,d.push(v.x,v.y);p+=f}for(s=0;s<i;s++){var g=s*(n+1);for(l=0;l<n;l++){var y=o=l+g,_=o+n+1,b=o+n+2,w=o+1;u.push(y,_,w),u.push(_,b,w)}}this.setIndex(u),this.addAttribute("position",new Kr(c,3)),this.addAttribute("normal",new Kr(h,3)),this.addAttribute("uv",new Kr(d,2))}function Zo(t,e,n,i){Hr.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new Ko(t,e,n,i)),this.mergeVertices()}function Ko(t,e,n,i){ea.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=De.clamp(i,0,2*Math.PI);var r,a,o,s=[],l=[],u=[],c=1/e,h=new tn,d=new bt;for(a=0;a<=e;a++){var p=n+a*c*i,f=Math.sin(p),m=Math.cos(p);for(o=0;o<=t.length-1;o++)h.x=t[o].x*f,h.y=t[o].y,h.z=t[o].x*m,l.push(h.x,h.y,h.z),d.x=a/e,d.y=o/(t.length-1),u.push(d.x,d.y)}for(a=0;a<e;a++)for(o=0;o<t.length-1;o++){var v=r=o+a*t.length,g=r+t.length,y=r+t.length+1,_=r+1;s.push(v,g,_),s.push(g,y,_)}if(this.setIndex(s),this.addAttribute("position",new Kr(l,3)),this.addAttribute("uv",new Kr(u,2)),this.computeVertexNormals(),i===2*Math.PI){var b=this.attributes.normal.array,w=new tn,T=new tn,x=new tn;for(r=e*t.length*3,o=a=0;a<t.length;a++,o+=3)w.x=b[o+0],w.y=b[o+1],w.z=b[o+2],T.x=b[r+o+0],T.y=b[r+o+1],T.z=b[r+o+2],x.addVectors(w,T).normalize(),b[o+0]=b[r+o+0]=x.x,b[o+1]=b[r+o+1]=x.y,b[o+2]=b[r+o+2]=x.z}}function Jo(t,e){Hr.call(this),this.type="ShapeGeometry","object"===typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Qo(t,e)),this.mergeVertices()}function Qo(t,f){ea.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:f},f=f||12;var m=[],v=[],g=[],y=[],e=0,_=0;if(!1===Array.isArray(t))i(t);else for(var n=0;n<t.length;n++)i(t[n]),this.addGroup(e,_,n),e+=_,_=0;function i(t){var e,n,i,r=v.length/3,a=t.extractPoints(f),o=a.shape,s=a.holes;if(!1===Vo.isClockWise(o))for(o=o.reverse(),e=0,n=s.length;e<n;e++)i=s[e],!0===Vo.isClockWise(i)&&(s[e]=i.reverse());var l=Vo.triangulateShape(o,s);for(e=0,n=s.length;e<n;e++)i=s[e],o=o.concat(i);for(e=0,n=o.length;e<n;e++){var u=o[e];v.push(u.x,u.y,0),g.push(0,0,1),y.push(u.x,u.y)}for(e=0,n=l.length;e<n;e++){var c=l[e],h=c[0]+r,d=c[1]+r,p=c[2]+r;m.push(h,d,p),_+=3}}this.setIndex(m),this.addAttribute("position",new Kr(v,3)),this.addAttribute("normal",new Kr(g,3)),this.addAttribute("uv",new Kr(y,2))}function ts(t,e){ea.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,a,o=[],s=Math.cos(De.DEG2RAD*e),l=[0,0],u={},c=["a","b","c"];t.isBufferGeometry?(a=new Hr).fromBufferGeometry(t):a=t.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,d=a.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],v=0;v<3;v++)n=m[c[v]],i=m[c[(v+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===u[r=l[0]+","+l[1]]?u[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:u[r].face2=p;for(r in u){var g=u[r];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];o.push(y.x,y.y,y.z),y=h[g.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new Kr(o,3))}function es(t,e,n,i,r,a,o,s){Hr.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new ns(t,e,n,i,r,a,o,s)),this.mergeVertices()}function ns(g,y,_,b,w,t,T,x){ea.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:g,radiusBottom:y,height:_,radialSegments:b,heightSegments:w,openEnded:t,thetaStart:T,thetaLength:x};var E=this;g=void 0!==g?g:20,y=void 0!==y?y:20,_=void 0!==_?_:100,b=Math.floor(b)||8,w=Math.floor(w)||1,t=void 0!==t&&t,T=void 0!==T?T:0,x=void 0!==x?x:2*Math.PI;var S=[],A=[],M=[],C=[],k=0,O=[],L=_/2,R=0;function e(t){var e,n,i,r=new bt,a=new tn,o=0,s=!0===t?g:y,l=!0===t?1:-1;for(n=k,e=1;e<=b;e++)A.push(0,L*l,0),M.push(0,l,0),C.push(.5,.5),k++;for(i=k,e=0;e<=b;e++){var u=e/b*x+T,c=Math.cos(u),h=Math.sin(u);a.x=s*h,a.y=L*l,a.z=s*c,A.push(a.x,a.y,a.z),M.push(0,l,0),r.x=.5*c+.5,r.y=.5*h*l+.5,C.push(r.x,r.y),k++}for(e=0;e<b;e++){var d=n+e,p=i+e;!0===t?S.push(p,p+1,d):S.push(p+1,p,d),o+=3}E.addGroup(R,o,!0===t?1:2),R+=o}!function(){var t,e,n=new tn,i=new tn,r=0,a=(y-g)/_;for(e=0;e<=w;e++){var o=[],s=e/w,l=s*(y-g)+g;for(t=0;t<=b;t++){var u=t/b,c=u*x+T,h=Math.sin(c),d=Math.cos(c);i.x=l*h,i.y=-s*_+L,i.z=l*d,A.push(i.x,i.y,i.z),n.set(h,a,d).normalize(),M.push(n.x,n.y,n.z),C.push(u,1-s),o.push(k++)}O.push(o)}for(t=0;t<b;t++)for(e=0;e<w;e++){var p=O[e][t],f=O[e+1][t],m=O[e+1][t+1],v=O[e][t+1];S.push(p,f,v),S.push(f,m,v),r+=6}E.addGroup(R,r,0),R+=r}(),!1===t&&(g>0&&e(!0),y>0&&e(!1)),this.setIndex(S),this.addAttribute("position",new Kr(A,3)),this.addAttribute("normal",new Kr(M,3)),this.addAttribute("uv",new Kr(C,2))}function is(t,e,n,i,r,a,o){es.call(this,0,t,e,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function rs(t,e,n,i,r,a,o){ns.call(this,0,t,e,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function as(t,e,n,i){Hr.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new os(t,e,n,i)),this.mergeVertices()}function os(t,e,n,i){ea.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,a,o=[],s=[],l=[],u=[],c=new tn,h=new bt;for(s.push(0,0,0),l.push(0,0,1),u.push(.5,.5),a=0,r=3;a<=e;a++,r+=3){var d=n+a/e*i;c.x=t*Math.cos(d),c.y=t*Math.sin(d),s.push(c.x,c.y,c.z),l.push(0,0,1),h.x=(s[r]/t+1)/2,h.y=(s[r+1]/t+1)/2,u.push(h.x,h.y)}for(r=1;r<=e;r++)o.push(r,r+1,0);this.setIndex(o),this.addAttribute("position",new Kr(s,3)),this.addAttribute("normal",new Kr(l,3)),this.addAttribute("uv",new Kr(u,2))}(Ho.prototype=Object.create(Hr.prototype)).constructor=Ho,((zo.prototype=Object.create(ea.prototype)).constructor=zo).prototype.getArrays=function(){var t=this.getAttribute("position"),e=t?Array.prototype.slice.call(t.array):[],n=this.getAttribute("uv"),i=n?Array.prototype.slice.call(n.array):[],r=this.index;return{position:e,uv:i,index:r?Array.prototype.slice.call(r.array):[]}},zo.prototype.addShapeList=function(t,e){var n=t.length;e.arrays=this.getArrays();for(var i=0;i<n;i++){var r=t[i];this.addShape(r,e)}this.setIndex(e.arrays.index),this.addAttribute("position",new Kr(e.arrays.position,3)),this.addAttribute("uv",new Kr(e.arrays.uv,2))},zo.prototype.addShape=function(t,i){var e,n,r,a,o,s,l,u,c=i.arrays?i.arrays:this.getArrays(),h=c.position,d=c.index,p=c.uv,f=[],m=void 0!==i.amount?i.amount:100,v=void 0!==i.bevelThickness?i.bevelThickness:6,g=void 0!==i.bevelSize?i.bevelSize:v-2,y=void 0!==i.bevelSegments?i.bevelSegments:3,_=void 0===i.bevelEnabled||i.bevelEnabled,b=void 0!==i.curveSegments?i.curveSegments:12,w=void 0!==i.steps?i.steps:1,T=i.extrudePath,x=!1,E=void 0!==i.UVGenerator?i.UVGenerator:Ho.WorldUVGenerator;T&&(e=T.getSpacedPoints(w),_=!(x=!0),n=void 0!==i.frames?i.frames:T.computeFrenetFrames(w,!1),r=new tn,a=new tn,o=new tn),_||(g=v=y=0);var S=this,A=t.extractPoints(b),M=A.shape,C=A.holes;if(!Vo.isClockWise(M))for(M=M.reverse(),l=0,u=C.length;l<u;l++)s=C[l],Vo.isClockWise(s)&&(C[l]=s.reverse());var k=Vo.triangulateShape(M,C),O=M;for(l=0,u=C.length;l<u;l++)s=C[l],M=M.concat(s);function L(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var R,P,I,D,j,N,U=M.length,B=k.length;function F(t,e,n){var i,r,a,o=t.x-e.x,s=t.y-e.y,l=n.x-t.x,u=n.y-t.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c),p=Math.sqrt(l*l+u*u),f=e.x-s/d,m=e.y+o/d,v=((n.x-u/p-f)*u-(n.y+l/p-m)*l)/(o*u-s*l),g=(i=f+o*v-t.x)*i+(r=m+s*v-t.y)*r;if(g<=2)return new bt(i,r);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),a=y?(i=-s,r=o,Math.sqrt(c)):(i=o,r=s,Math.sqrt(c/2))}return new bt(i/a,r/a)}for(var V=[],H=0,z=O.length,G=z-1,W=H+1;H<z;H++,G++,W++)G===z&&(G=0),W===z&&(W=0),V[H]=F(O[H],O[G],O[W]);var q,X,Y=[],$=V.concat();for(l=0,u=C.length;l<u;l++){for(s=C[l],q=[],H=0,G=(z=s.length)-1,W=H+1;H<z;H++,G++,W++)G===z&&(G=0),W===z&&(W=0),q[H]=F(s[H],s[G],s[W]);Y.push(q),$=$.concat(q)}for(R=0;R<y;R++){for(I=R/y,D=v*Math.cos(I*Math.PI/2),P=g*Math.sin(I*Math.PI/2),H=0,z=O.length;H<z;H++)K((j=L(O[H],V[H],P)).x,j.y,-D);for(l=0,u=C.length;l<u;l++)for(s=C[l],q=Y[l],H=0,z=s.length;H<z;H++)K((j=L(s[H],q[H],P)).x,j.y,-D)}for(P=g,H=0;H<U;H++)j=_?L(M[H],$[H],P):M[H],x?(a.copy(n.normals[0]).multiplyScalar(j.x),r.copy(n.binormals[0]).multiplyScalar(j.y),o.copy(e[0]).add(a).add(r),K(o.x,o.y,o.z)):K(j.x,j.y,0);for(X=1;X<=w;X++)for(H=0;H<U;H++)j=_?L(M[H],$[H],P):M[H],x?(a.copy(n.normals[X]).multiplyScalar(j.x),r.copy(n.binormals[X]).multiplyScalar(j.y),o.copy(e[X]).add(a).add(r),K(o.x,o.y,o.z)):K(j.x,j.y,m/w*X);for(R=y-1;R>=0;R--){for(I=R/y,D=v*Math.cos(I*Math.PI/2),P=g*Math.sin(I*Math.PI/2),H=0,z=O.length;H<z;H++)K((j=L(O[H],V[H],P)).x,j.y,m+D);for(l=0,u=C.length;l<u;l++)for(s=C[l],q=Y[l],H=0,z=s.length;H<z;H++)j=L(s[H],q[H],P),x?K(j.x,j.y+e[w-1].y,e[w-1].x+D):K(j.x,j.y,m+D)}function Z(t,e){var n,i;for(H=t.length;--H>=0;){(i=(n=H)-1)<0&&(i=t.length-1);var r=0,a=w+2*y;for(r=0;r<a;r++){var o=U*r,s=U*(r+1);Q(e+n+o,e+i+o,e+i+s,e+n+s,t,r,a,n,i)}}}function K(t,e,n){f.push(t),f.push(e),f.push(n)}function J(t,e,n){tt(t),tt(e),tt(n);var i=h.length/3,r=E.generateTopUV(S,h,i-3,i-2,i-1);et(r[0]),et(r[1]),et(r[2])}function Q(t,e,n,i,r,a,o,s,l){tt(t),tt(e),tt(i),tt(e),tt(n),tt(i);var u=h.length/3,c=E.generateSideWallUV(S,h,u-6,u-3,u-2,u-1);et(c[0]),et(c[1]),et(c[3]),et(c[1]),et(c[2]),et(c[3])}function tt(t){d.push(h.length/3),h.push(f[3*t+0]),h.push(f[3*t+1]),h.push(f[3*t+2])}function et(t){p.push(t.x),p.push(t.y)}!function(){var t=h.length/3;if(_){var e=0,n=U*e;for(H=0;H<B;H++)J((N=k[H])[2]+n,N[1]+n,N[0]+n);for(n=U*(e=w+2*y),H=0;H<B;H++)J((N=k[H])[0]+n,N[1]+n,N[2]+n)}else{for(H=0;H<B;H++)J((N=k[H])[2],N[1],N[0]);for(H=0;H<B;H++)J((N=k[H])[0]+U*w,N[1]+U*w,N[2]+U*w)}S.addGroup(t,h.length/3-t,void 0!==i.material?i.material:0)}(),function(){var t=h.length/3,e=0;for(Z(O,e),e+=O.length,l=0,u=C.length;l<u;l++)Z(s=C[l],e),e+=s.length;S.addGroup(t,h.length/3-t,void 0!==i.extrudeMaterial?i.extrudeMaterial:1)}(),i.arrays||(this.setIndex(d),this.addAttribute("position",new Kr(h,3)),this.addAttribute("uv",new Kr(i.arrays.uv,2)))},Ho.WorldUVGenerator={generateTopUV:function(t,e,n,i,r){var a=e[3*n],o=e[3*n+1],s=e[3*i],l=e[3*i+1],u=e[3*r],c=e[3*r+1];return[new bt(a,o),new bt(s,l),new bt(u,c)]},generateSideWallUV:function(t,e,n,i,r,a){var o=e[3*n],s=e[3*n+1],l=e[3*n+2],u=e[3*i],c=e[3*i+1],h=e[3*i+2],d=e[3*r],p=e[3*r+1],f=e[3*r+2],m=e[3*a],v=e[3*a+1],g=e[3*a+2];return Math.abs(s-c)<.01?[new bt(o,1-l),new bt(u,1-h),new bt(d,1-f),new bt(m,1-g)]:[new bt(s,1-l),new bt(c,1-h),new bt(p,1-f),new bt(v,1-g)]}},(Go.prototype=Object.create(Hr.prototype)).constructor=Go,(Wo.prototype=Object.create(zo.prototype)).constructor=Wo,(qo.prototype=Object.create(Hr.prototype)).constructor=qo,(Xo.prototype=Object.create(ea.prototype)).constructor=Xo,(Yo.prototype=Object.create(Hr.prototype)).constructor=Yo,($o.prototype=Object.create(ea.prototype)).constructor=$o,(Zo.prototype=Object.create(Hr.prototype)).constructor=Zo,(Ko.prototype=Object.create(ea.prototype)).constructor=Ko,(Jo.prototype=Object.create(Hr.prototype)).constructor=Jo,(Qo.prototype=Object.create(ea.prototype)).constructor=Qo,(ts.prototype=Object.create(ea.prototype)).constructor=ts,(es.prototype=Object.create(Hr.prototype)).constructor=es,(ns.prototype=Object.create(ea.prototype)).constructor=ns,(is.prototype=Object.create(es.prototype)).constructor=is,(rs.prototype=Object.create(ns.prototype)).constructor=rs,(as.prototype=Object.create(Hr.prototype)).constructor=as,(os.prototype=Object.create(ea.prototype)).constructor=os;var ss=Object.freeze({WireframeGeometry:To,ParametricGeometry:xo,ParametricBufferGeometry:Eo,TetrahedronGeometry:Mo,TetrahedronBufferGeometry:Co,OctahedronGeometry:ko,OctahedronBufferGeometry:Oo,IcosahedronGeometry:Lo,IcosahedronBufferGeometry:Ro,DodecahedronGeometry:Po,DodecahedronBufferGeometry:Io,PolyhedronGeometry:So,PolyhedronBufferGeometry:Ao,TubeGeometry:Do,TubeBufferGeometry:jo,TorusKnotGeometry:No,TorusKnotBufferGeometry:Uo,TorusGeometry:Bo,TorusBufferGeometry:Fo,TextGeometry:Go,TextBufferGeometry:Wo,SphereGeometry:qo,SphereBufferGeometry:Xo,RingGeometry:Yo,RingBufferGeometry:$o,PlaneGeometry:ra,PlaneBufferGeometry:aa,LatheGeometry:Zo,LatheBufferGeometry:Ko,ShapeGeometry:Jo,ShapeBufferGeometry:Qo,ExtrudeGeometry:Ho,ExtrudeBufferGeometry:zo,EdgesGeometry:ts,ConeGeometry:is,ConeBufferGeometry:rs,CylinderGeometry:es,CylinderBufferGeometry:ns,CircleGeometry:as,CircleBufferGeometry:os,BoxGeometry:na,BoxBufferGeometry:ia});function ls(t){Ti.call(this,{uniforms:$n.merge([Yn.lights,{opacity:{value:1}}]),vertexShader:Zn.shadow_vert,fragmentShader:Zn.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}}),this.setValues(t)}function us(t){Ti.call(this,t),this.type="RawShaderMaterial"}function cs(t){wi.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Wn(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new bt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function hs(t){cs.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function ds(t){wi.call(this),this.type="MeshPhongMaterial",this.color=new Wn(16777215),this.specular=new Wn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new bt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=F,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ps(t){ds.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function fs(t){wi.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new bt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ms(t){wi.call(this),this.type="MeshLambertMaterial",this.color=new Wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=F,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function vs(t){wi.call(this),this.type="LineDashedMaterial",this.color=new Wn(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)}((ls.prototype=Object.create(Ti.prototype)).constructor=ls).prototype.isShadowMaterial=!0,((us.prototype=Object.create(Ti.prototype)).constructor=us).prototype.isRawShaderMaterial=!0,((cs.prototype=Object.create(wi.prototype)).constructor=cs).prototype.isMeshStandardMaterial=!0,cs.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((hs.prototype=Object.create(cs.prototype)).constructor=hs).prototype.isMeshPhysicalMaterial=!0,hs.prototype.copy=function(t){return cs.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},((ds.prototype=Object.create(wi.prototype)).constructor=ds).prototype.isMeshPhongMaterial=!0,ds.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((ps.prototype=Object.create(ds.prototype)).constructor=ps).prototype.isMeshToonMaterial=!0,ps.prototype.copy=function(t){return ds.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},((fs.prototype=Object.create(wi.prototype)).constructor=fs).prototype.isMeshNormalMaterial=!0,fs.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((ms.prototype=Object.create(wi.prototype)).constructor=ms).prototype.isMeshLambertMaterial=!0,ms.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((vs.prototype=Object.create(wi.prototype)).constructor=vs).prototype.isLineDashedMaterial=!0,vs.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var gs=Object.freeze({ShadowMaterial:ls,SpriteMaterial:ro,RawShaderMaterial:us,ShaderMaterial:Ti,PointsMaterial:mo,MeshPhysicalMaterial:hs,MeshStandardMaterial:cs,MeshPhongMaterial:ds,MeshToonMaterial:ps,MeshNormalMaterial:fs,MeshLambertMaterial:ms,MeshDepthMaterial:xi,MeshBasicMaterial:oa,LineDashedMaterial:vs,LineBasicMaterial:co,Material:wi}),ys={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function _s(t,e,n){var i=this,r=!1,a=0,o=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===r&&void 0!==i.onStart&&i.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)}}var bs=new _s;function ws(t){this.manager=void 0!==t?t:bs}function Ts(t){this.manager=void 0!==t?t:bs,this._parser=null}function xs(t){this.manager=void 0!==t?t:bs,this._parser=null}function Es(t){this.manager=void 0!==t?t:bs}function Ss(t){this.manager=void 0!==t?t:bs}function As(t){this.manager=void 0!==t?t:bs}function Ms(t,e){Ki.call(this),this.type="Light",this.color=new Wn(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Cs(t,e,n){Ms.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Ki.DefaultUp),this.updateMatrix(),this.groundColor=new Wn(e)}function ks(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new bt(512,512),this.map=null,this.matrix=new en}function Os(){ks.call(this,new tr(50,1,.5,500))}function Ls(t,e,n,i,r,a){Ms.call(this,t,e),this.type="SpotLight",this.position.copy(Ki.DefaultUp),this.updateMatrix(),this.target=new Ki,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new Os}function Rs(t,e,n,i){Ms.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new ks(new tr(90,1,.5,500))}function Ps(){ks.call(this,new Qi(-5,5,5,-5,.5,500))}function Is(t,e){Ms.call(this,t,e),this.type="DirectionalLight",this.position.copy(Ki.DefaultUp),this.updateMatrix(),this.target=new Ki,this.shadow=new Ps}function Ds(t,e){Ms.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function js(t,e,n,i){Ms.call(this,t,e),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}Object.assign(ws.prototype,{load:function(n,i,e,r){void 0===n&&(n=""),void 0!==this.path&&(n=this.path+n);var a=this,t=ys.get(n);if(void 0!==t)return a.manager.itemStart(n),setTimeout(function(){i&&i(t),a.manager.itemEnd(n)},0),t;var o=n.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],l=!!o[2],u=o[3];u=window.decodeURIComponent(u),l&&(u=window.atob(u));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":c=new ArrayBuffer(u.length);for(var d=new Uint8Array(c),p=0;p<u.length;p++)d[p]=u.charCodeAt(p);"blob"===h&&(c=new Blob([c],{type:s}));break;case"document":var f=new DOMParser;c=f.parseFromString(u,s);break;case"json":c=JSON.parse(u);break;default:c=u}window.setTimeout(function(){i&&i(c),a.manager.itemEnd(n)},0)}catch(t){window.setTimeout(function(){r&&r(t),a.manager.itemEnd(n),a.manager.itemError(n)},0)}}else{var m=new XMLHttpRequest;for(var v in m.open("GET",n,!0),m.addEventListener("load",function(t){var e=t.target.response;ys.add(n,e),200===this.status?(i&&i(e),a.manager.itemEnd(n)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),i&&i(e),a.manager.itemEnd(n)):(r&&r(t),a.manager.itemEnd(n),a.manager.itemError(n))},!1),void 0!==e&&m.addEventListener("progress",function(t){e(t)},!1),m.addEventListener("error",function(t){r&&r(t),a.manager.itemEnd(n),a.manager.itemError(n)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return a.manager.itemStart(n),m},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(Ts.prototype,{load:function(t,a,e,i){var o=this,s=[],l=new _o;l.image=s;var r=new ws(this.manager);function n(n){r.load(t[n],function(t){var e=o._parser(t,!0);s[n]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},6===(u+=1)&&(1===e.mipmapCount&&(l.minFilter=ee),l.format=e.format,l.needsUpdate=!0,a&&a(l))},e,i)}if(r.setPath(this.path),r.setResponseType("arraybuffer"),Array.isArray(t))for(var u=0,c=0,h=t.length;c<h;++c)n(c);else r.load(t,function(t){var e=o._parser(t,!0);if(e.isCubemap)for(var n=e.mipmaps.length/e.mipmapCount,i=0;i<n;i++){s[i]={mipmaps:[]};for(var r=0;r<e.mipmapCount;r++)s[i].mipmaps.push(e.mipmaps[i*e.mipmapCount+r]),s[i].format=e.format,s[i].width=e.width,s[i].height=e.height}else l.image.width=e.width,l.image.height=e.height,l.mipmaps=e.mipmaps;1===e.mipmapCount&&(l.minFilter=ee),l.format=e.format,l.needsUpdate=!0,a&&a(l)},e,i);return l},setPath:function(t){return this.path=t,this}}),Object.assign(xs.prototype,{load:function(t,n,e,i){var r=this,a=new nn,o=new ws(this.manager);return o.setResponseType("arraybuffer"),o.load(t,function(t){var e=r._parser(t);e&&(void 0!==e.image?a.image=e.image:void 0!==e.data&&(a.image.width=e.width,a.image.height=e.height,a.image.data=e.data),a.wrapS=void 0!==e.wrapS?e.wrapS:Zt,a.wrapT=void 0!==e.wrapT?e.wrapT:Zt,a.magFilter=void 0!==e.magFilter?e.magFilter:ee,a.minFilter=void 0!==e.minFilter?e.minFilter:ie,a.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(a.format=e.format),void 0!==e.type&&(a.type=e.type),void 0!==e.mipmaps&&(a.mipmaps=e.mipmaps),1===e.mipmapCount&&(a.minFilter=ee),a.needsUpdate=!0,n&&n(a,e))},e,i),a}}),Object.assign(Es.prototype,{load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var r=this,a=ys.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){ys.add(e,this),t&&t(this),r.manager.itemEnd(e)},!1),o.addEventListener("error",function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ss.prototype,{load:function(t,n,e,i){var r=new rn,a=new Es(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(e){a.load(t[e],function(t){r.images[e]=t,6===++o&&(r.needsUpdate=!0,n&&n(r))},void 0,i)}for(var l=0;l<t.length;++l)s(l);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(As.prototype,{load:function(e,n,t,i){var r=new Es(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);var a=new $e;return a.image=r.load(e,function(){var t=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);a.format=t?ge:ye,a.needsUpdate=!0,void 0!==n&&n(a)},t,i),a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Ms.prototype=Object.assign(Object.create(Ki.prototype),{constructor:Ms,isLight:!0,copy:function(t){return Ki.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Ki.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Cs.prototype=Object.assign(Object.create(Ms.prototype),{constructor:Cs,isHemisphereLight:!0,copy:function(t){return Ms.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(ks.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Os.prototype=Object.assign(Object.create(ks.prototype),{constructor:Os,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*De.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix())}}),Ls.prototype=Object.assign(Object.create(Ms.prototype),{constructor:Ls,isSpotLight:!0,copy:function(t){return Ms.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Rs.prototype=Object.assign(Object.create(Ms.prototype),{constructor:Rs,isPointLight:!0,copy:function(t){return Ms.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Ps.prototype=Object.assign(Object.create(ks.prototype),{constructor:Ps}),Is.prototype=Object.assign(Object.create(Ms.prototype),{constructor:Is,isDirectionalLight:!0,copy:function(t){return Ms.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ds.prototype=Object.assign(Object.create(Ms.prototype),{constructor:Ds,isAmbientLight:!0}),js.prototype=Object.assign(Object.create(Ms.prototype),{constructor:js,isRectAreaLight:!0,copy:function(t){return Ms.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Ms.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});var Ns,Us={arraySlice:function(t,e,n){return Us.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(n){for(var t=n.length,e=new Array(t),i=0;i!==t;++i)e[i]=i;return e.sort(function(t,e){return n[t]-n[e]}),e},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*e,l=0;l!==e;++l)r[o++]=t[s+l];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))for(;void 0!==(o=a[i])&&(e.push(a.time),n.push.apply(n,o)),void 0!==(a=t[r++]););else if(void 0!==o.toArray)for(;void 0!==(o=a[i])&&(e.push(a.time),o.toArray(n,n.length)),void 0!==(a=t[r++]););else for(;void 0!==(o=a[i])&&(e.push(a.time),n.push(o)),void 0!==(a=t[r++]););}}};function Bs(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Fs(t,e,n,i){Bs.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Vs(t,e,n,i){Bs.call(this,t,e,n,i)}function Hs(t,e,n,i){Bs.call(this,t,e,n,i)}function zs(t,e,n,i){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=Us.convertArray(e,this.TimeBufferType),this.values=Us.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function Gs(t,e,n,i){zs.call(this,t,e,n,i)}function Ws(t,e,n,i){Bs.call(this,t,e,n,i)}function qs(t,e,n,i){zs.call(this,t,e,n,i)}function Xs(t,e,n,i){zs.call(this,t,e,n,i)}function Ys(t,e,n,i){zs.call(this,t,e,n,i)}function $s(t,e,n){zs.call(this,t,e,n)}function Zs(t,e,n,i){zs.call(this,t,e,n,i)}function Ks(t,e,n,i){zs.apply(this,arguments)}function Js(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=De.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Qs(t){this.manager=void 0!==t?t:bs,this.textures={}}function tl(t){this.manager=void 0!==t?t:bs}Object.assign(Bs.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var a;n:{i:if(!(t<i)){for(var o=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,t<(i=e[++n]))break e}a=e.length;break n}if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===o)break;if(i=r,t>=(r=e[--n-1]))break e}a=n,n=0}for(;n<a;){var l=n+a>>>1;t<e[l]?a=l:n=l+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,a=0;a!==i;++a)e[a]=n[r+a];return e},interpolate_:function(t,e,n,i){throw new Error("call to abstract method")},intervalChanged_:function(t,e,n){}}),Object.assign(Bs.prototype,{beforeStart_:Bs.prototype.copySampleValue_,afterEnd_:Bs.prototype.copySampleValue_}),Fs.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Fs,DefaultSettings_:{endingStart:S,endingEnd:S},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case A:r=t,o=2*e-n;break;case M:o=e+i[r=i.length-2]-i[r+1];break;default:r=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case A:a=t,s=2*n-e;break;case M:s=n+i[a=1]-i[0];break;default:a=t-1,s=e}var l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(s-n),this._offsetPrev=r*u,this._offsetNext=a*u},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f,b=0;b!==o;++b)r[b]=v*a[u+b]+g*a[l+b]+y*a[s+b]+_*a[c+b];return r}}),Vs.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Vs,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,u=(n-e)/(i-e),c=1-u,h=0;h!==o;++h)r[h]=a[l+h]*c+a[s+h]*u;return r}}),Hs.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Hs,interpolate_:function(t,e,n,i){return this.copySampleValue_(t-1)}}),Ns={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:x,InterpolantFactoryMethodDiscrete:function(t){return new Hs(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Vs(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Fs(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case T:e=this.InterpolantFactoryMethodDiscrete;break;case x:e=this.InterpolantFactoryMethodLinear;break;case E:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)this.createInterpolant=e;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrackPrototype:",n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return T;case this.InterpolantFactoryMethodLinear:return x;case this.InterpolantFactoryMethodSmooth:return E}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Us.arraySlice(n,r,a),this.values=Us.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrackPrototype: Track is empty.",this),t=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,o,s),t=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,o,s,a),t=!1;break}a=s}if(void 0!==i&&Us.isTypedArray(i)){o=0;for(var l=i.length;o!==l;++o){var u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,o,u),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=this.getInterpolation()===E,r=1,a=t.length-1,o=1;o<a;++o){var s=!1,l=t[o];if(l!==t[o+1]&&(1!==o||l!==l[0]))if(i)s=!0;else for(var u=o*n,c=u-n,h=u+n,d=0;d!==n;++d){var p=e[u+d];if(p!==e[c+d]||p!==e[h+d]){s=!0;break}}if(s){if(o!==r){t[r]=t[o];var f=o*n,m=r*n;for(d=0;d!==n;++d)e[m+d]=e[f+d]}++r}}if(a>0){t[r]=t[a];for(f=a*n,m=r*n,d=0;d!==n;++d)e[m+d]=e[f+d];++r}return r!==t.length&&(this.times=Us.arraySlice(t,0,r),this.values=Us.arraySlice(e,0,r*n)),this}},Gs.prototype=Object.assign(Object.create(Ns),{constructor:Gs,ValueTypeName:"vector"}),Ws.prototype=Object.assign(Object.create(Bs.prototype),{constructor:Ws,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=(n-e)/(i-e),u=s+o;s!==u;s+=4)Qe.slerpFlat(r,0,a,s-o,a,s,l);return r}}),qs.prototype=Object.assign(Object.create(Ns),{constructor:qs,ValueTypeName:"quaternion",DefaultInterpolation:x,InterpolantFactoryMethodLinear:function(t){return new Ws(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Xs.prototype=Object.assign(Object.create(Ns),{constructor:Xs,ValueTypeName:"number"}),Ys.prototype=Object.assign(Object.create(Ns),{constructor:Ys,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:T,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),$s.prototype=Object.assign(Object.create(Ns),{constructor:$s,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:T,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Zs.prototype=Object.assign(Object.create(Ns),{constructor:Zs,ValueTypeName:"color"}),(Ks.prototype=Ns).constructor=Ks,Object.assign(Ks,{parse:function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=Ks._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],i=[];Us.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:Us.convertArray(t.times,Array),values:Us.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xs;case"vector":case"vector2":case"vector3":case"vector4":return Gs;case"color":return Zs;case"quaternion":return qs;case"bool":case"boolean":return $s;case"string":return Ys}throw new Error("Unsupported typeName: "+t)}}),Object.assign(Js,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(Ks.parse(n[r]).scale(i));return new Js(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e},r=0,a=n.length;r!==a;++r)e.push(Ks.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var u=Us.getKeyframeOrder(s);s=Us.sortedArray(s,1,u),l=Us.sortedArray(l,1,u),i||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new Xs(".morphTargetInfluences["+e[o].name+"]",s,l).scale(1/n))}return new Js(t,-1,a)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],l=s.name.match(r);if(l&&l.length>1){var u=i[h=l[1]];u||(i[h]=u=[]),u.push(s)}}var c=[];for(var h in i)c.push(Js.CreateFromMorphTargetSequence(h,i[h],e,n));return c},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var a=[],o=[];Us.flattenJSON(n,a,o,i),0!==a.length&&r.push(new t(e,a,o))}},i=[],r=t.name||"default",a=t.length||-1,o=t.fps||30,s=t.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var d=0;d<u[h].morphTargets.length;d++)c[u[h].morphTargets[d]]=-1;for(var p in c){var f=[],m=[];for(d=0;d!==u[h].morphTargets.length;++d){var v=u[h];f.push(v.time),m.push(v.morphTarget===p?1:0)}i.push(new Xs(".morphTargetInfluence["+p+"]",f,m))}a=c.length*(o||1)}else{var g=".bones["+e[l].name+"]";n(Gs,g+".position",u,"pos",i),n(qs,g+".quaternion",u,"rot",i),n(Gs,g+".scale",u,"scl",i)}}return 0===i.length?null:new Js(r,a,i)}}),Object.assign(Js.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(Qs.prototype,{load:function(t,e,n,i){var r=this;new ws(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},setTextures:function(t){this.textures=t},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var i=new gs[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(i.uniforms=t.uniforms),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.shading&&(i.shading=t.shading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalScale){var r=t.normalScale;!1===Array.isArray(r)&&(r=[r,r]),i.normalScale=(new bt).fromArray(r)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),i}}),Object.assign(tl.prototype,{load:function(t,e,n,i){var r=this;new ws(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=new ea,n=t.data.index;if(void 0!==n){var i=new ol[n.type](n.array);e.setIndex(new zr(i,1))}var r=t.data.attributes;for(var a in r){var o=r[a];i=new ol[o.type](o.array);e.addAttribute(a,new zr(i,o.itemSize,o.normalized))}var s=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==s)for(var l=0,u=s.length;l!==u;++l){var c=s[l];e.addGroup(c.start,c.count,c.materialIndex)}var h=t.data.boundingSphere;if(void 0!==h){var d=new tn;void 0!==h.center&&d.fromArray(h.center),e.boundingSphere=new Si(d,h.radius)}return e}});var el,nl,il,rl,al,ol={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function sl(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function ll(t){"boolean"===typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:bs,this.withCredentials=!1}function ul(t){this.manager=void 0!==t?t:bs,this.texturePath=""}sl.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n],a=e[n+1];if(r.test(t))return a}return null}},Object.assign(sl.prototype,{crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,n){for(var i=[],r=0;r<t.length;++r)i[r]=this.createMaterial(t[r],e,n);return i},createMaterial:(el={NoBlending:W,NormalBlending:q,AdditiveBlending:X,SubtractiveBlending:Y,MultiplyBlending:K,CustomBlending:J},nl=new Wn,il=new As,rl=new Qs,function(t,u,c){var h={};function e(t,e,n,i,r){var a,o=u+t,s=sl.Handlers.get(o);a=null!==s?s.load(o):(il.setCrossOrigin(c),il.load(o)),void 0!==e&&(a.repeat.fromArray(e),1!==e[0]&&(a.wrapS=$t),1!==e[1]&&(a.wrapT=$t)),void 0!==n&&a.offset.fromArray(n),void 0!==i&&("repeat"===i[0]&&(a.wrapS=$t),"mirror"===i[0]&&(a.wrapS=Kt),"repeat"===i[1]&&(a.wrapT=$t),"mirror"===i[1]&&(a.wrapT=Kt)),void 0!==r&&(a.anisotropy=r);var l=De.generateUUID();return h[l]=a,l}var n={uuid:De.generateUUID(),type:"MeshLambertMaterial"};for(var i in t){var r=t[i];switch(i){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":n.name=r;break;case"blending":n.blending=el[r];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",i,"is no longer supported.");break;case"colorDiffuse":n.color=nl.fromArray(r).getHex();break;case"colorSpecular":n.specular=nl.fromArray(r).getHex();break;case"colorEmissive":n.emissive=nl.fromArray(r).getHex();break;case"specularCoef":n.shininess=r;break;case"shading":"basic"===r.toLowerCase()&&(n.type="MeshBasicMaterial"),"phong"===r.toLowerCase()&&(n.type="MeshPhongMaterial"),"standard"===r.toLowerCase()&&(n.type="MeshStandardMaterial");break;case"mapDiffuse":n.map=e(r,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":n.emissiveMap=e(r,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":n.lightMap=e(r,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":n.aoMap=e(r,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":n.bumpMap=e(r,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":n.bumpScale=r;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":n.normalMap=e(r,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":n.normalScale=[r,r];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":n.specularMap=e(r,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":n.metalnessMap=e(r,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":n.roughnessMap=e(r,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":n.alphaMap=e(r,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":n.side=$;break;case"doubleSided":n.side=Z;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),n.opacity=r;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":n[i]=r;break;case"vertexColors":!0===r&&(n.vertexColors=g),"face"===r&&(n.vertexColors=m);break;default:console.error("THREE.Loader.createMaterial: Unsupported",i,r)}}return"MeshBasicMaterial"===n.type&&delete n.emissive,"MeshPhongMaterial"!==n.type&&delete n.specular,n.opacity<1&&(n.transparent=!0),rl.setTextures(h),rl.parse(n)})}),Object.assign(ll.prototype,{load:function(a,o,t,e){var s=this,l=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:sl.prototype.extractUrlBase(a),n=new ws(this.manager);n.setWithCredentials(this.withCredentials),n.load(a,function(t){var e=JSON.parse(t),n=e.metadata;if(void 0!==n){var i=n.type;if(void 0!==i){if("object"===i.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");if("scene"===i.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.")}}var r=s.parse(e,l);o(r.geometry,r.materials)},t,e)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){void 0!==t.data&&(t=t.data),void 0!==t.scale?t.scale=1/t.scale:t.scale=1;var n=new Hr;return function(t,e){function n(t,e){return t&1<<e}var i,r,a,o,s,l,u,c,h,d,p,f,m,v,g,y,_,b,w,T,x,E,S,A,M,C=t.faces,k=t.vertices,O=t.normals,L=t.colors,R=t.scale,P=0;if(void 0!==t.uvs){for(i=0;i<t.uvs.length;i++)t.uvs[i].length&&P++;for(i=0;i<P;i++)e.faceVertexUvs[i]=[]}for(o=0,s=k.length;o<s;)(b=new tn).x=k[o++]*R,b.y=k[o++]*R,b.z=k[o++]*R,e.vertices.push(b);for(o=0,s=C.length;o<s;)if(p=n(d=C[o++],0),f=n(d,1),m=n(d,3),v=n(d,4),g=n(d,5),y=n(d,6),_=n(d,7),p){if((T=new er).a=C[o],T.b=C[o+1],T.c=C[o+3],(x=new er).a=C[o+1],x.b=C[o+2],x.c=C[o+3],o+=4,f&&(h=C[o++],T.materialIndex=h,x.materialIndex=h),a=e.faces.length,m)for(i=0;i<P;i++)for(A=t.uvs[i],e.faceVertexUvs[i][a]=[],e.faceVertexUvs[i][a+1]=[],r=0;r<4;r++)M=new bt(A[2*(c=C[o++])],A[2*c+1]),2!==r&&e.faceVertexUvs[i][a].push(M),0!==r&&e.faceVertexUvs[i][a+1].push(M);if(v&&(u=3*C[o++],T.normal.set(O[u++],O[u++],O[u]),x.normal.copy(T.normal)),g)for(i=0;i<4;i++)u=3*C[o++],S=new tn(O[u++],O[u++],O[u]),2!==i&&T.vertexNormals.push(S),0!==i&&x.vertexNormals.push(S);if(y&&(E=L[l=C[o++]],T.color.setHex(E),x.color.setHex(E)),_)for(i=0;i<4;i++)E=L[l=C[o++]],2!==i&&T.vertexColors.push(new Wn(E)),0!==i&&x.vertexColors.push(new Wn(E));e.faces.push(T),e.faces.push(x)}else{if((w=new er).a=C[o++],w.b=C[o++],w.c=C[o++],f&&(h=C[o++],w.materialIndex=h),a=e.faces.length,m)for(i=0;i<P;i++)for(A=t.uvs[i],e.faceVertexUvs[i][a]=[],r=0;r<3;r++)M=new bt(A[2*(c=C[o++])],A[2*c+1]),e.faceVertexUvs[i][a].push(M);if(v&&(u=3*C[o++],w.normal.set(O[u++],O[u++],O[u])),g)for(i=0;i<3;i++)u=3*C[o++],S=new tn(O[u++],O[u++],O[u]),w.vertexNormals.push(S);if(y&&(l=C[o++],w.color.setHex(L[l])),_)for(i=0;i<3;i++)l=C[o++],w.vertexColors.push(new Wn(L[l]));e.faces.push(w)}}(t,n),function(t,e){var n=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,r=t.skinWeights.length;i<r;i+=n){var a=t.skinWeights[i],o=n>1?t.skinWeights[i+1]:0,s=n>2?t.skinWeights[i+2]:0,l=n>3?t.skinWeights[i+3]:0;e.skinWeights.push(new Ze(a,o,s,l))}if(t.skinIndices)for(i=0,r=t.skinIndices.length;i<r;i+=n){var u=t.skinIndices[i],c=n>1?t.skinIndices[i+1]:0,h=n>2?t.skinIndices[i+2]:0,d=n>3?t.skinIndices[i+3]:0;e.skinIndices.push(new Ze(u,c,h,d))}e.bones=t.bones,e.bones&&e.bones.length>0&&(e.skinWeights.length!==e.skinIndices.length||e.skinIndices.length!==e.vertices.length)&&console.warn("When skinning, number of vertices ("+e.vertices.length+"), skinIndices ("+e.skinIndices.length+"), and skinWeights ("+e.skinWeights.length+") should match.")}(t,n),function(t,e){var n=t.scale;if(void 0!==t.morphTargets)for(var i=0,r=t.morphTargets.length;i<r;i++){e.morphTargets[i]={},e.morphTargets[i].name=t.morphTargets[i].name,e.morphTargets[i].vertices=[];for(var a=e.morphTargets[i].vertices,o=t.morphTargets[i].vertices,s=0,l=o.length;s<l;s+=3){var u=new tn;u.x=o[s]*n,u.y=o[s+1]*n,u.z=o[s+2]*n,a.push(u)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=e.faces,h=t.morphColors[0].colors;for(i=0,r=c.length;i<r;i++)c[i].color.fromArray(h,3*i)}}(t,n),function(t,e){var n=[],i=[];void 0!==t.animation&&i.push(t.animation),void 0!==t.animations&&(t.animations.length?i=i.concat(t.animations):i.push(t.animations));for(var r=0;r<i.length;r++){var a=Js.parseAnimation(i[r],e.bones);a&&n.push(a)}if(e.morphTargets){var o=Js.CreateClipsFromMorphTargetSequences(e.morphTargets,10);n=n.concat(o)}n.length>0&&(e.animations=n)}(t,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:n}:{geometry:n,materials:sl.prototype.initMaterials(t.materials,e,this.crossOrigin)}}}),Object.assign(ul.prototype,{load:function(i,r,t,a){""===this.texturePath&&(this.texturePath=i.substring(0,i.lastIndexOf("/")+1));var o=this;new ws(o.manager).load(i,function(t){var e=null;try{e=JSON.parse(t)}catch(t){return void 0!==a&&a(t),void console.error("THREE:ObjectLoader: Can't parse "+i+".",t.message)}var n=e.metadata;void 0!==n&&void 0!==n.type&&"geometry"!==n.type.toLowerCase()?o.parse(e,r):console.error("THREE.ObjectLoader: Can't load "+i+". Use THREE.JSONLoader instead.")},t,a)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseGeometries(t.geometries),i=this.parseImages(t.images,function(){void 0!==e&&e(o)}),r=this.parseTextures(t.textures,i),a=this.parseMaterials(t.materials,r),o=this.parseObject(t.object,n,a);return t.animations&&(o.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(o),o},parseGeometries:function(t){var e={};if(void 0!==t)for(var n=new ll,i=new tl,r=0,a=t.length;r<a;r++){var o,s=t[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new ss[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new ss[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new ss[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new ss[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new ss[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new ss[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":o=new ss[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new ss[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new ss[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new ss[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new ss[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":o=i.parse(s);break;case"Geometry":o=n.parse(s,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),e[s.uuid]=o}return e},parseMaterials:function(t,e){var n={};if(void 0!==t){var i=new Qs;i.setTextures(e);for(var r=0,a=t.length;r<a;r++){var o=t[r];if("MultiMaterial"===o.type){for(var s=[],l=0;l<o.materials.length;l++)s.push(i.parse(o.materials[l]));n[o.uuid]=s}else n[o.uuid]=i.parse(o)}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=Js.parse(t[n]);e.push(i)}return e},parseImages:function(t,e){var n=this,i={};function r(t){return n.manager.itemStart(t),a.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemEnd(t),n.manager.itemError(t)})}if(void 0!==t&&t.length>0){var a=new Es(new _s(e));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=t.length;o<s;o++){var l=t[o],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;i[l.uuid]=r(u)}}return i},parseTextures:function(t,e){function n(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,a=t.length;r<a;r++){var o=t[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=new $e(e[o.image]);s.needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,cl)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],hl),s.wrapT=n(o.wrap[1],hl)),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,dl)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,dl)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),i[o.uuid]=s}return i},parseObject:(al=new en,function(t,e,a){var n;function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];void 0===a[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(a[r])}return e}return void 0===a[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),a[t]}}switch(t.type){case"Scene":n=new no,void 0!==t.background&&Number.isInteger(t.background)&&(n.background=new Wn(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?n.fog=new eo(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(n.fog=new to(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":n=new tr(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(n.focus=t.focus),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.filmGauge&&(n.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(n.filmOffset=t.filmOffset),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"OrthographicCamera":n=new Qi(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":n=new Ds(t.color,t.intensity);break;case"DirectionalLight":n=new Is(t.color,t.intensity);break;case"PointLight":n=new Rs(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":n=new js(t.color,t.intensity,t.width,t.height);break;case"SpotLight":n=new Ls(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new Cs(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(t.geometry),s=r(t.material);n=o.bones&&o.bones.length>0?new uo(o,s):new ca(o,s);break;case"LOD":n=new oo;break;case"Line":n=new ho(i(t.geometry),r(t.material),t.mode);break;case"LineLoop":n=new fo(i(t.geometry),r(t.material));break;case"LineSegments":n=new po(i(t.geometry),r(t.material));break;case"PointCloud":case"Points":n=new vo(i(t.geometry),r(t.material));break;case"Sprite":n=new ao(r(t.material));break;case"Group":n=new go;break;default:n=new Ki}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(al.fromArray(t.matrix),al.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.quaternion&&n.quaternion.fromArray(t.quaternion),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.castShadow&&(n.castShadow=t.castShadow),void 0!==t.receiveShadow&&(n.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(n.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(n.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&n.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(n.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.children)for(var l in t.children)n.add(this.parseObject(t.children[l],e,a));if("LOD"===t.type)for(var u=t.levels,c=0;c<u.length;c++){var h=u[c];void 0!==(l=n.getObjectByProperty("uuid",h.object))&&n.addLevel(l,h.distance)}return n})});var cl={UVMapping:v,CubeReflectionMapping:dt,CubeRefractionMapping:pt,EquirectangularReflectionMapping:ft,EquirectangularRefractionMapping:mt,SphericalReflectionMapping:vt,CubeUVReflectionMapping:gt,CubeUVRefractionMapping:yt},hl={RepeatWrapping:$t,ClampToEdgeWrapping:Zt,MirroredRepeatWrapping:Kt},dl={NearestFilter:Jt,NearestMipMapNearestFilter:Qt,NearestMipMapLinearFilter:te,LinearFilter:ee,LinearMipMapNearestFilter:ne,LinearMipMapLinearFilter:ie};function pl(t,e,n,i,r){var a=.5*(i-e),o=.5*(r-n),s=t*t;return(2*n-2*i+a+o)*(t*s)+(-3*n+3*i-2*a-o)*s+a*t+n}function fl(t,e,n,i){return(o=1-t)*o*e+2*(1-(a=t))*a*n+(r=t)*r*i;var r,a,o}function ml(t,e,n,i,r){return(u=1-t)*u*u*e+3*(l=1-(s=t))*l*s*n+3*(1-(o=t))*o*o*i+(a=t)*a*a*r;var a,o,s,l,u}function vl(){this.arcLengthDivisions=200}function gl(t,e){vl.call(this),this.v1=t,this.v2=e}function yl(){vl.call(this),this.curves=[],this.autoClose=!1}function _l(t,e,n,i,r,a,o,s){vl.call(this),this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0}function bl(t){vl.call(this),this.points=void 0===t?[]:t}function wl(t,e,n,i){vl.call(this),this.v0=t,this.v1=e,this.v2=n,this.v3=i}function Tl(t,e,n){vl.call(this),this.v0=t,this.v1=e,this.v2=n}Object.assign(vl.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=t;n++)a+=(e=this.getPoint(n/t)).distanceTo(r),i.push(a),r=e;return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,a=i.length;n=e||t*i[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=i[r=Math.floor(s+(l-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(a-1);var u=i[r];return(r+(n-u)/(i[r+1]-u))/(a-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var i=this.getPoint(e);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,i,r,a=new tn,o=[],s=[],l=[],u=new tn,c=new en;for(n=0;n<=t;n++)i=n/t,o[n]=this.getTangentAt(i),o[n].normalize();s[0]=new tn,l[0]=new tn;var h=Number.MAX_VALUE,d=Math.abs(o[0].x),p=Math.abs(o[0].y),f=Math.abs(o[0].z);for(d<=h&&(h=d,a.set(1,0,0)),p<=h&&(h=p,a.set(0,1,0)),f<=h&&a.set(0,0,1),u.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],u),l[0].crossVectors(o[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),u.crossVectors(o[n-1],o[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(De.clamp(o[n-1].dot(o[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(u,r))),l[n].crossVectors(o[n],s[n]);if(!0===e)for(r=Math.acos(De.clamp(s[0].dot(s[t]),-1,1)),r/=t,o[0].dot(u.crossVectors(s[0],s[t]))>0&&(r=-r),n=1;n<=t;n++)s[n].applyMatrix4(c.makeRotationAxis(o[n],r*n)),l[n].crossVectors(o[n],s[n]);return{tangents:o,normals:s,binormals:l}}}),((gl.prototype=Object.create(vl.prototype)).constructor=gl).prototype.isLineCurve=!0,gl.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},gl.prototype.getPointAt=function(t){return this.getPoint(t)},gl.prototype.getTangent=function(t){return this.v2.clone().sub(this.v1).normalize()},yl.prototype=Object.assign(Object.create(vl.prototype),{constructor:yl,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new gl(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*t:a&&a.isLineCurve?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new Hr,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new tn(r.x,r.y,r.z||0))}return e}}),((_l.prototype=Object.create(vl.prototype)).constructor=_l).prototype.isEllipseCurve=!0,_l.prototype.getPoint=function(t){for(var e=2*Math.PI,n=this.aEndAngle-this.aStartAngle,i=Math.abs(n)<Number.EPSILON;n<0;)n+=e;for(;n>e;)n-=e;n<Number.EPSILON&&(n=i?0:e),!0!==this.aClockwise||i||(n===e?n=-e:n-=e);var r=this.aStartAngle+t*n,a=this.aX+this.xRadius*Math.cos(r),o=this.aY+this.yRadius*Math.sin(r);if(0!==this.aRotation){var s=Math.cos(this.aRotation),l=Math.sin(this.aRotation),u=a-this.aX,c=o-this.aY;a=u*s-c*l+this.aX,o=u*l+c*s+this.aY}return new bt(a,o)},((bl.prototype=Object.create(vl.prototype)).constructor=bl).prototype.isSplineCurve=!0,bl.prototype.getPoint=function(t){var e=this.points,n=(e.length-1)*t,i=Math.floor(n),r=n-i,a=e[0===i?i:i-1],o=e[i],s=e[i>e.length-2?e.length-1:i+1],l=e[i>e.length-3?e.length-1:i+2];return new bt(pl(r,a.x,o.x,s.x,l.x),pl(r,a.y,o.y,s.y,l.y))},((wl.prototype=Object.create(vl.prototype)).constructor=wl).prototype.getPoint=function(t){var e=this.v0,n=this.v1,i=this.v2,r=this.v3;return new bt(ml(t,e.x,n.x,i.x,r.x),ml(t,e.y,n.y,i.y,r.y))},((Tl.prototype=Object.create(vl.prototype)).constructor=Tl).prototype.getPoint=function(t){var e=this.v0,n=this.v1,i=this.v2;return new bt(fl(t,e.x,n.x,i.x),fl(t,e.y,n.y,i.y))};var xl,El=Object.assign(Object.create(yl.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new gl(this.currentPoint.clone(),new bt(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,i){var r=new Tl(this.currentPoint.clone(),new bt(t,e),new bt(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(t,e,n,i,r,a){var o=new wl(this.currentPoint.clone(),new bt(t,e),new bt(n,i),new bt(r,a));this.curves.push(o),this.currentPoint.set(r,a)},splineThru:function(t){var e=new bl([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+o,e+s,n,i,r,a)},absarc:function(t,e,n,i,r,a){this.absellipse(t,e,n,n,i,r,a)},ellipse:function(t,e,n,i,r,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(t+l,e+u,n,i,r,a,o,s)},absellipse:function(t,e,n,i,r,a,o,s){var l=new _l(t,e,n,i,r,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)}});function Sl(t){yl.call(this),this.currentPoint=new bt,t&&this.fromPoints(t)}function Al(){Sl.apply(this,arguments),this.holes=[]}function Ml(){this.subPaths=[],this.currentPath=null}function Cl(t){this.data=t}function kl(t){this.manager=void 0!==t?t:bs}(Sl.prototype=El).constructor=Sl,Al.prototype=Object.assign(Object.create(El),{constructor:Al,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),Object.assign(Ml.prototype,{moveTo:function(t,e){this.currentPath=new Sl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,a){this.currentPath.bezierCurveTo(t,e,n,i,r,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new Al;a.curves=r.curves,e.push(a)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=e[r],s=e[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(o=e[a],l=-l,s=e[r],u=-u),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var c=u*(t.x-o.x)-l*(t.y-o.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return i}var r=Vo.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return n(a);var o,s,l,u=[];if(1===a.length)return s=a[0],(l=new Al).curves=s.curves,u.push(l),u;var c=!r(a[0].getPoints());c=t?!c:c;var h,d,p=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)o=r(h=(s=a[g]).getPoints()),(o=t?!o:o)?(!c&&f[v]&&v++,f[v]={s:new Al,p:h},f[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return n(a);if(f.length>1){for(var _=!1,b=[],w=0,T=f.length;w<T;w++)p[w]=[];for(w=0,T=f.length;w<T;w++)for(var x=m[w],E=0;E<x.length;E++){for(var S=x[E],A=!0,M=0;M<f.length;M++)i(S.p,f[M].p)&&(w!==M&&b.push({froms:w,tos:M,hole:E}),A?(A=!1,p[M].push(S)):_=!0);A&&p[w].push(S)}b.length>0&&(_||(m=p))}g=0;for(var C=f.length;g<C;g++){l=f[g].s,u.push(l);for(var k=0,O=(d=m[g]).length;k<O;k++)l.holes.push(d[k].h)}return u}}),Object.assign(Cl.prototype,{isFont:!0,generateShapes:function(t,c,x){function h(t,e,n,i){var r=E.glyphs[t]||E.glyphs["?"];if(r){var a,o,s,l,u,c,h,d,p,f,m,v=new Ml,g=[];if(r.o)for(var y=r._cachedOutline||(r._cachedOutline=r.o.split(" ")),_=0,b=y.length;_<b;){switch(y[_++]){case"m":a=y[_++]*e+n,o=y[_++]*e+i,v.moveTo(a,o);break;case"l":a=y[_++]*e+n,o=y[_++]*e+i,v.lineTo(a,o);break;case"q":if(s=y[_++]*e+n,l=y[_++]*e+i,h=y[_++]*e+n,d=y[_++]*e+i,v.quadraticCurveTo(h,d,s,l),m=g[g.length-1]){u=m.x,c=m.y;for(var w=1;w<=x;w++){fl(T=w/x,u,h,s),fl(T,c,d,l)}}break;case"b":if(s=y[_++]*e+n,l=y[_++]*e+i,h=y[_++]*e+n,d=y[_++]*e+i,p=y[_++]*e+n,f=y[_++]*e+i,v.bezierCurveTo(h,d,p,f,s,l),m=g[g.length-1]){u=m.x,c=m.y;for(w=1;w<=x;w++){var T;ml(T=w/x,u,h,p,s),ml(T,c,d,f,l)}}}}return{offsetX:r.ha*e,path:v}}}void 0===c&&(c=100),void 0===x&&(x=4);for(var E=this.data,e=function(t){for(var e=String(t).split(""),n=c/E.resolution,i=(E.boundingBox.yMax-E.boundingBox.yMin+E.underlineThickness)*n,r=0,a=0,o=[],s=0;s<e.length;s++){var l=e[s];if("\n"===l)r=0,a-=i;else{var u=h(l,n,r,a);r+=u.offsetX,o.push(u.path)}}return o}(t),n=[],i=0,r=e.length;i<r;i++)Array.prototype.push.apply(n,e[i].toShapes());return n}}),Object.assign(kl.prototype,{load:function(t,i,e,n){var r=this;new ws(this.manager).load(t,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var t=r.parse(n);i&&i(t)},e,n)},parse:function(t){return new Cl(t)}});var Ol,Ll,Rl,Pl,Il,Dl,jl,Nl,Ul,Bl,Fl,Vl,Hl,zl,Gl,Wl,ql,Xl,Yl,$l,Zl,Kl,Jl,Ql,tu,eu,nu,iu,ru,au,ou,su,lu,uu,cu,hu,du,pu,fu,mu={getContext:function(){return void 0===xl&&(xl=new(window.AudioContext||window.webkitAudioContext)),xl},setContext:function(t){xl=t}};function vu(t){this.manager=void 0!==t?t:bs}function gu(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new tr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new tr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function yu(t,e,n){Ki.call(this),this.type="CubeCamera";var r=new tr(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new tn(1,0,0)),this.add(r);var a=new tr(90,1,t,e);a.up.set(0,-1,0),a.lookAt(new tn(-1,0,0)),this.add(a);var o=new tr(90,1,t,e);o.up.set(0,0,1),o.lookAt(new tn(0,1,0)),this.add(o);var s=new tr(90,1,t,e);s.up.set(0,0,-1),s.lookAt(new tn(0,-1,0)),this.add(s);var l=new tr(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new tn(0,0,1)),this.add(l);var u=new tr(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new tn(0,0,-1)),this.add(u);var i={format:ge,magFilter:ee,minFilter:ee};this.renderTarget=new Je(n,n,i),this.renderTarget.texture.name="CubeCamera",this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,r,n),n.activeCubeFace=1,t.render(e,a,n),n.activeCubeFace=2,t.render(e,o,n),n.activeCubeFace=3,t.render(e,s,n),n.activeCubeFace=4,t.render(e,l,n),n.texture.generateMipmaps=i,n.activeCubeFace=5,t.render(e,u,n),t.setRenderTarget(null)}}function _u(){Ki.call(this),this.type="AudioListener",this.context=mu.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function bu(t){Ki.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function wu(t){bu.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Tu(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function xu(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Eu(t,e,n){var i=n||Su.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function Su(t,e,n){this.path=e,this.parsedPath=n||Su.parseTrackName(e),this.node=Su.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Au(t){this.uuid=De.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Mu(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,a=new Array(r),o={endingStart:S,endingEnd:S},s=0;s!==r;++s){var l=i[s].createInterpolant(null);(a[s]=l).settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=b,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Cu(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function ku(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Ou(){ea.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Lu(t,e,n,i){this.uuid=De.generateUUID(),this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function Ru(t,e){this.uuid=De.generateUUID(),this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Pu(t,e,n){Ru.call(this,t,e),this.meshPerAttribute=n||1}function Iu(t,e,n){zr.call(this,t,e),this.meshPerAttribute=n||1}function Du(t,e,n,i){this.ray=new sa(t,e),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ju(t,e){return t.distance-e.distance}function Nu(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i))for(var r=t.children,a=0,o=r.length;a<o;a++)Nu(r[a],e,n,!0)}function Uu(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Bu(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function Fu(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function Vu(t,e){ca.call(this,t,e),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,i=n-1,r=n/1;this.createAnimation("__default",0,i,r),this.setAnimationWeight("__default",1)}function Hu(t){Ki.call(this),this.material=t,this.render=function(t){}}function zu(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new ea,u=new Kr(2*o*3,3);l.addAttribute("position",u),po.call(this,l,new co({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Gu(t){Ki.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;for(var e=new ea,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,r=1;i<32;i++,r++){var a=i/32*Math.PI*2,o=r/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}e.addAttribute("position",new Kr(n,3));var s=new co({fog:!1});this.cone=new po(e,s),this.add(this.cone),this.update()}function Wu(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),n=new ea,i=[],r=[],a=new Wn(0,0,1),o=new Wn(0,1,0),s=0;s<e.length;s++){var l=e[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.addAttribute("position",new Kr(i,3)),n.addAttribute("color",new Kr(r,3));var u=new co({vertexColors:g,depthTest:!1,depthWrite:!1,transparent:!0});po.call(this,n,u),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.onBeforeRender()}function qu(t,e){this.light=t,this.light.updateMatrixWorld();var n=new Xo(e,4,2),i=new oa({wireframe:!0,fog:!1});i.color.copy(this.light.color),ca.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Xu(t){Ki.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;var e=new co({color:t.color}),n=new ea;n.addAttribute("position",new zr(new Float32Array(15),3)),this.add(new ho(n,e)),this.update()}function Yu(t,e){Ki.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;var n=new Oo(e);n.rotateY(.5*Math.PI);var i=new oa({vertexColors:g,wireframe:!0}),r=n.getAttribute("position"),a=new Float32Array(3*r.count);n.addAttribute("color",new zr(a,3)),this.add(new ca(n,i)),this.update()}function $u(t,e,n,i){t=t||10,e=e||10,n=new Wn(void 0!==n?n:4473924),i=new Wn(void 0!==i?i:8947848);for(var r=e/2,a=t/e,o=t/2,s=[],l=[],u=0,c=0,h=-o;u<=e;u++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var d=u===r?n:i;d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3}var p=new ea;p.addAttribute("position",new Kr(s,3)),p.addAttribute("color",new Kr(l,3));var f=new co({vertexColors:g});po.call(this,p,f)}function Zu(t,e,n,i,r,a){t=t||10,e=e||16,n=n||8,i=i||64,r=new Wn(void 0!==r?r:4473924),a=new Wn(void 0!==a?a:8947848);var o,s,l,u,c,h,d,p=[],f=[];for(u=0;u<=e;u++)l=u/e*(2*Math.PI),o=Math.sin(l)*t,s=Math.cos(l)*t,p.push(0,0,0),p.push(o,0,s),d=1&u?r:a,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);for(u=0;u<=n;u++)for(d=1&u?r:a,h=t-t/n*u,c=0;c<i;c++)l=c/i*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,p.push(o,0,s),f.push(d.r,d.g,d.b),l=(c+1)/i*(2*Math.PI),o=Math.sin(l)*h,s=Math.cos(l)*h,p.push(o,0,s),f.push(d.r,d.g,d.b);var m=new ea;m.addAttribute("position",new Kr(p,3)),m.addAttribute("color",new Kr(f,3));var v=new co({vertexColors:g});po.call(this,m,v)}function Ku(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new ea,u=new Kr(2*o*3,3);l.addAttribute("position",u),po.call(this,l,new co({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Ju(t,e){Ki.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,void 0===e&&(e=1);var n=new ea;n.addAttribute("position",new Kr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new co({fog:!1});this.add(new ho(n,i)),(n=new ea).addAttribute("position",new Kr([0,0,0,0,0,1],3)),this.add(new ho(n,i)),this.update()}function Qu(t){var e=new ea,n=new co({color:16777215,vertexColors:m}),i=[],r=[],a={},o=new Wn(16755200),s=new Wn(16711680),l=new Wn(43775),u=new Wn(16777215),c=new Wn(3355443);function h(t,e,n){d(t,n),d(e,n)}function d(t,e){i.push(0,0,0),r.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(i.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),e.addAttribute("position",new Kr(i,3)),e.addAttribute("color",new Kr(r,3)),po.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function tc(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new ea;r.setIndex(new zr(n,1)),r.addAttribute("position",new zr(i,3)),po.call(this,r,new co({color:e})),this.matrixAutoUpdate=!1,this.update()}function ec(t,e,n,i,r,a){Ki.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===hu&&((hu=new ea).addAttribute("position",new Kr([0,0,0,0,1,0],3)),(du=new ns(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new ho(hu,new co({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ca(du,new oa({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}function nc(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new ea;n.addAttribute("position",new Kr(e,3)),n.addAttribute("color",new Kr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new co({vertexColors:g});po.call(this,n,i)}function ic(){var r=0,a=0,o=0,s=0;function u(t,e,n,i){o=-3*(r=t)+3*e-2*(a=n)-i,s=2*t-2*e+n+i}return{initCatmullRom:function(t,e,n,i,r){u(e,n,r*(n-t),r*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,r,a,o){var s=(e-t)/r-(n-t)/(r+a)+(n-e)/a,l=(n-e)/a-(i-e)/(a+o)+(i-n)/o;u(e,n,s*=a,l*=a)},calc:function(t){var e=t*t;return r+a*t+o*e+s*(e*t)}}}Object.assign(vu.prototype,{load:function(t,e,n,i){var r=new ws(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){mu.getContext().decodeAudioData(t,function(t){e(t)})},n,i)}}),Object.assign(gu.prototype,{update:(Ul=new en,Bl=new en,function(t){if(Ol!==this||Ll!==t.focus||Rl!==t.fov||Pl!==t.aspect*this.aspect||Il!==t.near||Dl!==t.far||jl!==t.zoom||Nl!==this.eyeSep){Ol=this,Ll=t.focus,Rl=t.fov,Pl=t.aspect*this.aspect,Il=t.near,Dl=t.far,jl=t.zoom;var e,n,i=t.projectionMatrix.clone(),r=(Nl=this.eyeSep/2)*Il/Ll,a=Il*Math.tan(De.DEG2RAD*Rl*.5)/jl;Bl.elements[12]=-Nl,Ul.elements[12]=Nl,e=-a*Pl+r,n=a*Pl+r,i.elements[0]=2*Il/(n-e),i.elements[8]=(n+e)/(n-e),this.cameraL.projectionMatrix.copy(i),e=-a*Pl-r,n=a*Pl-r,i.elements[0]=2*Il/(n-e),i.elements[8]=(n+e)/(n-e),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Bl),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Ul)})}),(yu.prototype=Object.create(Ki.prototype)).constructor=yu,_u.prototype=Object.assign(Object.create(Ki.prototype),{constructor:_u,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:(Fl=new tn,Vl=new Qe,Hl=new tn,zl=new tn,function(t){Ki.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;this.matrixWorld.decompose(Fl,Vl,Hl),zl.set(0,0,-1).applyQuaternion(Vl),e.positionX?(e.positionX.setValueAtTime(Fl.x,this.context.currentTime),e.positionY.setValueAtTime(Fl.y,this.context.currentTime),e.positionZ.setValueAtTime(Fl.z,this.context.currentTime),e.forwardX.setValueAtTime(zl.x,this.context.currentTime),e.forwardY.setValueAtTime(zl.y,this.context.currentTime),e.forwardZ.setValueAtTime(zl.z,this.context.currentTime),e.upX.setValueAtTime(n.x,this.context.currentTime),e.upY.setValueAtTime(n.y,this.context.currentTime),e.upZ.setValueAtTime(n.z,this.context.currentTime)):(e.setPosition(Fl.x,Fl.y,Fl.z),e.setOrientation(zl.x,zl.y,zl.z,n.x,n.y,n.z))})}),bu.prototype=Object.assign(Object.create(Ki.prototype),{constructor:bu,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),t.start(0,this.startTime),this.isPlaying=!0,this.source=t,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),wu.prototype=Object.assign(Object.create(bu.prototype),{constructor:wu,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:(Gl=new tn,function(t){Ki.prototype.updateMatrixWorld.call(this,t),Gl.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(Gl.x,Gl.y,Gl.z)})}),Object.assign(Tu.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(xu.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=e}else{var s=e/(a+=e);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,r<1){var o=3*e;this._mixBufferRegion(n,i,o,1-r,e)}for(var s=e,l=e+e;s!==l;++s)if(n[s]!==n[s+e]){a.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=3*n;t.getValue(e,i);for(var r=n,a=i;r!==a;++r)e[r]=e[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)t[e+a]=t[n+a]},_slerp:function(t,e,n,i){Qe.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*i}}}),Object.assign(Eu.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Su,{Composite:Eu,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Su.Composite(t,e,n):new Su(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:(Wl=new RegExp("^"+/((?:[\w-]+[\/:])*)/.source+/([\w-\.]+)?/.source+/(?:\.([\w-]+)(?:\[(.+)\])?)?/.source+/\.([\w-]+)(?:\[(.+)\])?/.source+"$"),ql=["material","materials","bones"],function(t){var e=Wl.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==ql.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}),findNode:function(t,r){if(!r||""===r||"root"===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){var e=function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e];if(n.name===r)return n}return null}(t.skeleton);if(e)return e}if(t.children){var a=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.name===r||n.uuid===r)return n;var i=a(n.children);if(i)return i}return null},n=a(t.children);if(n)return n}return null}}),Object.assign(Su.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=Su.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var a=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}var s=t[i];if(void 0!==s){var l=this.Versioning.None;void 0!==t.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(t.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===r){r=o;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Su.prototype,{_getValue_unbound:Su.prototype.getValue,_setValue_unbound:Su.prototype.setValue}),Object.assign(Au.prototype,{isAnimationObjectGroup:!0,add:function(t){for(var e=this._objects,n=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,a=this._paths,o=this._parsedPaths,s=this._bindings,l=s.length,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=h.uuid,p=r[d],f=void 0;if(void 0===p){p=n++,r[d]=p,e.push(h);for(var m=0,v=l;m!==v;++m)s[m].push(new Su(h,a[m],o[m]))}else if(p<i){f=e[p];var g=--i,y=e[g];e[r[y.uuid]=p]=y,e[r[d]=g]=h;for(m=0,v=l;m!==v;++m){var _=s[m],b=_[g],w=_[p];_[p]=b,void 0===w&&(w=new Su(h,a[m],o[m])),_[g]=w}}else e[p]!==f&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(t){for(var e=this._objects,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=i[u];if(void 0!==c&&c>=n){var h=n++,d=e[h];e[i[d.uuid]=c]=d,e[i[u]=h]=l;for(var p=0,f=a;p!==f;++p){var m=r[p],v=m[h],g=m[c];m[c]=v,m[h]=g}}}this.nCachedObjects_=n},uncache:function(t){for(var e=this._objects,n=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,a=this._bindings,o=a.length,s=0,l=arguments.length;s!==l;++s){var u=arguments[s].uuid,c=r[u];if(void 0!==c)if(delete r[u],c<i){var h=--i,d=e[h],p=e[y=--n];e[r[d.uuid]=c]=d,e[r[p.uuid]=h]=p,e.pop();for(var f=0,m=o;f!==m;++f){var v=(_=a[f])[h],g=_[y];_[c]=v,_[h]=g,_.pop()}}else{var y;e[r[(p=e[y=--n]).uuid]=c]=p,e.pop();for(f=0,m=o;f!==m;++f){var _;(_=a[f])[c]=_[y],_.pop()}}}this.nCachedObjects_=i},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[t]=i,a.push(t),o.push(e),r.push(c);for(var h=u,d=s.length;h!==d;++h){var p=s[h];c[h]=new Su(p,t,e)}return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];a[e[t[o]]=n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(Mu.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,a=r/i,o=i/r;t.warp(1,a,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/o,l[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(t-r)*n;if(a<0||0===n)return;this._startTime=null,e=n*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(i===_){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var a=i===w;if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=n||e<0){var o=Math.floor(e/n);e-=n*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(0===s){var l=t<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1===(1&r))return n-(this.time=e)}return this.time=e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=A,i.endingEnd=A):(i.endingStart=t?this.zeroSlopeAtStart?A:S:M,i.endingEnd=e?this.zeroSlopeAtEnd?A:S:M)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=e,o[1]=r+t,s[1]=n,this}}),Object.assign(Cu.prototype,i.prototype,{_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==r;++c){var h=i[c],d=h.name,p=u[d];if(void 0!==p)a[c]=p;else{if(void 0!==(p=a[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=e&&e._propertyBindings[c].binding.parsedPath;++(p=new xu(Su.create(n,d,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),a[c]=p}o[c].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;e[n._cacheIndex=i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],u=t._byClipCacheIndex;s[l._byClipCacheIndex=u]=l,s.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];e[t._cacheIndex=i]=t,e[r._cacheIndex=n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];e[t._cacheIndex=i]=t,e[r._cacheIndex=n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],a=this._bindings;void 0===r&&(r={},i[e]=r),(r[n]=t)._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=e[e.length-1],l=t._cacheIndex;e[s._cacheIndex=l]=s,e.pop(),delete o[r];t:{for(var u in o)break t;delete a[i]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];e[t._cacheIndex=i]=t,e[r._cacheIndex=n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];e[t._cacheIndex=i]=t,e[r._cacheIndex=n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(t[(n=new Vs(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];e[t.__cacheIndex=i]=t,e[r.__cacheIndex=n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"===typeof t?Js.findByName(n,t):t,a=null!==r?r.uuid:t,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[i];if(void 0!==l)return l;s=o.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var u=new Mu(this,r,e);return this._bindAction(u,s),this._addInactiveAction(u,a,i),u},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"===typeof t?Js.findByName(n,t):t,a=r?r.uuid:t,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0;for(var r=this._nActiveBindings=0;r!==e;++r)t[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,o=0;o!==n;++o){e[o]._update(i,t,r,a)}var s=this._bindings,l=this._nActiveBindings;for(o=0;o!==l;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,e[c._cacheIndex=u]=c,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[e];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),ku.prototype.clone=function(){return new ku(void 0===this.value.clone?this.value:this.value.clone())},Ou.prototype=Object.assign(Object.create(ea.prototype),{constructor:Ou,isInstancedBufferGeometry:!0,addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:n})},copy:function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var i in n){var r=n[i];this.addAttribute(i,r.clone())}for(var a=t.groups,o=0,s=a.length;o<s;o++){var l=a[o];this.addGroup(l.start,l.count,l.materialIndex)}return this}}),Object.defineProperties(Lu.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Lu.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}}),Object.defineProperty(Ru.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ru.prototype,{isInterleavedBuffer:!0,setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Pu.prototype=Object.assign(Object.create(Ru.prototype),{constructor:Pu,isInstancedInterleavedBuffer:!0,copy:function(t){return Ru.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Iu.prototype=Object.assign(Object.create(zr.prototype),{constructor:Iu,isInstancedBufferAttribute:!0,copy:function(t){return zr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Du.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e){var n=[];return Nu(t,this,n,e),n.sort(ju),n},intersectObjects:function(t,e){var n=[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,r=t.length;i<r;i++)Nu(t[i],this,n,e);return n.sort(ju),n}}),Object.assign(Uu.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(Bu.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(De.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(Fu.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}}),((Vu.prototype=Object.create(ca.prototype)).constructor=Vu).prototype.createAnimation=function(t,e,n,i){var r={start:e,end:n,length:n-e+1,fps:i,duration:(n-e)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=r,this.animationsList.push(r)},Vu.prototype.autoCreateAnimations=function(t){for(var e,n=/([a-z]+)_?(\d+)/i,i={},r=this.geometry,a=0,o=r.morphTargets.length;a<o;a++){var s=r.morphTargets[a].name.match(n);if(s&&s.length>1)i[l=s[1]]||(i[l]={start:1/0,end:-1/0}),a<(u=i[l]).start&&(u.start=a),a>u.end&&(u.end=a),e||(e=l)}for(var l in i){var u=i[l];this.createAnimation(l,u.start,u.end,t)}this.firstAnimation=e},Vu.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},Vu.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},Vu.prototype.setAnimationFPS=function(t,e){var n=this.animationsMap[t];n&&(n.fps=e,n.duration=(n.end-n.start)/n.fps)},Vu.prototype.setAnimationDuration=function(t,e){var n=this.animationsMap[t];n&&(n.duration=e,n.fps=(n.end-n.start)/n.duration)},Vu.prototype.setAnimationWeight=function(t,e){var n=this.animationsMap[t];n&&(n.weight=e)},Vu.prototype.setAnimationTime=function(t,e){var n=this.animationsMap[t];n&&(n.time=e)},Vu.prototype.getAnimationTime=function(t){var e=0,n=this.animationsMap[t];return n&&(e=n.time),e},Vu.prototype.getAnimationDuration=function(t){var e=-1,n=this.animationsMap[t];return n&&(e=n.duration),e},Vu.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},Vu.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},Vu.prototype.update=function(t){for(var e=0,n=this.animationsList.length;e<n;e++){var i=this.animationsList[e];if(i.active){var r=i.duration/i.length;i.time+=i.direction*t,i.mirroredLoop?(i.time>i.duration||i.time<0)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),i.time<0&&(i.time=0,i.directionBackwards=!1)):(i.time=i.time%i.duration,i.time<0&&(i.time+=i.duration));var a=i.start+De.clamp(Math.floor(i.time/r),0,i.length-1),o=i.weight;a!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*o,this.morphTargetInfluences[a]=0,i.lastFrame=i.currentFrame,i.currentFrame=a);var s=i.time%r/r;i.directionBackwards&&(s=1-s),i.currentFrame!==i.lastFrame?(this.morphTargetInfluences[i.currentFrame]=s*o,this.morphTargetInfluences[i.lastFrame]=(1-s)*o):this.morphTargetInfluences[i.currentFrame]=o}}},((Hu.prototype=Object.create(Ki.prototype)).constructor=Hu).prototype.isImmediateRenderObject=!0,((zu.prototype=Object.create(po.prototype)).constructor=zu).prototype.update=(Xl=new tn,Yl=new tn,$l=new Ai,function(){var t=["a","b","c"];this.object.updateMatrixWorld(!0),$l.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,n=this.geometry.attributes.position,i=this.object.geometry;if(i&&i.isGeometry)for(var r=i.vertices,a=i.faces,o=0,s=0,l=a.length;s<l;s++)for(var u=a[s],c=0,h=u.vertexNormals.length;c<h;c++){var d=r[u[t[c]]],p=u.vertexNormals[c];Xl.copy(d).applyMatrix4(e),Yl.copy(p).applyMatrix3($l).normalize().multiplyScalar(this.size).add(Xl),n.setXYZ(o,Xl.x,Xl.y,Xl.z),o+=1,n.setXYZ(o,Yl.x,Yl.y,Yl.z),o+=1}else if(i&&i.isBufferGeometry){var f=i.attributes.position,m=i.attributes.normal;for(c=o=0,h=f.count;c<h;c++)Xl.set(f.getX(c),f.getY(c),f.getZ(c)).applyMatrix4(e),Yl.set(m.getX(c),m.getY(c),m.getZ(c)),Yl.applyMatrix3($l).normalize().multiplyScalar(this.size).add(Xl),n.setXYZ(o,Xl.x,Xl.y,Xl.z),o+=1,n.setXYZ(o,Yl.x,Yl.y,Yl.z),o+=1}n.needsUpdate=!0}),((Gu.prototype=Object.create(Ki.prototype)).constructor=Gu).prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Gu.prototype.update=(Zl=new tn,Kl=new tn,function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Zl.setFromMatrixPosition(this.light.matrixWorld),Kl.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Kl.sub(Zl)),this.cone.material.color.copy(this.light.color)}),((Wu.prototype=Object.create(po.prototype)).constructor=Wu).prototype.onBeforeRender=(Jl=new tn,Ql=new en,tu=new en,function(){var t=this.bones,e=this.geometry,n=e.getAttribute("position");tu.getInverse(this.root.matrixWorld);for(var i=0,r=0;i<t.length;i++){var a=t[i];a.parent&&a.parent.isBone&&(Ql.multiplyMatrices(tu,a.matrixWorld),Jl.setFromMatrixPosition(Ql),n.setXYZ(r,Jl.x,Jl.y,Jl.z),Ql.multiplyMatrices(tu,a.parent.matrixWorld),Jl.setFromMatrixPosition(Ql),n.setXYZ(r+1,Jl.x,Jl.y,Jl.z),r+=2)}e.getAttribute("position").needsUpdate=!0}),((qu.prototype=Object.create(ca.prototype)).constructor=qu).prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},qu.prototype.update=function(){this.material.color.copy(this.light.color)},((Xu.prototype=Object.create(Ki.prototype)).constructor=Xu).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Xu.prototype.update=function(){var t=this.children[0];t.material.color.copy(this.light.color);var e=.5*this.light.width,n=.5*this.light.height,i=t.geometry.attributes.position,r=i.array;r[0]=e,r[1]=-n,r[2]=0,r[3]=e,r[4]=n,r[5]=0,r[6]=-e,r[7]=n,r[8]=0,r[9]=-e,r[10]=-n,r[11]=0,r[12]=e,r[13]=-n,r[14]=0,i.needsUpdate=!0},((Yu.prototype=Object.create(Ki.prototype)).constructor=Yu).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Yu.prototype.update=(eu=new tn,nu=new Wn,iu=new Wn,function(){var t=this.children[0],e=t.geometry.getAttribute("color");nu.copy(this.light.color),iu.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?nu:iu;e.setXYZ(n,r.r,r.g,r.b)}t.lookAt(eu.setFromMatrixPosition(this.light.matrixWorld).negate()),e.needsUpdate=!0}),($u.prototype=Object.create(po.prototype)).constructor=$u,(Zu.prototype=Object.create(po.prototype)).constructor=Zu,((Ku.prototype=Object.create(po.prototype)).constructor=Ku).prototype.update=(ru=new tn,au=new tn,ou=new Ai,function(){this.object.updateMatrixWorld(!0),ou.getNormalMatrix(this.object.matrixWorld);for(var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry,i=n.vertices,r=n.faces,a=0,o=0,s=r.length;o<s;o++){var l=r[o],u=l.normal;ru.copy(i[l.a]).add(i[l.b]).add(i[l.c]).divideScalar(3).applyMatrix4(t),au.copy(u).applyMatrix3(ou).normalize().multiplyScalar(this.size).add(ru),e.setXYZ(a,ru.x,ru.y,ru.z),a+=1,e.setXYZ(a,au.x,au.y,au.z),a+=1}e.needsUpdate=!0}),((Ju.prototype=Object.create(Ki.prototype)).constructor=Ju).prototype.dispose=function(){var t=this.children[0],e=this.children[1];t.geometry.dispose(),t.material.dispose(),e.geometry.dispose(),e.material.dispose()},Ju.prototype.update=(su=new tn,lu=new tn,uu=new tn,function(){su.setFromMatrixPosition(this.light.matrixWorld),lu.setFromMatrixPosition(this.light.target.matrixWorld),uu.subVectors(lu,su);var t=this.children[0],e=this.children[1];t.lookAt(uu),t.material.color.copy(this.light.color),e.lookAt(uu),e.scale.z=uu.length()}),((Qu.prototype=Object.create(po.prototype)).constructor=Qu).prototype.update=function(){var l,u,c=new tn,h=new Ji;function t(t,e,n,i){c.set(e,n,i).unproject(h);var r=u[t];if(void 0!==r)for(var a=l.getAttribute("position"),o=0,s=r.length;o<s;o++)a.setXYZ(r[o],c.x,c.y,c.z)}return function(){l=this.geometry,u=this.pointMap;h.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),l.getAttribute("position").needsUpdate=!0}}(),((tc.prototype=Object.create(po.prototype)).constructor=tc).prototype.update=(cu=new Ei,function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&cu.setFromObject(this.object),!cu.isEmpty()){var e=cu.min,n=cu.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}),tc.prototype.setFromObject=function(t){return this.object=t,this.update(),this},((ec.prototype=Object.create(Ki.prototype)).constructor=ec).prototype.setDirection=(fu=new tn,function(t){t.y>.99999?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(fu.set(t.z,0,-t.x).normalize(),pu=Math.acos(t.y),this.quaternion.setFromAxisAngle(fu,pu))}),ec.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},ec.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},(nc.prototype=Object.create(po.prototype)).constructor=nc;var rc=new tn,ac=new ic,oc=new ic,sc=new ic;function lc(t){vl.call(this),t.length<2&&console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries."),this.points=t||[],this.closed=!1}function uc(t,e,n,i){vl.call(this),this.v0=t,this.v1=e,this.v2=n,this.v3=i}function cc(t,e,n){vl.call(this),this.v0=t,this.v1=e,this.v2=n}function hc(t,e){vl.call(this),this.v1=t,this.v2=e}function dc(t,e,n,i,r,a){_l.call(this,t,e,n,n,i,r,a)}((lc.prototype=Object.create(vl.prototype)).constructor=lc).prototype.getPoint=function(t){var e,n,i,r,a=this.points,o=a.length,s=(o-(this.closed?0:1))*t,l=Math.floor(s),u=s-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a.length)+1)*a.length:0===u&&l===o-1&&(l=o-2,u=1),e=this.closed||l>0?a[(l-1)%o]:(rc.subVectors(a[0],a[1]).add(a[0]),rc),n=a[l%o],i=a[(l+1)%o],r=this.closed||l+2<o?a[(l+2)%o]:(rc.subVectors(a[o-1],a[o-2]).add(a[o-1]),rc),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var c="chordal"===this.type?.5:.25,h=Math.pow(e.distanceToSquared(n),c),d=Math.pow(n.distanceToSquared(i),c),p=Math.pow(i.distanceToSquared(r),c);d<1e-4&&(d=1),h<1e-4&&(h=d),p<1e-4&&(p=d),ac.initNonuniformCatmullRom(e.x,n.x,i.x,r.x,h,d,p),oc.initNonuniformCatmullRom(e.y,n.y,i.y,r.y,h,d,p),sc.initNonuniformCatmullRom(e.z,n.z,i.z,r.z,h,d,p)}else if("catmullrom"===this.type){var f=void 0!==this.tension?this.tension:.5;ac.initCatmullRom(e.x,n.x,i.x,r.x,f),oc.initCatmullRom(e.y,n.y,i.y,r.y,f),sc.initCatmullRom(e.z,n.z,i.z,r.z,f)}return new tn(ac.calc(u),oc.calc(u),sc.calc(u))},((uc.prototype=Object.create(vl.prototype)).constructor=uc).prototype.getPoint=function(t){var e=this.v0,n=this.v1,i=this.v2,r=this.v3;return new tn(ml(t,e.x,n.x,i.x,r.x),ml(t,e.y,n.y,i.y,r.y),ml(t,e.z,n.z,i.z,r.z))},((cc.prototype=Object.create(vl.prototype)).constructor=cc).prototype.getPoint=function(t){var e=this.v0,n=this.v1,i=this.v2;return new tn(fl(t,e.x,n.x,i.x),fl(t,e.y,n.y,i.y),fl(t,e.z,n.z,i.z))},((hc.prototype=Object.create(vl.prototype)).constructor=hc).prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=new tn;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e},(dc.prototype=Object.create(_l.prototype)).constructor=dc;var pc={createMultiMaterialObject:function(t,e){for(var n=new go,i=0,r=e.length;i<r;i++)n.add(new ca(t,e[i]));return n},detach:function(t,e,n){t.applyMatrix(e.matrixWorld),e.remove(t),n.add(t)},attach:function(t,e,n){t.applyMatrix((new en).getInverse(n.matrixWorld)),e.remove(t),n.add(t)}};function fc(t,e,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new er(t,e,n,r,a,o)}var mc,vc=0,gc=1;function yc(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function _c(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,(t.materials=t).clone=function(){return t.slice()},t}function bc(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new vo(t,e)}function wc(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ao(t)}function Tc(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new vo(t,e)}function xc(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new mo(t)}function Ec(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new mo(t)}function Sc(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new mo(t)}function Ac(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new tn(t,e,n)}function Mc(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new zr(t,e).setDynamic(!0)}function Cc(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Gr(t,e)}function kc(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Wr(t,e)}function Oc(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new qr(t,e)}function Lc(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Xr(t,e)}function Rc(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Yr(t,e)}function Pc(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new $r(t,e)}function Ic(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Zr(t,e)}function Dc(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Kr(t,e)}function jc(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Jr(t,e)}function Nc(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),lc.call(this,t),this.type="catmullrom",this.closed=!0}function Uc(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),lc.call(this,t),this.type="catmullrom"}function Bc(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),lc.call(this,t),this.type="catmullrom"}function Fc(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new tc(t,e)}function Vc(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new po(new ts(t.geometry),new co({color:void 0!==e?e:16777215}))}function Hc(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new po(new To(t.geometry),new co({color:void 0!==e?e:16777215}))}function zc(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new ws(t)}function Gc(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new xs(t)}vl.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(vl.prototype),(t.prototype.constructor=t).prototype.getPoint=e,t},Nc.prototype=Object.create(lc.prototype),Uc.prototype=Object.create(lc.prototype),Bc.prototype=Object.create(lc.prototype),Object.assign(Bc.prototype,{initFromArray:function(t){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(t){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(t){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),$u.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Wu.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Jn.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Ei.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),la.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},De.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(Ai.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t,e,n){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,n){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(en.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return void 0===mc&&(mc=new tn),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),mc.setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t,e,n){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,n){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,a)}}),Mi.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Qe.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(sa.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Al.prototype,{extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ho(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Jo(this,t)}}),Object.assign(bt.prototype,{fromAttribute:function(t,e,n){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)}}),Object.assign(tn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)}}),Object.assign(Ze.prototype,{fromAttribute:function(t,e,n){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)}}),Hr.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(Ki.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}}),Object.defineProperties(Ki.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(oo.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(so.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(vl.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),tr.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Ms.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(zr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(ea.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(ea.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(ku.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(wi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Wn}}}),Object.defineProperties(ds.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ti.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Qa.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(Qa.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(ki.prototype,{cullFace:{get:function(){return this.renderReverseSided?G:z},set:function(t){var e=t!==z;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+"."),this.renderReverseSided=e}}}),Object.defineProperties(Ke.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),bu.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new vu).load(t,function(t){e.setBuffer(t)}),this},Tu.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var Wc={merge:function(t,e,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},qc={crossOrigin:void 0,loadTexture:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new As;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},loadTextureCube:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Ss;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function Xc(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Yc(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}},function(t,e,n){var i,r=(i=n(33))&&"object"===typeof i&&"default"in i?i.default:i,a=n(34);function o(e,t,n,i){function r(t){Boolean(e[n])===Boolean(i)&&t.stopImmediatePropagation(),delete e[n]}return e.addEventListener(t,r,!1),r}function s(t,e,n,i){function r(t){n[e]=t}i&&r(t[e]),Object.defineProperty(t,e,{get:function(){return n[e]},set:r})}function l(t,e,n){n.addEventListener(e,function(){return t.dispatchEvent(new Event(e))})}function u(t,e){Promise.resolve().then(function(){t.dispatchEvent(new Event(e))})}var c="object-fit"in document.head.style&&/iPhone|iPod/i.test(navigator.userAgent)&&!matchMedia("(-webkit-video-playable-inline)").matches,h=r(),d=r(),p=r("nativeplay"),f=r("nativepause");var m,v=[],g=0;function y(t,e,n){(m||0)+200<Date.now()&&(t[d]=!0,m=Date.now()),n||(t.currentTime=e),v[++g%3]=100*e|0}function _(t){return t.driver.currentTime>=t.video.duration}function b(){var t=this,e=t[h];t.webkitDisplayingFullscreen?t[p]():("data:"!==e.driver.src&&e.driver.src!==t.src&&(y(t,0,!0),e.driver.src=t.src),t.paused&&(e.paused=!1,t.buffered.length||t.load(),e.driver.play(),e.updater.start(),e.hasAudio||(u(t,"play"),e.video.readyState>=e.video.HAVE_ENOUGH_DATA&&u(t,"playing"))))}function w(t){var e=this[h];e.driver.pause(),e.updater.stop(),this.webkitDisplayingFullscreen&&this[f](),e.paused&&!t||(e.paused=!0,e.hasAudio||u(this,"pause"),this.ended&&(this[d]=!0,u(this,"ended")))}function T(e,t){var n,i,r=e[h]={};r.paused=!0,r.hasAudio=t,r.video=e,r.updater=a.frameIntervalometer(function(t){var e=this;e.video.readyState>=e.video.HAVE_FUTURE_DATA?(e.hasAudio||(e.driver.currentTime=e.video.currentTime+t*e.video.playbackRate/1e3,e.video.loop&&_(e)&&(e.driver.currentTime=0)),y(e.video,e.driver.currentTime)):e.video.networkState!==e.video.NETWORK_IDLE||e.video.buffered.length||e.video.load(),e.video.ended&&(delete e.video[d],e.video.pause(!0))}.bind(r)),t?r.driver=(n=e,i=new Audio,l(n,"play",i),l(n,"playing",i),l(n,"pause",i),i.crossOrigin=n.crossOrigin,i.src=n.src||n.currentSrc||"data:",i):(e.addEventListener("canplay",function(){e.paused||u(e,"playing")}),r.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){r.driver.paused=!0},play:function(){r.driver.paused=!1,_(r)&&y(e,0)},get ended(){return _(r)}}),e.addEventListener("emptied",function(){var t=!r.driver.src||"data:"===r.driver.src;r.driver.src&&r.driver.src!==e.src&&(y(e,0,!0),r.driver.src=e.src,t?r.driver.play():r.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?t&&!r.driver.buffered.length&&r.driver.load():(e.pause(),e[p]())}),t&&(e.addEventListener("webkitendfullscreen",function(){r.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){v.indexOf(100*e.currentTime|0)<0&&(r.driver.currentTime=e.currentTime)}))}function x(t,e,n){var i,r;(void 0===e&&(e=!0),void 0===n&&(n=!0),n&&!c||t[h])||(T(t,e),r=(i=t)[h],i[p]=i.play,i[f]=i.pause,i.play=b,i.pause=w,s(i,"paused",r.driver),s(i,"muted",r.driver,!0),s(i,"playbackRate",r.driver,!0),s(i,"ended",r.driver),s(i,"loop",r.driver,!0),o(i,"seeking"),o(i,"seeked"),o(i,"timeupdate",d,!1),o(i,"ended",d,!1),t.classList.add("IIV"),!e&&t.autoplay&&t.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments"))}x.isWhitelisted=c,t.exports=x},function(t,e,n){var i="undefined"===typeof Symbol?function(t){return"@"+(t||"@")+Math.random()}:Symbol;t.exports=i},function(t,e,n){function i(e,n,t,i){var r,a;function o(t){r=n(o,i),e(t-(a||t)),a=t}return{start:function(){r||o(0)},stop:function(){t(r),r=null,a=0}}}function r(t){return i(t,requestAnimationFrame,cancelAnimationFrame)}function a(t,e){return i(t,setTimeout,clearTimeout,e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"intervalometer",function(){return i}),n.d(e,"frameIntervalometer",function(){return r}),n.d(e,"timerIntervalometer",function(){return a})},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(36),a=(n.n(o),n(37)),s=n.n(a);var l,u=r.a.getComponent("Tech"),c=r.a.dom,h=r.a.url,d=r.a.createTimeRange,p=r.a.mergeOptions,f=s.a&&s.a.navigator||{},m=function(i){function a(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,i.call(this,t,e));return t.source&&n.ready(function(){this.setSource(t.source)},!0),t.startTime&&n.ready(function(){this.load(),this.play(),this.currentTime(t.startTime)},!0),s.a.videojs=s.a.videojs||{},s.a.videojs.Flash=s.a.videojs.Flash||{},s.a.videojs.Flash.onReady=a.onReady,s.a.videojs.Flash.onEvent=a.onEvent,s.a.videojs.Flash.onError=a.onError,n.on("seeked",function(){this.lastSeekTarget_=void 0}),n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i),a.prototype.createEl=function(){var t=this.options_;t.swf||(t.swf="https://vjs.zencdn.net/swf/"+o.version+"/video-js.swf");var e=t.techId,n=p({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:t.autoplay,preload:t.preload,loop:t.loop,muted:t.muted},t.flashVars),i=p({wmode:"opaque",bgcolor:"#000000"},t.params),r=p({id:e,name:e,class:"vjs-tech"},t.attributes);return this.el_=a.embed(t.swf,n,i,r),(this.el_.tech=this).el_},a.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},a.prototype.pause=function(){this.el_.vjs_pause()},a.prototype.src=function(t){return void 0===t?this.currentSrc():this.setSrc(t)},a.prototype.setSrc=function(t){var e=this;t=h.getAbsoluteURL(t),this.el_.vjs_src(t),this.autoplay()&&this.setTimeout(function(){return e.play()},0)},a.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},a.prototype.setCurrentTime=function(t){var e=this.seekable();e.length&&(t=(t=t>e.start(0)?t:e.start(0))<e.end(e.length-1)?t:e.end(e.length-1),this.lastSeekTarget_=t,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",t),i.prototype.setCurrentTime.call(this))},a.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},a.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},a.prototype.duration=function(){if(0===this.readyState())return NaN;var t=this.el_.vjs_getProperty("duration");return t>=0?t:1/0},a.prototype.load=function(){this.el_.vjs_load()},a.prototype.poster=function(){this.el_.vjs_getProperty("poster")},a.prototype.setPoster=function(){},a.prototype.seekable=function(){var t=this.duration();return 0===t?d():d(0,t)},a.prototype.buffered=function(){var t=this.el_.vjs_getProperty("buffered");return 0===t.length?d():d(t[0][0],t[0][1])},a.prototype.supportsFullScreen=function(){return!1},a.prototype.enterFullScreen=function(){return!1},a.prototype.getVideoPlaybackQuality=function(){var t=this.el_.vjs_getProperty("getVideoPlaybackQuality");return s.a.performance&&"function"===typeof s.a.performance.now?t.creationTime=s.a.performance.now():s.a.performance&&s.a.performance.timing&&"number"===typeof s.a.performance.timing.navigationStart&&(t.creationTime=s.a.Date.now()-s.a.performance.timing.navigationStart),t},a}(u),v=["rtmpConnection","rtmpStream","preload","defaultPlaybackRate","playbackRate","autoplay","loop","controls","volume","muted","defaultMuted"],g=["networkState","readyState","initialTime","startOffsetTime","paused","ended","videoWidth","videoHeight"],y=m.prototype;function _(e){var t=e.charAt(0).toUpperCase()+e.slice(1);y["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}function b(t){y[t]=function(){return this.el_.vjs_getProperty(t)}}for(var w=0;w<v.length;w++)b(v[w]),_(v[w]);for(var T=0;T<g.length;T++)b(g[T]);m.isSupported=function(){return!!(r.a.browser.IS_CHROME&&!r.a.browser.IS_ANDROID||r.a.browser.IS_SAFARI&&!r.a.browser.IS_IOS)||m.version()[0]>=10},u.withSourceHandlers(m),m.nativeSourceHandler={},m.nativeSourceHandler.canPlayType=function(t){return t in m.formats?"maybe":""},m.nativeSourceHandler.canHandleSource=function(t,e){var n,i,r=void 0;return r=t.type?t.type.replace(/;.*/,"").toLowerCase():(n=t.src,(i=h.getFileExtension(n))?"video/"+i:""),m.nativeSourceHandler.canPlayType(r)},m.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)},m.nativeSourceHandler.dispose=function(){},m.registerSourceHandler(m.nativeSourceHandler),m.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},m.onReady=function(t){var e=c.$("#"+t),n=e&&e.tech;n&&n.el()&&m.checkReady(n)},m.checkReady=function(t){t.el()&&(t.el().vjs_getProperty?t.triggerReady():this.setTimeout(function(){m.checkReady(t)},50))},m.onEvent=function(t,e){var n=c.$("#"+t).tech,i=Array.prototype.slice.call(arguments,2);n.setTimeout(function(){n.trigger(e,i)},1)},m.onError=function(t,e){var n=c.$("#"+t).tech;if("srcnotfound"===e)return n.error(4);"string"===typeof e?n.error("FLASH: "+e):(e.origin="flash",n.error(e))},m.version=function(){var e="0,0,0";try{e=new s.a.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{f.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=(f.plugins["Shockwave Flash 2.0"]||f.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(t){}}return e.split(",")},m.embed=function(t,e,n,i){var r=m.getEmbedCode(t,e,n,i);return c.createEl("div",{innerHTML:r}).childNodes[0]},m.getEmbedCode=function(t,e,n,i){var r="",a="",o="";return e&&Object.getOwnPropertyNames(e).forEach(function(t){r+=t+"="+e[t]+"&amp;"}),n=p({movie:t,flashvars:r,allowScriptAccess:"always",allowNetworking:"all"},n),Object.getOwnPropertyNames(n).forEach(function(t){a+='<param name="'+t+'" value="'+n[t]+'" />'}),i=p({data:t,width:"100%",height:"100%"},i),Object.getOwnPropertyNames(i).forEach(function(t){o+=t+'="'+i[t]+'" '}),'<object type="application/x-shockwave-flash" '+o+">"+a+"</object>"},(l=m).streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},l.streamFromParts=function(t,e){return t+"&"+e},l.streamToParts=function(t){var e={connection:"",stream:""};if(!t)return e;var n=t.search(/&(?!\w+=)/),i=void 0;return-1!==n?i=n+1:0===(n=i=t.lastIndexOf("/")+1)&&(n=i=t.length),e.connection=t.substring(0,n),e.stream=t.substring(i,t.length),e},l.isStreamingType=function(t){return t in l.streamingFormats},l.RTMP_RE=/^rtmp[set]?:\/\//i,l.isStreamingSrc=function(t){return l.RTMP_RE.test(t)},l.rtmpSourceHandler={},l.rtmpSourceHandler.canPlayType=function(t){return l.isStreamingType(t)?"maybe":""},l.rtmpSourceHandler.canHandleSource=function(t,e){var n=l.rtmpSourceHandler.canPlayType(t.type);return n||(l.isStreamingSrc(t.src)?"maybe":"")},l.rtmpSourceHandler.handleSource=function(t,e,n){var i=l.streamToParts(t.src);e.setRtmpConnection(i.connection),e.setRtmpStream(i.stream)},l.registerSourceHandler(l.rtmpSourceHandler),u.getTech("Flash")?(r.a.log.warn("Not using videojs-flash as it appears to already be registered"),r.a.log.warn("videojs-flash should only be used with video.js@6 and above")):r.a.registerTech("Flash",m),m.VERSION="2.1.0",e.default=m},function(t,e){t.exports={name:"videojs-swf",description:"The Flash-fallback video player for video.js (http://videojs.com)",version:"5.4.1",copyright:"Copyright 2014 Brightcove, Inc. https://github.com/videojs/video-js-swf/blob/master/LICENSE",keywords:["flash","video","player"],homepage:"http://videojs.com",author:"Brightcove",repository:{type:"git",url:"https://github.com/videojs/video-js-swf.git"},devDependencies:{async:"~0.2.9",chg:"^0.3.2","flex-sdk":"4.6.0-0",grunt:"~0.4.0","grunt-bumpup":"~0.5.0","grunt-cli":"~0.1.0","grunt-connect":"~0.2.0","grunt-contrib-jshint":"~0.4.3","grunt-contrib-qunit":"~0.2.1","grunt-contrib-watch":"~0.1.4","grunt-npm":"~0.0.2","grunt-prompt":"~0.1.2","grunt-shell":"~0.6.1","grunt-tagrelease":"~0.3.1",qunitjs:"~1.12.0","video.js":"^5.9.2"},scripts:{version:"chg release -y && grunt dist && git add -f dist/ && git add CHANGELOG.md"}}},function(n,t,e){(function(t){var e;e="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},n.exports=e}).call(t,e(2))},function(e,t,n){(function(u){n(0);(function(){var t;(t=(t=this)||{}).videojs=n(0);n(39),n(0);(function(){var C,t;(C=(C=this)||{}).videojs=n(0),t=function(){return function r(a,o,s){function l(n,t){if(!o[n]){if(!a[n]){if(u)return u(n,!0);var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}var i=o[n]={exports:{}};a[n][0].call(i.exports,function(t){var e=a[n][1][t];return l(e||t)},i,i.exports,r,a,o,s)}return o[n].exports}for(var u=!1,t=0;t<s.length;t++)l(s[t]);return l}({1:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var h=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};var i,r=t("global/window"),d=(i=r)&&i.__esModule?i:{default:i},p=function(t,e){for(var n=t.cues,i=0;i<n.length;i++){var r=n[i];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null};n.default={updateAdCues:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(t.segments)for(var i=n,r=void 0,a=0;a<t.segments.length;a++){var o=t.segments[a];if(r||(r=p(e,i+o.duration/2)),r){if("cueIn"in o){r.endTime=i,r.adEndTime=i,i+=o.duration,r=null;continue}if(i<r.endTime){i+=o.duration;continue}r.endTime+=o.duration}else if("cueOut"in o&&((r=new d.default.VTTCue(i,i+o.duration,o.cueOut)).adStartTime=i,r.adEndTime=i+parseFloat(o.cueOut),e.addCue(r)),"cueOutCont"in o){var s,l,u=o.cueOutCont.split("/").map(parseFloat),c=h(u,2);s=c[0],l=c[1],(r=new d.default.VTTCue(i,i+o.duration,"")).adStartTime=i-s,r.adEndTime=r.adStartTime+l,e.addCue(r)}i+=o.duration}},findAdCue:p},e.exports=n.default},{"global/window":32}],2:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(t,e){var n=t.toString(16);return"00".substring(0,2-n.length)+n+(e%2?" ":"")},a=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},i={hexDump:function(t){for(var e=Array.prototype.slice.call(t),n="",i=0;i<e.length/16;i++)n+=e.slice(16*i,16*i+16).map(r).join("")+" "+e.slice(16*i,16*i+16).map(a).join("")+"\n";return n},tagDump:function(t){return i.hexDump(t.bytes)},textRanges:function(t){var e,n,i="",r=void 0;for(r=0;r<t.length;r++)i+=(n=r,(e=t).start(n)+"-"+e.end(n)+" ");return i},createTransferableMessage:function(n){var i={};return Object.keys(n).forEach(function(t){var e=n[t];ArrayBuffer.isView(e)?i[t]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:i[t]=e}),i},initSegmentId:function(t){var e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")}};n.default=i,e.exports=n.default},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},e.exports=n.default},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=t("global/window"),a=(i=r)&&i.__esModule?i:{default:i},o=t("aes-decrypter"),s=t("./bin-utils"),l=function(t){t.onmessage=function(t){var n=t.data,e=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),i=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),r=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new o.Decrypter(e,i,r,function(t,e){a.default.postMessage((0,s.createTransferableMessage)({source:n.source,decrypted:e}),[e.buffer])})}};n.default=function(t){return new l(t)},e.exports=n.default},{"./bin-utils":2,"aes-decrypter":25,"global/window":32}],5:[function(h,t,d){(function(t){Object.defineProperty(d,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function n(t){return t&&t.__esModule?t:{default:t}}var p=n(h("./playlist-loader")),a=h("./playlist.js"),f=n(h("./segment-loader")),m=n(h("./vtt-segment-loader")),o=n(h("./ranges")),v=n("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),i=n(h("./ad-cue-tags")),g=n(h("./sync-controller")),r=h("videojs-contrib-media-sources/es5/codec-utils"),y=n(h("webworkify")),_=n(h("./decrypter-worker")),s=n(h("./config")),b=h("./util/codecs.js"),w=h("./media-groups"),T=void 0,x={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},E=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],l=function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t){return(0,r.translateLegacyCodecs)([t])[0]})};d.mapLegacyAvcCodecs_=l;var S=function(t,e,n){return t+"/"+e+'; codecs="'+n.filter(function(t){return!!t}).join(", ")+'"'},u=function(t,e){var n,i,r=(n=e).segments&&n.segments.length&&n.segments[0].map?"mp4":"mp2t",a=(i=e.attributes||{}).CODECS?(0,b.parseCodecs)(i.CODECS):x,o=e.attributes||{},s=!0,l=!1;if(!e)return[];if(t.mediaGroups.AUDIO&&o.AUDIO){var u=t.mediaGroups.AUDIO[o.AUDIO];if(u)for(var c in s=!(l=!0),u)if(!u[c].uri){s=!0;break}}l&&!a.audioProfile&&(v.default.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),a.audioProfile=x.audioProfile);var h={};a.videoCodec&&(h.video=""+a.videoCodec+a.videoObjectTypeIndicator),a.audioProfile&&(h.audio="mp4a.40."+a.audioProfile);var d=S("audio",r,[h.audio]),p=S("video",r,[h.video]),f=S("video",r,[h.video,h.audio]);return l?!s&&h.video?[p,d]:[f,d]:h.video?[f]:[d]};d.mimeTypesForPlaylist_=u;var c=function(t){function d(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(d.prototype),"constructor",this).call(this);var n=t.url,i=t.withCredentials,r=t.mode,a=t.tech,o=t.bandwidth,s=t.externHls,l=t.useCueTags,u=t.blacklistDuration,c=t.enableLowInitialPlaylist;if(!n)throw new Error("A non-empty playlist URL is required");T=s,this.withCredentials=i,this.tech_=a,this.hls_=a.hls,this.mode_=r,this.useCueTags_=l,this.blacklistDuration=u,this.enableLowInitialPlaylist=c,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:this.withCredentials,timeout:null},this.mediaTypes_=(0,w.createMediaTypes)(),this.mediaSource=new v.default.MediaSource({mode:r}),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this)),this.seekable_=v.default.createTimeRanges(),this.hasPlayed_=function(){return!1},this.syncController_=new g.default(t),this.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=(0,y.default)(_.default);var h={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function(){return e.seekable()},seeking:function(){return e.tech_.seeking()},duration:function(){return e.mediaSource.duration},hasPlayed:function(){return e.hasPlayed_()},goalBufferLength:function(){return e.goalBufferLength()},bandwidth:o,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new p.default(n,this.hls_,this.withCredentials),this.setupMasterPlaylistLoaderListeners_(),this.mainSegmentLoader_=new f.default(v.default.mergeOptions(h,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),t),this.audioSegmentLoader_=new f.default(v.default.mergeOptions(h,{loaderType:"audio"}),t),this.subtitleSegmentLoader_=new m.default(v.default.mergeOptions(h,{loaderType:"vtt"}),t),this.setupSegmentLoaderListeners_(),E.forEach(function(t){e[t+"_"]=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]}.bind(e,t)}),this.masterPlaylistLoader_.load()}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,v["default"].EventTarget),e(d,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=i.masterPlaylistLoader_.media(),e=1.5*i.masterPlaylistLoader_.targetDuration*1e3;(0,a.isLowestEnabledRendition)(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=e,t.endList&&"none"!==i.tech_.preload()&&(i.mainSegmentLoader_.playlist(t,i.requestOptions_),i.mainSegmentLoader_.load()),(0,w.setupMediaGroups)({segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,mode:i.mode_,hls:i.hls_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),t);try{i.setupSourceBuffers_()}catch(t){return v.default.log.warn("Failed to create SourceBuffers",t),i.mediaSource.endOfStream("decode")}i.setupFirstPlay(),i.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e,t=i.masterPlaylistLoader_.media();if(!t){var n=void 0;return i.enableLowInitialPlaylist&&(n=i.selectInitialPlaylist()),n||(n=i.selectPlaylist()),i.initialMedia_=n,void i.masterPlaylistLoader_.media(i.initialMedia_)}i.useCueTags_&&i.updateAdCues_(t),i.mainSegmentLoader_.playlist(t,i.requestOptions_),i.updateDuration(),i.tech_.paused()||i.mainSegmentLoader_.load(),t.endList||(e=function(){var t=i.seekable();0!==t.length&&i.mediaSource.addSeekableRange_(t.start(0),t.end(0))},i.duration()!==1/0?i.tech_.one("durationchange",function t(){i.duration()===1/0?e():i.tech_.one("durationchange",t)}):e())}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=i.masterPlaylistLoader_.media(),e=1.5*i.masterPlaylistLoader_.targetDuration*1e3;(0,a.isLowestEnabledRendition)(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=e,i.mainSegmentLoader_.playlist(t,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=i.masterPlaylistLoader_.media();i.stuckAtPlaylistEnd_(t)&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),i.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(t,e){var n=t.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var o in n.AUDIO[a]){n.AUDIO[a][o].uri||(i=!1)}i&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),T.Playlist.isAes(e)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),T.Playlist.isFmp4(e)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=a.selectPlaylist(),e=a.masterPlaylistLoader_.media(),n=a.tech_.buffered(),i=n.length?n.end(n.length-1)-a.tech_.currentTime():0,r=a.bufferLowWaterLine();(!e.endList||a.duration()<s.default.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<e.attributes.BANDWIDTH||i>=r)&&a.masterPlaylistLoader_.media(t),a.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(t){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})}),this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetLoader())}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_()&&this.load();var t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var t,e=this,n=this.masterPlaylistLoader_.media();if(!n||this.tech_.paused()||this.hasPlayed_())return!1;if(!n.endList){var i=(t=e.seekable()).length?v.default.browser.IE_VERSION&&"html5"===e.mode_&&0===e.tech_.readyState()?(e.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(t.end(0)),e.hasPlayed_=function(){return!0}}),{v:!1}):(e.trigger("firstplay"),void e.tech_.setCurrentTime(t.end(0))):{v:!1};if("object"===typeof i)return i.v}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(t){return v.default.log.warn("Failed to create Source Buffers",t),this.mediaSource.endOfStream("decode")}this.tech_.autoplay()&&this.tech_.play(),this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var t=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=t&&this.audioSegmentLoader_.ended_),t&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(t){if(!this.seekable().length)return!1;var e=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(null===e)return!1;var n=T.Playlist.playlistEnd(t,e),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=o.default.SAFE_TIME_DELTA;var a=r.end(r.length-1);return a-i<=o.default.SAFE_TIME_DELTA&&n-a<=o.default.SAFE_TIME_DELTA}},{key:"blacklistCurrentPlaylist",value:function(t,e){void 0===t&&(t={});var n,i=void 0;if(i=t.playlist||this.masterPlaylistLoader_.media(),e=e||t.blacklistDuration||this.blacklistDuration,!i){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(t){return this.trigger("error")}}var r=1===this.masterPlaylistLoader_.master.playlists.filter(a.isEnabled).length;return r?(v.default.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(r)):(i.excludeUntil=Date.now()+1e3*e,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),n=this.selectPlaylist(),v.default.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(n))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(t){var e=o.default.findRange(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?e&&e.length&&"flash"!==this.mode_?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:T.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var t=void 0,e=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var i=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==i&&0!==(t=T.Playlist.seekable(n,i)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(e=T.Playlist.seekable(n,i)).length)return}e?e.start(0)>t.end(0)||t.start(0)>e.end(0)?this.seekable_=t:this.seekable_=v.default.createTimeRanges([[e.start(0)>t.start(0)?e.start(0):t.start(0),e.end(0)<t.end(0)?e.end(0):t.end(0)]]):this.seekable_=t,this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function(){var e=this,t=this.mediaSource.duration,n=T.Playlist.duration(this.masterPlaylistLoader_.media()),i=this.tech_.buffered(),r=function t(){e.mediaSource.duration=n,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)};i.length>0&&(n=Math.max(n,i.end(i.length-1))),t!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",r):r())}},{key:"dispose",value:function(){var i=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var e=i.mediaTypes_[t].groups;for(var n in e)e[n].forEach(function(t){t.playlistLoader&&t.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var t,e=this.masterPlaylistLoader_.media();if(e&&"open"===this.mediaSource.readyState){if((t=u(this.masterPlaylistLoader_.master,e)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");this.mainSegmentLoader_.mimeType(t[0]),t[1]&&this.audioSegmentLoader_.mimeType(t[1]),this.excludeIncompatibleVariants_(e)}}},{key:"excludeIncompatibleVariants_",value:function(t){var e=this.masterPlaylistLoader_.master,i=2,r=null,n=void 0;t.attributes.CODECS&&(n=(0,b.parseCodecs)(t.attributes.CODECS),r=n.videoCodec,i=n.codecCount),e.playlists.forEach(function(t){var e={codecCount:2,videoCodec:null};if(t.attributes.CODECS){var n=t.attributes.CODECS;e=(0,b.parseCodecs)(n),C.MediaSource&&C.MediaSource.isTypeSupported&&!C.MediaSource.isTypeSupported('video/mp4; codecs="'+l(n)+'"')&&(t.excludeUntil=1/0)}e.codecCount!==i&&(t.excludeUntil=1/0),e.videoCodec!==r&&(t.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(t){var e=0,n=this.seekable();n.length&&(e=n.start(0)),i.default.updateAdCues(t,this.cueTagsTrack_,e)}},{key:"goalBufferLength",value:function(){var t=this.tech_.currentTime(),e=s.default.GOAL_BUFFER_LENGTH,n=s.default.GOAL_BUFFER_LENGTH_RATE,i=Math.max(e,s.default.MAX_GOAL_BUFFER_LENGTH);return Math.min(e+t*n,i)}},{key:"bufferLowWaterLine",value:function(){var t=this.tech_.currentTime(),e=s.default.BUFFER_LOW_WATER_LINE,n=s.default.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(e,s.default.MAX_BUFFER_LOW_WATER_LINE);return Math.min(e+t*n,i)}}]),d}();d.MasterPlaylistController=c}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./ad-cue-tags":1,"./config":3,"./decrypter-worker":4,"./media-groups":6,"./playlist-loader":9,"./playlist.js":11,"./ranges":12,"./segment-loader":16,"./sync-controller":18,"./util/codecs.js":19,"./vtt-segment-loader":20,"videojs-contrib-media-sources/es5/codec-utils":65,webworkify:76}],6:[function(i,t,r){(function(t){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(r,"__esModule",{value:!0});var g=e("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),y=e(i("./playlist-loader")),n=function(){},c=function(t,e){t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)};r.stopLoaders=c;var u=function(t,e){(e.activePlaylistLoader=t).load()};r.startLoaders=u;var h=function(s,l){return function(){var t=l.segmentLoaders,e=t[s],n=t.main,i=l.mediaTypes[s],r=i.activeTrack(),a=i.activeGroup(r),o=i.activePlaylistLoader;c(e,i),a&&(a.playlistLoader?(e.resyncLoader(),u(a.playlistLoader,i)):o&&n.resetEverything())}};r.onGroupChanged=h;var d=function(s,l){return function(){var t=l.segmentLoaders,e=t[s],n=t.main,i=l.mediaTypes[s],r=i.activeTrack(),a=i.activeGroup(r),o=i.activePlaylistLoader;c(e,i),a&&(a.playlistLoader?(o!==a.playlistLoader&&(e.track&&e.track(r),e.resetEverything()),u(a.playlistLoader,i)):n.resetEverything())}};r.onTrackChanged=d;var _={AUDIO:function(l,u){return function(){var t=u.segmentLoaders[l],e=u.mediaTypes[l],n=u.blacklistCurrentPlaylist;c(t,e);var i=e.activeTrack(),r=e.activeGroup(),a=(r.filter(function(t){return t.default})[0]||r[0]).id,o=e.tracks[a];if(i!==o){for(var s in g.default.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),e.tracks)e.tracks[s].enabled=e.tracks[s]===o;e.onTrackChanged()}else n({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(i,r){return function(){var t=r.segmentLoaders[i],e=r.mediaTypes[i];g.default.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),c(t,e);var n=e.activeTrack();n&&(n.mode="disabled"),e.onTrackChanged()}}};r.onError=_;var b={AUDIO:function(t,e,n){if(e){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[t];e.on("loadedmetadata",function(){var t=e.media();a.playlist(t,r),(!i.paused()||t.endList&&"none"!==i.preload())&&a.load()}),e.on("loadedplaylist",function(){a.playlist(e.media(),r),i.paused()||a.load()}),e.on("error",_[t](t,n))}},SUBTITLES:function(t,e,n){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[t],o=n.mediaTypes[t];e.on("loadedmetadata",function(){var t=e.media();a.playlist(t,r),a.track(o.activeTrack()),(!i.paused()||t.endList&&"none"!==i.preload())&&a.load()}),e.on("loadedplaylist",function(){a.playlist(e.media(),r),i.paused()||a.load()}),e.on("error",_[t](t,n))}};r.setupListeners=b;var p={AUDIO:function(t,e){var n,i,r=e.mode,a=e.hls,o=e.segmentLoaders[t],s=e.requestOptions.withCredentials,l=e.master.mediaGroups,u=e.mediaTypes[t],c=u.groups,h=u.tracks;for(var d in l[t]&&0!==Object.keys(l[t]).length&&"html5"===r||(l[t]={main:{default:{default:!0}}}),l[t])for(var p in c[d]||(c[d]=[]),l[t][d]){var f=l[t][d][p],m=void 0;if(m=f.resolvedUri?new y.default(f.resolvedUri,a,s):null,f=g.default.mergeOptions({id:p,playlistLoader:m},f),b[t](t,f.playlistLoader,e),c[d].push(f),"undefined"===typeof h[p]){var v=new g.default.AudioTrack({id:p,kind:(n=f,i=void 0,i=n.default?"main":"alternative",n.characteristics&&n.characteristics.indexOf("public.accessibility.describes-video")>=0&&(i="main-desc"),i),enabled:!1,language:f.language,default:f.default,label:p});h[p]=v}}o.on("error",_[t](t,e))},SUBTITLES:function(t,e){var n=e.tech,i=e.hls,r=e.segmentLoaders[t],a=e.requestOptions.withCredentials,o=e.master.mediaGroups,s=e.mediaTypes[t],l=s.groups,u=s.tracks;for(var c in o[t])for(var h in l[c]||(l[c]=[]),o[t][c])if(!o[t][c][h].forced){var d=o[t][c][h];if(d=g.default.mergeOptions({id:h,playlistLoader:new y.default(d.resolvedUri,i,a)},d),b[t](t,d.playlistLoader,e),l[c].push(d),"undefined"===typeof u[h]){var p=n.addRemoteTextTrack({id:h,kind:"subtitles",enabled:!1,language:d.language,label:h},!1).track;u[h]=p}}r.on("error",_[t](t,e))},"CLOSED-CAPTIONS":function(t,e){var n=e.tech,i=e.master.mediaGroups,r=e.mediaTypes[t],a=r.groups,o=r.tracks;for(var s in i[t])for(var l in a[s]||(a[s]=[]),i[t][s]){var u=i[t][s][l];if(u.instreamId.match(/CC\d/)&&(a[s].push(g.default.mergeOptions({id:l},u)),"undefined"===typeof o[l])){var c=n.addRemoteTextTrack({id:u.instreamId,kind:"captions",enabled:!1,language:u.language,label:l},!1).track;o[l]=c}}}};r.initialize=p;var f=function(a,o){return function(e){var t=o.masterPlaylistLoader,n=o.mediaTypes[a].groups,i=t.media();if(!i)return null;var r=null;return i.attributes[a]&&(r=n[i.attributes[a]]),r=r||n.main,"undefined"===typeof e?r:null===e?null:r.filter(function(t){return t.id===e.id})[0]||null}};r.activeGroup=f;var m={AUDIO:function(n,i){return function(){var t=i.mediaTypes[n].tracks;for(var e in t)if(t[e].enabled)return t[e];return null}},SUBTITLES:function(n,i){return function(){var t=i.mediaTypes[n].tracks;for(var e in t)if("showing"===t[e].mode)return t[e];return null}}};r.activeTrack=m;r.setupMediaGroups=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){p[t](t,e)});var n=e.mediaTypes,t=e.masterPlaylistLoader,i=e.tech,r=e.hls;["AUDIO","SUBTITLES"].forEach(function(t){n[t].activeGroup=f(t,e),n[t].activeTrack=m[t](t,e),n[t].onGroupChanged=h(t,e),n[t].onTrackChanged=d(t,e)});var a=n.AUDIO.activeGroup(),o=(a.filter(function(t){return t.default})[0]||a[0]).id;n.AUDIO.tracks[o].enabled=!0,n.AUDIO.onTrackChanged(),t.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(t){return n[t].onGroupChanged()})});var s=function(){n.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"hls-audio-change"})};for(var l in i.audioTracks().addEventListener("change",s),i.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),r.on("dispose",function(){i.audioTracks().removeEventListener("change",s),i.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),i.clearTracks("audio"),n.AUDIO.tracks)i.audioTracks().addTrack(n.AUDIO.tracks[l])};r.createMediaTypes=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:n,activeTrack:n,onGroupChanged:n,onTrackChanged:n}}),e}}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./playlist-loader":9}],7:[function(i,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e,n="undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null,g=(e=n)&&e.__esModule?e:{default:e},h=i("./bin-utils"),y={FAILURE:2,TIMEOUT:-101,ABORTED:-102};r.REQUEST_ERRORS=y;var _=function(t){var e,n,i={};return t.byterange&&(i.Range=(e=t.byterange,n=e.offset+e.length-1,"bytes="+e.offset+"-"+n)),i},b=function(t){t.forEach(function(t){t.abort()})},w=function(t,e){return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:y.TIMEOUT,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:y.ABORTED,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:y.FAILURE,xhr:e}:null},T=function(o,s,l){var u=[],c=0;return function(t,e){if(t&&(b(o),u.push(t)),(c+=1)===o.length){if(e.endOfAllRequests=Date.now(),u.length>0){var n=u.reduce(function(t,e){return e.code>t.code?e:t});return l(n,e)}return e.encryptedBytes?(r=e,a=l,(i=s).addEventListener("message",function t(e){if(e.data.source===r.requestId){i.removeEventListener("message",t);var n=e.data.decrypted;return r.bytes=new Uint8Array(n.bytes,n.byteOffset,n.byteLength),a(null,r)}}),void i.postMessage((0,h.createTransferableMessage)({source:r.requestId,encrypted:r.encryptedBytes,key:r.key.bytes,iv:r.key.iv}),[r.encryptedBytes.buffer,r.key.bytes.buffer])):l(null,e)}var i,r,a}},x=function(r,a){return function(t){var e,n,i;return r.stats=g.default.mergeOptions(r.stats,(n=(e=t).target,(i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-n.requestTime||0}).bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),a(t,r)}};r.mediaSegmentRequest=function(t,e,n,i,r,a){var o,s,l,u,c=[],h=T(c,n,a);if(i.key){var d=t(g.default.mergeOptions(e,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),(o=i,s=h,function(t,e){var n=e.response,i=w(t,e);if(i)return s(i,o);if(16!==n.byteLength)return s({status:e.status,message:"Invalid HLS key at URL: "+e.uri,code:y.FAILURE,xhr:e},o);var r=new DataView(n);return o.key.bytes=new Uint32Array([r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12)]),s(null,o)}));c.push(d)}if(i.map&&!i.map.bytes){var p=t(g.default.mergeOptions(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:_(i.map)}),(l=i,u=h,function(t,e){var n=e.response,i=w(t,e);return i?u(i,l):0===n.byteLength?u({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:y.FAILURE,xhr:e},l):(l.map.bytes=new Uint8Array(e.response),u(null,l))}));c.push(p)}var f,m,v=t(g.default.mergeOptions(e,{uri:i.resolvedUri,responseType:"arraybuffer",headers:_(i)}),(f=i,m=h,function(t,e){var n,i=e.response,r=w(t,e);return r?m(r,f):0===i.byteLength?m({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:y.FAILURE,xhr:e},f):(f.stats={bandwidth:(n=e).bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0},f.key?f.encryptedBytes=new Uint8Array(e.response):f.bytes=new Uint8Array(e.response),m(null,f))}));return v.addEventListener("progress",x(i,r)),c.push(v),function(){return b(c)}}}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./bin-utils":2}],8:[function(r,a,o){(function(t){Object.defineProperty(o,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function n(t){return t&&t.__esModule?t:{default:t}}var s=n(r("global/window")),l=n(r("./ranges")),u=n("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),c=["seeking","seeked","pause","playing","error"],i=function(){function o(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.tech_=t.tech,this.seekable=t.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,t.debug&&(this.logger_=u.default.log.bind(u.default,"playback-watcher ->")),this.logger_("initialize");var n=function(){return e.monitorCurrentTime_()},i=function(){return e.techWaiting_()},r=function(){return e.cancelTimer_()},a=function(){return e.fixesBadSeeks_()};this.tech_.on("seekablechanged",a),this.tech_.on("waiting",i),this.tech_.on(c,r),this.tech_.on("canplay",n),this.dispose=function(){e.logger_("dispose"),e.tech_.off("seekablechanged",a),e.tech_.off("waiting",i),e.tech_.off(c,r),e.tech_.off("canplay",n),e.checkCurrentTimeTimeout_&&s.default.clearTimeout(e.checkCurrentTimeTimeout_),e.cancelTimer_()}}return e(o,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&s.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=s.default.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var t=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===t&&(!e.length||t+l.default.SAFE_TIME_DELTA>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var t=this.tech_.seeking(),e=this.seekable(),n=this.tech_.currentTime(),i=void 0;t&&this.afterSeekableWindow_(e,n)&&(i=e.end(e.length-1));t&&this.beforeSeekableWindow_(e,n)&&(i=e.start(0)+l.default.SAFE_TIME_DELTA);return"undefined"!==typeof i&&(this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+l.default.printableRange(e)+". Seeking to "+i+"."),this.tech_.setCurrentTime(i),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var t=this.tech_.currentTime(),e=this.tech_.buffered(),n=l.default.findRange(e,t);return n.length&&t+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(t),this.logger_("Stopped at "+t+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(t,e)){var n=t.end(t.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var i=this.tech_.buffered(),r=l.default.findNextRange(i,e);if(this.videoUnderflow_(r,i,e))return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(r.length>0){var a=r.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+a+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,e),!0}return!1}},{key:"afterSeekableWindow_",value:function(t,e){return!!t.length&&e>t.end(t.length-1)+l.default.SAFE_TIME_DELTA}},{key:"beforeSeekableWindow_",value:function(t,e){return!!(t.length&&t.start(0)>0&&e<t.start(0)-l.default.SAFE_TIME_DELTA)}},{key:"videoUnderflow_",value:function(t,e,n){if(0===t.length){var i=this.gapFromVideoUnderflow_(e,n);if(i)return this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(t){var e=this.tech_.buffered(),n=this.tech_.currentTime(),i=l.default.findNextRange(e,n);this.cancelTimer_(),0!==i.length&&n===t&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",t,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+l.default.TIME_FUDGE_FACTOR),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(t,e){for(var n=l.default.findGaps(t),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(e-r<4&&e-r>2)return{start:r,end:a}}return null}},{key:"logger_",value:function(){}}]),o}();o.default=i,a.exports=o.default}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./ranges":12,"global/window":32}],9:[function(r,t,m){(function(t){Object.defineProperty(m,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function n(t){return t&&t.__esModule?t:{default:t}}var a=n(r("./resolve-url")),o="undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null,s=n(r("m3u8-parser")),l=n(r("global/window")),u=function(t,e,n){var i=e.slice();n=n||0;for(var r=Math.min(t.length,e.length+n),a=n;a<r;a++)i[a-n]=(0,o.mergeOptions)(t[a],i[a-n]);return i};m.updateSegments=u;var c=function(t,e){t.resolvedUri||(t.resolvedUri=(0,a.default)(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=(0,a.default)(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=(0,a.default)(e,t.map.uri))};m.resolveSegmentUris=c;var h=function(t,e){var n=(0,o.mergeOptions)(t,{}),i=n.playlists.filter(function(t){return t.uri===e.uri})[0];if(!i)return null;if(i.segments&&e.segments&&i.segments.length===e.segments.length&&i.mediaSequence===e.mediaSequence)return null;var r=(0,o.mergeOptions)(i,e);i.segments&&(r.segments=u(i.segments,e.segments,e.mediaSequence-i.mediaSequence)),r.segments.forEach(function(t){c(t,r.resolvedUri)});for(var a=0;a<n.playlists.length;a++)n.playlists[a].uri===e.uri&&(n.playlists[a]=r);return n.playlists[e.uri]=r,n};m.updateMaster=h;var d=function(t){for(var e=t.playlists.length;e--;){var n=t.playlists[e];(t.playlists[n.uri]=n).resolvedUri=(0,a.default)(t.uri,n.uri),n.attributes||(n.attributes={},o.log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}};m.setupMediaPlaylists=d;var p=function(r){["AUDIO","SUBTITLES"].forEach(function(t){for(var e in r.mediaGroups[t])for(var n in r.mediaGroups[t][e]){var i=r.mediaGroups[t][e][n];i.uri&&(i.resolvedUri=(0,a.default)(r.uri,i.uri))}})};m.resolveMediaGroupUris=p;var f=function(t,e){var n=t.segments[t.segments.length-1];return e&&n&&n.duration?1e3*n.duration:500*(t.targetDuration||10)};m.refreshDelay=f;var i=function(t){function r(t,e,n){var i=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.srcUrl=t,this.hls_=e,this.withCredentials=n,!this.srcUrl)throw new Error("A non-empty playlist URL is required");this.state="HAVE_NOTHING",this.on("mediaupdatetimeout",function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.hls_.xhr({uri:(0,a.default)(i.master.uri,i.media().uri),withCredentials:i.withCredentials},function(t,e){if(i.request)return t?i.playlistRequestError(i.request,i.media().uri,"HAVE_METADATA"):void i.haveMetadata(i.request,i.media().uri)}))})}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,o.EventTarget),e(r,[{key:"playlistRequestError",value:function(t,e,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[e],status:t.status,message:"HLS playlist request error at URL: "+e,responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(t,e){var n=this;this.request=null,this.state="HAVE_METADATA";var i=new s.default.Parser;i.push(t.responseText),i.end(),i.manifest.uri=e,i.manifest.attributes=i.manifest.attributes||{};var r=h(this.master,i.manifest);this.targetDuration=i.manifest.targetDuration,r?(this.master=r,this.media_=this.master.playlists[i.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(l.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=l.default.setTimeout(function(){n.trigger("mediaupdatetimeout")},f(this.media(),!!r))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),l.default.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}},{key:"media",value:function(n){var i=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"===typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}var t=!this.media_||n.uri!==this.media_.uri;if(this.master.playlists[n.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,void(t&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(t){if(this.state="SWITCHING_MEDIA",this.request){if((0,a.default)(this.master.uri,n.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:(0,a.default)(this.master.uri,n.uri),withCredentials:this.withCredentials},function(t,e){if(i.request){if(t)return i.playlistRequestError(i.request,n.uri,r);i.haveMetadata(e,n.uri),"HAVE_MASTER"===r?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest(),l.default.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(t){var e=this;l.default.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(t){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=l.default.setTimeout(function(){return e.load()},i)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var i=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,e){if(i.request){if(i.request=null,t)return i.error={status:e.status,message:"HLS playlist request error at URL: "+i.srcUrl,responseText:e.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");var n=new s.default.Parser;return n.push(e.responseText),n.end(),i.state="HAVE_MASTER",n.manifest.uri=i.srcUrl,n.manifest.playlists?(i.master=n.manifest,d(i.master),p(i.master),i.trigger("loadedplaylist"),void(i.request||i.media(n.manifest.playlists[0]))):(i.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:l.default.location.href,playlists:[{uri:i.srcUrl}]},i.master.playlists[i.srcUrl]=i.master.playlists[0],i.master.playlists[0].resolvedUri=i.srcUrl,i.master.playlists[0].attributes=i.master.playlists[0].attributes||{},i.haveMetadata(e,i.srcUrl),i.trigger("loadedmetadata"))}})}}]),r}();m.default=i}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./resolve-url":15,"global/window":32,"m3u8-parser":33}],10:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var v=i(t("./config")),g=i(t("./playlist")),r=t("./util/codecs.js"),a=function(t,e){var n;return t&&(n=C.getComputedStyle(t))?n[e]:""},y=function(t,i){var r=t.slice();t.sort(function(t,e){var n=i(t,e);return 0===n?r.indexOf(t)-r.indexOf(e):n})},p=function(t,e){var n=void 0,i=void 0;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||C.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),n-(i=i||C.Number.MAX_VALUE)};n.comparePlaylistBandwidth=p;n.comparePlaylistResolution=function(t,e){var n=void 0,i=void 0;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||C.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),n===(i=i||C.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:n-i};var o=function(t,e,n,i){var r=t.playlists.map(function(t){var e,n;return e=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,n=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height,{bandwidth:t.attributes.BANDWIDTH||C.Number.MAX_VALUE,width:e,height:n,playlist:t}});y(r,function(t,e){return t.bandwidth-e.bandwidth});var a=(r=r.filter(function(t){return!g.default.isIncompatible(t.playlist)})).filter(function(t){return g.default.isEnabled(t.playlist)});a.length||(a=r.filter(function(t){return!g.default.isDisabled(t.playlist)}));var o=a.filter(function(t){return t.bandwidth*v.default.BANDWIDTH_VARIANCE<e}),s=o[o.length-1],l=o.filter(function(t){return t.bandwidth===s.bandwidth})[0],u=o.filter(function(t){return t.width&&t.height});y(u,function(t,e){return t.width-e.width});var c=u.filter(function(t){return t.width===n&&t.height===i});s=c[c.length-1];var h=c.filter(function(t){return t.bandwidth===s.bandwidth})[0],d=void 0,p=void 0,f=void 0;h||(p=(d=u.filter(function(t){return t.width>n||t.height>i})).filter(function(t){return t.width===d[0].width&&t.height===d[0].height}),s=p[p.length-1],f=p.filter(function(t){return t.bandwidth===s.bandwidth})[0]);var m=f||h||l||a[0]||r[0];return m?m.playlist:null};n.simpleSelector=o;n.lastBandwidthSelector=function(){return o(this.playlists.master,this.systemBandwidth,parseInt(a(this.tech_.el(),"width"),10),parseInt(a(this.tech_.el(),"height"),10))};n.movingAverageBandwidthSelector=function(t){var e=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){return e<0&&(e=this.systemBandwidth),e=t*this.systemBandwidth+(1-t)*e,o(this.playlists.master,e,parseInt(a(this.tech_.el(),"width"),10),parseInt(a(this.tech_.el(),"height"),10))}};n.minRebufferMaxBandwidthSelector=function(t){var e=t.master,n=t.currentTime,i=t.bandwidth,r=t.duration,a=t.segmentDuration,o=t.timeUntilRebuffer,s=t.currentTimeline,l=t.syncController,u=e.playlists.filter(function(t){return!g.default.isIncompatible(t)}),c=u.filter(g.default.isEnabled);c.length||(c=u.filter(function(t){return!g.default.isDisabled(t)}));var h=c.filter(g.default.hasAttribute.bind(null,"BANDWIDTH")).map(function(t){var e=l.getSyncPoint(t,r,s,n)?1:2;return{playlist:t,rebufferingImpact:g.default.estimateSegmentRequestTime(a,i,t)*e-o}}),d=h.filter(function(t){return t.rebufferingImpact<=0});return y(d,function(t,e){return p(e.playlist,t.playlist)}),d.length?d[0]:(y(h,function(t,e){return t.rebufferingImpact-e.rebufferingImpact}),h[0]||null)};n.lowestBitrateCompatibleVariantSelector=function(){var t=this.playlists.master.playlists.filter(g.default.isEnabled);return y(t,function(t,e){return p(t,e)}),t.filter(function(t){return(0,r.parseCodecs)(t.attributes.CODECS).videoCodec})[0]||null}},{"./config":3,"./playlist":11,"./util/codecs.js":19}],11:[function(S,t,A){(function(t){Object.defineProperty(A,"__esModule",{value:!0});var e,r="undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null,n=S("global/window"),i=(e=n)&&e.__esModule?e:{default:e},a=function(t,e,n){var i,r;return"undefined"===typeof e&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence?0:(i=function(t,e){var n=0,i=e-t.mediaSequence,r=t.segments[i];if(r){if("undefined"!==typeof r.start)return{result:r.start,precise:!0};if("undefined"!==typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if("undefined"!==typeof(r=t.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=r.duration,"undefined"!==typeof r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(t,e)).precise?i.result:(r=function(t,e){for(var n=0,i=void 0,r=e-t.mediaSequence;r<t.segments.length;r++){if("undefined"!==typeof(i=t.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,"undefined"!==typeof i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(t,e)).precise?r.result:i.result+n},o=function(t,e,n){if(!t)return 0;if("number"!==typeof n&&(n=0),"undefined"===typeof e){if(t.totalDuration)return t.totalDuration;if(!t.endList)return i.default.Infinity}return a(t,e,n)};A.duration=o;var l=function(t,e,n){var i=0;if(e>n){var r=[n,e];e=r[0],n=r[1]}if(e<0){for(var a=e;a<Math.min(0,n);a++)i+=t.targetDuration;e=0}for(a=e;a<n;a++)i+=t.segments[a].duration;return i};A.sumDurations=l;var s=function(t){if(!t.segments.length)return 0;for(var e=t.segments.length-1,n=t.segments[e].duration||t.targetDuration,i=n+2*t.targetDuration;e--&&!((n+=t.segments[e].duration)>=i););return Math.max(0,e)};A.safeLiveIndex=s;var u=function(t,e,n){if(!t||!t.segments)return null;if(t.endList)return o(t);if(null===e)return null;e=e||0;var i=n?s(t):t.segments.length;return a(t,t.mediaSequence+i,e)};A.playlistEnd=u;var c=function(t,e){var n=e||0,i=u(t,e,!0);return null===i?(0,r.createTimeRange)():(0,r.createTimeRange)(n,i)};A.seekable=c;var h=function(t){return t-Math.floor(t)===0},d=function(t,e){if(h(e))return e+.1*t;for(var n=e.toString().split(".")[1].length,i=1;i<=n;i++){var r=Math.pow(10,i),a=e*r;if(h(a)||i===n)return(a+t)/r}},p=d.bind(null,1),f=d.bind(null,-1),m=function(t,e,n,i){var r=void 0,a=void 0,o=t.segments.length,s=e-i;if(s<0){if(n>0)for(r=n-1;r>=0;r--)if(a=t.segments[r],(s+=f(a.duration))>0)return{mediaIndex:r,startTime:i-l(t,n,r)};return{mediaIndex:0,startTime:e}}if(n<0){for(r=n;r<0;r++)if((s-=t.targetDuration)<0)return{mediaIndex:0,startTime:e};n=0}for(r=n;r<o;r++)if(a=t.segments[r],(s-=p(a.duration))<0)return{mediaIndex:r,startTime:i+l(t,n,r)};return{mediaIndex:o-1,startTime:e}};A.getMediaInfoForTime=m;var v=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()};A.isBlacklisted=v;var g=function(t){return t.excludeUntil&&t.excludeUntil===1/0};A.isIncompatible=g;var y=function(t){var e=v(t);return!t.disabled&&!e};A.isEnabled=y;var _=function(t){return t.disabled};A.isDisabled=_;var b=function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1};A.isAes=b;var w=function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].map)return!0;return!1};A.isFmp4=w;var T=function(t,e){return e.attributes&&e.attributes[t]};A.hasAttribute=T;var x=function(t,e,n){var i=arguments.length<=3||void 0===arguments[3]?0:arguments[3];return T("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-8*i)/e:NaN};A.estimateSegmentRequestTime=x;var E=function(t,e){if(1===t.playlists.length)return!0;var n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter(function(t){return!!y(t)&&(t.attributes.BANDWIDTH||0)<n}).length};A.isLowestEnabledRendition=E,A.default={duration:o,seekable:c,safeLiveIndex:s,getMediaInfoForTime:m,isEnabled:y,isDisabled:_,isBlacklisted:v,isIncompatible:g,playlistEnd:u,isAes:b,isFmp4:w,hasAttribute:T,estimateSegmentRequestTime:x,isLowestEnabledRendition:E}}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"global/window":32}],12:[function(t,r,a){(function(t){Object.defineProperty(a,"__esModule",{value:!0});var p=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};var e,n="undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null,f=(e=n)&&e.__esModule?e:{default:e},i=function(t,e){var n=[],i=void 0;if(t&&t.length)for(i=0;i<t.length;i++)e(t.start(i),t.end(i))&&n.push([t.start(i),t.end(i)]);return f.default.createTimeRanges(n)},m=function(t,e){var n=null,i=null,r=0,a=[],o=[];if(!t||!t.length||!e||!e.length)return f.default.createTimeRange();for(var s=t.length;s--;)a.push({time:t.start(s),type:"start"}),a.push({time:t.end(s),type:"end"});for(s=e.length;s--;)a.push({time:e.start(s),type:"start"}),a.push({time:e.end(s),type:"end"});for(a.sort(function(t,e){return t.time-e.time}),s=0;s<a.length;s++)"start"===a[s].type?2===++r&&(n=a[s].time):"end"===a[s].type&&1===--r&&(i=a[s].time),null!==n&&null!==i&&(o.push([n,i]),i=n=null);return f.default.createTimeRanges(o)};a.default={findRange:function(t,n){return i(t,function(t,e){return t-1/30<=n&&e+1/30>=n})},findNextRange:function(t,e){return i(t,function(t){return t-1/30>=e})},findGaps:function(t){if(t.length<2)return f.default.createTimeRanges();for(var e=[],n=1;n<t.length;n++){var i=t.end(n-1),r=t.start(n);e.push([i,r])}return f.default.createTimeRanges(e)},findSoleUncommonTimeRangesEnd:function(t,e){var n=void 0,i=void 0,r=void 0,a=[],o=[],s=function(t){return t[0]<=r&&t[1]>=r};if(t)for(n=0;n<t.length;n++)i=t.start(n),r=t.end(n),o.push([i,r]);if(e)for(n=0;n<e.length;n++)i=e.start(n),r=e.end(n),o.some(s)||a.push(r);return 1!==a.length?null:a[0]},getSegmentBufferedPercent:function(t,e,n,i){var r,a,o,s,l,u=t+e,c=f.default.createTimeRanges([[t,u]]),h=f.default.createTimeRanges([[(r=t,a=[n,u],o=p(a,2),s=o[0],l=o[1],Math.min(Math.max(s,r),l)),u]]);if(h.start(0)===h.end(0))return 0;var d=function(t,e,n,i){for(var r=e.end(0)-e.start(0),a=r-(t.end(0)-t.start(0)),o=m(t,i),s=m(e,i),l=0,u=0,c=o.length;c--;)l+=o.end(c)-o.start(c),o.start(c)===n&&(l+=a);for(c=s.length;c--;)u+=s.end(c)-s.start(c);return Math.max(l,u)/r*100}(h,c,n,i);return isNaN(d)||d===1/0||d===-1/0?0:d},TIME_FUDGE_FACTOR:1/30,SAFE_TIME_DELTA:.1,printableRange:function(t){var e=[];if(!t||!t.length)return"";for(var n=0;n<t.length;n++)e.push(t.start(n)+" => "+t.end(n));return e.join(", ")},timeUntilRebuffer:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return((t.length?t.end(t.length-1):0)-e)/n}},r.exports=a.default}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{}],13:[function(t,i,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e,n="undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null,c=(e=n)&&e.__esModule?e:{default:e},h={errorInterval:30,getSource:function(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}};r.default=function(t){!function e(n,t){var i=0,r=0,a=c.default.mergeOptions(h,t);n.ready(function(){n.trigger({type:"usage",name:"hls-error-reload-initialized"})});var o=function(){r&&n.currentTime(r)},s=function(t){null!==t&&void 0!==t&&(r=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",o),n.src(t),n.trigger({type:"usage",name:"hls-error-reload"}),n.play())},l=function(){if(Date.now()-i<1e3*a.errorInterval)n.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(a.getSource&&"function"===typeof a.getSource)return i=Date.now(),a.getSource.call(n,s);c.default.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function t(){n.off("loadedmetadata",o),n.off("error",l),n.off("dispose",t)};n.on("error",l),n.on("dispose",u),n.reloadSourceOnError=function(t){u(),e(n,t)}}(this,t)},i.exports=r.default}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u=t("./playlist.js"),i=function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r,a,o,s=e.masterPlaylistController_.fastQualityChange_.bind(e.masterPlaylistController_);if(n.attributes.RESOLUTION){var l=n.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=n.attributes.BANDWIDTH,this.id=i,this.enabled=(r=e.playlists,a=n.uri,o=s,function(t){var e=r.master.playlists[a],n=(0,u.isIncompatible)(e),i=(0,u.isEnabled)(e);return"undefined"===typeof t?i:(t?delete e.disabled:e.disabled=!0,t===i||n||(o(),t?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),t)})};n.default=function(n){var t=n.playlists;n.representations=function(){return t.master.playlists.filter(function(t){return!(0,u.isIncompatible)(t)}).map(function(t,e){return new i(n,t,t.uri)})}},e.exports=n.default},{"./playlist.js":11}],15:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(t("url-toolkit")),a=i(t("global/window"));n.default=function(t,e){return/^[a-z]+:/i.test(e)?e:(/\/\//i.test(t)||(t=r.default.buildAbsoluteURL(a.default.location.href,t)),r.default.buildAbsoluteURL(t,e))},e.exports=n.default},{"global/window":32,"url-toolkit":63}],16:[function(y,t,_){(function(t){Object.defineProperty(_,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function n(t){return t&&t.__esModule?t:{default:t}}var h=n(y("./playlist")),r=n("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),a=n(y("./source-updater")),u=n(y("./config")),s=n(y("global/window")),l=n(y("videojs-contrib-media-sources/es5/remove-cues-from-track.js")),o=y("./bin-utils"),c=y("./media-segment-request"),d=y("./ranges"),p=y("./playlist-selectors"),f=function(t,e,n){if(!t||!e)return!1;var i=n===t.segments.length;return t.endList&&"open"===e.readyState&&i},m=function(t){return"number"===typeof t&&isFinite(t)},v=function(t,e,n){return"main"===t&&e&&n?n.containsAudio||n.containsVideo?e.containsVideo&&!n.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.containsVideo&&n.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null};_.illegalMediaSwitch=v;var g=function(t,e,n){var i=void 0;return i=t.length&&t.start(0)>0&&t.start(0)<e?t.start(0):e-30,Math.min(i,e-n)};_.safeBackBufferTrimTime=g;var i=function(t){function i(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(i.prototype),"constructor",this).call(this),!t)throw new TypeError("Initialization settings are required");if("function"!==typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");this.state="INIT",this.bandwidth=t.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.hasPlayed_=t.hasPlayed,this.currentTime_=t.currentTime,this.seekable_=t.seekable,this.seeking_=t.seeking,this.duration_=t.duration,this.mediaSource_=t.mediaSource,this.hls_=t.hls,this.loaderType_=t.loaderType,this.startingMedia_=void 0,this.segmentMetadataTrack_=t.segmentMetadataTrack,this.goalBufferLength_=t.goalBufferLength,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.mimeType_=null,this.sourceUpdater_=null,this.xhrOptions_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.decrypter_=t.decrypter,this.syncController_=t.syncController,this.syncPoint_={segmentIndex:0,time:0},this.syncController_.on("syncinfoupdate",function(){return e.trigger("syncinfoupdate")}),this.mediaSource_.addEventListener("sourceopen",function(){return e.ended_=!1}),this.fetchAtBuffer_=!1,n.debug&&(this.logger_=r.default.log.bind(r.default,"segment-loader",this.loaderType_,"->"))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,r["default"].EventTarget),e(i,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(t){return"undefined"!==typeof t&&(this.error_=t),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():r.default.createTimeRanges()}},{key:"initSegment",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!t)return null;var n=(0,o.initSegmentId)(t),i=this.initSegments_[n];return e&&!i&&t.bytes&&(this.initSegments_[n]=i={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes}),i||t}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new a.default(this.mediaSource_,this.mimeType_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t){var n=this.playlist_,i=this.pendingSegment_;if(this.playlist_=t,this.xhrOptions_=e,this.hasPlayed_()||(t.syncInfo={mediaSequence:t.mediaSequence,time:0}),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(n&&n.uri===t.uri){var r=t.mediaSequence-n.mediaSequence;this.logger_("mediaSequenceDiff",r),null!==this.mediaIndex&&(this.mediaIndex-=r),i&&(i.mediaIndex-=r,i.mediaIndex>=0&&(i.segment=t.segments[i.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,t)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(s.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(t){this.mimeType_||(this.mimeType_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_()),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(t,e){this.sourceUpdater_&&this.sourceUpdater_.remove(t,e),(0,l.default)(t,e,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&s.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=s.default.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&s.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=s.default.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t)f(this.playlist_,this.mediaSource_,t.mediaIndex)?this.endOfStream():(t.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((t.timeline!==this.currentTimeline_||null!==t.startOfSegment&&t.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),t.timestampOffset=t.startOfSegment),this.loadSegment_(t))}}},{key:"checkBuffer_",value:function(t,e,n,i,r,a){var o=0,s=void 0;t.length&&(o=t.end(t.length-1));var l,u=Math.max(0,o-r);if(!e.segments.length)return null;if(u>=this.goalBufferLength_())return null;if(!i&&u>=1)return null;if(this.logger_("checkBuffer_","mediaIndex:",n,"hasPlayed:",i,"currentTime:",r,"syncPoint:",a,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",u),null===a)return n=this.getSyncSegmentCandidate_(e),this.logger_("getSync","mediaIndex:",n),this.generateSegmentInfo_(e,n,null,!0);if(null!==n){this.logger_("walkForward","mediaIndex:",n+1);var c=e.segments[n];return s=c&&c.end?c.end:o,this.generateSegmentInfo_(e,n+1,s,!1)}this.fetchAtBuffer_?(n=(l=h.default.getMediaInfoForTime(e,o,a.segmentIndex,a.time)).mediaIndex,s=l.startTime):(n=(l=h.default.getMediaInfoForTime(e,r,a.segmentIndex,a.time)).mediaIndex,s=l.startTime);return this.logger_("getMediaIndexForTime","mediaIndex:",n,"startOfSegment:",s),this.generateSegmentInfo_(e,n,s,!1)}},{key:"getSyncSegmentCandidate_",value:function(t){var e=this;if(-1===this.currentTimeline_)return 0;var n=t.segments.map(function(t,e){return{timeline:t.timeline,segmentIndex:e}}).filter(function(t){return t.timeline===e.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(t.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(t,e,n,i){if(e<0||e>=t.segments.length)return null;var r=t.segments[e];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:e,isSyncRequest:i,startOfSegment:n,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function(t){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return!1;var e=this.currentTime_(),n=t.bandwidth,i=this.pendingSegment_.duration,r=h.default.estimateSegmentRequestTime(i,n,this.playlist_,t.bytesReceived),a=(0,d.timeUntilRebuffer)(this.buffered_(),e,this.hls_.tech_.playbackRate())-1;if(r<=a)return!1;var o=(0,p.minRebufferMaxBandwidthSelector)({master:this.hls_.playlists.master,currentTime:e,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var s=r-a-o.rebufferingImpact,l=.5;return a<=d.TIME_FUDGE_FACTOR&&(l=1),!o.playlist||o.playlist.uri===this.playlist_.uri||s<l?!1:(this.bandwidth=o.playlist.attributes.BANDWIDTH*u.default.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(t,e){this.pendingSegment_&&e.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(e.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(t){this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),t.abortRequests=(0,c.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(t),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(t){var e=g(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);e>0&&this.remove(0,e)}},{key:"createSimplifiedSegmentObj_",value:function(t){var e=t.segment,n={resolvedUri:e.resolvedUri,byterange:e.byterange,requestId:t.requestId};if(e.key){var i=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);n.key={resolvedUri:e.key.resolvedUri,iv:i}}return e.map&&(n.map=this.initSegment(e.map)),n}},{key:"segmentRequestFinished_",value:function(t,e){if(this.mediaRequests+=1,e.stats&&(this.mediaBytesTransferred+=e.stats.bytesReceived,this.mediaTransferDuration+=e.stats.roundTripTime),this.pendingSegment_){if(e.requestId===this.pendingSegment_.requestId){if(t)return this.pendingSegment_=null,this.state="READY",t.code===c.REQUEST_ERRORS.ABORTED?void(this.mediaRequestsAborted+=1):(this.pause(),t.code===c.REQUEST_ERRORS.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error")));this.bandwidth=e.stats.bandwidth,this.roundTrip=e.stats.roundTripTime,e.map&&(e.map=this.initSegment(e.map,!0)),this.processSegmentResponse_(e)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(t){var e=this.pendingSegment_;e.bytes=t.bytes,t.map&&(e.segment.map.bytes=t.map.bytes),e.endOfAllRequests=t.endOfAllRequests,this.handleSegment_()}},{key:"handleSegment_",value:function(){var n=this;if(this.pendingSegment_){var t=this.pendingSegment_,i=t.segment,e=this.syncController_.probeSegmentInfo(t);"undefined"===typeof this.startingMedia_&&e&&(e.containsAudio||e.containsVideo)&&(this.startingMedia_={containsAudio:e.containsAudio,containsVideo:e.containsVideo});var r=v(this.loaderType_,this.startingMedia_,e);if(r)return this.error({message:r,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset"));var a=this.syncController_.mappingForTimeline(t.timeline);null!==a&&this.trigger({type:"segmenttimemapping",mapping:a}),this.state="APPENDING",i.map&&function(){var t=(0,o.initSegmentId)(i.map);if(!n.activeInitSegmentId_||n.activeInitSegmentId_!==t){var e=n.initSegment(i.map);n.sourceUpdater_.appendBuffer(e.bytes,function(){n.activeInitSegmentId_=t})}}(),t.byteLength=t.bytes.byteLength,"number"===typeof i.start&&"number"===typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration,this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_,e=t.segment,n=null!==this.mediaIndex;(this.pendingSegment_=null,this.recordThroughput_(t),this.addSegmentMetadataCue_(t),this.state="READY",this.mediaIndex=t.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate"),e.end&&this.currentTime_()-e.end>3*t.playlist.targetDuration)?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),f(t.playlist,this.mediaSource_,t.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(t){var e=this.throughput.rate,n=Date.now()-t.endOfAllRequests+1,i=Math.floor(t.byteLength/n*8*1e3);this.throughput.rate+=(i-e)/++this.throughput.count}},{key:"logger_",value:function(){}},{key:"addSegmentMetadataCue_",value:function(t){if(this.segmentMetadataTrack_){var e=t.segment,n=e.start,i=e.end;if(m(n)&&m(i)){(0,l.default)(n,i,this.segmentMetadataTrack_);var r=s.default.WebKitDataCue||s.default.VTTCue,a={uri:t.uri,timeline:t.timeline,playlist:t.playlist.uri,start:n,end:i},o=new r(n,i,JSON.stringify(a));o.value=a,this.segmentMetadataTrack_.addCue(o)}}}}]),i}();_.default=i}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./bin-utils":2,"./config":3,"./media-segment-request":7,"./playlist":11,"./playlist-selectors":10,"./ranges":12,"./source-updater":17,"global/window":32,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],17:[function(t,s,l){(function(t){Object.defineProperty(l,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var n,i="undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null,a=(n=i)&&n.__esModule?n:{default:n},o=function(){},r=function(){function r(t,e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=function(){n.sourceBuffer_=t.addSourceBuffer(e),n.onUpdateendCallback_=function(){var t=n.pendingCallback_;n.pendingCallback_=null,t&&t(),n.runCallback_()},n.sourceBuffer_.addEventListener("updateend",n.onUpdateendCallback_),n.runCallback_()};this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,"closed"===t.readyState?t.addEventListener("sourceopen",i):i()}return e(r,[{key:"abort",value:function(t){var e=this;this.processedAppend_&&this.queueCallback_(function(){e.sourceBuffer_.abort()},t)}},{key:"appendBuffer",value:function(t,e){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(t)},e)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:a.default.createTimeRanges()}},{key:"remove",value:function(t,e){var n=this;this.processedAppend_&&this.queueCallback_(function(){n.sourceBuffer_.remove(t,e)},o)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(t){var e=this;return"undefined"!==typeof t&&(this.queueCallback_(function(){e.sourceBuffer_.timestampOffset=t}),this.timestampOffset_=t),this.timestampOffset_}},{key:"queueCallback_",value:function(t,e){this.callbacks_.push([t.bind(this),e]),this.runCallback_()}},{key:"runCallback_",value:function(){var t=void 0;!this.updating()&&this.callbacks_.length&&(t=this.callbacks_.shift(),this.pendingCallback_=t[1],t[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),r}();l.default=r,s.exports=l.default}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{}],18:[function(s,t,c){(function(t){Object.defineProperty(c,"__esModule",{value:!0});var n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function e(t){return t&&t.__esModule?t:{default:t}}var r=e(s("mux.js/lib/mp4/probe")),a=s("mux.js/lib/tools/ts-inspector.js"),u=s("./playlist"),i=e("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),l=[{name:"VOD",run:function(t,e,n,i,r){if(n===1/0)return null;return{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(t,e,n,i,r){return t.datetimeToDisplayTime&&e.dateTimeObject?{time:e.dateTimeObject.getTime()/1e3+t.datetimeToDisplayTime,segmentIndex:0}:null}},{name:"Segment",run:function(t,e,n,i,r){var a=e.segments||[],o=null,s=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.timeline===i&&"undefined"!==typeof u.start){var c=Math.abs(r-u.start);if(null!==s&&s<c)break;(!o||null===s||s>=c)&&(s=c,o={time:u.start,segmentIndex:l})}}return o}},{name:"Discontinuity",run:function(t,e,n,i,r){var a=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length)for(var o=null,s=0;s<e.discontinuityStarts.length;s++){var l=e.discontinuityStarts[s],u=e.discontinuitySequence+s+1,c=t.discontinuities[u];if(c){var h=Math.abs(r-c.time);if(null!==o&&o<h)break;(!a||null===o||o>=h)&&(o=h,a={time:c.time,segmentIndex:l})}}return a}},{name:"Playlist",run:function(t,e,n,i,r){return e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence}:null}}];c.syncPointStrategies=l;var o=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.inspectCache_=void 0,this.timelines=[],this.discontinuities=[],this.datetimeToDisplayTime=null,t.debug&&(this.logger_=i.default.log.bind(i.default,"sync-controller ->"))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i["default"].EventTarget),n(e,[{key:"getSyncPoint",value:function(t,e,n,i){var r=this.runStrategies_(t,e,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}},{key:"getExpiredTime",value:function(t,e){if(!t||!t.segments)return null;var n=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+(0,u.sumDurations)(t,i.segmentIndex,0))}},{key:"runStrategies_",value:function(t,e,n,i){for(var r=[],a=0;a<l.length;a++){var o=l[a],s=o.run(this,t,e,n,i);s&&(s.strategy=o.name,r.push({strategy:o.name,syncPoint:s}),this.logger_("syncPoint found via <"+o.name+">:",s))}return r}},{key:"selectSyncPoint_",value:function(t,e){for(var n=t[0].syncPoint,i=Math.abs(t[0].syncPoint[e.key]-e.value),r=t[0].strategy,a=1;a<t.length;a++){var o=Math.abs(t[a].syncPoint[e.key]-e.value);o<i&&(i=o,n=t[a].syncPoint,r=t[a].strategy)}return this.logger_("syncPoint with strategy <"+r+"> chosen: ",n),n}},{key:"saveExpiredSegmentInfo",value:function(t,e){for(var n=e.mediaSequence-t.mediaSequence-1;n>=0;n--){var i=t.segments[n];if(i&&"undefined"!==typeof i.start){e.syncInfo={mediaSequence:t.mediaSequence+n,time:i.start},this.logger_("playlist sync:",e.syncInfo),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(t){if(!this.datetimeToDisplayTime&&t.dateTimeObject){var e=t.dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-e}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(t){var e=t.segment,n=t.playlist,i=void 0;return(i=e.map?this.probeMp4Segment_(t):this.probeTsSegment_(t))&&this.calculateSegmentTimeMapping_(t,i)&&(this.saveDiscontinuitySyncInfo_(t),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+t.mediaIndex,time:e.start})),i}},{key:"probeMp4Segment_",value:function(t){var e=t.segment,n=r.default.timescale(e.map.bytes),i=r.default.startTime(n,t.bytes);return null!==t.timestampOffset&&(t.timestampOffset-=i),{start:i,end:i+e.duration}}},{key:"probeTsSegment_",value:function(t){var e=(0,a.inspect)(t.bytes,this.inspectCache_),n=void 0,i=void 0;return e?(e.video&&2===e.video.length?(this.inspectCache_=e.video[1].dts,n=e.video[0].dtsTime,i=e.video[1].dtsTime):e.audio&&2===e.audio.length&&(this.inspectCache_=e.audio[1].dts,n=e.audio[0].dtsTime,i=e.audio[1].dtsTime),{start:n,end:i,containsVideo:e.video&&2===e.video.length,containsAudio:e.audio&&2===e.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(t){return"undefined"===typeof this.timelines[t]?null:this.timelines[t].time}},{key:"mappingForTimeline",value:function(t){return"undefined"===typeof this.timelines[t]?null:this.timelines[t].mapping}},{key:"calculateSegmentTimeMapping_",value:function(t,e){var n=t.segment,i=this.timelines[t.timeline];if(null!==t.timestampOffset)this.logger_("tsO:",t.timestampOffset),i={time:t.startOfSegment,mapping:t.startOfSegment-e.start},this.timelines[t.timeline]=i,this.trigger("timestampoffset"),n.start=t.startOfSegment,n.end=e.end+i.mapping;else{if(!i)return!1;n.start=e.start+i.mapping,n.end=e.end+i.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(t){var e=t.playlist,n=t.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(e.discontinuityStarts.length)for(var i=0;i<e.discontinuityStarts.length;i++){var r=e.discontinuityStarts[i],a=e.discontinuitySequence+i+1,o=r-t.mediaIndex,s=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>s){var l=void 0;l=o<0?n.start-(0,u.sumDurations)(e,t.mediaIndex,r):n.end+(0,u.sumDurations)(e,t.mediaIndex+1,r),this.discontinuities[a]={time:l,accuracy:s}}}}},{key:"logger_",value:function(){}}]),e}();c.default=o}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./playlist":11,"mux.js/lib/mp4/probe":57,"mux.js/lib/tools/ts-inspector.js":59}],19:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});n.parseCodecs=function(){var t,e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],n={codecCount:0};return n.codecCount=e.split(",").length,n.codecCount=n.codecCount||2,(t=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(e))&&(n.videoCodec=t[2],n.videoObjectTypeIndicator=t[3]),n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),n.audioProfile=n.audioProfile&&n.audioProfile[2],n}},{}],20:[function(h,d,p){(function(t){Object.defineProperty(p,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function n(t){return t&&t.__esModule?t:{default:t}}var i=n(h("./segment-loader")),o=n("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),s=n(h("global/window")),r=n(h("videojs-contrib-media-sources/es5/remove-cues-from-track.js")),l=h("./bin-utils"),u=new Uint8Array("\n\n".split("").map(function(t){return t.charCodeAt(0)})),c=function(t){return String.fromCharCode.apply(null,t)},a=function(t){function n(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,t,e),this.mediaSource_=null,this.subtitlesTrack_=null}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,i["default"]),e(n,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return o.default.createTimeRanges();var t=this.subtitlesTrack_.cues,e=t[0].startTime,n=t[t.length-1].startTime;return o.default.createTimeRanges([[e,n]])}},{key:"initSegment",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!t)return null;var n=(0,l.initSegmentId)(t),i=this.initSegments_[n];if(e&&!i&&t.bytes){var r=u.byteLength+t.bytes.byteLength,a=new Uint8Array(r);a.set(t.bytes),a.set(u,t.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:a}}return i||t}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(t){return"undefined"===typeof t||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(t,e){(0,r.default)(t,e,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var t=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e=this.skipEmptySegments_(e)){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline)){return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(e)}}},{key:"skipEmptySegments_",value:function(t){for(;t&&t.segment.empty;)t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest);return t}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var t,n=this.pendingSegment_,i=n.segment;if("function"!==typeof s.default.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var r=(t=function(){e.handleSegment_()},e.state="WAITING_ON_VTTJS",e.subtitlesTrack_.tech_.one("vttjsloaded",t),e.subtitlesTrack_.tech_.one("vttjserror",function(){e.subtitlesTrack_.tech_.off("vttjsloaded",t),e.error({message:"Error loading vtt.js"}),e.state="READY",e.pause(),e.trigger("error")}),{v:void 0});if("object"===typeof r)return r.v}i.requested=!0;try{this.parseVTTCues_(n)}catch(t){return this.error({message:t.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=i.duration,n.cues.length&&this.remove(n.cues[0].endTime,n.cues[n.cues.length-1].endTime),n.cues.forEach(function(t){e.subtitlesTrack_.addCue(t)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(e){var t=void 0,n=!1;"function"===typeof s.default.TextDecoder?t=new s.default.TextDecoder("utf8"):(t=s.default.WebVTT.StringDecoder(),n=!0);var i=new s.default.WebVTT.Parser(s.default,s.default.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=function(t){return e.timestampmap=t},i.onparsingerror=function(t){o.default.log.warn("Error encountered when parsing cues: "+t.message)},e.segment.map){var r=e.segment.map.bytes;n&&(r=c(r)),i.parse(r)}var a=e.bytes;n&&(a=c(a)),i.parse(a),i.flush()}},{key:"updateTimeMapping_",value:function(t,e,n){var i=t.segment;if(e)if(t.cues.length){var r=t.timestampmap,a=r.MPEGTS/9e4-r.LOCAL+e.mapping;if(t.cues.forEach(function(t){t.startTime+=a,t.endTime+=a}),!n.syncInfo){var o=t.cues[0].startTime,s=t.cues[t.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+t.mediaIndex,time:Math.min(o,s-i.duration)}}}else i.empty=!0}}]),n}();p.default=a,d.exports=p.default}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./bin-utils":2,"./segment-loader":16,"global/window":32,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],21:[function(t,n,i){(function(t){Object.defineProperty(i,"__esModule",{value:!0});var e,s="undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null,l=(e=s)&&e.__esModule?e:{default:e};i.default=function(){return function t(e,i){e=(0,s.mergeOptions)({timeout:45e3},e);var n=t.beforeRequest||l.default.Hls.xhr.beforeRequest;if(n&&"function"===typeof n){var r=n(e);r&&(e=r)}var a=(0,s.xhr)(e,function(t,e){var n=a.response;!t&&n&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=n.byteLength||n.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),t&&"ETIMEDOUT"===t.code&&(a.timedout=!0),t||a.aborted||200===e.statusCode||206===e.statusCode||0===e.statusCode||(t=new Error("XHR Failed with a response of: "+(a&&(n||a.responseText)))),i(t,a)}),o=a.abort;return a.abort=function(){return a.aborted=!0,o.apply(a,arguments)},a.uri=e.uri,a.requestTime=Date.now(),a}},n.exports=i.default}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{}],22:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var h=null,r=function(){function c(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),h||(h=function(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]],e=t[0],n=t[1],i=e[4],r=n[4],a=void 0,o=void 0,s=void 0,l=[],u=[],c=void 0,h=void 0,d=void 0,p=void 0,f=void 0;for(a=0;a<256;a++)u[(l[a]=a<<1^283*(a>>7))^a]=a;for(o=s=0;!i[o];o^=c||1,s=u[s]||1)for(d=(d=s^s<<1^s<<2^s<<3^s<<4)>>8^255&d^99,f=16843009*l[h=l[c=l[r[i[o]=d]=o]]]^65537*h^257*c^16843008*o,p=257*l[d]^16843008*d,a=0;a<4;a++)e[a][o]=p=p<<24^p>>>8,n[a][d]=f=f<<24^f>>>8;for(a=0;a<5;a++)e[a]=e[a].slice(0),n[a]=n[a].slice(0);return t}()),this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];var e=void 0,n=void 0,i=void 0,r=void 0,a=void 0,o=this._tables[0][4],s=this._tables[1],l=t.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=t.slice(0),a=[],this._key=[r,a],e=l;e<4*l+28;e++)i=r[e-1],(e%l===0||8===l&&e%l===4)&&(i=o[i>>>24]<<24^o[i>>16&255]<<16^o[i>>8&255]<<8^o[255&i],e%l===0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),r[e]=r[e-l]^i;for(n=0;e;n++,e--)i=r[3&n?e:e-4],a[n]=e<=4||n<4?i:s[0][o[i>>>24]]^s[1][o[i>>16&255]]^s[2][o[i>>8&255]]^s[3][o[255&i]]}return i(c,[{key:"decrypt",value:function(t,e,n,i,r,a){var o=this._key[1],s=t^o[0],l=i^o[1],u=n^o[2],c=e^o[3],h=void 0,d=void 0,p=void 0,f=o.length/4-2,m=void 0,v=4,g=this._tables[1],y=g[0],_=g[1],b=g[2],w=g[3],T=g[4];for(m=0;m<f;m++)h=y[s>>>24]^_[l>>16&255]^b[u>>8&255]^w[255&c]^o[v],d=y[l>>>24]^_[u>>16&255]^b[c>>8&255]^w[255&s]^o[v+1],p=y[u>>>24]^_[c>>16&255]^b[s>>8&255]^w[255&l]^o[v+2],c=y[c>>>24]^_[s>>16&255]^b[l>>8&255]^w[255&u]^o[v+3],v+=4,s=h,l=d,u=p;for(m=0;m<4;m++)r[(3&-m)+a]=T[s>>>24]<<24^T[l>>16&255]<<16^T[u>>8&255]<<8^T[255&c]^o[v++],h=s,s=l,l=u,u=c,c=h}}]),c}();n.default=r,e.exports=n.default},{}],23:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r,a=t("./stream"),o=(r=a)&&r.__esModule?r:{default:r},s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,o.default),this.jobs=[],this.delay=1,this.timeout_=null}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o["default"]),i(e,[{key:"processJob_",value:function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}},{key:"push",value:function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]),e}();n.default=s,e.exports=n.default},{"./stream":26}],24:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function r(t){return t&&t.__esModule?t:{default:t}}var v=r(t("./aes")),u=r(t("./async-stream")),c=t("pkcs7"),g=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},a=function(t,e,n){var i=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),r=new v.default(Array.prototype.slice.call(e)),a=new Uint8Array(t.byteLength),o=new Int32Array(a.buffer),s=void 0,l=void 0,u=void 0,c=void 0,h=void 0,d=void 0,p=void 0,f=void 0,m=void 0;for(s=n[0],l=n[1],u=n[2],c=n[3],m=0;m<i.length;m+=4)h=g(i[m]),d=g(i[m+1]),p=g(i[m+2]),f=g(i[m+3]),r.decrypt(h,d,p,f,o,m),o[m]=g(o[m]^s),o[m+1]=g(o[m+1]^l),o[m+2]=g(o[m+2]^u),o[m+3]=g(o[m+3]^c),s=h,l=d,u=p,c=f;return a};n.decrypt=a;var o=function(){function l(t,e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var r=l.STEP,a=new Int32Array(t.buffer),o=new Uint8Array(t.byteLength),s=0;for(this.asyncStream_=new u.default,this.asyncStream_.push(this.decryptChunk_(a.subarray(s,s+r),e,n,o)),s=r;s<a.length;s+=r)n=new Uint32Array([g(a[s-4]),g(a[s-3]),g(a[s-2]),g(a[s-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(s,s+r),e,n,o));this.asyncStream_.push(function(){i(null,(0,c.unpad)(o))})}return i(l,[{key:"decryptChunk_",value:function(e,n,i,r){return function(){var t=a(e,n,i);r.set(t,e.byteOffset)}}}],[{key:"STEP",get:function(){return 32e3}}]),l}();n.Decrypter=o,n.default={Decrypter:o,decrypt:a}},{"./aes":22,"./async-stream":23,pkcs7:28}],25:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i,r=t("./decrypter"),a=t("./async-stream"),o=(i=a)&&i.__esModule?i:{default:i};n.default={decrypt:r.decrypt,Decrypter:r.Decrypter,AsyncStream:o.default},e.exports=n.default},{"./async-stream":23,"./decrypter":24}],26:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners={}}return i(t,[{key:"on",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"off",value:function(t,e){var n;return!!this.listeners[t]&&(n=this.listeners[t].indexOf(e),this.listeners[t].splice(n,1),n>-1)}},{key:"trigger",value:function(t){var e=void 0,n=void 0,i=void 0,r=void 0;if(e=this.listeners[t])if(2===arguments.length)for(i=e.length,n=0;n<i;++n)e[n].call(this,arguments[1]);else for(r=Array.prototype.slice.call(arguments,1),i=e.length,n=0;n<i;++n)e[n].apply(this,r)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(e){this.on("data",function(t){e.push(t)})}}]),t}();n.default=r,e.exports=n.default},{}],27:[function(t,e,n){var i;e.exports=function(t){var e=i[t.byteLength%16||0],n=new Uint8Array(t.byteLength+e.length);return n.set(t),n.set(e,t.byteLength),n},i=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],28:[function(t,e,n){n.pad=t("./pad.js"),n.unpad=t("./unpad.js")},{"./pad.js":27,"./unpad.js":29}],29:[function(t,e,n){e.exports=function(t){return t.subarray(0,t.byteLength-t[t.byteLength-1])}},{}],30:[function(t,e,n){},{}],31:[function(r,a,t){(function(t){var e,n="undefined"!==typeof t?t:"undefined"!==typeof C?C:{},i=r("min-document");"undefined"!==typeof document?e=document:(e=n["__GLOBAL_DOCUMENT_CACHE@4"])||(e=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),a.exports=e}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"min-document":30}],32:[function(t,n,e){(function(t){var e;e="undefined"!==typeof C?C:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},n.exports=e}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{}],33:[function(t,e,n){"use strict";var i=o(t("./line-stream")),r=o(t("./parse-stream")),a=o(t("./parser"));function o(t){return t&&t.__esModule?t:{default:t}}e.exports={LineStream:i.default,ParseStream:r.default,Parser:a.default}},{"./line-stream":34,"./parse-stream":35,"./parser":36}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=t("./stream"),o=(i=a)&&i.__esModule?i:{default:i};var s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.buffer="",t}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o["default"]),r(e,[{key:"push",value:function(t){var e=void 0;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)}}]),e}();n.default=s},{"./stream":37}],35:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,c=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=t("./stream"),o=(i=a)&&i.__esModule?i:{default:i};var h=function(t){for(var e=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=e.length,r=void 0;i--;)""!==e[i]&&((r=/([^=]*)=(.*)/.exec(e[i]).slice(1))[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),n[r[0]]=r[1]);return n},s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o["default"]),r(e,[{key:"push",value:function(t){var e=void 0,n=void 0;if(0!==(t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===t[0])if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return n={type:"tag",tagType:"inf"},e[1]&&(n.duration=parseFloat(e[1])),e[2]&&(n.title=e[2]),void this.trigger("data",n);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"targetduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"totalduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"version"},e[1]&&(n.version=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"media-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return n={type:"tag",tagType:"playlist-type"},e[1]&&(n.playlistType=e[1]),void this.trigger("data",n);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"byterange"},e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),void this.trigger("data",n);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return n={type:"tag",tagType:"allow-cache"},e[1]&&(n.allowed=!/NO/.test(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"map"},e[1]){var i=h(e[1]);if(i.URI&&(n.uri=i.URI),i.BYTERANGE){var r=i.BYTERANGE.split("@"),a=c(r,2),o=a[0],s=a[1];n.byterange={},o&&(n.byterange.length=parseInt(o,10)),s&&(n.byterange.offset=parseInt(s,10))}}this.trigger("data",n)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"stream-inf"},e[1]){if(n.attributes=h(e[1]),n.attributes.RESOLUTION){var l=n.attributes.RESOLUTION.split("x"),u={};l[0]&&(u.width=parseInt(l[0],10)),l[1]&&(u.height=parseInt(l[1],10)),n.attributes.RESOLUTION=u}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return n={type:"tag",tagType:"media"},e[1]&&(n.attributes=h(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-ENDLIST/.exec(t))this.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return n={type:"tag",tagType:"program-date-time"},e[1]&&(n.dateTimeString=e[1],n.dateTimeObject=new Date(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return n={type:"tag",tagType:"key"},e[1]&&(n.attributes=h(e[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-out-cont"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-out"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-in"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n);this.trigger("data",{type:"tag",data:t.slice(4)})}}}else this.trigger("data",{type:"comment",text:t.slice(1)});else this.trigger("data",{type:"uri",uri:t})}}]),e}();n.default=s},{"./stream":37}],36:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=a(t("./stream")),d=a(t("./line-stream")),p=a(t("./parse-stream"));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.lineStream=new d.default,t.parseStream=new p.default,t.lineStream.pipe(t.parseStream);var r=t,a=[],o={},s=void 0,l=void 0,u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on("data",function(e){var n=void 0,i=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&((o.byterange=t).length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&((o.byterange=t).offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(o.duration=e.duration),0===e.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){e.attributes?"NONE"!==e.attributes.METHOD?e.attributes.URI?(e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},"undefined"!==typeof e.attributes.IV&&(l.iv=e.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):l=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,c=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){s={},e.uri&&(s.uri=e.uri),e.byterange&&(s.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes?(o.attributes||(o.attributes={}),h(o.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var t=this.manifest.mediaGroups[e.attributes.TYPE];t[e.attributes["GROUP-ID"]]=t[e.attributes["GROUP-ID"]]||{},n=t[e.attributes["GROUP-ID"]],(i={default:/yes/i.test(e.attributes.DEFAULT)}).default?i.autoselect=!0:i.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(i.language=e.attributes.LANGUAGE),e.attributes.URI&&(i.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(i.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(i.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(i.forced=/yes/i.test(e.attributes.FORCED)),n[e.attributes.NAME]=i}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},"cue-out":function(){o.cueOut=e.data},"cue-out-cont":function(){o.cueOutCont=e.data},"cue-in":function(){o.cueIn=e.data}}[e.tagType]||function(){}).call(r)},uri:function(){o.uri=e.uri,a.push(o),!this.manifest.targetDuration||"duration"in o||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),l&&(o.key=l),o.timeline=c,s&&(o.map=s),o={}},comment:function(){}})[e.type].call(r)}),t}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r["default"]),i(e,[{key:"push",value:function(t){this.lineStream.push(t)}},{key:"end",value:function(){this.lineStream.push("\n")}}]),e}();n.default=o},{"./line-stream":34,"./parse-stream":35,"./stream":37}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners={}}return i(t,[{key:"on",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"off",value:function(t,e){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(e);return this.listeners[t].splice(n,1),n>-1}},{key:"trigger",value:function(t){var e=this.listeners[t],n=void 0,i=void 0,r=void 0;if(e)if(2===arguments.length)for(i=e.length,n=0;n<i;++n)e[n].call(this,arguments[1]);else for(r=Array.prototype.slice.call(arguments,1),i=e.length,n=0;n<i;++n)e[n].apply(this,r)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(e){this.on("data",function(t){e.push(t)})}}]),t}();n.default=r},{}],38:[function(t,e,n){var i,r=t("../utils/stream.js");(i=function(){var s=new Uint8Array,l=0;i.prototype.init.call(this),this.setTimestamp=function(t){l=t},this.parseId3TagSize=function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?n+20:n+10},this.parseAdtsSize=function(t,e){var n=(224&t[e+5])>>5,i=t[e+4]<<3;return 6144&t[e+3]|i|n},this.push=function(t){var e,n,i,r,a=0,o=0;for(s.length?(r=s.length,(s=new Uint8Array(t.byteLength+r)).set(s.subarray(0,r)),s.set(t,r)):s=t;s.length-o>=3;)if(s[o]!=="I".charCodeAt(0)||s[o+1]!=="D".charCodeAt(0)||s[o+2]!=="3".charCodeAt(0))if(!0&s[o]&&240===(240&s[o+1])){if(s.length-o<7)break;if((a=this.parseAdtsSize(s,o))>s.length)break;i={type:"audio",data:s.subarray(o,o+a),pts:l,dts:l},this.trigger("data",i),o+=a}else o++;else{if(s.length-o<10)break;if((a=this.parseId3TagSize(s,o))>s.length)break;n={type:"timed-metadata",data:s.subarray(o,o+a)},this.trigger("data",n),o+=a}e=s.length-o,s=e>0?s.subarray(o):new Uint8Array}}).prototype=new r,e.exports=i},{"../utils/stream.js":62}],39:[function(t,e,n){var i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]};e.exports={parseId3TagSize:function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?n+20:n+10},parseAdtsSize:function(t,e){var n=(224&t[e+5])>>5,i=t[e+4]<<3;return 6144&t[e+3]|i|n},parseType:function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[e]&&240===(240&t[e+1])?"audio":null},parseSampleRate:function(t){for(var e=0;e+5<t.length;){if(255===t[e]&&240===(246&t[e+1]))return i[(60&t[e+2])>>>2];e++}return null},parseAacTimestamp:function(t){var e,n,i;e=10,64&t[5]&&(e+=4,e+=s(t.subarray(10,14)));do{if((n=s(t.subarray(e+4,e+8)))<1)return null;if("PRIV"===String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3])){i=t.subarray(e+10,e+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(t,e,n){var i,r="";for(i=e;i<n;i++)r+="%"+("00"+t[i].toString(16)).slice(-2);return r}(i,0,r)))break;var a=i.subarray(r+1),o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return o*=4,o+=3&a[7]}}e+=10,e+=n}while(e<t.byteLength);return null}}},{}],40:[function(t,e,n){"use strict";var i,r=t("../utils/stream.js"),c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(i=function(){var u;i.prototype.init.call(this),this.push=function(t){var e,n,i,r,a,o,s=0,l=0;if("audio"===t.type)for(u?(r=u,(u=new Uint8Array(r.byteLength+t.data.byteLength)).set(r),u.set(t.data,r.byteLength)):u=t.data;s+5<u.length;)if(255===u[s]&&240===(246&u[s+1])){if(n=2*(1&~u[s+1]),e=(3&u[s+3])<<11|u[s+4]<<3|(224&u[s+5])>>5,o=9e4*(a=1024*(1+(3&u[s+6])))/c[(60&u[s+2])>>>2],i=s+e,u.byteLength<i)return;if(this.trigger("data",{pts:t.pts+l*o,dts:t.dts+l*o,sampleCount:a,audioobjecttype:1+(u[s+2]>>>6&3),channelcount:(1&u[s+2])<<2|(192&u[s+3])>>>6,samplerate:c[(60&u[s+2])>>>2],samplingfrequencyindex:(60&u[s+2])>>>2,samplesize:16,data:u.subarray(s+7+n,i)}),u.byteLength===i)return void(u=void 0);l++,u=u.subarray(i)}else s++},this.flush=function(){this.trigger("done")}}).prototype=new r,e.exports=i},{"../utils/stream.js":62}],41:[function(t,e,n){"use strict";var l,u,b,i=t("../utils/stream.js"),w=t("../utils/exp-golomb.js");(u=function(){var n,i,r=0;u.prototype.init.call(this),this.push=function(t){var e;for(i=i?((e=new Uint8Array(i.byteLength+t.data.byteLength)).set(i),e.set(t.data,i.byteLength),e):t.data;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&this.trigger("data",i.subarray(r+3,n-2));1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}this.trigger("data",i.subarray(r+3,n-2)),r=n-2,n+=3;break;default:n+=3}i=i.subarray(r),n-=r,r=0},this.flush=function(){i&&i.byteLength>3&&this.trigger("data",i.subarray(r+3)),i=null,r=0,this.trigger("done")}}).prototype=new i,b={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(l=function(){var n,i,r,a,o,s,_,e=new u;l.prototype.init.call(this),(n=this).push=function(t){"video"===t.type&&(i=t.trackId,r=t.pts,a=t.dts,e.push(t))},e.on("data",function(t){var e={trackId:i,pts:r,dts:a,data:t};switch(31&t[0]){case 5:e.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:e.nalUnitType="sei_rbsp",e.escapedRBSP=o(t.subarray(1));break;case 7:e.nalUnitType="seq_parameter_set_rbsp",e.escapedRBSP=o(t.subarray(1)),e.config=s(e.escapedRBSP);break;case 8:e.nalUnitType="pic_parameter_set_rbsp";break;case 9:e.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",e)}),e.on("done",function(){n.trigger("done")}),this.flush=function(){e.flush()},_=function(t,e){var n,i=8,r=8;for(n=0;n<t;n++)0!==r&&(r=(i+e.readExpGolomb()+256)%256),i=0===r?i:r},o=function(t){for(var e,n,i=t.byteLength,r=[],a=1;a<i-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=t[o];return n},s=function(t){var e,n,i,r,a,o,s,l,u,c,h,d,p,f=0,m=0,v=0,g=0,y=1;if(n=(e=new w(t)).readUnsignedByte(),r=e.readUnsignedByte(),i=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),b[n]&&(3===(a=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(h=3!==a?8:12,p=0;p<h;p++)e.readBoolean()&&_(p<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(o=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===o)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),s=e.readUnsignedExpGolomb(),p=0;p<s;p++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),l=e.readUnsignedExpGolomb(),u=e.readUnsignedExpGolomb(),0===(c=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(f=e.readUnsignedExpGolomb(),m=e.readUnsignedExpGolomb(),v=e.readUnsignedExpGolomb(),g=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:d=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}d&&(y=d[0]/d[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(l+1)-2*f-2*m)*y),height:(2-c)*(u+1)*16-2*v-2*g}}}).prototype=new i,e.exports={H264Stream:l,NalByteStream:u}},{"../utils/exp-golomb.js":61,"../utils/stream.js":62}],42:[function(t,e,n){var i,r=[33,16,5,32,164,27],a=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],o=function(t){for(var e=[];t--;)e.push(0);return e},s={96e3:[r,[227,64],o(154),[56]],88200:[r,[231],o(170),[56]],64e3:[r,[248,192],o(240),[56]],48e3:[r,[255,192],o(268),[55,148,128],o(54),[112]],44100:[r,[255,192],o(268),[55,163,128],o(84),[112]],32e3:[r,[255,192],o(268),[55,234],o(226),[112]],24e3:[r,[255,192],o(268),[55,255,128],o(268),[111,112],o(126),[224]],16e3:[r,[255,192],o(268),[55,255,128],o(268),[111,255],o(269),[223,108],o(195),[1,192]],12e3:[a,o(268),[3,127,248],o(268),[6,255,240],o(268),[13,255,224],o(268),[27,253,128],o(259),[56]],11025:[a,o(268),[3,127,248],o(268),[6,255,240],o(268),[13,255,224],o(268),[27,255,192],o(268),[55,175,128],o(108),[112]],8e3:[a,o(268),[3,121,16],o(47),[7]]};e.exports=(i=s,Object.keys(i).reduce(function(t,e){return t[e]=new Uint8Array(i[e].reduce(function(t,e){return t.concat(e)},[])),t},{}))},{}],43:[function(t,e,n){"use strict";var i=t("../utils/stream.js"),r=function(t){this.numberOfTracks=0,this.metadataStream=t.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,r.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):("video"===t.track.type&&(this.videoTrack=t.track,this.videoTags=t.tags,this.pendingTracks++),void("audio"===t.track.type&&(this.audioTrack=t.track,this.audioTags=t.tags,this.pendingTracks++)))}};r.prototype=new i,r.prototype.flush=function(t){var e,n,i,r,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?r=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(r=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,i=0;i<this.pendingCaptions.length;i++)(n=this.pendingCaptions[i]).startTime=n.startPts-r,n.startTime/=9e4,n.endTime=n.endPts-r,n.endTime/=9e4,a.captionStreams[n.stream]=!0,a.captions.push(n);for(i=0;i<this.pendingMetadata.length;i++)(e=this.pendingMetadata[i]).cueTime=e.pts-r,e.cueTime/=9e4,a.metadata.push(e);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}},e.exports=r},{"../utils/stream.js":62}],44:[function(t,e,n){"use strict";var l=t("./flv-tag.js");e.exports=function(t,e,n){var i,r,a,o=new Uint8Array(9),s=new DataView(o.buffer);return t=t||0,e=void 0===e||e,n=void 0===n||n,s.setUint8(0,70),s.setUint8(1,76),s.setUint8(2,86),s.setUint8(3,1),s.setUint8(4,(e?4:0)|(n?1:0)),s.setUint32(5,o.byteLength),t<=0?((r=new Uint8Array(o.byteLength+4)).set(o),r.set([0,0,0,0],o.byteLength)):((i=new l(l.METADATA_TAG)).pts=i.dts=0,i.writeMetaDataDouble("duration",t),a=i.finalize().length,(r=new Uint8Array(o.byteLength+a)).set(o),r.set(s.byteLength,a)),r}},{"./flv-tag.js":45}],45:[function(t,e,n){var u;(u=function(t,n){var e,i=0,r=16384,a=function(t,e){var n,i=t.position+e;i<t.bytes.byteLength||((n=new Uint8Array(2*i)).set(t.bytes.subarray(0,t.position),0),t.bytes=n,t.view=new DataView(t.bytes.buffer))},o=u.widthBytes||new Uint8Array("width".length),s=u.heightBytes||new Uint8Array("height".length),l=u.videocodecidBytes||new Uint8Array("videocodecid".length);if(!u.widthBytes){for(e=0;e<"width".length;e++)o[e]="width".charCodeAt(e);for(e=0;e<"height".length;e++)s[e]="height".charCodeAt(e);for(e=0;e<"videocodecid".length;e++)l[e]="videocodecid".charCodeAt(e);u.widthBytes=o,u.heightBytes=s,u.videocodecidBytes=l}switch(this.keyFrame=!1,t){case u.VIDEO_TAG:this.length=16,r*=6;break;case u.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case u.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(r),this.view=new DataView(this.bytes.buffer),this.bytes[0]=t,this.position=this.length,this.keyFrame=n,this.pts=0,this.dts=0,this.writeBytes=function(t,e,n){var i,r=e||0;i=r+(n=n||t.byteLength),a(this,n),this.bytes.set(t.subarray(r,i),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(t){a(this,1),this.bytes[this.position]=t,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(t){a(this,2),this.view.setUint16(this.position,t),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(t){return this.bytes[this.length-t]},this.nalUnitSize=function(){return 0===i?0:this.length-(i+4)},this.startNalUnit=function(){if(i>0)throw new Error("Attempted to create new NAL wihout closing the old one");i=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(t){var e,n;this.length===i+4?this.length-=4:i>0&&(e=i+4,n=this.length-e,this.position=i,this.view.setUint32(this.position,n),this.position=this.length,t&&t.push(this.bytes.subarray(e,e+n))),i=0},this.writeMetaDataDouble=function(t,e){var n;if(a(this,2+t.length+9),this.view.setUint16(this.position,t.length),this.position+=2,"width"===t)this.bytes.set(o,this.position),this.position+=5;else if("height"===t)this.bytes.set(s,this.position),this.position+=6;else if("videocodecid"===t)this.bytes.set(l,this.position),this.position+=12;else for(n=0;n<t.length;n++)this.bytes[this.position]=t.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,e),this.position+=8,this.length=Math.max(this.length,this.position),++i},this.writeMetaDataBoolean=function(t,e){var n;for(a(this,2),this.view.setUint16(this.position,t.length),this.position+=2,n=0;n<t.length;n++)a(this,1),this.bytes[this.position]=t.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,e?1:0),this.position++,this.length=Math.max(this.length,this.position),++i},this.finalize=function(){var t,e;switch(this.bytes[0]){case u.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||n?16:32),this.bytes[12]=n?0:1,t=this.pts-this.dts,this.bytes[13]=(16711680&t)>>>16,this.bytes[14]=(65280&t)>>>8,this.bytes[15]=(255&t)>>>0;break;case u.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=n?0:1;break;case u.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,i),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return e=this.length-11,this.bytes[1]=(16711680&e)>>>16,this.bytes[2]=(65280&e)>>>8,this.bytes[3]=(255&e)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=u.frameTime(this.bytes),this}}).AUDIO_TAG=8,u.VIDEO_TAG=9,u.METADATA_TAG=18,u.isAudioFrame=function(t){return u.AUDIO_TAG===t[0]},u.isVideoFrame=function(t){return u.VIDEO_TAG===t[0]},u.isMetaData=function(t){return u.METADATA_TAG===t[0]},u.isKeyFrame=function(t){return u.isVideoFrame(t)?23===t[11]:!!u.isAudioFrame(t)||!!u.isMetaData(t)},u.frameTime=function(t){var e=t[4]<<16;return e|=t[5]<<8,e|=t[6]<<0,e|=t[7]<<24},e.exports=u},{}],46:[function(t,e,n){e.exports={tag:t("./flv-tag"),Transmuxer:t("./transmuxer"),getFlvHeader:t("./flv-header")}},{"./flv-header":44,"./flv-tag":45,"./transmuxer":48}],47:[function(t,e,n){"use strict";e.exports=function(){var t=this;this.list=[],this.push=function(t){this.list.push({bytes:t.bytes,dts:t.dts,pts:t.pts,keyFrame:t.keyFrame,metaDataTag:t.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return t.list.length}})}},{}],48:[function(t,e,n){"use strict";var f,m,v,i,s,l,r=t("../utils/stream.js"),u=t("./flv-tag.js"),g=t("../m2ts/m2ts.js"),y=t("../codecs/adts.js"),_=t("../codecs/h264").H264Stream,b=t("./coalesce-stream.js"),c=t("./tag-list.js");i=function(t,e){"number"===typeof e.pts&&(void 0===t.timelineStartInfo.pts?t.timelineStartInfo.pts=e.pts:t.timelineStartInfo.pts=Math.min(t.timelineStartInfo.pts,e.pts)),"number"===typeof e.dts&&(void 0===t.timelineStartInfo.dts?t.timelineStartInfo.dts=e.dts:t.timelineStartInfo.dts=Math.min(t.timelineStartInfo.dts,e.dts))},s=function(t,e){var n=new u(u.METADATA_TAG);return n.dts=e,n.pts=e,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",t.width),n.writeMetaDataDouble("height",t.height),n},l=function(t,e){var n,i=new u(u.VIDEO_TAG,!0);for(i.dts=e,i.pts=e,i.writeByte(1),i.writeByte(t.profileIdc),i.writeByte(t.profileCompatibility),i.writeByte(t.levelIdc),i.writeByte(255),i.writeByte(225),i.writeShort(t.sps[0].length),i.writeBytes(t.sps[0]),i.writeByte(t.pps.length),n=0;n<t.pps.length;++n)i.writeShort(t.pps[n].length),i.writeBytes(t.pps[n]);return i},(v=function(r){var a,o=[],s=[];v.prototype.init.call(this),this.push=function(t){i(r,t),r&&(r.audioobjecttype=t.audioobjecttype,r.channelcount=t.channelcount,r.samplerate=t.samplerate,r.samplingfrequencyindex=t.samplingfrequencyindex,r.samplesize=t.samplesize,r.extraData=r.audioobjecttype<<11|r.samplingfrequencyindex<<7|r.channelcount<<3),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),o.push(t)},this.flush=function(){var t,e,n,i=new c;if(0!==o.length){for(n=-1/0;o.length;)t=o.shift(),s.length&&t.pts>=s[0]&&(n=s.shift(),this.writeMetaDataTags(i,n)),(r.extraData!==a||t.pts-n>=1e3)&&(this.writeMetaDataTags(i,t.pts),a=r.extraData,n=t.pts),(e=new u(u.AUDIO_TAG)).pts=t.pts,e.dts=t.dts,e.writeBytes(t.data),i.push(e.finalize());s.length=0,a=null,this.trigger("data",{track:r,tags:i.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(t,e){var n;(n=new u(u.METADATA_TAG)).pts=e,n.dts=e,n.writeMetaDataDouble("audiocodecid",10),n.writeMetaDataBoolean("stereo",2===r.channelcount),n.writeMetaDataDouble("audiosamplerate",r.samplerate),n.writeMetaDataDouble("audiosamplesize",16),t.push(n.finalize()),(n=new u(u.AUDIO_TAG,!0)).pts=e,n.dts=e,n.view.setUint16(n.position,r.extraData),n.position+=2,n.length=Math.max(n.length,n.position),t.push(n.finalize())},this.onVideoKeyFrame=function(t){s.push(t)}}).prototype=new r,(m=function(r){var a,o,n=[];m.prototype.init.call(this),this.finishFrame=function(t,e){if(e){if(a&&r&&r.newMetadata&&(e.keyFrame||0===t.length)){var n=s(a,e.dts).finalize(),i=l(r,e.dts).finalize();n.metaDataTag=i.metaDataTag=!0,t.push(n),t.push(i),r.newMetadata=!1,this.trigger("keyframe",e.dts)}e.endNalUnit(),t.push(e.finalize()),o=null}},this.push=function(t){i(r,t),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),n.push(t)},this.flush=function(){for(var t,e=new c;n.length&&"access_unit_delimiter_rbsp"!==n[0].nalUnitType;)n.shift();if(0!==n.length){for(;n.length;)"seq_parameter_set_rbsp"===(t=n.shift()).nalUnitType?(r.newMetadata=!0,a=t.config,r.width=a.width,r.height=a.height,r.sps=[t.data],r.profileIdc=a.profileIdc,r.levelIdc=a.levelIdc,r.profileCompatibility=a.profileCompatibility,o.endNalUnit()):"pic_parameter_set_rbsp"===t.nalUnitType?(r.newMetadata=!0,r.pps=[t.data],o.endNalUnit()):"access_unit_delimiter_rbsp"===t.nalUnitType?(o&&this.finishFrame(e,o),(o=new u(u.VIDEO_TAG)).pts=t.pts,o.dts=t.dts):("slice_layer_without_partitioning_rbsp_idr"===t.nalUnitType&&(o.keyFrame=!0),o.endNalUnit()),o.startNalUnit(),o.writeBytes(t.data);o&&this.finishFrame(e,o),this.trigger("data",{track:r,tags:e.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new r,(f=function(t){var e,n,i,r,a,o,s,l,u,c,h,d,p=this;f.prototype.init.call(this),t=t||{},this.metadataStream=new g.MetadataStream,t.metadataStream=this.metadataStream,e=new g.TransportPacketStream,n=new g.TransportParseStream,i=new g.ElementaryStream,r=new g.TimestampRolloverStream("video"),a=new g.TimestampRolloverStream("audio"),o=new g.TimestampRolloverStream("timed-metadata"),s=new y,l=new _,d=new b(t),e.pipe(n).pipe(i),i.pipe(r).pipe(l),i.pipe(a).pipe(s),i.pipe(o).pipe(this.metadataStream).pipe(d),h=new g.CaptionStream,l.pipe(h).pipe(d),i.on("data",function(t){var e,n,i;if("metadata"===t.type){for(e=t.tracks.length;e--;)"video"===t.tracks[e].type?n=t.tracks[e]:"audio"===t.tracks[e].type&&(i=t.tracks[e]);n&&!u&&(d.numberOfTracks++,u=new m(n),l.pipe(u).pipe(d)),i&&!c&&(d.numberOfTracks++,c=new v(i),s.pipe(c).pipe(d),u&&u.on("keyframe",c.onVideoKeyFrame))}}),this.push=function(t){e.push(t)},this.flush=function(){e.flush()},this.resetCaptions=function(){h.reset()},d.on("data",function(t){p.trigger("data",t)}),d.on("done",function(){p.trigger("done")})}).prototype=new r,e.exports=f},{"../codecs/adts.js":40,"../codecs/h264":41,"../m2ts/m2ts.js":50,"../utils/stream.js":62,"./coalesce-stream.js":43,"./flv-tag.js":45,"./tag-list.js":47}],49:[function(t,e,n){var i=t("../utils/stream"),r=function(){r.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new o(0,0),new o(0,1),new o(1,0),new o(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("done",this.trigger.bind(this,"done"))},this)};r.prototype=new i,r.prototype.push=function(t){var e,n,i;"sei_rbsp"===t.nalUnitType&&(4===(e=function(t){for(var e=0,n={payloadType:-1,payloadSize:0},i=0,r=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)i+=255,e++;for(i+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=t.subarray(e,e+r);break}e+=r,r=i=0}return n}(t.escapedRBSP)).payloadType&&(n=181!==(i=e).payload[0]?null:49!==(i.payload[1]<<8|i.payload[2])?null:"GA94"!==String.fromCharCode(i.payload[3],i.payload[4],i.payload[5],i.payload[6])?null:3!==i.payload[7]?null:i.payload.subarray(8,i.payload.length-1))&&(t.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:t.dts===this.latestDts_&&this.ignoreNextEqualDts_?this.ignoreNextEqualDts_=!1:(this.captionPackets_=this.captionPackets_.concat(function(t,e){var n,i,r,a,o=[];if(!(64&e[0]))return o;for(i=31&e[0],n=0;n<i;n++)a={type:3&e[2+(r=3*n)],pts:t},4&e[r+2]&&(a.ccData=e[r+3]<<8|e[r+4],o.push(a));return o}(t.pts,n)),this.latestDts_=t.dts)))},r.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(t){t.flush()},this)):this.ccStreams_.forEach(function(t){t.flush()},this)},r.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},r.prototype.dispatchCea608Packet=function(t){this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},r.prototype.setsChannel1Active=function(t){return 4096===(30720&t.ccData)},r.prototype.setsChannel2Active=function(t){return 6144===(30720&t.ccData)};var a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},s=function(t){return null===t?"":(t=a[t]||t,String.fromCharCode(t))},l=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],u=function(){for(var t=[],e=15;e--;)t.push("");return t},o=function(t,e){o.prototype.init.call(this),this.field_=t||0,this.dataChannel_=e||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,n,i,r,a;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096===(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),i=e>>>8,r=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.topRow_=13,this.mode_="rollUp";else if(e===this.ROLL_UP_3_ROWS_)this.topRow_=12,this.mode_="rollUp";else if(e===this.ROLL_UP_4_ROWS_)this.topRow_=11,this.mode_="rollUp";else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=u();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=u();else if(e===this.RESUME_DIRECT_CAPTIONING_)this.mode_="paintOn";else if(this.isSpecialCharacter(i,r))a=s((i=(3&i)<<8)|r),this[this.mode_](t.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1),a=s((i=(3&i)<<8)|r),this[this.mode_](t.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14===(14&r)&&this.addFormatting(t.pts,["i"]),1===(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var o=l.indexOf(7968&e);o!==this.row_&&(this.clearFormatting(t.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16===(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(r)&&14===(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=s(i),a+=s(r),this[this.mode_](t.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};o.prototype=new i,o.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){return t.trim()}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},o.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=u(),this.nonDisplayed_=u(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.formatting_=[]},o.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},o.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&e>=48&&e<=63},o.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&e>=32&&e<=63},o.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&e>=32&&e<=47},o.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&e>=33&&e<=35},o.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&e>=64&&e<=127},o.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},o.prototype.isNormalChar=function(t){return t>=32&&t<=127},o.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var n=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,n)},o.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},"");this.formatting_=[],this[this.mode_](t,e)}},o.prototype.popOn=function(t,e){var n=this.nonDisplayed_[this.row_];n+=e,this.nonDisplayed_[this.row_]=n},o.prototype.rollUp=function(t,e){var n=this.displayed_[14];n+=e,this.displayed_[14]=n},o.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.topRow_;t<14;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[14]=""},o.prototype.paintOn=function(){},e.exports={CaptionStream:r,Cea608Stream:o}},{"../utils/stream":62}],50:[function(t,e,n){var i,s,l,r=t("../utils/stream.js"),a=t("./caption-stream"),u=t("./stream-types"),o=t("./timestamp-rollover-stream").TimestampRolloverStream,c=t("./stream-types.js");(i=function(){var r=new Uint8Array(188),a=0;i.prototype.init.call(this),this.push=function(t){var e,n=0,i=188;for(a?((e=new Uint8Array(t.byteLength+a)).set(r.subarray(0,a)),e.set(t,a),a=0):e=t;i<e.byteLength;)71!==e[n]||71!==e[i]?(n++,i++):(this.trigger("data",e.subarray(n,i)),n+=188,i+=188);n<e.byteLength&&(r.set(e.subarray(n),0),a=e.byteLength-n)},this.flush=function(){188===a&&71===r[0]&&(this.trigger("data",r),a=0),this.trigger("done")}}).prototype=new r,(s=function(){var i,r,a,o;s.prototype.init.call(this),(o=this).packetsWaitingForPmt=[],this.programMapTable=void 0,i=function(t,e){var n=0;e.payloadUnitStartIndicator&&(n+=t[n]+1),"pat"===e.type?r(t.subarray(n),e):a(t.subarray(n),e)},r=function(t,e){e.section_number=t[7],e.last_section_number=t[8],o.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=o.pmtPid},a=function(t,e){var n,i;if(1&t[5]){for(o.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&t[1])<<8|t[2])-4,i=12+((15&t[10])<<8|t[11]);i<n;){var r=t[i],a=(31&t[i+1])<<8|t[i+2];r===u.H264_STREAM_TYPE&&null===o.programMapTable.video?o.programMapTable.video=a:r===u.ADTS_STREAM_TYPE&&null===o.programMapTable.audio?o.programMapTable.audio=a:r===u.METADATA_STREAM_TYPE&&(o.programMapTable["timed-metadata"][a]=r),i+=5+((15&t[i+3])<<8|t[i+4])}e.programMapTable=o.programMapTable}},this.push=function(t){var e={},n=4;if(e.payloadUnitStartIndicator=!!(64&t[1]),e.pid=31&t[1],e.pid<<=8,e.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===e.pid)e.type="pat",i(t.subarray(n),e),this.trigger("data",e);else if(e.pid===this.pmtPid)for(e.type="pmt",i(t.subarray(n),e),this.trigger("data",e);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,e]):this.processPes_(t,n,e)},this.processPes_=function(t,e,n){n.pid===this.programMapTable.video?n.streamType=u.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=u.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=t.subarray(e),this.trigger("data",n)}}).prototype=new r,s.STREAM_TYPES={h264:27,adts:15},(l=function(){var d=this,i={data:[],size:0},r={data:[],size:0},a={data:[],size:0},o=function(t,e,n){var i,r,a=new Uint8Array(t.size),o={type:e},s=0,l=0;if(t.data.length&&!(t.size<9)){for(o.trackId=t.data[0].pid,s=0;s<t.data.length;s++)r=t.data[s],a.set(r.data,l),l+=r.data.byteLength;var u,c,h;u=a,(c=o).packetLength=6+(u[4]<<8|u[5]),c.dataAlignmentIndicator=0!==(4&u[6]),192&(h=u[7])&&(c.pts=(14&u[9])<<27|(255&u[10])<<20|(254&u[11])<<12|(255&u[12])<<5|(254&u[13])>>>3,c.pts*=4,c.pts+=(6&u[13])>>>1,c.dts=c.pts,64&h&&(c.dts=(14&u[14])<<27|(255&u[15])<<20|(254&u[16])<<12|(255&u[17])<<5|(254&u[18])>>>3,c.dts*=4,c.dts+=(6&u[18])>>>1)),c.data=u.subarray(9+u[8]),i="video"===e||o.packetLength<=t.size,(n||i)&&(t.size=0,t.data.length=0),i&&d.trigger("data",o)}};l.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var t,e;switch(n.streamType){case u.H264_STREAM_TYPE:case c.H264_STREAM_TYPE:t=i,e="video";break;case u.ADTS_STREAM_TYPE:t=r,e="audio";break;case u.METADATA_STREAM_TYPE:t=a,e="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&o(t,e,!0),t.data.push(n),t.size+=n.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},e=n.programMapTable;null!==e.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),d.trigger("data",t)}})[n.type]()},this.flush=function(){o(i,"video"),o(r,"audio"),o(a,"timed-metadata"),this.trigger("done")}}).prototype=new r;var h={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:i,TransportParseStream:s,ElementaryStream:l,TimestampRolloverStream:o,CaptionStream:a.CaptionStream,Cea608Stream:a.Cea608Stream,MetadataStream:t("./metadata-stream")};for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d]);e.exports=h},{"../utils/stream.js":62,"./caption-stream":49,"./metadata-stream":51,"./stream-types":53,"./stream-types.js":53,"./timestamp-rollover-stream":54}],51:[function(t,e,n){var i,r=t("../utils/stream"),a=t("./stream-types"),o=function(t,e,n){var i,r="";for(i=e;i<n;i++)r+="%"+("00"+t[i].toString(16)).slice(-2);return r},s=function(t,e,n){return decodeURIComponent(o(t,e,n))},d=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},p={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=s(t.data,1,e),t.value=s(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=s(t.data,1,e),t.url=s(t.data,e+1,t.data.length);break}},PRIV:function(t){var e,n;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=(n=t.data,unescape(o(n,0,e)));break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};(i=function(t){var e,l={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},u=0,c=[],h=0;if(i.prototype.init.call(this),this.dispatchType=a.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(e=0;e<l.descriptor.length;e++)this.dispatchType+=("00"+l.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,n,i,r,a;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(h=0,c.length=0),0===c.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))l.debug&&console.log("Skipping unrecognized metadata packet");else if(c.push(t),h+=t.data.byteLength,1===c.length&&(u=d(t.data.subarray(6,10)),u+=10),!(h<u)){for(e={data:new Uint8Array(u),frames:[],pts:c[0].pts,dts:c[0].dts},a=0;a<u;)e.data.set(c[0].data.subarray(0,u-a),a),a+=c[0].data.byteLength,h-=c[0].data.byteLength,c.shift();n=10,64&e.data[5]&&(n+=4,n+=d(e.data.subarray(10,14)),u-=d(e.data.subarray(16,20)));do{if((i=d(e.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((r={id:String.fromCharCode(e.data[n],e.data[n+1],e.data[n+2],e.data[n+3]),data:e.data.subarray(n+10,n+i+10)}).key=r.id,p[r.id]&&(p[r.id](r),"com.apple.streaming.transportStreamTimestamp"===r.owner)){var o=r.data,s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;s*=4,s+=3&o[7],r.timeStamp=s,void 0===e.pts&&void 0===e.dts&&(e.pts=r.timeStamp,e.dts=r.timeStamp),this.trigger("timestamp",r)}e.frames.push(r),n+=10,n+=i}while(n<u);this.trigger("data",e)}}}).prototype=new r,e.exports=i},{"../utils/stream":62,"./stream-types":53}],52:[function(t,e,n){var i=t("./stream-types.js"),r=function(t){var e=31&t[1];return e<<=8,e|=t[2]},s=function(t){return!!(64&t[1])},l=function(t){var e=0;return(48&t[3])>>>4>1&&(e+=t[4]+1),e},o=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};e.exports={parseType:function(t,e){var n=r(t);return 0===n?"pat":n===e?"pmt":e?"pes":null},parsePat:function(t){var e=s(t),n=4+l(t);return e&&(n+=t[n]+1),(31&t[n+10])<<8|t[n+11]},parsePmt:function(t){var e={},n=s(t),i=4+l(t);if(n&&(i+=t[i]+1),1&t[i+5]){var r;r=3+((15&t[i+1])<<8|t[i+2])-4;for(var a=12+((15&t[i+10])<<8|t[i+11]);a<r;){var o=i+a;e[(31&t[o+1])<<8|t[o+2]]=t[o],a+=5+((15&t[o+3])<<8|t[o+4])}return e}},parsePayloadUnitStartIndicator:s,parsePesType:function(t,e){switch(e[r(t)]){case i.H264_STREAM_TYPE:return"video";case i.ADTS_STREAM_TYPE:return"audio";case i.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!s(t))return null;var e=4+l(t);if(e>=t.byteLength)return null;var n,i=null;return 192&(n=t[e+7])&&((i={}).pts=(14&t[e+9])<<27|(255&t[e+10])<<20|(254&t[e+11])<<12|(255&t[e+12])<<5|(254&t[e+13])>>>3,i.pts*=4,i.pts+=(6&t[e+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&t[e+14])<<27|(255&t[e+15])<<20|(254&t[e+16])<<12|(255&t[e+17])<<5|(254&t[e+18])>>>3,i.dts*=4,i.dts+=(6&t[e+18])>>>1)),i},videoPacketContainsKeyFrame:function(t){for(var e=4+l(t),n=t.subarray(e),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[r+3])&&(a=!0);1!==n[++i]&&i<n.length;);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===o(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[r+3])&&(a=!0),a}}},{"./stream-types.js":53}],53:[function(t,e,n){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],54:[function(t,e,n){var i=t("../utils/stream"),r=function(t,e){var n=1;for(t>e&&(n=-1);Math.abs(e-t)>4294967296;)t+=8589934592*n;return t},a=function(t){var e,n;a.prototype.init.call(this),this.type_=t,this.push=function(t){t.type===this.type_&&(void 0===n&&(n=t.dts),t.dts=r(t.dts,n),t.pts=r(t.pts,n),e=t.dts,this.trigger("data",t))},this.flush=function(){n=e,this.trigger("done")},this.discontinuity=function(){e=n=void 0}};a.prototype=new i,e.exports={TimestampRolloverStream:a,handleRollover:r}},{"../utils/stream":62}],55:[function(t,e,n){e.exports={generator:t("./mp4-generator"),Transmuxer:t("./transmuxer").Transmuxer,AudioSegmentStream:t("./transmuxer").AudioSegmentStream,VideoSegmentStream:t("./transmuxer").VideoSegmentStream}},{"./mp4-generator":56,"./transmuxer":58}],56:[function(t,e,n){var s,i,r,a,o,l,u,c,h,d,p,f,m,v,g,y,_,b,w,T,x,E,S,A,M,C,k,O,L,R,P,I,D,j,N,U,B,F,V,H,z,G=Math.pow(2,32)-1;!function(){var t;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!==typeof Uint8Array){for(t in S)S.hasOwnProperty(t)&&(S[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);A=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),M=new Uint8Array([0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),O=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),L={video:k,audio:O},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),j=D,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),U=D,R=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),s=function(t){var e,n,i=[],r=0;for(e=1;e<arguments.length;e++)i.push(arguments[e]);for(e=i.length;e--;)r+=i[e].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(t,4),e=0,r=8;e<i.length;e++)n.set(i[e],r),r+=i[e].byteLength;return n},i=function(){return s(S.dinf,s(S.dref,I))},r=function(t){return s(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},a=function(){return s(S.ftyp,A,M,A,C)},y=function(t){return s(S.hdlr,L[t])},o=function(t){return s(S.mdat,t)},g=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),s(S.mdhd,e)},v=function(t){return s(S.mdia,g(t),y(t.type),u(t))},l=function(t){return s(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},u=function(t){return s(S.minf,"video"===t.type?s(S.vmhd,R):s(S.smhd,P),i(),b(t))},c=function(t,e){for(var n=[],i=e.length;i--;)n[i]=T(e[i]);return s.apply(null,[S.moof,l(t)].concat(n))},h=function(t){for(var e=t.length,n=[];e--;)n[e]=f(t[e]);return s.apply(null,[S.moov,p(4294967295)].concat(n).concat(d(t)))},d=function(t){for(var e=t.length,n=[];e--;)n[e]=x(t[e]);return s.apply(null,[S.mvex].concat(n))},p=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(S.mvhd,e)},_=function(t){var e,n,i=t.samples||[],r=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)e=i[n].flags,r[n+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return s(S.sdtp,r)},b=function(t){return s(S.stbl,w(t),s(S.stts,U),s(S.stsc,j),s(S.stsz,N),s(S.stco,D))},w=function(t){return s(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?B(t):F(t))},B=function(t){var e,n=t.sps||[],i=t.pps||[],r=[],a=[];for(e=0;e<n.length;e++)r.push((65280&n[e].byteLength)>>>8),r.push(255&n[e].byteLength),r=r.concat(Array.prototype.slice.call(n[e]));for(e=0;e<i.length;e++)a.push((65280&i[e].byteLength)>>>8),a.push(255&i[e].byteLength),a=a.concat(Array.prototype.slice.call(i[e]));return s(S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(S.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([n.length]).concat(r).concat([i.length]).concat(a))),s(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},F=function(t){return s(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),r(t))},m=function(t){var e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return s(S.tkhd,e)},T=function(t){var e,n,i,r,a,o;return e=s(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(t.baseMediaDecodeTime/(G+1)),o=Math.floor(t.baseMediaDecodeTime%(G+1)),n=s(S.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===t.type?(i=E(t,92),s(S.traf,e,n,i)):(r=_(t),i=E(t,r.length+92),s(S.traf,e,n,i,r))},f=function(t){return t.duration=t.duration||4294967295,s(S.trak,m(t),v(t))},x=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),s(S.trex,e)},z=function(t,e){var n=0,i=0,r=0,a=0;return t.length&&(void 0!==t[0].duration&&(n=1),void 0!==t[0].size&&(i=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},H=function(t,e){var n,i,r,a;for(e+=20+16*(i=t.samples||[]).length,n=z(i,e),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return s(S.trun,new Uint8Array(n))},V=function(t,e){var n,i,r,a;for(e+=20+8*(i=t.samples||[]).length,n=z(i,e),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return s(S.trun,new Uint8Array(n))},E=function(t,e){return"audio"===t.type?V(t,e):H(t,e)},e.exports={ftyp:a,mdat:o,moof:c,moov:h,initSegment:function(t){var e,n=a(),i=h(t);return(e=new Uint8Array(n.byteLength+i.byteLength)).set(n),e.set(i,n.byteLength),e}}},{}],57:[function(t,e,n){var l,u,i,r;l=function(t,e){var n,i,r,a,o,s=[];if(!e.length)return null;for(n=0;n<t.byteLength;)i=t[n]<<24,i|=t[n+1]<<16,i|=t[n+2]<<8,i|=t[n+3],r=u(t.subarray(n+4,n+8)),a=i>1?n+i:t.byteLength,r===e[0]&&(1===e.length?s.push(t.subarray(n+8,a)):(o=l(t.subarray(n+8,a),e.slice(1))).length&&(s=s.concat(o))),n=a;return s},u=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),e+=String.fromCharCode(t[2]),e+=String.fromCharCode(t[3])},i=function(t){return l(t,["moov","trak"]).reduce(function(t,e){var n,i,r,a;return(n=l(e,["tkhd"])[0])?(r=n[i=0===n[0]?12:20]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3],(a=l(e,["mdia","mdhd"])[0])?(i=0===a[0]?12:20,t[r]=a[i]<<24|a[i+1]<<16|a[i+2]<<8|a[i+3],t):null):null},{})},r=function(r,t){var e,n,i;return e=l(t,["moof","traf"]),n=[].concat.apply([],e.map(function(i){return l(i,["tfhd"]).map(function(t){var e,n;return e=t[4]<<24|t[5]<<16|t[6]<<8|t[7],n=r[e]||9e4,(l(i,["tfdt"]).map(function(t){var e,n;return e=t[0],n=t[4]<<24|t[5]<<16|t[6]<<8|t[7],1===e&&(n*=Math.pow(2,32),n+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]),n})[0]||1/0)/n})})),i=Math.min.apply(null,n),isFinite(i)?i:0},e.exports={parseType:u,timescale:i,startTime:r}},{}],58:[function(t,e,n){var d,s,l,u,c,p,f,m,v,h,i=t("../utils/stream.js"),g=t("./mp4-generator.js"),y=t("../m2ts/m2ts.js"),_=t("../codecs/adts.js"),b=t("../codecs/h264").H264Stream,w=t("../aac"),T=t("../data/silence"),x=t("../utils/clock"),E=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],S=["width","height","profileIdc","levelIdc","profileCompatibility"];c=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},v=function(t,e){var n;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},h=function(t){var e,n=0;for(e=0;e<t.length;e++)n+=t[e].data.byteLength;return n},(s=function(r){var a=[],o=0,e=0,u=0,c=1/0;s.prototype.init.call(this),this.push=function(e){p(r,e),r&&E.forEach(function(t){r[t]=e[t]}),a.push(e)},this.setEarliestDts=function(t){e=t-r.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){c=t},this.setAudioAppendStart=function(t){u=t},this.flush=function(){var t,e,n,i;0!==a.length&&(t=this.trimAdtsFramesByEarliestDts_(a),r.baseMediaDecodeTime=m(r),this.prefixWithSilence_(r,t),r.samples=this.generateSampleTable_(t),n=g.mdat(this.concatenateFrameData_(t)),a=[],e=g.moof(o,[r]),i=new Uint8Array(e.byteLength+n.byteLength),o++,i.set(e),i.set(n,e.byteLength),f(r),this.trigger("data",{track:r,boxes:i})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(t,e){var n,i,r,a,o=0,s=0,l=0;if(e.length&&(n=x.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate),i=Math.ceil(9e4/(t.samplerate/1024)),u&&c&&(o=n-Math.max(u,c),l=(s=Math.floor(o/i))*i),!(s<1||l>45e3))){for((r=T[t.samplerate])||(r=e[0].data),a=0;a<s;a++)e.splice(a,0,{data:r});t.baseMediaDecodeTime-=Math.floor(x.videoTsToAudioTs(l,t.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(t){return r.minSegmentDts>=e?t:(r.minSegmentDts=1/0,t.filter(function(t){return t.dts>=e&&(r.minSegmentDts=Math.min(r.minSegmentDts,t.dts),r.minSegmentPts=r.minSegmentDts,!0)}))},this.generateSampleTable_=function(t){var e,n,i=[];for(e=0;e<t.length;e++)n=t[e],i.push({size:n.data.byteLength,duration:1024});return i},this.concatenateFrameData_=function(t){var e,n,i=0,r=new Uint8Array(h(t));for(e=0;e<t.length;e++)n=t[e],r.set(n.data,i),i+=n.data.byteLength;return r}}).prototype=new i,(d=function(s,l){var e,n,u=0,c=[],h=[];l=l||{},d.prototype.init.call(this),delete s.minPTS,this.gopCache_=[],this.push=function(t){p(s,t),"seq_parameter_set_rbsp"!==t.nalUnitType||e||(e=t.config,s.sps=[t.data],S.forEach(function(t){s[t]=e[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,s.pps=[t.data]),c.push(t)},this.flush=function(){for(var t,e,n,i,r,a;c.length&&"access_unit_delimiter_rbsp"!==c[0].nalUnitType;)c.shift();if(0===c.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(t=this.groupNalsIntoFrames_(c),(n=this.groupFramesIntoGops_(t))[0][0].keyFrame||((e=this.getGopForFusion_(c[0],s))?(n.unshift(e),n.byteLength+=e.byteLength,n.nalCount+=e.nalCount,n.pts=e.pts,n.dts=e.dts,n.duration+=e.duration):n=this.extendFirstKeyFrame_(n)),h.length){var o;if(!(o=l.alignGopsAtEnd?this.alignGopsAtEnd_(n):this.alignGopsAtStart_(n)))return this.gopCache_.unshift({gop:n.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");f(s),n=o}p(s,n),s.samples=this.generateSampleTable_(n),r=g.mdat(this.concatenateNalData_(n)),s.baseMediaDecodeTime=m(s),this.trigger("processedGopsInfo",n.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),this.gopCache_.unshift({gop:n.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.trigger("baseMediaDecodeTime",s.baseMediaDecodeTime),this.trigger("timelineStartInfo",s.timelineStartInfo),i=g.moof(u,[s]),a=new Uint8Array(i.byteLength+r.byteLength),u++,a.set(i),a.set(r,i.byteLength),this.trigger("data",{track:s,boxes:a}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){f(s),n=e=void 0},this.getGopForFusion_=function(t){var e,n,i,r,a,o=1/0;for(a=0;a<this.gopCache_.length;a++)i=(r=this.gopCache_[a]).gop,s.pps&&v(s.pps[0],r.pps[0])&&s.sps&&v(s.sps[0],r.sps[0])&&(i.dts<s.timelineStartInfo.dts||(e=t.dts-i.dts-i.duration)>=-1e4&&e<=45e3&&(!n||o>e)&&(n=r,o=e));return n?n.gop:null},this.extendFirstKeyFrame_=function(t){var e;return!t[0][0].keyFrame&&t.length>1&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},this.groupNalsIntoFrames_=function(t){var e,n,i=[],r=[];for(e=i.byteLength=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(n=t[e]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.push(i),r},this.groupFramesIntoGops_=function(t){var e,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=t[0].pts,i.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,e=0;e<t.length;e++)(n=t[e]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},this.generateSampleTable_=function(t,e){var n,i,r,a,o,s=e||0,l=[];for(n=0;n<t.length;n++)for(a=t[n],i=0;i<a.length;i++)o=a[i],(r={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}).dataOffset=s,r.compositionTimeOffset=o.pts-o.dts,r.duration=o.duration,r.size=4*o.length,r.size+=o.byteLength,o.keyFrame&&(r.flags.dependsOn=2),s+=r.size,l.push(r);return l},this.concatenateNalData_=function(t){var e,n,i,r,a,o,s=0,l=t.byteLength,u=t.nalCount,c=new Uint8Array(l+4*u),h=new DataView(c.buffer);for(e=0;e<t.length;e++)for(r=t[e],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)o=a[i],h.setUint32(s,o.data.byteLength),s+=4,c.set(o.data,s),s+=o.data.byteLength;return c},this.alignGopsAtStart_=function(t){var e,n,i,r,a,o,s,l;for(a=t.byteLength,o=t.nalCount,s=t.duration,e=n=0;e<h.length&&n<t.length&&(i=h[e],r=t[n],i.pts!==r.pts);)r.pts>i.pts?e++:(n++,a-=r.byteLength,o-=r.nalCount,s-=r.duration);return 0===n?t:n===t.length?null:((l=t.slice(n)).byteLength=a,l.duration=s,l.nalCount=o,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(t){var e,n,i,r,a,o,s;for(e=h.length-1,n=t.length-1,a=null,o=!1;e>=0&&n>=0;){if(i=h[e],r=t[n],i.pts===r.pts){o=!0;break}i.pts>r.pts?e--:(e===h.length-1&&(a=n),n--)}if(!o&&null===a)return null;if(0===(s=o?n:a))return t;var l=t.slice(s),u=l.reduce(function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t},{byteLength:0,duration:0,nalCount:0});return l.byteLength=u.byteLength,l.duration=u.duration,l.nalCount=u.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(t){h=t}}).prototype=new i,p=function(t,e){"number"===typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"===typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))},f=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},m=function(t){var e,n=t.minSegmentDts-t.timelineStartInfo.dts;return e=t.timelineStartInfo.baseMediaDecodeTime,e+=n,e=Math.max(0,e),"audio"===t.type&&(e*=t.samplerate/9e4,e=Math.floor(e)),e},(u=function(t,e){this.numberOfTracks=0,this.metadataStream=e,"undefined"!==typeof t.remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,u.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new i,u.prototype.flush=function(t){var e,n,i,r,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,S.forEach(function(t){o.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,E.forEach(function(t){o.info[t]=this.audioTrack[t]},this)),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,i=g.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(i.byteLength),o.initSegment.set(i),o.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(e=this.pendingCaptions[r]).startTime=e.startPts-s,e.startTime/=9e4,e.endTime=e.endPts-s,e.endTime/=9e4,o.captionStreams[e.stream]=!0,o.captions.push(e);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=n.pts-s,n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(l=function(i){var r,a,o=this,n=!0;l.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};(this.transmuxPipeline_=e).type="aac",e.metadataStream=new y.MetadataStream,e.aacStream=new w,e.audioTimestampRolloverStream=new y.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new y.TimestampRolloverStream("timed-metadata"),e.adtsStream=new _,e.coalesceStream=new u(i,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(t){"timed-metadata"!==t.type||e.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new s(a),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new y.MetadataStream,n.packetStream=new y.TransportPacketStream,n.parseStream=new y.TransportParseStream,n.elementaryStream=new y.ElementaryStream,n.videoTimestampRolloverStream=new y.TimestampRolloverStream("video"),n.audioTimestampRolloverStream=new y.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new y.TimestampRolloverStream("timed-metadata"),n.adtsStream=new _,n.h264Stream=new b,n.captionStream=new y.CaptionStream,n.coalesceStream=new u(i,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream),n.elementaryStream.pipe(n.videoTimestampRolloverStream).pipe(n.h264Stream),n.elementaryStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.elementaryStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(t){var e;if("metadata"===t.type){for(e=t.tracks.length;e--;)r||"video"!==t.tracks[e].type?a||"audio"!==t.tracks[e].type||((a=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(r=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime;r&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new d(r,i),n.videoSegmentStream.on("timelineStartInfo",function(t){a&&(a.timelineStartInfo=t,n.audioSegmentStream.setEarliestDts(t.dts))}),n.videoSegmentStream.on("processedGopsInfo",o.trigger.bind(o,"gopInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(t){a&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),a&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new s(a),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream))}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var e=this.transmuxPipeline_;this.baseMediaDecodeTime=t,a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,f(a),a.timelineStartInfo.baseMediaDecodeTime=t,e.audioTimestampRolloverStream&&e.audioTimestampRolloverStream.discontinuity()),r&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[],e.videoTimestampRolloverStream.discontinuity()),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,f(r),e.captionStream.reset(),r.timelineStartInfo.baseMediaDecodeTime=t),e.timedMetadataTimestampRolloverStream&&e.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){if(n){var e=c(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new i,e.exports={Transmuxer:l,VideoSegmentStream:d,AudioSegmentStream:s,AUDIO_PROPERTIES:E,VIDEO_PROPERTIES:S}},{"../aac":38,"../codecs/adts.js":40,"../codecs/h264":41,"../data/silence":42,"../m2ts/m2ts.js":50,"../utils/clock":60,"../utils/stream.js":62,"./mp4-generator.js":56}],59:[function(t,e,n){var r=t("../m2ts/stream-types.js"),a=t("../m2ts/timestamp-rollover-stream.js").handleRollover,f={};f.ts=t("../m2ts/probe.js"),f.aac=t("../aac/probe.js");var o=function(t,e,n){for(var i,r,a,o,s=0,l=188,u=!1;l<t.byteLength;)if(71!==t[s]||71!==t[l])s++,l++;else{switch(i=t.subarray(s,l),f.ts.parseType(i,e.pid)){case"pes":r=f.ts.parsePesType(i,e.table),a=f.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(o=f.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),u=!0)}if(u)break;s+=188,l+=188}for(s=(l=t.byteLength)-188,u=!1;s>=0;)if(71!==t[s]||71!==t[l])s--,l--;else{switch(i=t.subarray(s,l),f.ts.parseType(i,e.pid)){case"pes":r=f.ts.parsePesType(i,e.table),a=f.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(o=f.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),u=!0)}if(u)break;s-=188,l-=188}},s=function(t,e,n){for(var i,r,a,o,s,l,u,c=0,h=188,d=!1,p={data:[],size:0};h<t.byteLength;)if(71!==t[c]||71!==t[h])c++,h++;else{switch(i=t.subarray(c,h),f.ts.parseType(i,e.pid)){case"pes":if(r=f.ts.parsePesType(i,e.table),a=f.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!d&&(o=f.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),d=!0),!n.firstKeyFrame)){if(a&&0!==p.size){for(s=new Uint8Array(p.size),l=0;p.data.length;)u=p.data.shift(),s.set(u,l),l+=u.byteLength;f.ts.videoPacketContainsKeyFrame(s)&&(n.firstKeyFrame=f.ts.parsePesTime(s),n.firstKeyFrame.type="video"),p.size=0}p.data.push(i),p.size+=i.byteLength}}if(d&&n.firstKeyFrame)break;c+=188,h+=188}for(c=(h=t.byteLength)-188,d=!1;c>=0;)if(71!==t[c]||71!==t[h])c--,h--;else{switch(i=t.subarray(c,h),f.ts.parseType(i,e.pid)){case"pes":r=f.ts.parsePesType(i,e.table),a=f.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(o=f.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),d=!0)}if(d)break;c-=188,h-=188}},l=function(t){var e={pid:null,table:null},n={};for(var i in function(t,e){for(var n,i=0,r=188;r<t.byteLength;)if(71!==t[i]||71!==t[r])i++,r++;else{switch(n=t.subarray(i,r),f.ts.parseType(n,e.pid)){case"pat":e.pid||(e.pid=f.ts.parsePat(n));break;case"pmt":e.table||(e.table=f.ts.parsePmt(n))}if(e.pid&&e.table)return;i+=188,r+=188}}(t,e),e.table){if(e.table.hasOwnProperty(i))switch(e.table[i]){case r.H264_STREAM_TYPE:n.video=[],s(t,e,n),0===n.video.length&&delete n.video;break;case r.ADTS_STREAM_TYPE:n.audio=[],o(t,e,n),0===n.audio.length&&delete n.audio}}return n};e.exports={inspect:function(t,e){var n,i;return(i=(n=t)[0]==="I".charCodeAt(0)&&n[1]==="D".charCodeAt(0)&&n[2]==="3".charCodeAt(0)?function(t){for(var e,n=!1,i=0,r=null,a=null,o=0,s=0;t.length-s>=3;){switch(f.aac.parseType(t,s)){case"timed-metadata":if(t.length-s<10){n=!0;break}if((o=f.aac.parseId3TagSize(t,s))>t.length){n=!0;break}null===a&&(e=t.subarray(s,s+o),a=f.aac.parseAacTimestamp(e)),s+=o;break;case"audio":if(t.length-s<7){n=!0;break}if((o=f.aac.parseAdtsSize(t,s))>t.length){n=!0;break}null===r&&(e=t.subarray(s,s+o),r=f.aac.parseSampleRate(e)),i++,s+=o;break;default:s++}if(n)return null}if(null===r||null===a)return null;var l=9e4/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*l,pts:a+1024*i*l}]}}(t):l(t))&&(i.audio||i.video)?(function(t,e){if(t.audio&&t.audio.length){var n=e;"undefined"===typeof n&&(n=t.audio[0].dts),t.audio.forEach(function(t){t.dts=a(t.dts,n),t.pts=a(t.pts,n),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4})}if(t.video&&t.video.length){var i=e;if("undefined"===typeof i&&(i=t.video[0].dts),t.video.forEach(function(t){t.dts=a(t.dts,i),t.pts=a(t.pts,i),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4}),t.firstKeyFrame){var r=t.firstKeyFrame;r.dts=a(r.dts,i),r.pts=a(r.pts,i),r.dtsTime=r.dts/9e4,r.ptsTime=r.dts/9e4}}}(i,e),i):null}}},{"../aac/probe.js":39,"../m2ts/probe.js":52,"../m2ts/stream-types.js":53,"../m2ts/timestamp-rollover-stream.js":54}],60:[function(t,e,n){var i,r,a,o,s,l;i=function(t){return 9e4*t},r=function(t,e){return t*e},a=function(t){return t/9e4},o=function(t,e){return t/e},s=function(t,e){return i(o(t,e))},l=function(t,e){return r(a(t),e)},e.exports={secondsToVideoTs:i,secondsToAudioTs:r,videoTsToSeconds:a,audioTsToSeconds:o,audioTsToVideoTs:s,videoTsToAudioTs:l}},{}],61:[function(t,e,n){"use strict";var i;i=function(i){var r=i.byteLength,a=0,o=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+o},this.loadWord=function(){var t=i.byteLength-r,e=new Uint8Array(4),n=Math.min(4,r);if(0===n)throw new Error("no bytes available");e.set(i.subarray(t,t+n)),a=new DataView(e.buffer).getUint32(0),o=8*n,r-=n},this.skipBits=function(t){var e;o>t||(t-=o,t-=8*(e=Math.floor(t/8)),r-=e,this.loadWord()),a<<=t,o-=t},this.readBits=function(t){var e=Math.min(o,t),n=a>>>32-e;return(o-=e)>0?a<<=e:r>0&&this.loadWord(),(e=t-e)>0?n<<e|this.readBits(e):n},this.skipLeadingZeros=function(){var t;for(t=0;t<o;++t)if(0!==(a&2147483648>>>t))return a<<=t,o-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},e.exports=i},{}],62:[function(t,e,n){var i=function(){this.init=function(){var a={};this.on=function(t,e){a[t]||(a[t]=[]),a[t]=a[t].concat(e)},this.off=function(t,e){var n;return!!a[t]&&(n=a[t].indexOf(e),a[t]=a[t].slice(),a[t].splice(n,1),n>-1)},this.trigger=function(t){var e,n,i,r;if(e=a[t])if(2===arguments.length)for(i=e.length,n=0;n<i;++n)e[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(i=e.length,n=0;n<i;++n)e[n].apply(this,r)}},this.dispose=function(){a={}}}};i.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},i.prototype.push=function(t){this.trigger("data",t)},i.prototype.flush=function(t){this.trigger("done",t)},e.exports=i},{}],63:[function(t,e,n){var i,p;i=this,p={buildAbsoluteURL:function(t,e){if(e=e.trim(),/^[a-z]+:/i.test(e))return e;var n=null,i=null,r=/^([^#]*)(.*)$/.exec(e);r&&(i=r[2],e=r[1]);var a=/^([^\?]*)(.*)$/.exec(e);a&&(n=a[2],e=a[1]);var o=/^([^#]*)(.*)$/.exec(t);o&&(t=o[1]);var s=/^([^\?]*)(.*)$/.exec(t);s&&(t=s[1]);var l=/^(([a-z]+:)?\/\/[^:\/]+(:[0-9]+)?)?(\/?.*)$/i.exec(t);if(!l)throw new Error("Error trying to parse base URL.");var u=l[2]||"",c=l[1]||"",h=l[4];0!==h.indexOf("/")&&""!==c&&(h="/"+h);var d=null;return d=/^\/\//.test(e)?u+"//"+p.buildAbsolutePath("",e.substring(2)):/^\//.test(e)?c+"/"+p.buildAbsolutePath("",e.substring(1)):p.buildAbsolutePath(c+h,e),n&&(d+=n),i&&(d+=i),d},buildAbsolutePath:function(t,e){for(var n,i,r=e,a="",o=t.replace(/[^\/]*$/,r.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;(i=o.indexOf("/../",s))>-1;s=i+n)n=/^\/(?:\.\.\/)*/.exec(o.slice(i))[0].length,a=(a+o.substring(s,i)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(n-1)/3+"}$"),"/");return a+o.substr(s)}},"object"===typeof n&&"object"===typeof e?e.exports=p:"object"===typeof n?n.URLToolkit=p:i.URLToolkit=p},{}],64:[function(i,r,o){(function(t){function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(o,"__esModule",{value:!0});var n=e(i("global/window")),a=e("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),s=function(t){return isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t};o.default={addTextTrackData:function(i,t,e){var o,r=n.default.WebKitDataCue||n.default.VTTCue;t&&t.forEach(function(t){var e=t.stream;this.inbandTextTracks_[e].addCue(new r(t.startTime+this.timestampOffset,t.endTime+this.timestampOffset,t.text))},i),e&&(o=s(i.mediaSource_.duration),e.forEach(function(t){var i=t.cueTime+this.timestampOffset;t.frames.forEach(function(t){var e,n=new r(i,i,t.value||t.url||t.data||"");n.frame=t,n.value=t,e=n,Object.defineProperties(e.frame,{id:{get:function(){return a.default.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return a.default.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return a.default.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}}),this.metadataTrack_.addCue(n)},this)},i),i.metadataTrack_&&i.metadataTrack_.cues&&i.metadataTrack_.cues.length&&function(){for(var t=i.metadataTrack_.cues,e=[],n=0;n<t.length;n++)t[n]&&e.push(t[n]);var r=e.reduce(function(t,e){var n=t[e.startTime]||[];return n.push(e),t[e.startTime]=n,t},{}),a=Object.keys(r).sort(function(t,e){return Number(t)-Number(e)});a.forEach(function(t,e){var n=r[t],i=Number(a[e+1])||o;n.forEach(function(t){t.endTime=i})})}())},durationOfVideo:s},r.exports=o.default}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"global/window":32}],65:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});n.default={isAudioCodec:function(t){return/mp4a\.\d+.\d+/i.test(t)},parseContentType:function(t){var r={type:"",parameters:{}},e=t.trim().split(";");return r.type=e.shift().trim(),e.forEach(function(t){var e=t.trim().split("=");if(e.length>1){var n=e[0].replace(/"/g,"").trim(),i=e[1].replace(/"/g,"").trim();r.parameters[n]=i}}),r},isVideoCodec:function(t){return/avc1\.[\da-f]+/i.test(t)},translateLegacyCodecs:function(t){return t.map(function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t,e,n){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})}},e.exports=n.default},{}],66:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function(t,e,n){var i=e.player_;if(n.captions&&n.captions.length)for(var r in t.inbandTextTracks_||(t.inbandTextTracks_={}),n.captionStreams)if(!t.inbandTextTracks_[r]){i.tech_.trigger({type:"usage",name:"hls-608"});var a=i.textTracks().getTrackById(r);t.inbandTextTracks_[r]=a||i.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}n.metadata&&n.metadata.length&&!t.metadataTrack_&&(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)},e.exports=n.default},{}],67:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});n.default={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768},e.exports=n.default},{}],68:[function(c,h,d){(function(t){Object.defineProperty(d,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function n(t){return t&&t.__esModule?t:{default:t}}var i=n(c("global/document")),r=n("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),a=n(c("./flash-source-buffer")),o=n(c("./flash-constants")),s=c("./codec-utils"),l=function(t){function n(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(t){e.swfObj=i.default.getElementById(t.swfId),e.player_=(0,r.default)(e.swfObj.parentNode),e.tech_=e.swfObj.tech,e.readyState="open",e.tech_.on("seeking",function(){for(var t=e.sourceBuffers.length;t--;)e.sourceBuffers[t].abort()}),e.swfObj&&e.swfObj.vjs_load()})}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r["default"].EventTarget),e(n,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(t){var e=(0,s.parseContentType)(t),n=void 0;if("video/mp2t"!==e.type&&"audio/mp2t"!==e.type)throw new Error("NotSupportedError (Video.js)");return n=new a.default(this),this.sourceBuffers.push(n),n}},{key:"endOfStream",value:function(t){"network"===t?this.tech_.error(2):"decode"===t&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),n}();d.default=l;try{Object.defineProperty(l.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function(t){var e=void 0,n=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",t),t<n)for(e=0;e<this.sourceBuffers.length;e++)this.sourceBuffers[e].remove(t,n);return t}})}catch(t){l.prototype.duration=NaN}for(var u in o.default)l[u]=o.default[u];h.exports=d.default}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./codec-utils":65,"./flash-constants":67,"./flash-source-buffer":69,"global/document":31}],69:[function(v,g,y){(function(t){Object.defineProperty(y,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function n(t){return t&&t.__esModule?t:{default:t}}var s=n(v("global/window")),o=n("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),l=n(v("mux.js/lib/flv")),u=n(v("./remove-cues-from-track")),i=n(v("./create-text-tracks-if-necessary")),r=v("./add-text-track-data"),c=n(v("./flash-transmuxer-worker")),h=n(v("webworkify")),d=n(v("./flash-constants")),p=function(t){s.default.setTimeout(t,d.default.TIME_BETWEEN_CHUNKS)},f=function(){return Math.random().toString(36).slice(2,8)},m=function(t,e){("number"!==typeof e||e<0)&&(e=0);var n=Math.pow(10,e);return Math.round(t*n)/n},a=function(t){function a(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(a.prototype),"constructor",this).call(this);var n;this.chunkSize_=d.default.BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource_=t,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.updating=!1,this.timestampOffset_=0,n=s.default.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(l.default.getFlvHeader())));var i=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+i+f(),this.flashEncodedDataName_="vjs_flashEncodedData_"+i+f(),s.default[this.flashEncodedHeaderName_]=function(){return delete s.default[e.flashEncodedHeaderName_],n},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_),this.transmuxer_=(0,h.default)(c.default),this.transmuxer_.postMessage({action:"init",options:{}}),this.transmuxer_.onmessage=function(t){"data"===t.data.action&&e.receiveBuffer_(t.data.segment)},this.one("updateend",function(){e.mediaSource_.tech_.trigger("loadedmetadata")}),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"===typeof t&&t>=0&&(this.timestampOffset_=t,this.mediaSource_.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.transmuxer_.postMessage({action:"reset"}))}}),Object.defineProperty(this,"buffered",{get:function(){if(!this.mediaSource_||!this.mediaSource_.swfObj||!("vjs_getProperty"in this.mediaSource_.swfObj))return o.default.createTimeRange();var t=this.mediaSource_.swfObj.vjs_getProperty("buffered");return t&&t.length&&(t[0][0]=m(t[0][0],3),t[0][1]=m(t[0][1],3)),o.default.createTimeRanges(t)}}),this.mediaSource_.player_.on("seeked",function(){if((0,u.default)(0,1/0,e.metadataTrack_),e.inbandTextTracks_)for(var t in e.inbandTextTracks_)(0,u.default)(0,1/0,e.inbandTextTracks_[t])});var r=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",r),this.mediaSource_.player_.tech_.hls.on("dispose",function(){e.transmuxer_.terminate(),e.mediaSource_.player_.tech_.off("hls-reset",r)})}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,o["default"].EventTarget),e(a,[{key:"appendBuffer",value:function(t){var e=void 0;if(this.updating)throw(e=new Error("SourceBuffer.append() cannot be called while an update is in progress")).name="InvalidStateError",e.code=11,e;this.updating=!0,this.mediaSource_.readyState="open",this.trigger({type:"update"}),this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource_.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(t,e){if((0,u.default)(t,e,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,u.default)(t,e,this.inbandTextTracks_[n]);this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(e){var n=this;(0,i.default)(this,this.mediaSource_,e),(0,r.addTextTrackData)(this,e.captions,e.metadata),p(function(){var t=n.convertTagsToData_(e);0===n.buffer_.length&&p(n.processBuffer_.bind(n)),t&&(n.buffer_.push(t),n.bufferSize_+=t.byteLength)})}},{key:"processBuffer_",value:function(){var t=this,e=d.default.BYTES_PER_CHUNK;if(this.buffer_.length){var n=this.buffer_[0].subarray(0,e);n.byteLength<e||this.buffer_[0].byteLength===e?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(e),this.bufferSize_-=n.byteLength;for(var i=[],r=n.byteLength,a=0;a<r;a++)i.push(String.fromCharCode(n[a]));var o=s.default.btoa(i.join(""));s.default[this.flashEncodedDataName_]=function(){return p(t.processBuffer_.bind(t)),delete s.default[t.flashEncodedDataName_],o},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}else!1!==this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(t){var e=0,n=this.mediaSource_.tech_,i=0,r=void 0,a=t.tags.videoTags,o=t.tags.audioTags;if(isNaN(this.basePtsOffset_)&&(a.length||o.length)){var s=a[0]||{pts:1/0},l=o[0]||{pts:1/0};this.basePtsOffset_=Math.min(l.pts,s.pts)}n.seeking()&&(this.videoBufferEnd_=NaN,this.audioBufferEnd_=NaN),isNaN(this.videoBufferEnd_)?(n.buffered().length&&(i=n.buffered().end(0)-this.timestampOffset),n.seeking()&&(i=Math.max(i,n.currentTime()-this.timestampOffset)),i*=1e3,i+=this.basePtsOffset_):i=this.videoBufferEnd_+.1;var u=a.length;if(u&&a[u-1].pts>=i){for(;--u;){var c=a[u];if(!(c.pts>i)&&(c.keyFrame||c.metaDataTag))break}for(;u;){if(!a[u-1].metaDataTag)break;u--}}var h=a.slice(u),d=void 0;for(d=isNaN(this.audioBufferEnd_)?i:this.audioBufferEnd_+.1,h.length&&(d=Math.min(d,h[0].pts)),u=0;u<o.length&&!(o[u].pts>=d);)u++;var p=o.slice(u);p.length&&(this.audioBufferEnd_=p[p.length-1].pts),h.length&&(this.videoBufferEnd_=h[h.length-1].pts);var f=this.getOrderedTags_(h,p);if(0!==f.length){if(f[0].pts<i&&n.seeking()){var m=n.currentTime()-(i-f[0].pts)/1e3;m<1/30&&(m=0);try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(m)}catch(t){}}for(var v=0;v<f.length;v++)e+=f[v].bytes.byteLength;r=new Uint8Array(e);v=0;for(var g=0;v<f.length;v++)r.set(f[v].bytes,g),g+=f[v].bytes.byteLength;return r}}},{key:"getOrderedTags_",value:function(t,e){for(var n=void 0,i=[];t.length||e.length;)n=t.length?e.length&&e[0].dts<t[0].dts?e.shift():t.shift():e.shift(),i.push(n);return i}},{key:"onHlsReset_",value:function(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]),a}();y.default=a,g.exports=y.default}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./add-text-track-data":64,"./create-text-tracks-if-necessary":66,"./flash-constants":67,"./flash-transmuxer-worker":70,"./remove-cues-from-track":72,"global/window":32,"mux.js/lib/flv":46,webworkify:76}],70:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function r(t){return t&&t.__esModule?t:{default:t}}var a=r(t("global/window")),o=r(t("mux.js/lib/flv")),s=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t||{},this.init()}return i(e,[{key:"init",value:function(){var t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new o.default.Transmuxer(this.options),(t=this.transmuxer).on("data",function(t){a.default.postMessage({action:"data",segment:t})}),t.on("done",function(t){a.default.postMessage({action:"done"})})}},{key:"push",value:function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)}},{key:"reset",value:function(){this.init()}},{key:"flush",value:function(){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}}]),e}(),l=function(t){t.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new s(t.data.options):(this.messageHandlers||(this.messageHandlers=new s),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}};n.default=function(t){return new l(t)},e.exports=n.default},{"global/window":32,"mux.js/lib/flv":46}],71:[function(c,h,d){(function(t){Object.defineProperty(d,"__esModule",{value:!0});var n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function e(t){return t&&t.__esModule?t:{default:t}}var i=e(c("global/window")),r=e(c("global/document")),o=e("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),a=e(c("./virtual-source-buffer")),s=c("./add-text-track-data"),l=c("./codec-utils"),u=function(t){function e(){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var t=void 0;for(t in this.nativeMediaSource_=new i.default.MediaSource,this.nativeMediaSource_)t in e.prototype||"function"!==typeof this.nativeMediaSource_[t]||(this[t]=this.nativeMediaSource_[t].bind(this.nativeMediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(t){(this.duration_=t)===1/0||(this.nativeMediaSource_.duration=t)}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===1/0?o.default.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){if(a.activeSourceBuffers_.length=0,1===a.sourceBuffers.length){var t=a.sourceBuffers[0];return t.appendAudioInitSegment_=!0,t.audioDisabled_=!t.audioCodec_,void a.activeSourceBuffers_.push(t)}for(var e=!1,n=!0,i=0;i<a.player_.audioTracks().length;i++){var r=a.player_.audioTracks()[i];if(r.enabled&&"main"!==r.kind){n=!(e=!0);break}}a.sourceBuffers.forEach(function(t){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=e;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,n=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=n))return;a.activeSourceBuffers_.push(t)})},this.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(t){t.appendAudioInitSegment_=!0})},this.onHlsReset_=function(){a.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.postMessage({action:"resetCaptions"})})},this.onHlsSegmentTimeMapping_=function(e){a.sourceBuffers.forEach(function(t){return t.timeMapping_=e.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(t){this.nativeMediaSource_.addEventListener(t,this.trigger.bind(this))},this),this.on("sourceopen",function(t){var e=r.default.querySelector('[src="'+a.url_+'"]');e&&(a.player_=(0,o.default)(e.parentNode),a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_))}),this.on("sourceended",function(t){for(var e=(0,s.durationOfVideo)(a.duration),n=0;n<a.sourceBuffers.length;n++){var i=a.sourceBuffers[n],r=i.metadataTrack_&&i.metadataTrack_.cues;r&&r.length&&(r[r.length-1].endTime=e)}}),this.on("sourceclose",function(t){this.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o["default"].EventTarget),n(e,[{key:"addSeekableRange_",value:function(t,e){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(e>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=e)}},{key:"addSourceBuffer",value:function(t){var e=void 0,n=(0,l.parseContentType)(t);if(/^(video|audio)\/mp2t$/i.test(n.type)){var i=[];n.parameters&&n.parameters.codecs&&(i=n.parameters.codecs.split(","),i=(i=(0,l.translateLegacyCodecs)(i)).filter(function(t){return(0,l.isAudioCodec)(t)||(0,l.isVideoCodec)(t)})),0===i.length&&(i=["avc1.4d400d","mp4a.40.2"]),e=new a.default(this,i),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),e.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else e=this.nativeMediaSource_.addSourceBuffer(t);return this.sourceBuffers.push(e),e}}]),e}();d.default=u,h.exports=d.default}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./add-text-track-data":64,"./codec-utils":65,"./virtual-source-buffer":75,"global/document":31,"global/window":32}],72:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function(t,e,n){var i=void 0,r=void 0;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime<=e&&r.endTime>=t&&n.removeCue(r)},e.exports=n.default},{}],73:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function r(t){return t&&t.__esModule?t:{default:t}}var a=r(t("global/window")),o=r(t("mux.js/lib/mp4")),s=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t||{},this.init()}return i(e,[{key:"init",value:function(){var t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new o.default.Transmuxer(this.options),(t=this.transmuxer).on("data",function(t){var e=t.initSegment;t.initSegment={data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength};var n=t.data;t.data=n.buffer,a.default.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.captionStream&&t.captionStream.on("data",function(t){a.default.postMessage({action:"caption",data:t})}),t.on("done",function(t){a.default.postMessage({action:"done"})}),t.on("gopInfo",function(t){a.default.postMessage({action:"gopInfo",gopInfo:t})})}},{key:"push",value:function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(t){var e=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*e))}},{key:"setAudioAppendStart",value:function(t){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*t.appendStart))}},{key:"flush",value:function(t){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())}}]),e}(),l=function(t){t.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new s(t.data.options):(this.messageHandlers||(this.messageHandlers=new s),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}};n.default=function(t){return new l(t)},e.exports=n.default},{"global/window":32,"mux.js/lib/mp4":55}],74:[function(d,t,p){(function(t){function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(p,"__esModule",{value:!0});var n=e(d("global/window")),i=e(d("./flash-media-source")),r=e(d("./html-media-source")),a=e("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),o=0,s={mode:"auto"};a.default.mediaSources={};var l=function(t,e){var n=a.default.mediaSources[t];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:e})},u=function(){return!!n.default.MediaSource&&!!n.default.MediaSource.isTypeSupported&&n.default.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},c=function(t){var e=a.default.mergeOptions(s,t);if(this.MediaSource={open:l,supportsNativeMediaSources:u},"html5"===e.mode||"auto"===e.mode&&u())return new r.default;if(a.default.getTech("Flash"))return new i.default;throw new Error("Cannot use Flash or Html5 to create a MediaSource for this video")};(p.MediaSource=c).open=l,c.supportsNativeMediaSources=u;var h={createObjectURL:function(t){var e=void 0;return t instanceof r.default?(e=n.default.URL.createObjectURL(t.nativeMediaSource_),t.url_=e):t instanceof i.default?(e="blob:vjs-media-source/"+o,o++,a.default.mediaSources[e]=t,e):(e=n.default.URL.createObjectURL(t),t.url_=e)}};p.URL=h,a.default.MediaSource=c,a.default.URL=h}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./flash-media-source":68,"./html-media-source":71,"global/window":32}],75:[function(f,t,m){(function(t){Object.defineProperty(m,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function n(t){return t&&t.__esModule?t:{default:t}}var l=n("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),i=n(f("./create-text-tracks-if-necessary")),a=n(f("./remove-cues-from-track")),o=f("./add-text-track-data"),s=n(f("webworkify")),u=n(f("./transmuxer-worker")),c=f("./codec-utils"),h=function(t,e,n){if(!e||!t.length)return[];var i=Math.ceil(9e4*(e.currentTime()-n+3)),r=void 0;for(r=0;r<t.length&&!(t[r].pts>i);r++);return t.slice(r)};m.gopsSafeToAlignWith=h;var d=function(t,e,n){if(!e.length)return t;if(n)return e.slice();for(var i=e[0].pts,r=0;r<t.length&&!(t[r].pts>=i);r++);return t.slice(0,r).concat(e)};m.updateGopBuffer=d;var p=function(t,e,n,i){for(var r=Math.ceil(9e4*(e-i)),a=Math.ceil(9e4*(n-i)),o=t.slice(),s=t.length;s--&&!(t[s].pts<=a););if(-1===s)return o;for(var l=s+1;l--&&!(t[l].pts<=r););return l=Math.max(l,0),o.splice(l,s-l+1),o};m.removeGopBuffer=p;var r=function(t){function r(t,e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,l.default.EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=t,this.codecs_=e,this.audioCodec_=null,this.videoCodec_=null,this.audioDisabled_=!1,this.appendAudioInitSegment_=!0,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=l.default.browser.IE_VERSION>=11;var i={remux:!1,alignGopsAtEnd:this.safeAppend_};this.codecs_.forEach(function(t){(0,c.isAudioCodec)(t)?n.audioCodec_=t:(0,c.isVideoCodec)(t)&&(n.videoCodec_=t)}),this.transmuxer_=(0,s.default)(u.default),this.transmuxer_.postMessage({action:"init",options:i}),this.transmuxer_.onmessage=function(t){return"data"===t.data.action?n.data_(t):"done"===t.data.action?n.done_(t):"gopInfo"===t.data.action?n.appendGopInfo_(t):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"===typeof t&&t>=0&&(this.timestampOffset_=t,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(t){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=t),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=t)}}),Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var t=null,e=null,n=0,i=[],r=[];if(!this.videoBuffer_&&!this.audioBuffer_)return l.default.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return l.default.createTimeRange();for(var a=this.videoBuffer_.buffered,o=this.audioBuffer_.buffered,s=a.length;s--;)i.push({time:a.start(s),type:"start"}),i.push({time:a.end(s),type:"end"});for(s=o.length;s--;)i.push({time:o.start(s),type:"start"}),i.push({time:o.end(s),type:"end"});for(i.sort(function(t,e){return t.time-e.time}),s=0;s<i.length;s++)"start"===i[s].type?2===++n&&(t=i[s].time):"end"===i[s].type&&1===--n&&(e=i[s].time),null!==t&&null!==e&&(r.push([t,e]),e=t=null);return l.default.createTimeRanges(r)}})}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,l["default"].EventTarget),e(r,[{key:"data_",value:function(t){var e=t.data.segment;e.data=new Uint8Array(e.data,t.data.byteOffset,t.data.byteLength),e.initSegment=new Uint8Array(e.initSegment.data,e.initSegment.byteOffset,e.initSegment.byteLength),(0,i.default)(this,this.mediaSource_,e),this.pendingBuffers_.push(e)}},{key:"done_",value:function(t){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function(){var i=this,r=["audio","video"];r.forEach(function(e){if(i[e+"Codec_"]&&!i[e+"Buffer_"]){var n=null;if(i.mediaSource_[e+"Buffer_"])(n=i.mediaSource_[e+"Buffer_"]).updating=!1;else{var t=e+'/mp4;codecs="'+i[e+"Codec_"]+'"';n=function(t,e){var n=t.addSourceBuffer(e),i=Object.create(null);i.updating=!1,i.realBuffer_=n;var r=function(e){"function"===typeof n[e]?i[e]=function(){return n[e].apply(n,arguments)}:"undefined"===typeof i[e]&&Object.defineProperty(i,e,{get:function(){return n[e]},set:function(t){return n[e]=t}})};for(var a in n)r(a);return i}(i.mediaSource_.nativeMediaSource_,t),i.mediaSource_[e+"Buffer_"]=n}i[e+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(t){n.addEventListener(t,function(){if("audio"!==e||!i.audioDisabled_)return"updateend"===t&&(i[e+"Buffer_"].updating=!1),r.every(function(t){return!("audio"!==t||!i.audioDisabled_)||(e===t||!i[t+"Buffer_"]||!i[t+"Buffer_"].updating)})?i.trigger(t):void 0})})}})}},{key:"appendBuffer",value:function(t){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var e=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:e.end(e.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:h(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(t){this.gopBuffer_=d(this.gopBuffer_,t.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(t,e){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(t,e),this.gopBuffer_=p(this.gopBuffer_,t,e,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(t,e)),(0,a.default)(t,e,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,a.default)(t,e,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};t=this.pendingBuffers_.reduce(function(t,e){var n=e.type,i=e.data,r=e.initSegment;return t[n].segments.push(i),t[n].bytes+=i.byteLength,t[n].initSegment=r,e.captions&&(t.captions=t.captions.concat(e.captions)),e.info&&(t[n].info=e.info),e.metadata&&(t.metadata=t.metadata.concat(e.metadata)),t},t),this.videoBuffer_||this.audioBuffer_||(0===t.video.bytes&&(this.videoCodec_=null),0===t.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),t.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info}),t.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:t.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(t.audio.segments.unshift(t.audio.initSegment),t.audio.bytes+=t.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var e=!1;this.videoBuffer_&&t.video.bytes?(t.video.segments.unshift(t.video.initSegment),t.video.bytes+=t.video.initSegment.byteLength,this.concatAndAppendSegments_(t.video,this.videoBuffer_),(0,o.addTextTrackData)(this,t.captions,t.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(e=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(t.audio,this.audioBuffer_),this.pendingBuffers_.length=0,e&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(t,e){var n=0,i=void 0;if(t.bytes){i=new Uint8Array(t.bytes),t.segments.forEach(function(t){i.set(t,n),n+=t.byteLength});try{e.updating=!0,e.appendBuffer(i)}catch(t){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:t.message,originalError:t})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),r}();m.default=r}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./add-text-track-data":64,"./codec-utils":65,"./create-text-tracks-if-necessary":66,"./remove-cues-from-track":72,"./transmuxer-worker":73,webworkify:76}],76:[function(t,e,n){var h=arguments[3],d=arguments[4],p=arguments[5],f=JSON.stringify;e.exports=function(t){for(var e,n=Object.keys(p),i=0,r=n.length;i<r;i++){var a=n[i];if(p[a].exports===t){e=a;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var o={};for(i=0,r=n.length;i<r;i++){o[a=n[i]]=a}d[e]=[Function(["require","module","exports"],"("+t+")(self)"),o]}var s=Math.floor(Math.pow(16,8)*Math.random()).toString(16),l={};l[e]=e,d[s]=[Function(["require"],"require("+f(e)+")(self)"),l];var u="("+h+")({"+Object.keys(d).map(function(t){return f(t)+":["+d[t][0]+","+f(d[t][1])+"]"}).join(",")+"},{},["+f(s)+"])",c=C.URL||C.webkitURL||C.mozURL||C.msURL;return new Worker(c.createObjectURL(new Blob([u],{type:"text/javascript"})))}},{}],77:[function(A,M,t){(function(t){var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),o=function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}};function n(t){return t&&t.__esModule?t:{default:t}}var s=n(A("global/document")),i=n(A("./playlist-loader")),r=n(A("./playlist")),a=n(A("./xhr")),l=A("aes-decrypter"),u=n(A("./bin-utils")),c=A("videojs-contrib-media-sources"),h=n(A("m3u8-parser")),d=n("undefined"!==typeof C?C.videojs:"undefined"!==typeof t?t.videojs:null),p=A("./master-playlist-controller"),f=n(A("./config")),m=n(A("./rendition-mixin")),v=n(A("global/window")),g=n(A("./playback-watcher")),y=n(A("./reload-source-on-error")),_=A("./playlist-selectors.js"),b={PlaylistLoader:i.default,Playlist:r.default,Decrypter:l.Decrypter,AsyncStream:l.AsyncStream,decrypt:l.decrypt,utils:u.default,STANDARD_PLAYLIST_SELECTOR:_.lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:_.lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:_.comparePlaylistBandwidth,comparePlaylistResolution:_.comparePlaylistResolution,xhr:(0,a.default)()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(e){Object.defineProperty(b,e,{get:function(){return d.default.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),f.default[e]},set:function(t){d.default.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!==typeof t||t<0?d.default.log.warn("value of Hls."+e+" must be greater than or equal to 0"):f.default[e]=t}})});var w=function(t,e){for(var n=e.media(),i=-1,r=0;r<t.length;r++)if(t[r].id===n.uri){i=r;break}t.selectedIndex_=i,t.trigger({selectedIndex:i,type:"change"})};b.canPlaySource=function(){return d.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},b.supportsNativeHls=function(){var e=s.default.createElement("video");if(!d.default.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),b.isSupported=function(){return d.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var T=d.default.getComponent("Component"),x=function(t){function a(t,e,n){var i=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),o(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e,n.hls),e.options_&&e.options_.playerId){var r=(0,d.default)(e.options_.playerId);r.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function(){return d.default.log.warn("player.hls is deprecated. Use player.tech_.hls instead."),e.trigger({type:"usage",name:"hls-player-access"}),i}})}if(this.tech_=e,this.source_=t,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");this.on(s.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(t){var e=s.default.fullscreenElement||s.default.webkitFullscreenElement||s.default.mozFullScreenElement||s.default.msFullscreenElement;e&&e.contains(i.tech_.el())&&i.masterPlaylistController_.fastQualityChange_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,T),e(a,[{key:"setOptions_",value:function(){var e=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth,["withCredentials","bandwidth"].forEach(function(t){"undefined"!==typeof e.source_[t]&&(e.options_[t]=e.source_[t])}),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(t){var e=this;t&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=b,this.masterPlaylistController_=new p.MasterPlaylistController(this.options_),this.playbackWatcher_=new g.default(d.default.mergeOptions(this.options_,{seekable:function(){return e.seekable()}})),this.masterPlaylistController_.on("error",function(){d.default.players[e.tech_.options_.playerId].error(e.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):b.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=b.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var t=1/(this.bandwidth||1),e=void 0;return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){d.default.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return e.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return e.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return e.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return e.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return e.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return e.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return e.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return e.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){(0,m.default)(e)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return e.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(d.default.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var n=this,t=d.default.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e,t;e=n.qualityLevels_,(t=n).representations().forEach(function(t){e.addQualityLevel(t)}),w(e,t.playlists)}),this.playlists.on("mediachange",function(){w(n.qualityLevels_,n.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),o(Object.getPrototypeOf(a.prototype),"dispose",this).call(this)}}]),a}(),E=function i(r){return{canHandleSource:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=d.default.mergeOptions(d.default.options,e);return(!n.hls||!n.hls.mode||n.hls.mode===r)&&i.canPlayType(t.type,n)},handleSource:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=d.default.mergeOptions(d.default.options,n,{hls:{mode:r}});return"flash"===r&&e.setTimeout(function(){e.trigger("loadstart")},1),e.hls=new x(t,e,i),e.hls.xhr=(0,a.default)(),e.hls.src(t.src),e.hls},canPlayType:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=d.default.mergeOptions(d.default.options,e);return i.canPlayType(t,n)?"maybe":""}}};E.canPlayType=function(t,e){if(d.default.browser.IE_VERSION&&d.default.browser.IE_VERSION<=10)return!1;return!(!e.hls.overrideNative&&b.supportsNativeHls)&&/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(t)},"undefined"!==typeof d.default.MediaSource&&"undefined"!==typeof d.default.URL||(d.default.MediaSource=c.MediaSource,d.default.URL=c.URL);var S=d.default.getTech("Flash");c.MediaSource.supportsNativeMediaSources()&&d.default.getTech("Html5").registerSourceHandler(E("html5"),0),v.default.Uint8Array&&S&&S.registerSourceHandler(E("flash")),d.default.HlsHandler=x,d.default.HlsSourceHandler=E,d.default.Hls=b,d.default.use||d.default.registerComponent("Hls",b),d.default.m3u8=h.default,d.default.options.hls=d.default.options.hls||{},d.default.registerPlugin?d.default.registerPlugin("reloadSourceOnError",y.default):d.default.plugin("reloadSourceOnError",y.default),M.exports={Hls:b,HlsHandler:x,HlsSourceHandler:E}}).call(this,"undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof C?C:{})},{"./bin-utils":2,"./config":3,"./master-playlist-controller":5,"./playback-watcher":8,"./playlist":11,"./playlist-loader":9,"./playlist-selectors.js":10,"./reload-source-on-error":13,"./rendition-mixin":14,"./xhr":21,"aes-decrypter":25,"global/document":31,"global/window":32,"m3u8-parser":33,"videojs-contrib-media-sources":74}]},{},[77])(77)},e.exports=t()}).call(t)}).call(window)}).call(t,n(2))},function(e,t,n){(function(s){n(0);(function(){var _,t;(_=(_=this)||{}).videojs=n(0),t=function(){return function r(a,o,s){function l(n,t){if(!o[n]){if(!a[n]){if(u)return u(n,!0);var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}var i=o[n]={exports:{}};a[n][0].call(i.exports,function(t){var e=a[n][1][t];return l(e||t)},i,i.exports,r,a,o,s)}return o[n].exports}for(var u=!1,t=0;t<s.length;t++)l(s[t]);return l}({1:[function(i,r,o){(function(t){function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(o,"__esModule",{value:!0});var n=e(i("global/window")),a=e("undefined"!==typeof _?_.videojs:"undefined"!==typeof t?t.videojs:null),s=function(t){return isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t};o.default={addTextTrackData:function(i,t,e){var o,r=n.default.WebKitDataCue||n.default.VTTCue;t&&t.forEach(function(t){var e=t.stream;this.inbandTextTracks_[e].addCue(new r(t.startTime+this.timestampOffset,t.endTime+this.timestampOffset,t.text))},i),e&&(o=s(i.mediaSource_.duration),e.forEach(function(t){var i=t.cueTime+this.timestampOffset;t.frames.forEach(function(t){var e,n=new r(i,i,t.value||t.url||t.data||"");n.frame=t,n.value=t,e=n,Object.defineProperties(e.frame,{id:{get:function(){return a.default.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return a.default.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return a.default.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}}),this.metadataTrack_.addCue(n)},this)},i),i.metadataTrack_&&i.metadataTrack_.cues&&i.metadataTrack_.cues.length&&function(){for(var t=i.metadataTrack_.cues,e=[],n=0;n<t.length;n++)t[n]&&e.push(t[n]);var r=e.reduce(function(t,e){var n=t[e.startTime]||[];return n.push(e),t[e.startTime]=n,t},{}),a=Object.keys(r).sort(function(t,e){return Number(t)-Number(e)});a.forEach(function(t,e){var n=r[t],i=Number(a[e+1])||o;n.forEach(function(t){t.endTime=i})})}())},durationOfVideo:s},r.exports=o.default}).call(this,"undefined"!==typeof s?s:"undefined"!==typeof self?self:"undefined"!==typeof _?_:{})},{"global/window":14}],2:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});n.default={isAudioCodec:function(t){return/mp4a\.\d+.\d+/i.test(t)},parseContentType:function(t){var r={type:"",parameters:{}},e=t.trim().split(";");return r.type=e.shift().trim(),e.forEach(function(t){var e=t.trim().split("=");if(e.length>1){var n=e[0].replace(/"/g,"").trim(),i=e[1].replace(/"/g,"").trim();r.parameters[n]=i}}),r},isVideoCodec:function(t){return/avc1\.[\da-f]+/i.test(t)},translateLegacyCodecs:function(t){return t.map(function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t,e,n){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})}},e.exports=n.default},{}],3:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function(t,e,n){var i=e.player_;if(n.captions&&n.captions.length)for(var r in t.inbandTextTracks_||(t.inbandTextTracks_={}),n.captionStreams)if(!t.inbandTextTracks_[r]){i.tech_.trigger({type:"usage",name:"hls-608"});var a=i.textTracks().getTrackById(r);t.inbandTextTracks_[r]=a||i.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}n.metadata&&n.metadata.length&&!t.metadataTrack_&&(t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)},e.exports=n.default},{}],4:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});n.default={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768},e.exports=n.default},{}],5:[function(c,h,d){(function(t){Object.defineProperty(d,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function n(t){return t&&t.__esModule?t:{default:t}}var i=n(c("global/document")),r=n("undefined"!==typeof _?_.videojs:"undefined"!==typeof t?t.videojs:null),a=n(c("./flash-source-buffer")),o=n(c("./flash-constants")),s=c("./codec-utils"),l=function(t){function n(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(t){e.swfObj=i.default.getElementById(t.swfId),e.player_=(0,r.default)(e.swfObj.parentNode),e.tech_=e.swfObj.tech,e.readyState="open",e.tech_.on("seeking",function(){for(var t=e.sourceBuffers.length;t--;)e.sourceBuffers[t].abort()}),e.swfObj&&e.swfObj.vjs_load()})}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r["default"].EventTarget),e(n,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(t){var e=(0,s.parseContentType)(t),n=void 0;if("video/mp2t"!==e.type&&"audio/mp2t"!==e.type)throw new Error("NotSupportedError (Video.js)");return n=new a.default(this),this.sourceBuffers.push(n),n}},{key:"endOfStream",value:function(t){"network"===t?this.tech_.error(2):"decode"===t&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),n}();d.default=l;try{Object.defineProperty(l.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function(t){var e=void 0,n=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",t),t<n)for(e=0;e<this.sourceBuffers.length;e++)this.sourceBuffers[e].remove(t,n);return t}})}catch(t){l.prototype.duration=NaN}for(var u in o.default)l[u]=o.default[u];h.exports=d.default}).call(this,"undefined"!==typeof s?s:"undefined"!==typeof self?self:"undefined"!==typeof _?_:{})},{"./codec-utils":2,"./flash-constants":4,"./flash-source-buffer":6,"global/document":13}],6:[function(v,g,y){(function(t){Object.defineProperty(y,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function n(t){return t&&t.__esModule?t:{default:t}}var s=n(v("global/window")),o=n("undefined"!==typeof _?_.videojs:"undefined"!==typeof t?t.videojs:null),l=n(v("mux.js/lib/flv")),u=n(v("./remove-cues-from-track")),i=n(v("./create-text-tracks-if-necessary")),r=v("./add-text-track-data"),c=n(v("./flash-transmuxer-worker")),h=n(v("webworkify")),d=n(v("./flash-constants")),p=function(t){s.default.setTimeout(t,d.default.TIME_BETWEEN_CHUNKS)},f=function(){return Math.random().toString(36).slice(2,8)},m=function(t,e){("number"!==typeof e||e<0)&&(e=0);var n=Math.pow(10,e);return Math.round(t*n)/n},a=function(t){function a(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(a.prototype),"constructor",this).call(this);var n;this.chunkSize_=d.default.BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource_=t,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.updating=!1,this.timestampOffset_=0,n=s.default.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(l.default.getFlvHeader())));var i=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+i+f(),this.flashEncodedDataName_="vjs_flashEncodedData_"+i+f(),s.default[this.flashEncodedHeaderName_]=function(){return delete s.default[e.flashEncodedHeaderName_],n},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_),this.transmuxer_=(0,h.default)(c.default),this.transmuxer_.postMessage({action:"init",options:{}}),this.transmuxer_.onmessage=function(t){"data"===t.data.action&&e.receiveBuffer_(t.data.segment)},this.one("updateend",function(){e.mediaSource_.tech_.trigger("loadedmetadata")}),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"===typeof t&&t>=0&&(this.timestampOffset_=t,this.mediaSource_.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.transmuxer_.postMessage({action:"reset"}))}}),Object.defineProperty(this,"buffered",{get:function(){if(!this.mediaSource_||!this.mediaSource_.swfObj||!("vjs_getProperty"in this.mediaSource_.swfObj))return o.default.createTimeRange();var t=this.mediaSource_.swfObj.vjs_getProperty("buffered");return t&&t.length&&(t[0][0]=m(t[0][0],3),t[0][1]=m(t[0][1],3)),o.default.createTimeRanges(t)}}),this.mediaSource_.player_.on("seeked",function(){if((0,u.default)(0,1/0,e.metadataTrack_),e.inbandTextTracks_)for(var t in e.inbandTextTracks_)(0,u.default)(0,1/0,e.inbandTextTracks_[t])});var r=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",r),this.mediaSource_.player_.tech_.hls.on("dispose",function(){e.transmuxer_.terminate(),e.mediaSource_.player_.tech_.off("hls-reset",r)})}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,o["default"].EventTarget),e(a,[{key:"appendBuffer",value:function(t){var e=void 0;if(this.updating)throw(e=new Error("SourceBuffer.append() cannot be called while an update is in progress")).name="InvalidStateError",e.code=11,e;this.updating=!0,this.mediaSource_.readyState="open",this.trigger({type:"update"}),this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource_.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(t,e){if((0,u.default)(t,e,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,u.default)(t,e,this.inbandTextTracks_[n]);this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(e){var n=this;(0,i.default)(this,this.mediaSource_,e),(0,r.addTextTrackData)(this,e.captions,e.metadata),p(function(){var t=n.convertTagsToData_(e);0===n.buffer_.length&&p(n.processBuffer_.bind(n)),t&&(n.buffer_.push(t),n.bufferSize_+=t.byteLength)})}},{key:"processBuffer_",value:function(){var t=this,e=d.default.BYTES_PER_CHUNK;if(this.buffer_.length){var n=this.buffer_[0].subarray(0,e);n.byteLength<e||this.buffer_[0].byteLength===e?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(e),this.bufferSize_-=n.byteLength;for(var i=[],r=n.byteLength,a=0;a<r;a++)i.push(String.fromCharCode(n[a]));var o=s.default.btoa(i.join(""));s.default[this.flashEncodedDataName_]=function(){return p(t.processBuffer_.bind(t)),delete s.default[t.flashEncodedDataName_],o},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}else!1!==this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(t){var e=0,n=this.mediaSource_.tech_,i=0,r=void 0,a=t.tags.videoTags,o=t.tags.audioTags;if(isNaN(this.basePtsOffset_)&&(a.length||o.length)){var s=a[0]||{pts:1/0},l=o[0]||{pts:1/0};this.basePtsOffset_=Math.min(l.pts,s.pts)}n.seeking()&&(this.videoBufferEnd_=NaN,this.audioBufferEnd_=NaN),isNaN(this.videoBufferEnd_)?(n.buffered().length&&(i=n.buffered().end(0)-this.timestampOffset),n.seeking()&&(i=Math.max(i,n.currentTime()-this.timestampOffset)),i*=1e3,i+=this.basePtsOffset_):i=this.videoBufferEnd_+.1;var u=a.length;if(u&&a[u-1].pts>=i){for(;--u;){var c=a[u];if(!(c.pts>i)&&(c.keyFrame||c.metaDataTag))break}for(;u;){if(!a[u-1].metaDataTag)break;u--}}var h=a.slice(u),d=void 0;for(d=isNaN(this.audioBufferEnd_)?i:this.audioBufferEnd_+.1,h.length&&(d=Math.min(d,h[0].pts)),u=0;u<o.length&&!(o[u].pts>=d);)u++;var p=o.slice(u);p.length&&(this.audioBufferEnd_=p[p.length-1].pts),h.length&&(this.videoBufferEnd_=h[h.length-1].pts);var f=this.getOrderedTags_(h,p);if(0!==f.length){if(f[0].pts<i&&n.seeking()){var m=n.currentTime()-(i-f[0].pts)/1e3;m<1/30&&(m=0);try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(m)}catch(t){}}for(var v=0;v<f.length;v++)e+=f[v].bytes.byteLength;r=new Uint8Array(e);v=0;for(var g=0;v<f.length;v++)r.set(f[v].bytes,g),g+=f[v].bytes.byteLength;return r}}},{key:"getOrderedTags_",value:function(t,e){for(var n=void 0,i=[];t.length||e.length;)n=t.length?e.length&&e[0].dts<t[0].dts?e.shift():t.shift():e.shift(),i.push(n);return i}},{key:"onHlsReset_",value:function(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]),a}();y.default=a,g.exports=y.default}).call(this,"undefined"!==typeof s?s:"undefined"!==typeof self?self:"undefined"!==typeof _?_:{})},{"./add-text-track-data":1,"./create-text-tracks-if-necessary":3,"./flash-constants":4,"./flash-transmuxer-worker":7,"./remove-cues-from-track":9,"global/window":14,"mux.js/lib/flv":22,webworkify:36}],7:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function r(t){return t&&t.__esModule?t:{default:t}}var a=r(t("global/window")),o=r(t("mux.js/lib/flv")),s=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t||{},this.init()}return i(e,[{key:"init",value:function(){var t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new o.default.Transmuxer(this.options),(t=this.transmuxer).on("data",function(t){a.default.postMessage({action:"data",segment:t})}),t.on("done",function(t){a.default.postMessage({action:"done"})})}},{key:"push",value:function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)}},{key:"reset",value:function(){this.init()}},{key:"flush",value:function(){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}}]),e}(),l=function(t){t.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new s(t.data.options):(this.messageHandlers||(this.messageHandlers=new s),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}};n.default=function(t){return new l(t)},e.exports=n.default},{"global/window":14,"mux.js/lib/flv":22}],8:[function(c,h,d){(function(t){Object.defineProperty(d,"__esModule",{value:!0});var n=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function e(t){return t&&t.__esModule?t:{default:t}}var i=e(c("global/window")),r=e(c("global/document")),o=e("undefined"!==typeof _?_.videojs:"undefined"!==typeof t?t.videojs:null),a=e(c("./virtual-source-buffer")),s=c("./add-text-track-data"),l=c("./codec-utils"),u=function(t){function e(){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var t=void 0;for(t in this.nativeMediaSource_=new i.default.MediaSource,this.nativeMediaSource_)t in e.prototype||"function"!==typeof this.nativeMediaSource_[t]||(this[t]=this.nativeMediaSource_[t].bind(this.nativeMediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(t){(this.duration_=t)===1/0||(this.nativeMediaSource_.duration=t)}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===1/0?o.default.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){if(a.activeSourceBuffers_.length=0,1===a.sourceBuffers.length){var t=a.sourceBuffers[0];return t.appendAudioInitSegment_=!0,t.audioDisabled_=!t.audioCodec_,void a.activeSourceBuffers_.push(t)}for(var e=!1,n=!0,i=0;i<a.player_.audioTracks().length;i++){var r=a.player_.audioTracks()[i];if(r.enabled&&"main"!==r.kind){n=!(e=!0);break}}a.sourceBuffers.forEach(function(t){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=e;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,n=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=n))return;a.activeSourceBuffers_.push(t)})},this.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(t){t.appendAudioInitSegment_=!0})},this.onHlsReset_=function(){a.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.postMessage({action:"resetCaptions"})})},this.onHlsSegmentTimeMapping_=function(e){a.sourceBuffers.forEach(function(t){return t.timeMapping_=e.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(t){this.nativeMediaSource_.addEventListener(t,this.trigger.bind(this))},this),this.on("sourceopen",function(t){var e=r.default.querySelector('[src="'+a.url_+'"]');e&&(a.player_=(0,o.default)(e.parentNode),a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_))}),this.on("sourceended",function(t){for(var e=(0,s.durationOfVideo)(a.duration),n=0;n<a.sourceBuffers.length;n++){var i=a.sourceBuffers[n],r=i.metadataTrack_&&i.metadataTrack_.cues;r&&r.length&&(r[r.length-1].endTime=e)}}),this.on("sourceclose",function(t){this.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o["default"].EventTarget),n(e,[{key:"addSeekableRange_",value:function(t,e){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(e>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=e)}},{key:"addSourceBuffer",value:function(t){var e=void 0,n=(0,l.parseContentType)(t);if(/^(video|audio)\/mp2t$/i.test(n.type)){var i=[];n.parameters&&n.parameters.codecs&&(i=n.parameters.codecs.split(","),i=(i=(0,l.translateLegacyCodecs)(i)).filter(function(t){return(0,l.isAudioCodec)(t)||(0,l.isVideoCodec)(t)})),0===i.length&&(i=["avc1.4d400d","mp4a.40.2"]),e=new a.default(this,i),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),e.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else e=this.nativeMediaSource_.addSourceBuffer(t);return this.sourceBuffers.push(e),e}}]),e}();d.default=u,h.exports=d.default}).call(this,"undefined"!==typeof s?s:"undefined"!==typeof self?self:"undefined"!==typeof _?_:{})},{"./add-text-track-data":1,"./codec-utils":2,"./virtual-source-buffer":11,"global/document":13,"global/window":14}],9:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function(t,e,n){var i=void 0,r=void 0;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime<=e&&r.endTime>=t&&n.removeCue(r)},e.exports=n.default},{}],10:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function r(t){return t&&t.__esModule?t:{default:t}}var a=r(t("global/window")),o=r(t("mux.js/lib/mp4")),s=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t||{},this.init()}return i(e,[{key:"init",value:function(){var t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new o.default.Transmuxer(this.options),(t=this.transmuxer).on("data",function(t){var e=t.initSegment;t.initSegment={data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength};var n=t.data;t.data=n.buffer,a.default.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.captionStream&&t.captionStream.on("data",function(t){a.default.postMessage({action:"caption",data:t})}),t.on("done",function(t){a.default.postMessage({action:"done"})}),t.on("gopInfo",function(t){a.default.postMessage({action:"gopInfo",gopInfo:t})})}},{key:"push",value:function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(t){var e=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*e))}},{key:"setAudioAppendStart",value:function(t){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*t.appendStart))}},{key:"flush",value:function(t){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())}}]),e}(),l=function(t){t.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new s(t.data.options):(this.messageHandlers||(this.messageHandlers=new s),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}};n.default=function(t){return new l(t)},e.exports=n.default},{"global/window":14,"mux.js/lib/mp4":30}],11:[function(f,t,m){(function(t){Object.defineProperty(m,"__esModule",{value:!0});var e=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function n(t){return t&&t.__esModule?t:{default:t}}var l=n("undefined"!==typeof _?_.videojs:"undefined"!==typeof t?t.videojs:null),i=n(f("./create-text-tracks-if-necessary")),a=n(f("./remove-cues-from-track")),o=f("./add-text-track-data"),s=n(f("webworkify")),u=n(f("./transmuxer-worker")),c=f("./codec-utils"),h=function(t,e,n){if(!e||!t.length)return[];var i=Math.ceil(9e4*(e.currentTime()-n+3)),r=void 0;for(r=0;r<t.length&&!(t[r].pts>i);r++);return t.slice(r)};m.gopsSafeToAlignWith=h;var d=function(t,e,n){if(!e.length)return t;if(n)return e.slice();for(var i=e[0].pts,r=0;r<t.length&&!(t[r].pts>=i);r++);return t.slice(0,r).concat(e)};m.updateGopBuffer=d;var p=function(t,e,n,i){for(var r=Math.ceil(9e4*(e-i)),a=Math.ceil(9e4*(n-i)),o=t.slice(),s=t.length;s--&&!(t[s].pts<=a););if(-1===s)return o;for(var l=s+1;l--&&!(t[l].pts<=r););return l=Math.max(l,0),o.splice(l,s-l+1),o};m.removeGopBuffer=p;var r=function(t){function r(t,e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(t,e,n){for(var i=!0;i;){var r=t,a=e,o=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=a,n=o,i=!0,s=u=void 0}}(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,l.default.EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=t,this.codecs_=e,this.audioCodec_=null,this.videoCodec_=null,this.audioDisabled_=!1,this.appendAudioInitSegment_=!0,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=l.default.browser.IE_VERSION>=11;var i={remux:!1,alignGopsAtEnd:this.safeAppend_};this.codecs_.forEach(function(t){(0,c.isAudioCodec)(t)?n.audioCodec_=t:(0,c.isVideoCodec)(t)&&(n.videoCodec_=t)}),this.transmuxer_=(0,s.default)(u.default),this.transmuxer_.postMessage({action:"init",options:i}),this.transmuxer_.onmessage=function(t){return"data"===t.data.action?n.data_(t):"done"===t.data.action?n.done_(t):"gopInfo"===t.data.action?n.appendGopInfo_(t):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"===typeof t&&t>=0&&(this.timestampOffset_=t,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(t){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=t),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=t)}}),Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var t=null,e=null,n=0,i=[],r=[];if(!this.videoBuffer_&&!this.audioBuffer_)return l.default.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return l.default.createTimeRange();for(var a=this.videoBuffer_.buffered,o=this.audioBuffer_.buffered,s=a.length;s--;)i.push({time:a.start(s),type:"start"}),i.push({time:a.end(s),type:"end"});for(s=o.length;s--;)i.push({time:o.start(s),type:"start"}),i.push({time:o.end(s),type:"end"});for(i.sort(function(t,e){return t.time-e.time}),s=0;s<i.length;s++)"start"===i[s].type?2===++n&&(t=i[s].time):"end"===i[s].type&&1===--n&&(e=i[s].time),null!==t&&null!==e&&(r.push([t,e]),e=t=null);return l.default.createTimeRanges(r)}})}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,l["default"].EventTarget),e(r,[{key:"data_",value:function(t){var e=t.data.segment;e.data=new Uint8Array(e.data,t.data.byteOffset,t.data.byteLength),e.initSegment=new Uint8Array(e.initSegment.data,e.initSegment.byteOffset,e.initSegment.byteLength),(0,i.default)(this,this.mediaSource_,e),this.pendingBuffers_.push(e)}},{key:"done_",value:function(t){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function(){var i=this,r=["audio","video"];r.forEach(function(e){if(i[e+"Codec_"]&&!i[e+"Buffer_"]){var n=null;if(i.mediaSource_[e+"Buffer_"])(n=i.mediaSource_[e+"Buffer_"]).updating=!1;else{var t=e+'/mp4;codecs="'+i[e+"Codec_"]+'"';n=function(t,e){var n=t.addSourceBuffer(e),i=Object.create(null);i.updating=!1,i.realBuffer_=n;var r=function(e){"function"===typeof n[e]?i[e]=function(){return n[e].apply(n,arguments)}:"undefined"===typeof i[e]&&Object.defineProperty(i,e,{get:function(){return n[e]},set:function(t){return n[e]=t}})};for(var a in n)r(a);return i}(i.mediaSource_.nativeMediaSource_,t),i.mediaSource_[e+"Buffer_"]=n}i[e+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(t){n.addEventListener(t,function(){if("audio"!==e||!i.audioDisabled_)return"updateend"===t&&(i[e+"Buffer_"].updating=!1),r.every(function(t){return!("audio"!==t||!i.audioDisabled_)||(e===t||!i[t+"Buffer_"]||!i[t+"Buffer_"].updating)})?i.trigger(t):void 0})})}})}},{key:"appendBuffer",value:function(t){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var e=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:e.end(e.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:h(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(t){this.gopBuffer_=d(this.gopBuffer_,t.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(t,e){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(t,e),this.gopBuffer_=p(this.gopBuffer_,t,e,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(t,e)),(0,a.default)(t,e,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,a.default)(t,e,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};t=this.pendingBuffers_.reduce(function(t,e){var n=e.type,i=e.data,r=e.initSegment;return t[n].segments.push(i),t[n].bytes+=i.byteLength,t[n].initSegment=r,e.captions&&(t.captions=t.captions.concat(e.captions)),e.info&&(t[n].info=e.info),e.metadata&&(t.metadata=t.metadata.concat(e.metadata)),t},t),this.videoBuffer_||this.audioBuffer_||(0===t.video.bytes&&(this.videoCodec_=null),0===t.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),t.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info}),t.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:t.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(t.audio.segments.unshift(t.audio.initSegment),t.audio.bytes+=t.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var e=!1;this.videoBuffer_&&t.video.bytes?(t.video.segments.unshift(t.video.initSegment),t.video.bytes+=t.video.initSegment.byteLength,this.concatAndAppendSegments_(t.video,this.videoBuffer_),(0,o.addTextTrackData)(this,t.captions,t.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(e=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(t.audio,this.audioBuffer_),this.pendingBuffers_.length=0,e&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(t,e){var n=0,i=void 0;if(t.bytes){i=new Uint8Array(t.bytes),t.segments.forEach(function(t){i.set(t,n),n+=t.byteLength});try{e.updating=!0,e.appendBuffer(i)}catch(t){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:t.message,originalError:t})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),r}();m.default=r}).call(this,"undefined"!==typeof s?s:"undefined"!==typeof self?self:"undefined"!==typeof _?_:{})},{"./add-text-track-data":1,"./codec-utils":2,"./create-text-tracks-if-necessary":3,"./remove-cues-from-track":9,"./transmuxer-worker":10,webworkify:36}],12:[function(t,e,n){},{}],13:[function(r,a,t){(function(t){var e,n="undefined"!==typeof t?t:"undefined"!==typeof _?_:{},i=r("min-document");"undefined"!==typeof document?e=document:(e=n["__GLOBAL_DOCUMENT_CACHE@4"])||(e=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),a.exports=e}).call(this,"undefined"!==typeof s?s:"undefined"!==typeof self?self:"undefined"!==typeof _?_:{})},{"min-document":12}],14:[function(t,n,e){(function(t){var e;e="undefined"!==typeof _?_:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},n.exports=e}).call(this,"undefined"!==typeof s?s:"undefined"!==typeof self?self:"undefined"!==typeof _?_:{})},{}],15:[function(t,e,n){var i,r=t("../utils/stream.js");(i=function(){var s=new Uint8Array,l=0;i.prototype.init.call(this),this.setTimestamp=function(t){l=t},this.parseId3TagSize=function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?n+20:n+10},this.parseAdtsSize=function(t,e){var n=(224&t[e+5])>>5,i=t[e+4]<<3;return 6144&t[e+3]|i|n},this.push=function(t){var e,n,i,r,a=0,o=0;for(s.length?(r=s.length,(s=new Uint8Array(t.byteLength+r)).set(s.subarray(0,r)),s.set(t,r)):s=t;s.length-o>=3;)if(s[o]!=="I".charCodeAt(0)||s[o+1]!=="D".charCodeAt(0)||s[o+2]!=="3".charCodeAt(0))if(!0&s[o]&&240===(240&s[o+1])){if(s.length-o<7)break;if((a=this.parseAdtsSize(s,o))>s.length)break;i={type:"audio",data:s.subarray(o,o+a),pts:l,dts:l},this.trigger("data",i),o+=a}else o++;else{if(s.length-o<10)break;if((a=this.parseId3TagSize(s,o))>s.length)break;n={type:"timed-metadata",data:s.subarray(o,o+a)},this.trigger("data",n),o+=a}e=s.length-o,s=e>0?s.subarray(o):new Uint8Array}}).prototype=new r,e.exports=i},{"../utils/stream.js":35}],16:[function(t,e,n){"use strict";var i,r=t("../utils/stream.js"),c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(i=function(){var u;i.prototype.init.call(this),this.push=function(t){var e,n,i,r,a,o,s=0,l=0;if("audio"===t.type)for(u?(r=u,(u=new Uint8Array(r.byteLength+t.data.byteLength)).set(r),u.set(t.data,r.byteLength)):u=t.data;s+5<u.length;)if(255===u[s]&&240===(246&u[s+1])){if(n=2*(1&~u[s+1]),e=(3&u[s+3])<<11|u[s+4]<<3|(224&u[s+5])>>5,o=9e4*(a=1024*(1+(3&u[s+6])))/c[(60&u[s+2])>>>2],i=s+e,u.byteLength<i)return;if(this.trigger("data",{pts:t.pts+l*o,dts:t.dts+l*o,sampleCount:a,audioobjecttype:1+(u[s+2]>>>6&3),channelcount:(1&u[s+2])<<2|(192&u[s+3])>>>6,samplerate:c[(60&u[s+2])>>>2],samplingfrequencyindex:(60&u[s+2])>>>2,samplesize:16,data:u.subarray(s+7+n,i)}),u.byteLength===i)return void(u=void 0);l++,u=u.subarray(i)}else s++},this.flush=function(){this.trigger("done")}}).prototype=new r,e.exports=i},{"../utils/stream.js":35}],17:[function(t,e,n){"use strict";var l,u,b,i=t("../utils/stream.js"),w=t("../utils/exp-golomb.js");(u=function(){var n,i,r=0;u.prototype.init.call(this),this.push=function(t){var e;for(i=i?((e=new Uint8Array(i.byteLength+t.data.byteLength)).set(i),e.set(t.data,i.byteLength),e):t.data;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&this.trigger("data",i.subarray(r+3,n-2));1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}this.trigger("data",i.subarray(r+3,n-2)),r=n-2,n+=3;break;default:n+=3}i=i.subarray(r),n-=r,r=0},this.flush=function(){i&&i.byteLength>3&&this.trigger("data",i.subarray(r+3)),i=null,r=0,this.trigger("done")}}).prototype=new i,b={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(l=function(){var n,i,r,a,o,s,_,e=new u;l.prototype.init.call(this),(n=this).push=function(t){"video"===t.type&&(i=t.trackId,r=t.pts,a=t.dts,e.push(t))},e.on("data",function(t){var e={trackId:i,pts:r,dts:a,data:t};switch(31&t[0]){case 5:e.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:e.nalUnitType="sei_rbsp",e.escapedRBSP=o(t.subarray(1));break;case 7:e.nalUnitType="seq_parameter_set_rbsp",e.escapedRBSP=o(t.subarray(1)),e.config=s(e.escapedRBSP);break;case 8:e.nalUnitType="pic_parameter_set_rbsp";break;case 9:e.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",e)}),e.on("done",function(){n.trigger("done")}),this.flush=function(){e.flush()},_=function(t,e){var n,i=8,r=8;for(n=0;n<t;n++)0!==r&&(r=(i+e.readExpGolomb()+256)%256),i=0===r?i:r},o=function(t){for(var e,n,i=t.byteLength,r=[],a=1;a<i-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=t[o];return n},s=function(t){var e,n,i,r,a,o,s,l,u,c,h,d,p,f=0,m=0,v=0,g=0,y=1;if(n=(e=new w(t)).readUnsignedByte(),r=e.readUnsignedByte(),i=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),b[n]&&(3===(a=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(h=3!==a?8:12,p=0;p<h;p++)e.readBoolean()&&_(p<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(o=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===o)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),s=e.readUnsignedExpGolomb(),p=0;p<s;p++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),l=e.readUnsignedExpGolomb(),u=e.readUnsignedExpGolomb(),0===(c=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(f=e.readUnsignedExpGolomb(),m=e.readUnsignedExpGolomb(),v=e.readUnsignedExpGolomb(),g=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:d=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}d&&(y=d[0]/d[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(l+1)-2*f-2*m)*y),height:(2-c)*(u+1)*16-2*v-2*g}}}).prototype=new i,e.exports={H264Stream:l,NalByteStream:u}},{"../utils/exp-golomb.js":34,"../utils/stream.js":35}],18:[function(t,e,n){var i,r=[33,16,5,32,164,27],a=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],o=function(t){for(var e=[];t--;)e.push(0);return e},s={96e3:[r,[227,64],o(154),[56]],88200:[r,[231],o(170),[56]],64e3:[r,[248,192],o(240),[56]],48e3:[r,[255,192],o(268),[55,148,128],o(54),[112]],44100:[r,[255,192],o(268),[55,163,128],o(84),[112]],32e3:[r,[255,192],o(268),[55,234],o(226),[112]],24e3:[r,[255,192],o(268),[55,255,128],o(268),[111,112],o(126),[224]],16e3:[r,[255,192],o(268),[55,255,128],o(268),[111,255],o(269),[223,108],o(195),[1,192]],12e3:[a,o(268),[3,127,248],o(268),[6,255,240],o(268),[13,255,224],o(268),[27,253,128],o(259),[56]],11025:[a,o(268),[3,127,248],o(268),[6,255,240],o(268),[13,255,224],o(268),[27,255,192],o(268),[55,175,128],o(108),[112]],8e3:[a,o(268),[3,121,16],o(47),[7]]};e.exports=(i=s,Object.keys(i).reduce(function(t,e){return t[e]=new Uint8Array(i[e].reduce(function(t,e){return t.concat(e)},[])),t},{}))},{}],19:[function(t,e,n){"use strict";var i=t("../utils/stream.js"),r=function(t){this.numberOfTracks=0,this.metadataStream=t.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,r.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):("video"===t.track.type&&(this.videoTrack=t.track,this.videoTags=t.tags,this.pendingTracks++),void("audio"===t.track.type&&(this.audioTrack=t.track,this.audioTags=t.tags,this.pendingTracks++)))}};r.prototype=new i,r.prototype.flush=function(t){var e,n,i,r,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?r=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(r=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,i=0;i<this.pendingCaptions.length;i++)(n=this.pendingCaptions[i]).startTime=n.startPts-r,n.startTime/=9e4,n.endTime=n.endPts-r,n.endTime/=9e4,a.captionStreams[n.stream]=!0,a.captions.push(n);for(i=0;i<this.pendingMetadata.length;i++)(e=this.pendingMetadata[i]).cueTime=e.pts-r,e.cueTime/=9e4,a.metadata.push(e);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}},e.exports=r},{"../utils/stream.js":35}],20:[function(t,e,n){"use strict";var l=t("./flv-tag.js");e.exports=function(t,e,n){var i,r,a,o=new Uint8Array(9),s=new DataView(o.buffer);return t=t||0,e=void 0===e||e,n=void 0===n||n,s.setUint8(0,70),s.setUint8(1,76),s.setUint8(2,86),s.setUint8(3,1),s.setUint8(4,(e?4:0)|(n?1:0)),s.setUint32(5,o.byteLength),t<=0?((r=new Uint8Array(o.byteLength+4)).set(o),r.set([0,0,0,0],o.byteLength)):((i=new l(l.METADATA_TAG)).pts=i.dts=0,i.writeMetaDataDouble("duration",t),a=i.finalize().length,(r=new Uint8Array(o.byteLength+a)).set(o),r.set(s.byteLength,a)),r}},{"./flv-tag.js":21}],21:[function(t,e,n){var u;(u=function(t,n){var e,i=0,r=16384,a=function(t,e){var n,i=t.position+e;i<t.bytes.byteLength||((n=new Uint8Array(2*i)).set(t.bytes.subarray(0,t.position),0),t.bytes=n,t.view=new DataView(t.bytes.buffer))},o=u.widthBytes||new Uint8Array("width".length),s=u.heightBytes||new Uint8Array("height".length),l=u.videocodecidBytes||new Uint8Array("videocodecid".length);if(!u.widthBytes){for(e=0;e<"width".length;e++)o[e]="width".charCodeAt(e);for(e=0;e<"height".length;e++)s[e]="height".charCodeAt(e);for(e=0;e<"videocodecid".length;e++)l[e]="videocodecid".charCodeAt(e);u.widthBytes=o,u.heightBytes=s,u.videocodecidBytes=l}switch(this.keyFrame=!1,t){case u.VIDEO_TAG:this.length=16,r*=6;break;case u.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case u.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(r),this.view=new DataView(this.bytes.buffer),this.bytes[0]=t,this.position=this.length,this.keyFrame=n,this.pts=0,this.dts=0,this.writeBytes=function(t,e,n){var i,r=e||0;i=r+(n=n||t.byteLength),a(this,n),this.bytes.set(t.subarray(r,i),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(t){a(this,1),this.bytes[this.position]=t,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(t){a(this,2),this.view.setUint16(this.position,t),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(t){return this.bytes[this.length-t]},this.nalUnitSize=function(){return 0===i?0:this.length-(i+4)},this.startNalUnit=function(){if(i>0)throw new Error("Attempted to create new NAL wihout closing the old one");i=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(t){var e,n;this.length===i+4?this.length-=4:i>0&&(e=i+4,n=this.length-e,this.position=i,this.view.setUint32(this.position,n),this.position=this.length,t&&t.push(this.bytes.subarray(e,e+n))),i=0},this.writeMetaDataDouble=function(t,e){var n;if(a(this,2+t.length+9),this.view.setUint16(this.position,t.length),this.position+=2,"width"===t)this.bytes.set(o,this.position),this.position+=5;else if("height"===t)this.bytes.set(s,this.position),this.position+=6;else if("videocodecid"===t)this.bytes.set(l,this.position),this.position+=12;else for(n=0;n<t.length;n++)this.bytes[this.position]=t.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,e),this.position+=8,this.length=Math.max(this.length,this.position),++i},this.writeMetaDataBoolean=function(t,e){var n;for(a(this,2),this.view.setUint16(this.position,t.length),this.position+=2,n=0;n<t.length;n++)a(this,1),this.bytes[this.position]=t.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,e?1:0),this.position++,this.length=Math.max(this.length,this.position),++i},this.finalize=function(){var t,e;switch(this.bytes[0]){case u.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||n?16:32),this.bytes[12]=n?0:1,t=this.pts-this.dts,this.bytes[13]=(16711680&t)>>>16,this.bytes[14]=(65280&t)>>>8,this.bytes[15]=(255&t)>>>0;break;case u.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=n?0:1;break;case u.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,i),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return e=this.length-11,this.bytes[1]=(16711680&e)>>>16,this.bytes[2]=(65280&e)>>>8,this.bytes[3]=(255&e)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=u.frameTime(this.bytes),this}}).AUDIO_TAG=8,u.VIDEO_TAG=9,u.METADATA_TAG=18,u.isAudioFrame=function(t){return u.AUDIO_TAG===t[0]},u.isVideoFrame=function(t){return u.VIDEO_TAG===t[0]},u.isMetaData=function(t){return u.METADATA_TAG===t[0]},u.isKeyFrame=function(t){return u.isVideoFrame(t)?23===t[11]:!!u.isAudioFrame(t)||!!u.isMetaData(t)},u.frameTime=function(t){var e=t[4]<<16;return e|=t[5]<<8,e|=t[6]<<0,e|=t[7]<<24},e.exports=u},{}],22:[function(t,e,n){e.exports={tag:t("./flv-tag"),Transmuxer:t("./transmuxer"),getFlvHeader:t("./flv-header")}},{"./flv-header":20,"./flv-tag":21,"./transmuxer":24}],23:[function(t,e,n){"use strict";e.exports=function(){var t=this;this.list=[],this.push=function(t){this.list.push({bytes:t.bytes,dts:t.dts,pts:t.pts,keyFrame:t.keyFrame,metaDataTag:t.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return t.list.length}})}},{}],24:[function(t,e,n){"use strict";var f,m,v,i,s,l,r=t("../utils/stream.js"),u=t("./flv-tag.js"),g=t("../m2ts/m2ts.js"),y=t("../codecs/adts.js"),_=t("../codecs/h264").H264Stream,b=t("./coalesce-stream.js"),c=t("./tag-list.js");i=function(t,e){"number"===typeof e.pts&&(void 0===t.timelineStartInfo.pts?t.timelineStartInfo.pts=e.pts:t.timelineStartInfo.pts=Math.min(t.timelineStartInfo.pts,e.pts)),"number"===typeof e.dts&&(void 0===t.timelineStartInfo.dts?t.timelineStartInfo.dts=e.dts:t.timelineStartInfo.dts=Math.min(t.timelineStartInfo.dts,e.dts))},s=function(t,e){var n=new u(u.METADATA_TAG);return n.dts=e,n.pts=e,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",t.width),n.writeMetaDataDouble("height",t.height),n},l=function(t,e){var n,i=new u(u.VIDEO_TAG,!0);for(i.dts=e,i.pts=e,i.writeByte(1),i.writeByte(t.profileIdc),i.writeByte(t.profileCompatibility),i.writeByte(t.levelIdc),i.writeByte(255),i.writeByte(225),i.writeShort(t.sps[0].length),i.writeBytes(t.sps[0]),i.writeByte(t.pps.length),n=0;n<t.pps.length;++n)i.writeShort(t.pps[n].length),i.writeBytes(t.pps[n]);return i},(v=function(r){var a,o=[],s=[];v.prototype.init.call(this),this.push=function(t){i(r,t),r&&(r.audioobjecttype=t.audioobjecttype,r.channelcount=t.channelcount,r.samplerate=t.samplerate,r.samplingfrequencyindex=t.samplingfrequencyindex,r.samplesize=t.samplesize,r.extraData=r.audioobjecttype<<11|r.samplingfrequencyindex<<7|r.channelcount<<3),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),o.push(t)},this.flush=function(){var t,e,n,i=new c;if(0!==o.length){for(n=-1/0;o.length;)t=o.shift(),s.length&&t.pts>=s[0]&&(n=s.shift(),this.writeMetaDataTags(i,n)),(r.extraData!==a||t.pts-n>=1e3)&&(this.writeMetaDataTags(i,t.pts),a=r.extraData,n=t.pts),(e=new u(u.AUDIO_TAG)).pts=t.pts,e.dts=t.dts,e.writeBytes(t.data),i.push(e.finalize());s.length=0,a=null,this.trigger("data",{track:r,tags:i.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(t,e){var n;(n=new u(u.METADATA_TAG)).pts=e,n.dts=e,n.writeMetaDataDouble("audiocodecid",10),n.writeMetaDataBoolean("stereo",2===r.channelcount),n.writeMetaDataDouble("audiosamplerate",r.samplerate),n.writeMetaDataDouble("audiosamplesize",16),t.push(n.finalize()),(n=new u(u.AUDIO_TAG,!0)).pts=e,n.dts=e,n.view.setUint16(n.position,r.extraData),n.position+=2,n.length=Math.max(n.length,n.position),t.push(n.finalize())},this.onVideoKeyFrame=function(t){s.push(t)}}).prototype=new r,(m=function(r){var a,o,n=[];m.prototype.init.call(this),this.finishFrame=function(t,e){if(e){if(a&&r&&r.newMetadata&&(e.keyFrame||0===t.length)){var n=s(a,e.dts).finalize(),i=l(r,e.dts).finalize();n.metaDataTag=i.metaDataTag=!0,t.push(n),t.push(i),r.newMetadata=!1,this.trigger("keyframe",e.dts)}e.endNalUnit(),t.push(e.finalize()),o=null}},this.push=function(t){i(r,t),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),n.push(t)},this.flush=function(){for(var t,e=new c;n.length&&"access_unit_delimiter_rbsp"!==n[0].nalUnitType;)n.shift();if(0!==n.length){for(;n.length;)"seq_parameter_set_rbsp"===(t=n.shift()).nalUnitType?(r.newMetadata=!0,a=t.config,r.width=a.width,r.height=a.height,r.sps=[t.data],r.profileIdc=a.profileIdc,r.levelIdc=a.levelIdc,r.profileCompatibility=a.profileCompatibility,o.endNalUnit()):"pic_parameter_set_rbsp"===t.nalUnitType?(r.newMetadata=!0,r.pps=[t.data],o.endNalUnit()):"access_unit_delimiter_rbsp"===t.nalUnitType?(o&&this.finishFrame(e,o),(o=new u(u.VIDEO_TAG)).pts=t.pts,o.dts=t.dts):("slice_layer_without_partitioning_rbsp_idr"===t.nalUnitType&&(o.keyFrame=!0),o.endNalUnit()),o.startNalUnit(),o.writeBytes(t.data);o&&this.finishFrame(e,o),this.trigger("data",{track:r,tags:e.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new r,(f=function(t){var e,n,i,r,a,o,s,l,u,c,h,d,p=this;f.prototype.init.call(this),t=t||{},this.metadataStream=new g.MetadataStream,t.metadataStream=this.metadataStream,e=new g.TransportPacketStream,n=new g.TransportParseStream,i=new g.ElementaryStream,r=new g.TimestampRolloverStream("video"),a=new g.TimestampRolloverStream("audio"),o=new g.TimestampRolloverStream("timed-metadata"),s=new y,l=new _,d=new b(t),e.pipe(n).pipe(i),i.pipe(r).pipe(l),i.pipe(a).pipe(s),i.pipe(o).pipe(this.metadataStream).pipe(d),h=new g.CaptionStream,l.pipe(h).pipe(d),i.on("data",function(t){var e,n,i;if("metadata"===t.type){for(e=t.tracks.length;e--;)"video"===t.tracks[e].type?n=t.tracks[e]:"audio"===t.tracks[e].type&&(i=t.tracks[e]);n&&!u&&(d.numberOfTracks++,u=new m(n),l.pipe(u).pipe(d)),i&&!c&&(d.numberOfTracks++,c=new v(i),s.pipe(c).pipe(d),u&&u.on("keyframe",c.onVideoKeyFrame))}}),this.push=function(t){e.push(t)},this.flush=function(){e.flush()},this.resetCaptions=function(){h.reset()},d.on("data",function(t){p.trigger("data",t)}),d.on("done",function(){p.trigger("done")})}).prototype=new r,e.exports=f},{"../codecs/adts.js":16,"../codecs/h264":17,"../m2ts/m2ts.js":26,"../utils/stream.js":35,"./coalesce-stream.js":19,"./flv-tag.js":21,"./tag-list.js":23}],25:[function(t,e,n){var i=t("../utils/stream"),r=function(){r.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new o(0,0),new o(0,1),new o(1,0),new o(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("done",this.trigger.bind(this,"done"))},this)};r.prototype=new i,r.prototype.push=function(t){var e,n,i;"sei_rbsp"===t.nalUnitType&&(4===(e=function(t){for(var e=0,n={payloadType:-1,payloadSize:0},i=0,r=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)i+=255,e++;for(i+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=t.subarray(e,e+r);break}e+=r,r=i=0}return n}(t.escapedRBSP)).payloadType&&(n=181!==(i=e).payload[0]?null:49!==(i.payload[1]<<8|i.payload[2])?null:"GA94"!==String.fromCharCode(i.payload[3],i.payload[4],i.payload[5],i.payload[6])?null:3!==i.payload[7]?null:i.payload.subarray(8,i.payload.length-1))&&(t.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:t.dts===this.latestDts_&&this.ignoreNextEqualDts_?this.ignoreNextEqualDts_=!1:(this.captionPackets_=this.captionPackets_.concat(function(t,e){var n,i,r,a,o=[];if(!(64&e[0]))return o;for(i=31&e[0],n=0;n<i;n++)a={type:3&e[2+(r=3*n)],pts:t},4&e[r+2]&&(a.ccData=e[r+3]<<8|e[r+4],o.push(a));return o}(t.pts,n)),this.latestDts_=t.dts)))},r.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(t){t.flush()},this)):this.ccStreams_.forEach(function(t){t.flush()},this)},r.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},r.prototype.dispatchCea608Packet=function(t){this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},r.prototype.setsChannel1Active=function(t){return 4096===(30720&t.ccData)},r.prototype.setsChannel2Active=function(t){return 6144===(30720&t.ccData)};var a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},s=function(t){return null===t?"":(t=a[t]||t,String.fromCharCode(t))},l=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],u=function(){for(var t=[],e=15;e--;)t.push("");return t},o=function(t,e){o.prototype.init.call(this),this.field_=t||0,this.dataChannel_=e||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,n,i,r,a;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096===(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),i=e>>>8,r=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.topRow_=13,this.mode_="rollUp";else if(e===this.ROLL_UP_3_ROWS_)this.topRow_=12,this.mode_="rollUp";else if(e===this.ROLL_UP_4_ROWS_)this.topRow_=11,this.mode_="rollUp";else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=u();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=u();else if(e===this.RESUME_DIRECT_CAPTIONING_)this.mode_="paintOn";else if(this.isSpecialCharacter(i,r))a=s((i=(3&i)<<8)|r),this[this.mode_](t.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1),a=s((i=(3&i)<<8)|r),this[this.mode_](t.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14===(14&r)&&this.addFormatting(t.pts,["i"]),1===(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var o=l.indexOf(7968&e);o!==this.row_&&(this.clearFormatting(t.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16===(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(r)&&14===(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=s(i),a+=s(r),this[this.mode_](t.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};o.prototype=new i,o.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){return t.trim()}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},o.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=u(),this.nonDisplayed_=u(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.formatting_=[]},o.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},o.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&e>=48&&e<=63},o.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&e>=32&&e<=63},o.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&e>=32&&e<=47},o.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&e>=33&&e<=35},o.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&e>=64&&e<=127},o.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},o.prototype.isNormalChar=function(t){return t>=32&&t<=127},o.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var n=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,n)},o.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},"");this.formatting_=[],this[this.mode_](t,e)}},o.prototype.popOn=function(t,e){var n=this.nonDisplayed_[this.row_];n+=e,this.nonDisplayed_[this.row_]=n},o.prototype.rollUp=function(t,e){var n=this.displayed_[14];n+=e,this.displayed_[14]=n},o.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.topRow_;t<14;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[14]=""},o.prototype.paintOn=function(){},e.exports={CaptionStream:r,Cea608Stream:o}},{"../utils/stream":35}],26:[function(t,e,n){var i,s,l,r=t("../utils/stream.js"),a=t("./caption-stream"),u=t("./stream-types"),o=t("./timestamp-rollover-stream").TimestampRolloverStream,c=t("./stream-types.js");(i=function(){var r=new Uint8Array(188),a=0;i.prototype.init.call(this),this.push=function(t){var e,n=0,i=188;for(a?((e=new Uint8Array(t.byteLength+a)).set(r.subarray(0,a)),e.set(t,a),a=0):e=t;i<e.byteLength;)71!==e[n]||71!==e[i]?(n++,i++):(this.trigger("data",e.subarray(n,i)),n+=188,i+=188);n<e.byteLength&&(r.set(e.subarray(n),0),a=e.byteLength-n)},this.flush=function(){188===a&&71===r[0]&&(this.trigger("data",r),a=0),this.trigger("done")}}).prototype=new r,(s=function(){var i,r,a,o;s.prototype.init.call(this),(o=this).packetsWaitingForPmt=[],this.programMapTable=void 0,i=function(t,e){var n=0;e.payloadUnitStartIndicator&&(n+=t[n]+1),"pat"===e.type?r(t.subarray(n),e):a(t.subarray(n),e)},r=function(t,e){e.section_number=t[7],e.last_section_number=t[8],o.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=o.pmtPid},a=function(t,e){var n,i;if(1&t[5]){for(o.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&t[1])<<8|t[2])-4,i=12+((15&t[10])<<8|t[11]);i<n;){var r=t[i],a=(31&t[i+1])<<8|t[i+2];r===u.H264_STREAM_TYPE&&null===o.programMapTable.video?o.programMapTable.video=a:r===u.ADTS_STREAM_TYPE&&null===o.programMapTable.audio?o.programMapTable.audio=a:r===u.METADATA_STREAM_TYPE&&(o.programMapTable["timed-metadata"][a]=r),i+=5+((15&t[i+3])<<8|t[i+4])}e.programMapTable=o.programMapTable}},this.push=function(t){var e={},n=4;if(e.payloadUnitStartIndicator=!!(64&t[1]),e.pid=31&t[1],e.pid<<=8,e.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===e.pid)e.type="pat",i(t.subarray(n),e),this.trigger("data",e);else if(e.pid===this.pmtPid)for(e.type="pmt",i(t.subarray(n),e),this.trigger("data",e);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,e]):this.processPes_(t,n,e)},this.processPes_=function(t,e,n){n.pid===this.programMapTable.video?n.streamType=u.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=u.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=t.subarray(e),this.trigger("data",n)}}).prototype=new r,s.STREAM_TYPES={h264:27,adts:15},(l=function(){var d=this,i={data:[],size:0},r={data:[],size:0},a={data:[],size:0},o=function(t,e,n){var i,r,a=new Uint8Array(t.size),o={type:e},s=0,l=0;if(t.data.length&&!(t.size<9)){for(o.trackId=t.data[0].pid,s=0;s<t.data.length;s++)r=t.data[s],a.set(r.data,l),l+=r.data.byteLength;var u,c,h;u=a,(c=o).packetLength=6+(u[4]<<8|u[5]),c.dataAlignmentIndicator=0!==(4&u[6]),192&(h=u[7])&&(c.pts=(14&u[9])<<27|(255&u[10])<<20|(254&u[11])<<12|(255&u[12])<<5|(254&u[13])>>>3,c.pts*=4,c.pts+=(6&u[13])>>>1,c.dts=c.pts,64&h&&(c.dts=(14&u[14])<<27|(255&u[15])<<20|(254&u[16])<<12|(255&u[17])<<5|(254&u[18])>>>3,c.dts*=4,c.dts+=(6&u[18])>>>1)),c.data=u.subarray(9+u[8]),i="video"===e||o.packetLength<=t.size,(n||i)&&(t.size=0,t.data.length=0),i&&d.trigger("data",o)}};l.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var t,e;switch(n.streamType){case u.H264_STREAM_TYPE:case c.H264_STREAM_TYPE:t=i,e="video";break;case u.ADTS_STREAM_TYPE:t=r,e="audio";break;case u.METADATA_STREAM_TYPE:t=a,e="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&o(t,e,!0),t.data.push(n),t.size+=n.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},e=n.programMapTable;null!==e.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),d.trigger("data",t)}})[n.type]()},this.flush=function(){o(i,"video"),o(r,"audio"),o(a,"timed-metadata"),this.trigger("done")}}).prototype=new r;var h={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:i,TransportParseStream:s,ElementaryStream:l,TimestampRolloverStream:o,CaptionStream:a.CaptionStream,Cea608Stream:a.Cea608Stream,MetadataStream:t("./metadata-stream")};for(var d in u)u.hasOwnProperty(d)&&(h[d]=u[d]);e.exports=h},{"../utils/stream.js":35,"./caption-stream":25,"./metadata-stream":27,"./stream-types":28,"./stream-types.js":28,"./timestamp-rollover-stream":29}],27:[function(t,e,n){var i,r=t("../utils/stream"),a=t("./stream-types"),o=function(t,e,n){var i,r="";for(i=e;i<n;i++)r+="%"+("00"+t[i].toString(16)).slice(-2);return r},s=function(t,e,n){return decodeURIComponent(o(t,e,n))},d=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},p={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=s(t.data,1,e),t.value=s(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=s(t.data,1,e),t.url=s(t.data,e+1,t.data.length);break}},PRIV:function(t){var e,n;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=(n=t.data,unescape(o(n,0,e)));break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};(i=function(t){var e,l={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},u=0,c=[],h=0;if(i.prototype.init.call(this),this.dispatchType=a.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(e=0;e<l.descriptor.length;e++)this.dispatchType+=("00"+l.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,n,i,r,a;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(h=0,c.length=0),0===c.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))l.debug&&console.log("Skipping unrecognized metadata packet");else if(c.push(t),h+=t.data.byteLength,1===c.length&&(u=d(t.data.subarray(6,10)),u+=10),!(h<u)){for(e={data:new Uint8Array(u),frames:[],pts:c[0].pts,dts:c[0].dts},a=0;a<u;)e.data.set(c[0].data.subarray(0,u-a),a),a+=c[0].data.byteLength,h-=c[0].data.byteLength,c.shift();n=10,64&e.data[5]&&(n+=4,n+=d(e.data.subarray(10,14)),u-=d(e.data.subarray(16,20)));do{if((i=d(e.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((r={id:String.fromCharCode(e.data[n],e.data[n+1],e.data[n+2],e.data[n+3]),data:e.data.subarray(n+10,n+i+10)}).key=r.id,p[r.id]&&(p[r.id](r),"com.apple.streaming.transportStreamTimestamp"===r.owner)){var o=r.data,s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;s*=4,s+=3&o[7],r.timeStamp=s,void 0===e.pts&&void 0===e.dts&&(e.pts=r.timeStamp,e.dts=r.timeStamp),this.trigger("timestamp",r)}e.frames.push(r),n+=10,n+=i}while(n<u);this.trigger("data",e)}}}).prototype=new r,e.exports=i},{"../utils/stream":35,"./stream-types":28}],28:[function(t,e,n){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],29:[function(t,e,n){var i=t("../utils/stream"),r=function(t,e){var n=1;for(t>e&&(n=-1);Math.abs(e-t)>4294967296;)t+=8589934592*n;return t},a=function(t){var e,n;a.prototype.init.call(this),this.type_=t,this.push=function(t){t.type===this.type_&&(void 0===n&&(n=t.dts),t.dts=r(t.dts,n),t.pts=r(t.pts,n),e=t.dts,this.trigger("data",t))},this.flush=function(){n=e,this.trigger("done")},this.discontinuity=function(){e=n=void 0}};a.prototype=new i,e.exports={TimestampRolloverStream:a,handleRollover:r}},{"../utils/stream":35}],30:[function(t,e,n){e.exports={generator:t("./mp4-generator"),Transmuxer:t("./transmuxer").Transmuxer,AudioSegmentStream:t("./transmuxer").AudioSegmentStream,VideoSegmentStream:t("./transmuxer").VideoSegmentStream}},{"./mp4-generator":31,"./transmuxer":32}],31:[function(t,e,n){var s,i,r,a,o,l,u,c,h,d,p,f,m,v,g,y,_,b,w,T,x,E,S,A,M,C,k,O,L,R,P,I,D,j,N,U,B,F,V,H,z,G=Math.pow(2,32)-1;!function(){var t;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!==typeof Uint8Array){for(t in S)S.hasOwnProperty(t)&&(S[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);A=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),M=new Uint8Array([0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),O=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),L={video:k,audio:O},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),j=D,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),U=D,R=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),s=function(t){var e,n,i=[],r=0;for(e=1;e<arguments.length;e++)i.push(arguments[e]);for(e=i.length;e--;)r+=i[e].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(t,4),e=0,r=8;e<i.length;e++)n.set(i[e],r),r+=i[e].byteLength;return n},i=function(){return s(S.dinf,s(S.dref,I))},r=function(t){return s(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},a=function(){return s(S.ftyp,A,M,A,C)},y=function(t){return s(S.hdlr,L[t])},o=function(t){return s(S.mdat,t)},g=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),s(S.mdhd,e)},v=function(t){return s(S.mdia,g(t),y(t.type),u(t))},l=function(t){return s(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},u=function(t){return s(S.minf,"video"===t.type?s(S.vmhd,R):s(S.smhd,P),i(),b(t))},c=function(t,e){for(var n=[],i=e.length;i--;)n[i]=T(e[i]);return s.apply(null,[S.moof,l(t)].concat(n))},h=function(t){for(var e=t.length,n=[];e--;)n[e]=f(t[e]);return s.apply(null,[S.moov,p(4294967295)].concat(n).concat(d(t)))},d=function(t){for(var e=t.length,n=[];e--;)n[e]=x(t[e]);return s.apply(null,[S.mvex].concat(n))},p=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(S.mvhd,e)},_=function(t){var e,n,i=t.samples||[],r=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)e=i[n].flags,r[n+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return s(S.sdtp,r)},b=function(t){return s(S.stbl,w(t),s(S.stts,U),s(S.stsc,j),s(S.stsz,N),s(S.stco,D))},w=function(t){return s(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?B(t):F(t))},B=function(t){var e,n=t.sps||[],i=t.pps||[],r=[],a=[];for(e=0;e<n.length;e++)r.push((65280&n[e].byteLength)>>>8),r.push(255&n[e].byteLength),r=r.concat(Array.prototype.slice.call(n[e]));for(e=0;e<i.length;e++)a.push((65280&i[e].byteLength)>>>8),a.push(255&i[e].byteLength),a=a.concat(Array.prototype.slice.call(i[e]));return s(S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(S.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([n.length]).concat(r).concat([i.length]).concat(a))),s(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},F=function(t){return s(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),r(t))},m=function(t){var e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return s(S.tkhd,e)},T=function(t){var e,n,i,r,a,o;return e=s(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(t.baseMediaDecodeTime/(G+1)),o=Math.floor(t.baseMediaDecodeTime%(G+1)),n=s(S.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===t.type?(i=E(t,92),s(S.traf,e,n,i)):(r=_(t),i=E(t,r.length+92),s(S.traf,e,n,i,r))},f=function(t){return t.duration=t.duration||4294967295,s(S.trak,m(t),v(t))},x=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),s(S.trex,e)},z=function(t,e){var n=0,i=0,r=0,a=0;return t.length&&(void 0!==t[0].duration&&(n=1),void 0!==t[0].size&&(i=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},H=function(t,e){var n,i,r,a;for(e+=20+16*(i=t.samples||[]).length,n=z(i,e),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return s(S.trun,new Uint8Array(n))},V=function(t,e){var n,i,r,a;for(e+=20+8*(i=t.samples||[]).length,n=z(i,e),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return s(S.trun,new Uint8Array(n))},E=function(t,e){return"audio"===t.type?V(t,e):H(t,e)},e.exports={ftyp:a,mdat:o,moof:c,moov:h,initSegment:function(t){var e,n=a(),i=h(t);return(e=new Uint8Array(n.byteLength+i.byteLength)).set(n),e.set(i,n.byteLength),e}}},{}],32:[function(t,e,n){var d,s,l,u,c,p,f,m,v,h,i=t("../utils/stream.js"),g=t("./mp4-generator.js"),y=t("../m2ts/m2ts.js"),_=t("../codecs/adts.js"),b=t("../codecs/h264").H264Stream,w=t("../aac"),T=t("../data/silence"),x=t("../utils/clock"),E=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],S=["width","height","profileIdc","levelIdc","profileCompatibility"];c=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},v=function(t,e){var n;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},h=function(t){var e,n=0;for(e=0;e<t.length;e++)n+=t[e].data.byteLength;return n},(s=function(r){var a=[],o=0,e=0,u=0,c=1/0;s.prototype.init.call(this),this.push=function(e){p(r,e),r&&E.forEach(function(t){r[t]=e[t]}),a.push(e)},this.setEarliestDts=function(t){e=t-r.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){c=t},this.setAudioAppendStart=function(t){u=t},this.flush=function(){var t,e,n,i;0!==a.length&&(t=this.trimAdtsFramesByEarliestDts_(a),r.baseMediaDecodeTime=m(r),this.prefixWithSilence_(r,t),r.samples=this.generateSampleTable_(t),n=g.mdat(this.concatenateFrameData_(t)),a=[],e=g.moof(o,[r]),i=new Uint8Array(e.byteLength+n.byteLength),o++,i.set(e),i.set(n,e.byteLength),f(r),this.trigger("data",{track:r,boxes:i})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(t,e){var n,i,r,a,o=0,s=0,l=0;if(e.length&&(n=x.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate),i=Math.ceil(9e4/(t.samplerate/1024)),u&&c&&(o=n-Math.max(u,c),l=(s=Math.floor(o/i))*i),!(s<1||l>45e3))){for((r=T[t.samplerate])||(r=e[0].data),a=0;a<s;a++)e.splice(a,0,{data:r});t.baseMediaDecodeTime-=Math.floor(x.videoTsToAudioTs(l,t.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(t){return r.minSegmentDts>=e?t:(r.minSegmentDts=1/0,t.filter(function(t){return t.dts>=e&&(r.minSegmentDts=Math.min(r.minSegmentDts,t.dts),r.minSegmentPts=r.minSegmentDts,!0)}))},this.generateSampleTable_=function(t){var e,n,i=[];for(e=0;e<t.length;e++)n=t[e],i.push({size:n.data.byteLength,duration:1024});return i},this.concatenateFrameData_=function(t){var e,n,i=0,r=new Uint8Array(h(t));for(e=0;e<t.length;e++)n=t[e],r.set(n.data,i),i+=n.data.byteLength;return r}}).prototype=new i,(d=function(s,l){var e,n,u=0,c=[],h=[];l=l||{},d.prototype.init.call(this),delete s.minPTS,this.gopCache_=[],this.push=function(t){p(s,t),"seq_parameter_set_rbsp"!==t.nalUnitType||e||(e=t.config,s.sps=[t.data],S.forEach(function(t){s[t]=e[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,s.pps=[t.data]),c.push(t)},this.flush=function(){for(var t,e,n,i,r,a;c.length&&"access_unit_delimiter_rbsp"!==c[0].nalUnitType;)c.shift();if(0===c.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(t=this.groupNalsIntoFrames_(c),(n=this.groupFramesIntoGops_(t))[0][0].keyFrame||((e=this.getGopForFusion_(c[0],s))?(n.unshift(e),n.byteLength+=e.byteLength,n.nalCount+=e.nalCount,n.pts=e.pts,n.dts=e.dts,n.duration+=e.duration):n=this.extendFirstKeyFrame_(n)),h.length){var o;if(!(o=l.alignGopsAtEnd?this.alignGopsAtEnd_(n):this.alignGopsAtStart_(n)))return this.gopCache_.unshift({gop:n.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");f(s),n=o}p(s,n),s.samples=this.generateSampleTable_(n),r=g.mdat(this.concatenateNalData_(n)),s.baseMediaDecodeTime=m(s),this.trigger("processedGopsInfo",n.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),this.gopCache_.unshift({gop:n.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.trigger("baseMediaDecodeTime",s.baseMediaDecodeTime),this.trigger("timelineStartInfo",s.timelineStartInfo),i=g.moof(u,[s]),a=new Uint8Array(i.byteLength+r.byteLength),u++,a.set(i),a.set(r,i.byteLength),this.trigger("data",{track:s,boxes:a}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){f(s),n=e=void 0},this.getGopForFusion_=function(t){var e,n,i,r,a,o=1/0;for(a=0;a<this.gopCache_.length;a++)i=(r=this.gopCache_[a]).gop,s.pps&&v(s.pps[0],r.pps[0])&&s.sps&&v(s.sps[0],r.sps[0])&&(i.dts<s.timelineStartInfo.dts||(e=t.dts-i.dts-i.duration)>=-1e4&&e<=45e3&&(!n||o>e)&&(n=r,o=e));return n?n.gop:null},this.extendFirstKeyFrame_=function(t){var e;return!t[0][0].keyFrame&&t.length>1&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},this.groupNalsIntoFrames_=function(t){var e,n,i=[],r=[];for(e=i.byteLength=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(n=t[e]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.push(i),r},this.groupFramesIntoGops_=function(t){var e,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=t[0].pts,i.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,e=0;e<t.length;e++)(n=t[e]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},this.generateSampleTable_=function(t,e){var n,i,r,a,o,s=e||0,l=[];for(n=0;n<t.length;n++)for(a=t[n],i=0;i<a.length;i++)o=a[i],(r={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}).dataOffset=s,r.compositionTimeOffset=o.pts-o.dts,r.duration=o.duration,r.size=4*o.length,r.size+=o.byteLength,o.keyFrame&&(r.flags.dependsOn=2),s+=r.size,l.push(r);return l},this.concatenateNalData_=function(t){var e,n,i,r,a,o,s=0,l=t.byteLength,u=t.nalCount,c=new Uint8Array(l+4*u),h=new DataView(c.buffer);for(e=0;e<t.length;e++)for(r=t[e],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)o=a[i],h.setUint32(s,o.data.byteLength),s+=4,c.set(o.data,s),s+=o.data.byteLength;return c},this.alignGopsAtStart_=function(t){var e,n,i,r,a,o,s,l;for(a=t.byteLength,o=t.nalCount,s=t.duration,e=n=0;e<h.length&&n<t.length&&(i=h[e],r=t[n],i.pts!==r.pts);)r.pts>i.pts?e++:(n++,a-=r.byteLength,o-=r.nalCount,s-=r.duration);return 0===n?t:n===t.length?null:((l=t.slice(n)).byteLength=a,l.duration=s,l.nalCount=o,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(t){var e,n,i,r,a,o,s;for(e=h.length-1,n=t.length-1,a=null,o=!1;e>=0&&n>=0;){if(i=h[e],r=t[n],i.pts===r.pts){o=!0;break}i.pts>r.pts?e--:(e===h.length-1&&(a=n),n--)}if(!o&&null===a)return null;if(0===(s=o?n:a))return t;var l=t.slice(s),u=l.reduce(function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t},{byteLength:0,duration:0,nalCount:0});return l.byteLength=u.byteLength,l.duration=u.duration,l.nalCount=u.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(t){h=t}}).prototype=new i,p=function(t,e){"number"===typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"===typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))},f=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},m=function(t){var e,n=t.minSegmentDts-t.timelineStartInfo.dts;return e=t.timelineStartInfo.baseMediaDecodeTime,e+=n,e=Math.max(0,e),"audio"===t.type&&(e*=t.samplerate/9e4,e=Math.floor(e)),e},(u=function(t,e){this.numberOfTracks=0,this.metadataStream=e,"undefined"!==typeof t.remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,u.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new i,u.prototype.flush=function(t){var e,n,i,r,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,S.forEach(function(t){o.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,E.forEach(function(t){o.info[t]=this.audioTrack[t]},this)),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,i=g.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(i.byteLength),o.initSegment.set(i),o.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(e=this.pendingCaptions[r]).startTime=e.startPts-s,e.startTime/=9e4,e.endTime=e.endPts-s,e.endTime/=9e4,o.captionStreams[e.stream]=!0,o.captions.push(e);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=n.pts-s,n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(l=function(i){var r,a,o=this,n=!0;l.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};(this.transmuxPipeline_=e).type="aac",e.metadataStream=new y.MetadataStream,e.aacStream=new w,e.audioTimestampRolloverStream=new y.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new y.TimestampRolloverStream("timed-metadata"),e.adtsStream=new _,e.coalesceStream=new u(i,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(t){"timed-metadata"!==t.type||e.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new s(a),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new y.MetadataStream,n.packetStream=new y.TransportPacketStream,n.parseStream=new y.TransportParseStream,n.elementaryStream=new y.ElementaryStream,n.videoTimestampRolloverStream=new y.TimestampRolloverStream("video"),n.audioTimestampRolloverStream=new y.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new y.TimestampRolloverStream("timed-metadata"),n.adtsStream=new _,n.h264Stream=new b,n.captionStream=new y.CaptionStream,n.coalesceStream=new u(i,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream),n.elementaryStream.pipe(n.videoTimestampRolloverStream).pipe(n.h264Stream),n.elementaryStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.elementaryStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(t){var e;if("metadata"===t.type){for(e=t.tracks.length;e--;)r||"video"!==t.tracks[e].type?a||"audio"!==t.tracks[e].type||((a=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(r=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime;r&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new d(r,i),n.videoSegmentStream.on("timelineStartInfo",function(t){a&&(a.timelineStartInfo=t,n.audioSegmentStream.setEarliestDts(t.dts))}),n.videoSegmentStream.on("processedGopsInfo",o.trigger.bind(o,"gopInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(t){a&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),a&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new s(a),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream))}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var e=this.transmuxPipeline_;this.baseMediaDecodeTime=t,a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,f(a),a.timelineStartInfo.baseMediaDecodeTime=t,e.audioTimestampRolloverStream&&e.audioTimestampRolloverStream.discontinuity()),r&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[],e.videoTimestampRolloverStream.discontinuity()),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,f(r),e.captionStream.reset(),r.timelineStartInfo.baseMediaDecodeTime=t),e.timedMetadataTimestampRolloverStream&&e.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){if(n){var e=c(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new i,e.exports={Transmuxer:l,VideoSegmentStream:d,AudioSegmentStream:s,AUDIO_PROPERTIES:E,VIDEO_PROPERTIES:S}},{"../aac":15,"../codecs/adts.js":16,"../codecs/h264":17,"../data/silence":18,"../m2ts/m2ts.js":26,"../utils/clock":33,"../utils/stream.js":35,"./mp4-generator.js":31}],33:[function(t,e,n){var i,r,a,o,s,l;i=function(t){return 9e4*t},r=function(t,e){return t*e},a=function(t){return t/9e4},o=function(t,e){return t/e},s=function(t,e){return i(o(t,e))},l=function(t,e){return r(a(t),e)},e.exports={secondsToVideoTs:i,secondsToAudioTs:r,videoTsToSeconds:a,audioTsToSeconds:o,audioTsToVideoTs:s,videoTsToAudioTs:l}},{}],34:[function(t,e,n){"use strict";var i;i=function(i){var r=i.byteLength,a=0,o=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+o},this.loadWord=function(){var t=i.byteLength-r,e=new Uint8Array(4),n=Math.min(4,r);if(0===n)throw new Error("no bytes available");e.set(i.subarray(t,t+n)),a=new DataView(e.buffer).getUint32(0),o=8*n,r-=n},this.skipBits=function(t){var e;o>t||(t-=o,t-=8*(e=Math.floor(t/8)),r-=e,this.loadWord()),a<<=t,o-=t},this.readBits=function(t){var e=Math.min(o,t),n=a>>>32-e;return(o-=e)>0?a<<=e:r>0&&this.loadWord(),(e=t-e)>0?n<<e|this.readBits(e):n},this.skipLeadingZeros=function(){var t;for(t=0;t<o;++t)if(0!==(a&2147483648>>>t))return a<<=t,o-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},e.exports=i},{}],35:[function(t,e,n){var i=function(){this.init=function(){var a={};this.on=function(t,e){a[t]||(a[t]=[]),a[t]=a[t].concat(e)},this.off=function(t,e){var n;return!!a[t]&&(n=a[t].indexOf(e),a[t]=a[t].slice(),a[t].splice(n,1),n>-1)},this.trigger=function(t){var e,n,i,r;if(e=a[t])if(2===arguments.length)for(i=e.length,n=0;n<i;++n)e[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(i=e.length,n=0;n<i;++n)e[n].apply(this,r)}},this.dispose=function(){a={}}}};i.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},i.prototype.push=function(t){this.trigger("data",t)},i.prototype.flush=function(t){this.trigger("done",t)},e.exports=i},{}],36:[function(t,e,n){var h=arguments[3],d=arguments[4],p=arguments[5],f=JSON.stringify;e.exports=function(t){for(var e,n=Object.keys(p),i=0,r=n.length;i<r;i++){var a=n[i];if(p[a].exports===t){e=a;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var o={};for(i=0,r=n.length;i<r;i++){o[a=n[i]]=a}d[e]=[Function(["require","module","exports"],"("+t+")(self)"),o]}var s=Math.floor(Math.pow(16,8)*Math.random()).toString(16),l={};l[e]=e,d[s]=[Function(["require"],"require("+f(e)+")(self)"),l];var u="("+h+")({"+Object.keys(d).map(function(t){return f(t)+":["+d[t][0]+","+f(d[t][1])+"]"}).join(",")+"},{},["+f(s)+"])",c=_.URL||_.webkitURL||_.mozURL||_.msURL;return new Worker(c.createObjectURL(new Blob([u],{type:"text/javascript"})))}},{}],37:[function(d,t,p){(function(t){function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(p,"__esModule",{value:!0});var n=e(d("global/window")),i=e(d("./flash-media-source")),r=e(d("./html-media-source")),a=e("undefined"!==typeof _?_.videojs:"undefined"!==typeof t?t.videojs:null),o=0,s={mode:"auto"};a.default.mediaSources={};var l=function(t,e){var n=a.default.mediaSources[t];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:e})},u=function(){return!!n.default.MediaSource&&!!n.default.MediaSource.isTypeSupported&&n.default.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},c=function(t){var e=a.default.mergeOptions(s,t);if(this.MediaSource={open:l,supportsNativeMediaSources:u},"html5"===e.mode||"auto"===e.mode&&u())return new r.default;if(a.default.getTech("Flash"))return new i.default;throw new Error("Cannot use Flash or Html5 to create a MediaSource for this video")};(p.MediaSource=c).open=l,c.supportsNativeMediaSources=u;var h={createObjectURL:function(t){var e=void 0;return t instanceof r.default?(e=n.default.URL.createObjectURL(t.nativeMediaSource_),t.url_=e):t instanceof i.default?(e="blob:vjs-media-source/"+o,o++,a.default.mediaSources[e]=t,e):(e=n.default.URL.createObjectURL(t),t.url_=e)}};p.URL=h,a.default.MediaSource=c,a.default.URL=h}).call(this,"undefined"!==typeof s?s:"undefined"!==typeof self?self:"undefined"!==typeof _?_:{})},{"./flash-media-source":5,"./html-media-source":8,"global/window":14}]},{},[37])(37)},e.exports=t()}).call(window)}).call(t,n(2))},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},c=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(41));var o={namespace:"",ads:!0},s=a.default.registerPlugin||a.default.plugin;function h(i,r,a){return function(){var t=i.volume(),e=i.muted()||0===(100*t|0),n="true"===c.getItem(a);e||c.setItem(r,t),e!==n&&c.setItem(a,e)}}var l=function(t,e){var n=e.namespace+"-volume",i=e.namespace+"-mute",r=e&&e.defaultVolume;t.on("volumechange",h(t,n,i)),e.ads&&t.on("advolumechange",h(t,n,i));var a,o,s,l,u=(a=t,o=n,s=i,l=r,function(){var t=c.getItem(o),e=c.getItem(s);null!==t?a.volume(t):void 0!==l&&a.volume(l),a.muted(null!==e&&"true"===e);var n=a.controlBar&&a.controlBar.volumePanel;n&&(n.volumeControl&&n.volumeControl.volumeBar&&(n.volumeControl.volumeBar.updateLastVolume_(),n.volumeControl.volumeBar.updateARIAAttributes()),n.muteToggle&&n.muteToggle.update())});u(),t.one("play",function(){return t.one("timeupdate",u)})},u=function(t){var e=this;this.ready(function(){l(e,a.default.mergeOptions(o,t))})};s("persistvolume",u),e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.getItem=function(t){return r()?window.localStorage.getItem(t):i.getItem(t)},e.setItem=function(t,e){return r()?window.localStorage.setItem(t,e):i.setItem(t,e,1/0,"/")};var i=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(42));function r(){try{return window.localStorage.setItem("persistVolume","persistVolume"),window.localStorage.removeItem("persistVolume"),!0}catch(t){return!1}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.getItem=function(t){return t&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},e.setItem=function(t,e,n,i,r,a){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var o="";if(n)switch(n.constructor){case Number:o=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:o="; expires="+n;break;case Date:o="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+o+(r?"; domain="+r:"")+(i?"; path="+i:"")+(a?"; secure":""),!0}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=n(0),l=(i=a)&&i.__esModule?i:{default:i};n(44),n(45);var o={webm:"video/webm",mp4:"video/mp4",ogv:"video/ogg",m3u8:"application/x-mpegURL"},s=o.mp4,u={},c=l.default.registerPlugin||l.default.plugin,h=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,this.videos=[],this.current=0,this.player.on("ended",this._videoEnd.bind(this))}return r(e,[{key:"init",value:function(t,e){e=e||{},this.videos=[],this.current=0,e.getVideoSource&&(this.getVideoSource=e.getVideoSource),this._addVideos(t),this._addPlaylistButtons(),this.player.vast&&this.player.vast.addBlockComponent("PlaylistPreviousButton","PlaylistNextButton")}},{key:"getCurrent",value:function(){return"current"in this&&this.videos[this.current]}},{key:"getCurrentIndex",value:function(){return"current"in this?this.current:-1}},{key:"getEntries",value:function(){return this.videos}},{key:"next",value:function(){this._nextPrev("next")}},{key:"prev",value:function(){this._nextPrev("prev")}},{key:"setVideo",value:function(t){var n=this;t<this.videos.length&&(this.current=t,this.currentVideo=this.videos[t],this.player.paused()||this._resumeVideo(),"function"===typeof this.getVideoSource?this.getVideoSource(this.videos[t],function(t,e){n._setVideoSource(t,e)}):this._setVideoSource(this.videos[t].src,this.videos[t].poster),this.player.trigger("vjs-playlist-change"))}},{key:"_updatePoster",value:function(t){this.player.poster(t)}},{key:"_addVideos",value:function(t){this.videos=this.videos.concat(t.map(function(t){return t.src=[].concat(t.src||[]).map(function(t){return t.src?t:{type:e._guessVideoType(t.src),src:t}}),t}))}},{key:"_addPlaylistButtons",value:function(){for(var t=this.player.getChild("controlBar"),e=t.children(),n=0,i=0;i<e.length;i++)"PlayToggle"===e[i].name()&&(n=i);t.addChild("PlaylistPreviousButton",{},n),t.addChild("PlaylistNextButton",{},n+2)}},{key:"_nextPrev",value:function(t){var e=void 0,n=void 0;if(n="next"===(t="next"===t?"next":"prev")?(e=this.videos.length-1,1):(e=0,-1),this.current!==e){var i=this.current+n;this.setVideo(i),this.player.trigger({type:"vjs-playlist-"+t,data:this.videos[i]}),this.player.trigger({type:t,data:this.videos[i]})}}},{key:"_setVideoSource",value:function(t,e){this.player.src(t),this._updatePoster(e)}},{key:"_resumeVideo",value:function(){var t=this;this.player.one("loadstart",function(){t.player.play()})}},{key:"_videoEnd",value:function(){this.current===this.videos.length-1?(this.player.trigger("lastVideoEnded"),this.player.trigger("vjs-playlist-ended")):(this._resumeVideo(),this.player.next())}}],[{key:"_guessVideoType",value:function(t){var e=t.split(".").pop();return o[e]||s}}]),e}(),d=function(a,o){var s=this;this.ready(function(){var t,e,n,i,r;e=a,n=o,i=(t=s).pl=t.pl||new h(t),r=parseInt(e,10),e instanceof Array?(i.init(e,l.default.mergeOptions(u,n)),i.setVideo(0)):r===r?i.setVideo(r):"string"===typeof e&&"undefined"!==typeof i[e]&&i[e].apply(t)})};c("playList",d),e.default=d},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},i=s(n(0)),o=s(n(14));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return n.updateVisibility(),n.on(t,"vjs-playlist-change",n.handlePlaylistChange),n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,o.default),r(i,[{key:"buildCSSClass",value:function(){return"vjs-playlist-previous-control "+a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"buildCSSClass",this).call(this)}},{key:"handleClick",value:function(t){this.player_.paused()||this.player_.isAdPlaying()||this.player_.pl.prev()}},{key:"handlePlaylistChange",value:function(t){this.updateVisibility()}},{key:"updateVisibility",value:function(){this.player_.isAdPlaying()||(a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"updateVisibility",this).call(this),this.player_.paused()?this.addClass("vjs-disabled"):(this.player_.pl&&this.player_.pl.getCurrentIndex())>0?this.removeClass("vjs-disabled"):this.addClass("vjs-disabled"))}}]),i}();l.prototype.controlText_="Previous",i.default.registerComponent("PlaylistPreviousButton",l),e.default=l},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},i=s(n(0)),o=s(n(14));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return n.updateVisibility(),n.on(t,"vjs-playlist-change",n.handlePlaylistChange),n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,o.default),r(i,[{key:"buildCSSClass",value:function(){return"vjs-playlist-next-control "+a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"buildCSSClass",this).call(this)}},{key:"handleClick",value:function(t){this.player_.paused()||this.player_.isAdPlaying()||this.player_.pl.next()}},{key:"handlePlaylistChange",value:function(t){this.updateVisibility()}},{key:"updateVisibility",value:function(){this.player_.isAdPlaying()||(a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"updateVisibility",this).call(this),this.player_.paused()?this.addClass("vjs-disabled"):(this.player_.pl&&this.player_.pl.getCurrentIndex())<(this.player_.pl&&this.player_.pl.getEntries()||[]).length-1?this.removeClass("vjs-disabled"):this.addClass("vjs-disabled"))}}]),i}();l.prototype.controlText_="Next",i.default.registerComponent("PlaylistNextButton",l),e.default=l},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=n(0),o=(i=r)&&i.__esModule?i:{default:i};var s=new Map,l=o.default.registerPlugin||o.default.plugin,u=function(){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.player=t,this.dispose=this.dispose.bind(this),this.onPlayToggle=this.onPlayToggle.bind(this);var n=e&&!0===e.enabled,i=e&&e.lock||"_DEFAULT_";"string"===typeof e?(n=!0,i=e):!0===e&&(n=!0),this.lockId=i,n&&(r.register(i,t),this.player.on("dispose",this.dispose),this.player.on("play",this.onPlayToggle))}return a(r,[{key:"dispose",value:function(){this.player.off("play",this.onPlayToggle),this.player.off("dispose",this.dispose),r.deregister(this.lockId,this.player)}},{key:"onPlayToggle",value:function(){var e=this;r.get(this.lockId).forEach(function(t){t!==e.player&&(t.isAdPlaying()?(t.vast.abort(),t.one("playing",function(){return t.pause()})):t.pause())})}}],[{key:"register",value:function(t,e){var n=s.get(t)||[];s.has(t)||s.set(t,n),s.set(t,n.concat(e))}},{key:"deregister",value:function(t,e){if(s.has(t)){var n=s.get(t);s.set(t,n.filter(function(t){return t!==e}))}}},{key:"get",value:function(t){return s.get(t)||[]}}]),r}(),c=function(t){var e=this;this.ready(function(){e.lock instanceof u||(e.lock=new u(e,t))})};l("lock",c),e.default=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=n(0),o=(i=a)&&i.__esModule?i:{default:i};n(48),n(49);var s=o.default.registerPlugin||o.default.plugin,l={forward:!1,backward:!1},u=function(){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e=!0===e?{forward:10,backward:10}:Object.assign({},l,e||{}),this.player=t,this.skipForward=!0===e.forward?10:e.forward,this.skipBackward=!0===e.backward?10:e.backward,this._addPlaylistButtons(),this.player.vast&&this.player.vast.addBlockComponent("SkipBackwardButton","SkipForwardButton")}return r(n,[{key:"forward",value:function(){this.player.paused()||this.player.isAdPlaying()||this.player.isLive()||this.player.currentTime(this.player.currentTime()+this.skipForward)}},{key:"backward",value:function(){this.player.paused()||this.player.isAdPlaying()||this.player.isLive()||this.player.currentTime(this.player.currentTime()-this.skipBackward)}},{key:"_addPlaylistButtons",value:function(){for(var t=this.player.getChild("controlBar"),e=t.children(),n=0,i=0;i<e.length;i++)"PlayToggle"===e[i].name()&&(n=i);this.skipForward&&t.addChild("SkipForwardButton",{value:this.skipForward},n+1),this.skipBackward&&t.addChild("SkipBackwardButton",{value:this.skipBackward},n)}}]),n}(),c=function(t){var e=this;this.ready(function(){e.skip instanceof u||(e.skip=new u(e,t))})};s("skip",c),e.default=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=s(n(0)),o=s(n(15));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,o.default),i(n,[{key:"buildCSSClass",value:function(){return"vjs-skip-forward-control "+r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"buildCSSClass",this).call(this)}},{key:"handleClick",value:function(t){this.player_.skip.forward()}},{key:"updateVisibility",value:function(){r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateVisibility",this).call(this),this.value_?this.controlText(this.value_+"s"):this.controlText("Skip Forward")}}]),n}();a.default.registerComponent("SkipForwardButton",l),e.default=l},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=s(n(0)),o=s(n(15));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function n(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,o.default),i(n,[{key:"buildCSSClass",value:function(){return"vjs-skip-backward-control "+r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"buildCSSClass",this).call(this)}},{key:"handleClick",value:function(t){this.player_.skip.backward()}},{key:"updateVisibility",value:function(){r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateVisibility",this).call(this),this.value_?this.controlText(this.value_+"s"):this.controlText("Skip Backward")}}]),n}();a.default.registerComponent("SkipBackwardButton",l),e.default=l},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=a(n(0));n(10);var l=a(n(51));n(9);function a(t){return t&&t.__esModule?t:{default:t}}var o={suspend:!1},s=["ProgressControl","playToggle"],u=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.settings_=Object.assign({},o,e||{}),this.player_=t,this.pods_=[],this.activePod_=void 0,this.playedPods_=[],this.entries_=l.default.processEntries(e.entries,e.url),this.onDurationChange_=this.onDurationChange_.bind(this),t.on("contentupdate",this.onContentUpdate_.bind(this)),t.on("readyforpreroll",this.onReadyForPreroll_.bind(this)),t.on("timeupdate",this.onTimeUpdated_.bind(this)),this.onContentUpdate_()}return i(n,[{key:"suspend",value:function(){this.settings_.suspend=!0}},{key:"resume",value:function(){this.settings_.suspend=!1}},{key:"isActive",value:function(){return!this.settings_.suspend&&this.entries_.length>0}},{key:"abort",value:function(){this.player_.trigger("adscanceled")}},{key:"dispose",value:function(){this.player_.off("durationchange",this.onDurationChange_),this.player_.off("contentdurationchange",this.onDurationChange_),this.activePod_&&this.activePod_.dispose()}},{key:"setUrl",value:function(t){t?this.setEntries({offset:0,url:t}):this.setEntries()}},{key:"setEntries",value:function(t){this.entries_=l.default.processEntries(t),this.player_.currentSrc()&&this.update()}},{key:"update",value:function(){this.dispose(),this.playedPods_=[],this.calculatePods_(!0),this.player_.on("contentdurationchange",this.onDurationChange_),this.player_.on("durationchange",this.onDurationChange_),this.isActive()?this.player_.trigger("adsready"):this.player_.trigger("adscanceled")}},{key:"play",value:function(t,e){var n=this;if(this.isActive()){if(!this.activePod_){var i=this.pods_[t];i.last=e,this.playedPods_.push(e);var r=new l.default(this,i.url,this.settings_);this.activePod_=r;var a=!1;this.player_.trigger("ads-request");var o=function(){n.player_.trigger("ads-load"),a||(a=!0,n.player_.pause(),n.player_.ads.startLinearAdMode(),n.disableControls_())},s=function(){a&&(a=!1,setTimeout(function(){n.player_.ads.endLinearAdMode(),n.enableControls_(),n.player_.trigger("ads-allpods-completed"),n.player_.trigger("vast-preroll-removed"),n.player_.addClass("vjs-waiting")},1)),r.dispose(),n.activePod_=void 0};return 0===i.time&&o(),r.load().then(o).then(function(){return r.play()}).then(s,s)}}else this.trigger("adscanceled")}},{key:"addBlockComponent",value:function(){return c.addBlockComponent.apply(c,arguments)}},{key:"removeBlockComponent",value:function(){return c.removeBlockComponent.apply(c,arguments)}},{key:"disableControls_",value:function(){var n=this.player_.getChild("controlBar");n&&s.forEach(function(t){var e=t&&n.getChild(t);e&&e.hide()})}},{key:"enableControls_",value:function(){var n=this.player_.getChild("controlBar");n&&s.forEach(function(t){var e=t&&n.getChild(t);e&&e.show()})}},{key:"onReadyForPreroll_",value:function(){if(!this.activePod_){var t=this.getNextPod_(0);void 0===t?this.player_.trigger("adscanceled"):this.play(t,0)}}},{key:"onTimeUpdated_",value:function(){if(!(this.player_.readyState()<=1||this.player_.paused()||this.player_.seeking()||this.activePod_)){var t=this.player_.currentTime(),e=this.getNextPod_(t);void 0!==e&&this.play(e,t)}}},{key:"onContentUpdate_",value:function(){this.player_.trigger("nopostroll");var t=this.entries_.filter(function(t){return 0===t.offset});this.settings_.suspend||!t?this.player_.trigger("nopreroll"):this.update()}},{key:"onDurationChange_",value:function(){this.calculatePods_()}},{key:"getNextPod_",value:function(t){if(this.isActive())for(var e=this.playedPods_[this.playedPods_.length-1]||0,n=0;n<this.pods_.length;n++){var i=this.pods_[n];if(i.repeat){if(t-e>=i.time)return n}else if((-1===this.playedPods_.lastIndexOf(i.time)||i.last)&&i.time>=t)return n}}},{key:"calculatePods_",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0|this.player_.duration();(t||e!==this.previousDuration_)&&(this.pods_=l.default.calculatePods(e,this.entries_),this.previousDuration_=e,console.debug("Pods calculated for new duration: %s",e,this.pods_))}}]),n}();function c(t){return void 0===this.ads?console.error("vast video plugin requires videojs-contrib-ads, vast plugin not initialized"):(this.ads.shouldPlayContentBehindAd=function(){return!1},this.vast=new u(this,t)),this}c.addBlockComponent=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s=s.concat(e||[])},c.removeBlockComponent=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s=s.filter(function(t){return-1===e.indexOf(t)})},(r.default.registerPlugin||r.default.plugin)("vast",c),e.default=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=u(n(4)),o=u(n(3));n(10);var s=u(n(68)),r=u(n(69)),l=u(n(71));function u(t){return t&&t.__esModule?t:{default:t}}var c={skip:void 0,timeout:1e4,count:!1},h="idle",d="loading",p="ready",f="playing",m="finished",v={VAST:r.default,VPAID:l.default},g=function(){function r(t,e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.settings_=Object.assign({},c,n||{}),this.vast_=t,this.player_=t.player_,this.url_=e,this.state_=h,"boolean"!==typeof this.settings_.skip&&(this.settings_.skip=parseInt(this.settings_.skip),this.settings_.skip<0&&(this.settings_.skip=!1)),this.settings_.count||(this.settings_.count=1/0),this.vastLoader_=new s.default(e,{timeout:this.settings_.timeout}),this.loadPromise_=new o.default(function(t,e){i.loadResolve_=t,i.loadReject_=e})}return i(r,[{key:"load",value:function(){var n=this;return this.state_!==d&&(this.state_=d,this.vastLoader_.load().then(function(t){var e=n.parseAds_(t.ads||[]);if(0===e.length)throw new Error("No viable ads found");return n.state_=p,e}).then(function(t){n.player_.trigger("ads-load"),n.loadResolve_(t)},function(t){console.debug(t),n.loadReject_(t)})),this.loadPromise_}},{key:"play",value:function(){var e=this,n=!1;this.player_.trigger("ads-pod-started");var i=function t(){n||(n=!0,e.player_.trigger("ads-pod-ended"),e.player_.off("adtimeout",t),e.tearDown())};return this.player_.one("adtimeout",i),this.loadPromise_.then(function(t){if(0===(t=[].concat(t||[])).length)throw new Error("No ads available");return e.state_=f,e.playAds_(t)}).then(function(){e.state_=m,i()},function(t){console.error("Error playing ad",t),i()})}},{key:"dispose",value:function(){this.state_!==d?this.state_!==f?this.tearDown():this.currentAd_.skip():this.vastLoader_.cancel()}},{key:"tearDown",value:function(){this.state_===m&&this.currentAd_.dispose(),this.state_=h}},{key:"playAds_",value:function(t){t=[].concat(t||[]).filter(function(t){return!!t});for(var e=o.default.resolve(),n=0;n<t.length&&n<this.settings_.count;n++){var i=function(t,e){return function(){return t.playAd_(e)}}(this,t[n]);e=e.then(i)}return e}},{key:"playAd_",value:function(t){var e=this;this.currentAd_=t;var n=function(){t.tearDown(),e.player_.trigger("ads-ad-ended")};return this.player_.trigger("ads-ad-started"),t.play().then(function(){return n(),t.finish(),t},function(){return n(),t.abort(),t})}},{key:"parseAds_",value:function(t){var n=this;return t.sort(function(t,e){return void 0===t.sequence&&void 0===e.sequence?0:void 0===t.sequence?1:void 0===e.sequence?-1:t.sequence-e.sequence}).map(function(e){var t=r.findIntegrator_(n.player_,e);if(t)try{return new t(n.player_,e,{skip:n.settings_.skip,showCountdown:n.settings_.showCountdown})}catch(t){a.default.util.track(e.errorURLTemplates,{ERRORCODE:t.code||300})}else a.default.util.track(e.errorURLTemplates,{ERRORCODE:403})}).filter(function(t){return!!t})}}],[{key:"findIntegrator_",value:function(e,t){var n=t.creatives.filter(function(t){return"linear"===t.type}).shift();if(n&&n.mediaFiles)return n.mediaFiles.map(function(t){var e=(t.apiFramework||"VAST").toUpperCase();return{file:t,integrator:v[e]}}).filter(function(t){return t.integrator&&t.integrator.supports(e,t.file)}).map(function(t){return t.integrator}).shift()}},{key:"processEntries",value:function(t,e){return t=[].concat(t||[]),e&&(t=t.map(function(t){return Object.assign({url:e},t)})),0===t.length&&e&&t.push({url:e,offset:0}),t=t.filter(function(t){return!!t&&(!!t.url&&(void 0!==t.offset||void 0!==t.interval||void 0!==t.minInterval||void 0!==t.maxInterval))})}},{key:"calculatePods",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(function(t){return void 0!==t.offset?r.calculateOffsetPod(t):void 0!==t.interval||void 0!==t.minInterval||void 0!==t.maxInterval?r.calculateIntervalPod(t,e):void 0}).reduce(function(t,e){return t.concat(e||[])},[]).sort(function(t,e){return t.time-e.time})}},{key:"calculateOffsetPod",value:function(t){return{url:t.url,repeat:!1,time:t.offset}}},{key:"calculateIntervalPod",value:function(t,e){var n=0,i=t.minInterval||t.interval||t.maxInterval,r=t.maxInterval||t.interval||t.minInterval;if(i>r)console.warn("Invalid range for ad pod. Minimum interval can't be larger than max range");else{if(!e||e===1/0)return{url:t.url,repeat:!0,time:i};if(2*i>e)console.debug("No pods would fit into the video. aborting");else{for(var a=1,o=e;0===n&&o>0;o=e/(a+=1))o>=i&&o<=r&&(n=a),o<i&&(n=a);var s=e/(n+1);if(!(n<=1||s<0))return{url:t.url,repeat:!0,time:s}}}}}]),r}();e.default=g},function(e,t,n){(function(){var t,r,a,o;o=n(53),r=n(54),a=n(59),t=function(){function t(){}return t.get=function(t,e,n){var i;return n||("function"===typeof e&&(n=e),e={}),null!=e.response?n(null,e.response):(null!=(i=e.urlhandler)?i.supported():void 0)?e.urlhandler.get(t,e,n):o.supported()?o.get(t,e,n):r.supported()?r.get(t,e,n):a.supported()?a.get(t,e,n):n()},t}(),e.exports=t}).call(void 0)},function(e,t,n){(function(){var t;t=function(){function t(){}return t.xhr=function(){var t;if("withCredentials"in(t=new window.XMLHttpRequest))return t},t.supported=function(){return!!this.xhr()},t.get=function(t,e,n){var i;if("https:"===window.location.protocol&&0===t.indexOf("http://"))return n(new Error("Cannot go from HTTPS to HTTP."));try{return(i=this.xhr()).open("GET",t),i.timeout=e.timeout||0,i.withCredentials=e.withCredentials||!1,i.overrideMimeType("text/xml"),i.send(),i.onreadystatechange=function(){if(4===i.readyState)return n(null,i.responseXML)}}catch(t){return n()}},t}(),e.exports=t}).call(void 0)},function(n,t,i){(function(){var t,e=i(55);t=function(){function t(){}return t.xhr=function(){var t;return e&&(t=new e),t},t.supported=function(){try{return e.module_ready(),!0}catch(t){return!1}},t.get=function(t,e,n){var i;"function"===typeof e&&(n=e,e=null);try{return(i=this.xhr()).open("GET",t),i.timeout=e.timeout||0,i.withCredentials=e.withCredentials||!1,i.send(),i.onreadystatechange=function(){if(4===i.readyState)return n(null,i.responseXML)}}catch(t){return n()}},t}(),n.exports=t}).call(void 0)},function(t,e,n){var i,r,a,It="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};a=function(t,e,n,i){var rt,at,ot,st,lt,ut,ct,ht,dt,pt,ft,mt,vt,gt,yt,_t,bt,wt,Tt,xt,Et,St,At,Mt,Ct,kt,Ot,Lt,Rt,Pt;return ot=(at=rt=t).document,st="undefined",lt="object",ut="function",ct="onunload",mt=0,vt=[],yt=gt=ft=pt=dt=ht=null,_t=rt.parseInt,bt=rt.setTimeout,wt=rt.clearTimeout,rt.setInterval,rt.clearInterval,Tt="instanceId",xt="readyState",Et="onreadystatechange",St="ontimeout",At="onerror",Mt="binaryResponseBody",Ct="xmlResponseText",kt="loadPolicyURL",Ot="noCacheHeader",Lt="sendTimeout",Rt="appendToId",Pt="swfIdPrefix",It(rt.flensed)===st&&(rt.flensed={}),It(rt.flensed.flXHR)===st&&(dt=rt.flensed,bt(function(){var t=!1,a=ot.getElementsByTagName("script"),o=a.length;try{dt.base_path.toLowerCase(),t=!0}catch(t){dt.base_path=""}function e(t,e,n){for(var i=0;i<o&&!(It(a[i].src)!==st&&a[i].src.indexOf(t)>=0);i++);var r=ot.createElement("script");r.setAttribute("src",dt.base_path+t),("undefined"===typeof e?"undefined":It(e))!==st&&r.setAttribute("type",e),("undefined"===typeof n?"undefined":It(n))!==st&&r.setAttribute("language",n),ot.getElementsByTagName("head")[0].appendChild(r)}if(("undefined"===typeof a?"undefined":It(a))!==st&&null!==a&&!t)for(var n=0,i=0;i<o;i++)if(It(a[i].src)!==st&&((n=a[i].src.indexOf("flensed.js"))>=0||(n=a[i].src.indexOf("flXHR.js"))>=0)){dt.base_path=a[i].src.substr(0,n);break}try{dt.checkplayer.module_ready()}catch(t){e("checkplayer.js","text/javascript")}var r=null;if(function(){try{dt.ua.pv.join(".")}catch(t){return r=bt(arguments.callee,25)}dt.ua.win&&dt.ua.ie&&e("flXHR.vbs","text/vbscript","vbscript"),dt.binaryToString=function(t,e){if(!(e=dt.ua.win&&dt.ua.ie&&("undefined"===typeof e?"undefined":It(e))!==st?!!e:!(dt.ua.win&&dt.ua.ie)))try{return flXHR_vb_BinaryToString(t)}catch(t){}var n="",i=[];try{for(var r=0;r<t.length;r++)i[i.length]=String.fromCharCode(t[r]);n=i.join("")}catch(t){}return n},dt.bindEvent(at,ct,function(){try{for(var t in rt.flensed.unbindEvent(at,ct,arguments.callee),yt)if(yt[t]!==Object.prototype[t])try{yt[t]=null}catch(t){}dt.flXHR=null,pt=ft=dt=yt=null}catch(t){}})}(),null!==r)try{at.attachEvent(ct,function t(){wt(r);try{at.detachEvent(ct,t)}catch(t){}})}catch(t){}var s=null;function l(){wt(s);try{at.detachEvent(ct,l)}catch(t){}}try{at.attachEvent(ct,l)}catch(t){}s=bt(function(){l();try{dt.checkplayer.module_ready()}catch(t){throw new rt.Error("flXHR dependencies failed to load.")}},2e4)},0),dt.flXHR=function(n){var t=!1;if(null!==n&&("undefined"===typeof n?"undefined":It(n))===lt&&It(n.instancePooling)!==st&&(t=!!n.instancePooling)){var e=function(){for(var t=0;t<vt.length;t++){var e=vt[t];if(4===e[xt])return e.Reset(),e.Configure(n),e}return null}();if(null!==e)return e}var i=++mt,r=[],a=null,o=null,s=null,l=null,u=-1,c=0,h=null,d=null,p=null,f=null,m=null,v=null,g=null,y=null,_=null,b=!0,w=!1,T="flXHR_"+i,x=!0,E=!1,S=!0,A=!1,M="flXHR_swf",C="flXHRhideSwf",k=null,O=-1,L="",R=null,P=null,I=null;function D(){y=null===k?ot.getElementsByTagName("body")[0]:dt.getObjectById(k);try{y.nodeName.toLowerCase(),dt.checkplayer.module_ready(),pt=dt.checkplayer}catch(t){return void(a=bt(D,25))}if(null===ft&&It(pt._ins)===st)try{ft=new pt(yt.MIN_PLAYER_VERSION,K,!1,J)}catch(t){return void H(yt.DEPENDENCY_ERROR,"flXHR: checkplayer Init Failed","The initialization of the 'checkplayer' library failed to complete.")}else ft=pt._ins,j()}function j(){if(null!==ft&&ft.checkPassed){null===gt&&null===k&&(dt.createCSS("."+C,"left:-1px;top:0px;width:1px;height:1px;position:absolute;"),gt=!0);var t=ot.createElement("div");t.id=l,t.className=C,y.appendChild(t),y=null;var e={id:l,name:l,styleclass:C},n={swfCB:N,swfEICheck:"reset"};try{ft.DoSWF(dt.base_path+"flXHR.swf",l,"1","1",{},{allowScriptAccess:"always"},e,n)}catch(t){return void H(yt.DEPENDENCY_ERROR,"flXHR: checkplayer Call Failed","A call to the 'checkplayer' library failed to complete.")}}else a=bt(j,25)}function N(t){if(t.status===pt.SWF_EI_READY){if(G(),(v=dt.getObjectById(l)).setId(l),""!==L&&v.loadPolicy(L),v.autoNoCacheHeader(x),v.returnBinaryResponseBody(E),v.doOnReadyStateChange=F,v.doOnError=H,v.sendProcessed=Q,v.chunkResponse=B,u=0,$(),Y(),("undefined"===typeof R?"undefined":It(R))===ut)try{R(g)}catch(t){return void H(yt.HANDLER_ERROR,"flXHR::onreadystatechange(): Error","An error occurred in the handler function. ("+t.message+")")}X()}}function U(){try{rt.flensed.unbindEvent(at,ct,U)}catch(t){}try{for(var t=0;t<vt.length;t++)vt[t]===g&&(vt[t]=!1)}catch(t){}try{for(var e in g)if(g[e]!==Object.prototype[e])try{g[e]=null}catch(t){}}catch(t){}if(g=null,G(),("undefined"===typeof v?"undefined":It(v))!==st&&null!==v){try{v.abort()}catch(t){}try{F=v.doOnReadyStateChange=null}catch(t){}try{v.doOnError=null,doOnError=null}catch(t){}try{Q=v.sendProcessed=null}catch(t){}try{B=v.chunkResponse=null}catch(t){}v=null;try{rt.swfobject.removeSWF(l)}catch(t){}}q(),y=_=h=p=I=P=R=null}function B(){E&&It(arguments[0])!==st?_=(_=null!==_?_:[]).concat(arguments[0]):"string"===It(arguments[0])&&(_=null!==_?_:"",_+=arguments[0])}function F(){if(It(arguments[0])!==st&&(u=arguments[0]),4===u){if(G(),E&&null!==_)try{d=dt.binaryToString(_,!0);try{h=flXHR_vb_StringToBinary(d)}catch(t){h=_}}catch(t){}else d=_;if(_=null,""!==d&&S)try{p=dt.parseXMLString(d)}catch(t){p={}}}It(arguments[1])!==st&&(f=arguments[1]),It(arguments[2])!==st&&(m=arguments[2]),V(u)}function V(t){if(c=t,$(),Y(),g[xt]=Math.max(0,t),("undefined"===typeof R?"undefined":It(R))===ut)try{R(g)}catch(t){return void H(yt.HANDLER_ERROR,"flXHR::onreadystatechange(): Error","An error occurred in the handler function. ("+t.message+")")}}function H(){var e;G(),q(),w=!0;try{e=new dt.error(arguments[0],arguments[1],arguments[2],g)}catch(t){e=new function(){this.number=0,this.name="flXHR Error: Unknown",this.description="Unknown error from 'flXHR' library.",this.message=this.description,this.srcElement=g;var t=this.number,e=this.name,n=this.description;this.toString=function(){return t+", "+e+", "+n}}}var t=!1;try{("undefined"===typeof P?"undefined":It(P))===ut&&(P(e),t=!0)}catch(i){var n=function(){this.number=yt.HANDLER_ERROR,this.name="flXHR::onerror(): Error",this.description="An error occured in the handler function. ("+i.message+")\nPrevious:["+r+"]",this.message=this.description,this.srcElement=g;var t=this.number,e=this.name,n=this.description;this.toString=function(){return t+", "+e+", "+n}},r=e.toString();e=new n}t||bt(function(){dt.throwUnhandledError(e.toString())},1)}function z(){if(tt(),w=!0,("undefined"===typeof I?"undefined":It(I))===ut)try{I(g)}catch(t){return void H(yt.HANDLER_ERROR,"flXHR::ontimeout(): Error","An error occurred in the handler function. ("+t.message+")")}else H(yt.TIMEOUT_ERROR,"flXHR: Operation Timed out","The requested operation timed out.")}function G(){wt(a),a=null,wt(s),s=null,wt(o),o=null}function W(t,e,n){r[r.length]={func:t,funcName:e,args:n},b=!1}function q(){if(!b){b=!0;for(var t=r.length,e=0;e<t;e++)try{r[e]=!1}catch(t){}r=[]}}function X(){if(u<0)o=bt(X,25);else if(!b){for(var e=0;e<r.length;e++)try{!1!==r[e]&&(r[e].func.apply(g,r[e].args),r[e]=!1)}catch(t){return void H(yt.HANDLER_ERROR,"flXHR::"+r[e].funcName+"(): Error","An error occurred in the "+r[e].funcName+"() function.")}b=!0}}function Y(){try{g[Tt]=T,g[xt]=c,g.status=f,g.statusText=m,g.responseText=d,g.responseXML=p,g.responseBody=h,g[Et]=R,g[At]=P,g[St]=I,g[kt]=L,g[Ot]=x,g[Mt]=E,g[Ct]=S}catch(t){}}function $(){try{T=g[Tt],null!==g.timeout&&(ht=_t(g.timeout,10))>0&&(O=ht),R=g[Et],P=g[At],I=g[St],null!==g[kt]&&(g[kt]!==L&&u>=0&&v.loadPolicy(g[kt]),L=g[kt]),null!==g[Ot]&&(g[Ot]!==x&&u>=0&&v.autoNoCacheHeader(g[Ot]),x=g[Ot]),null!==g[Mt]&&(g[Mt]!==E&&u>=0&&v.returnBinaryResponseBody(g[Mt]),E=g[Mt]),null!==S&&(S=!!g[Ct])}catch(t){}}function Z(){tt();try{v.reset()}catch(t){}_=h=p=d=m=f=null,w=!1,Y(),L="",$()}function K(t){t.checkPassed?j():A?ft.UpdatePlayer():H(yt.PLAYER_VERSION_ERROR,"flXHR: Insufficient Flash Player Version","The Flash Player was either not detected, or the detected version ("+t.playerVersionDetected+") was not at least the minimum version ("+yt.MIN_PLAYER_VERSION+") needed by the 'flXHR' library.")}function J(t){t.updateStatus===pt.UPDATE_CANCELED?H(yt.PLAYER_VERSION_ERROR,"flXHR: Flash Player Update Canceled","The Flash Player was not updated."):t.updateStatus===pt.UPDATE_FAILED&&H(yt.PLAYER_VERSION_ERROR,"flXHR: Flash Player Update Failed","The Flash Player was either not detected or could not be updated.")}function Q(){null!==O&&O>0&&(s=bt(z,O))}function tt(){G(),q(),$(),c=u=0;try{v.abort()}catch(t){H(yt.CALL_ERROR,"flXHR::abort(): Failed","The abort() call failed to complete.")}Y()}function et(){if($(),It(arguments[0])===st||It(arguments[1])===st)H(yt.CALL_ERROR,"flXHR::open(): Failed","The open() call requires 'method' and 'url' parameters.");else{(u>0||w)&&Z(),0===c?F(1):u=1;var t=arguments[0],e=arguments[1],n=It(arguments[2])===st||arguments[2],i=It(arguments[3])!==st?arguments[3]:"",r=It(arguments[4])!==st?arguments[4]:"";try{v.autoNoCacheHeader(x),v.open(t,e,n,i,r)}catch(t){H(yt.CALL_ERROR,"flXHR::open(): Failed","The open() call failed to complete.")}}}function nt(){if($(),u<=1&&!w){var t=It(arguments[0])!==st?arguments[0]:"";1===c?F(2):u=2;try{v.autoNoCacheHeader(x),v.send(t)}catch(t){H(yt.CALL_ERROR,"flXHR::send(): Failed","The send() call failed to complete.")}}else H(yt.CALL_ERROR,"flXHR::send(): Failed","The send() call cannot be made at this time.")}function it(){if($(),It(arguments[0])===st||It(arguments[1])===st)H(yt.CALL_ERROR,"flXHR::setRequestHeader(): Failed","The setRequestHeader() call requires 'name' and 'value' parameters.");else if(!w){var t=It(arguments[0])!==st?arguments[0]:"",e=It(arguments[1])!==st?arguments[1]:"";try{v.setRequestHeader(t,e)}catch(t){H(yt.CALL_ERROR,"flXHR::setRequestHeader(): Failed","The setRequestHeader() call failed to complete.")}}}return function(){function t(){wt(a);try{at.detachEvent(ct,t)}catch(t){}}("undefined"===typeof n?"undefined":It(n))===lt&&null!==n&&(It(n[Tt])!==st&&null!==n[Tt]&&""!==n[Tt]&&(T=n[Tt]),It(n[Pt])!==st&&null!==n[Pt]&&""!==n[Pt]&&(M=n[Pt]),It(n[Rt])!==st&&null!==n[Rt]&&""!==n[Rt]&&(k=n[Rt]),It(n[kt])!==st&&null!==n[kt]&&""!==n[kt]&&(L=n[kt]),It(n[Ot])!==st&&(x=!!n[Ot]),It(n[Mt])!==st&&(E=!!n[Mt]),It(n[Ct])!==st&&(S=!!n[Ct]),It(n.autoUpdatePlayer)!==st&&(A=!!n.autoUpdatePlayer),It(n[Lt])!==st&&(ht=_t(n[Lt],10))>0&&(O=ht),It(n[Et])!==st&&null!==n[Et]&&(R=n[Et]),It(n[At])!==st&&null!==n[At]&&(P=n[At]),It(n[St])!==st&&null!==n[St]&&(I=n[St])),l=M+"_"+i;try{at.attachEvent(ct,t)}catch(t){}!function(){try{dt.bindEvent(at,ct,U)}catch(t){return a=bt(arguments.callee,25)}t(),a=bt(D,1)}()}(),g={readyState:c,responseBody:h,responseText:d,responseXML:p,status:f,statusText:m,timeout:O,open:function(){$(),0===g[xt]&&V(1),!b||u<0?W(et,"open",arguments):et.apply({},arguments)},send:function(){$(),1===g[xt]&&V(2),!b||u<0?W(nt,"send",arguments):nt.apply({},arguments)},abort:tt,setRequestHeader:function(){$(),!b||u<0?W(it,"setRequestHeader",arguments):it.apply({},arguments)},getResponseHeader:function(){return $(),""},getAllResponseHeaders:function(){return $(),[]},onreadystatechange:R,ontimeout:I,instanceId:T,loadPolicyURL:L,noCacheHeader:x,binaryResponseBody:E,xmlResponseText:S,onerror:P,Configure:function(t){("undefined"===typeof t?"undefined":It(t))===lt&&null!==t&&(It(t[Tt])!==st&&null!==t[Tt]&&""!==t[Tt]&&(T=t[Tt]),It(t[Ot])!==st&&(x=!!t[Ot],u>=0&&v.autoNoCacheHeader(x)),It(t[Mt])!==st&&(E=!!t[Mt],u>=0&&v.returnBinaryResponseBody(E)),It(t[Ct])!==st&&(S=!!t[Ct]),It(t[Et])!==st&&null!==t[Et]&&(R=t[Et]),It(t[At])!==st&&null!==t[At]&&(P=t[At]),It(t[St])!==st&&null!==t[St]&&(I=t[St]),It(t[Lt])!==st&&(ht=_t(t[Lt],10))>0&&(O=ht),It(t[kt])!==st&&null!==t[kt]&&""!==t[kt]&&t[kt]!==L&&(L=t[kt],u>=0&&v.loadPolicy(L)),Y())},Reset:Z,Destroy:U},t&&(vt[vt.length]=g),g},(yt=dt.flXHR).HANDLER_ERROR=10,yt.CALL_ERROR=11,yt.TIMEOUT_ERROR=12,yt.DEPENDENCY_ERROR=13,yt.PLAYER_VERSION_ERROR=14,yt.SECURITY_ERROR=15,yt.COMMUNICATION_ERROR=16,yt.MIN_PLAYER_VERSION="9.0.124",yt.module_ready=function(){}),t.flensed.flXHR},i=[n(18),n(58)],void 0===(r=function(t,e){a(window,document)}.apply(e,i))||(t.exports=r)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(t,e,n){var i,r,a,tt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};a=function(t,e,n,i){var U,B,F,V,H,z,G,W,q,X,Y,$,l,Z,K,J,Q;return t.swfobject||(t.swfobject=i),F=(B=U=t).document,V="undefined",H="object",z="function",G="string",W="onunload",q="none",$=Y=X=null,l="flensed.js",Z=U.setTimeout,K=U.clearTimeout,J=U.setInterval,Q=U.clearInterval,tt(U.flensed)===V&&(U.flensed={}),tt(U.flensed.checkplayer)===V&&(X=U.flensed,Z(function(){var t=!1,a=F.getElementsByTagName("script"),o=a.length;try{X.base_path.toLowerCase(),t=!0}catch(t){X.base_path=""}function e(t,e,n){for(var i=0;i<o&&!(tt(a[i].src)!==V&&a[i].src.indexOf(t)>=0);i++);var r=F.createElement("script");r.setAttribute("src",X.base_path+t),("undefined"===typeof e?"undefined":tt(e))!==V&&r.setAttribute("type",e),("undefined"===typeof n?"undefined":tt(n))!==V&&r.setAttribute("language",n),F.getElementsByTagName("head")[0].appendChild(r)}if(("undefined"===typeof a?"undefined":tt(a))!==V&&null!==a&&!t)for(var n=0,i=0;i<o;i++)if(tt(a[i].src)!==V&&((n=a[i].src.indexOf(l))>=0||(n=a[i].src.indexOf("checkplayer.js"))>=0)){X.base_path=a[i].src.substr(0,n);break}try{U.swfobject.getObjectById("a")}catch(t){e("swfobject.js","text/javascript")}try{X.ua.pv.join(".")}catch(t){e(l,"text/javascript")}function r(){K(s);try{B.detachEvent(W,arguments.callee)}catch(t){}}try{B.attachEvent(W,r)}catch(t){}var s=Z(function(){r();try{U.swfobject.getObjectById("a"),X.ua.pv.join(".")}catch(t){throw new U.Error("CheckPlayer dependencies failed to load.")}},2e4)},0),X.checkplayer=function(e,n,i,r){if(tt(Y._ins)!==V)return Y._ins.ready()&&setTimeout(function(){n(Y._ins)},0),Y._ins;var t="6.0.65",a=[],o=null,s=!1,l=null,u=null,c="",x=!1,h=null,E=[],S={},A=[],M=null,d=null,p=null,f=null,m=!1,v=null,C=!1,g=!1,y=!1,_=null;function b(){try{M=F.getElementsByTagName("body")[0]}catch(t){}if(("undefined"===typeof M?"undefined":tt(M))!==V&&null!==M){try{U.swfobject.getObjectById("a"),$=U.swfobject}catch(t){return void(l=Z(b,25))}g=$.hasFlashPlayerVersion(t),C=$.hasFlashPlayerVersion(d),O(),("undefined"===typeof p?"undefined":tt(p))===z&&p(N),x=!0,C?T():m&&!s&&R()}else l=Z(b,25)}function w(){if(tt(B.detachEvent)!==V&&B.detachEvent(W,w),Y._ins=null,("undefined"===typeof h?"undefined":tt(h))!==V&&null!==h){try{D=h.updateSWFCallback=null}catch(t){}h=null}try{for(var t in N)if(N[t]!==Object.prototype[t])try{N[t]=null}catch(t){}}catch(t){}M=N=null,k(),f=p=A=null;try{for(var e in Y)if(Y[e]!==Object.prototype[e])try{Y[e]=null}catch(t){}}catch(t){}Y=null,X.checkplayer=null,U=X=null}function T(){if(x){var t=0;try{t=A.length}catch(t){}for(var e=0;e<t;e++)try{A[e].func.apply(N,A[e].args),A[e]=!1}catch(t){if(C=!1,O(),("undefined"===typeof p?"undefined":tt(p))!==z)throw new U.Error("checkplayer::"+A[e].funcName+"() call failed.");p(N)}A=null}else o=Z(T,25)}function k(){for(var t in K(l),l=null,K(o),o=null,S)S[t]!==Object.prototype[t]&&(Q(S[t]),S[t]=!1);for(var e in a)a[e]!==Object.prototype[e]&&(K(a[e]),a[e]=!1)}function O(){try{N.playerVersionDetected=v,N.checkPassed=C,N.updateable=g,N.updateStatus=y,N.updateControlsContainer=_}catch(t){}}function L(e,t){var n=t?"visible":"hidden",i=X.getObjectById(e);try{if(null!==i&&tt(i.style)!==V&&null!==i.style)i.style.visibility=n;else try{X.createCSS("#"+e,"visibility:"+n)}catch(t){}}catch(t){try{X.createCSS("#"+e,"visibility:"+n)}catch(t){}}}function R(){var t=M;if(("undefined"===typeof t?"undefined":tt(t))!==V&&null!==t){try{$.getObjectById("a")}catch(t){return void(a[a.length]=Z(R,25))}if(!s)if(s=!0,k(),g){u=(c="CheckPlayerUpdate")+"SWF",X.createCSS("#"+c,"width:221px;height:145px;position:absolute;left:5px;top:5px;border:none;background-color:#000000;display:block;"),X.createCSS("#"+u,"display:inline;position:absolute;left:1px;top:1px;"),(_=F.createElement("div")).id=c,t.appendChild(_),L(_.id,!1),O();var e=null;try{e=B.top.location.toString()}catch(t){e=B.location.toString()}var n={swfId:u,MMredirectURL:e.replace(/&/g,"%26"),MMplayerType:X.ua.ie&&X.ua.win?"ActiveX":"PlugIn",MMdoctitle:F.title.slice(0,47)+" - Flash Player Installation"},i={id:u,name:u};try{j(X.base_path+"updateplayer.swf",{appendToId:c},"219","143",n,{allowScriptAccess:"always"},i,{swfTimeout:3e3,swfCB:I},!0)}catch(t){return void P()}}else P()}else a[a.length]=Z(R,25)}function P(t){if(("undefined"===typeof t?"undefined":tt(t))===V&&(t="Flash Player not detected or not updateable."),y=Y.UPDATE_FAILED,O(),("undefined"===typeof f?"undefined":tt(f))!==z)throw new U.Error("checkplayer::UpdatePlayer(): "+t);f(N)}function I(t){t.status===Y.SWF_LOADED?(K(S["continueUpdate_"+u]),S["continueUpdate_"+u]=!1,(h=t.srcElem).updateSWFCallback=D,y=Y.UPDATE_INIT,O(),("undefined"===typeof f?"undefined":tt(f))===z&&f(N),L(_.id,!0)):t.status!==Y.SWF_FAILED&&t.status!==Y.SWF_TIMEOUT||P()}function D(t){try{if(0===t){y=Y.UPDATE_SUCCESSFUL,_.style.display=q;try{B.open("","_self",""),B.close(),U.self.opener=B,U.self.close()}catch(t){}}else if(1===t)y=Y.UPDATE_CANCELED,_.style.display=q;else{if(2===t)return _.style.display=q,void P("The Flash Player update failed.");if(3===t)return _.style.display=q,void P("The Flash Player update timed out.")}}catch(t){}O(),("undefined"===typeof f?"undefined":tt(f))===z&&f(N)}function j(t,e,n,i,r,a,o,s,l){if(null===e||("undefined"===typeof e?"undefined":tt(e))!==G&&tt(e.replaceId)!==G||L(("undefined"===typeof e?"undefined":tt(e))===G?e:e.replaceId,!1),!x&&!l)return u=j,c="DoSWF",h=arguments,void(A[A.length]={func:u,funcName:c,args:h});var u,c,h;if(C||l){n+="",i+="";var d=("undefined"===typeof o?"undefined":tt(o))===H?o:{};d.data=t,d.width=n,d.height=i;var p=("undefined"===typeof a?"undefined":tt(a))===H?a:{};if(("undefined"===typeof r?"undefined":tt(r))===H)for(var f in r)r[f]!==Object.prototype[f]&&(tt(p.flashvars)!==V?p.flashvars+="&"+f+"="+r[f]:p.flashvars=f+"="+r[f]);var m=null;m=tt(o.id)!==V?o.id:null===e||("undefined"===typeof e?"undefined":tt(e))!==G&&tt(e.replaceId)!==G?"swf_"+E.length:("undefined"===typeof e?"undefined":tt(e))===G?e:e.replaceId;var v=null;if(null===e||!1===e||tt(e.appendToId)===G){var g=null;g=null!==e&&!1!==e&&tt(e.appendToId)===G?X.getObjectById(e.appendToId):M;var y=F.createElement("div");v=y.id=m,g.appendChild(y)}else v=tt(e.replaceId)===G?e.replaceId:e;var _=function(){},b=0,w="",T=null;("undefined"===typeof s?"undefined":tt(s))!==V&&null!==s&&(("undefined"===typeof s?"undefined":tt(s))===H?(tt(s.swfCB)!==V&&null!==s.swfCB&&(_=s.swfCB),tt(s.swfTimeout)!==V&&U.parseInt(s.swfTimeout,10)>0&&(b=s.swfTimeout),tt(s.swfEICheck)!==V&&null!==s.swfEICheck&&""!==s.swfEICheck&&(w=s.swfEICheck)):("undefined"===typeof s?"undefined":tt(s))===z&&(_=s));try{T=$.createSWF(d,p,v)}catch(t){}if(null!==T)E[E.length]=m,("undefined"===typeof _?"undefined":tt(_))===z&&(_({status:Y.SWF_INIT,srcId:m,srcElem:T}),S[m]=J(function(){var t=X.getObjectById(m);if(("undefined"===typeof t?"undefined":tt(t))!==V&&null!==t&&("OBJECT"===t.nodeName||"EMBED"===t.nodeName)){var e=0;try{e=t.PercentLoaded()}catch(t){}if(e>0)if(b>0&&(K(S["DoSWFtimeout_"+m]),S["DoSWFtimeout_"+m]=!1),e<100)Z(function(){_({status:Y.SWF_LOADING,srcId:m,srcElem:t})},1);else if(Q(S[m]),S[m]=!1,Z(function(){_({status:Y.SWF_LOADED,srcId:m,srcElem:t})},1),""!==w){var n=!1;S[m]=J(function(){if(!n&&tt(t[w])===z){n=!0;try{t[w](),Q(S[m]),S[m]=!1,_({status:Y.SWF_EI_READY,srcId:m,srcElem:t})}catch(t){}n=!1}},25)}}},50),b>0&&(S["DoSWFtimeout_"+m]=Z(function(){var t=X.getObjectById(m);if(("undefined"===typeof t?"undefined":tt(t))!==V&&null!==t&&("OBJECT"===t.nodeName||"EMBED"===t.nodeName)){var e=0;try{e=t.PercentLoaded()}catch(t){}e<=0&&(Q(S[m]),S[m]=!1,X.ua.ie&&X.ua.win&&4!==t.readyState?(t.id="removeSWF_"+t.id,t.style.display=q,S[t.id]=J(function(){4===t.readyState&&(Q(S[t.id]),S[t.id]=!1,$.removeSWF(t.id))},500)):$.removeSWF(t.id),S[m]=!1,S["DoSWFtimeout_"+m]=!1,_({status:Y.SWF_TIMEOUT,srcId:m,srcElem:t}))}},b)));else{if(("undefined"===typeof _?"undefined":tt(_))!==z)throw new U.Error("checkplayer::DoSWF(): SWF could not be loaded.");_({status:Y.SWF_FAILED,srcId:m,srcElem:null})}}else{if(("undefined"===typeof _?"undefined":tt(_))!==z)throw new U.Error("checkplayer::DoSWF(): Minimum Flash Version not detected.");_({status:Y.SWF_FAILED,srcId:m,srcElem:null})}}!function(){function t(){K(l);try{B.detachEvent(W,t)}catch(t){}}d=("undefined"===typeof e?"undefined":tt(e))!==V&&null!==e&&!1!==e?e+"":"0.0.0",("undefined"===typeof n?"undefined":tt(n))===z&&(p=n),("undefined"===typeof i?"undefined":tt(i))!==V&&(m=!!i),("undefined"===typeof r?"undefined":tt(r))===z&&(f=r);try{B.attachEvent(W,t)}catch(t){}!function(){try{X.bindEvent(B,W,w)}catch(t){return l=Z(arguments.callee,25)}t(),v=X.ua.pv.join("."),l=Z(b,1)}()}();var N={playerVersionDetected:v,versionChecked:d,checkPassed:C,UpdatePlayer:R,DoSWF:function(t,e,n,i,r,a,o,s){j(t,e,n,i,r,a,o,s,!1)},ready:function(){return x},updateable:g,updateStatus:y,updateControlsContainer:_};return Y._ins=N},(Y=X.checkplayer).UPDATE_INIT=1,Y.UPDATE_SUCCESSFUL=2,Y.UPDATE_CANCELED=3,Y.UPDATE_FAILED=4,Y.SWF_INIT=5,Y.SWF_LOADING=6,Y.SWF_LOADED=7,Y.SWF_FAILED=8,Y.SWF_TIMEOUT=9,Y.SWF_EI_READY=10,Y.module_ready=function(){}),t.flensed=t.flensed||{},t.flensed.checkplayer},i=[n(18),n(5)],void 0===(r=function(t,e){a(window,document,0,e)}.apply(e,i))||(t.exports=r)},function(e,t,n){(function(){var t;t=function(){function t(){}return t.xdr=function(){var t;return window.XDomainRequest&&(t=new XDomainRequest),t},t.supported=function(){return!!this.xdr()},t.get=function(t,e,n){var i,r;return(r="function"===typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0)?(r.async=!1,(i=this.xdr()).open("GET",t),i.timeout=e.timeout||0,i.withCredentials=e.withCredentials||!1,i.send(),i.onprogress=function(){},i.onload=function(){return r.loadXML(i.responseText),n(null,r)}):n()},t}(),e.exports=t}).call(void 0)},function(e,t,n){(function(){var t;t=function(){this.ads=[],this.errorURLTemplates=[]},e.exports=t}).call(void 0)},function(e,t,n){(function(){var t;t=function(){this.id=null,this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[],this.extensions=[]},e.exports=t}).call(void 0)},function(e,t,n){(function(){var t;t=function(){this.attributes={},this.children=[]},e.exports=t}).call(void 0)},function(e,t,n){(function(){var t;t=function(){this.name=null,this.value=null,this.attributes={}},e.exports=t}).call(void 0)},function(e,t,n){(function(){var t;t=function(){this.id=null,this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null,this.scalable=null,this.maintainAspectRatio=null},e.exports=t}).call(void 0)},function(e,t,n){(function(){var t;t=function(){this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.companionClickThroughURLTemplate=null,this.trackingEvents={}},e.exports=t}).call(void 0)},function(e,t,n){(function(){var t;t=function(){this.id=null,this.width=0,this.height=0,this.minSuggestedDuration="00:00:00",this.apiFramework="static",this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.nonlinearClickThroughURLTemplate=null},e.exports=t}).call(void 0)},function(e,t,s){(function(){var n,a,o,t,i,r={}.hasOwnProperty;a=s(16),i=s(6),o=s(7).VASTCreativeLinear,n=s(19).EventEmitter,t=function(t){function e(t,e){var n,i,r;for(n in this.ad=t,this.creative=e,this.muted=!1,this.impressed=!1,this.skipable=!1,this.skipDelayDefault=-1,this.trackingEvents={},this.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],r=this.creative.trackingEvents)i=r[n],this.trackingEvents[n]=i.slice(0);this.creative instanceof o?(this.setDuration(this.creative.duration),this.skipDelay=this.creative.skipDelay,this.linear=!0,this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates):(this.skipDelay=-1,this.linear=!1),this.on("start",function(){a.lastSuccessfullAd=+new Date})}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,n),e.prototype.setDuration=function(t){return this.assetDuration=t,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}},e.prototype.setProgress=function(t){var e,n,i,r,a,o,s,l,u;if(-1===(l=null===this.skipDelay?this.skipDelayDefault:this.skipDelay)||this.skipable||(l>t?this.emit("skip-countdown",l-t):(this.skipable=!0,this.emit("skip-countdown",0))),this.linear&&this.assetDuration>0){if(n=[],t>0)for(o in n.push("start"),a=Math.round(t/this.assetDuration*100),n.push("progress-"+a+"%"),n.push("progress-"+Math.round(t)),s=this.quartiles)(u=s[o])<=t&&t<=u+1&&n.push(o);for(i=0,r=n.length;i<r;i++)e=n[i],this.track(e,!0);t<this.progress&&this.track("rewind")}return this.progress=t},e.prototype.setMuted=function(t){return this.muted!==t&&this.track(t?"mute":"unmute"),this.muted=t},e.prototype.setPaused=function(t){return this.paused!==t&&this.track(t?"pause":"resume"),this.paused=t},e.prototype.setFullscreen=function(t){return this.fullscreen!==t&&this.track(t?"fullscreen":"exitFullscreen"),this.fullscreen=t},e.prototype.setSkipDelay=function(t){if("number"===typeof t)return this.skipDelay=t},e.prototype.load=function(){if(!this.impressed)return this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView")},e.prototype.errorWithCode=function(t){return this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:t})},e.prototype.complete=function(){return this.track("complete")},e.prototype.close=function(){return this.track(this.linear?"closeLinear":"close")},e.prototype.stop=function(){},e.prototype.skip=function(){return this.track("skip"),this.trackingEvents=[]},e.prototype.click=function(){var t,e,n;if((null!=(e=this.clickTrackingURLTemplates)?e.length:void 0)&&this.trackURLs(this.clickTrackingURLTemplates),null!=this.clickThroughURLTemplate)return this.linear&&(n={CONTENTPLAYHEAD:this.progressFormated()}),t=i.resolveURLTemplates([this.clickThroughURLTemplate],n)[0],this.emit("clickthrough",t)},e.prototype.track=function(t,e){var n,i;null==e&&(e=!1),"closeLinear"===t&&null==this.trackingEvents[t]&&null!=this.trackingEvents.close&&(t="close"),i=this.trackingEvents[t],n=this.emitAlwaysEvents.indexOf(t),null!=i?(this.emit(t,""),this.trackURLs(i)):-1!==n&&this.emit(t,""),!0===e&&(delete this.trackingEvents[t],n>-1&&this.emitAlwaysEvents.splice(n,1))},e.prototype.trackURLs=function(t,e){return null==e&&(e={}),this.linear&&(e.CONTENTPLAYHEAD=this.progressFormated()),i.track(t,e)},e.prototype.progressFormated=function(){var t,e,n,i;return(t=(i=parseInt(this.progress))/3600).length<2&&(t="0"+t),(e=i/60%60).length<2&&(e="0"+e),(n=i%60).length<2&&(n="0"+e),t+":"+e+":"+n+"."+parseInt(100*(this.progress-i))},e}(),e.exports=t}).call(void 0)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=o(n(4)),a=o(n(3));function o(t){return t&&t.__esModule?t:{default:t}}var s={useCookies:!0,timeout:3e3},l=function(){function n(t,e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e=Object.assign({},s,e||{}),!t)throw new Error("Missing URL");this.url_=t,this.useCookies_=e.useCookies,this.timeout_=e.timeout,this.reject_=void 0}return i(n,[{key:"load",value:function(){var i=this,t=this.url_;return t=r.default.util.resolveURLTemplates([t||""],{timestamp:+new Date}).pop(),new a.default(function(e,n){i.reject_=n,r.default.client.get(t,{timeout:i.timeout_,withCredentials:i.useCookies_},function(t){i.reject_=void 0,t?e(t):n(new Error("No (valid) response"))})})}},{key:"cancel",value:function(){this.reject_&&this.reject_(new Error("Request cancelled"))}}]),n}();e.default=l},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},o=r(n(4)),s=r(n(3)),l=r(n(20)),u=r(n(11)),c=r(n(70)),h=r(n(22));function r(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e,n));if(i.companion=i.ad_.creatives.filter(function(t){return"companion"===t.type}),i.linear=i.ad_.creatives.filter(function(t){return"linear"===t.type}).map(function(t){return{data:t,skip:t.skipDelay,sources:i.createSourceObjects_(t.mediaFiles)}}).filter(function(t){return t.sources.length>0}).map(function(t){return t.tracker=new o.default.tracker(i.ad_,t.data),t}).pop(),!i.linear)throw new u.default("Could not find a supported mediaFile",403);return i.blockerEl_=new c.default(t,i),i.blockerEl_.hide(),i.skipButtonEl_=new h.default(t,i),i.skipButtonEl_.hide(),i.player_.addChild(i.blockerEl_),i.player_.addChild(i.skipButtonEl_),i.onplay_=i.onplay_.bind(i),i.oncanplay_=i.oncanplay_.bind(i),i.ontimeupdate_=i.ontimeupdate_.bind(i),i.onpause_=i.onpause_.bind(i),i.onended_=i.onended_.bind(i),i.onerror_=i.onerror_.bind(i),i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,l.default),i(r,[{key:"play",value:function(){var i=this;return new s.default(function(t,e){i.player_.src(i.linear.sources),i.player_.ready(function(){return i.player_.play()});var n=void 0;i.linear.tracker.clickThroughURLTemplate&&(n=o.default.util.resolveURLTemplates([i.linear.tracker.clickThroughURLTemplate],{CACHEBUSTER:Math.round(1e10*Math.random()),CONTENTPLAYHEAD:i.linear.tracker.progressFormated()})[0]),i.blockerEl_.setClickthroughUrl(n),i.blockerEl_.show(),i.canSkip()||i.hasCountdown()?i.skipButtonEl_.show():i.skipButtonEl_.hide(),i.setupEvents_(),i.player_.one("adended",t),i.player_.one("adscanceled",e)})}},{key:"tearDown",value:function(){this.player_.removeChild(this.blockerEl_),this.player_.removeChild(this.skipButtonEl_),this.tearDownEvents_()}},{key:"dispose",value:function(){a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"dispose",this).call(this),this.blockerEl_.dispose(),this.skipButtonEl_.dispose()}},{key:"skip",value:function(){this.linear.tracker.skip(),a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"skip",this).call(this)}},{key:"click",value:function(){this.trackClick(),this.player_.trigger("ads-click")}},{key:"trackClick",value:function(){var t=[].concat(this.linear.tracker.clickTrackingURLTemplates||[]);t&&t.length>0&&this.linear.tracker.trackURLs(t)}},{key:"canSkip",value:function(){return!1!==this.settings_.skip&&(!!this.linear&&(!0===this.settings_.skip?this.linear&&null!=this.linear.skip:this.settings_.skip>=0||this.linear&&this.linear.skip>=0))}},{key:"timeLeft",value:function(){if(!this.canSkip())return Math.ceil(this.player_.duration()-this.player_.currentTime());var t=0;return t=!0===this.settings_.skip?this.linear&&this.linear.skip||0:this.settings_.skip||this.linear&&this.linear.skip||0,Math.ceil(t-this.player_.currentTime())}},{key:"createSourceObjects_",value:function(t){var e=this;return(t=[].concat(t||[])).filter(function(t){return e.player_.canPlayType(t.mimeType)}).map(function(t){return{type:t.mimeType,src:t.fileURL,width:t.width,height:t.height}})}},{key:"setupEvents_",value:function(){this.player_.on("adcanplay",this.oncanplay_),this.player_.on("adtimeupdate",this.ontimeupdate_),this.player_.on("adpause",this.onpause_),this.player_.on("adended",this.onended_),this.player_.on("aderror",this.onerror_)}},{key:"tearDownEvents_",value:function(){this.player_.off("adcanplay",this.oncanplay_),this.player_.off("adtimeupdate",this.ontimeupdate_),this.player_.off("adpause",this.onpause_),this.player_.off("adended",this.onended_),this.player_.off("aderror",this.onerror_)}},{key:"oncanplay_",value:function(){this.ended_||this.linear.tracker.load()}},{key:"ontimeupdate_",value:function(){this.ended_||(isNaN(this.linear.tracker.assetDuration)&&(this.linear.tracker.assetDuration=this.duration()),this.linear.tracker.setProgress(this.player_.currentTime()))}},{key:"onpause_",value:function(){this.ended_||this.player_.ended()||(this.linear.tracker.setPaused(!0),this.player_.one("adplay",this.onplay_))}},{key:"onplay_",value:function(){this.ended_||this.linear.tracker.setPaused(!1)}},{key:"onerror_",value:function(){this.ended_||(this.linear.tracker.errorWithCode(405),this.player_.trigger("adscanceled"))}},{key:"onended_",value:function(){this.ended_||(this.linear.tracker.complete(),this.player_.off("adplay",this.onplay_))}}],[{key:"supports",value:function(t,e){return t.canPlayType(e.mimeType)}}]),r}();e.default=d},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=o(n(0)),a=o(n(21));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"createEl",value:function(){return function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"createEl",this).call(this,"a",{className:"vast-blocker",target:"_blank"})}},{key:"handleClick",value:function(t){var e=this.player(),n=this.vast();if(t.preventDefault(),e.paused())return e.play(),!1;n.click();var i=this.el().href;i&&window.open(i,"_blank")}},{key:"setClickthroughUrl",value:function(t){this.el().href=t||"#"}}]),e}();e.default=s,r.default.registerComponent("VASTBlockerComponent",s)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},o=v(n(4)),s=v(n(3)),l=v(n(20)),u=v(n(11)),c=v(n(72)),h=v(n(73)),a=v(n(74)),d=v(n(80)),p=n(23),f=v(n(85)),m=v(n(22));function v(t){return t&&t.__esModule?t:{default:t}}var g={HTML5:d.default,FLASH:a.default};var y=function(t){function a(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,e,n));if(i.skip_=!1,i.linear=i.ad_.creatives.filter(function(t){return"linear"===t.type}).map(function(t){return{data:t,skip:t.skipDelay||-1,params:t.adParameters,sources:i.createSourceObjects_(t.mediaFiles)}}).filter(function(t){return t.sources.length>0}).map(function(t){return t.tracker=new o.default.tracker(i.ad_,t.data),t}).pop(),!i.linear)throw new u.default("Could not find a supported mediaFile",403);return i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,l.default),i(a,[{key:"play",value:function(){var e=this;return this.player_.addClass("vjs-vpaid-ad"),this.loadAdUnit_().then(this.playAdUnit_.bind(this)).catch(function(t){throw e.trackError_(t.code),t})}},{key:"tearDown",value:function(){this.removeAdUnit_(),this.handler_&&this.handler_.dispose(),this.player_.removeClass("vjs-vpaid-ad"),function(t){try{t.isLive()?t.reset():t.tech({IWillNotUseThisInPlugins:!0}).el_.src=""}catch(t){}}(this.player_)}},{key:"skip",value:function(){this.linear.tracker.skip(),r(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"skip",this).call(this)}},{key:"dispose",value:function(){this.adUnit_&&this.adUnit_.stopAd(function(){}),r(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"dispose",this).call(this)}},{key:"canSkip",value:function(){return this.skip_}},{key:"timeLeft",value:function(){return this.skip_?0:1/0}},{key:"createSourceObjects_",value:function(t){return t=[].concat(t||[]),Object.keys(g).map(function(e){return t.filter(function(t){return g[e].supports(t.mimeType)}).map(function(t){return{type:t.mimeType,src:t.fileURL,width:t.width,height:t.height,techName:e}})}).filter(function(t){return t.length>0}).reduce(function(t,e){return t.concat(e)},[])}},{key:"loadAdUnit_",value:function(){var e=this,t=this.linear.sources.pop();return this.tech_=new g[t.techName](this.player_,t),this.containerEl_=new f.default(this.player_,t.techName),this.player_.addChild(this.containerEl_),this.tech_.setup(this.containerEl_.el()).then(function(t){return t.load()}).then(function(t){return e.adUnit_=new c.default(t)})}},{key:"playAdUnit_",value:function(t){return this.handshake_(t).then(this.setupEvents_.bind(this)).then(this.addSkipButton_.bind(this)).then(this.initAd_.bind(this)).then(this.startAd_.bind(this)).catch(function(t){throw console.debug(t),t})}},{key:"handshake_",value:function(r){return console.debug("[VPAID] handshake",r),new s.default(function(n,i){r.handshakeVersion("2.0",function(t,e){t?i(t):e&&a.isSupportedVersion_(e)?n(r):i(new u.default('on VPAIDIntegrator._handshake, unsupported version "'+e+'"',901))})})}},{key:"initAd_",value:function(i){var t=this;console.debug("[VPAID] init unit",i);var r=(0,p.getPlayerDimensions)(this.player_);return new s.default(function(e,n){i.initAd(r.width,r.height,p.VIEW_MODE.NORMAL,-1,{AdParameters:t.linear.params||""},function(t){t?n(t):e(i)})})}},{key:"setupEvents_",value:function(e){var n=this;return console.debug("[VPAID] setup events",e),new s.default(function(t){n.handler_=new h.default(n.player_,e,n.linear.tracker),n.handler_.init(),t(e)})}},{key:"addSkipButton_",value:function(e){var n=this;return console.debug("[VPAID] skip button",e),new s.default(function(t){n.skipButtonEl_=new m.default(n.player_,n),n.skipButtonEl_.hide(),n.player_.addChild(n.skipButtonEl_),e.on("AdSkippableStateChange",function(t,e){e&&!n.skip_?n.skipButtonEl_.show():n.skip_&&n.skipButtonEl_.hide(),n.skip_=e}),t(e)})}},{key:"startAd_",value:function(i){var t=this;return console.debug("[VPAID] start ad",i),new s.default(function(e,n){!function(t){var e=t.tech({IWillNotUseThisInPlugins:!0}).hls;try{e&&e.dispose()}catch(t){}}(t.player_),i.startAd(function(t){t?n(t):(i.on("AdStopped",function(){e()}),i.on("AdError",function(t){var e=t?t.message:"on VPAIDIntegrator, error while waiting for the adUnit to finish playing";n(new u.default(e))}))})})}},{key:"removeAdUnit_",value:function(){this.tech_&&this.tech_.unload(),this.containerEl_&&(this.player_.removeChild(this.containerEl_),this.containerEl_.dispose(),this.containerEl_=void 0),this.skipButtonEl_&&(this.player_.removeChild(this.skipButtonEl_),this.skipButtonEl_.dispose(),this.skipButtonEl_=void 0),this.player_.removeClass("vjs-vpaid-ad")}},{key:"trackError_",value:function(t){this.linear.tracker.errorWithCode(t.code||901)}}],[{key:"isSupportedVersion_",value:function(t){var e=(t||"").split(".")[0];return(e=parseInt(e,10))>=1&&e<="2.0"}},{key:"supports",value:function(t,e){for(var n in g)if(g[n].supports(e.mimeType))return!0;return!1}}]),a}();e.default=y},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=r(n(11)),s=r(n(3));function r(t){return t&&t.__esModule?t:{default:t}}var o={responseTimeout:5e3},l=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","expandAd","collapseAd"],u=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=Object.assign({},o,e),this._adUnit=t}return i(n,[{key:"checkVPAIDInterface",value:function(e){return!!e&&(!l.find(function(t){return"function"!==typeof e[t]})&&(("function"===typeof(n=e).subscribe||"function"===typeof n.addEventListener||"function"===typeof n.on)&&("function"===typeof(t=e).unsubscribe||"function"===typeof t.removeEventListener||"function"===typeof t.off)));var t,n}},{key:"adUnitAsyncCall",value:function(t){var e,n=Array.prototype.slice.call(arguments),i=void 0,r=void 0;n.shift(),r=n.pop(),function(t,e,n){if("function"!==typeof n[t])throw new a.default("on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name");if("function"!==typeof e)throw new a.default("on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback")}(t,r,this._adUnit),i=setTimeout(function(){i=null,r(new a.default("on VPAIDAdUnitWrapper, timeout while waiting for a response on call '"+t+"'")),r=function(){}},this.options.responseTimeout),(e=this._adUnit)[t].apply(e,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(n).concat([function(){i&&clearTimeout(i),r.apply(this,arguments)}]))}},{key:"on",value:function(t,e){(this._adUnit.addEventListener||this._adUnit.subscribe||this._adUnit.on).call(this._adUnit,t,e)}},{key:"off",value:function(t,e){(this._adUnit.removeEventListener||this._adUnit.unsubscribe||this._adUnit.off).call(this._adUnit,t,e)}},{key:"waitForEvent",value:function(t,e,n){var i=void 0;!function(t,e){if(!t)throw new a.default("on VPAIDAdUnitWrapper.waitForEvent, missing evt name");if("function"!==typeof e)throw new a.default("on VPAIDAdUnitWrapper.waitForEvent, missing callback")}(t,e),n=n||null,this.on(t,function(){var t=Array.prototype.slice.call(arguments);i&&(clearTimeout(i),i=null);t.unshift(null),e.apply(n,t)}),i=setTimeout(function(){e(new a.default("on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event '"+t+"'")),i=null,e=function(){}},this.options.responseTimeout)}},{key:"handshakeVersion",value:function(t,e){this.adUnitAsyncCall("handshakeVersion",t,e)}},{key:"initAd",value:function(t,e,n,i,r,a){var o=this;this.waitForEvent("AdLoaded",a),this._started=new s.default(function(n,i){o.waitForEvent("AdStarted",function(t,e){return t?i(t):n(e)})}),this._adUnit.initAd(t,e,n,i,r)}},{key:"resizeAd",value:function(t,e,n,i){this.adUnitAsyncCall("resizeAd",t,e,n,i)}},{key:"startAd",value:function(e){this._started.then(function(t){return e(void 0,t)},function(t){return e(t)}),this._adUnit.startAd()}},{key:"stopAd",value:function(t){this.waitForEvent("AdStopped",t),this._adUnit.stopAd()}},{key:"pauseAd",value:function(t){this.waitForEvent("AdPaused",t),this._adUnit.pauseAd()}},{key:"resumeAd",value:function(t){this.waitForEvent("AdPlaying",t),this._adUnit.resumeAd()}},{key:"expandAd",value:function(t){this.waitForEvent("AdExpandedChange",t),this._adUnit.expandAd()}},{key:"collapseAd",value:function(t){this.waitForEvent("AdExpandedChange",t),this._adUnit.collapseAd()}},{key:"skipAd",value:function(t){this.waitForEvent("AdSkipped",t),this._adUnit.skipAd()}},{key:"getAdLinear",value:function(t){this.adUnitAsyncCall("getAdLinear",t)}},{key:"getAdWidth",value:function(t){this.adUnitAsyncCall("getAdWidth",t)}},{key:"getAdHeight",value:function(t){this.adUnitAsyncCall("getAdHeight",t)}},{key:"getAdExpanded",value:function(t){this.adUnitAsyncCall("getAdExpanded",t)}},{key:"getAdSkippableState",value:function(t){this.adUnitAsyncCall("getAdSkippableState",t)}},{key:"getAdRemainingTime",value:function(t){this.adUnitAsyncCall("getAdRemainingTime",t)}},{key:"getAdDuration",value:function(t){this.adUnitAsyncCall("getAdDuration",t)}},{key:"getAdVolume",value:function(t){this.adUnitAsyncCall("getAdVolume",t)}},{key:"getAdCompanions",value:function(t){this.adUnitAsyncCall("getAdCompanions",t)}},{key:"getAdIcons",value:function(t){this.adUnitAsyncCall("getAdIcons",t)}},{key:"setAdVolume",value:function(t,e){this.adUnitAsyncCall("setAdVolume",t,e)}}]),n}();e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=n(4),o=(i=r)&&i.__esModule?i:{default:i},s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(23)),l=n(9);var u=function(){function r(t,e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),i=i||{},this.player_=t,this.adUnit_=e,this.tracker_=n,this.ended_=!1,this.autoResize_=void 0===i.autoResize||i.autoResize,n.clickThroughURLTemplate&&(this.clickthroughUrl_=r.generateClickThroughURL(n,e.options.src))}return a(r,[{key:"init",value:function(){var i=this;this.adUnit_.on("AdSkipped",function(){i.player_.trigger("vpaid.AdSkipped"),i.ended_||i.tracker_.skip()}),this.adUnit_.on("AdStarted",function(){i.player_.trigger("vpaid.AdStarted"),i.notifyPlayToPlayer_(),i.ended_||i.tracker_.load()}),this.adUnit_.on("AdVideoStart",function(){i.player_.trigger("vpaid.AdVideoStart"),i.notifyPlayToPlayer_(),i.ended_||i.tracker_.track("start")}),this.adUnit_.on("AdPlaying",function(){i.player_.trigger("vpaid.AdPlaying"),i.notifyPlayToPlayer_(),i.ended_||i.tracker_.setPaused(!1)}),this.adUnit_.on("AdPaused",function(){i.player_.trigger("vpaid.AdPaused"),i.notifyPauseToPlayer_(),i.ended_||i.tracker_.setPaused(!0)}),this.adUnit_.on("AdVideoFirstQuartile",function(){i.player_.trigger("vpaid.AdVideoFirstQuartile"),i.ended_||i.tracker_.track("firstQuartile",!0)}),this.adUnit_.on("AdVideoMidpoint",function(){i.player_.trigger("vpaid.AdVideoMidpoint"),i.ended_||i.tracker_.track("midpoint",!0)}),this.adUnit_.on("AdVideoThirdQuartile",function(){i.player_.trigger("vpaid.AdVideoThirdQuartile"),i.ended_||i.tracker_.track("thirdQuartile",!0)}),this.adUnit_.on("AdVideoComplete",function(){i.player_.trigger("vpaid.AdVideoComplete"),i.ended_||i.tracker_.complete()}),this.adUnit_.on("AdClickThru",function(t){i.player_.trigger("vpaid.AdClickThru"),i.ended_||i.tracker_.click();var e=i.clickthroughUrl_||t.url;t.playerHandles&&e&&window.open(e,"_blank")}),this.adUnit_.on("AdUserAcceptInvitation",function(){i.player_.trigger("vpaid.AdUserAcceptInvitation"),i.ended_||i.tracker_.track("acceptInvitation")}),this.adUnit_.on("AdUserClose",function(){i.player_.trigger("vpaid.AdUserClose"),i.ended_||i.tracker_.close()}),this.adUnit_.on("AdUserMinimize",function(){i.player_.trigger("vpaid.AdUserMinimize"),i.ended_||i.tracker_.track("collapse")}),this.adUnit_.on("AdError",function(){i.player_.trigger("vpaid.AdError"),i.tracker_.errorWithCode(901)}),this.adUnit_.on("AdVolumeChange",function(){i.player_.trigger("vpaid.AdVolumeChange");var n=i.player_.volume();i.adUnit_.getAdVolume(function(t,e){0===e&&n>0&&(i.player_.muted(!0),i.ended_||i.tracker_.setMuted(!0)),i.player_.volume(e),e>0&&0===n&&(i.player_.muted(!1),i.ended_||i.tracker_.setMuted(!1))})}),this.updateViewSizeThrottled_=(0,l.throttle)(this.resizeAd_,100,this),this.autoResize_&&(s.addEventListener(window,"resize",this.updateViewSizeThrottled_),s.addEventListener(window,"orientationchange",this.updateViewSizeThrottled_)),this.player_.on("advolumechange",this.updateAdUnitVolume_.bind(this)),this.player_.on("adfullscreenchange",this.resizeAd_.bind(this))}},{key:"dispose",value:function(){this.player_.off("adfullscreenchange",this.resizeAd_.bind(this)),this.player_.off("advolumechange",this.updateAdUnitVolume_),this.autoResize_&&(s.removeEventListener(window,"resize",this.updateViewSizeThrottled_),s.removeEventListener(window,"orientationchange",this.updateViewSizeThrottled_))}},{key:"pause",value:function(){this.adUnit_.pauseAd(function(){})}},{key:"resume",value:function(){this.adUnit_.resumeAd(function(){})}},{key:"notifyPlayToPlayer_",value:function(){this.player_.trigger("play")}},{key:"notifyPauseToPlayer_",value:function(){this.player_.trigger("pause")}},{key:"resizeAd_",value:function(){var t=s.getPlayerDimensions(this.player_),e=s.getViewMode(this.player_);this.adUnit_.resizeAd(t.width,t.height,e,c)}},{key:"updateAdUnitVolume_",value:function(){var t=this.player_.muted()?0:this.player_.volume();this.adUnit_.setAdVolume(t,c)}}],[{key:"generateClickThroughURL",value:function(t,e){var n={ASSETURI:e,CACHEBUSTER:Math.round(1e8*Math.random()),CONTENTPLAYHEAD:0};return o.default.util.resolveURLTemplates([t.clickThroughURLTemplate],n)[0]}}]),r}();function c(t){t&&console&&console.log&&console.log("ERROR: "+t.message,t)}e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();n(5);var r=a(n(75));function a(t){return t&&t.__esModule?t:{default:t}}var o=[a(n(12)).default,"VPAIDFlash.swf"].join("/"),s=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.player_=t,this.source_=e,this.params=e.params}return i(n,[{key:"setup",value:function(t){var i=this;return this.promise_=this.promise_||new Promise(function(e,n){i.player_.ready(function(){i.client_=new r.default(t,function(t){return t?n(t):e(i)},{data:o,width:800,height:400})})}),this.promise_}},{key:"load",value:function(){var t=this;return new Promise(function(n,i){t.client_.loadAdUnit(t.source_.src,function(t,e){t?i(t):n(e)})})}},{key:"unload",value:function(t){}}],[{key:"supports",value:function(t){return"application/x-shockwave-flash"===t&&r.default.isSupported()}}]),n}();e.default=s},function(t,e,n){var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var c=n(5),h=n(24).JSFlashBridge,r=n(77).VPAIDAdUnit,d=n(1).noop,p=n(1).callbackTimeout,f=n(1).isPositiveInt,m=n(1).createElementWithID,v=n(1).unique("vpaid"),a=n(79).createFlashTester,o={isSupported:function(){return!0}},s=function(){function u(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{data:"VPAIDFlash.swf",width:800,height:400},i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{wmode:"transparent",salign:"tl",align:"left",allowScriptAccess:"always",scale:"noScale",allowFullScreen:"true",quality:"high"},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{debug:!1,timeout:1e4};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var o=this;if(this._vpaidParentEl=t,this._flashID=v(),this._destroyed=!1,n=n||d,e.width=f(e.width,800),e.height=f(e.height,400),m(t,this._flashID,!0),r.movie=e.data,r.FlashVars="flashid="+this._flashID+"&handler="+h.VPAID_FLASH_HANDLER+"&debug="+a.debug+"&salign="+r.salign,!u.isSupported())return l("user don't support flash or doesn't have the minimum required version of flash 10.1.0");if(this.el=c.createSWF(e,r,this._flashID),!this.el)return l("swfobject failed to create object in element");var s=p(a.timeout,function(t,e){(function(){this._loadLater&&(this.loadAdUnit(this._loadLater.url,this._loadLater.callback),delete this._loadLater)}).call(i),n(t,e)},function(){n("vpaid flash load timeout "+a.timeout)});function l(t){return setTimeout(function(){n(new Error(t))},0),o}this._flash=new h(this.el,e.data,this._flashID,e.width,e.height,s)}return i(u,[{key:"destroy",value:function(){this._destroyAdUnit(),this._flash&&(this._flash.destroy(),this._flash=null),this.el=null,this._destroyed=!0}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"_destroyAdUnit",value:function(){delete this._loadLater,this._adUnitLoad&&(this._adUnitLoad=null,this._flash.removeCallback(this._adUnitLoad)),this._adUnit&&(this._adUnit._destroy(),this._adUnit=null)}},{key:"loadAdUnit",value:function(t,n){var i=this;l.call(this),this._adUnit&&this._destroyAdUnit(),this._flash.isReady()?(this._adUnitLoad=function(t,e){t||(i._adUnit=new r(i._flash)),i._adUnitLoad=null,n(t,i._adUnit)},this._flash.callFlashMethod("loadAdUnit",[t],this._adUnitLoad)):this._loadLater={url:t,callback:n}}},{key:"unloadAdUnit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;l.call(this),this._destroyAdUnit(),this._flash.callFlashMethod("unloadAdUnit",[],t)}},{key:"getFlashID",value:function(){return l.call(this),this._flash.getFlashID()}},{key:"getFlashURL",value:function(){return l.call(this),this._flash.getFlashURL()}}]),u}();function l(){if(this._destroyed)throw new Error("VPAIDFlashToJS is destroyed!")}function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object.defineProperty(s,t,{writable:n,configurable:!1,value:e})}u("isSupported",function(){return c.hasFlashPlayerVersion("10.1.0")&&o.isSupported()},!0),u("runFlashTest",function(t){o=a(document.body,t)}),s.swfobject=c,t.exports=s},function(t,e,n){var i=new(n(8).SingleValueRegistry),r={};Object.defineProperty(r,"addInstance",{writable:!1,configurable:!1,value:function(t,e){i.add(t,e)}}),Object.defineProperty(r,"getInstanceByID",{writable:!1,configurable:!1,value:function(t){return i.get(t)}}),Object.defineProperty(r,"removeInstanceByID",{writable:!1,configurable:!1,value:function(t){return i.remove(t)}}),t.exports=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r=n(78).IVPAIDAdUnit,a=Object.getOwnPropertyNames(r.prototype).filter(function(t){return-1===["constructor"].indexOf(t)});e.VPAIDAdUnit=function(t){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._destroyed=!1,e._flash=t,e}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),i(n,[{key:"_destroy",value:function(){var e=this;this._destroyed=!0,a.forEach(function(t){e._flash.removeCallbackByMethodName(t)}),r.EVENTS.forEach(function(t){e._flash.offEvent(t)}),this._flash=null}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"on",value:function(t,e){this._flash.on(t,e)}},{key:"off",value:function(t,e){this._flash.off(t,e)}},{key:"handshakeVersion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2.0",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this._flash.callFlashMethod("handshakeVersion",[t],e)}},{key:"initAd",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{AdParameters:""},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{flashVars:""},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;this._flash.setSize(t,e),r=r||{AdParameters:""},a=a||{flashVars:""},this._flash.callFlashMethod("initAd",[this._flash.getWidth(),this._flash.getHeight(),n,i,r.AdParameters||"",a.flashVars||""],o)}},{key:"resizeAd",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this._flash.setSize(t,e),this._flash.callFlashMethod("resizeAd",[this._flash.getWidth(),this._flash.getHeight(),n],i)}},{key:"startAd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this._flash.callFlashMethod("startAd",[],t)}},{key:"stopAd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this._flash.callFlashMethod("stopAd",[],t)}},{key:"pauseAd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this._flash.callFlashMethod("pauseAd",[],t)}},{key:"resumeAd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this._flash.callFlashMethod("resumeAd",[],t)}},{key:"expandAd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this._flash.callFlashMethod("expandAd",[],t)}},{key:"collapseAd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this._flash.callFlashMethod("collapseAd",[],t)}},{key:"skipAd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this._flash.callFlashMethod("skipAd",[],t)}},{key:"getAdLinear",value:function(t){this._flash.callFlashMethod("getAdLinear",[],t)}},{key:"getAdWidth",value:function(t){this._flash.callFlashMethod("getAdWidth",[],t)}},{key:"getAdHeight",value:function(t){this._flash.callFlashMethod("getAdHeight",[],t)}},{key:"getAdExpanded",value:function(t){this._flash.callFlashMethod("getAdExpanded",[],t)}},{key:"getAdSkippableState",value:function(t){this._flash.callFlashMethod("getAdSkippableState",[],t)}},{key:"getAdRemainingTime",value:function(t){this._flash.callFlashMethod("getAdRemainingTime",[],t)}},{key:"getAdDuration",value:function(t){this._flash.callFlashMethod("getAdDuration",[],t)}},{key:"setAdVolume",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this._flash.callFlashMethod("setAdVolume",[t],e)}},{key:"getAdVolume",value:function(t){this._flash.callFlashMethod("getAdVolume",[],t)}},{key:"getAdCompanions",value:function(t){this._flash.callFlashMethod("getAdCompanions",[],t)}},{key:"getAdIcons",value:function(t){this._flash.callFlashMethod("getAdIcons",[],t)}}]),n}()},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r=e.IVPAIDAdUnit=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"handshakeVersion",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"initAd",value:function(t,e,n,i){arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6]}},{key:"resizeAd",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:"startAd",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"stopAd",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"pauseAd",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"resumeAd",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"expandAd",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"collapseAd",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"skipAd",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"getAdLinear",value:function(t){}},{key:"getAdWidth",value:function(t){}},{key:"getAdHeight",value:function(t){}},{key:"getAdExpanded",value:function(t){}},{key:"getAdSkippableState",value:function(t){}},{key:"getAdRemainingTime",value:function(t){}},{key:"getAdDuration",value:function(t){}},{key:"setAdVolume",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"getAdVolume",value:function(t){}},{key:"getAdCompanions",value:function(t){}},{key:"getAdIcons",value:function(t){}}]),t}();Object.defineProperty(r,"EVENTS",{writable:!1,configurable:!1,value:["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"]})},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var a=n(5),r="vpaid_video_flash_tester",o="vpaid_video_flash_tester_el",s=n(24).JSFlashBridge,l=n(1),u=n(8).MultipleValuesRegistry,c=function(){function r(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:"VPAIDFlash.swf",width:800,height:400};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.parentEl=l.createElementWithID(t,o),l.hideFlashEl(this.parentEl);var i={};i.movie=n.data,i.FlashVars="flashid="+o+"&handler="+s.VPAID_FLASH_HANDLER,i.allowScriptAccess="always",this.el=a.createSWF(n,i,o),this._handlers=new u,this._isSupported=!1,this.el&&(l.hideFlashEl(this.el),this._flash=new s(this.el,n.data,o,n.width,n.height,function(){e._isSupported=!0,e._handlers.get("change").forEach(function(t){setTimeout(function(){t("change",!0)},0)})}))}return i(r,[{key:"isSupported",value:function(){return this._isSupported}},{key:"on",value:function(t,e){this._handlers.add(t,e)}}]),r}();e.createFlashTester=function(t,e){return window[r]||(window[r]=new c(t,e)),window[r]}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=n(81),o=(i=a)&&i.__esModule?i:{default:i};var s=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.player_=t,this.source_=e,this.params=e.params}return r(n,[{key:"setup",value:function(e){var n=this;return this.promise_=this.promise_||new Promise(function(t){n.player_.ready(function(){n.client_=new o.default(e,n.player_.el().querySelector(".vjs-tech")),t(n)})}),this.promise_}},{key:"load",value:function(){var t=this;return new Promise(function(n,i){t.client_.loadAdUnit(t.source_.src,function(t,e){t?i(t):n(e)})})}},{key:"unload",value:function(t){}}],[{key:"supports",value:function(t){return"application/javascript"===t}}]),n}();e.default=s},function(t,e,n){var s=n(25),r=s.unique("vpaidIframe"),l=n(82);function i(t,e,n,i){n=n||{},this._id=r(),this._destroyed=!1,this._frameContainer=s.createElementInEl(t,"div"),this._videoEl=e,this._vpaidOptions=i||{timeout:1e4},this._templateConfig={template:n.template||'<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');<\/script></body></html>',extraOptions:n.extraOptions||{}}}function u(){c.call(this),function(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}.call(this)}function c(){(function(t){var e=this[t];e&&(e.remove(),delete this[t])}).call(this,"_frame"),h.call(this)}function h(){this._onLoad&&(window.removeEventListener("message",this._onLoad),s.clearCallbackTimeout(this._onLoad),delete this._onLoad)}function d(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}i.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,u.call(this))},i.prototype.isDestroyed=function(){return this._destroyed},i.prototype.loadAdUnit=function(t,a){(function(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}).call(this),u.call(this);var o=this,e=s.createIframeWithContent(this._frameContainer,this._templateConfig.template,s.extend({iframeURL_JS:t,iframeID:this.getID(),origin:d()},this._templateConfig.extraOptions));this._frame=e,this._onLoad=s.callbackTimeout(this._vpaidOptions.timeout,function(t){if(t.origin!==d())return;var e,n,i;if(JSON.parse(t.data).id!==o.getID())return;n=o._frame.contentWindow?(i=o._frame.contentWindow.getVPAIDAd,s.validate("function"===typeof i,"the ad didn't return a function to create an ad")):"the iframe is not anymore in the DOM tree";if(!n){var r=o._frame.contentWindow.document.querySelector(".ad-element");(e=new l(i(),r,o._videoEl,o._frame)).subscribe("AdStopped",function(){c.call(this),delete this._adUnit}.bind(o)),n=s.validate(e.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return o._adUnit=e,h.call(o),a(n,n?null:e),!0}.bind(this),function(){a("timeout",null)}.bind(this)),window.addEventListener("message",this._onLoad)},i.prototype.unloadAdUnit=function(){u.call(this)},i.prototype.getID=function(){return this._id},t.exports=i},function(t,e,n){var a=n(83),r=n(84),o=a.checkVPAIDInterface,l=n(25),s=(a.METHODS,"AdClickThru"),u=a.EVENTS.filter(function(t){return t!=s});function c(t,e,n,i){this._isValid=o(t),this._isValid&&(this._creative=t,this._el=e,this._videoEl=n,this._iframe=i,this._subscribers=new r,l.setFullSizeStyle(e),function(){if(u.forEach(function(t){this._creative.subscribe(function(t){this._subscribers.trigger(t,Array.prototype.slice(arguments,1))}.bind(this,t),t)}.bind(this)),this._creative.subscribe(function(t,e,n){this._subscribers.triggerSync(s,{url:t,id:e,playerHandles:n})}.bind(this),s),this._videoEl){var e=this._iframe.contentDocument.documentElement,n=this._videoEl;e.addEventListener("click",function(t){t.target===e&&n.click()})}}.call(this))}function h(t,e,n,i){t?t(n,i):n&&e.trigger("AdError",n)}(c.prototype=Object.create(a.prototype)).isValidVPAIDAd=function(){return this._isValid},a.METHODS.forEach(function(r){-1===["subscribe","unsubscribe","initAd"].indexOf(r)&&(c.prototype[r]=function(){var t=a.prototype[r].length,n=Array.prototype.slice.call(arguments),i=t===n.length?n.pop():void 0;setTimeout(function(){var t,e=null;try{t=this._creative[r].apply(this._creative,n)}catch(t){e=t}h(i,this._subscribers,e,t)}.bind(this),0)})}),c.prototype.initAd=function(t,n,i,r,a,o,s){a=a||{},o=l.extend({slot:this._el,videoSlot:this._videoEl},o||{}),setTimeout(function(){var e;try{this._creative.initAd(t,n,i,r,a,o)}catch(t){e=t}h(s,this._subscribers,e)}.bind(this),0)},c.prototype.subscribe=function(t,e,n){this._subscribers.subscribe(e,t,n)},c.prototype.unsubscribe=function(t,e){this._subscribers.unsubscribe(e,t)},c.prototype.on=c.prototype.subscribe,c.prototype.off=c.prototype.unsubscribe,a.GETTERS.forEach(function(i){c.prototype[i]=function(n){setTimeout(function(){var t,e=null;try{t=this._creative[i]()}catch(t){e=t}h(n,this._subscribers,e,t)}.bind(this),0)}}),c.prototype.setAdVolume=function(n,i){setTimeout(function(){var t,e=null;try{this._creative.setAdVolume(n),t=this._creative.getAdVolume()}catch(t){e=t}e||(e=l.validate(t===n,"failed to apply volume: "+n)),h(i,this._subscribers,e,t)}.bind(this),0)},c.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()},t.exports=c},function(t,e,n){var i=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];function r(t,e,n){}r.prototype.handshakeVersion=function(t,e){},r.prototype.initAd=function(t,e,n,i,r,a,o){},r.prototype.startAd=function(t){},r.prototype.stopAd=function(t){},r.prototype.skipAd=function(t){},r.prototype.resizeAd=function(t,e,n,i){},r.prototype.pauseAd=function(t){},r.prototype.resumeAd=function(t){},r.prototype.expandAd=function(t){},r.prototype.collapseAd=function(t){},r.prototype.subscribe=function(t,e,n){},r.prototype.unsubscribe=function(t,e){},r.prototype.getAdLinear=function(t){},r.prototype.getAdWidth=function(t){},r.prototype.getAdHeight=function(t){},r.prototype.getAdExpanded=function(t){},r.prototype.getAdSkippableState=function(t){},r.prototype.getAdRemainingTime=function(t){},r.prototype.getAdDuration=function(t){},r.prototype.getAdVolume=function(t){},r.prototype.getAdCompanions=function(t){},r.prototype.getAdIcons=function(t){},r.prototype.setAdVolume=function(t,e){},o(r,"METHODS",i),o(r,"GETTERS",["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"]),o(r,"SETTERS",["setAdVolume"]),o(r,"EVENTS",["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"]);var a=i.filter(function(t){return-1===["skipAd"].indexOf(t)});function o(t,e,n){Object.defineProperty(t,e,{writable:!1,configurable:!1,value:n})}o(r,"checkVPAIDInterface",function(e){return a.every(function(t){return"function"===typeof e[t]})}),t.exports=r},function(t,e,n){function i(){this._subscribers={}}i.prototype.subscribe=function(t,e,n){this.isHandlerAttached(t,e)||this.get(e).push({handler:t,context:n,eventName:e})},i.prototype.unsubscribe=function(e,t){this._subscribers[t]=this.get(t).filter(function(t){return e!==t.handler})},i.prototype.unsubscribeAll=function(){this._subscribers={}},i.prototype.trigger=function(t,e){var n=this;this.get(t).concat(this.get("*")).forEach(function(t){setTimeout(function(){n.isHandlerAttached(t.handler,t.eventName)&&t.handler.call(t.context,e)},0)})},i.prototype.triggerSync=function(t,e){this.get(t).concat(this.get("*")).forEach(function(t){t.handler.call(t.context,e)})},i.prototype.get=function(t){return this._subscribers[t]||(this._subscribers[t]=[]),this._subscribers[t]},i.prototype.isHandlerAttached=function(e,t){return this.get(t).some(function(t){return e===t.handler})},t.exports=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=n(0),o=(i=r)&&i.__esModule?i:{default:i};var s=o.default.getComponent("Component"),l=function(t){function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,n));return i.addClass("vjs-vpaid-"+e.toLowerCase()+"-container"),i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,s),a(r,[{key:"createEl",value:function(){return function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"createEl",this).call(this,"div",{className:"vjs-vpaid-container"})}}]),r}();e.default=l,o.default.registerComponent("VPAIDContainer",l)}])}),define("parts/eleicoes/autarquicas2017-simple",["require","bag-widgets/simple","bag-widgets/common","widgets/base","lodash","module"],function(t){var r=t("bag-widgets/simple"),e=t("bag-widgets/common"),n=t("widgets/base"),a=t("lodash"),i=t("module"),o="imp-autarquicas-simple",s=i.config(),l=["PS","PSD","BE","CDU","CDS","INDP"];function u(t,e){var n=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}("moreUrl")||e.moreLink,i={baseUrl:"baseUrl"in e?e.baseUrl:s.fbag.url+"rest/v1_1/elections/autarquicas2017",doc:e.doc,header:'<a class="logo" href="#"><span>Legislativas 2015</span></a>\n<p class="label">Resultados<span>Totais Nacionais</span></p>',footer:'<div class="status">\n    <p><span class="js-sections-missing">Todas as</span> freguesias por apurar</p>\n    <p>ltima atualizao s <span class="js-update-stamp">Aguarde</span></p>\n</div>\n<% if (it.moreLink) { %>\n<a class="link" href="<%= it.moreLink %>" target="_blank">Ver Resultados<span>Distrito, Concelho e Freguesia</span></a>\n<% } %>',entry:"<li class=\"id_<%= it.details.id.replace('.', '_').replace('/', '_').toLowerCase() %>\">\n    <div class=\"partyMandates\"><span><%= it.result.presidencies || '--' %></span></div>\n    <div class=\"partyPercent\">\n        <span class=\"partyPercentInner\" style=\"height: <%= it.result.visiblePercent %>%\">\n            <%= it.result.percent || '--' %>\n        </span>\n    </div>\n    <div class=\"partyLogo id_<%= it.details.id.replace('.', '_').replace('/', '_').toLowerCase() %>\"></div>\n    <div class=\"partyName\"><%= (it.details.name || it.details.initials) %></div>\n</li>",moreLink:n,className:e.className||"simpleResultContainer"};r.call(this,t,i)}function c(t,e){return t=t.result||{},(e=e.result||{}).votes-t.votes}return u.prototype=Object.create(r.prototype),u.init=function(t,e){return n.init(t,o,u,e)},u.start=function(t,e){return n.start(t,o,u,e)},u.prototype.start=function(){r.prototype.start.apply(this,arguments)},u.prototype.stop=function(){r.prototype.stop.apply(this,arguments)},u.prototype._onDataLoaded=function(t){this._$element.find(".js-sections-missing").text(t.freguesiasPorApurar),t.results=t.results.filter(function(t,e,n){var i=t.details.id;return 0===i.indexOf("AGG-")?(i=i.substring(4),-1!==l.indexOf(i)):-1!==l.indexOf(i)&&!a.any(n,function(t){return t.details.id==="AGG-"+i})}).sort(c),t.results.push({result:{id:"ABSTENTION",initials:"Absteno",percent:e.formatPercentage(t.abstencaoPercent),percentValue:t.abstencaoPercent,votes:t.abstencao},details:{id:"ABSTENTION",initials:"Absteno",key:"ABSTENTION"}});var n=a.chain(t.results).map(function(t){return t.result.percentValue||0}).max().value();return t.results=a.map(t.results,function(t){t.details.initials=t.details.initials.toUpperCase().replace(/\./g," + ");var e=t.result.percentValue||0;return e>0&&(t.result.visiblePercent=100*e/n),t}),t},u}),define("parts/eleicoes/europeias2019",["require","bag-widgets","widgets/base","lodash","module"],function(t){var r=t("bag-widgets"),n=t("widgets/base"),a=t("lodash"),e=t("module"),i="imp-europeias-2019",o=e.config(),s={NACIONAL:{uri:"NACIONAL",label:"Portugal",isDefault:!1,columns:[{key:"initials",label:"",className:"columnName"},{key:"percent",label:"% votos",className:"columnPercent"},{key:"mandates",label:"eleitos",className:"columnMandates"},{key:"votes",label:"votos",className:"columnVotes"}]},ESTRANGEIRO:{uri:"ESTRANGEIRO",label:"Resto da Europa",isDefault:!1,columns:[{key:"initials",label:"",className:"columnName"},{key:"percent",label:"% votos",className:"columnPercent"},{key:"mandates",label:"eleitos",className:"columnMandates"},{key:"votes",label:"votos",className:"columnVotes"}]},GLOBAL:{uri:"GLOBAL",label:"Global",isDefault:!0,columns:[{key:"initials",label:"",className:"columnName"},{key:"percent",label:"% votos",className:"columnPercent"},{key:"mandates",label:"eleitos",className:"columnMandates"},{key:"votes",label:"votos",className:"columnVotes"}]}};function l(t,e){var n={baseUrl:"baseUrl"in e?e.baseUrl:o.fbag.url+"/rest/v1_1/elections/europeias-2019",loadMore:!1,pageSize:5e3,showKeyFilter:!1,showIndexColumn:!1,customHeader:'<tr><th class="customHeader cellEmpty"><span></span></th><th class="customHeader cell2017" colspan="3"><span>2019</span></th>',customFooter:'<tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td class="columnName">BRANCOS</td><td><%= it.votosBrancosPercent %></td><td></td><td><%= it.votosBrancos %></td></tr><tr><td class="columnName">NULOS</td><td><%= it.votosNulosPercent %></td><td></td><td><%= it.votosNulos %></td></tr><tr><td class="columnName">ABSTENO</td><td><%= it.abstencaoPercent %></td><td></td><td><%= it.abstencao %></td></tr>',datasets:s,datasetName:"DADOS"};r.Detailed.call(this,t,n)}function u(t,e){return t=t.result||{},(e=e.result||{}).votes-t.votes}return l.prototype=Object.create(r.Detailed.prototype),l.init=function(t,e){return n.init(t,i,l,e)},l.start=function(t,e){return n.start(t,i,l,e)},l.prototype.start=function(){r.Detailed.prototype.start.apply(this,arguments),this._$element.prepend('<header class="resultsHeader"><p class="logo"><span>Europeias 2019</span></p><div><div class="label">Resultados nacionais</div><div class="status">Freguesias por apurar: <span class="js-sections-missing"></span></div><div class="status">ltima atualizao: <span class="js-update-stamp"=></span></div></div></header>'),this._$sections=this._$element.find(".js-sections-missing"),this._$update=this._$element.find(".js-update-stamp")},l.prototype.stop=function(){r.Detailed.prototype.stop.apply(this,arguments)},l.prototype._onDataLoaded=function(t){var e=t&&t[0]&&t[0].result||{},n=t&&t[0]&&t[0].details||{};this._$sections.text(e.freguesiasPorApurar),this._$update.text(r.Common.formatHour(n.updatedStamp)),e.votosBrancosPercent=r.Common.formatPercentage(e.votosBrancosPercent),e.histBrancosPercent=r.Common.formatPercentage(e.histBrancosPercent),e.votosNulosPercent=r.Common.formatPercentage(e.votosNulosPercent),e.histNulosPercent=r.Common.formatPercentage(e.histNulosPercent),e.abstencaoPercent=r.Common.formatPercentage(e.abstencaoPercent),e.histAbstencaoPercent=r.Common.formatPercentage(e.histAbstencaoPercent),this._$footer.empty(),this._updateFooter(e),null===e.distrito&&(e.results=a.filter(e.results||{},function(t,e){if(0!==t.percent)return t}));var i=a.filter(e.results,function(t){return 0!==t.id.indexOf("AGG-")});return i=a.map(i,function(t){return null!==t.percent&&(t.percent=r.Common.formatPercentage(t.percent)),null!==t.histPercent&&(t.histPercent=r.Common.formatPercentage(t.histPercent)),t.initials=t.initials.toLowerCase(),{result:t}}).sort(u)},l}),define("placar/fetcher/base",["require","lodash","sys/polyfills"],function(t){var o=t("lodash");t("sys/polyfills");function e(t,e){var n,i,r,a;e=e||{},this._url=(e.baseUrl||"//api.impresa.pt/bola/")+t,this._currentData=void 0,this._updated=0,this._count=0,this._maxRetries=void 0===e.maxRetries?5:e.maxRetries,this._fetchInterval=e.fetchInterval||15e3,this._retries=0,this._doUpdate=o.bind(this._doUpdate,this),this._doUpdate=(n=this._doUpdate,i=100,r=void 0,a=[],function(){return new Promise(function(t){a.push(t),r&&clearTimeout(r),r=setTimeout(function(){var t;r=void 0,t=n();for(var e=0;e<a.length;e++)a[e](t)},i)})})}return e.prototype.NAME="imp-placar-fetcher",e.prototype.start=function(){return this._count++,console.debug("[%s] Number of active listeners is now %d (+1)",this.NAME,this._count),this._currentData?Promise.resolve(this.getCurrent()):this._request||this._doUpdate()},e.prototype.stop=function(){this._count>0&&(this._count--,console.debug("[%s] Number of active listeners is now %d (-1)",this.NAME,this._count),clearTimeout(this._timer))},e.prototype._doUpdate=function(){var i=this;function e(t){if(i._retries>i._maxRetries)throw new Error(t);return i._retries++,n(1e3*i._retries)}function n(e){var t=i.getCurrent(),n=new Promise(function(t){i._timer=setTimeout(function(){t(i._doUpdate())},e)});return i._request=void 0,t.data?t:n}return this._request=this._fetchData(this._getUrl()).then(function(t){return t&&"0"===t.error_code?(i._retries=0,i._updateData(t),n(i._fetchInterval)):e(t&&t.error_text||"Error fetching data")},e)},e.prototype._getUrl=function(){return this._url},e.prototype.getCurrent=function(){return{data:this._currentData,updated:this._updated}},e.prototype._fetchData=function(t){return fetch(t).then(function(t){return t.json()})},e}),define("placar/fetcher/match",["require","placar/fetcher/base","lodash","sys/polyfills"],function(t){var i=t("placar/fetcher/base"),e=t("lodash");t("sys/polyfills");function n(t,e){e=e||{};var n="/rest/v2/MatchID/{matchID}".replace("{matchID}",t);i.call(this,n,e),this._fetchEvents=!1,this._needsEvents=!1,this._fetchLineups=!1,this._needsLineups=!1}return(n.prototype=Object.create(i.prototype)).NAME="imp-placar-match-fetcher",n.prototype.start=function(){return this._needsEvents||this._needsLineups?(this._count++,console.debug("[%s] Number of active listeners is now %d (+1)",this.NAME,this._count),clearTimeout(this._timer),this._doUpdate()):i.prototype.start.apply(this,arguments)},n.prototype.enableEvents=function(){this._fetchEvents=!0,this._needsEvents=!this._currentData||!this._currentData.events},n.prototype.disableEvents=function(){this._fetchEvents=!1,this._needsEvents=!1},n.prototype.enableLineups=function(){this._fetchLineups=!0,this._needsLineups=!this._currentData||!this._currentData.home_starting_eleven},n.prototype.disableLineups=function(){this._fetchLineups=!1,this._needsLineups=!1},n.prototype._updateData=function(t){var e=t.data;(this._currentData=e).events=this._processEvents(e.events);var n=parseInt(t.timestamp,10);this._updated=n&&1e3*n||+new Date},n.prototype._getUrl=function(){return i.prototype._getUrl.apply(this,arguments)+"?NoEvents="+(this._fetchEvents?"0":"1")+"&NoLineups="+(this._fetchLineups?"0":"1")},n.prototype._processEvents=function(t){return e.map(t,function(t,e){return t._key=parseInt(e,10)||0,t.minute=parseInt(t.minute,10),t.minute_extra=parseInt(t.minute_extra,10),t}).sort(function(t,e){return t._key-e._key})},n}),define("placar/widgets/base",["require","widgets/base"],function(t){"use strict";var i=t("widgets/base"),e=[{long:"Domingo",short:"Dom"},{long:"Segunda",short:"Seg"},{long:"Tera",short:"Ter"},{long:"Quarta",short:"Qua"},{long:"Quinta",short:"Qui"},{long:"Sexta",short:"Sex"},{long:"Sbado",short:"Sab"}],r=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];function a(t,e,n){if(i.call(this,t,e),!(n=n||{}).fetcher)throw new Error("No data fetcher provided");this._fetcher=n.fetcher}a.init=i.init,a.start=i.start,a.destroy=i.destroy;var l=/(\d{4})-(\d{2})-(\d{2})(?: (\d{2}):(\d{2}):(\d{2}))?/;return a._parseDate=function(t){var e=l.exec(t),n=parseInt(e[1],10),i=parseInt(e[2],10),r=parseInt(e[3],10),a=parseInt(e[4],10),o=parseInt(e[5],10),s=parseInt(e[6],10);return new Date(n,i&&i-1,r,a,o,s)},a.leftZeroPad=function(t,e){for(var n=""+t,i=0;n.length<e;i++)n="0"+n;return n},a._getTime=function(t){return[a.leftZeroPad(t.getHours(),2),a.leftZeroPad(t.getMinutes(),2)].join(":")},a._getDate=function(t){var e=[],n=a._getWeekday(t);return t.getDate()&&e.push(t.getDate()+" de "),t.getMonth()&&e.push(r[t.getMonth()]),t.getFullYear()&&e.push(t.getFullYear()),n&&e.push(", "+n.long),e.join(" ")},a._getWeekday=function(t){return t.getDay()>=0&&e[t.getDay()]},a}),define("placar/tpl/scoreboard/widget.js",["require"],function(t){return'<p></p>\n<% if (it.showDetails) { %>\n<ul class="placarMatchData">\n    <% if (it.editionName) { %>\n    <li class="placarMatchData--entry placarMatchData--edition"><%= it.editionName %></li>\n    <% } %>\n    <% if (it.stageName) { %>\n    <li class="placarMatchData--entry placarMatchData--stage"><%= it.stageName %></li>\n    <% } %>\n    <% if (it.legName) { %>\n    <li class="placarMatchData--entry matchdata--leg"><%= it.legName %></li>\n    <% } %>\n    <li class="placarMatchData--entry placarMatchData--stadium">\n        <span class="placarMatchData--label">Estdio</span> <%= it.stadiumName || \'--\' %>\n    </li>\n    <li class="placarMatchData--entry placarMatchData--referee">\n        <span class="placarMatchData--label">rbitro</span> <%= it.refereeName || \'--\' %>\n    </li>\n    <li class="placarMatchData--entry placarMatchData--date"><%= it.date %></li>\n</ul>\n<% } %>\n<div class="placarScoreboardWidget--inner<% if (it.broadcasted) { %> broadcasted<% } %>">\n    <div class="placarLiveLabel">\n        <span>Direto</span>\n    </div>\n\n    <div class="placarMatchReportContainer">\n        <div class="placarTeamContainer">\n            <div class="placarTeamContainer--inner">\n                <div class="placarTeamContainer--entry placarTeamDetails placarTeamDetails__rightLogo">\n                    <%= it.home_team.details %>\n                </div>\n                <div class="placarGoalScorers js-placard-home_team-scorers"></div>\n            </div>\n        </div>\n        <div class="placarMatchScore">\n            <div class="placarMatchGoals placarMatchGoals__large">\n                <div class="placarMatchGoals--entry placarMatchGoals--entry__home js-placard-home_team-goals">0</div>\n                <div class="placarMatchGoals--entry placarMatchGoals--entry__away js-placard-away_team-goals">0</div>\n            </div>\n            <div class="placarMatchTimeStatus"><span class="js-placard-time">00:00</span></div>\n        </div>\n        <div class="placarTeamContainer placarTeamContainer__away">\n            <div class="placarTeamContainer--inner">\n                <div class="placarTeamContainer--entry placarTeamDetails">\n                    <%= it.away_team.details %>\n                </div>\n                <div class="placarGoalScorers js-placard-away_team-scorers"></div>\n            </div>\n        </div>\n    </div>\n    <% if (it.followButton) { %>\n    <a class="placarFollowButton" href="<%= it.followButton.url %>"><%= it.followButton.label %></a>\n    <% } %>\n    <div class="placarPoweredBy">Uma parceria <a href="http://www.zerozero.pt" class="placarPoweredBy--logo"><span>ZeroZero</span></a>\n    </div>\n</div>'}),define("placar/tpl/scoreboard/team.js",["require"],function(t){return'<div class="placarTeamDetails--logo"><img src="<%= it.logo %>" alt="<%= it.name %>"></div><div class="placarTeamDetails--name"><%= it.name %></div><% if (it.showCountry && it.countryFlag) { %><div class="placarTeamDetails--country">    <img src="<%= it.countryFlag %>" alt="<%= it.country %>" class="placarTeamDetails--country_flag">    <span class="placarTeamDetails--country_name"><%= it.country %></span></div><% } %>'}),define("placar/tpl/scoreboard/home_scorer.js",["require"],function(t){return'<div class="placarGoalScorers--entry"><%= it.player_name %> <span class="placarGoalScorers--time"><%= it.goals_minutes %></span></div>'}),define("placar/tpl/scoreboard/away_scorer.js",["require"],function(t){return'<div class="placarGoalScorers--entry"><span class="placarGoalScorers--time"><%= it.goals_minutes %></span> <%= it.player_name %></div>'}),define("placar/tpl/loading.js",["require"],function(t){return'<div class="placarLoading"><span>Loading...</span></div>'}),define("placar/tpl/error.js",["require"],function(t){return'<p class="placarLoadingError">Ocorreu um erro a carregar os conteudos</p>'}),define("placar/widgets/scoreboard",["require","sys/polyfills","lodash","placar/widgets/base","placar/tpl/scoreboard/widget.js","placar/tpl/scoreboard/team.js","placar/tpl/scoreboard/home_scorer.js","placar/tpl/scoreboard/away_scorer.js","placar/tpl/loading.js","placar/tpl/error.js"],function(t){"use strict";t("sys/polyfills");var n=t("lodash"),i=t("placar/widgets/base"),a=t("placar/tpl/scoreboard/widget.js"),o=t("placar/tpl/scoreboard/team.js"),l=t("placar/tpl/scoreboard/home_scorer.js"),u=t("placar/tpl/scoreboard/away_scorer.js"),e=t("placar/tpl/loading.js"),r=t("placar/tpl/error.js"),s="imp-placar-scoreboard";function c(t,e){if(i.call(this,s,t,e),!(e=e||{}).fetcher)throw new Error("No data fetcher provided");this._fetcher=e.fetcher,this._matchId=e.matchId,this._idMappings=e.idMappings,this._useCountryLogo=e.useCountryLogo||!1,this._doUpdate=n.bind(this._doUpdate,this),e.link&&(this._followButton={url:e.link,label:e.linkLabel||"Acompanhar"}),this._showDetails=!0===e.details}function h(t){return t.sort(function(t,e){var n=t.goals_minutes.trim().split(" ").map(function(t){return parseInt(t)}).filter(function(t){return!isNaN(t)}),i=e.goals_minutes.trim().split(" ").map(function(t){return parseInt(t)}).filter(function(t){return!isNaN(t)});return Math.min.apply(null,n)-Math.min.apply(null,i)})}return a=n.template(a),o=n.template(o),l=n.template(l),u=n.template(u),c.init=function(t,e){return i.init(t,s,c,e)},c.start=function(t,e){return i.start(t,s,c,e)},c.destroy=function(t){return i.destroy(t,s)},c.prototype.start=function(){var t=this;this._running=!1,this._$element.addClass("placarScoreboardWidget").html(e),this._$element.hide(),this._fetcher.start().then(function(){t.setup(),t._viewUpdated=0,t._currentTime=0,t._running=!0,t._doUpdate()},function(){t._$element.html(r)}),setTimeout(function(){t._$element.css("display","")},200)},c.prototype.stop=function(){this._running=!1},c.prototype._doUpdate=function(){this.update(),this._running&&(this._running=this._running&&!this.isFullTime(),window.requestAnimationFrame(this._doUpdate),this._running||this._fetcher.stop())},c.prototype.setup=function(){var t=this._fetcher.getCurrent().data,e={logo:this._useCountryLogo?t.design_home_country_logo:t.home_team_logo,name:t.name_home_team,countryFlag:t.home_country_logo,country:t.home_country_name,coach:t.home_coach||{}},n={logo:this._useCountryLogo?t.design_away_country_logo:t.away_team_logo,name:t.name_away_team,countryFlag:t.away_country_logo,country:t.away_country_name,coach:t.away_coach||{}};e.details=o({it:e}),n.details=o({it:n});var i=void 0!==t.home_country_id&&void 0!==t.away_country_id&&t.home_country_id!==t.away_country_id,r=this._idMappings&&this._idMappings.broadcastedMatches&&this._idMappings.broadcastedMatches.includes(this._matchId);this._$element.toggleClass("hasDetails",this._showDetails).html(a({it:{showDetails:this._showDetails,showCountry:i,home_team:e,away_team:n,followButton:this._followButton,editionName:t.competition,stageName:t.name_stage,legName:void 0,stadiumName:t.stadium,refereeName:t.referee,date:t.date,broadcasted:r}})),this._$time=this._$element.find(".js-placard-time"),this._$homeScorers=this._$element.find(".js-placard-home_team-scorers"),this._$awayScorers=this._$element.find(".js-placard-away_team-scorers"),this._$homeGoals=this._$element.find(".js-placard-home_team-goals"),this._$awayGoals=this._$element.find(".js-placard-away_team-goals")},c.prototype.update=function(){var t,e,n,i=this._fetcher.getCurrent(),r=i.data;if(this._viewUpdated<i.updated){this._viewUpdated=i.updated,t=this.getGoals();var a=[].concat(r.home_goal_scorers||[]).concat(r.away_own_goal_scorers||[]),o=[].concat(r.away_goal_scorers||[]).concat(r.home_own_goal_scorers||[]);e=h(a).map(function(t){return l({it:t})}),n=h(o).map(function(t){return u({it:t})}),this._$element.toggleClass("fullTime",this.isFullTime()),this._$element.toggleClass("halfTime",this.isHalfTime()),this._$element.toggleClass("upcoming",!this.isLive()),this._$element.toggleClass("isLive",this.isLive()),this._$homeGoals.text(t.home),this._$awayGoals.text(t.away),this._$homeScorers.html(e),this._$awayScorers.html(n)}var s=this.getCurrentTime();s!==this._currentTime&&(this._currentTime=s,this._$time.text(this._currentTime))},c.prototype.getGoals=function(){var t=this._fetcher.getCurrent().data;return{home:t.live_home_goals||t.home_goals||0,away:t.live_away_goals||t.away_goals||0}},c.prototype.getCurrentTime=function(){var t,e,n=this._fetcher.getCurrent().data;return this.isHalfTime()?"Intervalo":this.isFullTime()?"Terminado":this.isLive()?(t=parseInt(n.minute)||0,i.leftZeroPad(t,2)):(e=n.date&&i._parseDate(n.date))&&i._getTime(e)||"--"},c.prototype.isLive=function(){var t=this._fetcher.getCurrent().data;return t&&"1"===t.in_progress},c.prototype.isFullTime=function(){var t=this._fetcher.getCurrent().data;return t&&"1"===t.full_time},c.prototype.isHalfTime=function(){var t=this._fetcher.getCurrent().data;return t&&"Int"===t.half},c}),function(t,e){"object"===typeof module&&"object"===typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!==typeof window?window:this,function(x,t){var h=[],f=x.document,c=h.slice,m=h.concat,s=h.push,r=h.indexOf,n={},e=n.toString,v=n.hasOwnProperty,g={},E=function(t,e){return new E.fn.init(t,e)},i=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,a=/^-ms-/,o=/-([\da-z])/gi,l=function(t,e){return e.toUpperCase()};function u(t){var e=!!t&&"length"in t&&t.length,n=E.type(t);return"function"!==n&&!E.isWindow(t)&&("array"===n||0===e||"number"===typeof e&&e>0&&e-1 in t)}E.fn=E.prototype={jquery:"1.12.4",constructor:E,selector:"",length:0,toArray:function(){return c.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:c.call(this)},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return E.each(this,t)},map:function(n){return this.pushStack(E.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:h.sort,splice:h.splice},E.extend=E.fn.extend=function(){var t,e,n,i,r,a,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"===typeof o&&(u=o,o=arguments[s]||{},s++),"object"===typeof o||E.isFunction(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(r=arguments[s]))for(i in r)t=o[i],o!==(n=r[i])&&(u&&n&&(E.isPlainObject(n)||(e=E.isArray(n)))?(a=e?(e=!1,t&&E.isArray(t)?t:[]):t&&E.isPlainObject(t)?t:{},o[i]=E.extend(u,a,n)):void 0!==n&&(o[i]=n));return o},E.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===E.type(t)},isArray:Array.isArray||function(t){return"array"===E.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){var e=t&&t.toString();return!E.isArray(t)&&e-parseFloat(e)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==E.type(t)||t.nodeType||E.isWindow(t))return!1;try{if(t.constructor&&!v.call(t,"constructor")&&!v.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(!g.ownFirst)for(e in t)return v.call(t,e);for(e in t);return void 0===e||v.call(t,e)},type:function(t){return null==t?t+"":"object"===typeof t||"function"===typeof t?n[e.call(t)]||"object":typeof t},globalEval:function(t){t&&E.trim(t)&&(x.execScript||function(t){x.eval.call(x,t)})(t)},camelCase:function(t){return t.replace(a,"ms-").replace(o,l)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,i=0;if(u(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(i,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(u(Object(t))?E.merge(n,"string"===typeof t?[t]:t):s.call(n,t)),n},inArray:function(t,e,n){var i;if(e){if(r)return r.call(e,t,n);for(i=e.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;)t[r++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[r++]=e[i++];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,a=t.length,o=!n;r<a;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,n){var i,r,a=0,o=[];if(u(t))for(i=t.length;a<i;a++)null!=(r=e(t[a],a,n))&&o.push(r);else for(a in t)null!=(r=e(t[a],a,n))&&o.push(r);return m.apply([],o)},guid:1,proxy:function(t,e){var n,i,r;if("string"===typeof e&&(r=t[e],e=t,t=r),E.isFunction(t))return n=c.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(c.call(arguments)))}).guid=t.guid=t.guid||E.guid++,i},now:function(){return+new Date},support:g}),"function"===typeof Symbol&&(E.fn[Symbol.iterator]=h[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var d=function(n){var t,f,b,a,r,m,h,v,w,l,u,T,x,o,E,g,s,c,y,S="sizzle"+1*new Date,_=n.document,A=0,i=0,d=rt(),p=rt(),M=rt(),C=function(t,e){return t===e&&(u=!0),0},k={}.hasOwnProperty,e=[],O=e.pop,L=e.push,R=e.push,P=e.slice,I=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",U="\\["+j+"*("+N+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+j+"*\\]",B=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",F=new RegExp(j+"+","g"),V=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),H=new RegExp("^"+j+"*,"+j+"*"),z=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),G=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),W=new RegExp(B),q=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Q=/'|\\/g,tt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),et=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},nt=function(){T()};try{R.apply(e=P.call(_.childNodes),_.childNodes),e[_.childNodes.length].nodeType}catch(t){R={apply:e.length?function(t,e){L.apply(t,P.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function it(t,e,n,i){var r,a,o,s,l,u,c,h,d=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!==typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!i&&((e?e.ownerDocument||e:_)!==x&&T(e),e=e||x,E)){if(11!==p&&(u=K.exec(t)))if(r=u[1]){if(9===p){if(!(o=e.getElementById(r)))return n;if(o.id===r)return n.push(o),n}else if(d&&(o=d.getElementById(r))&&y(e,o)&&o.id===r)return n.push(o),n}else{if(u[2])return R.apply(n,e.getElementsByTagName(t)),n;if((r=u[3])&&f.getElementsByClassName&&e.getElementsByClassName)return R.apply(n,e.getElementsByClassName(r)),n}if(f.qsa&&!M[t+" "]&&(!g||!g.test(t))){if(1!==p)d=e,h=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(Q,"\\$&"):e.setAttribute("id",s=S),a=(c=m(t)).length,l=q.test(s)?"#"+s:"[id='"+s+"']";a--;)c[a]=l+" "+ft(c[a]);h=c.join(","),d=J.test(t)&&dt(e.parentNode)||e}if(h)try{return R.apply(n,d.querySelectorAll(h)),n}catch(t){}finally{s===S&&e.removeAttribute("id")}}}return v(t.replace(V,"$1"),e,n,i)}function rt(){var i=[];return function t(e,n){return i.push(e+" ")>b.cacheLength&&delete t[i.shift()],t[e+" "]=n}}function at(t){return t[S]=!0,t}function ot(t){var e=x.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function st(t,e){for(var n=t.split("|"),i=n.length;i--;)b.attrHandle[n[i]]=e}function lt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ut(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ct(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function ht(o){return at(function(a){return a=+a,at(function(t,e){for(var n,i=o([],t.length,a),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}function dt(t){return t&&"undefined"!==typeof t.getElementsByTagName&&t}for(t in f=it.support={},r=it.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},T=it.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:_;return i!==x&&9===i.nodeType&&i.documentElement&&(o=(x=i).documentElement,E=!r(x),(n=x.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",nt,!1):n.attachEvent&&n.attachEvent("onunload",nt)),f.attributes=ot(function(t){return t.className="i",!t.getAttribute("className")}),f.getElementsByTagName=ot(function(t){return t.appendChild(x.createComment("")),!t.getElementsByTagName("*").length}),f.getElementsByClassName=Z.test(x.getElementsByClassName),f.getById=ot(function(t){return o.appendChild(t).id=S,!x.getElementsByName||!x.getElementsByName(S).length}),f.getById?(b.find.ID=function(t,e){if("undefined"!==typeof e.getElementById&&E){var n=e.getElementById(t);return n?[n]:[]}},b.filter.ID=function(t){var e=t.replace(tt,et);return function(t){return t.getAttribute("id")===e}}):(delete b.find.ID,b.filter.ID=function(t){var n=t.replace(tt,et);return function(t){var e="undefined"!==typeof t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}}),b.find.TAG=f.getElementsByTagName?function(t,e){return"undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t):f.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,a=e.getElementsByTagName(t);if("*"!==t)return a;for(;n=a[r++];)1===n.nodeType&&i.push(n);return i},b.find.CLASS=f.getElementsByClassName&&function(t,e){if("undefined"!==typeof e.getElementsByClassName&&E)return e.getElementsByClassName(t)},s=[],g=[],(f.qsa=Z.test(x.querySelectorAll))&&(ot(function(t){o.appendChild(t).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+j+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+j+"*(?:value|"+D+")"),t.querySelectorAll("[id~="+S+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+S+"+*").length||g.push(".#.+[+~]")}),ot(function(t){var e=x.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+j+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(f.matchesSelector=Z.test(c=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ot(function(t){f.disconnectedMatch=c.call(t,"div"),c.call(t,"[s!='']:x"),s.push("!=",B)}),g=g.length&&new RegExp(g.join("|")),s=s.length&&new RegExp(s.join("|")),e=Z.test(o.compareDocumentPosition),y=e||Z.test(o.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},C=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!f.sortDetached&&e.compareDocumentPosition(t)===n?t===x||t.ownerDocument===_&&y(_,t)?-1:e===x||e.ownerDocument===_&&y(_,e)?1:l?I(l,t)-I(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,i=0,r=t.parentNode,a=e.parentNode,o=[t],s=[e];if(!r||!a)return t===x?-1:e===x?1:r?-1:a?1:l?I(l,t)-I(l,e):0;if(r===a)return lt(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;o[i]===s[i];)i++;return i?lt(o[i],s[i]):o[i]===_?-1:s[i]===_?1:0}),x},it.matches=function(t,e){return it(t,null,null,e)},it.matchesSelector=function(t,e){if((t.ownerDocument||t)!==x&&T(t),e=e.replace(G,"='$1']"),f.matchesSelector&&E&&!M[e+" "]&&(!s||!s.test(e))&&(!g||!g.test(e)))try{var n=c.call(t,e);if(n||f.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return it(e,x,null,[t]).length>0},it.contains=function(t,e){return(t.ownerDocument||t)!==x&&T(t),y(t,e)},it.attr=function(t,e){(t.ownerDocument||t)!==x&&T(t);var n=b.attrHandle[e.toLowerCase()],i=n&&k.call(b.attrHandle,e.toLowerCase())?n(t,e,!E):void 0;return void 0!==i?i:f.attributes||!E?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},it.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},it.uniqueSort=function(t){var e,n=[],i=0,r=0;if(u=!f.detectDuplicates,l=!f.sortStable&&t.slice(0),t.sort(C),u){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return l=null,t},a=it.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"===typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=a(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=a(e);return n},(b=it.selectors={cacheLength:50,createPseudo:at,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(tt,et),t[3]=(t[3]||t[4]||t[5]||"").replace(tt,et),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||it.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&it.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=m(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(tt,et).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=d[t+" "];return e||(e=new RegExp("(^|"+j+")"+t+"("+j+"|$)"))&&d(t,function(t){return e.test("string"===typeof t.className&&t.className||"undefined"!==typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=it.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&e.indexOf(r)>-1:"$="===i?r&&e.slice(-r.length)===r:"~="===i?(" "+e.replace(F," ")+" ").indexOf(r)>-1:"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(f,t,e,m,v){var g="nth"!==f.slice(0,3),y="last"!==f.slice(-4),_="of-type"===t;return 1===m&&0===v?function(t){return!!t.parentNode}:function(t,e,n){var i,r,a,o,s,l,u=g!==y?"nextSibling":"previousSibling",c=t.parentNode,h=_&&t.nodeName.toLowerCase(),d=!n&&!_,p=!1;if(c){if(g){for(;u;){for(o=t;o=o[u];)if(_?o.nodeName.toLowerCase()===h:1===o.nodeType)return!1;l=u="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?c.firstChild:c.lastChild],y&&d){for(p=(s=(i=(r=(a=(o=c)[S]||(o[S]={}))[o.uniqueID]||(a[o.uniqueID]={}))[f]||[])[0]===A&&i[1])&&i[2],o=s&&c.childNodes[s];o=++s&&o&&o[u]||(p=s=0)||l.pop();)if(1===o.nodeType&&++p&&o===t){r[f]=[A,s,p];break}}else if(d&&(p=s=(i=(r=(a=(o=t)[S]||(o[S]={}))[o.uniqueID]||(a[o.uniqueID]={}))[f]||[])[0]===A&&i[1]),!1===p)for(;(o=++s&&o&&o[u]||(p=s=0)||l.pop())&&((_?o.nodeName.toLowerCase()!==h:1!==o.nodeType)||!++p||(d&&((r=(a=o[S]||(o[S]={}))[o.uniqueID]||(a[o.uniqueID]={}))[f]=[A,p]),o!==t)););return(p-=v)===m||p%m===0&&p/m>=0}}},PSEUDO:function(t,a){var e,o=b.pseudos[t]||b.setFilters[t.toLowerCase()]||it.error("unsupported pseudo: "+t);return o[S]?o(a):o.length>1?(e=[t,t,"",a],b.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,e){for(var n,i=o(t,a),r=i.length;r--;)t[n=I(t,i[r])]=!(e[n]=i[r])}):function(t){return o(t,0,e)}):o}},pseudos:{not:at(function(t){var i=[],r=[],s=h(t.replace(V,"$1"));return s[S]?at(function(t,e,n,i){for(var r,a=s(t,null,i,[]),o=t.length;o--;)(r=a[o])&&(t[o]=!(e[o]=r))}):function(t,e,n){return i[0]=t,s(i,null,n,r),i[0]=null,!r.pop()}}),has:at(function(e){return function(t){return it(e,t).length>0}}),contains:at(function(e){return e=e.replace(tt,et),function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:at(function(n){return q.test(n||"")||it.error("unsupported lang: "+n),n=n.replace(tt,et).toLowerCase(),function(t){var e;do{if(e=E?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===o},focus:function(t){return t===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return Y.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ht(function(){return[0]}),last:ht(function(t,e){return[e-1]}),eq:ht(function(t,e,n){return[n<0?n+e:n]}),even:ht(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:ht(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:ht(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:ht(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[t]=ut(t);for(t in{submit:!0,reset:!0})b.pseudos[t]=ct(t);function pt(){}function ft(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function mt(s,t,e){var l=t.dir,u=e&&"parentNode"===l,c=i++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||u)return s(t,e,n)}:function(t,e,n){var i,r,a,o=[A,c];if(n){for(;t=t[l];)if((1===t.nodeType||u)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||u){if((i=(r=(a=t[S]||(t[S]={}))[t.uniqueID]||(a[t.uniqueID]={}))[l])&&i[0]===A&&i[1]===c)return o[2]=i[2];if((r[l]=o)[2]=s(t,e,n))return!0}}}function vt(r){return r.length>1?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function gt(t,e,n,i,r){for(var a,o=[],s=0,l=t.length,u=null!=e;s<l;s++)(a=t[s])&&(n&&!n(a,i,r)||(o.push(a),u&&e.push(s)));return o}function yt(p,f,m,v,g,t){return v&&!v[S]&&(v=yt(v)),g&&!g[S]&&(g=yt(g,t)),at(function(t,e,n,i){var r,a,o,s=[],l=[],u=e.length,c=t||function(t,e,n){for(var i=0,r=e.length;i<r;i++)it(t,e[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),h=!p||!t&&f?c:gt(c,s,p,n,i),d=m?g||(t?p:u||v)?[]:e:h;if(m&&m(h,d,n,i),v)for(r=gt(d,l),v(r,[],n,i),a=r.length;a--;)(o=r[a])&&(d[l[a]]=!(h[l[a]]=o));if(t){if(g||p){if(g){for(r=[],a=d.length;a--;)(o=d[a])&&r.push(h[a]=o);g(null,d=[],r,i)}for(a=d.length;a--;)(o=d[a])&&(r=g?I(t,o):s[a])>-1&&(t[r]=!(e[r]=o))}}else d=gt(d===e?d.splice(u,d.length):d),g?g(null,e,d,i):R.apply(e,d)})}function _t(t){for(var r,e,n,i=t.length,a=b.relative[t[0].type],o=a||b.relative[" "],s=a?1:0,l=mt(function(t){return t===r},o,!0),u=mt(function(t){return I(r,t)>-1},o,!0),c=[function(t,e,n){var i=!a&&(n||e!==w)||((r=e).nodeType?l(t,e,n):u(t,e,n));return r=null,i}];s<i;s++)if(e=b.relative[t[s].type])c=[mt(vt(c),e)];else{if((e=b.filter[t[s].type].apply(null,t[s].matches))[S]){for(n=++s;n<i&&!b.relative[t[n].type];n++);return yt(s>1&&vt(c),s>1&&ft(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(V,"$1"),e,s<n&&_t(t.slice(s,n)),n<i&&_t(t=t.slice(n)),n<i&&ft(t))}c.push(e)}return vt(c)}return pt.prototype=b.filters=b.pseudos,b.setFilters=new pt,m=it.tokenize=function(t,e){var n,i,r,a,o,s,l,u=p[t+" "];if(u)return e?0:u.slice(0);for(o=t,s=[],l=b.preFilter;o;){for(a in n&&!(i=H.exec(o))||(i&&(o=o.slice(i[0].length)||o),s.push(r=[])),n=!1,(i=z.exec(o))&&(n=i.shift(),r.push({value:n,type:i[0].replace(V," ")}),o=o.slice(n.length)),b.filter)!(i=X[a].exec(o))||l[a]&&!(i=l[a](i))||(n=i.shift(),r.push({value:n,type:a,matches:i}),o=o.slice(n.length));if(!n)break}return e?o.length:o?it.error(t):p(t,s).slice(0)},h=it.compile=function(t,e){var n,v,g,y,_,i,r=[],a=[],o=M[t+" "];if(!o){for(e||(e=m(t)),n=e.length;n--;)(o=_t(e[n]))[S]?r.push(o):a.push(o);(o=M(t,(v=a,y=(g=r).length>0,_=v.length>0,i=function(t,e,n,i,r){var a,o,s,l=0,u="0",c=t&&[],h=[],d=w,p=t||_&&b.find.TAG("*",r),f=A+=null==d?1:Math.random()||.1,m=p.length;for(r&&(w=e===x||e||r);u!==m&&null!=(a=p[u]);u++){if(_&&a){for(o=0,e||a.ownerDocument===x||(T(a),n=!E);s=v[o++];)if(s(a,e||x,n)){i.push(a);break}r&&(A=f)}y&&((a=!s&&a)&&l--,t&&c.push(a))}if(l+=u,y&&u!==l){for(o=0;s=g[o++];)s(c,h,e,n);if(t){if(l>0)for(;u--;)c[u]||h[u]||(h[u]=O.call(i));h=gt(h)}R.apply(i,h),r&&!t&&h.length>0&&l+g.length>1&&it.uniqueSort(i)}return r&&(A=f,w=d),c},y?at(i):i))).selector=t}return o},v=it.select=function(t,e,n,i){var r,a,o,s,l,u="function"===typeof t&&t,c=!i&&m(t=u.selector||t);if(n=n||[],1===c.length){if((a=c[0]=c[0].slice(0)).length>2&&"ID"===(o=a[0]).type&&f.getById&&9===e.nodeType&&E&&b.relative[a[1].type]){if(!(e=(b.find.ID(o.matches[0].replace(tt,et),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(a.shift().value.length)}for(r=X.needsContext.test(t)?0:a.length;r--&&(o=a[r],!b.relative[s=o.type]);)if((l=b.find[s])&&(i=l(o.matches[0].replace(tt,et),J.test(a[0].type)&&dt(e.parentNode)||e))){if(a.splice(r,1),!(t=i.length&&ft(a)))return R.apply(n,i),n;break}}return(u||h(t,c))(i,e,!E,n,!e||J.test(t)&&dt(e.parentNode)||e),n},f.sortStable=S.split("").sort(C).join("")===S,f.detectDuplicates=!!u,T(),f.sortDetached=ot(function(t){return 1&t.compareDocumentPosition(x.createElement("div"))}),ot(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||st("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),f.attributes&&ot(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||st("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ot(function(t){return null==t.getAttribute("disabled")})||st(D,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),it}(x);E.find=d,E.expr=d.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=d.uniqueSort,E.text=d.getText,E.isXMLDoc=d.isXML,E.contains=d.contains;var p=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&E(t).is(n))break;i.push(t)}return i},y=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},_=E.expr.match.needsContext,b=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function T(t,n,i){if(E.isFunction(n))return E.grep(t,function(t,e){return!!n.call(t,e,t)!==i});if(n.nodeType)return E.grep(t,function(t){return t===n!==i});if("string"===typeof n){if(w.test(n))return E.filter(n,t,i);n=E.filter(n,t)}return E.grep(t,function(t){return E.inArray(t,n)>-1!==i})}E.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?E.find.matchesSelector(i,t)?[i]:[]:E.find.matches(t,E.grep(e,function(t){return 1===t.nodeType}))},E.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!==typeof t)return this.pushStack(E(t).filter(function(){for(e=0;e<r;e++)if(E.contains(i[e],this))return!0}));for(e=0;e<r;e++)E.find(t,i[e],n);return(n=this.pushStack(r>1?E.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(T(this,t||[],!1))},not:function(t){return this.pushStack(T(this,t||[],!0))},is:function(t){return!!T(this,"string"===typeof t&&_.test(t)?E(t):t||[],!1).length}});var S,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(E.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||S,"string"!==typeof t)return t.nodeType?(this.context=this[0]=t,this.length=1,this):E.isFunction(t)?"undefined"!==typeof n.ready?n.ready(t):t(E):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),E.makeArray(t,this));if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:A.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:f,!0)),b.test(i[1])&&E.isPlainObject(e))for(i in e)E.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((r=f.getElementById(i[2]))&&r.parentNode){if(r.id!==i[2])return S.find(t);this.length=1,this[0]=r}return this.context=f,this.selector=t,this}).prototype=E.fn,S=E(f);var M=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};function k(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e,n=E(t,this),i=n.length;return this.filter(function(){for(e=0;e<i;e++)if(E.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,a=[],o=_.test(t)||"string"!==typeof t?E(t,e||this.context):0;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(a.length>1?E.uniqueSort(a):a)},index:function(t){return t?"string"===typeof t?E.inArray(this[0],E(t)):E.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return p(t,"parentNode")},parentsUntil:function(t,e,n){return p(t,"parentNode",n)},next:function(t){return k(t,"nextSibling")},prev:function(t){return k(t,"previousSibling")},nextAll:function(t){return p(t,"nextSibling")},prevAll:function(t){return p(t,"previousSibling")},nextUntil:function(t,e,n){return p(t,"nextSibling",n)},prevUntil:function(t,e,n){return p(t,"previousSibling",n)},siblings:function(t){return y((t.parentNode||{}).firstChild,t)},children:function(t){return y(t.firstChild)},contents:function(t){return E.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:E.merge([],t.childNodes)}},function(i,r){E.fn[i]=function(t,e){var n=E.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"===typeof e&&(n=E.filter(e,n)),this.length>1&&(C[i]||(n=E.uniqueSort(n)),M.test(i)&&(n=n.reverse())),this.pushStack(n)}});var O,L,R=/\S+/g;function P(){f.addEventListener?(f.removeEventListener("DOMContentLoaded",I),x.removeEventListener("load",I)):(f.detachEvent("onreadystatechange",I),x.detachEvent("onload",I))}function I(){(f.addEventListener||"load"===x.event.type||"complete"===f.readyState)&&(P(),E.ready())}for(L in E.Callbacks=function(i){var t,n;i="string"===typeof i?(t=i,n={},E.each(t.match(R)||[],function(t,e){n[e]=!0}),n):E.extend({},i);var r,e,a,o,s=[],l=[],u=-1,c=function(){for(o=i.once,a=r=!0;l.length;u=-1)for(e=l.shift();++u<s.length;)!1===s[u].apply(e[0],e[1])&&i.stopOnFalse&&(u=s.length,e=!1);i.memory||(e=!1),r=!1,o&&(s=e?[]:"")},h={add:function(){return s&&(e&&!r&&(u=s.length-1,l.push(e)),function n(t){E.each(t,function(t,e){E.isFunction(e)?i.unique&&h.has(e)||s.push(e):e&&e.length&&"string"!==E.type(e)&&n(e)})}(arguments),e&&!r&&c()),this},remove:function(){return E.each(arguments,function(t,e){for(var n;(n=E.inArray(e,s,n))>-1;)s.splice(n,1),n<=u&&u--}),this},has:function(t){return t?E.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=l=[],s=e="",this},disabled:function(){return!s},lock:function(){return o=!0,e||h.disable(),this},locked:function(){return!!o},fireWith:function(t,e){return o||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),r||c()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!a}};return h},E.extend({Deferred:function(t){var a=[["resolve","done",E.Callbacks("once memory"),"resolved"],["reject","fail",E.Callbacks("once memory"),"rejected"],["notify","progress",E.Callbacks("memory")]],r="pending",o={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var r=arguments;return E.Deferred(function(i){E.each(a,function(t,e){var n=E.isFunction(r[t])&&r[t];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&E.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this===o?i.promise():this,n?[t]:arguments)})}),r=null}).promise()},promise:function(t){return null!=t?E.extend(t,o):o}},s={};return o.pipe=o.then,E.each(a,function(t,e){var n=e[2],i=e[3];o[e[1]]=n.add,i&&n.add(function(){r=i},a[1^t][2].disable,a[2][2].lock),s[e[0]]=function(){return s[e[0]+"With"](this===s?o:this,arguments),this},s[e[0]+"With"]=n.fireWith}),o.promise(s),t&&t.call(s,s),s},when:function(t){var r,e,n,i=0,a=c.call(arguments),o=a.length,s=1!==o||t&&E.isFunction(t.promise)?o:0,l=1===s?t:E.Deferred(),u=function(e,n,i){return function(t){n[e]=this,i[e]=arguments.length>1?c.call(arguments):t,i===r?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(o>1)for(r=new Array(o),e=new Array(o),n=new Array(o);i<o;i++)a[i]&&E.isFunction(a[i].promise)?a[i].promise().progress(u(i,e,r)).done(u(i,n,a)).fail(l.reject):--s;return s||l.resolveWith(n,a),l.promise()}}),E.fn.ready=function(t){return E.ready.promise().done(t),this},E.extend({isReady:!1,readyWait:1,holdReady:function(t){t?E.readyWait++:E.ready(!0)},ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0)!==t&&--E.readyWait>0||(O.resolveWith(f,[E]),E.fn.triggerHandler&&(E(f).triggerHandler("ready"),E(f).off("ready")))}}),E.ready.promise=function(t){if(!O)if(O=E.Deferred(),"complete"===f.readyState||"loading"!==f.readyState&&!f.documentElement.doScroll)x.setTimeout(E.ready);else if(f.addEventListener)f.addEventListener("DOMContentLoaded",I),x.addEventListener("load",I);else{f.attachEvent("onreadystatechange",I),x.attachEvent("onload",I);var n=!1;try{n=null==x.frameElement&&f.documentElement}catch(t){}n&&n.doScroll&&function e(){if(!E.isReady){try{n.doScroll("left")}catch(t){return x.setTimeout(e,50)}P(),E.ready()}}()}return O.promise(t)},E.ready.promise(),E(g))break;g.ownFirst="0"===L,g.inlineBlockNeedsLayout=!1,E(function(){var t,e,n,i;(n=f.getElementsByTagName("body")[0])&&n.style&&(e=f.createElement("div"),(i=f.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),"undefined"!==typeof e.style.zoom&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",g.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=f.createElement("div");g.deleteExpando=!0;try{delete t.test}catch(t){g.deleteExpando=!1}t=null}();var D,j=function(t){var e=E.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||!0!==e&&t.getAttribute("classid")===e)},N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/([A-Z])/g;function B(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(U,"-$1").toLowerCase();if("string"===typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:N.test(n)?E.parseJSON(n):n)}catch(t){}E.data(t,e,n)}else n=void 0}return n}function F(t){var e;for(e in t)if(("data"!==e||!E.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function V(t,e,n,i){if(j(t)){var r,a,o=E.expando,s=t.nodeType,l=s?E.cache:t,u=s?t[o]:t[o]&&o;if(u&&l[u]&&(i||l[u].data)||void 0!==n||"string"!==typeof e)return u||(u=s?t[o]=h.pop()||E.guid++:o),l[u]||(l[u]=s?{}:{toJSON:E.noop}),"object"!==typeof e&&"function"!==typeof e||(i?l[u]=E.extend(l[u],e):l[u].data=E.extend(l[u].data,e)),a=l[u],i||(a.data||(a.data={}),a=a.data),void 0!==n&&(a[E.camelCase(e)]=n),"string"===typeof e?null==(r=a[e])&&(r=a[E.camelCase(e)]):r=a,r}}function H(t,e,n){if(j(t)){var i,r,a=t.nodeType,o=a?E.cache:t,s=a?t[E.expando]:E.expando;if(o[s]){if(e&&(i=n?o[s]:o[s].data)){r=(e=E.isArray(e)?e.concat(E.map(e,E.camelCase)):e in i?[e]:(e=E.camelCase(e))in i?[e]:e.split(" ")).length;for(;r--;)delete i[e[r]];if(n?!F(i):!E.isEmptyObject(i))return}(n||(delete o[s].data,F(o[s])))&&(a?E.cleanData([t],!0):g.deleteExpando||o!=o.window?delete o[s]:o[s]=void 0)}}}E.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?E.cache[t[E.expando]]:t[E.expando])&&!F(t)},data:function(t,e,n){return V(t,e,n)},removeData:function(t,e){return H(t,e)},_data:function(t,e,n){return V(t,e,n,!0)},_removeData:function(t,e){return H(t,e,!0)}}),E.fn.extend({data:function(t,e){var n,i,r,a=this[0],o=a&&a.attributes;if(void 0!==t)return"object"===typeof t?this.each(function(){E.data(this,t)}):arguments.length>1?this.each(function(){E.data(this,t,e)}):a?B(a,t,E.data(a,t)):void 0;if(this.length&&(r=E.data(a),1===a.nodeType&&!E._data(a,"parsedAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&B(a,i=E.camelCase(i.slice(5)),r[i]);E._data(a,"parsedAttrs",!0)}return r},removeData:function(t){return this.each(function(){E.removeData(this,t)})}}),E.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=E._data(t,e),n&&(!i||E.isArray(n)?i=E._data(t,e,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),i=n.length,r=n.shift(),a=E._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete a.stop,r.call(t,function(){E.dequeue(t,e)},a)),!i&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return E._data(t,n)||E._data(t,n,{empty:E.Callbacks("once memory").add(function(){E._removeData(t,e+"queue"),E._removeData(t,n)})})}}),E.fn.extend({queue:function(e,n){var t=2;return"string"!==typeof e&&(n=e,e="fx",t--),arguments.length<t?E.queue(this[0],e):void 0===n?this:this.each(function(){var t=E.queue(this,e,n);E._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&E.dequeue(this,e)})},dequeue:function(t){return this.each(function(){E.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=E.Deferred(),a=this,o=this.length,s=function(){--i||r.resolveWith(a,[a])};for("string"!==typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=E._data(a[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}}),g.shrinkWrapBlocks=function(){return null!=D?D:(D=!1,(e=f.getElementsByTagName("body")[0])&&e.style?(t=f.createElement("div"),(n=f.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(n).appendChild(t),"undefined"!==typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(f.createElement("div")).style.width="5px",D=3!==t.offsetWidth),e.removeChild(n),D):void 0);var t,e,n};var z=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,G=new RegExp("^(?:([+-])=|)("+z+")([a-z%]*)$","i"),W=["Top","Right","Bottom","Left"],q=function(t,e){return t=e||t,"none"===E.css(t,"display")||!E.contains(t.ownerDocument,t)};function X(t,e,n,i){var r,a=1,o=20,s=i?function(){return i.cur()}:function(){return E.css(t,e,"")},l=s(),u=n&&n[3]||(E.cssNumber[e]?"":"px"),c=(E.cssNumber[e]||"px"!==u&&+l)&&G.exec(E.css(t,e));if(c&&c[3]!==u)for(u=u||c[3],n=n||[],c=+l||1;c/=a=a||".5",E.style(t,e,c+u),a!==(a=s()/l)&&1!==a&&--o;);return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}var Y,$,Z,K=function(t,e,n,i,r,a,o){var s=0,l=t.length,u=null==n;if("object"===E.type(n))for(s in r=!0,n)K(t,e,s,n[s],!0,a,o);else if(void 0!==i&&(r=!0,E.isFunction(i)||(o=!0),u&&(e=o?(e.call(t,i),null):(u=e,function(t,e,n){return u.call(E(t),n)})),e))for(;s<l;s++)e(t[s],n,o?i:i.call(t[s],s,e(t[s],n)));return r?t:u?e.call(t):l?e(t[0],n):a},J=/^(?:checkbox|radio)$/i,Q=/<([\w:-]+)/,tt=/^$|\/(?:java|ecma)script/i,et=/^\s+/,nt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function it(t){var e=nt.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}Y=f.createElement("div"),$=f.createDocumentFragment(),Z=f.createElement("input"),Y.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",g.leadingWhitespace=3===Y.firstChild.nodeType,g.tbody=!Y.getElementsByTagName("tbody").length,g.htmlSerialize=!!Y.getElementsByTagName("link").length,g.html5Clone="<:nav></:nav>"!==f.createElement("nav").cloneNode(!0).outerHTML,Z.type="checkbox",Z.checked=!0,$.appendChild(Z),g.appendChecked=Z.checked,Y.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!Y.cloneNode(!0).lastChild.defaultValue,$.appendChild(Y),(Z=f.createElement("input")).setAttribute("type","radio"),Z.setAttribute("checked","checked"),Z.setAttribute("name","t"),Y.appendChild(Z),g.checkClone=Y.cloneNode(!0).cloneNode(!0).lastChild.checked,g.noCloneEvent=!!Y.addEventListener,Y[E.expando]=1,g.attributes=!Y.getAttribute(E.expando);var rt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:g.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};function at(t,e){var n,i,r=0,a="undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!==typeof t.querySelectorAll?t.querySelectorAll(e||"*"):void 0;if(!a)for(a=[],n=t.childNodes||t;null!=(i=n[r]);r++)!e||E.nodeName(i,e)?a.push(i):E.merge(a,at(i,e));return void 0===e||e&&E.nodeName(t,e)?E.merge([t],a):a}function ot(t,e){for(var n,i=0;null!=(n=t[i]);i++)E._data(n,"globalEval",!e||E._data(e[i],"globalEval"))}rt.optgroup=rt.option,rt.tbody=rt.tfoot=rt.colgroup=rt.caption=rt.thead,rt.th=rt.td;var st=/<|&#?\w+;/,lt=/<tbody/i;function ut(t){J.test(t.type)&&(t.defaultChecked=t.checked)}function ct(t,e,n,i,r){for(var a,o,s,l,u,c,h,d=t.length,p=it(e),f=[],m=0;m<d;m++)if((o=t[m])||0===o)if("object"===E.type(o))E.merge(f,o.nodeType?[o]:o);else if(st.test(o)){for(l=l||p.appendChild(e.createElement("div")),u=(Q.exec(o)||["",""])[1].toLowerCase(),h=rt[u]||rt._default,l.innerHTML=h[1]+E.htmlPrefilter(o)+h[2],a=h[0];a--;)l=l.lastChild;if(!g.leadingWhitespace&&et.test(o)&&f.push(e.createTextNode(et.exec(o)[0])),!g.tbody)for(a=(o="table"!==u||lt.test(o)?"<table>"!==h[1]||lt.test(o)?0:l:l.firstChild)&&o.childNodes.length;a--;)E.nodeName(c=o.childNodes[a],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(E.merge(f,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=p.lastChild}else f.push(e.createTextNode(o));for(l&&p.removeChild(l),g.appendChecked||E.grep(at(f,"input"),ut),m=0;o=f[m++];)if(i&&E.inArray(o,i)>-1)r&&r.push(o);else if(s=E.contains(o.ownerDocument,o),l=at(p.appendChild(o),"script"),s&&ot(l),n)for(a=0;o=l[a++];)tt.test(o.type||"")&&n.push(o);return l=null,p}!function(){var t,e,n=f.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})e="on"+t,(g[t]=e in x)||(n.setAttribute(e,"t"),g[t]=!1===n.attributes[e].expando);n=null}();var ht=/^(?:input|select|textarea)$/i,dt=/^key/,pt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ft=/^(?:focusinfocus|focusoutblur)$/,mt=/^([^.]*)(?:\.(.+)|)/;function vt(){return!0}function gt(){return!1}function yt(){try{return f.activeElement}catch(t){}}function _t(t,e,n,i,r,a){var o,s;if("object"===typeof e){for(s in"string"!==typeof n&&(i=i||n,n=void 0),e)_t(t,s,n,i,e[s],a);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"===typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=gt;else if(!r)return t;return 1===a&&(o=r,(r=function(t){return E().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=E.guid++)),t.each(function(){E.event.add(this,e,r,i,n)})}E.event={global:{},add:function(t,e,n,i,r){var a,o,s,l,u,c,h,d,p,f,m,v=E._data(t);if(v){for(n.handler&&(n=(l=n).handler,r=l.selector),n.guid||(n.guid=E.guid++),(o=v.events)||(o=v.events={}),(c=v.handle)||((c=v.handle=function(t){return"undefined"===typeof E||t&&E.event.triggered===t.type?void 0:E.event.dispatch.apply(c.elem,arguments)}).elem=t),s=(e=(e||"").match(R)||[""]).length;s--;)p=m=(a=mt.exec(e[s])||[])[1],f=(a[2]||"").split(".").sort(),p&&(u=E.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=E.event.special[p]||{},h=E.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:f.join(".")},l),(d=o[p])||((d=o[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,i,f,c)||(t.addEventListener?t.addEventListener(p,c,!1):t.attachEvent&&t.attachEvent("on"+p,c))),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),E.event.global[p]=!0);t=null}},remove:function(t,e,n,i,r){var a,o,s,l,u,c,h,d,p,f,m,v=E.hasData(t)&&E._data(t);if(v&&(c=v.events)){for(u=(e=(e||"").match(R)||[""]).length;u--;)if(p=m=(s=mt.exec(e[u])||[])[1],f=(s[2]||"").split(".").sort(),p){for(h=E.event.special[p]||{},d=c[p=(i?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=d.length;a--;)o=d[a],!r&&m!==o.origType||n&&n.guid!==o.guid||s&&!s.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(d.splice(a,1),o.selector&&d.delegateCount--,h.remove&&h.remove.call(t,o));l&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,v.handle)||E.removeEvent(t,p,v.handle),delete c[p])}else for(p in c)E.event.remove(t,p+e[u],n,i,!0);E.isEmptyObject(c)&&(delete v.handle,E._removeData(t,"events"))}},trigger:function(t,e,n,i){var r,a,o,s,l,u,c,h=[n||f],d=v.call(t,"type")?t.type:t,p=v.call(t,"namespace")?t.namespace.split("."):[];if(o=u=n=n||f,3!==n.nodeType&&8!==n.nodeType&&!ft.test(d+E.event.triggered)&&(d.indexOf(".")>-1&&(d=(p=d.split(".")).shift(),p.sort()),a=d.indexOf(":")<0&&"on"+d,(t=t[E.expando]?t:new E.Event(d,"object"===typeof t&&t)).isTrigger=i?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:E.makeArray(e,[t]),l=E.event.special[d]||{},i||!l.trigger||!1!==l.trigger.apply(n,e))){if(!i&&!l.noBubble&&!E.isWindow(n)){for(s=l.delegateType||d,ft.test(s+d)||(o=o.parentNode);o;o=o.parentNode)h.push(o),u=o;u===(n.ownerDocument||f)&&h.push(u.defaultView||u.parentWindow||x)}for(c=0;(o=h[c++])&&!t.isPropagationStopped();)t.type=c>1?s:l.bindType||d,(r=(E._data(o,"events")||{})[t.type]&&E._data(o,"handle"))&&r.apply(o,e),(r=a&&o[a])&&r.apply&&j(o)&&(t.result=r.apply(o,e),!1===t.result&&t.preventDefault());if(t.type=d,!i&&!t.isDefaultPrevented()&&(!l._default||!1===l._default.apply(h.pop(),e))&&j(n)&&a&&n[d]&&!E.isWindow(n)){(u=n[a])&&(n[a]=null),E.event.triggered=d;try{n[d]()}catch(t){}E.event.triggered=void 0,u&&(n[a]=u)}return t.result}},dispatch:function(t){t=E.event.fix(t);var e,n,i,r,a,o,s=c.call(arguments),l=(E._data(this,"events")||{})[t.type]||[],u=E.event.special[t.type]||{};if((s[0]=t).delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(o=E.event.handlers.call(this,t,l),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,void 0!==(i=((E.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,s))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,a,o=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(i=[],n=0;n<s;n++)void 0===i[r=(a=e[n]).selector+" "]&&(i[r]=a.needsContext?E(r,this).index(l)>-1:E.find(r,this,null,[l]).length),i[r]&&i.push(a);i.length&&o.push({elem:l,handlers:i})}return s<e.length&&o.push({elem:this,handlers:e.slice(s)}),o},fix:function(t){if(t[E.expando])return t;var e,n,i,r=t.type,a=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=pt.test(r)?this.mouseHooks:dt.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new E.Event(a),e=i.length;e--;)t[n=i[e]]=a[n];return t.target||(t.target=a.srcElement||f),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,o.filter?o.filter(t,a):t},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,a=e.button,o=e.fromElement;return null==t.pageX&&null!=e.clientX&&(r=(i=t.target.ownerDocument||f).documentElement,n=i.body,t.pageX=e.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&o&&(t.relatedTarget=o===t.target?e.toElement:o),t.which||void 0===a||(t.which=1&a?1:2&a?3:4&a?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==yt()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===yt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(E.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return E.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n){var i=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(i,null,e),i.isDefaultPrevented()&&n.preventDefault()}},E.removeEvent=f.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)}:function(t,e,n){var i="on"+e;t.detachEvent&&("undefined"===typeof t[i]&&(t[i]=null),t.detachEvent(i,n))},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?vt:gt):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||E.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:gt,isPropagationStopped:gt,isImmediatePropagationStopped:gt,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=vt,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=vt,t&&!this.isSimulated&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=vt,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){E.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||E.contains(this,n))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=r),e}}}),g.submit||(E.event.special.submit={setup:function(){if(E.nodeName(this,"form"))return!1;E.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=E.nodeName(e,"input")||E.nodeName(e,"button")?E.prop(e,"form"):void 0;n&&!E._data(n,"submit")&&(E.event.add(n,"submit._submit",function(t){t._submitBubble=!0}),E._data(n,"submit",!0))})},postDispatch:function(t){t._submitBubble&&(delete t._submitBubble,this.parentNode&&!t.isTrigger&&E.event.simulate("submit",this.parentNode,t))},teardown:function(){if(E.nodeName(this,"form"))return!1;E.event.remove(this,"._submit")}}),g.change||(E.event.special.change={setup:function(){if(ht.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(E.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._justChanged=!0)}),E.event.add(this,"click._change",function(t){this._justChanged&&!t.isTrigger&&(this._justChanged=!1),E.event.simulate("change",this,t)})),!1;E.event.add(this,"beforeactivate._change",function(t){var e=t.target;ht.test(e.nodeName)&&!E._data(e,"change")&&(E.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||E.event.simulate("change",this.parentNode,t)}),E._data(e,"change",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return E.event.remove(this,"._change"),!ht.test(this.nodeName)}}),g.focusin||E.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(t){E.event.simulate(i,t.target,E.event.fix(t))};E.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=E._data(t,i);e||t.addEventListener(n,r,!0),E._data(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=E._data(t,i)-1;e?E._data(t,i,e):(t.removeEventListener(n,r,!0),E._removeData(t,i))}}}),E.fn.extend({on:function(t,e,n,i){return _t(this,t,e,n,i)},one:function(t,e,n,i){return _t(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,E(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!==typeof t)return!1!==e&&"function"!==typeof e||(n=e,e=void 0),!1===n&&(n=gt),this.each(function(){E.event.remove(this,t,n,e)});for(r in t)this.off(r,e,t[r]);return this},trigger:function(t,e){return this.each(function(){E.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}});var bt=/ jQuery\d+="(?:null|\d+)"/g,wt=new RegExp("<(?:"+nt+")[\\s/>]","i"),Tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,xt=/<script|<style|<link/i,Et=/checked\s*(?:[^=]|=\s*.checked.)/i,St=/^true\/(.*)/,At=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Mt=it(f).appendChild(f.createElement("div"));function Ct(t,e){return E.nodeName(t,"table")&&E.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function kt(t){return t.type=(null!==E.find.attr(t,"type"))+"/"+t.type,t}function Ot(t){var e=St.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function Lt(t,e){if(1===e.nodeType&&E.hasData(t)){var n,i,r,a=E._data(t),o=E._data(e,a),s=a.events;if(s)for(n in delete o.handle,o.events={},s)for(i=0,r=s[n].length;i<r;i++)E.event.add(e,n,s[n][i]);o.data&&(o.data=E.extend({},o.data))}}function Rt(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!g.noCloneEvent&&e[E.expando]){for(i in(r=E._data(e)).events)E.removeEvent(e,i,r.handle);e.removeAttribute(E.expando)}"script"===n&&e.text!==t.text?(kt(e).text=t.text,Ot(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),g.html5Clone&&t.innerHTML&&!E.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&J.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}function Pt(n,i,r,a){i=m.apply([],i);var t,e,o,s,l,u,c=0,h=n.length,d=h-1,p=i[0],f=E.isFunction(p);if(f||h>1&&"string"===typeof p&&!g.checkClone&&Et.test(p))return n.each(function(t){var e=n.eq(t);f&&(i[0]=p.call(this,t,e.html())),Pt(e,i,r,a)});if(h&&(t=(u=ct(i,n[0].ownerDocument,!1,n,a)).firstChild,1===u.childNodes.length&&(u=t),t||a)){for(o=(s=E.map(at(u,"script"),kt)).length;c<h;c++)e=u,c!==d&&(e=E.clone(e,!0,!0),o&&E.merge(s,at(e,"script"))),r.call(n[c],e,c);if(o)for(l=s[s.length-1].ownerDocument,E.map(s,Ot),c=0;c<o;c++)e=s[c],tt.test(e.type||"")&&!E._data(e,"globalEval")&&E.contains(l,e)&&(e.src?E._evalUrl&&E._evalUrl(e.src):E.globalEval((e.text||e.textContent||e.innerHTML||"").replace(At,"")));u=t=null}return n}function It(t,e,n){for(var i,r=e?E.filter(e,t):t,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||E.cleanData(at(i)),i.parentNode&&(n&&E.contains(i.ownerDocument,i)&&ot(at(i,"script")),i.parentNode.removeChild(i));return t}E.extend({htmlPrefilter:function(t){return t.replace(Tt,"<$1></$2>")},clone:function(t,e,n){var i,r,a,o,s,l=E.contains(t.ownerDocument,t);if(g.html5Clone||E.isXMLDoc(t)||!wt.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(Mt.innerHTML=t.outerHTML,Mt.removeChild(a=Mt.firstChild)),(!g.noCloneEvent||!g.noCloneChecked)&&(1===t.nodeType||11===t.nodeType)&&!E.isXMLDoc(t))for(i=at(a),s=at(t),o=0;null!=(r=s[o]);++o)i[o]&&Rt(r,i[o]);if(e)if(n)for(s=s||at(t),i=i||at(a),o=0;null!=(r=s[o]);o++)Lt(r,i[o]);else Lt(t,a);return(i=at(a,"script")).length>0&&ot(i,!l&&at(t,"script")),i=s=r=null,a},cleanData:function(t,e){for(var n,i,r,a,o=0,s=E.expando,l=E.cache,u=g.attributes,c=E.event.special;null!=(n=t[o]);o++)if((e||j(n))&&(a=(r=n[s])&&l[r])){if(a.events)for(i in a.events)c[i]?E.event.remove(n,i):E.removeEvent(n,i,a.handle);l[r]&&(delete l[r],u||"undefined"===typeof n.removeAttribute?n[s]=void 0:n.removeAttribute(s),h.push(r))}}}),E.fn.extend({domManip:Pt,detach:function(t){return It(this,t,!0)},remove:function(t){return It(this,t)},text:function(t){return K(this,function(t){return void 0===t?E.text(this):this.empty().append((this[0]&&this[0].ownerDocument||f).createTextNode(t))},null,t,arguments.length)},append:function(){return Pt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ct(this,t).appendChild(t)})},prepend:function(){return Pt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ct(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Pt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Pt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&E.cleanData(at(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&E.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return E.clone(this,t,e)})},html:function(t){return K(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(bt,""):void 0;if("string"===typeof t&&!xt.test(t)&&(g.htmlSerialize||!wt.test(t))&&(g.leadingWhitespace||!et.test(t))&&!rt[(Q.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(at(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return Pt(this,arguments,function(t){var e=this.parentNode;E.inArray(this,n)<0&&(E.cleanData(at(this)),e&&e.replaceChild(t,this))},n)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,o){E.fn[t]=function(t){for(var e,n=0,i=[],r=E(t),a=r.length-1;n<=a;n++)e=n===a?this:this.clone(!0),E(r[n])[o](e),s.apply(i,e.get());return this.pushStack(i)}});var Dt,jt={HTML:"block",BODY:"block"};function Nt(t,e){var n=E(e.createElement(t)).appendTo(e.body),i=E.css(n[0],"display");return n.detach(),i}function Ut(t){var e=f,n=jt[t];return n||("none"!==(n=Nt(t,e))&&n||((e=((Dt=(Dt||E("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||Dt[0].contentDocument).document).write(),e.close(),n=Nt(t,e),Dt.detach()),jt[t]=n),n}var Bt=/^margin/,Ft=new RegExp("^("+z+")(?!px)[a-z%]+$","i"),Vt=function(t,e,n,i){var r,a,o={};for(a in e)o[a]=t.style[a],t.style[a]=e[a];for(a in r=n.apply(t,i||[]),e)t.style[a]=o[a];return r},Ht=f.documentElement;!function(){var i,r,a,o,s,l,u=f.createElement("div"),c=f.createElement("div");function t(){var t,e,n=f.documentElement;n.appendChild(u),c.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i=a=l=!1,r=s=!0,x.getComputedStyle&&(e=x.getComputedStyle(c),i="1%"!==(e||{}).top,l="2px"===(e||{}).marginLeft,a="4px"===(e||{width:"4px"}).width,c.style.marginRight="50%",r="4px"===(e||{marginRight:"4px"}).marginRight,(t=c.appendChild(f.createElement("div"))).style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",c.style.width="1px",s=!parseFloat((x.getComputedStyle(t)||{}).marginRight),c.removeChild(t)),c.style.display="none",(o=0===c.getClientRects().length)&&(c.style.display="",c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c.childNodes[0].style.borderCollapse="separate",(t=c.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(o=0===t[0].offsetHeight)&&(t[0].style.display="",t[1].style.display="none",o=0===t[0].offsetHeight)),n.removeChild(u)}c.style&&(c.style.cssText="float:left;opacity:.5",g.opacity="0.5"===c.style.opacity,g.cssFloat=!!c.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,(u=f.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",c.innerHTML="",u.appendChild(c),g.boxSizing=""===c.style.boxSizing||""===c.style.MozBoxSizing||""===c.style.WebkitBoxSizing,E.extend(g,{reliableHiddenOffsets:function(){return null==i&&t(),o},boxSizingReliable:function(){return null==i&&t(),a},pixelMarginRight:function(){return null==i&&t(),r},pixelPosition:function(){return null==i&&t(),i},reliableMarginRight:function(){return null==i&&t(),s},reliableMarginLeft:function(){return null==i&&t(),l}}))}();var zt,Gt,Wt=/^(top|right|bottom|left)$/;function qt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}x.getComputedStyle?(zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=x),e.getComputedStyle(t)},Gt=function(t,e,n){var i,r,a,o,s=t.style;return""!==(o=(n=n||zt(t))?n.getPropertyValue(e)||n[e]:void 0)&&void 0!==o||E.contains(t.ownerDocument,t)||(o=E.style(t,e)),n&&!g.pixelMarginRight()&&Ft.test(o)&&Bt.test(e)&&(i=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=i,s.minWidth=r,s.maxWidth=a),void 0===o?o:o+""}):Ht.currentStyle&&(zt=function(t){return t.currentStyle},Gt=function(t,e,n){var i,r,a,o,s=t.style;return null==(o=(n=n||zt(t))?n[e]:void 0)&&s&&s[e]&&(o=s[e]),Ft.test(o)&&!Wt.test(e)&&(i=s.left,(a=(r=t.runtimeStyle)&&r.left)&&(r.left=t.currentStyle.left),s.left="fontSize"===e?"1em":o,o=s.pixelLeft+"px",s.left=i,a&&(r.left=a)),void 0===o?o:o+""||"auto"});var Xt=/alpha\([^)]*\)/i,Yt=/opacity\s*=\s*([^)]*)/i,$t=/^(none|table(?!-c[ea]).+)/,Zt=new RegExp("^("+z+")(.*)$","i"),Kt={position:"absolute",visibility:"hidden",display:"block"},Jt={letterSpacing:"0",fontWeight:"400"},Qt=["Webkit","O","Moz","ms"],te=f.createElement("div").style;function ee(t){if(t in te)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=Qt.length;n--;)if((t=Qt[n]+e)in te)return t}function ne(t,e){for(var n,i,r,a=[],o=0,s=t.length;o<s;o++)(i=t[o]).style&&(a[o]=E._data(i,"olddisplay"),n=i.style.display,e?(a[o]||"none"!==n||(i.style.display=""),""===i.style.display&&q(i)&&(a[o]=E._data(i,"olddisplay",Ut(i.nodeName)))):(r=q(i),(n&&"none"!==n||!r)&&E._data(i,"olddisplay",r?n:E.css(i,"display"))));for(o=0;o<s;o++)(i=t[o]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?a[o]||"":"none"));return t}function ie(t,e,n){var i=Zt.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function re(t,e,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===e?1:0,o=0;a<4;a+=2)"margin"===n&&(o+=E.css(t,n+W[a],!0,r)),i?("content"===n&&(o-=E.css(t,"padding"+W[a],!0,r)),"margin"!==n&&(o-=E.css(t,"border"+W[a]+"Width",!0,r))):(o+=E.css(t,"padding"+W[a],!0,r),"padding"!==n&&(o+=E.css(t,"border"+W[a]+"Width",!0,r)));return o}function ae(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,a=zt(t),o=g.boxSizing&&"border-box"===E.css(t,"boxSizing",!1,a);if(r<=0||null==r){if(((r=Gt(t,e,a))<0||null==r)&&(r=t.style[e]),Ft.test(r))return r;i=o&&(g.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+re(t,e,n||(o?"border":"content"),i,a)+"px"}function oe(t,e,n,i,r){return new oe.prototype.init(t,e,n,i,r)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Gt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:g.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,a,o,s=E.camelCase(e),l=t.style;if(e=E.cssProps[s]||(E.cssProps[s]=ee(s)||s),o=E.cssHooks[e]||E.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:l[e];if("string"===(a=typeof n)&&(r=G.exec(n))&&r[1]&&(n=X(t,e,r),a="number"),null!=n&&n===n&&("number"===a&&(n+=r&&r[3]||(E.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!o||!("set"in o)||void 0!==(n=o.set(t,n,i))))try{l[e]=n}catch(t){}}},css:function(t,e,n,i){var r,a,o,s=E.camelCase(e);return e=E.cssProps[s]||(E.cssProps[s]=ee(s)||s),(o=E.cssHooks[e]||E.cssHooks[s])&&"get"in o&&(a=o.get(t,!0,n)),void 0===a&&(a=Gt(t,e,i)),"normal"===a&&e in Jt&&(a=Jt[e]),""===n||n?(r=parseFloat(a),!0===n||isFinite(r)?r||0:a):a}}),E.each(["height","width"],function(t,r){E.cssHooks[r]={get:function(t,e,n){if(e)return $t.test(E.css(t,"display"))&&0===t.offsetWidth?Vt(t,Kt,function(){return ae(t,r,n)}):ae(t,r,n)},set:function(t,e,n){var i=n&&zt(t);return ie(0,e,n?re(t,r,n,g.boxSizing&&"border-box"===E.css(t,"boxSizing",!1,i),i):0)}}}),g.opacity||(E.cssHooks.opacity={get:function(t,e){return Yt.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=E.isNumeric(e)?"alpha(opacity="+100*e+")":"",a=i&&i.filter||n.filter||"";(e>=(n.zoom=1)||""===e)&&""===E.trim(a.replace(Xt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=Xt.test(a)?a.replace(Xt,r):a+" "+r)}}),E.cssHooks.marginRight=qt(g.reliableMarginRight,function(t,e){if(e)return Vt(t,{display:"inline-block"},Gt,[t,"marginRight"])}),E.cssHooks.marginLeft=qt(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Gt(t,"marginLeft"))||(E.contains(t.ownerDocument,t)?t.getBoundingClientRect().left-Vt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}):0))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(r,a){E.cssHooks[r+a]={expand:function(t){for(var e=0,n={},i="string"===typeof t?t.split(" "):[t];e<4;e++)n[r+W[e]+a]=i[e]||i[e-2]||i[0];return n}},Bt.test(r)||(E.cssHooks[r+a].set=ie)}),E.fn.extend({css:function(t,e){return K(this,function(t,e,n){var i,r,a={},o=0;if(E.isArray(e)){for(i=zt(t),r=e.length;o<r;o++)a[e[o]]=E.css(t,e[o],!1,i);return a}return void 0!==n?E.style(t,e,n):E.css(t,e)},t,e,arguments.length>1)},show:function(){return ne(this,!0)},hide:function(){return ne(this)},toggle:function(t){return"boolean"===typeof t?t?this.show():this.hide():this.each(function(){q(this)?E(this).show():E(this).hide()})}}),((E.Tween=oe).prototype={constructor:oe,init:function(t,e,n,i,r,a){this.elem=t,this.prop=n,this.easing=r||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=a||(E.cssNumber[n]?"":"px")},cur:function(){var t=oe.propHooks[this.prop];return t&&t.get?t.get(this):oe.propHooks._default.get(this)},run:function(t){var e,n=oe.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):oe.propHooks._default.set(this),this}}).init.prototype=oe.prototype,(oe.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[E.cssProps[t.prop]]&&!E.cssHooks[t.prop]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=oe.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=oe.prototype.init,E.fx.step={};var se,le,ue,ce,he,de,pe,fe=/^(?:toggle|show|hide)$/,me=/queueHooks$/;function ve(){return x.setTimeout(function(){se=void 0}),se=E.now()}function ge(t,e){var n,i={height:t},r=0;for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=W[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ye(t,e,n){for(var i,r=(_e.tweeners[e]||[]).concat(_e.tweeners["*"]),a=0,o=r.length;a<o;a++)if(i=r[a].call(n,e,t))return i}function _e(a,t,e){var n,o,i=0,r=_e.prefilters.length,s=E.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=se||ve(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),i=0,r=u.tweens.length;i<r;i++)u.tweens[i].run(n);return s.notifyWith(a,[u,n,e]),n<1&&r?e:(s.resolveWith(a,[u]),!1)},u=s.promise({elem:a,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},e),originalProperties:t,originalOptions:e,startTime:se||ve(),duration:e.duration,tweens:[],createTween:function(t,e){var n=E.Tween(a,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(o)return this;for(o=!0;e<n;e++)u.tweens[e].run(1);return t?(s.notifyWith(a,[u,1,0]),s.resolveWith(a,[u,t])):s.rejectWith(a,[u,t]),this}}),c=u.props;for(!function(t,e){var n,i,r,a,o;for(n in t)if(r=e[i=E.camelCase(n)],a=t[n],E.isArray(a)&&(r=a[1],a=t[n]=a[0]),n!==i&&(t[i]=a,delete t[n]),(o=E.cssHooks[i])&&"expand"in o)for(n in a=o.expand(a),delete t[i],a)n in t||(t[n]=a[n],e[n]=r);else e[i]=r}(c,u.opts.specialEasing);i<r;i++)if(n=_e.prefilters[i].call(u,a,c,u.opts))return E.isFunction(n.stop)&&(E._queueHooks(u.elem,u.opts.queue).stop=E.proxy(n.stop,n)),n;return E.map(c,ye,u),E.isFunction(u.opts.start)&&u.opts.start.call(a,u),E.fx.timer(E.extend(l,{elem:a,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}E.Animation=E.extend(_e,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return X(n.elem,t,G.exec(e),n),n}]},tweener:function(t,e){for(var n,i=0,r=(t=E.isFunction(t)?(e=t,["*"]):t.match(R)).length;i<r;i++)n=t[i],_e.tweeners[n]=_e.tweeners[n]||[],_e.tweeners[n].unshift(e)},prefilters:[function(e,t,n){var i,r,a,o,s,l,u,c=this,h={},d=e.style,p=e.nodeType&&q(e),f=E._data(e,"fxshow");for(i in n.queue||(null==(s=E._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,E.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===("none"===(u=E.css(e,"display"))?E._data(e,"olddisplay")||Ut(e.nodeName):u)&&"none"===E.css(e,"float")&&(g.inlineBlockNeedsLayout&&"inline"!==Ut(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",g.shrinkWrapBlocks()||c.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),t)if(r=t[i],fe.exec(r)){if(delete t[i],a=a||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!f||void 0===f[i])continue;p=!0}h[i]=f&&f[i]||E.style(e,i)}else u=void 0;if(E.isEmptyObject(h))"inline"===("none"===u?Ut(e.nodeName):u)&&(d.display=u);else for(i in f?"hidden"in f&&(p=f.hidden):f=E._data(e,"fxshow",{}),a&&(f.hidden=!p),p?E(e).show():c.done(function(){E(e).hide()}),c.done(function(){var t;for(t in E._removeData(e,"fxshow"),h)E.style(e,t,h[t])}),h)o=ye(p?f[i]:0,i,c),i in f||(f[i]=o.start,p&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}],prefilter:function(t,e){e?_e.prefilters.unshift(t):_e.prefilters.push(t)}}),E.speed=function(t,e,n){var i=t&&"object"===typeof t?E.extend({},t):{complete:n||!n&&e||E.isFunction(t)&&t,duration:t,easing:n&&e||e&&!E.isFunction(e)&&e};return i.duration=E.fx.off?0:"number"===typeof i.duration?i.duration:i.duration in E.fx.speeds?E.fx.speeds[i.duration]:E.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){E.isFunction(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(t,e,n,i){return this.filter(q).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var r=E.isEmptyObject(e),a=E.speed(t,n,i),o=function(){var t=_e(this,E.extend({},e),a);(r||E._data(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(r,t,a){var o=function(t){var e=t.stop;delete t.stop,e(a)};return"string"!==typeof r&&(a=t,t=r,r=void 0),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=E.timers,i=E._data(this);if(e)i[e]&&i[e].stop&&o(i[e]);else for(e in i)i[e]&&i[e].stop&&me.test(e)&&o(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(a),t=!1,n.splice(e,1));!t&&a||E.dequeue(this,r)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var t,e=E._data(this),n=e[o+"queue"],i=e[o+"queueHooks"],r=E.timers,a=n?n.length:0;for(e.finish=!0,E.queue(this,o,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===o&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),E.each(["toggle","show","hide"],function(t,i){var r=E.fn[i];E.fn[i]=function(t,e,n){return null==t||"boolean"===typeof t?r.apply(this,arguments):this.animate(ge(i,!0),t,e,n)}}),E.each({slideDown:ge("show"),slideUp:ge("hide"),slideToggle:ge("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){E.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),E.timers=[],E.fx.tick=function(){var t,e=E.timers,n=0;for(se=E.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||E.fx.stop(),se=void 0},E.fx.timer=function(t){E.timers.push(t),t()?E.fx.start():E.timers.pop()},E.fx.interval=13,E.fx.start=function(){le||(le=x.setInterval(E.fx.tick,E.fx.interval))},E.fx.stop=function(){x.clearInterval(le),le=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(i,t){return i=E.fx&&E.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=x.setTimeout(t,i);e.stop=function(){x.clearTimeout(n)}})},ce=f.createElement("input"),he=f.createElement("div"),de=f.createElement("select"),pe=de.appendChild(f.createElement("option")),(he=f.createElement("div")).setAttribute("className","t"),he.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ue=he.getElementsByTagName("a")[0],ce.setAttribute("type","checkbox"),he.appendChild(ce),(ue=he.getElementsByTagName("a")[0]).style.cssText="top:1px",g.getSetAttribute="t"!==he.className,g.style=/top/.test(ue.getAttribute("style")),g.hrefNormalized="/a"===ue.getAttribute("href"),g.checkOn=!!ce.value,g.optSelected=pe.selected,g.enctype=!!f.createElement("form").enctype,de.disabled=!0,g.optDisabled=!pe.disabled,(ce=f.createElement("input")).setAttribute("value",""),g.input=""===ce.getAttribute("value"),ce.value="t",ce.setAttribute("type","radio"),g.radioValue="t"===ce.value;var be=/\r/g,we=/[\x20\t\r\n\f]+/g;E.fn.extend({val:function(n){var i,t,r,e=this[0];return arguments.length?(r=E.isFunction(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?n.call(this,t,E(this).val()):n)?e="":"number"===typeof e?e+="":E.isArray(e)&&(e=E.map(e,function(t){return null==t?"":t+""})),(i=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):e?(i=E.valHooks[e.type]||E.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(e,"value"))?t:"string"===typeof(t=e.value)?t.replace(be,""):null==t?"":t:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:E.trim(E.text(t)).replace(we," ")}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,a="select-one"===t.type||r<0,o=a?null:[],s=a?r+1:i.length,l=r<0?s:a?r:0;l<s;l++)if(((n=i[l]).selected||l===r)&&(g.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!E.nodeName(n.parentNode,"optgroup"))){if(e=E(n).val(),a)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,a=E.makeArray(e),o=r.length;o--;)if(i=r[o],E.inArray(E.valHooks.option.get(i),a)>-1)try{i.selected=n=!0}catch(t){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),r}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(t,e){if(E.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},g.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Te,xe,Ee=E.expr.attrHandle,Se=/^(?:checked|selected)$/i,Ae=g.getSetAttribute,Me=g.input;E.fn.extend({attr:function(t,e){return K(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){E.removeAttr(this,t)})}}),E.extend({attr:function(t,e,n){var i,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"===typeof t.getAttribute?E.prop(t,e,n):(1===a&&E.isXMLDoc(t)||(e=e.toLowerCase(),r=E.attrHooks[e]||(E.expr.match.bool.test(e)?xe:Te)),void 0!==n?null===n?void E.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=E.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&E.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i,r=0,a=e&&e.match(R);if(a&&1===t.nodeType)for(;n=a[r++];)i=E.propFix[n]||n,E.expr.match.bool.test(n)?Me&&Ae||!Se.test(n)?t[i]=!1:t[E.camelCase("default-"+n)]=t[i]=!1:E.attr(t,n,""),t.removeAttribute(Ae?n:i)}}),xe={set:function(t,e,n){return!1===e?E.removeAttr(t,n):Me&&Ae||!Se.test(n)?t.setAttribute(!Ae&&E.propFix[n]||n,n):t[E.camelCase("default-"+n)]=t[n]=!0,n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(t,e){var a=Ee[e]||E.find.attr;Me&&Ae||!Se.test(e)?Ee[e]=function(t,e,n){var i,r;return n||(r=Ee[e],Ee[e]=i,i=null!=a(t,e,n)?e.toLowerCase():null,Ee[e]=r),i}:Ee[e]=function(t,e,n){if(!n)return t[E.camelCase("default-"+e)]?e.toLowerCase():null}}),Me&&Ae||(E.attrHooks.value={set:function(t,e,n){if(!E.nodeName(t,"input"))return Te&&Te.set(t,e,n);t.defaultValue=e}}),Ae||(Te={set:function(t,e,n){var i=t.getAttributeNode(n);if(i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n))return e}},Ee.id=Ee.name=Ee.coords=function(t,e,n){var i;if(!n)return(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},E.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);if(n&&n.specified)return n.value},set:Te.set},E.attrHooks.contenteditable={set:function(t,e,n){Te.set(t,""!==e&&e,n)}},E.each(["width","height"],function(t,n){E.attrHooks[n]={set:function(t,e){if(""===e)return t.setAttribute(n,"auto"),e}}})),g.style||(E.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Ce=/^(?:input|select|textarea|button|object)$/i,ke=/^(?:a|area)$/i;E.fn.extend({prop:function(t,e){return K(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return t=E.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),E.extend({prop:function(t,e,n){var i,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&E.isXMLDoc(t)||(e=E.propFix[e]||e,r=E.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):Ce.test(t.nodeName)||ke.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.hrefNormalized||E.each(["href","src"],function(t,e){E.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),g.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),g.enctype||(E.propFix.enctype="encoding");var Oe=/[\t\r\n\f]/g;function Le(t){return E.attr(t,"class")||""}E.fn.extend({addClass:function(e){var t,n,i,r,a,o,s,l=0;if(E.isFunction(e))return this.each(function(t){E(this).addClass(e.call(this,t,Le(this)))});if("string"===typeof e&&e)for(t=e.match(R)||[];n=this[l++];)if(r=Le(n),i=1===n.nodeType&&(" "+r+" ").replace(Oe," ")){for(o=0;a=t[o++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r!==(s=E.trim(i))&&E.attr(n,"class",s)}return this},removeClass:function(e){var t,n,i,r,a,o,s,l=0;if(E.isFunction(e))return this.each(function(t){E(this).removeClass(e.call(this,t,Le(this)))});if(!arguments.length)return this.attr("class","");if("string"===typeof e&&e)for(t=e.match(R)||[];n=this[l++];)if(r=Le(n),i=1===n.nodeType&&(" "+r+" ").replace(Oe," ")){for(o=0;a=t[o++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");r!==(s=E.trim(i))&&E.attr(n,"class",s)}return this},toggleClass:function(r,e){var a=typeof r;return"boolean"===typeof e&&"string"===a?e?this.addClass(r):this.removeClass(r):E.isFunction(r)?this.each(function(t){E(this).toggleClass(r.call(this,t,Le(this),e),e)}):this.each(function(){var t,e,n,i;if("string"===a)for(e=0,n=E(this),i=r.match(R)||[];t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==r&&"boolean"!==a||((t=Le(this))&&E._data(this,"__className__",t),E.attr(this,"class",t||!1===r?"":E._data(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+Le(n)+" ").replace(Oe," ").indexOf(e)>-1)return!0;return!1}}),E.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,n){E.fn[n]=function(t,e){return arguments.length>0?this.on(n,null,t,e):this.trigger(n)}}),E.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});var Re=x.location,Pe=E.now(),Ie=/\?/,De=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;E.parseJSON=function(t){if(x.JSON&&x.JSON.parse)return x.JSON.parse(t+"");var r,a=null,e=E.trim(t+"");return e&&!E.trim(e.replace(De,function(t,e,n,i){return r&&e&&(a=0),0===a?t:(r=n||e,a+=!i-!n,"")}))?Function("return "+e)():E.error("Invalid JSON: "+t)},E.parseXML=function(t){var e;if(!t||"string"!==typeof t)return null;try{x.DOMParser?e=(new x.DOMParser).parseFromString(t,"text/xml"):((e=new x.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(t){e=void 0}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+t),e};var je=/#.*$/,Ne=/([?&])_=[^&]*/,Ue=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Be=/^(?:GET|HEAD)$/,Fe=/^\/\//,Ve=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,He={},ze={},Ge="*/".concat("*"),We=Re.href,qe=Ve.exec(We.toLowerCase())||[];function Xe(a){return function(t,e){"string"!==typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(R)||[];if(E.isFunction(e))for(;n=r[i++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(a[n]=a[n]||[]).unshift(e)):(a[n]=a[n]||[]).push(e)}}function Ye(e,r,a,o){var s={},l=e===ze;function u(t){var i;return s[t]=!0,E.each(e[t]||[],function(t,e){var n=e(r,a,o);return"string"!==typeof n||l||s[n]?l?!(i=n):void 0:(r.dataTypes.unshift(n),u(n),!1)}),i}return u(r.dataTypes[0])||!s["*"]&&u("*")}function $e(t,e){var n,i,r=E.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&E.extend(!0,t,n),t}E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:We,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(qe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ge,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":E.parseJSON,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?$e($e(t,E.ajaxSettings),e):$e(E.ajaxSettings,t)},ajaxPrefilter:Xe(He),ajaxTransport:Xe(ze),ajax:function(t,e){"object"===typeof t&&(e=t,t=void 0),e=e||{};var n,i,c,h,d,p,f,r,m=E.ajaxSetup({},e),v=m.context||m,g=m.context&&(v.nodeType||v.jquery)?E(v):E.event,y=E.Deferred(),_=E.Callbacks("once memory"),b=m.statusCode||{},a={},o={},w=0,s="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!r)for(r={};e=Ue.exec(h);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?h:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=o[n]=o[n]||t,a[t]=e),this},overrideMimeType:function(t){return w||(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(w<2)for(e in t)b[e]=[b[e],t[e]];else T.always(t[T.status]);return this},abort:function(t){var e=t||s;return f&&f.abort(e),l(0,e),this}};if(y.promise(T).complete=_.add,T.success=T.done,T.error=T.fail,m.url=((t||m.url||We)+"").replace(je,"").replace(Fe,qe[1]+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=E.trim(m.dataType||"*").toLowerCase().match(R)||[""],null==m.crossDomain&&(n=Ve.exec(m.url.toLowerCase()),m.crossDomain=!(!n||n[1]===qe[1]&&n[2]===qe[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(qe[3]||("http:"===qe[1]?"80":"443")))),m.data&&m.processData&&"string"!==typeof m.data&&(m.data=E.param(m.data,m.traditional)),Ye(He,m,e,T),2===w)return T;for(i in(p=E.event&&m.global)&&0===E.active++&&E.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Be.test(m.type),c=m.url,m.hasContent||(m.data&&(c=m.url+=(Ie.test(c)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=Ne.test(c)?c.replace(Ne,"$1_="+Pe++):c+(Ie.test(c)?"&":"?")+"_="+Pe++)),m.ifModified&&(E.lastModified[c]&&T.setRequestHeader("If-Modified-Since",E.lastModified[c]),E.etag[c]&&T.setRequestHeader("If-None-Match",E.etag[c])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&T.setRequestHeader("Content-Type",m.contentType),T.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ge+"; q=0.01":""):m.accepts["*"]),m.headers)T.setRequestHeader(i,m.headers[i]);if(m.beforeSend&&(!1===m.beforeSend.call(v,T,m)||2===w))return T.abort();for(i in s="abort",{success:1,error:1,complete:1})T[i](m[i]);if(f=Ye(ze,m,e,T)){if(T.readyState=1,p&&g.trigger("ajaxSend",[T,m]),2===w)return T;m.async&&m.timeout>0&&(d=x.setTimeout(function(){T.abort("timeout")},m.timeout));try{w=1,f.send(a,l)}catch(t){if(!(w<2))throw t;l(-1,t)}}else l(-1,"No Transport");function l(t,e,n,i){var r,a,o,s,l,u=e;2!==w&&(w=2,d&&x.clearTimeout(d),f=void 0,h=i||"",T.readyState=t>0?4:0,r=t>=200&&t<300||304===t,n&&(s=function(t,e,n){for(var i,r,a,o,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){l.unshift(o);break}if(l[0]in n)a=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){a=o;break}i||(i=o)}a=a||i}if(a)return a!==l[0]&&l.unshift(a),n[a]}(m,T,n)),s=function(t,e,n,i){var r,a,o,s,l,u={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)u[o.toLowerCase()]=t.converters[o];for(a=c.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=u[l+" "+a]||u["* "+a]))for(r in u)if((s=r.split(" "))[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[r]:!0!==u[r]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}(m,s,T,r),r?(m.ifModified&&((l=T.getResponseHeader("Last-Modified"))&&(E.lastModified[c]=l),(l=T.getResponseHeader("etag"))&&(E.etag[c]=l)),204===t||"HEAD"===m.type?u="nocontent":304===t?u="notmodified":(u=s.state,a=s.data,r=!(o=s.error))):(o=u,!t&&u||(u="error",t<0&&(t=0))),T.status=t,T.statusText=(e||u)+"",r?y.resolveWith(v,[a,u,T]):y.rejectWith(v,[T,u,o]),T.statusCode(b),b=void 0,p&&g.trigger(r?"ajaxSuccess":"ajaxError",[T,m,r?a:o]),_.fireWith(v,[T,u]),p&&(g.trigger("ajaxComplete",[T,m]),--E.active||E.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],function(t,r){E[r]=function(t,e,n,i){return E.isFunction(e)&&(i=i||n,n=e,e=void 0),E.ajax(E.extend({url:t,type:r,dataType:i,data:e,success:n},E.isPlainObject(t)&&t))}}),E._evalUrl=function(t){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},E.fn.extend({wrapAll:function(e){if(E.isFunction(e))return this.each(function(t){E(this).wrapAll(e.call(this,t))});if(this[0]){var t=E(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(n){return E.isFunction(n)?this.each(function(t){E(this).wrapInner(n.call(this,t))}):this.each(function(){var t=E(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=E.isFunction(e);return this.each(function(t){E(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){E.nodeName(this,"body")||E(this).replaceWith(this.childNodes)}).end()}}),E.expr.filters.hidden=function(t){return g.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:function(t){if(!E.contains(t.ownerDocument||f,t))return!0;for(;t&&1===t.nodeType;){if("none"===((e=t).style&&e.style.display||E.css(e,"display"))||"hidden"===t.type)return!0;t=t.parentNode}var e;return!1}(t)},E.expr.filters.visible=function(t){return!E.expr.filters.hidden(t)};var Ze=/%20/g,Ke=/\[\]$/,Je=/\r?\n/g,Qe=/^(?:submit|button|image|reset|file)$/i,tn=/^(?:input|select|textarea|keygen)/i;function en(n,t,i,r){var e;if(E.isArray(t))E.each(t,function(t,e){i||Ke.test(n)?r(n,e):en(n+"["+("object"===typeof e&&null!=e?t:"")+"]",e,i,r)});else if(i||"object"!==E.type(t))r(n,t);else for(e in t)en(n+"["+e+"]",t[e],i,r)}E.param=function(t,e){var n,i=[],r=function(t,e){e=E.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=E.ajaxSettings&&E.ajaxSettings.traditional),E.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,function(){r(this.name,this.value)});else for(n in t)en(n,t[n],e,r);return i.join("&").replace(Ze,"+")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&tn.test(this.nodeName)&&!Qe.test(t)&&(this.checked||!J.test(t))}).map(function(t,e){var n=E(this).val();return null==n?null:E.isArray(n)?E.map(n,function(t){return{name:e.name,value:t.replace(Je,"\r\n")}}):{name:e.name,value:n.replace(Je,"\r\n")}}).get()}}),E.ajaxSettings.xhr=void 0!==x.ActiveXObject?function(){return this.isLocal?sn():f.documentMode>8?on():/^(get|post|head|put|delete|options)$/i.test(this.type)&&on()||sn()}:on;var nn=0,rn={},an=E.ajaxSettings.xhr();function on(){try{return new x.XMLHttpRequest}catch(t){}}function sn(){try{return new x.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}x.attachEvent&&x.attachEvent("onunload",function(){for(var t in rn)rn[t](void 0,!0)}),g.cors=!!an&&"withCredentials"in an,(an=g.ajax=!!an)&&E.ajaxTransport(function(l){var u;if(!l.crossDomain||g.cors)return{send:function(t,a){var e,o=l.xhr(),s=++nn;if(o.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(e in l.xhrFields)o[e]=l.xhrFields[e];for(e in l.mimeType&&o.overrideMimeType&&o.overrideMimeType(l.mimeType),l.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)void 0!==t[e]&&o.setRequestHeader(e,t[e]+"");o.send(l.hasContent&&l.data||null),u=function(t,e){var n,i,r;if(u&&(e||4===o.readyState))if(delete rn[s],u=void 0,o.onreadystatechange=E.noop,e)4!==o.readyState&&o.abort();else{r={},n=o.status,"string"===typeof o.responseText&&(r.text=o.responseText);try{i=o.statusText}catch(t){i=""}n||!l.isLocal||l.crossDomain?1223===n&&(n=204):n=r.text?200:404}r&&a(n,i,r,o.getAllResponseHeaders())},l.async?4===o.readyState?x.setTimeout(u):o.onreadystatechange=rn[s]=u:u()},abort:function(){u&&u(void 0,!0)}}}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),E.ajaxTransport("script",function(e){if(e.crossDomain){var i,r=f.head||E("head")[0]||f.documentElement;return{send:function(t,n){(i=f.createElement("script")).async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(t,e){(e||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,e||n(200,"success"))},r.insertBefore(i,r.firstChild)},abort:function(){i&&i.onload(void 0,!0)}}}});var ln=[],un=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ln.pop()||E.expando+"_"+Pe++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,a,o=!1!==t.jsonp&&(un.test(t.url)?"url":"string"===typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&un.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=E.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(un,"$1"+i):!1!==t.jsonp&&(t.url+=(Ie.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||E.error(i+" was not called"),a[0]},t.dataTypes[0]="json",r=x[i],x[i]=function(){a=arguments},n.always(function(){void 0===r?E(x).removeProp(i):x[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,ln.push(i)),a&&E.isFunction(r)&&r(a[0]),a=r=void 0}),"script"}),E.parseHTML=function(t,e,n){if(!t||"string"!==typeof t)return null;"boolean"===typeof e&&(n=e,e=!1),e=e||f;var i=b.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=ct([t],e,r),r&&r.length&&E(r).remove(),E.merge([],i.childNodes))};var cn=E.fn.load;function hn(t){return E.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}E.fn.load=function(t,e,n){if("string"!==typeof t&&cn)return cn.apply(this,arguments);var i,r,a,o=this,s=t.indexOf(" ");return s>-1&&(i=E.trim(t.slice(s,t.length)),t=t.slice(0,s)),E.isFunction(e)?(n=e,e=void 0):e&&"object"===typeof e&&(r="POST"),o.length>0&&E.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){a=arguments,o.html(i?E("<div>").append(E.parseHTML(t)).find(i):t)}).always(n&&function(t,e){o.each(function(){n.apply(this,a||[t.responseText,e,t])})}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){E.fn[e]=function(t){return this.on(e,t)}}),E.expr.filters.animated=function(e){return E.grep(E.timers,function(t){return e===t.elem}).length},E.offset={setOffset:function(t,e,n){var i,r,a,o,s,l,u=E.css(t,"position"),c=E(t),h={};"static"===u&&(t.style.position="relative"),s=c.offset(),a=E.css(t,"top"),l=E.css(t,"left"),r=("absolute"===u||"fixed"===u)&&E.inArray("auto",[a,l])>-1?(o=(i=c.position()).top,i.left):(o=parseFloat(a)||0,parseFloat(l)||0),E.isFunction(e)&&(e=e.call(t,n,E.extend({},s))),null!=e.top&&(h.top=e.top-s.top+o),null!=e.left&&(h.left=e.left-s.left+r),"using"in e?e.using.call(t,h):c.css(h)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){E.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],a=r&&r.ownerDocument;return a?(t=a.documentElement,E.contains(t,r)?("undefined"!==typeof r.getBoundingClientRect&&(i=r.getBoundingClientRect()),n=hn(a),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===E.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),E.nodeName(t[0],"html")||(n=t.offset()),n.top+=E.css(t[0],"borderTopWidth",!0),n.left+=E.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-E.css(i,"marginTop",!0),left:e.left-n.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&!E.nodeName(t,"html")&&"static"===E.css(t,"position");)t=t.offsetParent;return t||Ht})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var a=/Y/.test(r);E.fn[e]=function(t){return K(this,function(t,e,n){var i=hn(t);if(void 0===n)return i?r in i?i[r]:i.document.documentElement[e]:t[e];i?i.scrollTo(a?E(i).scrollLeft():n,a?n:E(i).scrollTop()):t[e]=n},e,t,arguments.length,null)}}),E.each(["top","left"],function(t,n){E.cssHooks[n]=qt(g.pixelPosition,function(t,e){if(e)return e=Gt(t,n),Ft.test(e)?E(t).position()[n]+"px":e})}),E.each({Height:"height",Width:"width"},function(a,o){E.each({padding:"inner"+a,content:o,"":"outer"+a},function(i,t){E.fn[t]=function(t,e){var n=arguments.length&&(i||"boolean"!==typeof t),r=i||(!0===t||!0===e?"margin":"border");return K(this,function(t,e,n){var i;return E.isWindow(t)?t.document.documentElement["client"+a]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+a],i["scroll"+a],t.body["offset"+a],i["offset"+a],i["client"+a])):void 0===n?E.css(t,e,r):E.style(t,e,n,r)},o,n?t:void 0,n,null)}})}),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),E.fn.size=function(){return this.length},E.fn.andSelf=E.fn.addBack,"function"===typeof define&&define.amd&&define("jquery",[],function(){return E});var dn=x.jQuery,pn=x.$;return E.noConflict=function(t){return x.$===E&&(x.$=pn),t&&x.jQuery===E&&(x.jQuery=dn),E},t||(x.jQuery=x.$=E),E}),define("placar/tpl/timeline/widget.js",["require"],function(t){return'<form class="placarTools">    <div class="placarTools--entry placarAutoRefresh">        <input type="checkbox" checked id="toggleAutoRefresh" class="placarAutoRefresh--button js-placar-timeline-refresh-toggle" disabled>        <label for="toggleAutoRefresh" class="placarAutoRefresh--label">            <span>Refrescar Automaticamente</span>        </label>    </div>    <button class="placarTools--entry placarTools--entry__right placarSortButton js-placar-timeline-sort-toggle" disabled>Mais Recentes</button></form><ul class="placarTimeline js-placar-timeline-entries"></ul>'}),define("placar/tpl/timeline/entry.js",["require"],function(t){return'<li class="placarTimelineEntry">\n    <div class="placarTimelineEntry--column placarTimelineEntry--minute">\n        <%= it.minute %>\' <% if (it.minute_extra) { %><span class="placarTimelineEntry--minuteExtra">+<%= it.minute_extra %></span><% } %>\n    </div>\n    <div class="placarTimelineEntry--column placarTimelineEntry--status">\n        <% if (it.event_img && it.tipo) { %>\n        <span class="placarStatusIcon" style="background-image: url(\'<%= it.event_img %>\')"><%= it.tipo %></span>\n        <% } %>\n    </div>\n    <div class="placarTimelineEntry--column placarTimelineEntry--text"><%= it.text %></div>\n</li>'}),define("placar/widgets/timeline",["require","sys/polyfills","lodash","jquery","placar/widgets/base","placar/tpl/timeline/widget.js","placar/tpl/timeline/entry.js","placar/tpl/loading.js","placar/tpl/error.js"],function(t){"use strict";t("sys/polyfills");var r=t("lodash"),n=t("jquery"),i=t("placar/widgets/base"),e=t("placar/tpl/timeline/widget.js"),a=t("placar/tpl/timeline/entry.js"),o=t("placar/tpl/loading.js"),s=t("placar/tpl/error.js"),l="imp-placar-timeline";function u(t,e){i.call(this,l,t,e),this._doUpdate=r.bind(this._doUpdate,this),this._onRefreshToggle=r.bind(this._onRefreshToggle,this),this._onSortToggle=r.bind(this._onSortToggle,this)}return a=r.template(a),u.init=function(t,e){return i.init(t,l,u,e)},u.start=function(t,e){return i.start(t,l,u,e)},u.destroy=function(t){return i.destroy(t,l)},u.prototype.start=function(){var t=this;this._running=!1,this._sortAsc=!1,this.setup(),this._$refreshToggle.on("change",this._onRefreshToggle),this._$sortToggle.on("click",this._onSortToggle),this._$element.hide(),this._fetcher.start().then(function(){t._viewUpdated=0,t._running=!0,t._$refreshToggle.removeAttr("disabled"),t._$sortToggle.removeAttr("disabled"),t._doUpdate()},function(){t._$element.html(s)}),setTimeout(function(){t._$element.css("display","")},200)},u.prototype.stop=function(){this._running=!1,this._$refreshToggle.off("change",this._onRefreshToggle),this._$sortToggle.off("click",this._onSortToggle)},u.prototype._onRefreshToggle=function(t){var e=n(t.currentTarget).is(":checked");this._running&&!e?(this._running=!1,this._fetcher.stop()):!this._running&&e&&(this._running=!this.isFullTime(),this._running&&this._fetcher.start())},u.prototype._onSortToggle=function(t){t.preventDefault(),this._sortAsc=!this._sortAsc,this._$sortToggle.toggleClass("sortAsc",this._sortAsc),this._running?this._viewUpdated=0:this.update(!0)},u.prototype._doUpdate=function(){this.update(),this._running&&(this._running=this._running&&!this.isFullTime(),window.requestAnimationFrame(this._doUpdate),this._running||this._fetcher.stop())},u.prototype.setup=function(){this._$element.addClass("placarTimelineWidget").html(e),this._$entries=this._$element.find(".js-placar-timeline-entries"),this._$refreshToggle=this._$element.find(".js-placar-timeline-refresh-toggle"),this._$sortToggle=this._$element.find(".js-placar-timeline-sort-toggle"),this._$entries.html("<li>"+o+"</li>")},u.prototype.update=function(t){var e=this._fetcher.getCurrent(),n=e.data;if(!0===t||this._viewUpdated<e.updated){this._viewUpdated=e.updated;var i=r.map(n.events,function(t){return a({it:t})});this._sortAsc&&i.reverse(),this._$entries.html(i.join(""))}},u.prototype.isFullTime=function(){var t=this._fetcher.getCurrent().data;return t&&"1"===t.full_time},u}),define("placar/tpl/squad/widget.js",["require"],function(t){return'<div class="placarTeamDetails--outer">\n    <div class="placarTeamDetails placarTeamDetails__medium">\n        <div class="placarTeamDetails--logo"><img src="<%= it.team.logo %>" alt="<%= it.team.name %>"></div>\n        <div class="placarTeamDetails--name"><%= it.team.name %></div>\n    </div>\n</div>\n<div class="placarTeamList placarTeamList__startingEleven"><h3 class="placarTeamList--title placarLabel">Inicial</h3>\n    <ul class="placarTeamList--players js-placar-squad-starting"></ul>\n</div>\n<div class="placarTeamList placarTeamList__bench"><h3 class="placarTeamList--title placarLabel">Suplentes</h3>\n    <ul class="placarTeamList--players js-placar-squad-bench"></ul>\n</div>\n<div class="placarTeamList placarTeamList__coach"><h3 class="placarTeamList--title placarLabel">Treinador</h3>\n    <ul class="placarTeamList--players">\n        <li class="placarPlayerDetails">\n            <div class="placarPlayerDetails--entry placarPlayerDetails--entry__name"><%= it.team.coach.coach_name ||\n                \'--\' %>\n            </div>\n        </li>\n    </ul>\n</div>'}),define("placar/tpl/squad/entry.js",["require"],function(t){return'<li class="placarPlayerDetails">\n    <div class="placarPlayerDetails--entry placarPlayerDetails--entry__number"><%= it.number %></div>\n    <div class="placarPlayerDetails--entry placarPlayerDetails--entry__name"><%= it.player_name %></div>\n    <div class="placarPlayerDetails--entry placarPlayerDetails--entry__status">\n        <% if (it.goals) { %>\n        <span class="placarStatusIcon placarStatusIcon__goal" title="Golos: <%= it.goals.total_goals %> Golos">Golos: <%= it.goals.total_goals %> Golos</span>\n        <% } %>\n        <% if (it.playerIn) { %>\n        <span class="placarStatusIcon placarStatusIcon__playerIn" title="Entrada: <%= it.playerIn.in_minute %>">Entrada: <%= it.playerIn.in_minute %></span>\n        <% } %>\n        <% if (it.playerOut) { %>\n        <span class="placarStatusIcon placarStatusIcon__playerOut" title="Sada: <%= it.playerOut.out_minute %>">Sada: <%= it.playerOut.out_minute %></span>\n        <% } %>\n        <% if (it.red) { %>\n        <span class="placarStatusIcon placarStatusIcon__playerRed" title="Vermelho: <%= it.red %>">Vermelho: <%= it.red %></span>\n        <% } else if (it.yellow) { %>\n        <span class="placarStatusIcon placarStatusIcon__playerYellow" title="Amarelo: <%= it.yellow %>">Amarelo: <%= it.yellow %></span>\n        <% } %>\n    </div>\n</li>'}),define("placar/widgets/squad",["require","lodash","placar/widgets/base","placar/tpl/squad/widget.js","placar/tpl/squad/entry.js","placar/tpl/loading.js","placar/tpl/error.js"],function(t){"use strict";var u=t("lodash"),n=t("placar/widgets/base"),i=t("placar/tpl/squad/widget.js"),c=t("placar/tpl/squad/entry.js"),e=t("placar/tpl/loading.js"),r=t("placar/tpl/error.js"),a="imp-placar-squad";function o(t,e){if(n.call(this,a,t,e),!(e=e||{}).side)throw new Error("Missing side");this._side=e.side,this._useCountryLogo=e.useCountryLogo||!1,this._doUpdate=u.bind(this._doUpdate,this)}function h(t,n){return[].concat(t||[]).reduce(function(t,e){return t[e[n]]=e,t},{})}return i=u.template(i),c=u.template(c),o.init=function(t,e){return n.init(t,a,o,e)},o.start=function(t,e){return n.start(t,a,o,e)},o.destroy=function(t){return n.destroy(t,a)},o.prototype.start=function(){var t=this;this._running=!1,this._$element.addClass("placarSquadWidget").html(e),this._$element.hide(),this._fetcher.start().then(function(){t.setup(),t._viewUpdated=0,t._running=!0,t._doUpdate()},function(){t._$element.html(r)}),setTimeout(function(){t._$element.css("display","")},200)},o.prototype.stop=function(){this._running=!1},o.prototype.setup=function(){var t=this._fetcher.getCurrent().data,e={team:{logo:this._useCountryLogo?t["design_"+this._side+"_country_logo"]:t[this._side+"_team_logo"],name:t["name_"+this._side+"_team"],coach:t[this._side+"_coach"]||{}}};this._$element.html(i({it:e})),this._$starting=this._$element.find(".js-placar-squad-starting"),this._$bench=this._$element.find(".js-placar-squad-bench")},o.prototype._doUpdate=function(){this.update(),this._running&&(this._running=this._running&&!this.isFullTime(),window.requestAnimationFrame(this._doUpdate),this._running||this._fetcher.stop())},o.prototype.update=function(){var t=this._fetcher.getCurrent(),e=t.data;if(this._viewUpdated<t.updated){this._viewUpdated=t.updated;var n=e[this._side+"_starting_eleven"],i=e[this._side+"_bench"];if(!n)return;var r=[].concat(e[this._side+"_goal_scorers"]||[]).concat(e[this._side+"_own_goal_scorers"]||[]),a=h(e[this._side+"_cards"],"player_name"),o=h(e[this._side+"_players_out"],"player_name"),s=h(e[this._side+"_players_in"],"player_name");r=h(r,"player_name");var l=function(t){var e,n;return e=t.player_name,n=a[e],t.goals=r[e],t.playerOut=o[e],t.playerIn=s[e],t.yellow=n&&n.yellow_minutes,t.red=n&&n.red_minutes,t};n=u.map(n,function(t){return c({it:l(t)})}),i=u.map(i,function(t){return c({it:l(t)})}),this._$starting.html(n.join("")),this._$bench.html(i.join(""))}},o.prototype.isFullTime=function(){var t=this._fetcher.getCurrent().data;return t&&"1"===t.full_time},o}),define("placar/impl/match",["require","placar/fetcher/match","placar/widgets/scoreboard","placar/widgets/timeline","placar/widgets/squad"],function(t){var n=t("placar/fetcher/match"),i=t("placar/widgets/scoreboard"),r=t("placar/widgets/timeline"),a=t("placar/widgets/squad");function e(t,e){e=e||{},this._matchId=t,this._idMappings=e.idMappings||{},this._fecher=new n(t,{baseUrl:e.baseUrl})}return e.prototype.scoreboard=function(t,e){return(e=e||{}).fetcher=this._fecher,e.matchId=this._matchId,e.idMappings=e.idMappings||this._idMappings||{},i.start(t,e)},e.prototype.timeline=function(t,e){return(e=e||{}).fetcher=this._fecher,this._fecher.enableEvents(),r.start(t,e)},e.prototype.squad=function(t,e,n){return(n=n||{}).fetcher=this._fecher,n.side="away"===e?"away":"home",this._fecher.enableLineups(),this._fecher.enableEvents(),a.start(t,n)},e}),define("placar/fetcher/edition",["require","placar/fetcher/base","sys/polyfills"],function(t){var i=t("placar/fetcher/base");t("sys/polyfills");function e(t,e){e=e||{};var n="/rest/v2/EditionID/{editionID}".replace("{editionID}",t);i.call(this,n,e)}return(e.prototype=Object.create(i.prototype)).NAME="imp-placar-edition-fetcher",e.prototype._updateData=function(t){this._currentData=t.data;var e=parseInt(t.timestamp,10);this._updated=e&&1e3*e||+new Date},e}),define("placar/fetcher/squads",["require","placar/fetcher/base","sys/polyfills"],function(t){var i=t("placar/fetcher/base");t("sys/polyfills");function e(t,e){e=e||{};var n="/rest/v2/squads/EditionID/{editionID}".replace("{editionID}",t);i.call(this,n,e)}return(e.prototype=Object.create(i.prototype)).NAME="imp-placar-match-fetcher",e.prototype._updateData=function(t){this._currentData=t.data;var e=parseInt(t.timestamp,10);this._updated=e&&1e3*e||+new Date},e}),define("placar/tpl/matches/widget.js",["require"],function(t){return"<%= it.stages.join('\\n') %>"}),define("placar/tpl/matches/game.js",["require"],function(t){return'<li class="placarMatchDetails<% if (it.broadcasted) { %> broadcasted<% } %>">\n    <div class="placarMatchDetails--team placarTeamDetails--outer">\n        <div class="placarTeamDetails placarTeamDetails__small placarTeamDetails__rightLogo">\n            <div class="placarTeamDetails--logo"><img src="<%= it.homeTeam.logo %>" alt="<%= it.homeTeam.name %>"></div>\n            <div class="placarTeamDetails--name"><% if (it.homeTeam.url) { %><a href="<%= it.homeTeam.url %>"><% } %><%= it.homeTeam.name %><% if (it.homeTeam.url) { %></a><% } %></div>\n        </div>\n    </div>\n    <div class="placarMatchDetails--team placarMatchDetails--team__away placarTeamDetails--outer">\n        <div class="placarTeamDetails placarTeamDetails__small">\n            <div class="placarTeamDetails--logo"><img src="<%= it.awayTeam.logo %>" alt="<%= it.awayTeam.name %>"></div>\n            <div class="placarTeamDetails--name"><% if (it.awayTeam.url) { %><a href="<%= it.awayTeam.url %>"><% } %><%= it.awayTeam.name %><% if (it.awayTeam.url) { %></a><% } %></div>\n        </div>\n    </div>\n    <div class="placarMatchDetails--status">\n        <% if (it.finished) { %>\n        <div class="placarMatchGoals">\n            <div class="placarMatchGoals--entry placarMatchGoals--entry__home"><%= it.homeTeam.goals %></div>\n            <div class="placarMatchGoals--entry placarMatchGoals--entry__away"><%= it.awayTeam.goals %></div>\n        </div>\n        <% } else { %>\n        <% if (it.group !== \'\') { %>\n        <div class="placarMatchDetails--group"><%= it.group %></div>\n        <% } %>\n        <div class="placarMatchSchedule">\n            \x3c!--<span class="placarMatchSchedule&#45;&#45;day"><%= it.day %></span>--\x3e\n            <span class="placarMatchSchedule--time"><%= it.time %></span>\n        </div>\n        <% } %>\n    </div>\n</li>'}),define("placar/tpl/matches/stage.js",["require"],function(t){return'<div class="placarStage"><ul class="slider slider-nav"><% var i %><% for (i = 1; i <= it.matches.length; i++) { %><li><%= i %></li><% } %></ul><% if (it.name) { %><h2 class="placarStage--title placarLabel"><% if (it.url) { %><a href="<%= it.url %>"><% } %><span><%= it.name %></span><% if (it.url) { %></a>               <% } %></h2><% } %><div id="placarStage--entries" class="placarStage--entries" data-entries-count="<%= it.matches.length %>"><%= it.matches.join("\\n") %></div></div>'}),define("placar/tpl/matches/date.js",["require"],function(t){return'<div class="placarStageEntry">\n<h3 class="placarStageEntry--title"><%= it.date %></h3>\n<ul class="placarStageEntry--entries"><%= it.matches.join(\'\\n\') %></ul>\n</div>'}),define("placar/tpl/matches/day.js",["require"],function(t){return'<ul class="placarDayEntry placarDay--<%= it.day %>" id="placarDay--<%= it.day %>" ><h2 class="placarDayEntry--title placarLabel"><span>Jornada <%= it.day %></span></h2><%= it.dates.join(\'\\n\') %><ul class="placarDayEntry--entries slider-for"></ul></ul>'}),define("placar/widgets/matches",["require","lodash","placar/widgets/base","placar/tpl/matches/widget.js","placar/tpl/matches/game.js","placar/tpl/matches/stage.js","placar/tpl/matches/date.js","placar/tpl/matches/day.js","placar/tpl/loading.js","placar/tpl/error.js"],function(t){"use strict";var n=t("lodash"),l=t("placar/widgets/base"),r=t("placar/tpl/matches/widget.js"),i=t("placar/tpl/matches/game.js"),o=t("placar/tpl/matches/stage.js"),u=t("placar/tpl/matches/date.js"),a=t("placar/tpl/matches/day.js"),s=t("placar/tpl/loading.js"),c=t("placar/tpl/error.js"),h="imp-placar-matches";function d(t,e){l.call(this,h,t,e),e=e||{},this._idMappings=e.idMappings||{},this._stageId=e.stageId||!1,this._groupId=e.groupId||!1,this._beginDate=e.beginDate||!1,this._endDate=e.endDate||!1,this._showStageLabel=void 0===e.showStageLabel||e.showStageLabel,this._useCountryLogo=e.useCountryLogo||!1,this._groupMatchesBy=e.groupMatchesBy||"date",this._onUpdate=e.onUpdate}r=n.template(r),i=n.template(i),o=n.template(o),u=n.template(u),a=n.template(a),d.init=function(t,e){return l.init(t,h,d,e)},d.start=function(t,e){return l.start(t,h,d,e)},d.destroy=function(t){return l.destroy(t,h)},d.prototype.start=function(){var e=this;this._$element.addClass("placarMatchesWidget").html(s),this._$element.hide(),this._fetcher.start().then(function(){var t=e.update();return e._fetcher.stop(),t},function(){e._$element.html(c)}).then(function(t){"function"===typeof e._onUpdate&&e._onUpdate(t)}),setTimeout(function(){e._$element.css("display","")},200)},d.prototype.stop=function(){},d.prototype.update=function(){var i=this,t=this._fetcher.getCurrent().data;(new Date).setHours(0,0,0,0),this._stageId&&(t.stages=n.chain([].concat(t.stages||[])).filter(function(t){return t.id===i.id}).value()),(this._beginDate||this._endDate)&&(t.stages=n.chain([].concat(t.stages||[])).filter(function(t){if(t.matches=n.chain([].concat(t.matches||[])).filter(function(t){var e=l._parseDate(t.date_match),n=new Date(e.getFullYear(),e.getMonth(),e.getDate());return!(i._beginDate&&+i._beginDate>+n)&&!(i._endDate&&+i._endDate<+n)}).value(),!n.isEmpty(t.matches))return t}).value());var e={};return e.stages=n.chain([].concat(t.stages||[])).map(function(t){return i._renderStage(t)}).reverse().value(),this._$element.html(r({it:e})),{fetcherData:t}},d.prototype._renderStage=function(t){return{day:this._renderByDay(this,t),date:this._renderByDate(this,t)}[this._groupMatchesBy]},d.prototype._renderByDate=function(a,t){var e=n.chain(t.matches||[]).filter(function(t){return!a._groupId||t.id_group===a._groupId}).reduce(function(t,e){var n=l._parseDate(e.date_match),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),r=+i;return t[r]=t[r]||{date:l._getDate(i),matches:[]},t[r].matches.push(a._renderMatch(e)),t},{}).pairs().sort(function(t,e){return t[0]-e[0]}).map(function(t){return u({it:t[1]})}).value();return n.isEmpty(e)?void 0:o({it:{url:a._idMappings.stages&&a._idMappings.stages[t.id],name:this._showStageLabel&&t.name_fase,matches:e}})},d.prototype._renderByDay=function(s,t){var e=n.chain(t.matches||[]).filter(function(t){return!s._groupId||t.id_group===s._groupId}).reduce(function(t,e){var n=l._parseDate(e.date_match),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),r=+i,a=e.day;t[a]=t[a]||{day:a,matchesByDate:{}};var o=t[a].matchesByDate;return o[r]||(o[r]={date:l._getDate(i),matches:[]}),o[r].matches.push(s._renderMatch(e)),t},{}).pairs().sort(function(t,e){return t[0]-e[0]}).map(function(t){var e=t[1];for(var n in e.dates||(e.dates=[]),e.matchesByDate){var i=e.matchesByDate[n];e.dates.push(u({it:i}))}return a({it:t[1]})}).value();return n.isEmpty(e)?void 0:o({it:{url:s._idMappings.stages&&s._idMappings.stages[t.id],name:this._showStageLabel&&t.name_fase,matches:e}})},d.prototype._renderDate=function(t){return u({it:t})},d.prototype._renderMatch=function(t){var e={},n=l._parseDate(t.date_match);return e.homeTeam={logo:this._useCountryLogo?t.design_home_country_logo:t.home_team_logo,name:f(t.name_home_team),goals:t.home_goals,url:this._idMappings&&this._idMappings.teams&&this._idMappings.teams[t.id_home_team]},e.awayTeam={logo:this._useCountryLogo?t.design_away_country_logo:t.away_team_logo,name:f(t.name_away_team),goals:t.away_goals,url:this._idMappings&&this._idMappings.teams&&this._idMappings.teams[t.id_away_team]},e.group=t.name_group&&"Grupo "+t.name_group||null,e.finished="1"===t.finaltime,e.time=l._getTime(n)||"--",e.broadcasted=this._idMappings&&this._idMappings.broadcastedMatches&&this._idMappings.broadcastedMatches.includes(t.ID),i({it:e})};var p=/(\d+)GRP\.(\w+)/i;function f(t){var e=p.exec(t);if(!e)return t;var n=e[1]+" Grupo",i=e[2].split("");return n=i.length>1?n+"s "+i.join(", "):n+" "+i.pop()}return d}),define("placar/tpl/standings/widget.js",["require"],function(t){return"<%= it.stages.join('\\n') %>"}),define("placar/tpl/standings/stage.js",["require"],function(t){return'<div class="placarStage">\n<% if (it.name) { %>\n<h2 class="placarStage--title placarLabel">\n    <% if (it.url) { %><a href="<%= it.url %>"><% } %>\n    <span><%= it.name %></span>\n    <% if (it.url) { %></a><% } %>\n</h2>\n<% } %>\n<div class="placarStage--entries">\n    <%= it.standings.join("\\n") %>\n</div>\n</div>'}),define("placar/tpl/standings/table.js",["require"],function(t){return'<div>\n<a id="<%= it.id %>" class="anchor-target"></a>\n<table class="placarStandings">\n    <thead>\n        <tr>\n            <th class="placarStandings--header placarStandings--header__title">\n                <% if (it.url) { %><a href="<%= it.url %>"><% } %>\n                <%= it.title %>\n                <% if (it.url) { %></a><% } %>\n            </th>\n            <th class="placarStandings--header" title="Jogos">J</th>\n            <th class="placarStandings--header placarStandings--header__extra" title="Vitrias">V</th>\n            <th class="placarStandings--header placarStandings--header__extra" title="Empates">E</th>\n            <th class="placarStandings--header placarStandings--header__extra" title="Derrotas">D</th>\n            <th class="placarStandings--header placarStandings--header__extra" title="Golos Marcados">GM</th>\n            <th class="placarStandings--header placarStandings--header__extra" title="Golos Sofridos">GS</th>\n            <th class="placarStandings--header" title="Diferena de Golos">DG</th>\n            <th class="placarStandings--header" title="Pontos">Pts</th>\n        </tr>\n    </thead>\n    <tbody>\n        <%= it.standings.join("\\n") %>\n    </tbody>\n</table>\n</div>'}),define("placar/tpl/standings/entry.js",["require"],function(t){return'<tr>\n    <td class="placarStandings--entry placarStandings--entry__name"><% if (it.url) { %><a href="<%= it.url %>"><% } %><%= it.name %><% if (it.url) { %></a><% } %></td>\n    <td class="placarStandings--entry"><%= it.matches %></td>\n    <td class="placarStandings--entry placarStandings--entry__extra"><%= it.wins %></td>\n    <td class="placarStandings--entry placarStandings--entry__extra"><%= it.draws %></td>\n    <td class="placarStandings--entry placarStandings--entry__extra"><%= it.defeats %></td>\n    <td class="placarStandings--entry placarStandings--entry__extra"><%= it.goals_for %></td>\n    <td class="placarStandings--entry placarStandings--entry__extra"><%= it.goals_against %></td>\n    <td class="placarStandings--entry"><%= it.goals_difference %></td>\n    <td class="placarStandings--entry"><%= it.points %></td>\n</tr>'}),define("placar/widgets/standings",["require","lodash","placar/widgets/base","placar/tpl/standings/widget.js","placar/tpl/standings/stage.js","placar/tpl/standings/table.js","placar/tpl/standings/entry.js","placar/tpl/loading.js","placar/tpl/error.js"],function(t){"use strict";var o=t("lodash"),n=t("placar/widgets/base"),i=t("placar/tpl/standings/widget.js"),r=t("placar/tpl/standings/stage.js"),s=t("placar/tpl/standings/table.js"),l=t("placar/tpl/standings/entry.js"),e=t("placar/tpl/loading.js"),a=t("placar/tpl/error.js"),u="imp-placar-standings";function c(t,e){n.call(this,u,t,e),e=e||{},this._idMappings=e.idMappings||{},this._groupId=e.groupId||!1,this._showStageLabel=void 0===e.showStageLabel||e.showStageLabel,this._afterUpdateCB=e.afterUpdateCB||!1}return i=o.template(i),r=o.template(r),s=o.template(s),l=o.template(l),c.init=function(t,e){return n.init(t,u,c,e)},c.start=function(t,e){return n.start(t,u,c,e)},c.destroy=function(t){return n.destroy(t,u)},c.prototype.start=function(){var t=this;this._$element.addClass("placarStandingsWidget").html(e),this._$element.hide(),this._fetcher.start().then(function(){t.update(),t._fetcher.stop(),t._afterUpdateCB&&t._afterUpdateCB()},function(){t._$element.html(a)}),setTimeout(function(){t._$element.css("display","")},200)},c.prototype.stop=function(){},c.prototype.update=function(){var e=this,t=this._fetcher.getCurrent().data,n={};n.stages=o.chain([].concat(t.stages||[])).filter(function(t){return!e._groupId||"groups"===t.type}).map(function(t){return e._renderStage(t)}).filter(function(t){return!!t}).value(),this._$element.html(i({it:n}))},c.prototype._renderStage=function(t){var e,n=this;if((t.standings||t.groups)&&(t.groups||!this._groupId))return t.standings?e=[this._renderStandings(t.standings)]:t.groups&&(e=[].concat(t.groups||[]).filter(function(t){return!n._groupId||t.id===n._groupId}).map(function(t){if(t.standings)return n._renderStandings(t.standings,"grupo-"+t.name,"Grupo "+t.name,n._idMappings.groups&&n._idMappings.groups[t.id])}).filter(function(t){return!!t})),r({it:{url:n._idMappings.stages&&n._idMappings.stages[t.id],name:this._showStageLabel&&t.name_fase,standings:e}})},c.prototype._renderStandings=function(t,e,n,i){var r,a=this;return r=[].concat(t||[]).map(function(t){var e=o.extend({},t);return e.url=a._idMappings.teams&&a._idMappings.teams[t.teamid],e.name=e.team,e.wins=parseInt(e.wins,10)||0,e.draws=parseInt(e.draws,10)||0,e.defeats=parseInt(e.defeats,10)||0,e.matches=e.wins+e.draws+e.defeats,e.goals_for=parseInt(e.goals_for,10)||0,e.goals_against=parseInt(e.goals_against,10)||0,e.goals_difference=e.goals_for-e.goals_against,l({it:e})}),s({it:{id:e,url:i,title:n,standings:r}})},c}),define("placar/tpl/squads/widget.js",["require"],function(t){return"<table class='placarSquads'>\n    <thead>\n        <tr>\n            <th class='placarSquads--header placarSquads--header__number'></th>\n            <th class='placarSquads--header placarSquads--header__title'>Equipa</th>\n            <th class='placarSquads--header placarSquads--header__extra'>Idade</th>\n            \x3c!--<th class='placarSquads&#45;&#45;header placarSquads&#45;&#45;header__extra'>Posio</th>--\x3e\n            <th class='placarSquads--header placarSquads--header__extra'>Clube</th>\n            <td class='placarSquads--header placarSquads--header__matches' title='Jogos'>J</td>\n            <td class='placarSquads--header placarSquads--header__goals' title='Golos'>G</td>\n            <td class='placarSquads--header placarSquads--header__extra' title='Amarelos'>A</td>\n            <td class='placarSquads--header placarSquads--header__extra' title='Duplo Amarelo'>AA</td>\n            <td class='placarSquads--header placarSquads--header__extra' title='Vermelhos'>V</td>\n            <td class='placarSquads--header placarSquads--header__extra' title='Minutos'>M</td>\n        </tr>\n    </thead>\n    <tbody>\n        <%= it.squad.join('\\n') %>\n    </tbody>\n</table>"}),define("placar/tpl/squads/position.js",["require"],function(t){return"<tr>\n    <td colspan='10'><%= it.name %></td>\n    <%= it.entries.join('\\n') %>\n</tr>"}),define("placar/tpl/squads/entry.js",["require"],function(t){return'<tr>\n    <td class="placarSquads--entry placarSquads--entry__number"><%= it.player_number %></td>\n    <td class="placarSquads--entry placarSquads--entry__name"><%= it.player_name %></td>\n    <td class="placarSquads--entry placarSquads--entry__extra"><%= it.player_age %></td>\n    \x3c!--<td class="placarSquads&#45;&#45;entry placarSquads&#45;&#45;entry__extra"><%= it.player_position %></td>--\x3e\n    <td class="placarSquads--entry placarSquads--entry__extra"><%= it.club_name %></td>\n    <td class="placarSquads--entry placarSquads--entry__matches"><%= it.player_jogos %></td>\n    <td class="placarSquads--entry placarSquads--entry__goals"><%= it.player_golos %></td>\n    <td class="placarSquads--entry placarSquads--entry__extra"><%= it.player_amarelos %></td>\n    <td class="placarSquads--entry placarSquads--entry__extra"><%= it.player_duplo_amarelo %></td>\n    <td class="placarSquads--entry placarSquads--entry__extra"><%= it.player_vermelhos %></td>\n    <td class="placarSquads--entry placarSquads--entry__extra"><%= it.player_minutos %></td>\n</tr>'}),define("placar/widgets/squads",["require","lodash","placar/widgets/base","placar/tpl/squads/widget.js","placar/tpl/squads/position.js","placar/tpl/squads/entry.js","placar/tpl/loading.js","placar/tpl/error.js"],function(t){"use strict";var i=t("lodash"),n=t("placar/widgets/base"),r=t("placar/tpl/squads/widget.js"),a=t("placar/tpl/squads/position.js"),e=t("placar/tpl/squads/entry.js"),o=t("placar/tpl/loading.js"),s=t("placar/tpl/error.js"),l="imp-placar-squads";function u(t,e){if(n.call(this,l,t,e),!(e=e||{}).squadId)throw new Error("No squadId provided");this._squadId=""+e.squadId,this._idMappings=e.idMappings||{}}return r=i.template(r),a=i.template(a),e=i.template(e),u.init=function(t,e){return n.init(t,l,u,e)},u.start=function(t,e){return n.start(t,l,u,e)},u.destroy=function(t){return n.destroy(t,l)},u.prototype.start=function(){var t=this;this._$element.addClass("placarSquadsWidget").html(o),this._$element.hide(),this._fetcher.start().then(function(){t.update(),t._fetcher.stop()},function(){t._$element.html(s)}),setTimeout(function(){t._$element.css("display","")},200)},u.prototype.stop=function(){},u.prototype.update=function(){var e=this,t=this._fetcher.getCurrent().data,n={};n.squad=i.chain([].concat(t.SQUAD||[])).filter(function(t){return t.team_id===e._squadId}).reduce(function(t,e){if(!Array.isArray(t)){var n=t;((t=[])[n.player_position_id]=[]).push(n)}return t[e.player_position_id]=t[e.player_position_id]||[],t[e.player_position_id].push(e),t}).map(function(t){return e._renderPosition(t)}).filter(function(t){return!!t}).value(),this._$element.html(r({it:n}))},u.prototype._renderPosition=function(t){var e=this;if(t){var n={};return n.name=t[0].player_position,n.entries=i.chain([].concat(t||[])).map(function(t){return e._renderEntry(t)}).filter(function(t){return!!t}).value(),a({it:n})}},u.prototype._renderEntry=function(t){if(t)return e({it:t})},u}),define("placar/impl/edition",["require","placar/fetcher/edition","placar/fetcher/squads","placar/widgets/matches","placar/widgets/standings","placar/widgets/squads"],function(t){var n=t("placar/fetcher/edition"),i=t("placar/fetcher/squads"),r=t("placar/widgets/matches"),a=t("placar/widgets/standings"),o=t("placar/widgets/squads");function e(t,e){e=e||{},this._idMappings=e.idMappings||{},this._editionFetcher=new n(t,{baseUrl:e.baseUrl}),this._squadsFetcher=new i(t,{baseUrl:e.baseUrl}),this._groupMatchesBy=e.groupMatchesBy||"date",this._onUpdate=e.onUpdate}return e.prototype.matches=function(t,e){return(e=e||{}).fetcher=this._editionFetcher,e.idMappings=e.idMappings||this._idMappings||{},e.groupMatchesBy=this._groupMatchesBy,e.onUpdate=this._onUpdate,r.start(t,e)},e.prototype.standings=function(t,e){return(e=e||{}).fetcher=this._editionFetcher,e.idMappings=e.idMappings||this._idMappings||{},a.start(t,e)},e.prototype.squads=function(t,e){return(e=e||{}).fetcher=this._squadsFetcher,e.idMappings=e.idMappings||this._idMappings||{},o.start(t,e)},e}),define("placar",["require","module","placar/impl/match","placar/impl/edition"],function(t){var n,e=t("module"),i=t("placar/impl/match"),r=t("placar/impl/edition"),a="placar.min.css",o=(e&&e.uri||"").split("/").slice(0,-1).join("/"),s={matches:{},edition:{}};function l(t){var e;n||(e=function(t){if(""!==t.stylesheet&&!1!==t.stylesheet)return t.stylesheet||o+"/"+a}(t))&&((n=document.createElement("link")).setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(n))}return{forMatch:function(t,e){if(e=e||{},!t)throw new Error("Missing Match ID");return l(e),s.matches[t]=s.matches[t]||new i(t,e),s.matches[t]},forEdition:function(t,e){if(e=e||{},!t)throw new Error("Missing Edition ID");return l(e),s.edition[t]=s.edition[t]||new r(t,e),s.edition[t]},cleanup:function(){n&&(n.parentNode.removeChild(n),n=void 0)}}}),define("media",function(){});