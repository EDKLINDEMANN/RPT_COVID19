<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<!-- saved from url=(0093)http://www.portalestadistico.com/?pn=portalestadistico&pc=AAA00&idp=10001&idpl=100000&idioma= -->
<html xmlns="http://www.w3.org/1999/xhtml" class="fondo_tapizado"><head id="Head1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style class="vjs-styles-defaults">
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    </style>
    <script async="" src="./www.portalestadistico.com_files/analytics.js"></script><script src="./www.portalestadistico.com_files/d3.min.js"></script>
    <script src="./www.portalestadistico.com_files/format.min.js"></script>
    <script src="./www.portalestadistico.com_files/saveSvgAsPng.js"></script>

    <title>

</title>

<title></title>
    <script type="text/javascript" src="./www.portalestadistico.com_files/grafico_linea.js"></script>
    <script type="text/javascript" src="./www.portalestadistico.com_files/mapa.js"></script>
    <script type="text/javascript" src="./www.portalestadistico.com_files/codigopiramides.js"></script>

    <script src="./www.portalestadistico.com_files/jquery-3.3.1.min.js" type="text/javascript"></script>
    <script src="./www.portalestadistico.com_files/jquery-ui.min.js" type="text/javascript"></script>

    <link href="./www.portalestadistico.com_files/font_face.css" rel="stylesheet" type="text/css">
    <link href="./www.portalestadistico.com_files/plataforma_gestion_estadistica_24_5_2020.css" rel="stylesheet" type="text/css">
    
    <link rel="stylesheet" type="text/css" href="./www.portalestadistico.com_files/jquery.jui_dropdown.css">
    
    <script type="text/javascript" src="./www.portalestadistico.com_files/jquery.jui_dropdown.min.js"></script>
    
    <link href="./www.portalestadistico.com_files/jquery.modal.css" rel="stylesheet" type="text/css">
    <script src="./www.portalestadistico.com_files/jquery.modal.min.js" type="text/javascript"></script>
    
    
    
    
    
    <script type="text/javascript">
        $(function() {

            $('a[href="#ex1"]').click(function(event) {

                var $iframe = $('#iframe_datos');

                var Tipo_Ventana = this.id.split('&')[0];
                var Id_Territorio = this.id.split('&')[1];
                var Id_Celda_Fila_Plantilla = this.id.split('&')[2];
                var Id_Territorio_Padre = this.id.split('&')[3];

                if (Tipo_Ventana == 'DATOS') {
                    $iframe.attr('src', 'proceso_visualizacion_datos.aspx?pn=portalestadistico&pc=AAA00&idioma=&Id_Territorio=' + Id_Territorio + '&Id_Celda_Fila_Plantilla=' + Id_Celda_Fila_Plantilla + '&Id_Territorio_Padre=' + Id_Territorio_Padre);
                }
                else if (Tipo_Ventana == 'enlace_aviso_legal') {
                    $iframe.attr('src', 'info_terminos_condiciones.htm');
                }
                else if (Tipo_Ventana == 'enlace_politica_cookies') {
                    $iframe.attr('src', 'info_politica_cookies.htm');
                }

                event.preventDefault();
                $(this).modal({
                //fadeDuration: 1000,
                //fadeDelay: 0.50
            });
        });

        $(".box").hover(function() {
            $(this).find(".overlay").fadeIn(150);
        }
            , function() {
                $(this).find(".overlay").fadeOut(150);
            }
           );
        });
        
    </script>
    
    <!-- css -->
    <link rel="stylesheet" href="./www.portalestadistico.com_files/style.css">
    
    <!-- js -->
    <script src="./www.portalestadistico.com_files/classie.js"></script>
    <script>
        function init() {
            window.addEventListener('scroll', function(e) {
                var distanceY = window.pageYOffset || document.documentElement.scrollTop,
                    shrinkOn = 80,
                    header = document.querySelector("header");
                if (distanceY > shrinkOn) {
                    classie.add(header, "smaller");
                    classie.add(section, "smaller");
                } else {
                    if (classie.has(header, "smaller")) {
                        classie.remove(header, "smaller");
                    }
                }
            });
        }
        window.onload = init();
    </script>
    
    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-45918278-1', 'auto');ga('send', 'pageview');</script>
    
    
    
    
    
    
    <script type="text/javascript">
        function OnNombreTerritorioSelected(source, eventArgs) {
            var hdnValueID = "hdnValue_Territorio";
            document.getElementById(hdnValueID).value = eventArgs.get_value();
            
            document.getElementById('Button1').click();
        }
    </script>
    
    <script type="text/javascript">
        function App_Context_Key(source, e) {
            source.set_contextKey($get("TextBox_Context_key").value);
        }
    </script>
    
    
    
    
    

    
    
    

    <script>

        function descargarSVG(visualizacion_svg, pObjeto_descarga) {
            
            //////get svg element.
            //var svg = document.getElementById("svg");

            //////get svg source.
            //var serializer = new XMLSerializer();
            //var source = serializer.serializeToString(visualizacion_svg);
            
            //////add name spaces.
            //if(!source.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)){
            //    source = source.replace(/^<svg/, '<svg xmlns="http://www.w3.org/2000/svg"');
            //}
            //if(!source.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/)){
            //    source = source.replace(/^<svg/, '<svg xmlns:xlink="http://www.w3.org/1999/xlink"');
            //}
            
            ////add xml declaration
            //source = '<?xml version="1.0" standalone="no"?>\r\n' + source;

            ////convert svg source to URI data scheme.
            //var url = "data:image/svg+xml;charset=utf-8," + encodeURIComponent(source);

            ////return source;

            //document.getElementById(pObjeto_descarga).href = url;
            document.getElementById(pObjeto_descarga).href = 'hoooola';
            alert(pObjeto_descarga);
        }

        // Downloads an SVG on the webpage, accessed by its class name
        // @param {String} svgClassName -- name of the SVG class (e.g. "amazingSVG")
        function downloadSVG(svgClassName) {
            var doctype = '<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';

              window.URL = (window.URL || window.webkitURL);

              var body = document.body;

              var prefix = {
                xmlns: "http://www.w3.org/2000/xmlns/",
                xlink: "http://www.w3.org/1999/xlink",
                svg: "http://www.w3.org/2000/svg"
              }

              initialize();

              function initialize() {
                var documents = [window.document],
                    SVGSources = [];
                    iframes = document.querySelectorAll("iframe"),
                    objects = document.querySelectorAll("object");

                [].forEach.call(iframes, function(el) {
                  try {
                    if (el.contentDocument) {
                      documents.push(el.contentDocument);
                    }
                  } catch(err) {
                    console.log(err)
                  }
                });

                [].forEach.call(objects, function(el) {
                  try {
                    if (el.contentDocument) {
                      documents.push(el.contentDocument);
                    }
                  } catch(err) {
                    console.log(err)
                  }
                });

                documents.forEach(function(doc) {
                  var styles = getStyles(doc);
                  var newSources = getSources(doc, styles);
                  // because of prototype on NYT pages
                  for (var i = 0; i < newSources.length; i++) {
                    SVGSources.push(newSources[i]);
                  };
                })
                if (SVGSources.length > 1) {
                  createPopover(SVGSources);
                } else if (SVGSources.length > 0) {
                  download(SVGSources[0]);
                } else {
                  alert("The Crowbar couldnâ€™t find any SVG nodes.");
                }
              }

              function createPopover(sources) {
                cleanup();

                sources.forEach(function(s1) {
                  sources.forEach(function(s2) {
                    if (s1 !== s2) {
                      if ((Math.abs(s1.top - s2.top) < 38) && (Math.abs(s1.left - s2.left) < 38)) {
                        s2.top += 38;
                        s2.left += 38;
                      }
                    }
                  })
                });

                var buttonsContainer = document.createElement("div");
                body.appendChild(buttonsContainer);

                buttonsContainer.setAttribute("class", "svg-crowbar");
                buttonsContainer.style["z-index"] = 1e7;
                buttonsContainer.style["position"] = "absolute";
                buttonsContainer.style["top"] = 0;
                buttonsContainer.style["left"] = 0;



                var background = document.createElement("div");
                body.appendChild(background);

                background.setAttribute("class", "svg-crowbar");
                background.style["background"] = "rgba(255, 255, 255, 0.7)";
                background.style["position"] = "fixed";
                background.style["left"] = 0;
                background.style["top"] = 0;
                background.style["width"] = "100%";
                background.style["height"] = "100%";

                sources.forEach(function(d, i) {
                  var buttonWrapper = document.createElement("div");
                  buttonsContainer.appendChild(buttonWrapper);
                  buttonWrapper.setAttribute("class", "svg-crowbar");
                  buttonWrapper.style["position"] = "absolute";
                  buttonWrapper.style["top"] = (d.top + document.body.scrollTop) + "px";
                  buttonWrapper.style["left"] = (document.body.scrollLeft + d.left) + "px";
                  buttonWrapper.style["padding"] = "4px";
                  buttonWrapper.style["border-radius"] = "3px";
                  buttonWrapper.style["color"] = "white";
                  buttonWrapper.style["text-align"] = "center";
                  buttonWrapper.style["font-family"] = "'Helvetica Neue'";
                  buttonWrapper.style["background"] = "rgba(0, 0, 0, 0.8)";
                  buttonWrapper.style["box-shadow"] = "0px 4px 18px rgba(0, 0, 0, 0.4)";
                  buttonWrapper.style["cursor"] = "move";
                  buttonWrapper.textContent =  "SVG #" + i + ": " + (d.id ? "#" + d.id : "") + (d.class ? "." + d.class : "");

                  var button = document.createElement("button");
                  buttonWrapper.appendChild(button);
                  button.setAttribute("data-source-id", i)
                  button.style["width"] = "150px";
                  button.style["font-size"] = "12px";
                  button.style["line-height"] = "1.4em";
                  button.style["margin"] = "5px 0 0 0";
                  button.textContent = "Download";

                  button.onclick = function(el) {
                    // console.log(el, d, i, sources)
                    download(d);
                  };

                });

              }

              function cleanup() {
                var crowbarElements = document.querySelectorAll(".svg-crowbar");

                [].forEach.call(crowbarElements, function(el) {
                  el.parentNode.removeChild(el);
                });
              }


              function getSources(doc, styles) {
                var svgInfo = [],
                    svg = doc.querySelector("." + svgClassName);

                styles = (styles === undefined) ? "" : styles;


                svg.setAttribute("version", "1.1");

                var defsEl = document.createElement("defs");
                svg.insertBefore(defsEl, svg.firstChild); //TODO   .insert("defs", ":first-child")
                // defsEl.setAttribute("class", "svg-crowbar");

                var styleEl = document.createElement("style")
                defsEl.appendChild(styleEl);
                styleEl.setAttribute("type", "text/css");


                // removing attributes so they aren't doubled up
                svg.removeAttribute("xmlns");
                svg.removeAttribute("xlink");

                // These are needed for the svg
                if (!svg.hasAttributeNS(prefix.xmlns, "xmlns")) {
                  svg.setAttributeNS(prefix.xmlns, "xmlns", prefix.svg);
                }

                if (!svg.hasAttributeNS(prefix.xmlns, "xmlns:xlink")) {
                  svg.setAttributeNS(prefix.xmlns, "xmlns:xlink", prefix.xlink);
                }

                var source = (new XMLSerializer()).serializeToString(svg).replace('</style>', '<![CDATA[' + styles + ']]></style>');
                var rect = svg.getBoundingClientRect();
                svgInfo.push({
                  top: rect.top,
                  left: rect.left,
                  width: rect.width,
                  height: rect.height,
                  class: svg.getAttribute("class"),
                  id: svg.getAttribute("id"),
                  childElementCount: svg.childElementCount,
                  source: [doctype + source]
                });

                return svgInfo;
              }

              function download(source) {
                var filename = "untitled";

                if (source.id) {
                  filename = source.id;
                } else if (source.class) {
                  filename = source.class;
                } else if (window.document.title) {
                  filename = window.document.title.replace(/[^a-z0-9]/gi, '-').toLowerCase();
                }

                var url = window.URL.createObjectURL(new Blob(source.source, { "type" : "text\/xml" }));

                var a = document.createElement("a");
                body.appendChild(a);
                a.setAttribute("class", "svg-crowbar");
                a.setAttribute("download", filename + ".svg");
                a.setAttribute("href", url);
                a.style["display"] = "none";
                a.click();

                setTimeout(function() {
                  window.URL.revokeObjectURL(url);
                }, 10);
              }

              function getStyles(doc) {
                var styles = "",
                    styleSheets = doc.styleSheets;

                if (styleSheets) {
                  for (var i = 0; i < styleSheets.length; i++) {
                    processStyleSheet(styleSheets[i]);
                  }
                }

                function processStyleSheet(ss) {
                  if (ss.cssRules) {
                    for (var i = 0; i < ss.cssRules.length; i++) {
                      var rule = ss.cssRules[i];
                      if (rule.type === 3) {
                        // Import Rule
                        processStyleSheet(rule.styleSheet);
                      } else {
                        // hack for illustrator crashing on descendent selectors
                        if (rule.selectorText) {
                          if (rule.selectorText.indexOf(">") === -1) {
                            styles += "\n" + rule.cssText;
                          }
                        }
                      }
                    }
                  }
                }
                return styles;
              }
        }

        function downloadSVG3(visualizacion_svg) {

            //var canvas = document.getElementById("my-canvas"), ctx = canvas.getContext("2d");
            var canvas = document.getElementById(visualizacion_svg), ctx = canvas.getContext("2d");
            // draw to canvas...
            canvas.toBlob(function(blob) {
                saveAs(blob, "pretty image.svg");
            });
        }

        d3.select("#download").on("click", function(){
          d3.select(this)
            .attr("href", 'data:application/octet-stream;base64,' + btoa(d3.select("#line").html()))
            .attr("download", "viz.svg") 
        })

    </script>

    
    
    

    <noscript>
        <!-- ¡Su navegador no soporta Javascript, la experiencia de navegación podría no ser óptima -->
    </noscript>

    

</head>
<body style="">
<form name="form1" method="post" action="http://www.portalestadistico.com/default.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=" id="form1">
<div>
<input type="hidden" name="ToolkitScriptManager1_HiddenField" id="ToolkitScriptManager1_HiddenField" value="">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="">
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE2Mjk3OTYxMTUPZBYCAgMPZBYWAgMPFgIeBFRleHQFYjxpbWcgaWQ9ImxvZ290aXBvX2dyYW5kZSIgYWx0PSJsb2dvdGlwbyIgc3JjPSJwbGFudGlsbGFzL2xvZ29fcG9ydGFsZXN0YWRpc3RpY28ucG5nIiBib3JkZXI9IjAiIC8+ZAIFDxYCHwAFazxpbWcgaWQ9ImxvZ290aXBvX3BlcXVlbm8iIGFsdD0ibG9nb3RpcG8iIHNyYz0icGxhbnRpbGxhcy9sb2dvX3BlcXVlbm9fcG9ydGFsZXN0YWRpc3RpY28ucG5nIiBib3JkZXI9IjAiIC8+ZAIHDxYCHwAFEkVsIE11bmRvIGVuIENpZnJhc2QCCQ8WAh8ABdINPHVsIGNsYXNzPSJMaXN0YWRvX21lbnUiPg0KPGxpIGNsYXNzPSJpdGVtTGlzdGFkbyBhY3RpdmVQYWdlIj4NCjxwIGNsYXNzPSJuYXZlZ2FjaW9uIj4NCjxhIGNsYXNzPSJlbmxhY2VfcGVzdGFuYXNfbWVudV9jYWJlY2VyYSIgaHJlZj0iaHR0cDovL3d3dy5wb3J0YWxlc3RhZGlzdGljby5jb20vP3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJmlkcD01NSZpZHBsPTEwMDAzMCZpZGlvbWE9Ij5Db3ZpZC0xOTwvYT48L3A+DQo8L2xpPg0KPGxpIGNsYXNzPSJpdGVtTGlzdGFkbyBhY3RpdmVQYWdlIj4NCjxwIGNsYXNzPSJuYXZlZ2FjaW9uIj4NCjxhIGNsYXNzPSJlbmxhY2VfcGVzdGFuYXNfbWVudV9jYWJlY2VyYSIgaHJlZj0iaHR0cDovL3d3dy5wb3J0YWxlc3RhZGlzdGljby5jb20vP3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJmlkcD01NyZpZHBsPTEzNDgmaWRpb21hPSI+Q292aWQtMTkgQ0NBQTwvYT48L3A+DQo8L2xpPg0KPGxpIGNsYXNzPSJpdGVtTGlzdGFkbyBhY3RpdmVQYWdlIj4NCjxwIGNsYXNzPSJuYXZlZ2FjaW9uQWN0aXZhIj4NCkVzcGHDsWE8L3A+DQo8L2xpPg0KPGxpIGNsYXNzPSJpdGVtTGlzdGFkbyBhY3RpdmVQYWdlIj4NCjxwIGNsYXNzPSJuYXZlZ2FjaW9uIj4NCjxhIGNsYXNzPSJlbmxhY2VfcGVzdGFuYXNfbWVudV9jYWJlY2VyYSIgaHJlZj0iaHR0cDovL3d3dy5wb3J0YWxlc3RhZGlzdGljby5jb20vP3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJmlkcD0xMDAwMiZpZHBsPTEwMDAwMiZpZGlvbWE9Ij5DQ0FBPC9hPjwvcD4NCjwvbGk+DQo8bGkgY2xhc3M9Iml0ZW1MaXN0YWRvIGFjdGl2ZVBhZ2UiPg0KPHAgY2xhc3M9Im5hdmVnYWNpb24iPg0KPGEgY2xhc3M9ImVubGFjZV9wZXN0YW5hc19tZW51X2NhYmVjZXJhIiBocmVmPSJodHRwOi8vd3d3LnBvcnRhbGVzdGFkaXN0aWNvLmNvbS8/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmaWRwPTEwMDAzJmlkcGw9MTAwMDA0JmlkaW9tYT0iPlByb3ZpbmNpYXM8L2E+PC9wPg0KPC9saT4NCjxsaSBjbGFzcz0iaXRlbUxpc3RhZG8gYWN0aXZlUGFnZSI+DQo8cCBjbGFzcz0ibmF2ZWdhY2lvbiI+DQo8YSBjbGFzcz0iZW5sYWNlX3Blc3RhbmFzX21lbnVfY2FiZWNlcmEiIGhyZWY9Imh0dHA6Ly93d3cucG9ydGFsZXN0YWRpc3RpY28uY29tLz9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MzAmaWRwbD0xMDAwMDYmaWRpb21hPSI+TXVuaWNpcGlvczwvYT48L3A+DQo8L2xpPg0KPGxpIGNsYXNzPSJpdGVtTGlzdGFkbyBhY3RpdmVQYWdlIj4NCjxwIGNsYXNzPSJuYXZlZ2FjaW9uIj4NCjxhIGNsYXNzPSJlbmxhY2VfcGVzdGFuYXNfbWVudV9jYWJlY2VyYSIgaHJlZj0iaHR0cDovL3d3dy5wb3J0YWxlc3RhZGlzdGljby5jb20vbmF2ZWdhZG9yLmFzcHg/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmaWRwPTkwMDAwMiZpZHBsPTkwMDAwMDImaWRpb21hPSI+SW5mb3JtZXM8L2E+PC9wPg0KPC9saT4NCjxsaSBjbGFzcz0iaXRlbUxpc3RhZG8gYWN0aXZlUGFnZSI+DQo8cCBjbGFzcz0ibmF2ZWdhY2lvbiI+DQo8YSBjbGFzcz0iZW5sYWNlX3Blc3RhbmFzX21lbnVfY2FiZWNlcmEiIGhyZWY9Imh0dHA6Ly93d3cucG9ydGFsZXN0YWRpc3RpY28uY29tL290cmFzcGFnaW5hcy5hc3B4P3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJmlkcD05MDAwMDQmaWRwbD05MDAwMDA0JmlkaW9tYT0iPlJlZCBNdUNpPC9hPjwvcD4NCjwvbGk+DQo8L3VsPg0KZAILDxYCHwAF5hU8ZGl2IGlkPSJjYWphX2ludGVyaW9yX2luZGljZV9jYXRlZ29yaWFzIiBjbGFzcz0iYm94IGJveF9yb2RlYWRvIj48cCBjbGFzcz0idGV4dG9faW1wb3J0YW50ZV9zaW5tYXJnZW4gYmxvcXVlX2FjdGl2byI+PGltZyBpZD0iaWNvbm9faW5kaWNlX2NhdGVnb3JpYXMiIGNsYXNzPSJhbGluZWFkb192ZXJ0aWNhbCIgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX2luZGljZV9jYXRlZ29yaWFzLnBuZyIgYWx0PSIiIHRpdGxlPSIiID48c3BhbiBpZD0idGV4dG9faW5kaWNlIiBjbGFzcz0iYWxpbmVhZG9fdmVydGljYWwiPkRlbW9ncmFmw61hPC9zcGFuPjwvcD48ZGl2IGlkPSJjYXBhX2xpc3RhZG9faW5kaWNlIiBjbGFzcz0ib3ZlcmxheSBtZW51X2xpc3RhZG9faW5kaWNlIHJlcHJlc2VudGFjaW9uX3Zpc3VhbGl6YWNpb24gc29tYnJhX3BlcmltZXRyYWwiID48aDQ+U2VsZWNjaW9uZSB1biBpbmRpY2Fkb3IgbyB1bmEgbnVldmEgY2F0ZWdvcsOtYTo8L2g0Pjx1bCBpZD0iaW5kaWNlX2xpc3RhZG9fcHJpbmNpcGFsIj48bGkgaWQ9ImVsZW1lbnRvXzEwMDAwMCIgY2xhc3M9Imxpc3RhZG9faW5kaWNlX3ByaW5jaXBhbCI+RGVtb2dyYWbDrWE8L2xpPjxhIGhyZWY9IiNJbmRpY2VfTml2ZWxfMV8yNzA2Ij48bGkgaWQ9ImVsZW1lbnRvXzI3MDYiIGNsYXNzPSJsaXN0YWRvX2luZGljZV9tdWx0aXBsZV9uaXZlbDEiPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwO1BvYmxhY2nDs24gdG90YWw8L2xpPjwvYT48YSBocmVmPSIjSW5kaWNlX05pdmVsXzFfMjcyMiI+PGxpIGlkPSJlbGVtZW50b18yNzIyIiBjbGFzcz0ibGlzdGFkb19pbmRpY2VfbXVsdGlwbGVfbml2ZWwxIj4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDtQb3JjZW50YWplIGRlIHBvYmxhY2nDs24gZXh0cmFuamVyYTwvbGk+PC9hPjxhIGhyZWY9IiNJbmRpY2VfTml2ZWxfMV8yNzI0Ij48bGkgaWQ9ImVsZW1lbnRvXzI3MjQiIGNsYXNzPSJsaXN0YWRvX2luZGljZV9tdWx0aXBsZV9uaXZlbDEiPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwO1BvcmNlbnRhamUgZGUgcG9ibGFjacOzbiBkZSA2NSB5IG3DoXMgYcOxb3M8L2xpPjwvYT48YSBocmVmPSIjSW5kaWNlX05pdmVsXzFfMjcyNiI+PGxpIGlkPSJlbGVtZW50b18yNzI2IiBjbGFzcz0ibGlzdGFkb19pbmRpY2VfbXVsdGlwbGVfbml2ZWwxIj4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDtQb3JjZW50YWplIGRlIHBvYmxhY2nDs24gZGUgbWVub3MgZGUgMTYgYcOxb3M8L2xpPjwvYT48YSBocmVmPSIjSW5kaWNlX05pdmVsXzFfMjcyOCI+PGxpIGlkPSJlbGVtZW50b18yNzI4IiBjbGFzcz0ibGlzdGFkb19pbmRpY2VfbXVsdGlwbGVfbml2ZWwxIj4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDtFZGFkIG1lZGlhPC9saT48L2E+PGEgaHJlZj0iI0luZGljZV9OaXZlbF8xXzI3MzAiPjxsaSBpZD0iZWxlbWVudG9fMjczMCIgY2xhc3M9Imxpc3RhZG9faW5kaWNlX211bHRpcGxlX25pdmVsMSI+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7VGFzYSBkZSBuYXRhbGlkYWQgKHBvciBtaWwgaGFiaXRhbnRlcyk8L2xpPjwvYT48YSBocmVmPSIjSW5kaWNlX05pdmVsXzFfMjczMiI+PGxpIGlkPSJlbGVtZW50b18yNzMyIiBjbGFzcz0ibGlzdGFkb19pbmRpY2VfbXVsdGlwbGVfbml2ZWwxIj4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDtDcmVjaW1pZW50byBuYXR1cmFsIGRlIGxhIHBvYmxhY2nDs248L2xpPjwvYT48YSBocmVmPSIjSW5kaWNlX05pdmVsXzFfNjM3NiI+PGxpIGlkPSJlbGVtZW50b182Mzc2IiBjbGFzcz0ibGlzdGFkb19pbmRpY2VfbXVsdGlwbGVfbml2ZWwxIj4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDtOw7ptZXJvIGRlIGRlZnVuY2lvbmVzPC9saT48L2E+PGEgaHJlZj0iI0luZGljZV9OaXZlbF8xXzM5NjIiPjxsaSBpZD0iZWxlbWVudG9fMzk2MiIgY2xhc3M9Imxpc3RhZG9faW5kaWNlX211bHRpcGxlX25pdmVsMSI+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7VmFyaWFjacOzbiBkZSBsYSBwb2JsYWNpw7NuIHJlc3BlY3RvIGFsIGHDsW8gMjAwMDwvbGk+PC9hPjxhIGhyZWY9Ij9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmaWRpb21hPSZpZHBsPTEwMDAwMSZJZF9UZXJyaXRvcmlvPTAwIj48bGkgaWQ9ImVsZW1lbnRvXzEwMDAwMSIgY2xhc3M9Imxpc3RhZG9faW5kaWNlX3ByaW5jaXBhbF9jYXRlZ29yaWFzIj5NZXJjYWRvIGRlIFRyYWJham88L2xpPjwvYT48YSBocmVmPSI/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmaWRwPTEwMDAxJmlkaW9tYT0maWRwbD0xMDAwMTcmSWRfVGVycml0b3Jpbz0wMCI+PGxpIGlkPSJlbGVtZW50b18xMDAwMTciIGNsYXNzPSJsaXN0YWRvX2luZGljZV9wcmluY2lwYWxfY2F0ZWdvcmlhcyI+Q29uZGNpb25lcyBkZSB2aWRhPC9saT48L2E+PGEgaHJlZj0iP3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJmlkcD0xMDAwMSZpZGlvbWE9JmlkcGw9MTAwMDE4JklkX1RlcnJpdG9yaW89MDAiPjxsaSBpZD0iZWxlbWVudG9fMTAwMDE4IiBjbGFzcz0ibGlzdGFkb19pbmRpY2VfcHJpbmNpcGFsX2NhdGVnb3JpYXMiPkFjdGl2aWRhZCBwcm9kdWN0aXZhPC9saT48L2E+PGEgaHJlZj0iP3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJmlkcD0xMDAwMSZpZGlvbWE9JmlkcGw9MTAwMDE5JklkX1RlcnJpdG9yaW89MDAiPjxsaSBpZD0iZWxlbWVudG9fMTAwMDE5IiBjbGFzcz0ibGlzdGFkb19pbmRpY2VfcHJpbmNpcGFsX2NhdGVnb3JpYXMiPlJlY2F1ZGFjacOzbiB0cmlidXRhcmlhPC9saT48L2E+PC91bD48L2Rpdj48L2Rpdj5kAg0PDxYCHgdWaXNpYmxlaGRkAg8PZBYCZg9kFgICAQ8WAh8BaBYKAgEPFgIfAWhkAgMPFgIfAWhkAgUPDxYCHwFoZGQCCQ8PFgIfAWhkZAILDxYCHwFoZAIRDxYCHwFoFgQCAQ8WBB8ABRhUZXJyaXRvcmlvIHNlbGVjY2lvbmFkbzofAWhkAgMPEA8WAh8BaGRkFgBkAhMPFgIfAAXTCDxkaXYgaWQ9ImNhamFfaW50ZXJpb3JfbWFzX2luZm9ybWFjaW9uIiBjbGFzcz0iYm94IGJveF9yb2RlYWRvIj48cCBjbGFzcz0idGV4dG9faW1wb3J0YW50ZV9zaW5tYXJnZW4gYmxvcXVlX2FjdGl2byI+PGltZyBpZD0iaWNvbm9fbWFzX2luZm9ybWFjaW9uIiBjbGFzcz0iYWxpbmVhZG9fdmVydGljYWwiIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19tYXNfaW5mby5wbmciIGFsdD0iIiB0aXRsZT0iIiA+PC9wPjxkaXYgaWQ9ImNhcGFfY29udGVuaWRvX21hc19pbmZvcm1hY2lvbiIgY2xhc3M9Im92ZXJsYXkgbWFzX2luZm9ybWFjaW9uX2dyYW5kZSByZXByZXNlbnRhY2lvbl92aXN1YWxpemFjaW9uIHNvbWJyYV9wZXJpbWV0cmFsIiA+PGg0Pk3DoXMgSW5mb3JtYWNpw7NuOjwvaDQ+PHAgaWQ9InRleHRvX2NvbnRlbmlkb19tYXNfaW5mb3JtYWNpb24iPkVzdGEgc29sdWNpw7NuIGludGVncmEgZGlmZXJlbnRlcyBkYXRvcyBlc3RhZMOtc3RpY29zIGFjdHVhbGl6YWRvcyBwYXJhIDxiPmNvbm9jZXIgbGFzIGNpZnJhcyBiw6FzaWNhcyBkZSBsb3MgIHRlcnJpdG9yaW9zIGVzcGHDsW9sZXMsIGNvbiBkaWZ1c2nDs24gdmlzdWFsIGUgaW50ZXJhY3RpdmE8L2I+LiBFc3TDoW4gZGlzcG9uaWJsZXMgdGFudG8gdGFibGFzIHkgbsO6bWVyb3MsIGNvbW8gZ3LDoWZpY29zLCBtYXBhcyB5IHBpcsOhbWlkZXMgZGUgcG9ibGFjacOzbiwgcGFyYSB1bmEgY29tcHJlbnNpw7NuIGlubWVkaWF0YSBkZWwgdGVycml0b3Jpby48YnI+PGJyPlRvZGEgPGI+bGEgaW5mb3JtYWNpw7NuIGVzIHJldXRpbGl6YWJsZTwvYj4geSBsb3MgZ3LDoWZpY29zIHkgbWFwYXMgcHVlZGVuIGRlc2NhcmdhcnNlIGEgZm9ybWF0b3MgZ3LDoWZpY29zIHkgdmVjdG9yaWFsZXM7IGxvcyBkYXRvcyBxdWUgY29uZm9ybWFuIGxvcyBtYXBhcyB5IGdyw6FmaWNvcyBzZSBwdWVkZW4gdmlzdWFsaXphciBlbiBtb2RvIHRhYmxhIHkgZGVzY2FyZ2FyIGEgZm9ybWF0byB4bHMgeSBjc3YuPGJyPjxicj5Ub2RvcyA8Yj5sb3MgZGF0b3MgcHJvdmllbmVuIGRlIGZ1ZW50ZXMgb2ZpY2lhbGVzIHkgc2UgYWN0dWFsaXphbiBjb250w61udWFtZW50ZTwvYj4uPC9wPjwvZGl2PjwvZGl2PmQCFQ8WAh8ABcn8Dzx0YWJsZSBjbGFzcz0iVGFibGFfQ29udGVuZWRvcmFfUGFnaW5hIHNvbWJyYV9sYXRlcmFsIiBib3JkZXI9IjAiPjx0ciBjbGFzcz0iYW5jbGEiPjx0ZD48YSBpZD0iSW5kaWNlX05pdmVsXzBfMjcwMyIgY2xhc3M9ImFuY2hvciI+PC9hPjwvdGQ+PC90cj48dGggY29sc3Bhbj0iMiIgY2xhc3M9IlRpdHVsb19GaWxhIiA+PGgyPjEuIERlbW9ncmFmw61hPC9oMj48L3RoPjx0ciBjbGFzcz0iYW5jbGEiPjx0ZD48YSBpZD0iSW5kaWNlX05pdmVsXzFfMjcwNiIgY2xhc3M9ImFuY2hvciI+PC9hPjwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPSJjZWxkYV9zaW5fZXN0aWxvcyIgY29sc3Bhbj0iMiI+PGRpdiBjbGFzcz0iY2xhc2VfY2FwYV91bmlkYWRfdmlzdWFsaXphY2lvbiIgc3R5bGU9Im1pbi1oZWlnaHQ6IDE0MHB4OyI+PHRhYmxlIGNsYXNzPSJUYWJsYXNfZGF0b3MiPjx0ciBjbGFzcz0iVGFibGFzX2RhdG9zX2NhYmVjZXJhIj48dGQgY2xhc3M9ImNvbHVtbmFfaXpxdWllcmRhIj48aDQgY2xhc3M9Img0X2dyYW5kZSI+UG9ibGFjacOzbiB0b3RhbDwvaDQ+PC90ZD48dGQgY2xhc3M9ImNvbHVtbmFfZGVyZWNoYSI+PGg0IGNsYXNzPSJoNF9tdXlfZ3JhbmRlIG5lZ2F0aXZvc19pZSI+NDcuMDI2LjIwOCBwZXJzb25hczwvaDQ+PC90ZD48L3RyPjx0cj48dGQgY29sc3Bhbj0iMiI+PHRhYmxlIGNsYXNzPSJTdWJ0aXR1bG9faW5kaWNhZG9yIj48dHI+PHRkIGNsYXNzPSJjb2x1bW5hX2VzdHJlY2hhIj5QZXJpb2RvOjwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2FuY2hhIG5lZ3JpdGEiPkFudWFsJm5ic3A7MjAxOTwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2l6cXVpZXJkYSBjb2x1bW5hX2VzdHJlY2hhIj5DcmVjaW1pZW50byBpbnRlcmFudWFsOjwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2NlbnRybyB0ZXh0b19tdXlfZ3JhbmRlIG5lZ2F0aXZvc19pZSI+MCw2JTwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2RlcmVjaGEiPjxpbWcgY2xhc3M9ImltYWdlbl90ZW5kZW5jaWEiIHNyYz0iaHR0cDovL3d3dy5wb3J0YWxlc3RhZGlzdGljby5jb20vaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9jcmVjaW1pZW50b19hcnJpYmEucG5nIiBhbHQ9IkVzdGFiaWxpZGFkIj48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY29sdW1uYV9lc3RyZWNoYSI+RnVlbnRlOjwvdGQ+PHRkIGNvbHNwYW49IjQiIGNsYXNzPSJuZWdyaXRhIj5JTkUsIFJldmlzacOzbiBkZWwgUGFkcsOzbiBNdW5pY2lwYWwuPC90ZD48L3RyPjwvdGFibGU+PC90ZD48L3RyPjx0cj48dGQgY29sc3Bhbj0iMiI+PHAgY2xhc3M9InRleHRvX2NvbnRlbmlkbyI+UGVyc29uYXMgZW1wYWRyb25hZGFzIGEgMSBkZSBlbmVybyBkZSBjYWRhIGHDsW8uPC9wPjwvdGQ+PC90cj48L3RhYmxlPjwvZGl2PjwvdGQ+PC90cj48dHI+PHRkIENsYXNzPSJzZXBhcmFkb3IiPjxicj48L3RkPjwvdHI+PHRyIGNsYXNzPSJhbmNsYSI+PHRkPjxhIGlkPSJJbmRpY2VfTml2ZWxfMV82MTA3IiBjbGFzcz0iYW5jaG9yIj48L2E+PC90ZD48L3RyPjx0ciBjbGFzcz0iYW5jbGEiPjx0ZD48YSBpZD0iSW5kaWNlX05pdmVsXzFfNjEwOCIgY2xhc3M9ImFuY2hvciI+PC9hPjwvdGQ+PC90cj48dHIgY2xhc3M9ImFuY2xhIj48dGQ+PGEgaWQ9IkluZGljZV9OaXZlbF8xXzYxMDkiIGNsYXNzPSJhbmNob3IiPjwvYT48L3RkPjwvdHI+PHRyPjx0ZCByb3dzcGFuPSIzIiBjbGFzcz0iY2VsZGFfdGlwb19maWxhXzIiPjxkaXYgY2xhc3M9ImNsYXNlX2NhcGFfdW5pZGFkX3Zpc3VhbGl6YWNpb24iIHN0eWxlPSJtaW4taGVpZ2h0OiA0NTBweDsiPjxkaXYgaWQ9ImNhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNjEwNyI+DQo8ZGl2IGlkPSJjYXBhX0VzcGVyYW5kb2NlbGRhNjEwNyIgY2xhc3M9ImxvYWQtY29udGFpbmVyIGxvYWRlcmNlbGRhNjEwNyI+PC9kaXY+DQo8L2Rpdj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQogICAgICAgIC5saW5lY2VsZGE2MTA3IHsNCiAgICAgICAgICAgIGZpbGw6IG5vbmU7DQogICAgICAgICAgICBzdHJva2U6ICNGRjZFMkI7DQogICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI7DQogICAgICAgIH0NCiAgICAgICAgLnRvb2xUaXAgew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgICAgIHdpZHRoOiBhdXRvOw0KICAgICAgICAgICAgaGVpZ2h0OiBhdXRvOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZSByZXBlYXQgc2Nyb2xsIDAgMCB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogMCBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4IDhweCA4cHggOHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogLTNweCAzcHggMTVweCAjODg4ODg4Ow0KICAgICAgICAgICAgY29sb3I6IGJsYWNrOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4Ow0KICAgICAgICAgICAgei1pbmRleDogMTsNCiAgICAgICAgfQ0KICAgICAgICAudG9vbHRpcF9ZTGVnZW5kIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nLXRvcDogNXB4Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweCAzcHggM3B4IDNweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM4QTg5ODU7DQogICAgICAgICAgICBjb2xvcjogI0ZGRkZGRjsNCiAgICAgICAgICAgIGJvcmRlcjogMCBub25lOw0KICAgICAgICB9DQogICAgICAgICAgICAudG9vbHRpcF9ZTGVnZW5kOmFmdGVyIHsNCiAgICAgICAgICAgICAgICBsZWZ0OiAxMDAlOw0KICAgICAgICAgICAgICAgIHRvcDogNTAlOw0KICAgICAgICAgICAgICAgIGJvcmRlcjogc29saWQgdHJhbnNwYXJlbnQ7DQogICAgICAgICAgICAgICAgY29udGVudDogIiAiOyANCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDA7DQogICAgICAgICAgICAgICAgd2lkdGg6IDA7DQogICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOw0KICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogcmdiYSgyMTcsIDIxNywgMjE3LCAwKTsNCiAgICAgICAgICAgICAgICBib3JkZXItbGVmdC1jb2xvcjogIzhBODk4NTsNCiAgICAgICAgICAgICAgICBib3JkZXItd2lkdGg6IDVweDsNCiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAtNXB4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB0ZXh0IHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgICAgIGNvbG9yOiAjQTlBOUE5Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgZmlsbDogI0E5QTlBOTsNCiAgICAgICAgfQ0KICAgICAgICBALXdlYmtpdC1rZXlmcmFtZXMgbG9hZDggew0KICAgICAgICAgICAgMCUgew0KICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAxMDAlIHsNCiAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBAa2V5ZnJhbWVzIGxvYWQ4IHsNCiAgICAgICAgICAgIDAlIHsNCiAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpOw0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgMTAwJSB7DQogICAgICAgICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOw0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLmxvYWQtY29udGFpbmVyIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBvYnNvbHV0ZTsNCiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICAgICAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KICAgICAgICAubG9hZGVyY2VsZGE2MTA3LA0KICAgICAgICAubG9hZGVyY2VsZGE2MTA3OmFmdGVyIHsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICAgICAgICAgIHdpZHRoOiAxMzBweDsNCiAgICAgICAgICAgIGhlaWdodDogMTMwcHg7DQogICAgICAgIH0NCiAgICAgICAgLmxvYWRlcmNlbGRhNjEwNyB7DQogICAgICAgICAgICBtYXJnaW46IDE2MHB4IDE2MHB4Ow0KICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRleHQtaW5kZW50OiAtOTk5OWVtOw0KICAgICAgICAgICAgYm9yZGVyLXRvcDogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1yaWdodDogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDEuMWVtIHNvbGlkICNGRjZFMkI7DQogICAgICAgICAgICBib3JkZXItbGVmdDogMS4xZW0gc29saWQgI0ZGRTlERjsNCiAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOw0KICAgICAgICAgICAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiBsb2FkOCAxLjFzIGluZmluaXRlIGxpbmVhcjsNCiAgICAgICAgICAgIGFuaW1hdGlvbjogbG9hZDggMS4xcyBpbmZpbml0ZSBsaW5lYXI7DQogICAgICAgIH0NCjwvc3R5bGU+DQo8c2NyaXB0IHNyYz0ianMvbG9jYWxpemFjaW9uL2QzLmxvY2FsZS5lcy1Fcy5qcyI+PC9zY3JpcHQ+DQo8c2NyaXB0Pg0KICAgIHZhciBnbG9ib19HcmFmaWNvX01MaW5lYXM7DQogICAgdmFyIGdsb2JvX0dyYWZpY29fTUxpbmVhc19MZXllbmRhWTsNCiAgICBmdW5jdGlvbiB0d2VlbkRhc2goKSB7DQogICAgICAgIHZhciBsLCBpOw0KICAgICAgICBsID0gdGhpcy5nZXRUb3RhbExlbmd0aCgpOw0KICAgICAgICBpID0gZDMuaW50ZXJwb2xhdGVTdHJpbmcoIjAsICIgKyBsLCBsICsgIiwgIiArIGwpOw0KICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGkodCk7IH07DQogICAgfQ0KICAgIGZ1bmN0aW9uIHRyYW5zaXRpb24oc2VsZWN0aW9uKSB7DQogICAgICAgIHNlbGVjdGlvbi5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS50cmFuc2l0aW9uKCkNCiAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTAwMCkNCiAgICAgICAgICAgICAgICAuYXR0clR3ZWVuKCJzdHJva2UtZGFzaGFycmF5IiwgdHdlZW5EYXNoKTsNCiAgICAgICAgfSkNCiAgICB9DQogICAgZnVuY3Rpb24gQ2FsY3VsYXJNaW5pbW9EYXRvcyhwQXJyYXlEYXRvcywgcENvbWVuemFyRWplWUVuQ2VybywgcERlY2FsYWplc1ZlcnRpY2FsZXMpIHsNCiAgICAgICAgdmFyIG1pbmltb0RhdG9zID0gMDsNCiAgICAgICAgdmFyIG1heGltb0RhdG9zID0gMDsNCiAgICAgICAgdmFyIHRvdGFsRGF0b3MgPSAwOw0KICAgICAgICB2YXIgZGVjYWphbGVWZXJ0aWNhbCA9IDA7DQogICAgICAgIG1pbmltb0RhdG9zID0gZDMubWluKHBBcnJheURhdG9zLCBmdW5jdGlvbiAoc2VyaWUpIHsNCiAgICAgICAgICAgIHJldHVybiBkMy5taW4oc2VyaWUudmFsdWVzLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBkLnZhbG9yX3NlcmllOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgICBtYXhpbW9EYXRvcyA9IGQzLm1heChwQXJyYXlEYXRvcywgZnVuY3Rpb24gKHNlcmllKSB7DQogICAgICAgICAgICByZXR1cm4gZDMubWF4KHNlcmllLnZhbHVlcywgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC52YWxvcl9zZXJpZTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgICAgdG90YWxEYXRvcyA9IG1heGltb0RhdG9zIC0gbWluaW1vRGF0b3MNCiAgICAgICAgLy8gQXBsaWNhbW9zIGVsIHZhbG9yIDAgc2kgZXMgc2VsZWNjaW9uYWRvOg0KICAgICAgICBpZiAocENvbWVuemFyRWplWUVuQ2VybyA9PSB0cnVlKSB7DQogICAgICAgICAgICBpZiAobWluaW1vRGF0b3MgPiAwKSB7DQogICAgICAgICAgICAgICAgbWluaW1vRGF0b3MgPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmIChwRGVjYWxhamVzVmVydGljYWxlcyA9PSB0cnVlKSB7DQogICAgICAgICAgICBkZWNhamFsZVZlcnRpY2FsID0gKHRvdGFsRGF0b3MgKiAxMCkgLyAxMDA7DQogICAgICAgICAgICBpZiAobWluaW1vRGF0b3MgPj0gMCAmJiAobWluaW1vRGF0b3MgLSBkZWNhamFsZVZlcnRpY2FsKSA8IDApIHsNCiAgICAgICAgICAgICAgICBtaW5pbW9EYXRvcyA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBtaW5pbW9EYXRvcyA9IG1pbmltb0RhdG9zIC0gZGVjYWphbGVWZXJ0aWNhbA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBtaW5pbW9EYXRvczsNCiAgICB9DQogICAgZnVuY3Rpb24gQ2FsY3VsYXJBbmNob01hcmdlbkl6cXVpZXJkb19HcmFmaWNvTGluZWFzKHB2YWxvck1heGltb0RhdG9zLCBwdmFsb3JNaW5pbW9EYXRvcywgcEFuY2hvR3JhZmljbykgew0KICAgICAgICB2YXIgY2FkZW5hTWF5b3IgPSAnOycNCiAgICAgICAgdmFyIG1hcmdlblBpeGVsZXMgPSAwOw0KICAgICAgICB2YXIgYzsNCiAgICAgICAgdmFyIGN0eDsNCiAgICAgICAgdmFyIHR4dDsNCiAgICAgICAgdmFyIGNhbnZhc01lZGljaW9uSXpxdWllcmRvOw0KICAgICAgICBpZiAocHZhbG9yTWF4aW1vRGF0b3MudG9TdHJpbmcoKS5sZW5ndGggPiBwdmFsb3JNaW5pbW9EYXRvcy50b1N0cmluZygpLmxlbmd0aCkgew0KICAgICAgICAgICAgY2FkZW5hTWF5b3IgPSBwdmFsb3JNYXhpbW9EYXRvcy50b1N0cmluZygpDQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBjYWRlbmFNYXlvciA9IHB2YWxvck1pbmltb0RhdG9zLnRvU3RyaW5nKCkNCiAgICAgICAgfQ0KICAgICAgICBjYW52YXNNZWRpY2lvbkl6cXVpZXJkbyA9IGQzLnNlbGVjdCgiI2NhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNjEwNyIpLmFwcGVuZCgiY2FudmFzIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdjYW52YXNNZWRpY2lvbkl6cXVpZXJkb2NlbGRhNjEwNycpDQogICAgICAgICAgICAuYXR0cigidmlzaWJpbGl0eSIsICJoaWRkZW4iKQ0KICAgICAgICAgICAgLmF0dHIoIndoaXRlLXNwYWNlIiwgIm5vd3JhcCIpOw0KICAgICAgICAgICAgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYW52YXNNZWRpY2lvbkl6cXVpZXJkb2NlbGRhNjEwNyIpOw0KICAgICAgICAgICAgY3R4ID0gYy5nZXRDb250ZXh0KCIyZCIpOw0KICAgICAgICAgICAgY3R4LmZvbnQgPSAiMTJweCBBcmlhbCI7DQogICAgICAgICAgICB0eHQgPSBjYWRlbmFNYXlvciArICcgLSAnDQogICAgICAgICAgICBtYXJnZW5QaXhlbGVzID0gY3R4Lm1lYXN1cmVUZXh0KHR4dCkud2lkdGg7DQogICAgICAgICAgICBjYW52YXNNZWRpY2lvbkl6cXVpZXJkby5yZW1vdmUoKTsNCiAgICAgICAgcmV0dXJuIG1hcmdlblBpeGVsZXM7DQogICAgfQ0KICAgIGZ1bmN0aW9uIENhbGN1bGFyQW5jaG9NYXJnZW5EZXJlY2hvX0dyYWZpY29MaW5lYXMocEFycmF5RGF0b3MsIHBBbmNob0dyYWZpY28pIHsNCiAgICAgICAgdmFyIGNhZGVuYU1heW9yID0gIiI7DQogICAgICAgIHZhciBjYW52YXNNZWRpY2lvbkRlcmVjaG87DQogICAgICAgIHZhciBjOw0KICAgICAgICB2YXIgY3R4Ow0KICAgICAgICB2YXIgdHh0Ow0KICAgICAgICBwQXJyYXlEYXRvcy5mb3JFYWNoKGZ1bmN0aW9uIChub21icmVTZXJpZSkgew0KICAgICAgICAgICAgaWYgKG5vbWJyZVNlcmllLmxlbmd0aCA+IGNhZGVuYU1heW9yLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIGNhZGVuYU1heW9yID0gbm9tYnJlU2VyaWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgICBjYW52YXNNZWRpY2lvbkRlcmVjaG8gPSBkMy5zZWxlY3QoIiNjYXBhX0dyYWZpY29fRXZvbHVjaW9uX0xpbmVhc19Bc2luY3Jvbm9jZWxkYTYxMDciKS5hcHBlbmQoImNhbnZhcyIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnY2FudmFzTWVkaWNpb25EZXJlY2hvY2VsZGE2MTA3JykNCiAgICAgICAgICAgIC5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpDQogICAgICAgICAgICAuYXR0cigid2hpdGUtc3BhY2UiLCAibm93cmFwIikNCiAgICAgICAgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYW52YXNNZWRpY2lvbkRlcmVjaG9jZWxkYTYxMDciKTsNCiAgICAgICAgY3R4ID0gYy5nZXRDb250ZXh0KCIyZCIpOw0KICAgICAgICBjdHguZm9udCA9ICIxMnB4IEFyaWFsIjsNCiAgICAgICAgdHh0ID0gY2FkZW5hTWF5b3INCiAgICAgICAgbWFyZ2VuUGl4ZWxlcyA9IGN0eC5tZWFzdXJlVGV4dCh0eHQpLndpZHRoICsgNDU7DQogICAgICAgIGNhbnZhc01lZGljaW9uRGVyZWNoby5yZW1vdmUoKTsNCiAgICAgICAgaWYgKG1hcmdlblBpeGVsZXMgPiAocEFuY2hvR3JhZmljbyAvIDIpKSB7DQogICAgICAgICAgICBtYXJnZW5QaXhlbGVzID0gcEFuY2hvR3JhZmljbyAvIDI7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG1hcmdlblBpeGVsZXM7DQogICAgfQ0KICAgIGZ1bmN0aW9uIENhbGN1bGFyTWF4aW1vRGF0b3MocEFycmF5RGF0b3MsIHBDb21lbnphckVqZVlFbkNlcm8pIHsNCiAgICAgICAgdmFyIG1heGltb0RhdG9zID0gMDsNCiAgICAgICAgbWF4aW1vRGF0b3MgPSBkMy5tYXgocEFycmF5RGF0b3MsIGZ1bmN0aW9uIChzZXJpZSkgew0KICAgICAgICAgICAgcmV0dXJuIGQzLm1heChzZXJpZS52YWx1ZXMsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGQudmFsb3Jfc2VyaWU7ICAgLy8gZWwgcmV0dXJuIGVzIGxvY2FsIGEgZXN0YSBmdW5jacOzbiBpbnRlcm5hDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICAgICBpZiAocENvbWVuemFyRWplWUVuQ2VybyA9PSB0cnVlKSB7DQogICAgICAgICAgICBpZiAobWF4aW1vRGF0b3MgPCAwKSB7DQogICAgICAgICAgICAgICAgbWF4aW1vRGF0b3MgPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBtYXhpbW9EYXRvczsNCiAgICB9DQogICAgZnVuY3Rpb24gaGV4IChjKSB7DQoJICAgIHZhciBzID0gIjAxMjM0NTY3ODlhYmNkZWYiOw0KCSAgICB2YXIgaSA9IHBhcnNlSW50IChjKTsNCgkgICAgaWYgKGkgPT0gMCB8fCBpc05hTiAoYykpDQoJICAgICAgICByZXR1cm4gIjAwIjsNCgkgICAgaSA9IE1hdGgucm91bmQgKE1hdGgubWluIChNYXRoLm1heCAoMCwgaSksIDI1NSkpOw0KCSAgICByZXR1cm4gcy5jaGFyQXQgKChpIC0gaSAlIDE2KSAvIDE2KSArIHMuY2hhckF0IChpICUgMTYpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBjb252ZXJ0VG9IZXggKHJnYikgew0KCSAgICByZXR1cm4gaGV4KHJnYlswXSkgKyBoZXgocmdiWzFdKSArIGhleChyZ2JbMl0pOw0KICAgIH0NCiAgICBmdW5jdGlvbiB0cmltIChzKSB7IHJldHVybiAocy5jaGFyQXQoMCkgPT0gJyMnKSA/IHMuc3Vic3RyaW5nKDEsIDcpIDogcyB9DQogICAgZnVuY3Rpb24gY29udmVydFRvUkdCIChoZXgpIHsNCgkgICAgdmFyIGNvbG9yID0gW107DQoJICAgIGNvbG9yWzBdID0gcGFyc2VJbnQgKCh0cmltKGhleCkpLnN1YnN0cmluZyAoMCwgMiksIDE2KTsNCgkgICAgY29sb3JbMV0gPSBwYXJzZUludCAoKHRyaW0oaGV4KSkuc3Vic3RyaW5nICgyLCA0KSwgMTYpOw0KCSAgICBjb2xvclsyXSA9IHBhcnNlSW50ICgodHJpbShoZXgpKS5zdWJzdHJpbmcgKDQsIDYpLCAxNik7DQoJICAgIHJldHVybiBjb2xvcjsNCiAgICB9DQogICAgZnVuY3Rpb24gQ2FsY3VsYXJHcmFkaWVudGVDb2xvcmVzX0dyYWZpY29Fdm9sdWNpb25MaW5lYXMyKGNvbG9ySW5pY2lvLGNvbG9yRmluLG51bWVyb0xpbmVhcyl7DQogICAgICAgIHZhciBjb2xvckluaWNpb1JHQiA9ICcnOw0KICAgICAgICB2YXIgY29sb3JGaW5SR0IgPSAnJzsNCiAgICAgICAgdmFyIGNvbG9yUk1lZGlhOw0KICAgICAgICB2YXIgY29sb3JHTWVkaWE7DQogICAgICAgIHZhciBjb2xvckJNZWRpYTsNCiAgICAgICAgdmFyIGNvbG9yUkdCTWVkaWEgPSBuZXcgQXJyYXkoKTsNCiAgICAgICAgdmFyIGNvbG9ySGV4TWVkaWE7DQogICAgICAgIHZhciBudW1lcm9MaW5lYXNBRGlzdHJpYnVpciA9IDA7DQogICAgICAgIHZhciBjb2xvcmVzUG9zaXRpdm9zTmVnYXRpdm9zID0gMA0KICAgICAgICB2YXIgY2FudGlkYWRDb2xvclRyYW1vID0gMDsNCiAgICAgICAgdmFyIGNvbG9yZXMgPSBuZXcgQXJyYXkoKTsNCiAgICAgICAgY29sb3JJbmljaW9SR0IgPSBjb252ZXJ0VG9SR0IoY29sb3JJbmljaW8pOw0KICAgICAgICBjb2xvckZpblJHQiA9IGNvbnZlcnRUb1JHQihjb2xvckZpbik7DQogICAgICAgIGNvbG9yUk1lZGlhID0gKGNvbG9ySW5pY2lvUkdCWzBdICsgY29sb3JGaW5SR0JbMF0pIC8gMjsNCiAgICAgICAgY29sb3JHTWVkaWEgPSAoY29sb3JJbmljaW9SR0JbMV0gKyBjb2xvckZpblJHQlsxXSkgLyAyOw0KICAgICAgICBjb2xvckJNZWRpYSA9IChjb2xvckluaWNpb1JHQlsyXSArIGNvbG9yRmluUkdCWzJdKSAvIDI7DQogICAgICAgIGNvbG9yUkdCTWVkaWEgPSBbY29sb3JSTWVkaWEsIGNvbG9yR01lZGlhLCBjb2xvckJNZWRpYV07DQogICAgICAgIGNvbG9ySGV4TWVkaWEgPSBjb252ZXJ0VG9IZXgoY29sb3JSR0JNZWRpYSk7DQogICAgICAgIG51bWVyb0xpbmVhc0FEaXN0cmlidWlyID0gbnVtZXJvTGluZWFzOw0KICAgICAgICBpZihudW1lcm9MaW5lYXMgJSAyICE9IDApIHsNCiAgICAgICAgICAgIG51bWVyb0xpbmVhc0FEaXN0cmlidWlyID0gbnVtZXJvTGluZWFzQURpc3RyaWJ1aXIgLSAxOw0KICAgICAgICB9DQogICAgICAgIGNvbG9yZXNQb3NpdGl2b3NOZWdhdGl2b3MgPSBudW1lcm9MaW5lYXNBRGlzdHJpYnVpciAvIDI7DQogICAgICAgIGNhbnRpZGFkQ29sb3JUcmFtbyA9IDExMCAvIChjb2xvcmVzUG9zaXRpdm9zTmVnYXRpdm9zICsgMSk7DQogICAgICAgIGZvciAodmFyIGkgPSBjb2xvcmVzUG9zaXRpdm9zTmVnYXRpdm9zOyBpID49IDE7IGktLSkgew0KICAgICAgICAgICAgY29sb3Jlcy5wdXNoKCcjJyArIExpZ2h0ZW5EYXJrZW5Db2xvcihjb2xvckhleE1lZGlhLCBjYW50aWRhZENvbG9yVHJhbW8gKiBpICogLTEpKQ0KICAgICAgICB9DQogICAgICAgIGlmIChudW1lcm9MaW5lYXMgJSAyICE9IDApIHsNCiAgICAgICAgICAgIGNvbG9yZXMucHVzaCgnIycgKyBjb2xvckhleE1lZGlhKTsNCiAgICAgICAgfQ0KICAgICAgICBjYW50aWRhZENvbG9yVHJhbW8gPSA3NSAvIChjb2xvcmVzUG9zaXRpdm9zTmVnYXRpdm9zICsgMSk7DQogICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGNvbG9yZXNQb3NpdGl2b3NOZWdhdGl2b3M7IGkrKykgew0KICAgICAgICAgICAgY29sb3Jlcy5wdXNoKCcjJyArIExpZ2h0ZW5EYXJrZW5Db2xvcihjb2xvckhleE1lZGlhLCBjYW50aWRhZENvbG9yVHJhbW8gKiBpKSkNCiAgICAgICAgfQ0KICAgIHJldHVybiBjb2xvcmVzOw0KICAgIH0NCiAgICBmdW5jdGlvbiBMaWdodGVuRGFya2VuQ29sb3IoY29sb3JDb2RlLCBhbW91bnQpIHsNCiAgICAgICAgdmFyIHVzZVBvdW5kID0gZmFsc2U7DQogICAgICAgIGlmIChjb2xvckNvZGVbMF0gPT0gIiMiKSB7DQogICAgICAgICAgICBjb2xvckNvZGUgPSBjb2xvckNvZGUuc2xpY2UoMSk7DQogICAgICAgICAgICB1c2VQb3VuZCA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgdmFyIG51bSA9IHBhcnNlSW50KGNvbG9yQ29kZSwgMTYpOw0KICAgICAgICB2YXIgciA9IChudW0gPj4gMTYpICsgYW1vdW50Ow0KICAgICAgICBpZiAociA+IDI1NSkgew0KICAgICAgICAgICAgciA9IDI1NTsNCiAgICAgICAgfSBlbHNlIGlmIChyIDwgMCkgew0KICAgICAgICAgICAgciA9IDA7DQogICAgICAgIH0NCiAgICAgICAgdmFyIGIgPSAoKG51bSA+PiA4KSAmIDB4MDBGRikgKyBhbW91bnQ7DQogICAgICAgIGlmIChiID4gMjU1KSB7DQogICAgICAgICAgICBiID0gMjU1Ow0KICAgICAgICB9IGVsc2UgaWYgKGIgPCAwKSB7DQogICAgICAgICAgICBiID0gMDsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgZyA9IChudW0gJiAweDAwMDBGRikgKyBhbW91bnQ7DQogICAgICAgIGlmIChnID4gMjU1KSB7DQogICAgICAgICAgICBnID0gMjU1Ow0KICAgICAgICB9IGVsc2UgaWYgKGcgPCAwKSB7DQogICAgICAgICAgICBnID0gMDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKHVzZVBvdW5kID8gIiMiIDogIiIpICsgKGcgfCAoYiA8PCA4KSB8IChyIDw8IDE2KSkudG9TdHJpbmcoMTYpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBBY3R1YWxpemFyTGluZWFzUHVudG9zKHBJZGVudGlmaWNhZG9yLCBwTW91c2UsIHBTZXJpZV9kYXRvc19hbmlkYWRvcywgcFgsIHBZLCBwTlB1bnRvc0VqZVgsIHBXaWR0aCwgcEhlaWdodCkNCiAgICB7DQogICAgICAgIHZhciB4RGF0ZTsNCiAgICAgICAgdmFyIGJpc2VjdDsNCiAgICAgICAgdmFyIGlkeDsNCiAgICAgICAgdmFyIGRhdGE7DQogICAgICAgIHBTZXJpZV9kYXRvc19hbmlkYWRvcy5tYXAoZCA9PiB7DQogICAgICAgICAgICB4RGF0ZSA9IHBYLmludmVydChwTW91c2VbMF0gLSAocFdpZHRoIC8gcE5QdW50b3NFamVYKSAvIDIpOw0KICAgICAgICAgICAgYmlzZWN0ID0gZDMuYmlzZWN0b3IoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuZmVjaGE7IH0pLmxlZnQNCiAgICAgICAgICAgIGlkeCA9IGJpc2VjdChkLnZhbHVlcywgeERhdGUpDQogICAgICAgIH0pDQogICAgICAgIGQzLnNlbGVjdEFsbCgnLm1vdXNlLXBlci1saW5lJysgcElkZW50aWZpY2Fkb3IpDQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQsIGkpIHsNCiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5tb3VzZS1saW5lJyArIHBJZGVudGlmaWNhZG9yKQ0KICAgICAgICAgICAgICAgICAgIC5hdHRyKCJkIiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gIk0iICsgcFgoZC52YWx1ZXNbaWR4XS5mZWNoYSkgKyAiLCIgKyBwSGVpZ2h0Ow0KICAgICAgICAgICAgICAgICAgICAgICBkYXRhICs9ICIgIiArIHBYKGQudmFsdWVzW2lkeF0uZmVjaGEpICsgIiwiICsgMDsNCiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLm1vdXNlLWxpbmUtaG9yaXpvbnRhbCcgKyBwSWRlbnRpZmljYWRvcikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gIk0iICsgKHBXaWR0aCkgKyAiLCIgKyBwTW91c2VbMV0NCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgKz0gIiAwLCIgKyBwTW91c2VbMV0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBpZiAoaXNOYU4ocFkoZC52YWx1ZXNbaWR4XS52YWxvcl9zZXJpZSkpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAidHJhbnNsYXRlKDAsMCkiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJ0cmFuc2xhdGUoIiArIHBYKGQudmFsdWVzW2lkeF0uZmVjaGEpICsgIiwiICsgcFkoZC52YWx1ZXNbaWR4XS52YWxvcl9zZXJpZSkgKyAiKSI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgZnVuY3Rpb24gKGQsIGkpIHsNCiAgICAgICAgICAgICAgIGlmIChpc05hTihwWShkLnZhbHVlc1tpZHhdLnZhbG9yX3NlcmllKSkpIHsNCiAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgcmV0dXJuICIxIjsNCiAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgfSkNCiAgICAgICA7DQogICAgfQ0KICAgIGZ1bmN0aW9uIEFjdHVhbGl6YXJDb250ZW5pZG9HbG9ibyhwTW91c2UsIHBTZXJpZV9kYXRvc19hbmlkYWRvcywgcFNlcmllX2RhdG9zX2Zvcm1hdGVhZG9zX2FuaWRhZG9zLCBwWCwgcFksIHBOUHVudG9zRWplWCwgcFdpZHRoLCBwTWFyZ2luLCBwQ29sb3IsIHBNYXNjYXJhU2FsaWRhRGF0b3MpDQogICAgew0KICAgICAgICB2YXIgeERhdGU7DQogICAgICAgIHZhciBiaXNlY3Q7DQogICAgICAgIHZhciBpZHg7DQogICAgICAgIHZhciB2YWxvcllMZWdlbmQ7DQogICAgICAgIHZhciBzb3J0aW5nQXJyOw0KICAgICAgICB2YXIgcmVzX25lc3RlZDE7DQogICAgICAgIHNvcnRpbmdPYmogPSBbXQ0KICAgICAgICBwU2VyaWVfZGF0b3NfYW5pZGFkb3MubWFwKGQgPT4gew0KICAgICAgICAgICAgeERhdGUgPSBwWC5pbnZlcnQocE1vdXNlWzBdIC0gKHBXaWR0aCAvIHBOUHVudG9zRWplWCkgLyAyKTsNCiAgICAgICAgICAgIGJpc2VjdCA9IGQzLmJpc2VjdG9yKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmZlY2hhOyB9KS5sZWZ0DQogICAgICAgICAgICBpZHggPSBiaXNlY3QoZC52YWx1ZXMsIHhEYXRlKQ0KICAgICAgICAgICAgc29ydGluZ09iai5wdXNoKHsgbmFtZTogZC5uYW1lLCBmZWNoYV9wZXJpb2RvX3NlcmllOiBkLnZhbHVlc1tpZHhdLmZlY2hhLCBub21icmVfcGVyaW9kbzogZC52YWx1ZXNbaWR4XS5ub21icmVfcGVyaW9kbyArICcgJyArIGQudmFsdWVzW2lkeF0uYW5pb19wZXJpb2RvLCBldGlxdWV0YXBlcmlvZG86IGQudmFsdWVzW2lkeF0uZXRpcXVldGFwZXJpb2RvLCB2YWxvcl9zZXJpZTogZC52YWx1ZXNbaWR4XS52YWxvcl9zZXJpZSB9KQ0KICAgICAgICB9KQ0KICAgICAgICBzb3J0aW5nT2JqLnNvcnQoZnVuY3Rpb24gKHBYLCBwWSkgew0KICAgICAgICAgICAgcmV0dXJuIGQzLmRlc2NlbmRpbmcocFgudmFsb3Jfc2VyaWUsIHBZLnZhbG9yX3NlcmllKTsNCiAgICAgICAgfSkNCiAgICAgICAgc29ydGluZ0FyciA9IHNvcnRpbmdPYmoubWFwKGQgPT4gZC5uYW1lKQ0KICAgICAgICByZXNfbmVzdGVkMSA9IHBTZXJpZV9kYXRvc19mb3JtYXRlYWRvc19hbmlkYWRvcy5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsNCiAgICAgICAgICAgIHJldHVybiBzb3J0aW5nQXJyLmluZGV4T2YoYS5uYW1lKSAtIHNvcnRpbmdBcnIuaW5kZXhPZihiLm5hbWUpIC8vIHJhbmsgdmVoaWNsZSBIb21icmVzYXNlZCBvbiBwcmljZSBvZiB2YWxvcl9pbmRpY2Fkb3INCiAgICAgICAgfSkNCiAgICAgICAgZ2xvYm9fR3JhZmljb19NTGluZWFzLmh0bWwoc29ydGluZ09ialswXS5ldGlxdWV0YXBlcmlvZG8gKyAnOiAnICsgc29ydGluZ09ialswXS5ub21icmVfcGVyaW9kbykNCiAgICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdibG9jaycpDQogICAgICAgICAgICAuc3R5bGUoJ2xlZnQnLCBkMy5ldmVudC5wYWdlWCArIDI1ICsgJ3B4JykNCiAgICAgICAgICAgIC5zdHlsZSgndG9wJywgZDMuZXZlbnQucGFnZVkgLSA4MCArICdweCcpDQogICAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsIDEyLjUpDQogICAgICAgICAgICAuc2VsZWN0QWxsKCkNCiAgICAgICAgICAgIC5kYXRhKHJlc19uZXN0ZWQxKS5lbnRlcigpDQogICAgICAgICAgICAuYXBwZW5kKCdkaXYnKQ0KICAgICAgICAgICAgLnN0eWxlKCdjb2xvcicsIGQgPT4gew0KICAgICAgICAgICAgICAgIHJldHVybiBwQ29sb3IoZC5uYW1lKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgMTUpDQogICAgICAgICAgICAuaHRtbChkID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZC52YWx1ZXNbaWR4XS52YWxvcl9zZXJpZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQubmFtZSArICIgOiA8Yj4gLSA8L2I+Ig0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQubmFtZSArICIgOiA8Yj4iICsgZm9ybWF0KHBNYXNjYXJhU2FsaWRhRGF0b3MsIGQudmFsdWVzW2lkeF0udmFsb3Jfc2VyaWUpICsgIjwvYj4iDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgdmFsb3JZTGVnZW5kID0gcFkuaW52ZXJ0KHBNb3VzZVsxXSAtIDEpDQogICAgICAgIHZhbG9yWUxlZ2VuZCA9IGZvcm1hdChwTWFzY2FyYVNhbGlkYURhdG9zLCB2YWxvcllMZWdlbmQpOw0KICAgICAgICBnbG9ib19HcmFmaWNvX01MaW5lYXNfTGV5ZW5kYVkuaHRtbCh2YWxvcllMZWdlbmQpDQogICAgICAgICAgICAuc3R5bGUoJ2Rpc3BsYXknLCAnYmxvY2snKQ0KICAgICAgICAgICAgLnN0eWxlKCd3aWR0aCcsIHBNYXJnaW4ubGVmdCAtIDUgKyAncHgnKQ0KICAgICAgICAgICAgLnN0eWxlKCdsZWZ0JywgZDMuZXZlbnQucGFnZVggLSBwTW91c2VbMF0gLSBwTWFyZ2luLmxlZnQgKyAncHgnKQ0KICAgICAgICAgICAgLnN0eWxlKCd0b3AnLCBkMy5ldmVudC5wYWdlWSAtIDEyICsgJ3B4JykNCiAgICB9DQpkMy5jc3YoImh0dHA6Ly93d3cucG9ydGFsZXN0YWRpc3RpY28uY29tL3NlcnZpY2lvX29idGVuY2lvbl9kYXRvc192aXN1YWxpemFjaW9uZXMuYXNteC9PYnRlbmVyX0RhdG9zP3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJnBJZF9QYWdpbmFfQWN0aXZhPTEwMDAxJnBJZF9DZWxkYV9GaWxhX1BsYW50aWxsYT02MTA3JnBJZF9UZXJyaXRvcmlvPTAwOyZwSWRfVGVycml0b3Jpb19QYWRyZT0mcElkaW9tYT0xJnBJZF9yZWdpb249ZXMtZXMiKS50aGVuKA0KICAgIGZ1bmN0aW9uIChkYXRhKSB7DQogICAgICAgIHZhciBsaW5lYV9ncmFmaWNvOw0KICAgICAgICB2YXIgc3ZnOw0KICAgICAgICB2YXIgc2VyaWVzTGluZWFzOw0KICAgICAgICB2YXIgbGluZWFDZXJvOw0KICAgICAgICB2YXIgbGluZWFzX3NlcmllczsNCiAgICAgICAgdmFyIG5FbGVtZW50b3NQb3JTZXJpZTsNCiAgICAgICAgdmFyIHB1bnRvc0Fpc2xhZG9zOw0KICAgICAgICB2YXIgbGluZWFzVmVydEhvclJhdG9uOw0KICAgICAgICB2YXIgcmF0b25Qb3JMaW5lYTsNCiAgICAgICAgdmFyIGVqZVg7DQogICAgICAgIHZhciBlamVZOw0KICAgICAgICB2YXIgY0RpbWVuc2lvbkV4dCA9IDANCiAgICAgICAgdmFyIHZhbG9yTWluaW1vRGF0b3MgPSAwOw0KICAgICAgICB2YXIgdmFsb3JNYXhpbW9EYXRvcyA9IDA7DQogICAgICAgIHZhciBmZWNoYU1heGltbzsNCiAgICAgICAgdmFyIGZlY2hhTWluaW1vOw0KICAgICAgICB2YXIgY2FsY3Vsb19tYXhtaW47DQogICAgICAgIHZhciBtYXJnZW5JenF1aWVyZG8gPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuRGVyZWNobyA9IDA7DQogICAgICAgIHZhciBtYXJnZW5TdXBlcmlvciA9IDA7DQogICAgICAgIHZhciBtYXJnZW5JbmZlcmlvciA9IDA7DQogICAgICAgIHZhciBuQ29ydGVzID0gMDsNCiAgICAgICAgdmFyIG5QdW50b3NFamVYID0gMDsNCiAgICAgICAgdmFyIHBhcnNlRGF0ZSA9IGQzLnRpbWVQYXJzZSgiJVkvJW0vJWQiKTsNCiAgICAgICAgdmFyIG1hcmdpbjsNCiAgICAgICAgdmFyIHdpZHRoOw0KICAgICAgICB2YXIgaGVpZ2h0Ow0KICAgICAgICB2YXIgY29sb3I7DQogICAgICAgIHZhciBjYXRlZ29yeTsNCiAgICAgICAgdmFyIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG87DQogICAgICAgdmFyIGFuY2hvTm9kb3M7DQogICAgICAgdmFyIHN2Z0xleWVuZGFIb3Jpem9udGFsOw0KICAgICAgIHZhciBzdmdMZWdlbmQ7DQogICAgICAgdmFyIGxlZ2VuZDsNCiAgICAgICAgZWxlbWVudF9jYXBhX2VzcGVyYW5kbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYXBhX0VzcGVyYW5kb2NlbGRhNjEwNyIpOw0KICAgICAgICBlbGVtZW50X2NhcGFfZXNwZXJhbmRvLmNsYXNzTGlzdC5yZW1vdmUoImxvYWRlcmNlbGRhNjEwNyIpOw0KICAgICAgICBjYXRlZ29yeSA9IGQzLmtleXMoZGF0YVswXSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIChrZXkgIT09ICJhbmlvX3BlcmlvZG8iICYmIGtleSAhPT0gImZlY2hhX3BlcmlvZG9fc2VyaWUiICYmIGtleSAhPT0gIm5vbWJyZV9wZXJpb2RvIiAmJiBrZXkgIT09ICJwZXJpb2RvIiAmJiBrZXkgIT09ICJldGlxdWV0YXBlcmlvZG8iKTsgfSk7DQogICAgICAgIGNvbG9yID0gIGQzLnNjYWxlT3JkaW5hbChDYWxjdWxhckdyYWRpZW50ZUNvbG9yZXNfR3JhZmljb0V2b2x1Y2lvbkxpbmVhczIoJyNGRkU5REYnLCAnI0ZGNkUyQicsIGNhdGVnb3J5Lmxlbmd0aCkpOw0KICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgIGQuZmVjaGFfcGVyaW9kb19zZXJpZSA9IHBhcnNlRGF0ZShkLmZlY2hhX3BlcmlvZG9fc2VyaWUpOw0KICAgICAgICAgICAgbkNvcnRlcysrOw0KICAgICAgICAgICAgblB1bnRvc0VqZVgrKzsNCiAgICAgICAgfSk7DQogICAgICAgIGlmIChuQ29ydGVzID4gNyl7DQogICAgICAgICAgICBuQ29ydGVzID0gNzsNCiAgICAgICAgfQ0KICAgICAgICAvLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICBjb2xvci5kb21haW4oZDMua2V5cyhkYXRhWzBdKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKGtleSAhPT0gImFuaW9fcGVyaW9kbyIgJiYga2V5ICE9PSAiZmVjaGFfcGVyaW9kb19zZXJpZSIgJiYga2V5ICE9PSAibm9tYnJlX3BlcmlvZG8iICYmIGtleSAhPT0gInBlcmlvZG8iICYmIGtleSAhPT0gImV0aXF1ZXRhcGVyaW9kbyIpOyB9KSk7DQogICAgICAgIGNhbGN1bG9fbWF4bWluID0gY29sb3IuZG9tYWluKCkubWFwKGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsDQogICAgICAgICAgICAgICAgdmFsdWVzOiBkYXRhLm1hcChmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBhbmlvX3BlcmlvZG86IGQuYW5pb19wZXJpb2RvLCBmZWNoYTogZC5mZWNoYV9wZXJpb2RvX3NlcmllLCBub21icmVfcGVyaW9kbzogZC5ub21icmVfcGVyaW9kbywgdmFsb3Jfc2VyaWU6ICtkW25hbWVdIH07DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH07DQogICAgICAgIH0pOw0KICAgICAgICB2YWxvck1heGltb0RhdG9zID0gQ2FsY3VsYXJNYXhpbW9EYXRvcyhjYWxjdWxvX21heG1pbiwgZmFsc2UpDQogICAgICAgIHZhbG9yTWluaW1vRGF0b3MgPSBDYWxjdWxhck1pbmltb0RhdG9zKGNhbGN1bG9fbWF4bWluLCBmYWxzZSwgdHJ1ZSk7DQogICAgICAgIG1hcmdlbkl6cXVpZXJkbyA9IENhbGN1bGFyQW5jaG9NYXJnZW5JenF1aWVyZG9fR3JhZmljb0xpbmVhcyhmb3JtYXQoIiMuIyMwLCIsdmFsb3JNYXhpbW9EYXRvcyksIGZvcm1hdCgiIy4jIzAsIix2YWxvck1pbmltb0RhdG9zKSwgNDUwKTsNCiAgICAgICAgbWFyZ2VuRGVyZWNobyA9IENhbGN1bGFyQW5jaG9NYXJnZW5EZXJlY2hvX0dyYWZpY29MaW5lYXMoY2F0ZWdvcnksIDQ1MCk7DQogICAgICAgIGlmIChjYXRlZ29yeS5sZW5ndGggPiAxICYmIDQ1MCA+IDQ1MCkgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNDA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDIwOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGNhdGVnb3J5Lmxlbmd0aCA9PSAxICYmIDQ1MCA+IDQ1MCkgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlbkRlcmVjaG8gPSAzMCANCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNDA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDIwOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlbkRlcmVjaG8gPSAzMCANCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNTA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDUwOw0KICAgICAgICB9DQogICAgICAgIGZlY2hhTWF4aW1vID0gZDMubWF4KGNhbGN1bG9fbWF4bWluLCBmdW5jdGlvbiAoc2VyaWUpIHsNCiAgICAgICAgICAgIHJldHVybiBkMy5tYXgoc2VyaWUudmFsdWVzLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBkLmZlY2hhOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgICBmZWNoYU1pbmltbyA9IGQzLm1pbihjYWxjdWxvX21heG1pbiwgZnVuY3Rpb24gKHNlcmllKSB7DQogICAgICAgICAgICByZXR1cm4gZDMubWluKHNlcmllLnZhbHVlcywgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC5mZWNoYTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgICAgbWFyZ2luID0geyB0b3A6IG1hcmdlblN1cGVyaW9yLCByaWdodDogbWFyZ2VuRGVyZWNobywgYm90dG9tOiBtYXJnZW5JbmZlcmlvciwgbGVmdDogbWFyZ2VuSXpxdWllcmRvIH07DQogICAgICAgIHdpZHRoID0gNDUwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQ7DQogICAgICAgIGhlaWdodCA9IDQ1MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tOw0KICAgICAgICBlamVYID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSk7DQogICAgICAgIGVqZVkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKTsNCiAgICAgICAgbGluZWFfZ3JhZmljbyA9IGQzLmxpbmUoKQ0KICAgICAgICAgICAgLngoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVgoZC5mZWNoYSk7IH0pDQogICAgICAgICAgICAueShmdW5jdGlvbiAoZCkgeyByZXR1cm4gZWplWShkLnZhbG9yX3NlcmllKTsgfSkNCiAgICAgICAgICAgIC5kZWZpbmVkKGZ1bmN0aW9uIChkKSB7IHJldHVybiAhaXNOYU4oZC52YWxvcl9zZXJpZSk7IH0pDQogICAgICAgICAgICA7DQogICAgICAgICAgICAgICAgLy8gMS5BZGQgdGhlIFNWRyBUbyB0aGUgcGFnZSBBbmQgZW1wbG95ICMyDQogICAgICAgIHN2ZyA9IGQzLnNlbGVjdCgiI2NhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNjEwNyIpLmFwcGVuZCgic3ZnIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdjZWxkYTYxMDcnKQ0KICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgNDUwKQ0KICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIDQ1MCkNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIG1hcmdpbi5sZWZ0ICsgIiwgIiArIG1hcmdpbi50b3AgKyAiKSIpOw0KICAgICAgICBnbG9ib19HcmFmaWNvX01MaW5lYXMgPSBkMy5zZWxlY3QoImJvZHkiKS5hcHBlbmQoImRpdiIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnZ2xvYm9fR3JhZmljb19NTGluZWFzJykNCiAgICAgICAgICAgIC5zdHlsZSgncG9zaXRpb24nLCAnYWJzb2x1dGUnKQ0KICAgICAgICAgICAgLnN0eWxlKCdwYWRkaW5nJywgNikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJ0b29sVGlwIikNCiAgICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7DQogICAgICAgIGdsb2JvX0dyYWZpY29fTUxpbmVhc19MZXllbmRhWSA9IGQzLnNlbGVjdCgiYm9keSIpLmFwcGVuZCgiZGl2IikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdnbG9ib19HcmFmaWNvX01MaW5lYXNfTGV5ZW5kYVknKQ0KICAgICAgICAgICAgLnN0eWxlKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAidG9vbHRpcF9ZTGVnZW5kIikNCiAgICAgICAgOw0KICAgICAgICBzZXJpZXNMaW5lYXMgPSBjb2xvci5kb21haW4oKS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgbmFtZTogbmFtZSwNCiAgICAgICAgICAgICAgICB2YWx1ZXM6IGRhdGEubWFwKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGFuaW9fcGVyaW9kbzogZC5hbmlvX3BlcmlvZG8sIGV0aXF1ZXRhcGVyaW9kbzogZC5ldGlxdWV0YXBlcmlvZG8sIGZlY2hhOiBkLmZlY2hhX3BlcmlvZG9fc2VyaWUsIG5vbWJyZV9wZXJpb2RvOiBkLm5vbWJyZV9wZXJpb2RvLCB2YWxvcl9zZXJpZTogK2RbbmFtZV0gfTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSk7DQogICAgICAgIG5FbGVtZW50b3NQb3JTZXJpZSA9IHNlcmllc0xpbmVhc1swXS52YWx1ZXMubGVuZ3RoIC0gMTsNCiAgICAgICAgZWplWC5kb21haW4oW2ZlY2hhTWluaW1vLCBmZWNoYU1heGltb10pOw0KICAgICAgICBlamVZLmRvbWFpbihbdmFsb3JNaW5pbW9EYXRvcywgdmFsb3JNYXhpbW9EYXRvc10pOw0KICAgICAgICAgICAgICAgIC8vIExleWVuZGEsIGVqZSBkZSBsYXMgWCwgcHVudG9zIHkgbGV5ZW5kYSBkZSBlc3RvcyBwdW50b3M6DQogICAgICAgIHN2Zy5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImZ1ZW50ZV9nZW5lcmljYSIpDQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCIgKyBoZWlnaHQgKyAiKSIpDQogICAgICAgICAgICAuY2FsbChkMy5heGlzQm90dG9tKCkuc2NhbGUoZWplWCkudGlja1NpemUoLWhlaWdodCkudGlja3MobkNvcnRlcykpDQogICAgICAgICAgICAuY2FsbCgNCiAgICAgICAgICAgICAgICBnID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoInkiLCAiNSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoImxpbmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAwLjcpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuMykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3QoIi5kb21haW4iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAxLjUpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuNSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICApDQogICAgICAgIDsNCiAgICAgICAgc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiZnVlbnRlX2dlbmVyaWNhIikNCiAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNMZWZ0KGVqZVkpLnRpY2tzKDQpLnRpY2tTaXplKC13aWR0aCkpDQogICAgICAgICAgICAuY2FsbCgNCiAgICAgICAgICAgICAgICBnID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoIngiLCAtMykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdEFsbCgibGluZSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDAuNykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC4zKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdCgiLmRvbWFpbiIpLnJlbW92ZSgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKQ0KICAgICAgICA7DQogICAgICAgIHN2Zy5zZWxlY3RBbGwoInRleHQiKS5hdHRyKCdmaWxsJywgJyNBOUE5QTknKTsNCiAgICAgICAgaWYgKGNhdGVnb3J5Lmxlbmd0aCA+IDEgKSANCiAgICAgICAgew0KICAgICAgICAgICAgYW5jaG9Ob2RvcyA9IChkKSA9PiBkLmdldEJCb3goKS53aWR0aDsgDQogICAgICAgICAgICBzdmdMZXllbmRhSG9yaXpvbnRhbCA9IHN2Zy5hcHBlbmQoJ2cnKQ0KICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKQ0KICAgICAgICAgICAgY29uc3QgbGdjZWxkYTYxMDcgPSBzdmdMZXllbmRhSG9yaXpvbnRhbC5zZWxlY3RBbGwoJ2cnKQ0KICAgICAgICAgICAgICAgIC5kYXRhKGNhdGVnb3J5KQ0KICAgICAgICAgICAgICAgIC5lbnRlcigpDQogICAgICAgICAgICAgICAgLmFwcGVuZCgnZycpDQogICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIChkLCBpKSA9PiBgdHJhbnNsYXRlKCR7aSAqIDEwMH0sJHtoZWlnaHQgKyAxNX0pYCk7ICAgICAgICAgICAgDQogICAgICAgICAgICBsZ2NlbGRhNjEwNy5hcHBlbmQoJ3JlY3QnKSAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGQ9PmNvbG9yKGQpKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgMCkNCiAgICAgICAgICAgICAgICAuYXR0cigneScsIDApDQogICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgMTApDQogICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDEwKTsNCiAgICAgICAgICAgIGxnY2VsZGE2MTA3LmFwcGVuZCgndGV4dCcpDQogICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAxNy41KQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgMTApDQogICAgICAgICAgICAgICAgLnRleHQoZCA9PiBkKTsNCiAgICAgICAgICAgIGxldCBvZmZzZXRjZWxkYTYxMDcgPSAwOw0KICAgICAgICAgICAgbGdjZWxkYTYxMDcuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKGQsIGkpIHsNCiAgICAgICAgICAgICAgICBsZXQgeCA9IG9mZnNldGNlbGRhNjEwNzsNCiAgICAgICAgICAgICAgICBvZmZzZXRjZWxkYTYxMDcgKz0gYW5jaG9Ob2Rvcyh0aGlzKSArIDEwOw0KICAgICAgICAgICAgICAgIHJldHVybiBgdHJhbnNsYXRlKCR7eH0sJHtoZWlnaHQgKyAxMH0pYDsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgc3ZnTGV5ZW5kYUhvcml6b250YWwuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsMjApJw0KICAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICAgIGlmICh2YWxvck1heGltb0RhdG9zID4gMCAmJiB2YWxvck1pbmltb0RhdG9zIDwgMCApIA0KICAgICAgICB7DQogICAgICAgICAgICBsaW5lYUNlcm8gPSBzdmcuYXBwZW5kKCJsaW5lIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdsaW5lYUNlcm8nKQ0KICAgICAgICAgICAgLmF0dHIoIngxIiwgMCkNCiAgICAgICAgICAgIC5hdHRyKCJ5MSIsIGVqZVkoMCkpDQogICAgICAgICAgICAuYXR0cigieDIiLCB3aWR0aCkNCiAgICAgICAgICAgIC5hdHRyKCJ5MiIsIGVqZVkoMCkpDQogICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuYXR0cigic3Ryb2tlIiwgIiNBOUE5QTkiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UtZGFzaGFycmF5IiwgKCI1LCAzIikpDQogICAgICAgICAgICA7DQogICAgICAgIH0NCiAgICAgICAgbGluZWFzX3NlcmllcyA9IHN2Zy5zZWxlY3RBbGwoIi5saW5lYXNfc2VyaWVzIikNCiAgICAgICAgICAgIC5kYXRhKHNlcmllc0xpbmVhcykNCiAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgiZyIpDQogICAgICAgICAgICA7DQogICAgICAgIGxpbmVhc19zZXJpZXMuYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsaW5lIGxpbmVjZWxkYTYxMDciKQ0KICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gbGluZWFfZ3JhZmljbyhkLnZhbHVlcyk7IH0pDQogICAgICAgICAgICAuYXR0cigiZGF0YS1sZWdlbmQiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lIH0pDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBjb2xvcihkLm5hbWUpOyB9KTsNCiAgICAgICAgcHVudG9zQWlzbGFkb3MgPSBzdmcuc2VsZWN0QWxsKCIuZG90IikNCiAgICAgICAgICAgIC5kYXRhKHNlcmllc0xpbmVhcykuZW50ZXIoKQ0KICAgICAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY2lyY2xlLWdyb3VwJykNCiAgICAgICAgICAgIC5zdHlsZSgiZmlsbCIsIGZ1bmN0aW9uIChkLCBpMSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcihkLm5hbWUpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgcHVudG9zQWlzbGFkb3Muc2VsZWN0QWxsKCIuZG90IikNCiAgICAgICAgICAgIC5kYXRhKGQgPT4gZC52YWx1ZXMpLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImNpcmNsZSIpIC8vIFVzZXMgdGhlIGVudGVyKCkuYXBwZW5kKCkgbWV0aG9kDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiZG90IikgLy8gQXNzaWduIGEgY2xhc3MgZm9yIHN0eWxpbmcNCiAgICAgICAgICAgIC5hdHRyKCJjeCIsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiBlamVYKGQuZmVjaGEpIH0pDQogICAgICAgICAgICAuYXR0cigiY3kiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZWplWShkLnZhbG9yX3NlcmllKSB9KQ0KICAgICAgICAgICAgLmF0dHIoInIiLCAzKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgZnVuY3Rpb24gKGQsIGkpIHsNCiAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNEaW1lbnNpb25FeHQrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGQudmFsb3Jfc2VyaWUgPT0gIidudWxsJyIgfHwgaXNOYU4oZC52YWxvcl9zZXJpZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCAmJiBpIDwgbkVsZW1lbnRvc1BvclNlcmllKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSkpICYmIChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IG5FbGVtZW50b3NQb3JTZXJpZSAmJiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIxIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgdHJhbnNpdGlvbihkMy5zZWxlY3RBbGwoIi5saW5lY2VsZGE2MTA3IikpOw0KICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24gPSBzdmcuYXBwZW5kKCJnIik7IA0KICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24uYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJtb3VzZS1saW5lY2VsZGE2MTA3IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgIiMwMDAwMDAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiMXB4IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgNSIpKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtbGluZS1ob3Jpem9udGFsY2VsZGE2MTA3IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgIiMwMDAwMDAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiMXB4IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgNSIpKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgcmF0b25Qb3JMaW5lYSA9IGxpbmVhc1ZlcnRIb3JSYXRvbi5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNjEwNyIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpDQogICAgICAgICAgICAuZW50ZXIoKQ0KICAgICAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtcGVyLWxpbmVjZWxkYTYxMDciKTsNCiAgICAgICAgICAgIC8vVGFidWxhY2nDs24gZGVzY3VhZHJhZGE6DQogICAgICAgICAgICAgICAgcmF0b25Qb3JMaW5lYS5hcHBlbmQoImNpcmNsZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJyIiwgNCkNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yKGQubmFtZSk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgiZmlsbCIsICIjRkZGRkZGIikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiM3B4IikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICByYXRvblBvckxpbmVhLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImZvbnQtc2l6ZSIsICIxNnB4IikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJ0ZXh0LWRlY29yYXRpb24iLCAidW5kZXJsaW5lIikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMTAsMykiKTsNCiAgICAgICAgICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24uYXBwZW5kKCJyZWN0IikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3JlY3RjZWxkYTYxMDcnKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigid2lkdGgiLCB3aWR0aCkNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIGhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAibm9uZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJwb2ludGVyLWV2ZW50cyIsICJhbGwiKQ0KICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZWNlbGRhNjEwNyIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNjEwNyIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE2MTA3IGNpcmNsZSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE2MTA3IHRleHQiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXMiKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXNfTGV5ZW5kYVkiKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZWNlbGRhNjEwNyIpLnN0eWxlKCJvcGFjaXR5IiwgIjAuNjUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNjEwNyIpLnN0eWxlKCJvcGFjaXR5IiwgIjAuNjUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE2MTA3IGNpcmNsZSIpLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE2MTA3IHRleHQiKS5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXMiKS5zdHlsZSgnZGlzcGxheScsICdibG9jaycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzX0xleWVuZGFZIikuc3R5bGUoJ2Rpc3BsYXknLCAnYmxvY2snKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJMaW5lYXNQdW50b3MoJ2NlbGRhNjEwNycsIGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgaGVpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckNvbnRlbmlkb0dsb2JvKGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBtYXJnaW4sIGNvbG9yLCAnIy4jIzAsJykNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW1vdmUiLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyTGluZWFzUHVudG9zKCdjZWxkYTYxMDcnLCBkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIGhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJDb250ZW5pZG9HbG9ibyhkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgbWFyZ2luLCBjb2xvciwgJyMuIyMwLCcpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICApOw0KPC9zY3JpcHQ+DQo8L2Rpdj48ZGl2IENsYXNzPSJ6b25hX21hc19pbmZvIj48ZGl2IGlkPSJjY2MiIGNsYXNzPSJib3hfbGltcGlvIGJveCI+PGltZyBpZD0iYWFhYSIgY2xhc3M9Imljb25vX2Rlc2NhcmdhIiBzcmM9ImltYWdlbmVzL2ljb25vX2Rlc2NhcmdhLnBuZyIgYWx0PSIiIHRpdGxlPSIiID48ZGl2IGlkPSJjYXBhX29wY2lvbmVzX2Rlc2NhcmdhcyIgY2xhc3M9Im92ZXJsYXkgbWVudV9vcGNpb25lcyByZXByZXNlbnRhY2lvbl92aXN1YWxpemFjaW9uIHNvbWJyYV9wZXJpbWV0cmFsIiA+PGg0PkRlc2NhcmdhczogPC9oND48dWwgaWQ9Im1lbnUxIiA+PGxpIGlkPSJvcHRfMS4zIiBvbmNsaWNrPSJzYXZlU3ZnQXNQbmcoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NlbGRhNjEwNycpLCAnUG9ibGFjacOzbi5wbmcnLCB7bGVmdDogLTIwLCB3aWR0aDogNDg1LCBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZGRkZGJ30pOyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fcG5nLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+SW1hZ2VuIFBORzwvbGk+PGEgaHJlZj0iIyIgaWQ9ImRlc2NhcmdhNjEwNyI+PGxpID48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19zdmcucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5JbWFnZW4gU1ZHPC9saT48L2E+PHNjcmlwdD5kMy5zZWxlY3QoIiNkZXNjYXJnYTYxMDciKS5vbigiY2xpY2siLCBmdW5jdGlvbigpe2QzLnNlbGVjdCh0aGlzKS5hdHRyKCJocmVmIiwgJ2RhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCwnICsgYnRvYSgnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iSVNPLTg4NTktMSIgPz5cclxuPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczphdHRyaWI9Imh0dHA6Ly93d3cuY2FydG8ubmV0L2F0dHJpYiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM6YTM9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iIGEzOnNjcmlwdEltcGxlbWVudGF0aW9uPSJBZG9iZSIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb247IHRleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTsgaW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eTsgZmlsbC1ydWxlOmV2ZW5vZGQ7IGNsaXAtcnVsZTpldmVub2RkOyIgd2lkdGg9IjQ1MCIgaGVpZ2h0PSI5MDAiPjxzdHlsZT4gdGV4dHtmb250LXNpemU6IDEycHg7Y29sb3I6ICNBOUE5QTk7Zm9udC1mYW1pbHk6IEFyaWFsO2ZpbGw6ICNBOUE5QTk7fSAubGluZSB7ZmlsbDogbm9uZTt9PC9zdHlsZT4nICsgZDMuc2VsZWN0KCIjY2VsZGE2MTA3IikuaHRtbCgpICsgJzwvc3ZnPicgICkpLmF0dHIoImRvd25sb2FkIiwgIlBvYmxhY2nDs24uc3ZnIil9KTwvc2NyaXB0PjxhIGhyZWY9InByb2Nlc29fZGVzY2FyZ2FfZXhjZWxfY3N2LmFzcHg/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmaWRwPTEwMDAxJklkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTYxMDcmSWRfVGVycml0b3Jpbz0wMCZJZF9UZXJyaXRvcmlvX1BhZHJlPUNDQTAyJmlkaW9tYT0xJlRpcG9fRmljaGVyb19HZW5lcmFkbz1leGNlbCI+PGxpIGlkPSJvcHRfMS43Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19leGNlbC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkRhdG9zIEV4Y2VsPC9saT48L2E+PGEgaHJlZj0icHJvY2Vzb19kZXNjYXJnYV9leGNlbF9jc3YuYXNweD9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NjEwNyZJZF9UZXJyaXRvcmlvPTAwJklkX1RlcnJpdG9yaW9fUGFkcmU9Q0NBMDImaWRpb21hPTEmVGlwb19GaWNoZXJvX0dlbmVyYWRvPWNzdiI+PGxpIGlkPSJvcHRfMS44Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19jc3YucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5EYXRvcyBDU1Y8L2xpPjwvYT48L3VsPjwvZGl2PjwvZGl2PjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGNsYXNzPSJpY29ub19kZXNjYXJnYSIgc3JjPSJpbWFnZW5lcy9pY29ub19tYXMucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfbWFzb3BjaW9uZXMiIGNsYXNzPSJvdmVybGF5IG1lbnVfb3BjaW9uZXMgcmVwcmVzZW50YWNpb25fdmlzdWFsaXphY2lvbiBzb21icmFfcGVyaW1ldHJhbCIgPjxoND5Nw6FzIG9wY2lvbmVzOjwvaDQ+PHVsIGlkPSJtZW51MSIgPjxhIGhyZWY9IiNleDEiIGlkPSJEQVRPUyYwMCY2MTA3JkNDQTAyIiByZWw9Im1vZGFsOm9wZW4iPjxsaSBpZD0ib3B0XzEuMyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fZ3JpZC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPlZlciBkYXRvczwvbGk+PC9hPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBDbGFzcz0idGl0dWxvX2NlbGRhIj5Qb2JsYWNpw7NuPC9kaXY+PC90ZD4NCjx0ZCBjbGFzcz0iY2VsZGFfdGlwb19maWxhXzIiPjxkaXYgY2xhc3M9ImNsYXNlX2NhcGFfdW5pZGFkX3Zpc3VhbGl6YWNpb24iIHN0eWxlPSJtaW4taGVpZ2h0OiAxNzlweDsiPjxkaXYgaWQ9ImNhcGFfZGlhZ3JhbWFjZWxkYTYxMDgiID4NCjxkaXYgaWQ9ImNhcGFfRXNwZXJhbmRvY2VsZGE2MTA4IiBjbGFzcz0ibG9hZC1jb250YWluZXIgbG9hZGVyY2VsZGE2MTA4Ij48L2Rpdj4NCjwvZGl2Pg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCnBhdGguc2xpY2Ugew0KICAgIHN0cm9rZS13aWR0aDogMnB4Ow0KfQ0KcG9seWxpbmUgew0KICAgIHN0cm9rZTogIzhBODk4NTsNCiAgICBzdHJva2Utd2lkdGg6IDJweDsNCiAgICBmaWxsOiBub25lOw0KfQ0KLmxhYmVsVmFsdWUgew0KICAgIGZvbnQtc2l6ZTogNjAlOw0KICAgIG9wYWNpdHk6IC41Ow0KfQ0KLnRvb2xUaXAgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBkaXNwbGF5OiBub25lOw0KICAgIHdpZHRoOiBhdXRvOw0KICAgIGhlaWdodDogYXV0bzsNCiAgICBiYWNrZ3JvdW5kOiBub25lIHJlcGVhdCBzY3JvbGwgMCAwIHdoaXRlOw0KICAgIGJvcmRlcjogMCBub25lOw0KICAgIGJvcmRlci1yYWRpdXM6IDhweCA4cHggOHB4IDhweDsNCiAgICBib3gtc2hhZG93OiAtM3B4IDNweCAxNXB4ICM4ODg4ODg7DQogICAgY29sb3I6IGJsYWNrOw0KICAgIGZvbnQ6IDEycHg7DQogICAgcGFkZGluZzogNXB4Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCnRleHQgew0KICAgIGZvbnQ6IDEycHg7DQogICAgY29sb3I6ICNBOUE5QTk7DQogICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgIGZpbGw6ICNBOUE5QTk7DQp9DQogICAgICAgIEAtd2Via2l0LWtleWZyYW1lcyBsb2FkOCB7DQogICAgICAgICAgICAwJSB7DQogICAgICAgICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIDEwMCUgew0KICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsNCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIEBrZXlmcmFtZXMgbG9hZDggew0KICAgICAgICAgICAgMCUgew0KICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAxMDAlIHsNCiAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAubG9hZC1jb250YWluZXIgew0KICAgICAgICAgICAgcG9zaXRpb246IG9ic29sdXRlOw0KICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgICAgICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQp9DQogICAgICAgIC5sb2FkZXJjZWxkYTYxMDgsDQogICAgICAgIC5sb2FkZXJjZWxkYTYxMDg6YWZ0ZXIgew0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgd2lkdGg6IDEzMHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMzBweDsNCiAgICAgICAgfQ0KICAgICAgICAubG9hZGVyY2VsZGE2MTA4IHsNCiAgICAgICAgICAgIG1hcmdpbjogMjRweCAxNjBweDsNCiAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogICAgICAgICAgICBmb250LXNpemU6IDEwcHg7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICB0ZXh0LWluZGVudDogLTk5OTllbTsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDEuMWVtIHNvbGlkICNGRjgwNTQ7DQogICAgICAgICAgICBib3JkZXItcmlnaHQ6IDEuMWVtIHNvbGlkICNGRjgwNTQ7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxLjFlbSBzb2xpZCAjRkY4MDU0Ow0KICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDEuMWVtIHNvbGlkICNGRkU5REY7DQogICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7DQogICAgICAgICAgICAtd2Via2l0LWFuaW1hdGlvbjogbG9hZDggMS4xcyBpbmZpbml0ZSBsaW5lYXI7DQogICAgICAgICAgICBhbmltYXRpb246IGxvYWQ4IDEuMXMgaW5maW5pdGUgbGluZWFyOw0KICAgICAgICB9DQo8L3N0eWxlPg0KPHNjcmlwdD4NCnZhciBnbG9ib19HcmFmaWNvX3NlY3RvcmVzOw0KdmFyIHRleHQ7DQogICAgZnVuY3Rpb24gQ2FsY3VsYXJBbmNob01hcmdlbmVzSG9yaXpvbnRhbGVzKHBTZXJpZURhdG9zLCBwQW5jaG9HcmFmaWNvKSB7DQogICAgICAgIHZhciBjYWRlbmFNYXlvciA9ICc7Jw0KICAgICAgICB2YXIgbWFyZ2VuUGl4ZWxlcyA9IDA7DQogICAgICAgIGZvciAoaSA9IDA7IGkgPCBwU2VyaWVEYXRvcy5sZW5ndGg7IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKHBTZXJpZURhdG9zW2ldLm5vbWJyZUluZGljYWRvckNvbnRleHRvLmxlbmd0aCA+IGNhZGVuYU1heW9yLmxlbmd0aCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjYWRlbmFNYXlvciA9IHBTZXJpZURhdG9zW2ldLm5vbWJyZUluZGljYWRvckNvbnRleHRvOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhbnZhc01lZGljaW9uQW5jaG9zSCA9IGQzLnNlbGVjdCgiI2NhcGFfZGlhZ3JhbWFjZWxkYTYxMDgiKS5hcHBlbmQoImNhbnZhcyIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnY2FudmFzTWVkaWNpb25BbmNob3NIY2VsZGE2MTA4JykNCiAgICAgICAgICAgIC5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpDQogICAgICAgICAgICAuYXR0cigid2hpdGUtc3BhY2UiLCAibm93cmFwIikNCiAgICAgICAgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYW52YXNNZWRpY2lvbkFuY2hvc0hjZWxkYTYxMDgiKTsNCiAgICAgICAgY3R4ID0gYy5nZXRDb250ZXh0KCIyZCIpOw0KICAgICAgICBjdHguZm9udCA9ICIxMnB4IEFyaWFsIjsNCiAgICAgICAgdHh0ID0gY2FkZW5hTWF5b3IgKyAnIC0gJw0KICAgICAgICBtYXJnZW5QaXhlbGVzID0gY3R4Lm1lYXN1cmVUZXh0KHR4dCkud2lkdGg7DQogICAgICAgIGNhbnZhc01lZGljaW9uQW5jaG9zSC5yZW1vdmUoKTsNCiAgICAgICAgcmV0dXJuIG1hcmdlblBpeGVsZXM7DQogICAgfQ0KICAgIGZ1bmN0aW9uIG1pZEFuZ2xlKGQpew0KICAgICAgICByZXR1cm4gZC5zdGFydEFuZ2xlICsgKGQuZW5kQW5nbGUgLSBkLnN0YXJ0QW5nbGUpLzI7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGhleCAoYykgew0KCSAgICB2YXIgcyA9ICIwMTIzNDU2Nzg5YWJjZGVmIjsNCgkgICAgdmFyIGkgPSBwYXJzZUludCAoYyk7DQoJICAgIGlmIChpID09IDAgfHwgaXNOYU4gKGMpKQ0KCSAgICAgICAgcmV0dXJuICIwMCI7DQoJICAgIGkgPSBNYXRoLnJvdW5kIChNYXRoLm1pbiAoTWF0aC5tYXggKDAsIGkpLCAyNTUpKTsNCgkgICAgcmV0dXJuIHMuY2hhckF0ICgoaSAtIGkgJSAxNikgLyAxNikgKyBzLmNoYXJBdCAoaSAlIDE2KTsNCiAgICB9DQogICAgZnVuY3Rpb24gY29udmVydFRvSGV4IChyZ2IpIHsNCgkgICAgcmV0dXJuIGhleChyZ2JbMF0pICsgaGV4KHJnYlsxXSkgKyBoZXgocmdiWzJdKTsNCiAgICB9DQogICAgZnVuY3Rpb24gdHJpbSAocykgeyByZXR1cm4gKHMuY2hhckF0KDApID09ICcjJykgPyBzLnN1YnN0cmluZygxLCA3KSA6IHMgfQ0KICAgIGZ1bmN0aW9uIGNvbnZlcnRUb1JHQiAoaGV4KSB7DQoJICAgIHZhciBjb2xvciA9IFtdOw0KCSAgICBjb2xvclswXSA9IHBhcnNlSW50ICgodHJpbShoZXgpKS5zdWJzdHJpbmcgKDAsIDIpLCAxNik7DQoJICAgIGNvbG9yWzFdID0gcGFyc2VJbnQgKCh0cmltKGhleCkpLnN1YnN0cmluZyAoMiwgNCksIDE2KTsNCgkgICAgY29sb3JbMl0gPSBwYXJzZUludCAoKHRyaW0oaGV4KSkuc3Vic3RyaW5nICg0LCA2KSwgMTYpOw0KCSAgICByZXR1cm4gY29sb3I7DQogICAgfQ0KICAgIGZ1bmN0aW9uIENhbGN1bGFyR3JhZGllbnRlQ29sb3Jlc19EaWFncmFtYVNlY3RvcmVzMihjb2xvclN0YXJ0LGNvbG9yRW5kLGNvbG9yQ291bnQpew0KCSAgICB2YXIgc3RhcnQgPSBjb252ZXJ0VG9SR0IgKGNvbG9yU3RhcnQpOyAgICANCgkgICAgdmFyIGVuZCAgID0gY29udmVydFRvUkdCIChjb2xvckVuZCk7ICAgIA0KCSAgICB2YXIgbGVuID0gY29sb3JDb3VudDsNCgkgICAgdmFyIGFscGhhID0gMC4wOw0KCSAgICB2YXIgZ3JhZGllbnRlID0gW107DQoJICAgIGZvciAoaSA9IDA7IGkgPD0gbGVuOyBpKyspIHsNCgkJICAgIHZhciBjID0gW107DQogICAgICAgICAgICBpZiAoaSA9PSAwKQ0KICAgICAgICAgICAgew0KCQkgICAgICAgIGNbMF0gPSBlbmRbMF07DQoJCSAgICAgICAgY1sxXSA9IGVuZFsxXTsNCgkJICAgICAgICBjWzJdID0gZW5kWzJdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoaSA9PSBsZW4pDQogICAgICAgICAgICB7DQoJCSAgICAgICAgY1swXSA9IHN0YXJ0WzBdOw0KCQkgICAgICAgIGNbMV0gPSBzdGFydFsxXTsNCgkJICAgICAgICBjWzJdID0gc3RhcnRbMl07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQoJCSAgICAgICAgYWxwaGEgKz0gKDEuMC9sZW4pOw0KCQkgICAgICAgIGNbMF0gPSBzdGFydFswXSAqIGFscGhhICsgKDEgLSBhbHBoYSkgKiBlbmRbMF07DQoJCSAgICAgICAgY1sxXSA9IHN0YXJ0WzFdICogYWxwaGEgKyAoMSAtIGFscGhhKSAqIGVuZFsxXTsNCgkJICAgICAgICBjWzJdID0gc3RhcnRbMl0gKiBhbHBoYSArICgxIC0gYWxwaGEpICogZW5kWzJdOw0KICAgICAgICAgICAgfQ0KCQkgICAgZ3JhZGllbnRlLnB1c2goICcjJyArIGNvbnZlcnRUb0hleCAoYykpOw0KCSAgICB9DQoJICAgIHJldHVybiBncmFkaWVudGU7DQogICAgfQ0KICAgIGZ1bmN0aW9uIENhbGN1bGFyUG9yY2VudGFqZVZhbG9yKHBBcnJheURhdG9zLCBwVmFsb3JDYWxjdWxvKQ0KICAgIHsNCiAgICAgICAgdmFyIHRvdGFsVmFsb3IgPSAwOw0KICAgICAgICB2YXIgcG9yY2VudGFqZSA9IDA7DQogICAgICAgIGZvciAoY0VsZW1lbnRvID0gMDsgY0VsZW1lbnRvIDwgcEFycmF5RGF0b3MubGVuZ3RoOyBjRWxlbWVudG8rKykNCiAgICAgICAgew0KICAgICAgICAgICAgdG90YWxWYWxvciA9IHRvdGFsVmFsb3IgKyBwYXJzZUludChwQXJyYXlEYXRvc1tjRWxlbWVudG9dLnZhbG9yKTsNCiAgICAgICAgfQ0KICAgICAgICBwb3JjZW50YWplID0gKDEwMCAqIHBWYWxvckNhbGN1bG8pIC8gdG90YWxWYWxvcjsNCiAgICAgICAgcmV0dXJuICAoKE1hdGgucm91bmQocG9yY2VudGFqZSAqIDEwKSAvIDEwKSArICcnKS5yZXBsYWNlKCcuJywnLCcpOw0KICAgIH0NCmQzLmNzdigiaHR0cDovL3d3dy5wb3J0YWxlc3RhZGlzdGljby5jb20vc2VydmljaW9fb2J0ZW5jaW9uX2RhdG9zX3Zpc3VhbGl6YWNpb25lcy5hc214L09idGVuZXJfRGF0b3M/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmcElkX1BhZ2luYV9BY3RpdmE9MTAwMDEmcElkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTYxMDgmcElkX1RlcnJpdG9yaW89MDAmcElkaW9tYT0xJnBJZF9yZWdpb249ZXMtZXMiKS50aGVuKA0KICAgIGZ1bmN0aW9uIChkYXRhKSB7DQogICAgICAgIHZhciBzdmc7DQogICAgICAgIHZhciBhcmM7DQogICAgICAgIHZhciBvdXRlckFyYzsNCiAgICAgICAgdmFyIHBpZTsNCiAgICAgICAgdmFyIHNsaWNlOw0KICAgICAgICB2YXIgcG9seWxpbmU7DQogICAgICAgIHZhciBtYXJnZW5JenF1aWVyZG8gPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuRGVyZWNobyA9IDA7DQogICAgICAgIHZhciBtYXJnZW5TdXBlcmlvciA9IDA7DQogICAgICAgIHZhciBtYXJnZW5JbmZlcmlvciA9IDA7DQogICAgICAgIHZhciB3aWR0aDsNCiAgICAgICAgdmFyIGhlaWdodDsNCiAgICAgICAgdmFyIHJhZGl1czsNCiAgICAgICAgdmFyIGNvbG9yOw0KICAgICAgICB2YXIgY2F0ZWdvcnk7DQogICAgICAgIHZhciBlbGVtZW50X2NhcGFfZXNwZXJhbmRvOw0KICAgICAgICBtYXJnZW5JenF1aWVyZG8gPSBDYWxjdWxhckFuY2hvTWFyZ2VuZXNIb3Jpem9udGFsZXMoZGF0YSwgNDUwKTsNCiAgICAgICAgbWFyZ2VuRGVyZWNobyA9IG1hcmdlbkl6cXVpZXJkbzsNCiAgICAgICAgbWFyZ2VuU3VwZXJpb3IgPSAxNjsNCiAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSAxNjsNCiAgICAgICAgd2lkdGggPSA0NTAgLSBtYXJnZW5JenF1aWVyZG8gLSBtYXJnZW5EZXJlY2hvOw0KICAgICAgICBoZWlnaHQgPSAxNzkgLSBtYXJnZW5TdXBlcmlvciAtIG1hcmdlbkluZmVyaW9yOw0KICAgICAgICByYWRpdXMgPSAoTWF0aC5taW4od2lkdGgsIGhlaWdodCkgKiAwLjYpOw0KICAgICAgICBlbGVtZW50X2NhcGFfZXNwZXJhbmRvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhcGFfRXNwZXJhbmRvY2VsZGE2MTA4Iik7DQogICAgICAgIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG8uY2xhc3NMaXN0LnJlbW92ZSgibG9hZGVyY2VsZGE2MTA4Iik7DQogICAgICAgIGNhdGVnb3J5ID0gZDMua2V5cyhkYXRhWzBdKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKGtleSAhPT0gImFuaW9fcGVyaW9kbyIgJiYga2V5ICE9PSAiZmVjaGFfcGVyaW9kb19zZXJpZSIgJiYga2V5ICE9PSAibm9tYnJlX3BlcmlvZG8iICYmIGtleSAhPT0gInBlcmlvZG8iKTsgfSk7DQogICAgICAgIGNvbG9yID0gIGQzLnNjYWxlT3JkaW5hbChDYWxjdWxhckdyYWRpZW50ZUNvbG9yZXNfRGlhZ3JhbWFTZWN0b3JlczIoJyNGRkU5REYnLCAnI0ZGODA1NCcsIGRhdGEubGVuZ3RoIC0gMSkpOw0KICAgICAgICBhcmMgPSBkMy5hcmMoKQ0KICAgICAgICAgICAgLm91dGVyUmFkaXVzKHJhZGl1cykNCiAgICAgICAgICAgIC5pbm5lclJhZGl1cyhyYWRpdXMgLyAzLjUpDQogICAgICAgICAgICAuY29ybmVyUmFkaXVzKDIpOw0KICAgICAgICBwaWUgPSBkMy5waWUoKQ0KICAgICAgICAgICAgLnNvcnQobnVsbCkNCiAgICAgICAgICAgIC52YWx1ZShmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC52YWxvcjsgfSkNCiAgICAgICAgICAgIC5wYWRBbmdsZSgwLjAyKQ0KICAgICAgICAuc3RhcnRBbmdsZSgtMC41ICogTWF0aC5QSSkNCiAgICAgICAgLmVuZEFuZ2xlKDAuNSAqIE1hdGguUEkpDQogICAgICAgIDsNCiAgICAgICAgc3ZnID0gZDMuc2VsZWN0KCcjY2FwYV9kaWFncmFtYWNlbGRhNjEwOCcpLmFwcGVuZCgic3ZnIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdjZWxkYTYxMDgnKQ0KICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgNDUwKQ0KICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIDE3OSkNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgyMjUsMTQzLjIpIikNCiAgICAgICAgc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAic2xpY2VzIik7DQogICAgICAgIHN2Zy5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxhYmVsTmFtZSIpOw0KICAgICAgICBzdmcuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsYWJlbFZhbHVlIik7DQogICAgICAgIHN2Zy5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxpbmVzIik7DQogICAgICAgIG91dGVyQXJjID0gZDMuYXJjKCkNCiAgICAgICAgICAgIC5pbm5lclJhZGl1cyhyYWRpdXMgKiAwLjkpDQogICAgICAgICAgICAub3V0ZXJSYWRpdXMocmFkaXVzICogMC45KTsNCiAgICAgICAgZ2xvYm9fR3JhZmljb19zZWN0b3JlcyA9IGQzLnNlbGVjdCgiYm9keSIpLmFwcGVuZCgiZGl2IikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdnbG9ib19HcmFmaWNvX3NlY3RvcmVzJykNCiAgICAgICAgICAgIC5zdHlsZSgncG9zaXRpb24nLCAnYWJzb2x1dGUnKQ0KICAgICAgICAgICAgLnN0eWxlKCdwYWRkaW5nJywgNikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJ0b29sVGlwIikNCiAgICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7DQogICAgc3ZnLnNlbGVjdCgiLnNsaWNlcyIpLnNlbGVjdEFsbCgicGF0aC5zbGljZSIpDQogICAgICAgIC5kYXRhKHBpZShkYXRhKSwgZnVuY3Rpb24oZCl7DQogICAgICAgICAgICByZXR1cm4gZC5kYXRhLm5vbWJyZUluZGljYWRvckNvbnRleHRvDQogICAgICAgIH0pDQogICAgOw0KICAgIHNsaWNlID0gc3ZnLnNlbGVjdCgiLnNsaWNlcyIpLnNlbGVjdEFsbCgicGF0aC5zbGljZSIpDQogICAgICAgIC5kYXRhKHBpZShkYXRhKSwgZnVuY3Rpb24oZCl7IHJldHVybiBkLmRhdGEubm9tYnJlSW5kaWNhZG9yQ29udGV4dG8gfSk7DQogICAgc2xpY2UuZW50ZXIoKQ0KICAgICAgICAuYXBwZW5kKCJwYXRoIikNCiAgICAgICAgLnN0eWxlKCJmaWxsIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGNvbG9yKGQuZGF0YS5ub21icmVJbmRpY2Fkb3JDb250ZXh0byk7IH0pDQogICAgICAgIC5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24oZCl7DQogICAgICAgICAgICBkMy5zZWxlY3QodGhpcykNCiAgICAgICAgICAgIC5zdHlsZSgiY3Vyc29yIiwgImRlZmF1bHQiKQ0KICAgICAgICAgICAgLnRyYW5zaXRpb24oKQ0KICAgICAgICAgICAgLmR1cmF0aW9uKCIxNTAiKQ0KICAgICAgICAuc3R5bGUoIm9wYWNpdHkiLCAiMC41IikNCiAgICAgICAgfSkNCiAgICAgICAgLm9uKCJtb3VzZW1vdmUiLCBmdW5jdGlvbihkKXsNCiAgICAgICAgICAgIGdsb2JvX0dyYWZpY29fc2VjdG9yZXMuc3R5bGUoImxlZnQiLCBkMy5ldmVudC5wYWdlWCsxMCsicHgiKTsNCiAgICAgICAgICAgIGdsb2JvX0dyYWZpY29fc2VjdG9yZXMuc3R5bGUoInRvcCIsIGQzLmV2ZW50LnBhZ2VZLTI1KyJweCIpOw0KICAgICAgICAgICAgZ2xvYm9fR3JhZmljb19zZWN0b3Jlcy5zdHlsZSgiZGlzcGxheSIsICJpbmxpbmUtYmxvY2siKTsNCiAgICAgICAgICAgIGdsb2JvX0dyYWZpY29fc2VjdG9yZXMuaHRtbCgNCiAgICAgICAgICAgICAgICAgICAgKGQuZGF0YS5ldGlxdWV0YXBlcmlvZG8pICsgIjombmJzcDsiICsgKGQuZGF0YS5ub21icmVwZXJpb2RvKSArICImbmJzcDsiICsgKGQuZGF0YS5hbmlvKSArICI8YnI+IiArICAgICAgICAgICAgICAgICAgICAgKGQuZGF0YS5ub21icmVJbmRpY2Fkb3JSZWNvcnRhZG8pICsgIjxicj48c3BhbiBzdHlsZT0nZGlzcGxheTpibG9jazsgbWFyZ2luLXRvcDo1cHg7Jz48Yj4iICsgKGQuZGF0YS52YWxvckZvcm1hdGVhZG8pICsgIjwvYj4mbmJzcDsiICsgZC5kYXRhLm1hZ25pdHVkVmFsb3IgKyAiJm5ic3A7KCIgKyBDYWxjdWxhclBvcmNlbnRhamVWYWxvcihkYXRhLCBkLmRhdGEudmFsb3IpICsiJSk8L3NwYW4+IiAgICAgICAgICAgICAgICAgKTsgICAgICAgIH0pDQogICAgICAgIC5vbigibW91c2VvdXQiLCBmdW5jdGlvbihkKXsNCiAgICAgICAgICAgIGdsb2JvX0dyYWZpY29fc2VjdG9yZXMuc3R5bGUoImRpc3BsYXkiLCAibm9uZSIpOw0KICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpDQogICAgICAgICAgICAgICAgLnN0eWxlKCJjdXJzb3IiLCAiZGVmYXVsdCIpDQogICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKQ0KICAgICAgICAgICAgICAgIC5kdXJhdGlvbigiMzAwIikNCiAgICAgICAgICAgICAgICAuc3R5bGUoIm9wYWNpdHkiLCAiMSIpDQogICAgICAgICAgICB9KQ0KICAgICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIDA7IH0pLmR1cmF0aW9uKDUwMCkNCiAgICAgICAgLmF0dHJUd2VlbignZCcsIGZ1bmN0aW9uKGQpIHsNCiAgICAgICAgICAgIHZhciBpID0gZDMuaW50ZXJwb2xhdGUoZC5zdGFydEFuZ2xlKzAuMSwgZC5lbmRBbmdsZSk7DQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgICAgIGQuZW5kQW5nbGUgPSBpKHQpOw0KICAgICAgICAgICAgICAgIHJldHVybiBhcmMoZCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIDsNCiAgICB0ZXh0ID0gc3ZnLnNlbGVjdCgiLmxhYmVsTmFtZSIpLnNlbGVjdEFsbCgidGV4dCIpDQogICAgICAgIC5kYXRhKHBpZShkYXRhKSwgZnVuY3Rpb24oZCl7IHJldHVybiBkLmRhdGEubm9tYnJlSW5kaWNhZG9yQ29udGV4dG8gfSk7DQogICAgdGV4dC5lbnRlcigpDQogICAgICAgIC5hcHBlbmQoInRleHQiKQ0KICAgICAgICAuYXR0cigiZHkiLCAiLjM1ZW0iKQ0KICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7DQogICAgICAgICAgICByZXR1cm4gKGQuZGF0YS5ub21icmVJbmRpY2Fkb3JDb250ZXh0byk7DQogICAgICAgIH0pDQogICAgLnN0eWxlKCJvcGFjaXR5IiwgIjAiKQ0KICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTAwKQ0KICAgIC5hdHRyVHdlZW4oInRyYW5zZm9ybSIsIGZ1bmN0aW9uKGQpIHsNCiAgICAgICAgdGhpcy5fY3VycmVudCA9IHRoaXMuX2N1cnJlbnQgfHwgZDsNCiAgICAgICAgdmFyIGludGVycG9sYXRlID0gZDMuaW50ZXJwb2xhdGUodGhpcy5fY3VycmVudCwgZCk7DQogICAgICAgIHRoaXMuX2N1cnJlbnQgPSBpbnRlcnBvbGF0ZSgwKTsNCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHZhciBkMiA9IGludGVycG9sYXRlKHQpOw0KICAgICAgICAgICAgdmFyIHBvcyA9IG91dGVyQXJjLmNlbnRyb2lkKGQyKTsNCiAgICAgICAgcG9zWzBdID0gcmFkaXVzICogKG1pZEFuZ2xlKGQyKSA+IDAgPyAxIDogLTEpOw0KICAgICAgICAgICAgcmV0dXJuICJ0cmFuc2xhdGUoIisgcG9zICsiKSI7DQogICAgICAgIH07DQogICAgfSkNCiAgICAuc3R5bGVUd2VlbigidGV4dC1hbmNob3IiLCBmdW5jdGlvbihkKXsNCiAgICAgICAgdGhpcy5fY3VycmVudCA9IHRoaXMuX2N1cnJlbnQgfHwgZDsNCiAgICAgICAgdmFyIGludGVycG9sYXRlID0gZDMuaW50ZXJwb2xhdGUodGhpcy5fY3VycmVudCwgZCk7DQogICAgICAgIHRoaXMuX2N1cnJlbnQgPSBpbnRlcnBvbGF0ZSgwKTsNCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHZhciBkMiA9IGludGVycG9sYXRlKHQpOw0KICAgICAgICByZXR1cm4gbWlkQW5nbGUoZDIpID4gMCA/ICJzdGFydCI6ImVuZCI7DQogICAgICAgIH07DQogICAgfSkNCiAgICAudHJhbnNpdGlvbigpDQogICAgLmR1cmF0aW9uKDUwMCkNCiAgICAuc3R5bGUoIm9wYWNpdHkiLCAiMSIpDQogICAgdGV4dA0KICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7DQogICAgICAgICAgICByZXR1cm4gKGQuZGF0YS5ub21icmVJbmRpY2Fkb3JDb250ZXh0byk7DQogICAgICAgIH0pOw0KICAgIHBvbHlsaW5lID0gc3ZnLnNlbGVjdCgiLmxpbmVzIikuc2VsZWN0QWxsKCJwb2x5bGluZSIpDQogICAgICAgIC5kYXRhKHBpZShkYXRhKSwgZnVuY3Rpb24oZCl7IHJldHVybiBkLmRhdGEubm9tYnJlSW5kaWNhZG9yQ29udGV4dG8gfSk7DQogICAgcG9seWxpbmUuZW50ZXIoKQ0KICAgICAgICAuYXBwZW5kKCJwb2x5bGluZSIpDQogICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgIiM4QTg5ODUiKQ0KICAgICAgICAuYXR0cigiY2xhc3MiLCAibGluZSIpDQogICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTAwMCkNCiAgICAgICAgLmF0dHJUd2VlbigicG9pbnRzIiwgZnVuY3Rpb24oZCl7DQogICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5fY3VycmVudCB8fCBkOw0KICAgICAgICAgICAgdmFyIGludGVycG9sYXRlID0gZDMuaW50ZXJwb2xhdGUodGhpcy5fY3VycmVudCwgZCk7DQogICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gaW50ZXJwb2xhdGUoMCk7DQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgICAgIHZhciBkMiA9IGludGVycG9sYXRlKHQpOw0KICAgICAgICAgICAgICAgIHZhciBwb3MgPSBvdXRlckFyYy5jZW50cm9pZChkMik7DQogICAgICAgICAgICBwb3NbMF0gPSByYWRpdXMgKiAwLjk1ICogKG1pZEFuZ2xlKGQyKSA+IDAgPyAxIDogLTEpOw0KICAgICAgICAgICAgICAgIHJldHVybiBbYXJjLmNlbnRyb2lkKGQyKSwgb3V0ZXJBcmMuY2VudHJvaWQoZDIpLCBwb3NdOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSk7DQp9KTsNCjwvc2NyaXB0Pg0KPC9kaXY+DTxkaXYgQ2xhc3M9InpvbmFfbWFzX2luZm8iPjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGlkPSJhYWFhIiBjbGFzcz0iaWNvbm9fZGVzY2FyZ2EiIHNyYz0iaW1hZ2VuZXMvaWNvbm9fZGVzY2FyZ2EucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfZGVzY2FyZ2FzIiBjbGFzcz0ib3ZlcmxheSBtZW51X29wY2lvbmVzIHJlcHJlc2VudGFjaW9uX3Zpc3VhbGl6YWNpb24gc29tYnJhX3BlcmltZXRyYWwiID48aDQ+RGVzY2FyZ2FzOiA8L2g0Pjx1bCBpZD0ibWVudTEiID48bGkgaWQ9Im9wdF8xLjMiIG9uY2xpY2s9InNhdmVTdmdBc1BuZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2VsZGE2MTA4JyksICdQb2JsYWNpw7NuIHBvciBzZXhvLnBuZycsIHtsZWZ0OiAtMjAsIHdpZHRoOiA0ODUsIGJhY2tncm91bmRDb2xvcjogJyNGRkZGRkYnfSk7Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19wbmcucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5JbWFnZW4gUE5HPC9saT48YSBocmVmPSIjIiBpZD0iZGVzY2FyZ2E2MTA4Ij48bGkgPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX3N2Zy5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkltYWdlbiBTVkc8L2xpPjwvYT48c2NyaXB0PmQzLnNlbGVjdCgiI2Rlc2NhcmdhNjEwOCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCl7ZDMuc2VsZWN0KHRoaXMpLmF0dHIoImhyZWYiLCAnZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LCcgKyBidG9hKCc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJJU08tODg1OS0xIiA/PlxyXG48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmF0dHJpYj0iaHR0cDovL3d3dy5jYXJ0by5uZXQvYXR0cmliIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxuczphMz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZVNWR1ZpZXdlckV4dGVuc2lvbnMvMy4wLyIgYTM6c2NyaXB0SW1wbGVtZW50YXRpb249IkFkb2JlIiBzdHlsZT0ic2hhcGUtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbjsgdGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5OyBpbWFnZS1yZW5kZXJpbmc6b3B0aW1pemVRdWFsaXR5OyBmaWxsLXJ1bGU6ZXZlbm9kZDsgY2xpcC1ydWxlOmV2ZW5vZGQ7IiB3aWR0aD0iNDUwIiBoZWlnaHQ9IjM1OCI+PHN0eWxlPiB0ZXh0e2ZvbnQtc2l6ZTogMTJweDtjb2xvcjogI0E5QTlBOTtmb250LWZhbWlseTogQXJpYWw7ZmlsbDogI0E5QTlBOTt9IC5saW5lIHtmaWxsOiBub25lO308L3N0eWxlPicgKyBkMy5zZWxlY3QoIiNjZWxkYTYxMDgiKS5odG1sKCkgKyAnPC9zdmc+JyAgKSkuYXR0cigiZG93bmxvYWQiLCAiUG9ibGFjacOzbiBwb3Igc2V4by5zdmciKX0pPC9zY3JpcHQ+PGEgaHJlZj0icHJvY2Vzb19kZXNjYXJnYV9leGNlbF9jc3YuYXNweD9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NjEwOCZJZF9UZXJyaXRvcmlvPTAwJklkX1RlcnJpdG9yaW9fUGFkcmU9Q0NBMDImaWRpb21hPTEmVGlwb19GaWNoZXJvX0dlbmVyYWRvPWV4Y2VsIj48bGkgaWQ9Im9wdF8xLjciPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX2V4Y2VsLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+RGF0b3MgRXhjZWw8L2xpPjwvYT48YSBocmVmPSJwcm9jZXNvX2Rlc2NhcmdhX2V4Y2VsX2Nzdi5hc3B4P3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJmlkcD0xMDAwMSZJZF9DZWxkYV9GaWxhX1BsYW50aWxsYT02MTA4JklkX1RlcnJpdG9yaW89MDAmSWRfVGVycml0b3Jpb19QYWRyZT1DQ0EwMiZpZGlvbWE9MSZUaXBvX0ZpY2hlcm9fR2VuZXJhZG89Y3N2Ij48bGkgaWQ9Im9wdF8xLjgiPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX2Nzdi5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkRhdG9zIENTVjwvbGk+PC9hPjwvdWw+PC9kaXY+PC9kaXY+PGRpdiBpZD0iY2NjIiBjbGFzcz0iYm94X2xpbXBpbyBib3giPjxpbWcgY2xhc3M9Imljb25vX2Rlc2NhcmdhIiBzcmM9ImltYWdlbmVzL2ljb25vX21hcy5wbmciIGFsdD0iIiB0aXRsZT0iIiA+PGRpdiBpZD0iY2FwYV9vcGNpb25lc19tYXNvcGNpb25lcyIgY2xhc3M9Im92ZXJsYXkgbWVudV9vcGNpb25lcyByZXByZXNlbnRhY2lvbl92aXN1YWxpemFjaW9uIHNvbWJyYV9wZXJpbWV0cmFsIiA+PGg0Pk3DoXMgb3BjaW9uZXM6PC9oND48dWwgaWQ9Im1lbnUxIiA+PGEgaHJlZj0iI2V4MSIgaWQ9IkRBVE9TJjAwJjYxMDgmQ0NBMDIiIHJlbD0ibW9kYWw6b3BlbiI+PGxpIGlkPSJvcHRfMS4zIj48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19ncmlkLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+VmVyIGRhdG9zPC9saT48L2E+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IENsYXNzPSJ0aXR1bG9fY2VsZGEiPlBvYmxhY2nDs24gcG9yIHNleG88L2Rpdj4KPC90ZD4NCjwvdHI+DQo8dHI+DQo8dGQgY2xhc3M9InNlcGFyYWRvciI+PGJyPjwvdGQ+DQo8L3RyPg0KPHRyPg0KPHRkIGNsYXNzPSJjZWxkYV90aXBvX2ZpbGFfMiI+PGRpdiBjbGFzcz0iY2xhc2VfY2FwYV91bmlkYWRfdmlzdWFsaXphY2lvbiIgc3R5bGU9Im1pbi1oZWlnaHQ6IDE3OXB4OyI+PGRpdiBpZD0iY2FwYV9kaWFncmFtYWNlbGRhNjEwOSIgPg0KPGRpdiBpZD0iY2FwYV9Fc3BlcmFuZG9jZWxkYTYxMDkiIGNsYXNzPSJsb2FkLWNvbnRhaW5lciBsb2FkZXJjZWxkYTYxMDkiPjwvZGl2Pg0KPC9kaXY+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KcGF0aC5zbGljZSB7DQogICAgc3Ryb2tlLXdpZHRoOiAycHg7DQp9DQpwb2x5bGluZSB7DQogICAgc3Ryb2tlOiAjOEE4OTg1Ow0KICAgIHN0cm9rZS13aWR0aDogMnB4Ow0KICAgIGZpbGw6IG5vbmU7DQp9DQoubGFiZWxWYWx1ZSB7DQogICAgZm9udC1zaXplOiA2MCU7DQogICAgb3BhY2l0eTogLjU7DQp9DQoudG9vbFRpcCB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGRpc3BsYXk6IG5vbmU7DQogICAgd2lkdGg6IGF1dG87DQogICAgaGVpZ2h0OiBhdXRvOw0KICAgIGJhY2tncm91bmQ6IG5vbmUgcmVwZWF0IHNjcm9sbCAwIDAgd2hpdGU7DQogICAgYm9yZGVyOiAwIG5vbmU7DQogICAgYm9yZGVyLXJhZGl1czogOHB4IDhweCA4cHggOHB4Ow0KICAgIGJveC1zaGFkb3c6IC0zcHggM3B4IDE1cHggIzg4ODg4ODsNCiAgICBjb2xvcjogYmxhY2s7DQogICAgZm9udDogMTJweDsNCiAgICBwYWRkaW5nOiA1cHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KdGV4dCB7DQogICAgZm9udDogMTJweDsNCiAgICBjb2xvcjogI0E5QTlBOTsNCiAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7DQogICAgZmlsbDogI0E5QTlBOTsNCn0NCiAgICAgICAgQC13ZWJraXQta2V5ZnJhbWVzIGxvYWQ4IHsNCiAgICAgICAgICAgIDAlIHsNCiAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpOw0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgMTAwJSB7DQogICAgICAgICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOw0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgQGtleWZyYW1lcyBsb2FkOCB7DQogICAgICAgICAgICAwJSB7DQogICAgICAgICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIDEwMCUgew0KICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsNCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC5sb2FkLWNvbnRhaW5lciB7DQogICAgICAgICAgICBwb3NpdGlvbjogb2Jzb2x1dGU7DQogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCn0NCiAgICAgICAgLmxvYWRlcmNlbGRhNjEwOSwNCiAgICAgICAgLmxvYWRlcmNlbGRhNjEwOTphZnRlciB7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICB3aWR0aDogMTMwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDEzMHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2FkZXJjZWxkYTYxMDkgew0KICAgICAgICAgICAgbWFyZ2luOiAyNHB4IDE2MHB4Ow0KICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRleHQtaW5kZW50OiAtOTk5OWVtOw0KICAgICAgICAgICAgYm9yZGVyLXRvcDogMS4xZW0gc29saWQgI0ZGODA1NDsNCiAgICAgICAgICAgIGJvcmRlci1yaWdodDogMS4xZW0gc29saWQgI0ZGODA1NDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDEuMWVtIHNvbGlkICNGRjgwNTQ7DQogICAgICAgICAgICBib3JkZXItbGVmdDogMS4xZW0gc29saWQgI0ZGRTlERjsNCiAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOw0KICAgICAgICAgICAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiBsb2FkOCAxLjFzIGluZmluaXRlIGxpbmVhcjsNCiAgICAgICAgICAgIGFuaW1hdGlvbjogbG9hZDggMS4xcyBpbmZpbml0ZSBsaW5lYXI7DQogICAgICAgIH0NCjwvc3R5bGU+DQo8c2NyaXB0Pg0KdmFyIGdsb2JvX0dyYWZpY29fc2VjdG9yZXM7DQp2YXIgdGV4dDsNCiAgICBmdW5jdGlvbiBDYWxjdWxhckFuY2hvTWFyZ2VuZXNIb3Jpem9udGFsZXMocFNlcmllRGF0b3MsIHBBbmNob0dyYWZpY28pIHsNCiAgICAgICAgdmFyIGNhZGVuYU1heW9yID0gJzsnDQogICAgICAgIHZhciBtYXJnZW5QaXhlbGVzID0gMDsNCiAgICAgICAgZm9yIChpID0gMDsgaSA8IHBTZXJpZURhdG9zLmxlbmd0aDsgaSsrKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAocFNlcmllRGF0b3NbaV0ubm9tYnJlSW5kaWNhZG9yQ29udGV4dG8ubGVuZ3RoID4gY2FkZW5hTWF5b3IubGVuZ3RoKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGNhZGVuYU1heW9yID0gcFNlcmllRGF0b3NbaV0ubm9tYnJlSW5kaWNhZG9yQ29udGV4dG87DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY2FudmFzTWVkaWNpb25BbmNob3NIID0gZDMuc2VsZWN0KCIjY2FwYV9kaWFncmFtYWNlbGRhNjEwOSIpLmFwcGVuZCgiY2FudmFzIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdjYW52YXNNZWRpY2lvbkFuY2hvc0hjZWxkYTYxMDknKQ0KICAgICAgICAgICAgLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIikNCiAgICAgICAgICAgIC5hdHRyKCJ3aGl0ZS1zcGFjZSIsICJub3dyYXAiKQ0KICAgICAgICBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhc01lZGljaW9uQW5jaG9zSGNlbGRhNjEwOSIpOw0KICAgICAgICBjdHggPSBjLmdldENvbnRleHQoIjJkIik7DQogICAgICAgIGN0eC5mb250ID0gIjEycHggQXJpYWwiOw0KICAgICAgICB0eHQgPSBjYWRlbmFNYXlvciArICcgLSAnDQogICAgICAgIG1hcmdlblBpeGVsZXMgPSBjdHgubWVhc3VyZVRleHQodHh0KS53aWR0aDsNCiAgICAgICAgY2FudmFzTWVkaWNpb25BbmNob3NILnJlbW92ZSgpOw0KICAgICAgICByZXR1cm4gbWFyZ2VuUGl4ZWxlczsNCiAgICB9DQogICAgZnVuY3Rpb24gbWlkQW5nbGUoZCl7DQogICAgICAgIHJldHVybiBkLnN0YXJ0QW5nbGUgKyAoZC5lbmRBbmdsZSAtIGQuc3RhcnRBbmdsZSkvMjsNCiAgICB9DQogICAgZnVuY3Rpb24gaGV4IChjKSB7DQoJICAgIHZhciBzID0gIjAxMjM0NTY3ODlhYmNkZWYiOw0KCSAgICB2YXIgaSA9IHBhcnNlSW50IChjKTsNCgkgICAgaWYgKGkgPT0gMCB8fCBpc05hTiAoYykpDQoJICAgICAgICByZXR1cm4gIjAwIjsNCgkgICAgaSA9IE1hdGgucm91bmQgKE1hdGgubWluIChNYXRoLm1heCAoMCwgaSksIDI1NSkpOw0KCSAgICByZXR1cm4gcy5jaGFyQXQgKChpIC0gaSAlIDE2KSAvIDE2KSArIHMuY2hhckF0IChpICUgMTYpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBjb252ZXJ0VG9IZXggKHJnYikgew0KCSAgICByZXR1cm4gaGV4KHJnYlswXSkgKyBoZXgocmdiWzFdKSArIGhleChyZ2JbMl0pOw0KICAgIH0NCiAgICBmdW5jdGlvbiB0cmltIChzKSB7IHJldHVybiAocy5jaGFyQXQoMCkgPT0gJyMnKSA/IHMuc3Vic3RyaW5nKDEsIDcpIDogcyB9DQogICAgZnVuY3Rpb24gY29udmVydFRvUkdCIChoZXgpIHsNCgkgICAgdmFyIGNvbG9yID0gW107DQoJICAgIGNvbG9yWzBdID0gcGFyc2VJbnQgKCh0cmltKGhleCkpLnN1YnN0cmluZyAoMCwgMiksIDE2KTsNCgkgICAgY29sb3JbMV0gPSBwYXJzZUludCAoKHRyaW0oaGV4KSkuc3Vic3RyaW5nICgyLCA0KSwgMTYpOw0KCSAgICBjb2xvclsyXSA9IHBhcnNlSW50ICgodHJpbShoZXgpKS5zdWJzdHJpbmcgKDQsIDYpLCAxNik7DQoJICAgIHJldHVybiBjb2xvcjsNCiAgICB9DQogICAgZnVuY3Rpb24gQ2FsY3VsYXJHcmFkaWVudGVDb2xvcmVzX0RpYWdyYW1hU2VjdG9yZXMyKGNvbG9yU3RhcnQsY29sb3JFbmQsY29sb3JDb3VudCl7DQoJICAgIHZhciBzdGFydCA9IGNvbnZlcnRUb1JHQiAoY29sb3JTdGFydCk7ICAgIA0KCSAgICB2YXIgZW5kICAgPSBjb252ZXJ0VG9SR0IgKGNvbG9yRW5kKTsgICAgDQoJICAgIHZhciBsZW4gPSBjb2xvckNvdW50Ow0KCSAgICB2YXIgYWxwaGEgPSAwLjA7DQoJICAgIHZhciBncmFkaWVudGUgPSBbXTsNCgkgICAgZm9yIChpID0gMDsgaSA8PSBsZW47IGkrKykgew0KCQkgICAgdmFyIGMgPSBbXTsNCiAgICAgICAgICAgIGlmIChpID09IDApDQogICAgICAgICAgICB7DQoJCSAgICAgICAgY1swXSA9IGVuZFswXTsNCgkJICAgICAgICBjWzFdID0gZW5kWzFdOw0KCQkgICAgICAgIGNbMl0gPSBlbmRbMl07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChpID09IGxlbikNCiAgICAgICAgICAgIHsNCgkJICAgICAgICBjWzBdID0gc3RhcnRbMF07DQoJCSAgICAgICAgY1sxXSA9IHN0YXJ0WzFdOw0KCQkgICAgICAgIGNbMl0gPSBzdGFydFsyXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCgkJICAgICAgICBhbHBoYSArPSAoMS4wL2xlbik7DQoJCSAgICAgICAgY1swXSA9IHN0YXJ0WzBdICogYWxwaGEgKyAoMSAtIGFscGhhKSAqIGVuZFswXTsNCgkJICAgICAgICBjWzFdID0gc3RhcnRbMV0gKiBhbHBoYSArICgxIC0gYWxwaGEpICogZW5kWzFdOw0KCQkgICAgICAgIGNbMl0gPSBzdGFydFsyXSAqIGFscGhhICsgKDEgLSBhbHBoYSkgKiBlbmRbMl07DQogICAgICAgICAgICB9DQoJCSAgICBncmFkaWVudGUucHVzaCggJyMnICsgY29udmVydFRvSGV4IChjKSk7DQoJICAgIH0NCgkgICAgcmV0dXJuIGdyYWRpZW50ZTsNCiAgICB9DQogICAgZnVuY3Rpb24gQ2FsY3VsYXJQb3JjZW50YWplVmFsb3IocEFycmF5RGF0b3MsIHBWYWxvckNhbGN1bG8pDQogICAgew0KICAgICAgICB2YXIgdG90YWxWYWxvciA9IDA7DQogICAgICAgIHZhciBwb3JjZW50YWplID0gMDsNCiAgICAgICAgZm9yIChjRWxlbWVudG8gPSAwOyBjRWxlbWVudG8gPCBwQXJyYXlEYXRvcy5sZW5ndGg7IGNFbGVtZW50bysrKQ0KICAgICAgICB7DQogICAgICAgICAgICB0b3RhbFZhbG9yID0gdG90YWxWYWxvciArIHBhcnNlSW50KHBBcnJheURhdG9zW2NFbGVtZW50b10udmFsb3IpOw0KICAgICAgICB9DQogICAgICAgIHBvcmNlbnRhamUgPSAoMTAwICogcFZhbG9yQ2FsY3VsbykgLyB0b3RhbFZhbG9yOw0KICAgICAgICByZXR1cm4gICgoTWF0aC5yb3VuZChwb3JjZW50YWplICogMTApIC8gMTApICsgJycpLnJlcGxhY2UoJy4nLCcsJyk7DQogICAgfQ0KZDMuY3N2KCJodHRwOi8vd3d3LnBvcnRhbGVzdGFkaXN0aWNvLmNvbS9zZXJ2aWNpb19vYnRlbmNpb25fZGF0b3NfdmlzdWFsaXphY2lvbmVzLmFzbXgvT2J0ZW5lcl9EYXRvcz9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZwSWRfUGFnaW5hX0FjdGl2YT0xMDAwMSZwSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NjEwOSZwSWRfVGVycml0b3Jpbz0wMCZwSWRpb21hPTEmcElkX3JlZ2lvbj1lcy1lcyIpLnRoZW4oDQogICAgZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgdmFyIHN2ZzsNCiAgICAgICAgdmFyIGFyYzsNCiAgICAgICAgdmFyIG91dGVyQXJjOw0KICAgICAgICB2YXIgcGllOw0KICAgICAgICB2YXIgc2xpY2U7DQogICAgICAgIHZhciBwb2x5bGluZTsNCiAgICAgICAgdmFyIG1hcmdlbkl6cXVpZXJkbyA9IDA7DQogICAgICAgIHZhciBtYXJnZW5EZXJlY2hvID0gMDsNCiAgICAgICAgdmFyIG1hcmdlblN1cGVyaW9yID0gMDsNCiAgICAgICAgdmFyIG1hcmdlbkluZmVyaW9yID0gMDsNCiAgICAgICAgdmFyIHdpZHRoOw0KICAgICAgICB2YXIgaGVpZ2h0Ow0KICAgICAgICB2YXIgcmFkaXVzOw0KICAgICAgICB2YXIgY29sb3I7DQogICAgICAgIHZhciBjYXRlZ29yeTsNCiAgICAgICAgdmFyIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG87DQogICAgICAgIG1hcmdlbkl6cXVpZXJkbyA9IENhbGN1bGFyQW5jaG9NYXJnZW5lc0hvcml6b250YWxlcyhkYXRhLCA0NTApOw0KICAgICAgICBtYXJnZW5EZXJlY2hvID0gbWFyZ2VuSXpxdWllcmRvOw0KICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDE2Ow0KICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDE2Ow0KICAgICAgICB3aWR0aCA9IDQ1MCAtIG1hcmdlbkl6cXVpZXJkbyAtIG1hcmdlbkRlcmVjaG87DQogICAgICAgIGhlaWdodCA9IDE3OSAtIG1hcmdlblN1cGVyaW9yIC0gbWFyZ2VuSW5mZXJpb3I7DQogICAgICAgIHJhZGl1cyA9IChNYXRoLm1pbih3aWR0aCwgaGVpZ2h0KSAqIDAuNik7DQogICAgICAgIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FwYV9Fc3BlcmFuZG9jZWxkYTYxMDkiKTsNCiAgICAgICAgZWxlbWVudF9jYXBhX2VzcGVyYW5kby5jbGFzc0xpc3QucmVtb3ZlKCJsb2FkZXJjZWxkYTYxMDkiKTsNCiAgICAgICAgY2F0ZWdvcnkgPSBkMy5rZXlzKGRhdGFbMF0pLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoa2V5ICE9PSAiYW5pb19wZXJpb2RvIiAmJiBrZXkgIT09ICJmZWNoYV9wZXJpb2RvX3NlcmllIiAmJiBrZXkgIT09ICJub21icmVfcGVyaW9kbyIgJiYga2V5ICE9PSAicGVyaW9kbyIpOyB9KTsNCiAgICAgICAgY29sb3IgPSAgZDMuc2NhbGVPcmRpbmFsKENhbGN1bGFyR3JhZGllbnRlQ29sb3Jlc19EaWFncmFtYVNlY3RvcmVzMignI0ZGRTlERicsICcjRkY4MDU0JywgZGF0YS5sZW5ndGggLSAxKSk7DQogICAgICAgIGFyYyA9IGQzLmFyYygpDQogICAgICAgICAgICAub3V0ZXJSYWRpdXMocmFkaXVzKQ0KICAgICAgICAgICAgLmlubmVyUmFkaXVzKHJhZGl1cyAvIDMuNSkNCiAgICAgICAgICAgIC5jb3JuZXJSYWRpdXMoMik7DQogICAgICAgIHBpZSA9IGQzLnBpZSgpDQogICAgICAgICAgICAuc29ydChudWxsKQ0KICAgICAgICAgICAgLnZhbHVlKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLnZhbG9yOyB9KQ0KICAgICAgICAgICAgLnBhZEFuZ2xlKDAuMDIpDQogICAgICAgIC5zdGFydEFuZ2xlKC0wLjUgKiBNYXRoLlBJKQ0KICAgICAgICAuZW5kQW5nbGUoMC41ICogTWF0aC5QSSkNCiAgICAgICAgOw0KICAgICAgICBzdmcgPSBkMy5zZWxlY3QoJyNjYXBhX2RpYWdyYW1hY2VsZGE2MTA5JykuYXBwZW5kKCJzdmciKQ0KICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2NlbGRhNjEwOScpDQogICAgICAgICAgICAuYXR0cigid2lkdGgiLCA0NTApDQogICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgMTc5KQ0KICAgICAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDIyNSwxNDMuMikiKQ0KICAgICAgICBzdmcuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJzbGljZXMiKTsNCiAgICAgICAgc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibGFiZWxOYW1lIik7DQogICAgICAgIHN2Zy5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxhYmVsVmFsdWUiKTsNCiAgICAgICAgc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibGluZXMiKTsNCiAgICAgICAgb3V0ZXJBcmMgPSBkMy5hcmMoKQ0KICAgICAgICAgICAgLmlubmVyUmFkaXVzKHJhZGl1cyAqIDAuOSkNCiAgICAgICAgICAgIC5vdXRlclJhZGl1cyhyYWRpdXMgKiAwLjkpOw0KICAgICAgICBnbG9ib19HcmFmaWNvX3NlY3RvcmVzID0gZDMuc2VsZWN0KCJib2R5IikuYXBwZW5kKCJkaXYiKQ0KICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2dsb2JvX0dyYWZpY29fc2VjdG9yZXMnKQ0KICAgICAgICAgICAgLnN0eWxlKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpDQogICAgICAgICAgICAuc3R5bGUoJ3BhZGRpbmcnLCA2KQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgInRvb2xUaXAiKQ0KICAgICAgICAgICAgLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTsNCiAgICBzdmcuc2VsZWN0KCIuc2xpY2VzIikuc2VsZWN0QWxsKCJwYXRoLnNsaWNlIikNCiAgICAgICAgLmRhdGEocGllKGRhdGEpLCBmdW5jdGlvbihkKXsNCiAgICAgICAgICAgIHJldHVybiBkLmRhdGEubm9tYnJlSW5kaWNhZG9yQ29udGV4dG8NCiAgICAgICAgfSkNCiAgICA7DQogICAgc2xpY2UgPSBzdmcuc2VsZWN0KCIuc2xpY2VzIikuc2VsZWN0QWxsKCJwYXRoLnNsaWNlIikNCiAgICAgICAgLmRhdGEocGllKGRhdGEpLCBmdW5jdGlvbihkKXsgcmV0dXJuIGQuZGF0YS5ub21icmVJbmRpY2Fkb3JDb250ZXh0byB9KTsNCiAgICBzbGljZS5lbnRlcigpDQogICAgICAgIC5hcHBlbmQoInBhdGgiKQ0KICAgICAgICAuc3R5bGUoImZpbGwiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gY29sb3IoZC5kYXRhLm5vbWJyZUluZGljYWRvckNvbnRleHRvKTsgfSkNCiAgICAgICAgLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbihkKXsNCiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKQ0KICAgICAgICAgICAgLnN0eWxlKCJjdXJzb3IiLCAiZGVmYXVsdCIpDQogICAgICAgICAgICAudHJhbnNpdGlvbigpDQogICAgICAgICAgICAuZHVyYXRpb24oIjE1MCIpDQogICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIwLjUiKQ0KICAgICAgICB9KQ0KICAgICAgICAub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uKGQpew0KICAgICAgICAgICAgZ2xvYm9fR3JhZmljb19zZWN0b3Jlcy5zdHlsZSgibGVmdCIsIGQzLmV2ZW50LnBhZ2VYKzEwKyJweCIpOw0KICAgICAgICAgICAgZ2xvYm9fR3JhZmljb19zZWN0b3Jlcy5zdHlsZSgidG9wIiwgZDMuZXZlbnQucGFnZVktMjUrInB4Iik7DQogICAgICAgICAgICBnbG9ib19HcmFmaWNvX3NlY3RvcmVzLnN0eWxlKCJkaXNwbGF5IiwgImlubGluZS1ibG9jayIpOw0KICAgICAgICAgICAgZ2xvYm9fR3JhZmljb19zZWN0b3Jlcy5odG1sKA0KICAgICAgICAgICAgICAgICAgICAoZC5kYXRhLmV0aXF1ZXRhcGVyaW9kbykgKyAiOiZuYnNwOyIgKyAoZC5kYXRhLm5vbWJyZXBlcmlvZG8pICsgIiZuYnNwOyIgKyAoZC5kYXRhLmFuaW8pICsgIjxicj4iICsgICAgICAgICAgICAgICAgICAgICAoZC5kYXRhLm5vbWJyZUluZGljYWRvclJlY29ydGFkbykgKyAiPGJyPjxzcGFuIHN0eWxlPSdkaXNwbGF5OmJsb2NrOyBtYXJnaW4tdG9wOjVweDsnPjxiPiIgKyAoZC5kYXRhLnZhbG9yRm9ybWF0ZWFkbykgKyAiPC9iPiZuYnNwOyIgKyBkLmRhdGEubWFnbml0dWRWYWxvciArICImbmJzcDsoIiArIENhbGN1bGFyUG9yY2VudGFqZVZhbG9yKGRhdGEsIGQuZGF0YS52YWxvcikgKyIlKTwvc3Bhbj4iICAgICAgICAgICAgICAgICApOyAgICAgICAgfSkNCiAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uKGQpew0KICAgICAgICAgICAgZ2xvYm9fR3JhZmljb19zZWN0b3Jlcy5zdHlsZSgiZGlzcGxheSIsICJub25lIik7DQogICAgICAgICAgICBkMy5zZWxlY3QodGhpcykNCiAgICAgICAgICAgICAgICAuc3R5bGUoImN1cnNvciIsICJkZWZhdWx0IikNCiAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpDQogICAgICAgICAgICAgICAgLmR1cmF0aW9uKCIzMDAiKQ0KICAgICAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIxIikNCiAgICAgICAgICAgIH0pDQogICAgICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gMDsgfSkuZHVyYXRpb24oNTAwKQ0KICAgICAgICAuYXR0clR3ZWVuKCdkJywgZnVuY3Rpb24oZCkgew0KICAgICAgICAgICAgdmFyIGkgPSBkMy5pbnRlcnBvbGF0ZShkLnN0YXJ0QW5nbGUrMC4xLCBkLmVuZEFuZ2xlKTsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICAgICAgZC5lbmRBbmdsZSA9IGkodCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyYyhkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgOw0KICAgIHRleHQgPSBzdmcuc2VsZWN0KCIubGFiZWxOYW1lIikuc2VsZWN0QWxsKCJ0ZXh0IikNCiAgICAgICAgLmRhdGEocGllKGRhdGEpLCBmdW5jdGlvbihkKXsgcmV0dXJuIGQuZGF0YS5ub21icmVJbmRpY2Fkb3JDb250ZXh0byB9KTsNCiAgICB0ZXh0LmVudGVyKCkNCiAgICAgICAgLmFwcGVuZCgidGV4dCIpDQogICAgICAgIC5hdHRyKCJkeSIsICIuMzVlbSIpDQogICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsNCiAgICAgICAgICAgIHJldHVybiAoZC5kYXRhLm5vbWJyZUluZGljYWRvckNvbnRleHRvKTsNCiAgICAgICAgfSkNCiAgICAuc3R5bGUoIm9wYWNpdHkiLCAiMCIpDQogICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigxMDApDQogICAgLmF0dHJUd2VlbigidHJhbnNmb3JtIiwgZnVuY3Rpb24oZCkgew0KICAgICAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5fY3VycmVudCB8fCBkOw0KICAgICAgICB2YXIgaW50ZXJwb2xhdGUgPSBkMy5pbnRlcnBvbGF0ZSh0aGlzLl9jdXJyZW50LCBkKTsNCiAgICAgICAgdGhpcy5fY3VycmVudCA9IGludGVycG9sYXRlKDApOw0KICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgdmFyIGQyID0gaW50ZXJwb2xhdGUodCk7DQogICAgICAgICAgICB2YXIgcG9zID0gb3V0ZXJBcmMuY2VudHJvaWQoZDIpOw0KICAgICAgICBwb3NbMF0gPSByYWRpdXMgKiAobWlkQW5nbGUoZDIpID4gMCA/IDEgOiAtMSk7DQogICAgICAgICAgICByZXR1cm4gInRyYW5zbGF0ZSgiKyBwb3MgKyIpIjsNCiAgICAgICAgfTsNCiAgICB9KQ0KICAgIC5zdHlsZVR3ZWVuKCJ0ZXh0LWFuY2hvciIsIGZ1bmN0aW9uKGQpew0KICAgICAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5fY3VycmVudCB8fCBkOw0KICAgICAgICB2YXIgaW50ZXJwb2xhdGUgPSBkMy5pbnRlcnBvbGF0ZSh0aGlzLl9jdXJyZW50LCBkKTsNCiAgICAgICAgdGhpcy5fY3VycmVudCA9IGludGVycG9sYXRlKDApOw0KICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgdmFyIGQyID0gaW50ZXJwb2xhdGUodCk7DQogICAgICAgIHJldHVybiBtaWRBbmdsZShkMikgPiAwID8gInN0YXJ0IjoiZW5kIjsNCiAgICAgICAgfTsNCiAgICB9KQ0KICAgIC50cmFuc2l0aW9uKCkNCiAgICAuZHVyYXRpb24oNTAwKQ0KICAgIC5zdHlsZSgib3BhY2l0eSIsICIxIikNCiAgICB0ZXh0DQogICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsNCiAgICAgICAgICAgIHJldHVybiAoZC5kYXRhLm5vbWJyZUluZGljYWRvckNvbnRleHRvKTsNCiAgICAgICAgfSk7DQogICAgcG9seWxpbmUgPSBzdmcuc2VsZWN0KCIubGluZXMiKS5zZWxlY3RBbGwoInBvbHlsaW5lIikNCiAgICAgICAgLmRhdGEocGllKGRhdGEpLCBmdW5jdGlvbihkKXsgcmV0dXJuIGQuZGF0YS5ub21icmVJbmRpY2Fkb3JDb250ZXh0byB9KTsNCiAgICBwb2x5bGluZS5lbnRlcigpDQogICAgICAgIC5hcHBlbmQoInBvbHlsaW5lIikNCiAgICAgICAgLnN0eWxlKCJzdHJva2UiLCAiIzhBODk4NSIpDQogICAgICAgIC5hdHRyKCJjbGFzcyIsICJsaW5lIikNCiAgICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigxMDAwKQ0KICAgICAgICAuYXR0clR3ZWVuKCJwb2ludHMiLCBmdW5jdGlvbihkKXsNCiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnQgPSB0aGlzLl9jdXJyZW50IHx8IGQ7DQogICAgICAgICAgICB2YXIgaW50ZXJwb2xhdGUgPSBkMy5pbnRlcnBvbGF0ZSh0aGlzLl9jdXJyZW50LCBkKTsNCiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnQgPSBpbnRlcnBvbGF0ZSgwKTsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICAgICAgdmFyIGQyID0gaW50ZXJwb2xhdGUodCk7DQogICAgICAgICAgICAgICAgdmFyIHBvcyA9IG91dGVyQXJjLmNlbnRyb2lkKGQyKTsNCiAgICAgICAgICAgIHBvc1swXSA9IHJhZGl1cyAqIDAuOTUgKiAobWlkQW5nbGUoZDIpID4gMCA/IDEgOiAtMSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIFthcmMuY2VudHJvaWQoZDIpLCBvdXRlckFyYy5jZW50cm9pZChkMiksIHBvc107DQogICAgICAgICAgICB9Ow0KICAgICAgICB9KTsNCn0pOw0KPC9zY3JpcHQ+DQo8L2Rpdj48ZGl2IENsYXNzPSJ6b25hX21hc19pbmZvIj48ZGl2IGlkPSJjY2MiIGNsYXNzPSJib3hfbGltcGlvIGJveCI+PGltZyBpZD0iYWFhYSIgY2xhc3M9Imljb25vX2Rlc2NhcmdhIiBzcmM9ImltYWdlbmVzL2ljb25vX2Rlc2NhcmdhLnBuZyIgYWx0PSIiIHRpdGxlPSIiID48ZGl2IGlkPSJjYXBhX29wY2lvbmVzX2Rlc2NhcmdhcyIgY2xhc3M9Im92ZXJsYXkgbWVudV9vcGNpb25lcyByZXByZXNlbnRhY2lvbl92aXN1YWxpemFjaW9uIHNvbWJyYV9wZXJpbWV0cmFsIiA+PGg0PkRlc2NhcmdhczogPC9oND48dWwgaWQ9Im1lbnUxIiA+PGxpIGlkPSJvcHRfMS4zIiBvbmNsaWNrPSJzYXZlU3ZnQXNQbmcoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NlbGRhNjEwOScpLCAnUG9ibGFjacOzbiBwb3IgZ3JhbmRlcyBncnVwb3MgZGUgZWRhZC5wbmcnLCB7bGVmdDogLTIwLCB3aWR0aDogNDg1LCBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZGRkZGJ30pOyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fcG5nLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+SW1hZ2VuIFBORzwvbGk+PGEgaHJlZj0iIyIgaWQ9ImRlc2NhcmdhNjEwOSI+PGxpID48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19zdmcucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5JbWFnZW4gU1ZHPC9saT48L2E+PHNjcmlwdD5kMy5zZWxlY3QoIiNkZXNjYXJnYTYxMDkiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpe2QzLnNlbGVjdCh0aGlzKS5hdHRyKCJocmVmIiwgJ2RhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCwnICsgYnRvYSgnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iSVNPLTg4NTktMSIgPz5cclxuPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczphdHRyaWI9Imh0dHA6Ly93d3cuY2FydG8ubmV0L2F0dHJpYiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM6YTM9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iIGEzOnNjcmlwdEltcGxlbWVudGF0aW9uPSJBZG9iZSIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb247IHRleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTsgaW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eTsgZmlsbC1ydWxlOmV2ZW5vZGQ7IGNsaXAtcnVsZTpldmVub2RkOyIgd2lkdGg9IjQ1MCIgaGVpZ2h0PSIzNTgiPjxzdHlsZT4gdGV4dHtmb250LXNpemU6IDEycHg7Y29sb3I6ICNBOUE5QTk7Zm9udC1mYW1pbHk6IEFyaWFsO2ZpbGw6ICNBOUE5QTk7fSAubGluZSB7ZmlsbDogbm9uZTt9PC9zdHlsZT4nICsgZDMuc2VsZWN0KCIjY2VsZGE2MTA5IikuaHRtbCgpICsgJzwvc3ZnPicgICkpLmF0dHIoImRvd25sb2FkIiwgIlBvYmxhY2nDs24gcG9yIGdyYW5kZXMgZ3J1cG9zIGRlIGVkYWQuc3ZnIil9KTwvc2NyaXB0PjxhIGhyZWY9InByb2Nlc29fZGVzY2FyZ2FfZXhjZWxfY3N2LmFzcHg/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmaWRwPTEwMDAxJklkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTYxMDkmSWRfVGVycml0b3Jpbz0wMCZJZF9UZXJyaXRvcmlvX1BhZHJlPUNDQTAyJmlkaW9tYT0xJlRpcG9fRmljaGVyb19HZW5lcmFkbz1leGNlbCI+PGxpIGlkPSJvcHRfMS43Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19leGNlbC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkRhdG9zIEV4Y2VsPC9saT48L2E+PGEgaHJlZj0icHJvY2Vzb19kZXNjYXJnYV9leGNlbF9jc3YuYXNweD9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NjEwOSZJZF9UZXJyaXRvcmlvPTAwJklkX1RlcnJpdG9yaW9fUGFkcmU9Q0NBMDImaWRpb21hPTEmVGlwb19GaWNoZXJvX0dlbmVyYWRvPWNzdiI+PGxpIGlkPSJvcHRfMS44Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19jc3YucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5EYXRvcyBDU1Y8L2xpPjwvYT48L3VsPjwvZGl2PjwvZGl2PjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGNsYXNzPSJpY29ub19kZXNjYXJnYSIgc3JjPSJpbWFnZW5lcy9pY29ub19tYXMucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfbWFzb3BjaW9uZXMiIGNsYXNzPSJvdmVybGF5IG1lbnVfb3BjaW9uZXMgcmVwcmVzZW50YWNpb25fdmlzdWFsaXphY2lvbiBzb21icmFfcGVyaW1ldHJhbCIgPjxoND5Nw6FzIG9wY2lvbmVzOjwvaDQ+PHVsIGlkPSJtZW51MSIgPjxhIGhyZWY9IiNleDEiIGlkPSJEQVRPUyYwMCY2MTA5JkNDQTAyIiByZWw9Im1vZGFsOm9wZW4iPjxsaSBpZD0ib3B0XzEuMyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fZ3JpZC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPlZlciBkYXRvczwvbGk+PC9hPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBDbGFzcz0idGl0dWxvX2NlbGRhIj5Qb2JsYWNpw7NuIHBvciBncmFuZGVzIGdydXBvcyBkZSBlZGFkPC9kaXY+PC90ZD48L3RyPjx0cj48dGQgQ2xhc3M9InNlcGFyYWRvciI+PGJyPjwvdGQ+PC90cj48dHIgY2xhc3M9ImFuY2xhIj48dGQ+PGEgaWQ9IkluZGljZV9OaXZlbF8xXzI3MjIiIGNsYXNzPSJhbmNob3IiPjwvYT48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY2VsZGFfc2luX2VzdGlsb3MiIGNvbHNwYW49IjIiPjxkaXYgY2xhc3M9ImNsYXNlX2NhcGFfdW5pZGFkX3Zpc3VhbGl6YWNpb24iIHN0eWxlPSJtaW4taGVpZ2h0OiAxNDBweDsiPjx0YWJsZSBjbGFzcz0iVGFibGFzX2RhdG9zIj48dHIgY2xhc3M9IlRhYmxhc19kYXRvc19jYWJlY2VyYSI+PHRkIGNsYXNzPSJjb2x1bW5hX2l6cXVpZXJkYSI+PGg0IGNsYXNzPSJoNF9ncmFuZGUiPlBvcmNlbnRhamUgZGUgcG9ibGFjacOzbiBleHRyYW5qZXJhPC9oND48L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9kZXJlY2hhIj48aDQgY2xhc3M9Img0X211eV9ncmFuZGUgbmVnYXRpdm9zX2llIj4xMCw3ICU8L2g0PjwvdGQ+PC90cj48dHI+PHRkIGNvbHNwYW49IjIiPjx0YWJsZSBjbGFzcz0iU3VidGl0dWxvX2luZGljYWRvciI+PHRyPjx0ZCBjbGFzcz0iY29sdW1uYV9lc3RyZWNoYSI+UGVyaW9kbzo8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9hbmNoYSBuZWdyaXRhIj5BbnVhbCZuYnNwOzIwMTk8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9penF1aWVyZGEgY29sdW1uYV9lc3RyZWNoYSI+Q3JlY2ltaWVudG8gaW50ZXJhbnVhbDo8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9jZW50cm8gdGV4dG9fbXV5X2dyYW5kZSBuZWdhdGl2b3NfaWUiPjUsNyU8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9kZXJlY2hhIj48aW1nIGNsYXNzPSJpbWFnZW5fdGVuZGVuY2lhIiBzcmM9Imh0dHA6Ly93d3cucG9ydGFsZXN0YWRpc3RpY28uY29tL2ltYWdlbmVzL3BhbGV0YXMvMTAwMDEvY3JlY2ltaWVudG9fYXJyaWJhLnBuZyIgYWx0PSJFc3RhYmlsaWRhZCI+PC90ZD48L3RyPjx0cj48dGQgY2xhc3M9ImNvbHVtbmFfZXN0cmVjaGEiPkZ1ZW50ZTo8L3RkPjx0ZCBjb2xzcGFuPSI0IiBjbGFzcz0ibmVncml0YSI+SU5FLCBSZXZpc2nDs24gZGVsIFBhZHLDs24gTXVuaWNpcGFsLjwvdGQ+PC90cj48L3RhYmxlPjwvdGQ+PC90cj48dHI+PHRkIGNvbHNwYW49IjIiPjxwIGNsYXNzPSJ0ZXh0b19jb250ZW5pZG8iPlBvcmNlbnRhamUgZGUgZXh0cmFuamVyb3Mgc29icmUgZWwgdG90YWwgZGUgbGEgcG9ibGFjacOzbi48L3A+PC90ZD48L3RyPjwvdGFibGU+PC9kaXY+PC90ZD48L3RyPjx0cj48dGQgQ2xhc3M9InNlcGFyYWRvciI+PGJyPjwvdGQ+PC90cj48dHIgY2xhc3M9ImFuY2xhIj48dGQ+PGEgaWQ9IkluZGljZV9OaXZlbF8xXzU4NjMiIGNsYXNzPSJhbmNob3IiPjwvYT48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY2VsZGFfdGlwb19maWxhXzEiIGNvbHNwYW49IjIiPjxkaXYgY2xhc3M9ImNsYXNlX2NhcGFfdW5pZGFkX3Zpc3VhbGl6YWNpb24iIHN0eWxlPSJtaW4taGVpZ2h0OiAyMjJweDsiPjxkaXYgaWQ9ImNhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNTg2MyI+DQo8ZGl2IGlkPSJjYXBhX0VzcGVyYW5kb2NlbGRhNTg2MyIgY2xhc3M9ImxvYWQtY29udGFpbmVyIGxvYWRlcmNlbGRhNTg2MyI+PC9kaXY+DQo8L2Rpdj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQogICAgICAgIC5saW5lY2VsZGE1ODYzIHsNCiAgICAgICAgICAgIGZpbGw6IG5vbmU7DQogICAgICAgICAgICBzdHJva2U6ICNGRjZFMkI7DQogICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI7DQogICAgICAgIH0NCiAgICAgICAgLmxvYWRlcmNlbGRhNTg2MywNCiAgICAgICAgLmxvYWRlcmNlbGRhNTg2MzphZnRlciB7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICB3aWR0aDogMTMwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDEzMHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2FkZXJjZWxkYTU4NjMgew0KICAgICAgICAgICAgbWFyZ2luOiA0NnB4IDQyMHB4Ow0KICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRleHQtaW5kZW50OiAtOTk5OWVtOw0KICAgICAgICAgICAgYm9yZGVyLXRvcDogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1yaWdodDogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDEuMWVtIHNvbGlkICNGRjZFMkI7DQogICAgICAgICAgICBib3JkZXItbGVmdDogMS4xZW0gc29saWQgI0ZGRTlERjsNCiAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOw0KICAgICAgICAgICAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiBsb2FkOCAxLjFzIGluZmluaXRlIGxpbmVhcjsNCiAgICAgICAgICAgIGFuaW1hdGlvbjogbG9hZDggMS4xcyBpbmZpbml0ZSBsaW5lYXI7DQogICAgICAgIH0NCjwvc3R5bGU+DQo8c2NyaXB0Pg0KZDMuY3N2KCJodHRwOi8vd3d3LnBvcnRhbGVzdGFkaXN0aWNvLmNvbS9zZXJ2aWNpb19vYnRlbmNpb25fZGF0b3NfdmlzdWFsaXphY2lvbmVzLmFzbXgvT2J0ZW5lcl9EYXRvcz9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZwSWRfUGFnaW5hX0FjdGl2YT0xMDAwMSZwSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NTg2MyZwSWRfVGVycml0b3Jpbz0wMDsmcElkX1RlcnJpdG9yaW9fUGFkcmU9JnBJZGlvbWE9MSZwSWRfcmVnaW9uPWVzLWVzIikudGhlbigNCiAgICBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICB2YXIgbGluZWFfZ3JhZmljbzsNCiAgICAgICAgdmFyIHN2ZzsNCiAgICAgICAgdmFyIHNlcmllc0xpbmVhczsNCiAgICAgICAgdmFyIGxpbmVhQ2VybzsNCiAgICAgICAgdmFyIGxpbmVhc19zZXJpZXM7DQogICAgICAgIHZhciBuRWxlbWVudG9zUG9yU2VyaWU7DQogICAgICAgIHZhciBwdW50b3NBaXNsYWRvczsNCiAgICAgICAgdmFyIGxpbmVhc1ZlcnRIb3JSYXRvbjsNCiAgICAgICAgdmFyIHJhdG9uUG9yTGluZWE7DQogICAgICAgIHZhciBlamVYOw0KICAgICAgICB2YXIgZWplWTsNCiAgICAgICAgdmFyIGNEaW1lbnNpb25FeHQgPSAwDQogICAgICAgIHZhciB2YWxvck1pbmltb0RhdG9zID0gMDsNCiAgICAgICAgdmFyIHZhbG9yTWF4aW1vRGF0b3MgPSAwOw0KICAgICAgICB2YXIgZmVjaGFNYXhpbW87DQogICAgICAgIHZhciBmZWNoYU1pbmltbzsNCiAgICAgICAgdmFyIGNhbGN1bG9fbWF4bWluOw0KICAgICAgICB2YXIgbWFyZ2VuSXpxdWllcmRvID0gMDsNCiAgICAgICAgdmFyIG1hcmdlbkRlcmVjaG8gPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuU3VwZXJpb3IgPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuSW5mZXJpb3IgPSAwOw0KICAgICAgICB2YXIgbkNvcnRlcyA9IDA7DQogICAgICAgIHZhciBuUHVudG9zRWplWCA9IDA7DQogICAgICAgIHZhciBwYXJzZURhdGUgPSBkMy50aW1lUGFyc2UoIiVZLyVtLyVkIik7DQogICAgICAgIHZhciBtYXJnaW47DQogICAgICAgIHZhciB3aWR0aDsNCiAgICAgICAgdmFyIGhlaWdodDsNCiAgICAgICAgdmFyIGNvbG9yOw0KICAgICAgICB2YXIgY2F0ZWdvcnk7DQogICAgICAgIHZhciBlbGVtZW50X2NhcGFfZXNwZXJhbmRvOw0KICAgICAgIHZhciBhbmNob05vZG9zOw0KICAgICAgIHZhciBzdmdMZXllbmRhSG9yaXpvbnRhbDsNCiAgICAgICB2YXIgc3ZnTGVnZW5kOw0KICAgICAgIHZhciBsZWdlbmQ7DQogICAgICAgIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FwYV9Fc3BlcmFuZG9jZWxkYTU4NjMiKTsNCiAgICAgICAgZWxlbWVudF9jYXBhX2VzcGVyYW5kby5jbGFzc0xpc3QucmVtb3ZlKCJsb2FkZXJjZWxkYTU4NjMiKTsNCiAgICAgICAgY2F0ZWdvcnkgPSBkMy5rZXlzKGRhdGFbMF0pLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoa2V5ICE9PSAiYW5pb19wZXJpb2RvIiAmJiBrZXkgIT09ICJmZWNoYV9wZXJpb2RvX3NlcmllIiAmJiBrZXkgIT09ICJub21icmVfcGVyaW9kbyIgJiYga2V5ICE9PSAicGVyaW9kbyIgJiYga2V5ICE9PSAiZXRpcXVldGFwZXJpb2RvIik7IH0pOw0KICAgICAgICBjb2xvciA9ICBkMy5zY2FsZU9yZGluYWwoQ2FsY3VsYXJHcmFkaWVudGVDb2xvcmVzX0dyYWZpY29Fdm9sdWNpb25MaW5lYXMyKCcjRkZFOURGJywgJyNGRjZFMkInLCBjYXRlZ29yeS5sZW5ndGgpKTsNCiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICBkLmZlY2hhX3BlcmlvZG9fc2VyaWUgPSBwYXJzZURhdGUoZC5mZWNoYV9wZXJpb2RvX3NlcmllKTsNCiAgICAgICAgICAgIG5Db3J0ZXMrKzsNCiAgICAgICAgICAgIG5QdW50b3NFamVYKys7DQogICAgICAgIH0pOw0KICAgICAgICBpZiAobkNvcnRlcyA+IDcpew0KICAgICAgICAgICAgbkNvcnRlcyA9IDc7DQogICAgICAgIH0NCiAgICAgICAgLy8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgY29sb3IuZG9tYWluKGQzLmtleXMoZGF0YVswXSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIChrZXkgIT09ICJhbmlvX3BlcmlvZG8iICYmIGtleSAhPT0gImZlY2hhX3BlcmlvZG9fc2VyaWUiICYmIGtleSAhPT0gIm5vbWJyZV9wZXJpb2RvIiAmJiBrZXkgIT09ICJwZXJpb2RvIiAmJiBrZXkgIT09ICJldGlxdWV0YXBlcmlvZG8iKTsgfSkpOw0KICAgICAgICBjYWxjdWxvX21heG1pbiA9IGNvbG9yLmRvbWFpbigpLm1hcChmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLA0KICAgICAgICAgICAgICAgIHZhbHVlczogZGF0YS5tYXAoZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYW5pb19wZXJpb2RvOiBkLmFuaW9fcGVyaW9kbywgZmVjaGE6IGQuZmVjaGFfcGVyaW9kb19zZXJpZSwgbm9tYnJlX3BlcmlvZG86IGQubm9tYnJlX3BlcmlvZG8sIHZhbG9yX3NlcmllOiArZFtuYW1lXSB9Ow0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9Ow0KICAgICAgICB9KTsNCiAgICAgICAgdmFsb3JNYXhpbW9EYXRvcyA9IENhbGN1bGFyTWF4aW1vRGF0b3MoY2FsY3Vsb19tYXhtaW4sIGZhbHNlKQ0KICAgICAgICB2YWxvck1pbmltb0RhdG9zID0gQ2FsY3VsYXJNaW5pbW9EYXRvcyhjYWxjdWxvX21heG1pbiwgZmFsc2UsIHRydWUpOw0KICAgICAgICBtYXJnZW5JenF1aWVyZG8gPSBDYWxjdWxhckFuY2hvTWFyZ2VuSXpxdWllcmRvX0dyYWZpY29MaW5lYXMoZm9ybWF0KCIjLiMjMCwwIix2YWxvck1heGltb0RhdG9zKSwgZm9ybWF0KCIjLiMjMCwwIix2YWxvck1pbmltb0RhdG9zKSwgOTY5KTsNCiAgICAgICAgbWFyZ2VuRGVyZWNobyA9IENhbGN1bGFyQW5jaG9NYXJnZW5EZXJlY2hvX0dyYWZpY29MaW5lYXMoY2F0ZWdvcnksIDk2OSk7DQogICAgICAgIGlmIChjYXRlZ29yeS5sZW5ndGggPiAxICYmIDk2OSA+IDIyMikgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNDA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDIwOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGNhdGVnb3J5Lmxlbmd0aCA9PSAxICYmIDk2OSA+IDIyMikgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlbkRlcmVjaG8gPSAzMCANCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNDA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDIwOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlbkRlcmVjaG8gPSAzMCANCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNTA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDUwOw0KICAgICAgICB9DQogICAgICAgIGZlY2hhTWF4aW1vID0gZDMubWF4KGNhbGN1bG9fbWF4bWluLCBmdW5jdGlvbiAoc2VyaWUpIHsNCiAgICAgICAgICAgIHJldHVybiBkMy5tYXgoc2VyaWUudmFsdWVzLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBkLmZlY2hhOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgICBmZWNoYU1pbmltbyA9IGQzLm1pbihjYWxjdWxvX21heG1pbiwgZnVuY3Rpb24gKHNlcmllKSB7DQogICAgICAgICAgICByZXR1cm4gZDMubWluKHNlcmllLnZhbHVlcywgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC5mZWNoYTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgICAgbWFyZ2luID0geyB0b3A6IG1hcmdlblN1cGVyaW9yLCByaWdodDogbWFyZ2VuRGVyZWNobywgYm90dG9tOiBtYXJnZW5JbmZlcmlvciwgbGVmdDogbWFyZ2VuSXpxdWllcmRvIH07DQogICAgICAgIHdpZHRoID0gOTY5IC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQ7DQogICAgICAgIGhlaWdodCA9IDIyMiAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tOw0KICAgICAgICBlamVYID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSk7DQogICAgICAgIGVqZVkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKTsNCiAgICAgICAgbGluZWFfZ3JhZmljbyA9IGQzLmxpbmUoKQ0KICAgICAgICAgICAgLngoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVgoZC5mZWNoYSk7IH0pDQogICAgICAgICAgICAueShmdW5jdGlvbiAoZCkgeyByZXR1cm4gZWplWShkLnZhbG9yX3NlcmllKTsgfSkNCiAgICAgICAgICAgIC5kZWZpbmVkKGZ1bmN0aW9uIChkKSB7IHJldHVybiAhaXNOYU4oZC52YWxvcl9zZXJpZSk7IH0pDQogICAgICAgICAgICA7DQogICAgICAgICAgICAgICAgLy8gMS5BZGQgdGhlIFNWRyBUbyB0aGUgcGFnZSBBbmQgZW1wbG95ICMyDQogICAgICAgIHN2ZyA9IGQzLnNlbGVjdCgiI2NhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNTg2MyIpLmFwcGVuZCgic3ZnIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdjZWxkYTU4NjMnKQ0KICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgOTY5KQ0KICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIDIyMikNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIG1hcmdpbi5sZWZ0ICsgIiwgIiArIG1hcmdpbi50b3AgKyAiKSIpOw0KICAgICAgICBzZXJpZXNMaW5lYXMgPSBjb2xvci5kb21haW4oKS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgbmFtZTogbmFtZSwNCiAgICAgICAgICAgICAgICB2YWx1ZXM6IGRhdGEubWFwKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGFuaW9fcGVyaW9kbzogZC5hbmlvX3BlcmlvZG8sIGV0aXF1ZXRhcGVyaW9kbzogZC5ldGlxdWV0YXBlcmlvZG8sIGZlY2hhOiBkLmZlY2hhX3BlcmlvZG9fc2VyaWUsIG5vbWJyZV9wZXJpb2RvOiBkLm5vbWJyZV9wZXJpb2RvLCB2YWxvcl9zZXJpZTogK2RbbmFtZV0gfTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSk7DQogICAgICAgIG5FbGVtZW50b3NQb3JTZXJpZSA9IHNlcmllc0xpbmVhc1swXS52YWx1ZXMubGVuZ3RoIC0gMTsNCiAgICAgICAgZWplWC5kb21haW4oW2ZlY2hhTWluaW1vLCBmZWNoYU1heGltb10pOw0KICAgICAgICBlamVZLmRvbWFpbihbdmFsb3JNaW5pbW9EYXRvcywgdmFsb3JNYXhpbW9EYXRvc10pOw0KICAgICAgICAgICAgICAgIC8vIExleWVuZGEsIGVqZSBkZSBsYXMgWCwgcHVudG9zIHkgbGV5ZW5kYSBkZSBlc3RvcyBwdW50b3M6DQogICAgICAgIHN2Zy5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImZ1ZW50ZV9nZW5lcmljYSIpDQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCIgKyBoZWlnaHQgKyAiKSIpDQogICAgICAgICAgICAuY2FsbChkMy5heGlzQm90dG9tKCkuc2NhbGUoZWplWCkudGlja1NpemUoLWhlaWdodCkudGlja3MobkNvcnRlcykpDQogICAgICAgICAgICAuY2FsbCgNCiAgICAgICAgICAgICAgICBnID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoInkiLCAiNSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoImxpbmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAwLjcpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuMykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3QoIi5kb21haW4iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAxLjUpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuNSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICApDQogICAgICAgIDsNCiAgICAgICAgc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiZnVlbnRlX2dlbmVyaWNhIikNCiAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNMZWZ0KGVqZVkpLnRpY2tzKDQpLnRpY2tTaXplKC13aWR0aCkpDQogICAgICAgICAgICAuY2FsbCgNCiAgICAgICAgICAgICAgICBnID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoIngiLCAtMykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdEFsbCgibGluZSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDAuNykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC4zKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdCgiLmRvbWFpbiIpLnJlbW92ZSgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKQ0KICAgICAgICA7DQogICAgICAgIHN2Zy5zZWxlY3RBbGwoInRleHQiKS5hdHRyKCdmaWxsJywgJyNBOUE5QTknKTsNCiAgICAgICAgaWYgKGNhdGVnb3J5Lmxlbmd0aCA+IDEgKSANCiAgICAgICAgew0KICAgICAgICAgICAgc3ZnTGVnZW5kID0gc3ZnLmFwcGVuZCgnZycpDQogICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2dMZWdlbmQnKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyAod2lkdGggKyAyMCkgKyAiLCIgKyAwICsgIikiKTsNCiAgICAgICAgICAgIGxlZ2VuZCA9IHN2Z0xlZ2VuZC5zZWxlY3RBbGwoJy5sZWdlbmQnKQ0KICAgICAgICAgICAgICAgIC5kYXRhKGNhdGVnb3J5KQ0KICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZycpDQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxlZ2VuZCIpDQogICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiAidHJhbnNsYXRlKDAsIiArIGkgKiAyMCArICIpIiB9KTsNCiAgICAgICAgICAgIGxlZ2VuZC5hcHBlbmQoJ3JlY3QnKQ0KICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGQgPT4gY29sb3IoZCkpDQogICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAwKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgMCkNCiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCAxMCkNCiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTApOw0KICAgICAgICAgICAgbGVnZW5kLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxlZ2VuZC10ZXh0IikNCiAgICAgICAgICAgICAgICAuYXR0cigieCIsIDE1KQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgMTApDQogICAgICAgICAgICAgICAgLnRleHQoZCA9PiBkKQ0KICAgICAgICB9DQogICAgICAgIGlmICh2YWxvck1heGltb0RhdG9zID4gMCAmJiB2YWxvck1pbmltb0RhdG9zIDwgMCApIA0KICAgICAgICB7DQogICAgICAgICAgICBsaW5lYUNlcm8gPSBzdmcuYXBwZW5kKCJsaW5lIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdsaW5lYUNlcm8nKQ0KICAgICAgICAgICAgLmF0dHIoIngxIiwgMCkNCiAgICAgICAgICAgIC5hdHRyKCJ5MSIsIGVqZVkoMCkpDQogICAgICAgICAgICAuYXR0cigieDIiLCB3aWR0aCkNCiAgICAgICAgICAgIC5hdHRyKCJ5MiIsIGVqZVkoMCkpDQogICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuYXR0cigic3Ryb2tlIiwgIiNBOUE5QTkiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UtZGFzaGFycmF5IiwgKCI1LCAzIikpDQogICAgICAgICAgICA7DQogICAgICAgIH0NCiAgICAgICAgbGluZWFzX3NlcmllcyA9IHN2Zy5zZWxlY3RBbGwoIi5saW5lYXNfc2VyaWVzIikNCiAgICAgICAgICAgIC5kYXRhKHNlcmllc0xpbmVhcykNCiAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgiZyIpDQogICAgICAgICAgICA7DQogICAgICAgIGxpbmVhc19zZXJpZXMuYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsaW5lIGxpbmVjZWxkYTU4NjMiKQ0KICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gbGluZWFfZ3JhZmljbyhkLnZhbHVlcyk7IH0pDQogICAgICAgICAgICAuYXR0cigiZGF0YS1sZWdlbmQiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lIH0pDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBjb2xvcihkLm5hbWUpOyB9KTsNCiAgICAgICAgcHVudG9zQWlzbGFkb3MgPSBzdmcuc2VsZWN0QWxsKCIuZG90IikNCiAgICAgICAgICAgIC5kYXRhKHNlcmllc0xpbmVhcykuZW50ZXIoKQ0KICAgICAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY2lyY2xlLWdyb3VwJykNCiAgICAgICAgICAgIC5zdHlsZSgiZmlsbCIsIGZ1bmN0aW9uIChkLCBpMSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcihkLm5hbWUpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgcHVudG9zQWlzbGFkb3Muc2VsZWN0QWxsKCIuZG90IikNCiAgICAgICAgICAgIC5kYXRhKGQgPT4gZC52YWx1ZXMpLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImNpcmNsZSIpIC8vIFVzZXMgdGhlIGVudGVyKCkuYXBwZW5kKCkgbWV0aG9kDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiZG90IikgLy8gQXNzaWduIGEgY2xhc3MgZm9yIHN0eWxpbmcNCiAgICAgICAgICAgIC5hdHRyKCJjeCIsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiBlamVYKGQuZmVjaGEpIH0pDQogICAgICAgICAgICAuYXR0cigiY3kiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZWplWShkLnZhbG9yX3NlcmllKSB9KQ0KICAgICAgICAgICAgLmF0dHIoInIiLCAzKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgZnVuY3Rpb24gKGQsIGkpIHsNCiAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNEaW1lbnNpb25FeHQrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGQudmFsb3Jfc2VyaWUgPT0gIidudWxsJyIgfHwgaXNOYU4oZC52YWxvcl9zZXJpZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCAmJiBpIDwgbkVsZW1lbnRvc1BvclNlcmllKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSkpICYmIChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IG5FbGVtZW50b3NQb3JTZXJpZSAmJiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIxIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgdHJhbnNpdGlvbihkMy5zZWxlY3RBbGwoIi5saW5lY2VsZGE1ODYzIikpOw0KICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24gPSBzdmcuYXBwZW5kKCJnIik7IA0KICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24uYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJtb3VzZS1saW5lY2VsZGE1ODYzIikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgIiMwMDAwMDAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiMXB4IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgNSIpKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtbGluZS1ob3Jpem9udGFsY2VsZGE1ODYzIikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgIiMwMDAwMDAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiMXB4IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgNSIpKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgcmF0b25Qb3JMaW5lYSA9IGxpbmVhc1ZlcnRIb3JSYXRvbi5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNTg2MyIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpDQogICAgICAgICAgICAuZW50ZXIoKQ0KICAgICAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtcGVyLWxpbmVjZWxkYTU4NjMiKTsNCiAgICAgICAgICAgIC8vVGFidWxhY2nDs24gZGVzY3VhZHJhZGE6DQogICAgICAgICAgICAgICAgcmF0b25Qb3JMaW5lYS5hcHBlbmQoImNpcmNsZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJyIiwgNCkNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yKGQubmFtZSk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgiZmlsbCIsICIjRkZGRkZGIikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiM3B4IikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICByYXRvblBvckxpbmVhLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImZvbnQtc2l6ZSIsICIxNnB4IikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJ0ZXh0LWRlY29yYXRpb24iLCAidW5kZXJsaW5lIikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMTAsMykiKTsNCiAgICAgICAgICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24uYXBwZW5kKCJyZWN0IikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3JlY3RjZWxkYTU4NjMnKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigid2lkdGgiLCB3aWR0aCkNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIGhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAibm9uZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJwb2ludGVyLWV2ZW50cyIsICJhbGwiKQ0KICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZWNlbGRhNTg2MyIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNTg2MyIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODYzIGNpcmNsZSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODYzIHRleHQiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXMiKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXNfTGV5ZW5kYVkiKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZWNlbGRhNTg2MyIpLnN0eWxlKCJvcGFjaXR5IiwgIjAuNjUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNTg2MyIpLnN0eWxlKCJvcGFjaXR5IiwgIjAuNjUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODYzIGNpcmNsZSIpLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODYzIHRleHQiKS5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXMiKS5zdHlsZSgnZGlzcGxheScsICdibG9jaycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzX0xleWVuZGFZIikuc3R5bGUoJ2Rpc3BsYXknLCAnYmxvY2snKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJMaW5lYXNQdW50b3MoJ2NlbGRhNTg2MycsIGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgaGVpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckNvbnRlbmlkb0dsb2JvKGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBtYXJnaW4sIGNvbG9yLCAnIy4jIzAsMCcpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2Vtb3ZlIiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckxpbmVhc1B1bnRvcygnY2VsZGE1ODYzJywgZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBoZWlnaHQpDQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyQ29udGVuaWRvR2xvYm8oZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIG1hcmdpbiwgY29sb3IsICcjLiMjMCwwJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICk7DQo8L3NjcmlwdD4NCjwvZGl2PjxkaXYgQ2xhc3M9InpvbmFfbWFzX2luZm8iPjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGlkPSJhYWFhIiBjbGFzcz0iaWNvbm9fZGVzY2FyZ2EiIHNyYz0iaW1hZ2VuZXMvaWNvbm9fZGVzY2FyZ2EucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfZGVzY2FyZ2FzIiBjbGFzcz0ib3ZlcmxheSBtZW51X29wY2lvbmVzIHJlcHJlc2VudGFjaW9uX3Zpc3VhbGl6YWNpb24gc29tYnJhX3BlcmltZXRyYWwiID48aDQ+RGVzY2FyZ2FzOiA8L2g0Pjx1bCBpZD0ibWVudTEiID48bGkgaWQ9Im9wdF8xLjMiIG9uY2xpY2s9InNhdmVTdmdBc1BuZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2VsZGE1ODYzJyksICdQb3JjZW50YWplIGRlIHBvYmxhY2nDs24gZGUgbmFjaW9uYWxpZGFkIGV4dHJhbmplcmEgKCUpLnBuZycsIHtsZWZ0OiAtMjAsIHdpZHRoOiAxMDA0LCBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZGRkZGJ30pOyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fcG5nLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+SW1hZ2VuIFBORzwvbGk+PGEgaHJlZj0iIyIgaWQ9ImRlc2NhcmdhNTg2MyI+PGxpID48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19zdmcucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5JbWFnZW4gU1ZHPC9saT48L2E+PHNjcmlwdD5kMy5zZWxlY3QoIiNkZXNjYXJnYTU4NjMiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpe2QzLnNlbGVjdCh0aGlzKS5hdHRyKCJocmVmIiwgJ2RhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCwnICsgYnRvYSgnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iSVNPLTg4NTktMSIgPz5cclxuPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczphdHRyaWI9Imh0dHA6Ly93d3cuY2FydG8ubmV0L2F0dHJpYiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM6YTM9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iIGEzOnNjcmlwdEltcGxlbWVudGF0aW9uPSJBZG9iZSIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb247IHRleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTsgaW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eTsgZmlsbC1ydWxlOmV2ZW5vZGQ7IGNsaXAtcnVsZTpldmVub2RkOyIgd2lkdGg9Ijk2OSIgaGVpZ2h0PSI0NDQiPjxzdHlsZT4gdGV4dHtmb250LXNpemU6IDEycHg7Y29sb3I6ICNBOUE5QTk7Zm9udC1mYW1pbHk6IEFyaWFsO2ZpbGw6ICNBOUE5QTk7fSAubGluZSB7ZmlsbDogbm9uZTt9PC9zdHlsZT4nICsgZDMuc2VsZWN0KCIjY2VsZGE1ODYzIikuaHRtbCgpICsgJzwvc3ZnPicgICkpLmF0dHIoImRvd25sb2FkIiwgIlBvcmNlbnRhamUgZGUgcG9ibGFjacOzbiBkZSBuYWNpb25hbGlkYWQgZXh0cmFuamVyYSAoJSkuc3ZnIil9KTwvc2NyaXB0PjxhIGhyZWY9InByb2Nlc29fZGVzY2FyZ2FfZXhjZWxfY3N2LmFzcHg/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmaWRwPTEwMDAxJklkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTU4NjMmSWRfVGVycml0b3Jpbz0wMCZJZF9UZXJyaXRvcmlvX1BhZHJlPUNDQTAyJmlkaW9tYT0xJlRpcG9fRmljaGVyb19HZW5lcmFkbz1leGNlbCI+PGxpIGlkPSJvcHRfMS43Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19leGNlbC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkRhdG9zIEV4Y2VsPC9saT48L2E+PGEgaHJlZj0icHJvY2Vzb19kZXNjYXJnYV9leGNlbF9jc3YuYXNweD9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NTg2MyZJZF9UZXJyaXRvcmlvPTAwJklkX1RlcnJpdG9yaW9fUGFkcmU9Q0NBMDImaWRpb21hPTEmVGlwb19GaWNoZXJvX0dlbmVyYWRvPWNzdiI+PGxpIGlkPSJvcHRfMS44Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19jc3YucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5EYXRvcyBDU1Y8L2xpPjwvYT48L3VsPjwvZGl2PjwvZGl2PjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGNsYXNzPSJpY29ub19kZXNjYXJnYSIgc3JjPSJpbWFnZW5lcy9pY29ub19tYXMucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfbWFzb3BjaW9uZXMiIGNsYXNzPSJvdmVybGF5IG1lbnVfb3BjaW9uZXMgcmVwcmVzZW50YWNpb25fdmlzdWFsaXphY2lvbiBzb21icmFfcGVyaW1ldHJhbCIgPjxoND5Nw6FzIG9wY2lvbmVzOjwvaDQ+PHVsIGlkPSJtZW51MSIgPjxhIGhyZWY9IiNleDEiIGlkPSJEQVRPUyYwMCY1ODYzJkNDQTAyIiByZWw9Im1vZGFsOm9wZW4iPjxsaSBpZD0ib3B0XzEuMyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fZ3JpZC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPlZlciBkYXRvczwvbGk+PC9hPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBDbGFzcz0idGl0dWxvX2NlbGRhIj5Qb3JjZW50YWplIGRlIHBvYmxhY2nDs24gZGUgbmFjaW9uYWxpZGFkIGV4dHJhbmplcmEgKCUpPC9kaXY+PC90ZD48L3RyPjx0cj48dGQgQ2xhc3M9InNlcGFyYWRvciI+PGJyPjwvdGQ+PC90cj48dHIgY2xhc3M9ImFuY2xhIj48dGQ+PGEgaWQ9IkluZGljZV9OaXZlbF8xXzI3MjQiIGNsYXNzPSJhbmNob3IiPjwvYT48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY2VsZGFfc2luX2VzdGlsb3MiIGNvbHNwYW49IjIiPjxkaXYgY2xhc3M9ImNsYXNlX2NhcGFfdW5pZGFkX3Zpc3VhbGl6YWNpb24iIHN0eWxlPSJtaW4taGVpZ2h0OiAxNDBweDsiPjx0YWJsZSBjbGFzcz0iVGFibGFzX2RhdG9zIj48dHIgY2xhc3M9IlRhYmxhc19kYXRvc19jYWJlY2VyYSI+PHRkIGNsYXNzPSJjb2x1bW5hX2l6cXVpZXJkYSI+PGg0IGNsYXNzPSJoNF9ncmFuZGUiPlBvcmNlbnRhamUgZGUgcG9ibGFjacOzbiBkZSA2NSB5IG3DoXMgYcOxb3M8L2g0PjwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2RlcmVjaGEiPjxoNCBjbGFzcz0iaDRfbXV5X2dyYW5kZSBuZWdhdGl2b3NfaWUiPjE5LDMgJTwvaDQ+PC90ZD48L3RyPjx0cj48dGQgY29sc3Bhbj0iMiI+PHRhYmxlIGNsYXNzPSJTdWJ0aXR1bG9faW5kaWNhZG9yIj48dHI+PHRkIGNsYXNzPSJjb2x1bW5hX2VzdHJlY2hhIj5QZXJpb2RvOjwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2FuY2hhIG5lZ3JpdGEiPkFudWFsJm5ic3A7MjAxOTwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2l6cXVpZXJkYSBjb2x1bW5hX2VzdHJlY2hhIj5DcmVjaW1pZW50byBpbnRlcmFudWFsOjwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2NlbnRybyB0ZXh0b19tdXlfZ3JhbmRlIG5lZ2F0aXZvc19pZSI+MSwwJTwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2RlcmVjaGEiPjxpbWcgY2xhc3M9ImltYWdlbl90ZW5kZW5jaWEiIHNyYz0iaHR0cDovL3d3dy5wb3J0YWxlc3RhZGlzdGljby5jb20vaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9jcmVjaW1pZW50b19hcnJpYmEucG5nIiBhbHQ9IkVzdGFiaWxpZGFkIj48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY29sdW1uYV9lc3RyZWNoYSI+RnVlbnRlOjwvdGQ+PHRkIGNvbHNwYW49IjQiIGNsYXNzPSJuZWdyaXRhIj5FbGFib3JhY2nDs24gcHJvcGlhIGNvbiBkYXRvcyBkZWwgSU5FPC90ZD48L3RyPjwvdGFibGU+PC90ZD48L3RyPjx0cj48dGQgY29sc3Bhbj0iMiI+PHAgY2xhc3M9InRleHRvX2NvbnRlbmlkbyI+UG9yY2VudGFqZSBkZWwgZ3J1cG8gZGUgZWRhZCBzb2JyZSBsYSBwb2JsYWNpw7NuIHRvdGFsLjwvcD48L3RkPjwvdHI+PC90YWJsZT48L2Rpdj48L3RkPjwvdHI+PHRyPjx0ZCBDbGFzcz0ic2VwYXJhZG9yIj48YnI+PC90ZD48L3RyPjx0ciBjbGFzcz0iYW5jbGEiPjx0ZD48YSBpZD0iSW5kaWNlX05pdmVsXzFfNTg2NCIgY2xhc3M9ImFuY2hvciI+PC9hPjwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPSJjZWxkYV90aXBvX2ZpbGFfMSIgY29sc3Bhbj0iMiI+PGRpdiBjbGFzcz0iY2xhc2VfY2FwYV91bmlkYWRfdmlzdWFsaXphY2lvbiIgc3R5bGU9Im1pbi1oZWlnaHQ6IDIyMnB4OyI+PGRpdiBpZD0iY2FwYV9HcmFmaWNvX0V2b2x1Y2lvbl9MaW5lYXNfQXNpbmNyb25vY2VsZGE1ODY0Ij4NCjxkaXYgaWQ9ImNhcGFfRXNwZXJhbmRvY2VsZGE1ODY0IiBjbGFzcz0ibG9hZC1jb250YWluZXIgbG9hZGVyY2VsZGE1ODY0Ij48L2Rpdj4NCjwvZGl2Pg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCiAgICAgICAgLmxpbmVjZWxkYTU4NjQgew0KICAgICAgICAgICAgZmlsbDogbm9uZTsNCiAgICAgICAgICAgIHN0cm9rZTogI0ZGNkUyQjsNCiAgICAgICAgICAgIHN0cm9rZS13aWR0aDogMjsNCiAgICAgICAgfQ0KICAgICAgICAubG9hZGVyY2VsZGE1ODY0LA0KICAgICAgICAubG9hZGVyY2VsZGE1ODY0OmFmdGVyIHsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICAgICAgICAgIHdpZHRoOiAxMzBweDsNCiAgICAgICAgICAgIGhlaWdodDogMTMwcHg7DQogICAgICAgIH0NCiAgICAgICAgLmxvYWRlcmNlbGRhNTg2NCB7DQogICAgICAgICAgICBtYXJnaW46IDQ2cHggNDIwcHg7DQogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4Ow0KICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgICAgdGV4dC1pbmRlbnQ6IC05OTk5ZW07DQogICAgICAgICAgICBib3JkZXItdG9wOiAxLjFlbSBzb2xpZCAjRkY2RTJCOw0KICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxLjFlbSBzb2xpZCAjRkY2RTJCOw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiAxLjFlbSBzb2xpZCAjRkZFOURGOw0KICAgICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7DQogICAgICAgICAgICAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOw0KICAgICAgICAgICAgLXdlYmtpdC1hbmltYXRpb246IGxvYWQ4IDEuMXMgaW5maW5pdGUgbGluZWFyOw0KICAgICAgICAgICAgYW5pbWF0aW9uOiBsb2FkOCAxLjFzIGluZmluaXRlIGxpbmVhcjsNCiAgICAgICAgfQ0KPC9zdHlsZT4NCjxzY3JpcHQ+DQpkMy5jc3YoImh0dHA6Ly93d3cucG9ydGFsZXN0YWRpc3RpY28uY29tL3NlcnZpY2lvX29idGVuY2lvbl9kYXRvc192aXN1YWxpemFjaW9uZXMuYXNteC9PYnRlbmVyX0RhdG9zP3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJnBJZF9QYWdpbmFfQWN0aXZhPTEwMDAxJnBJZF9DZWxkYV9GaWxhX1BsYW50aWxsYT01ODY0JnBJZF9UZXJyaXRvcmlvPTAwOyZwSWRfVGVycml0b3Jpb19QYWRyZT0mcElkaW9tYT0xJnBJZF9yZWdpb249ZXMtZXMiKS50aGVuKA0KICAgIGZ1bmN0aW9uIChkYXRhKSB7DQogICAgICAgIHZhciBsaW5lYV9ncmFmaWNvOw0KICAgICAgICB2YXIgc3ZnOw0KICAgICAgICB2YXIgc2VyaWVzTGluZWFzOw0KICAgICAgICB2YXIgbGluZWFDZXJvOw0KICAgICAgICB2YXIgbGluZWFzX3NlcmllczsNCiAgICAgICAgdmFyIG5FbGVtZW50b3NQb3JTZXJpZTsNCiAgICAgICAgdmFyIHB1bnRvc0Fpc2xhZG9zOw0KICAgICAgICB2YXIgbGluZWFzVmVydEhvclJhdG9uOw0KICAgICAgICB2YXIgcmF0b25Qb3JMaW5lYTsNCiAgICAgICAgdmFyIGVqZVg7DQogICAgICAgIHZhciBlamVZOw0KICAgICAgICB2YXIgY0RpbWVuc2lvbkV4dCA9IDANCiAgICAgICAgdmFyIHZhbG9yTWluaW1vRGF0b3MgPSAwOw0KICAgICAgICB2YXIgdmFsb3JNYXhpbW9EYXRvcyA9IDA7DQogICAgICAgIHZhciBmZWNoYU1heGltbzsNCiAgICAgICAgdmFyIGZlY2hhTWluaW1vOw0KICAgICAgICB2YXIgY2FsY3Vsb19tYXhtaW47DQogICAgICAgIHZhciBtYXJnZW5JenF1aWVyZG8gPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuRGVyZWNobyA9IDA7DQogICAgICAgIHZhciBtYXJnZW5TdXBlcmlvciA9IDA7DQogICAgICAgIHZhciBtYXJnZW5JbmZlcmlvciA9IDA7DQogICAgICAgIHZhciBuQ29ydGVzID0gMDsNCiAgICAgICAgdmFyIG5QdW50b3NFamVYID0gMDsNCiAgICAgICAgdmFyIHBhcnNlRGF0ZSA9IGQzLnRpbWVQYXJzZSgiJVkvJW0vJWQiKTsNCiAgICAgICAgdmFyIG1hcmdpbjsNCiAgICAgICAgdmFyIHdpZHRoOw0KICAgICAgICB2YXIgaGVpZ2h0Ow0KICAgICAgICB2YXIgY29sb3I7DQogICAgICAgIHZhciBjYXRlZ29yeTsNCiAgICAgICAgdmFyIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG87DQogICAgICAgdmFyIGFuY2hvTm9kb3M7DQogICAgICAgdmFyIHN2Z0xleWVuZGFIb3Jpem9udGFsOw0KICAgICAgIHZhciBzdmdMZWdlbmQ7DQogICAgICAgdmFyIGxlZ2VuZDsNCiAgICAgICAgZWxlbWVudF9jYXBhX2VzcGVyYW5kbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYXBhX0VzcGVyYW5kb2NlbGRhNTg2NCIpOw0KICAgICAgICBlbGVtZW50X2NhcGFfZXNwZXJhbmRvLmNsYXNzTGlzdC5yZW1vdmUoImxvYWRlcmNlbGRhNTg2NCIpOw0KICAgICAgICBjYXRlZ29yeSA9IGQzLmtleXMoZGF0YVswXSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIChrZXkgIT09ICJhbmlvX3BlcmlvZG8iICYmIGtleSAhPT0gImZlY2hhX3BlcmlvZG9fc2VyaWUiICYmIGtleSAhPT0gIm5vbWJyZV9wZXJpb2RvIiAmJiBrZXkgIT09ICJwZXJpb2RvIiAmJiBrZXkgIT09ICJldGlxdWV0YXBlcmlvZG8iKTsgfSk7DQogICAgICAgIGNvbG9yID0gIGQzLnNjYWxlT3JkaW5hbChDYWxjdWxhckdyYWRpZW50ZUNvbG9yZXNfR3JhZmljb0V2b2x1Y2lvbkxpbmVhczIoJyNGRkU5REYnLCAnI0ZGNkUyQicsIGNhdGVnb3J5Lmxlbmd0aCkpOw0KICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgIGQuZmVjaGFfcGVyaW9kb19zZXJpZSA9IHBhcnNlRGF0ZShkLmZlY2hhX3BlcmlvZG9fc2VyaWUpOw0KICAgICAgICAgICAgbkNvcnRlcysrOw0KICAgICAgICAgICAgblB1bnRvc0VqZVgrKzsNCiAgICAgICAgfSk7DQogICAgICAgIGlmIChuQ29ydGVzID4gNyl7DQogICAgICAgICAgICBuQ29ydGVzID0gNzsNCiAgICAgICAgfQ0KICAgICAgICAvLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICBjb2xvci5kb21haW4oZDMua2V5cyhkYXRhWzBdKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKGtleSAhPT0gImFuaW9fcGVyaW9kbyIgJiYga2V5ICE9PSAiZmVjaGFfcGVyaW9kb19zZXJpZSIgJiYga2V5ICE9PSAibm9tYnJlX3BlcmlvZG8iICYmIGtleSAhPT0gInBlcmlvZG8iICYmIGtleSAhPT0gImV0aXF1ZXRhcGVyaW9kbyIpOyB9KSk7DQogICAgICAgIGNhbGN1bG9fbWF4bWluID0gY29sb3IuZG9tYWluKCkubWFwKGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsDQogICAgICAgICAgICAgICAgdmFsdWVzOiBkYXRhLm1hcChmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBhbmlvX3BlcmlvZG86IGQuYW5pb19wZXJpb2RvLCBmZWNoYTogZC5mZWNoYV9wZXJpb2RvX3NlcmllLCBub21icmVfcGVyaW9kbzogZC5ub21icmVfcGVyaW9kbywgdmFsb3Jfc2VyaWU6ICtkW25hbWVdIH07DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH07DQogICAgICAgIH0pOw0KICAgICAgICB2YWxvck1heGltb0RhdG9zID0gQ2FsY3VsYXJNYXhpbW9EYXRvcyhjYWxjdWxvX21heG1pbiwgZmFsc2UpDQogICAgICAgIHZhbG9yTWluaW1vRGF0b3MgPSBDYWxjdWxhck1pbmltb0RhdG9zKGNhbGN1bG9fbWF4bWluLCBmYWxzZSwgdHJ1ZSk7DQogICAgICAgIG1hcmdlbkl6cXVpZXJkbyA9IENhbGN1bGFyQW5jaG9NYXJnZW5JenF1aWVyZG9fR3JhZmljb0xpbmVhcyhmb3JtYXQoIiMuIyMwLDAiLHZhbG9yTWF4aW1vRGF0b3MpLCBmb3JtYXQoIiMuIyMwLDAiLHZhbG9yTWluaW1vRGF0b3MpLCA5NjkpOw0KICAgICAgICBtYXJnZW5EZXJlY2hvID0gQ2FsY3VsYXJBbmNob01hcmdlbkRlcmVjaG9fR3JhZmljb0xpbmVhcyhjYXRlZ29yeSwgOTY5KTsNCiAgICAgICAgaWYgKGNhdGVnb3J5Lmxlbmd0aCA+IDEgJiYgOTY5ID4gMjIyKSANCiAgICAgICAgew0KICAgICAgICAgICAgbWFyZ2VuU3VwZXJpb3IgPSA0MDsNCiAgICAgICAgICAgIG1hcmdlbkluZmVyaW9yID0gMjA7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoY2F0ZWdvcnkubGVuZ3RoID09IDEgJiYgOTY5ID4gMjIyKSANCiAgICAgICAgew0KICAgICAgICAgICAgbWFyZ2VuRGVyZWNobyA9IDMwIA0KICAgICAgICAgICAgbWFyZ2VuU3VwZXJpb3IgPSA0MDsNCiAgICAgICAgICAgIG1hcmdlbkluZmVyaW9yID0gMjA7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSANCiAgICAgICAgew0KICAgICAgICAgICAgbWFyZ2VuRGVyZWNobyA9IDMwIA0KICAgICAgICAgICAgbWFyZ2VuU3VwZXJpb3IgPSA1MDsNCiAgICAgICAgICAgIG1hcmdlbkluZmVyaW9yID0gNTA7DQogICAgICAgIH0NCiAgICAgICAgZmVjaGFNYXhpbW8gPSBkMy5tYXgoY2FsY3Vsb19tYXhtaW4sIGZ1bmN0aW9uIChzZXJpZSkgew0KICAgICAgICAgICAgcmV0dXJuIGQzLm1heChzZXJpZS52YWx1ZXMsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGQuZmVjaGE7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICAgIGZlY2hhTWluaW1vID0gZDMubWluKGNhbGN1bG9fbWF4bWluLCBmdW5jdGlvbiAoc2VyaWUpIHsNCiAgICAgICAgICAgIHJldHVybiBkMy5taW4oc2VyaWUudmFsdWVzLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBkLmZlY2hhOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgICBtYXJnaW4gPSB7IHRvcDogbWFyZ2VuU3VwZXJpb3IsIHJpZ2h0OiBtYXJnZW5EZXJlY2hvLCBib3R0b206IG1hcmdlbkluZmVyaW9yLCBsZWZ0OiBtYXJnZW5JenF1aWVyZG8gfTsNCiAgICAgICAgd2lkdGggPSA5NjkgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodDsNCiAgICAgICAgaGVpZ2h0ID0gMjIyIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207DQogICAgICAgIGVqZVggPSBkMy5zY2FsZVRpbWUoKS5yYW5nZShbMCwgd2lkdGhdKTsNCiAgICAgICAgZWplWSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pOw0KICAgICAgICBsaW5lYV9ncmFmaWNvID0gZDMubGluZSgpDQogICAgICAgICAgICAueChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZWplWChkLmZlY2hhKTsgfSkNCiAgICAgICAgICAgIC55KGZ1bmN0aW9uIChkKSB7IHJldHVybiBlamVZKGQudmFsb3Jfc2VyaWUpOyB9KQ0KICAgICAgICAgICAgLmRlZmluZWQoZnVuY3Rpb24gKGQpIHsgcmV0dXJuICFpc05hTihkLnZhbG9yX3NlcmllKTsgfSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgICAgICAgICAvLyAxLkFkZCB0aGUgU1ZHIFRvIHRoZSBwYWdlIEFuZCBlbXBsb3kgIzINCiAgICAgICAgc3ZnID0gZDMuc2VsZWN0KCIjY2FwYV9HcmFmaWNvX0V2b2x1Y2lvbl9MaW5lYXNfQXNpbmNyb25vY2VsZGE1ODY0IikuYXBwZW5kKCJzdmciKQ0KICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2NlbGRhNTg2NCcpDQogICAgICAgICAgICAuYXR0cigid2lkdGgiLCA5NjkpDQogICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgMjIyKQ0KICAgICAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgbWFyZ2luLmxlZnQgKyAiLCAiICsgbWFyZ2luLnRvcCArICIpIik7DQogICAgICAgIHNlcmllc0xpbmVhcyA9IGNvbG9yLmRvbWFpbigpLm1hcChmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLA0KICAgICAgICAgICAgICAgIHZhbHVlczogZGF0YS5tYXAoZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYW5pb19wZXJpb2RvOiBkLmFuaW9fcGVyaW9kbywgZXRpcXVldGFwZXJpb2RvOiBkLmV0aXF1ZXRhcGVyaW9kbywgZmVjaGE6IGQuZmVjaGFfcGVyaW9kb19zZXJpZSwgbm9tYnJlX3BlcmlvZG86IGQubm9tYnJlX3BlcmlvZG8sIHZhbG9yX3NlcmllOiArZFtuYW1lXSB9Ow0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9Ow0KICAgICAgICB9KTsNCiAgICAgICAgbkVsZW1lbnRvc1BvclNlcmllID0gc2VyaWVzTGluZWFzWzBdLnZhbHVlcy5sZW5ndGggLSAxOw0KICAgICAgICBlamVYLmRvbWFpbihbZmVjaGFNaW5pbW8sIGZlY2hhTWF4aW1vXSk7DQogICAgICAgIGVqZVkuZG9tYWluKFt2YWxvck1pbmltb0RhdG9zLCB2YWxvck1heGltb0RhdG9zXSk7DQogICAgICAgICAgICAgICAgLy8gTGV5ZW5kYSwgZWplIGRlIGxhcyBYLCBwdW50b3MgeSBsZXllbmRhIGRlIGVzdG9zIHB1bnRvczoNCiAgICAgICAgc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiZnVlbnRlX2dlbmVyaWNhIikNCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDAsIiArIGhlaWdodCArICIpIikNCiAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oKS5zY2FsZShlamVYKS50aWNrU2l6ZSgtaGVpZ2h0KS50aWNrcyhuQ29ydGVzKSkNCiAgICAgICAgICAgIC5jYWxsKA0KICAgICAgICAgICAgICAgIGcgPT4gew0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdEFsbCgidGV4dCIpDQogICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoInRleHQtYW5jaG9yIiwgIm1pZGRsZSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigieSIsICI1IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdEFsbCgibGluZSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDAuNykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC4zKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdCgiLmRvbWFpbiIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDEuNSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC41KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICkNCiAgICAgICAgOw0KICAgICAgICBzdmcuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJmdWVudGVfZ2VuZXJpY2EiKQ0KICAgICAgICAgICAgLmNhbGwoZDMuYXhpc0xlZnQoZWplWSkudGlja3MoNCkudGlja1NpemUoLXdpZHRoKSkNCiAgICAgICAgICAgIC5jYWxsKA0KICAgICAgICAgICAgICAgIGcgPT4gew0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdEFsbCgidGV4dCIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigieCIsIC0zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJsaW5lIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMC43KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjMpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0KCIuZG9tYWluIikucmVtb3ZlKCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICApDQogICAgICAgIDsNCiAgICAgICAgc3ZnLnNlbGVjdEFsbCgidGV4dCIpLmF0dHIoJ2ZpbGwnLCAnI0E5QTlBOScpOw0KICAgICAgICBpZiAoY2F0ZWdvcnkubGVuZ3RoID4gMSApIA0KICAgICAgICB7DQogICAgICAgICAgICBzdmdMZWdlbmQgPSBzdmcuYXBwZW5kKCdnJykNCiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZ0xlZ2VuZCcpDQogICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArICh3aWR0aCArIDIwKSArICIsIiArIDAgKyAiKSIpOw0KICAgICAgICAgICAgbGVnZW5kID0gc3ZnTGVnZW5kLnNlbGVjdEFsbCgnLmxlZ2VuZCcpDQogICAgICAgICAgICAgICAgLmRhdGEoY2F0ZWdvcnkpDQogICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdnJykNCiAgICAgICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibGVnZW5kIikNCiAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQsIGkpIHsgcmV0dXJuICJ0cmFuc2xhdGUoMCwiICsgaSAqIDIwICsgIikiIH0pOw0KICAgICAgICAgICAgbGVnZW5kLmFwcGVuZCgncmVjdCcpDQogICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZCA9PiBjb2xvcihkKSkNCiAgICAgICAgICAgICAgICAuYXR0cigneCcsIDApDQogICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAwKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIDEwKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAxMCk7DQogICAgICAgICAgICBsZWdlbmQuYXBwZW5kKCJ0ZXh0IikNCiAgICAgICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibGVnZW5kLXRleHQiKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ4IiwgMTUpDQogICAgICAgICAgICAgICAgLmF0dHIoInkiLCAxMCkNCiAgICAgICAgICAgICAgICAudGV4dChkID0+IGQpDQogICAgICAgIH0NCiAgICAgICAgaWYgKHZhbG9yTWF4aW1vRGF0b3MgPiAwICYmIHZhbG9yTWluaW1vRGF0b3MgPCAwICkgDQogICAgICAgIHsNCiAgICAgICAgICAgIGxpbmVhQ2VybyA9IHN2Zy5hcHBlbmQoImxpbmUiKQ0KICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2xpbmVhQ2VybycpDQogICAgICAgICAgICAuYXR0cigieDEiLCAwKQ0KICAgICAgICAgICAgLmF0dHIoInkxIiwgZWplWSgwKSkNCiAgICAgICAgICAgIC5hdHRyKCJ4MiIsIHdpZHRoKQ0KICAgICAgICAgICAgLmF0dHIoInkyIiwgZWplWSgwKSkNCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2Utd2lkdGgiLCAiMXB4IikNCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2UiLCAiI0E5QTlBOSIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS1kYXNoYXJyYXkiLCAoIjUsIDMiKSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgfQ0KICAgICAgICBsaW5lYXNfc2VyaWVzID0gc3ZnLnNlbGVjdEFsbCgiLmxpbmVhc19zZXJpZXMiKQ0KICAgICAgICAgICAgLmRhdGEoc2VyaWVzTGluZWFzKQ0KICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIDsNCiAgICAgICAgbGluZWFzX3Nlcmllcy5hcHBlbmQoInBhdGgiKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxpbmUgbGluZWNlbGRhNTg2NCIpDQogICAgICAgICAgICAuYXR0cigiZCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBsaW5lYV9ncmFmaWNvKGQudmFsdWVzKTsgfSkNCiAgICAgICAgICAgIC5hdHRyKCJkYXRhLWxlZ2VuZCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLm5hbWUgfSkNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGNvbG9yKGQubmFtZSk7IH0pOw0KICAgICAgICBwdW50b3NBaXNsYWRvcyA9IHN2Zy5zZWxlY3RBbGwoIi5kb3QiKQ0KICAgICAgICAgICAgLmRhdGEoc2VyaWVzTGluZWFzKS5lbnRlcigpDQogICAgICAgICAgICAuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdjaXJjbGUtZ3JvdXAnKQ0KICAgICAgICAgICAgLnN0eWxlKCJmaWxsIiwgZnVuY3Rpb24gKGQsIGkxKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yKGQubmFtZSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgOw0KICAgICAgICBwdW50b3NBaXNsYWRvcy5zZWxlY3RBbGwoIi5kb3QiKQ0KICAgICAgICAgICAgLmRhdGEoZCA9PiBkLnZhbHVlcykuZW50ZXIoKQ0KICAgICAgICAgICAgLmFwcGVuZCgiY2lyY2xlIikgLy8gVXNlcyB0aGUgZW50ZXIoKS5hcHBlbmQoKSBtZXRob2QNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJkb3QiKSAvLyBBc3NpZ24gYSBjbGFzcyBmb3Igc3R5bGluZw0KICAgICAgICAgICAgLmF0dHIoImN4IiwgZnVuY3Rpb24gKGQsIGkpIHsgcmV0dXJuIGVqZVgoZC5mZWNoYSkgfSkNCiAgICAgICAgICAgIC5hdHRyKCJjeSIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBlamVZKGQudmFsb3Jfc2VyaWUpIH0pDQogICAgICAgICAgICAuYXR0cigiciIsIDMpDQogICAgICAgICAgICAuc3R5bGUoIm9wYWNpdHkiLCBmdW5jdGlvbiAoZCwgaSkgew0KICAgICAgICAgICAgICAgIGlmIChpID09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY0RpbWVuc2lvbkV4dCsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoZC52YWxvcl9zZXJpZSA9PSAiJ251bGwnIiB8fCBpc05hTihkLnZhbG9yX3NlcmllKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwICYmIGkgPCBuRWxlbWVudG9zUG9yU2VyaWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllKSkgJiYgKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgKyAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgKyAxXS52YWxvcl9zZXJpZSkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIxIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgKyAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgKyAxXS52YWxvcl9zZXJpZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIxIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gbkVsZW1lbnRvc1BvclNlcmllICYmIChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjEiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgOw0KICAgICAgICB0cmFuc2l0aW9uKGQzLnNlbGVjdEFsbCgiLmxpbmVjZWxkYTU4NjQiKSk7DQogICAgICAgIGxpbmVhc1ZlcnRIb3JSYXRvbiA9IHN2Zy5hcHBlbmQoImciKTsgDQogICAgICAgIGxpbmVhc1ZlcnRIb3JSYXRvbi5hcHBlbmQoInBhdGgiKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIm1vdXNlLWxpbmVjZWxkYTU4NjQiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCAiIzAwMDAwMCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsICIxcHgiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UtZGFzaGFycmF5IiwgKCI1LCA1IikpDQogICAgICAgICAgICAuc3R5bGUoIm9wYWNpdHkiLCAiMSIpOw0KICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24uYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJtb3VzZS1saW5lLWhvcml6b250YWxjZWxkYTU4NjQiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCAiIzAwMDAwMCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsICIxcHgiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UtZGFzaGFycmF5IiwgKCI1LCA1IikpDQogICAgICAgICAgICAuc3R5bGUoIm9wYWNpdHkiLCAiMSIpOw0KICAgICAgICByYXRvblBvckxpbmVhID0gbGluZWFzVmVydEhvclJhdG9uLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODY0IikNCiAgICAgICAgICAgIC5kYXRhKHNlcmllc0xpbmVhcykNCiAgICAgICAgICAgIC5lbnRlcigpDQogICAgICAgICAgICAuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJtb3VzZS1wZXItbGluZWNlbGRhNTg2NCIpOw0KICAgICAgICAgICAgLy9UYWJ1bGFjacOzbiBkZXNjdWFkcmFkYToNCiAgICAgICAgICAgICAgICByYXRvblBvckxpbmVhLmFwcGVuZCgiY2lyY2xlIikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInIiLCA0KQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IoZC5uYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJmaWxsIiwgIiNGRkZGRkYiKQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsICIzcHgiKQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgIHJhdG9uUG9yTGluZWEuYXBwZW5kKCJ0ZXh0IikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInRleHQtYW5jaG9yIiwgIm1pZGRsZSIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgiZm9udC1zaXplIiwgIjE2cHgiKQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoInRleHQtZGVjb3JhdGlvbiIsICJ1bmRlcmxpbmUiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgxMCwzKSIpOw0KICAgICAgICAgICAgICAgIGxpbmVhc1ZlcnRIb3JSYXRvbi5hcHBlbmQoInJlY3QiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAncmVjdGNlbGRhNTg2NCcpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHdpZHRoKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigiZmlsbCIsICJub25lIikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInBvaW50ZXItZXZlbnRzIiwgImFsbCIpDQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2VvdXQiLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lY2VsZGE1ODY0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZS1ob3Jpem9udGFsY2VsZGE1ODY0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTU4NjQgY2lyY2xlIikuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTU4NjQgdGV4dCIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiI2dsb2JvX0dyYWZpY29fTUxpbmVhcyIpLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiI2dsb2JvX0dyYWZpY29fTUxpbmVhc19MZXllbmRhWSIpLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lY2VsZGE1ODY0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMC42NSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZS1ob3Jpem9udGFsY2VsZGE1ODY0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMC42NSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTU4NjQgY2lyY2xlIikuc3R5bGUoIm9wYWNpdHkiLCAiMSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTU4NjQgdGV4dCIpLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiI2dsb2JvX0dyYWZpY29fTUxpbmVhcyIpLnN0eWxlKCdkaXNwbGF5JywgJ2Jsb2NrJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXNfTGV5ZW5kYVkiKS5zdHlsZSgnZGlzcGxheScsICdibG9jaycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckxpbmVhc1B1bnRvcygnY2VsZGE1ODY0JywgZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBoZWlnaHQpDQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyQ29udGVuaWRvR2xvYm8oZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIG1hcmdpbiwgY29sb3IsICcjLiMjMCwwJykNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW1vdmUiLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyTGluZWFzUHVudG9zKCdjZWxkYTU4NjQnLCBkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIGhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJDb250ZW5pZG9HbG9ibyhkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgbWFyZ2luLCBjb2xvciwgJyMuIyMwLDAnKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgKTsNCjwvc2NyaXB0Pg0KPC9kaXY+PGRpdiBDbGFzcz0iem9uYV9tYXNfaW5mbyI+PGRpdiBpZD0iY2NjIiBjbGFzcz0iYm94X2xpbXBpbyBib3giPjxpbWcgaWQ9ImFhYWEiIGNsYXNzPSJpY29ub19kZXNjYXJnYSIgc3JjPSJpbWFnZW5lcy9pY29ub19kZXNjYXJnYS5wbmciIGFsdD0iIiB0aXRsZT0iIiA+PGRpdiBpZD0iY2FwYV9vcGNpb25lc19kZXNjYXJnYXMiIGNsYXNzPSJvdmVybGF5IG1lbnVfb3BjaW9uZXMgcmVwcmVzZW50YWNpb25fdmlzdWFsaXphY2lvbiBzb21icmFfcGVyaW1ldHJhbCIgPjxoND5EZXNjYXJnYXM6IDwvaDQ+PHVsIGlkPSJtZW51MSIgPjxsaSBpZD0ib3B0XzEuMyIgb25jbGljaz0ic2F2ZVN2Z0FzUG5nKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZWxkYTU4NjQnKSwgJ1BvcmNlbnRhamUgZGUgcG9ibGFjacOzbiBkZSA2NSB5IG3DoXMgYcOxb3MgKCUpLnBuZycsIHtsZWZ0OiAtMjAsIHdpZHRoOiAxMDA0LCBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZGRkZGJ30pOyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fcG5nLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+SW1hZ2VuIFBORzwvbGk+PGEgaHJlZj0iIyIgaWQ9ImRlc2NhcmdhNTg2NCI+PGxpID48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19zdmcucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5JbWFnZW4gU1ZHPC9saT48L2E+PHNjcmlwdD5kMy5zZWxlY3QoIiNkZXNjYXJnYTU4NjQiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpe2QzLnNlbGVjdCh0aGlzKS5hdHRyKCJocmVmIiwgJ2RhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCwnICsgYnRvYSgnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iSVNPLTg4NTktMSIgPz5cclxuPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczphdHRyaWI9Imh0dHA6Ly93d3cuY2FydG8ubmV0L2F0dHJpYiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM6YTM9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iIGEzOnNjcmlwdEltcGxlbWVudGF0aW9uPSJBZG9iZSIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb247IHRleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTsgaW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eTsgZmlsbC1ydWxlOmV2ZW5vZGQ7IGNsaXAtcnVsZTpldmVub2RkOyIgd2lkdGg9Ijk2OSIgaGVpZ2h0PSI0NDQiPjxzdHlsZT4gdGV4dHtmb250LXNpemU6IDEycHg7Y29sb3I6ICNBOUE5QTk7Zm9udC1mYW1pbHk6IEFyaWFsO2ZpbGw6ICNBOUE5QTk7fSAubGluZSB7ZmlsbDogbm9uZTt9PC9zdHlsZT4nICsgZDMuc2VsZWN0KCIjY2VsZGE1ODY0IikuaHRtbCgpICsgJzwvc3ZnPicgICkpLmF0dHIoImRvd25sb2FkIiwgIlBvcmNlbnRhamUgZGUgcG9ibGFjacOzbiBkZSA2NSB5IG3DoXMgYcOxb3MgKCUpLnN2ZyIpfSk8L3NjcmlwdD48YSBocmVmPSJwcm9jZXNvX2Rlc2NhcmdhX2V4Y2VsX2Nzdi5hc3B4P3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJmlkcD0xMDAwMSZJZF9DZWxkYV9GaWxhX1BsYW50aWxsYT01ODY0JklkX1RlcnJpdG9yaW89MDAmSWRfVGVycml0b3Jpb19QYWRyZT1DQ0EwMiZpZGlvbWE9MSZUaXBvX0ZpY2hlcm9fR2VuZXJhZG89ZXhjZWwiPjxsaSBpZD0ib3B0XzEuNyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fZXhjZWwucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5EYXRvcyBFeGNlbDwvbGk+PC9hPjxhIGhyZWY9InByb2Nlc29fZGVzY2FyZ2FfZXhjZWxfY3N2LmFzcHg/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmaWRwPTEwMDAxJklkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTU4NjQmSWRfVGVycml0b3Jpbz0wMCZJZF9UZXJyaXRvcmlvX1BhZHJlPUNDQTAyJmlkaW9tYT0xJlRpcG9fRmljaGVyb19HZW5lcmFkbz1jc3YiPjxsaSBpZD0ib3B0XzEuOCI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fY3N2LnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+RGF0b3MgQ1NWPC9saT48L2E+PC91bD48L2Rpdj48L2Rpdj48ZGl2IGlkPSJjY2MiIGNsYXNzPSJib3hfbGltcGlvIGJveCI+PGltZyBjbGFzcz0iaWNvbm9fZGVzY2FyZ2EiIHNyYz0iaW1hZ2VuZXMvaWNvbm9fbWFzLnBuZyIgYWx0PSIiIHRpdGxlPSIiID48ZGl2IGlkPSJjYXBhX29wY2lvbmVzX21hc29wY2lvbmVzIiBjbGFzcz0ib3ZlcmxheSBtZW51X29wY2lvbmVzIHJlcHJlc2VudGFjaW9uX3Zpc3VhbGl6YWNpb24gc29tYnJhX3BlcmltZXRyYWwiID48aDQ+TcOhcyBvcGNpb25lczo8L2g0Pjx1bCBpZD0ibWVudTEiID48YSBocmVmPSIjZXgxIiBpZD0iREFUT1MmMDAmNTg2NCZDQ0EwMiIgcmVsPSJtb2RhbDpvcGVuIj48bGkgaWQ9Im9wdF8xLjMiPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX2dyaWQucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5WZXIgZGF0b3M8L2xpPjwvYT48L3VsPjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgQ2xhc3M9InRpdHVsb19jZWxkYSI+UG9yY2VudGFqZSBkZSBwb2JsYWNpw7NuIGRlIDY1IHkgbcOhcyBhw7FvcyAoJSk8L2Rpdj48L3RkPjwvdHI+PHRyPjx0ZCBDbGFzcz0ic2VwYXJhZG9yIj48YnI+PC90ZD48L3RyPjx0ciBjbGFzcz0iYW5jbGEiPjx0ZD48YSBpZD0iSW5kaWNlX05pdmVsXzFfMjcyNiIgY2xhc3M9ImFuY2hvciI+PC9hPjwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPSJjZWxkYV9zaW5fZXN0aWxvcyIgY29sc3Bhbj0iMiI+PGRpdiBjbGFzcz0iY2xhc2VfY2FwYV91bmlkYWRfdmlzdWFsaXphY2lvbiIgc3R5bGU9Im1pbi1oZWlnaHQ6IDE0MHB4OyI+PHRhYmxlIGNsYXNzPSJUYWJsYXNfZGF0b3MiPjx0ciBjbGFzcz0iVGFibGFzX2RhdG9zX2NhYmVjZXJhIj48dGQgY2xhc3M9ImNvbHVtbmFfaXpxdWllcmRhIj48aDQgY2xhc3M9Img0X2dyYW5kZSI+UG9yY2VudGFqZSBkZSBwb2JsYWNpw7NuIGRlIG1lbm9zIGRlIDE2IGHDsW9zPC9oND48L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9kZXJlY2hhIj48aDQgY2xhc3M9Img0X211eV9ncmFuZGUgbmVnYXRpdm9zX2llIj4xNSw3ICU8L2g0PjwvdGQ+PC90cj48dHI+PHRkIGNvbHNwYW49IjIiPjx0YWJsZSBjbGFzcz0iU3VidGl0dWxvX2luZGljYWRvciI+PHRyPjx0ZCBjbGFzcz0iY29sdW1uYV9lc3RyZWNoYSI+UGVyaW9kbzo8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9hbmNoYSBuZWdyaXRhIj5BbnVhbCZuYnNwOzIwMTk8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9penF1aWVyZGEgY29sdW1uYV9lc3RyZWNoYSI+Q3JlY2ltaWVudG8gaW50ZXJhbnVhbDo8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9jZW50cm8gdGV4dG9fbXV5X2dyYW5kZSBuZWdhdGl2b3NfaWUiPi0xLDAlPC90ZD48dGQgY2xhc3M9ImNvbHVtbmFfZGVyZWNoYSI+PGltZyBjbGFzcz0iaW1hZ2VuX3RlbmRlbmNpYSIgc3JjPSJodHRwOi8vd3d3LnBvcnRhbGVzdGFkaXN0aWNvLmNvbS9pbWFnZW5lcy9wYWxldGFzLzEwMDAxL2NyZWNpbWllbnRvX2FiYWpvLnBuZyIgYWx0PSJFc3RhYmlsaWRhZCI+PC90ZD48L3RyPjx0cj48dGQgY2xhc3M9ImNvbHVtbmFfZXN0cmVjaGEiPkZ1ZW50ZTo8L3RkPjx0ZCBjb2xzcGFuPSI0IiBjbGFzcz0ibmVncml0YSI+RWxhYm9yYWNpw7NuIHByb3BpYSBjb24gZGF0b3MgZGVsIElORTwvdGQ+PC90cj48L3RhYmxlPjwvdGQ+PC90cj48dHI+PHRkIGNvbHNwYW49IjIiPjxwIGNsYXNzPSJ0ZXh0b19jb250ZW5pZG8iPlBvcmNlbnRhamUgZGVsIGdydXBvIGRlIGVkYWQgc29icmUgbGEgcG9ibGFjacOzbiB0b3RhbC48L3A+PC90ZD48L3RyPjwvdGFibGU+PC9kaXY+PC90ZD48L3RyPjx0cj48dGQgQ2xhc3M9InNlcGFyYWRvciI+PGJyPjwvdGQ+PC90cj48dHIgY2xhc3M9ImFuY2xhIj48dGQ+PGEgaWQ9IkluZGljZV9OaXZlbF8xXzU4NjUiIGNsYXNzPSJhbmNob3IiPjwvYT48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY2VsZGFfdGlwb19maWxhXzEiIGNvbHNwYW49IjIiPjxkaXYgY2xhc3M9ImNsYXNlX2NhcGFfdW5pZGFkX3Zpc3VhbGl6YWNpb24iIHN0eWxlPSJtaW4taGVpZ2h0OiAyMjJweDsiPjxkaXYgaWQ9ImNhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNTg2NSI+DQo8ZGl2IGlkPSJjYXBhX0VzcGVyYW5kb2NlbGRhNTg2NSIgY2xhc3M9ImxvYWQtY29udGFpbmVyIGxvYWRlcmNlbGRhNTg2NSI+PC9kaXY+DQo8L2Rpdj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQogICAgICAgIC5saW5lY2VsZGE1ODY1IHsNCiAgICAgICAgICAgIGZpbGw6IG5vbmU7DQogICAgICAgICAgICBzdHJva2U6ICNGRjZFMkI7DQogICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI7DQogICAgICAgIH0NCiAgICAgICAgLmxvYWRlcmNlbGRhNTg2NSwNCiAgICAgICAgLmxvYWRlcmNlbGRhNTg2NTphZnRlciB7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICB3aWR0aDogMTMwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDEzMHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2FkZXJjZWxkYTU4NjUgew0KICAgICAgICAgICAgbWFyZ2luOiA0NnB4IDQyMHB4Ow0KICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRleHQtaW5kZW50OiAtOTk5OWVtOw0KICAgICAgICAgICAgYm9yZGVyLXRvcDogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1yaWdodDogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDEuMWVtIHNvbGlkICNGRjZFMkI7DQogICAgICAgICAgICBib3JkZXItbGVmdDogMS4xZW0gc29saWQgI0ZGRTlERjsNCiAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOw0KICAgICAgICAgICAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiBsb2FkOCAxLjFzIGluZmluaXRlIGxpbmVhcjsNCiAgICAgICAgICAgIGFuaW1hdGlvbjogbG9hZDggMS4xcyBpbmZpbml0ZSBsaW5lYXI7DQogICAgICAgIH0NCjwvc3R5bGU+DQo8c2NyaXB0Pg0KZDMuY3N2KCJodHRwOi8vd3d3LnBvcnRhbGVzdGFkaXN0aWNvLmNvbS9zZXJ2aWNpb19vYnRlbmNpb25fZGF0b3NfdmlzdWFsaXphY2lvbmVzLmFzbXgvT2J0ZW5lcl9EYXRvcz9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZwSWRfUGFnaW5hX0FjdGl2YT0xMDAwMSZwSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NTg2NSZwSWRfVGVycml0b3Jpbz0wMDsmcElkX1RlcnJpdG9yaW9fUGFkcmU9JnBJZGlvbWE9MSZwSWRfcmVnaW9uPWVzLWVzIikudGhlbigNCiAgICBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICB2YXIgbGluZWFfZ3JhZmljbzsNCiAgICAgICAgdmFyIHN2ZzsNCiAgICAgICAgdmFyIHNlcmllc0xpbmVhczsNCiAgICAgICAgdmFyIGxpbmVhQ2VybzsNCiAgICAgICAgdmFyIGxpbmVhc19zZXJpZXM7DQogICAgICAgIHZhciBuRWxlbWVudG9zUG9yU2VyaWU7DQogICAgICAgIHZhciBwdW50b3NBaXNsYWRvczsNCiAgICAgICAgdmFyIGxpbmVhc1ZlcnRIb3JSYXRvbjsNCiAgICAgICAgdmFyIHJhdG9uUG9yTGluZWE7DQogICAgICAgIHZhciBlamVYOw0KICAgICAgICB2YXIgZWplWTsNCiAgICAgICAgdmFyIGNEaW1lbnNpb25FeHQgPSAwDQogICAgICAgIHZhciB2YWxvck1pbmltb0RhdG9zID0gMDsNCiAgICAgICAgdmFyIHZhbG9yTWF4aW1vRGF0b3MgPSAwOw0KICAgICAgICB2YXIgZmVjaGFNYXhpbW87DQogICAgICAgIHZhciBmZWNoYU1pbmltbzsNCiAgICAgICAgdmFyIGNhbGN1bG9fbWF4bWluOw0KICAgICAgICB2YXIgbWFyZ2VuSXpxdWllcmRvID0gMDsNCiAgICAgICAgdmFyIG1hcmdlbkRlcmVjaG8gPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuU3VwZXJpb3IgPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuSW5mZXJpb3IgPSAwOw0KICAgICAgICB2YXIgbkNvcnRlcyA9IDA7DQogICAgICAgIHZhciBuUHVudG9zRWplWCA9IDA7DQogICAgICAgIHZhciBwYXJzZURhdGUgPSBkMy50aW1lUGFyc2UoIiVZLyVtLyVkIik7DQogICAgICAgIHZhciBtYXJnaW47DQogICAgICAgIHZhciB3aWR0aDsNCiAgICAgICAgdmFyIGhlaWdodDsNCiAgICAgICAgdmFyIGNvbG9yOw0KICAgICAgICB2YXIgY2F0ZWdvcnk7DQogICAgICAgIHZhciBlbGVtZW50X2NhcGFfZXNwZXJhbmRvOw0KICAgICAgIHZhciBhbmNob05vZG9zOw0KICAgICAgIHZhciBzdmdMZXllbmRhSG9yaXpvbnRhbDsNCiAgICAgICB2YXIgc3ZnTGVnZW5kOw0KICAgICAgIHZhciBsZWdlbmQ7DQogICAgICAgIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FwYV9Fc3BlcmFuZG9jZWxkYTU4NjUiKTsNCiAgICAgICAgZWxlbWVudF9jYXBhX2VzcGVyYW5kby5jbGFzc0xpc3QucmVtb3ZlKCJsb2FkZXJjZWxkYTU4NjUiKTsNCiAgICAgICAgY2F0ZWdvcnkgPSBkMy5rZXlzKGRhdGFbMF0pLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoa2V5ICE9PSAiYW5pb19wZXJpb2RvIiAmJiBrZXkgIT09ICJmZWNoYV9wZXJpb2RvX3NlcmllIiAmJiBrZXkgIT09ICJub21icmVfcGVyaW9kbyIgJiYga2V5ICE9PSAicGVyaW9kbyIgJiYga2V5ICE9PSAiZXRpcXVldGFwZXJpb2RvIik7IH0pOw0KICAgICAgICBjb2xvciA9ICBkMy5zY2FsZU9yZGluYWwoQ2FsY3VsYXJHcmFkaWVudGVDb2xvcmVzX0dyYWZpY29Fdm9sdWNpb25MaW5lYXMyKCcjRkZFOURGJywgJyNGRjZFMkInLCBjYXRlZ29yeS5sZW5ndGgpKTsNCiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICBkLmZlY2hhX3BlcmlvZG9fc2VyaWUgPSBwYXJzZURhdGUoZC5mZWNoYV9wZXJpb2RvX3NlcmllKTsNCiAgICAgICAgICAgIG5Db3J0ZXMrKzsNCiAgICAgICAgICAgIG5QdW50b3NFamVYKys7DQogICAgICAgIH0pOw0KICAgICAgICBpZiAobkNvcnRlcyA+IDcpew0KICAgICAgICAgICAgbkNvcnRlcyA9IDc7DQogICAgICAgIH0NCiAgICAgICAgLy8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgY29sb3IuZG9tYWluKGQzLmtleXMoZGF0YVswXSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIChrZXkgIT09ICJhbmlvX3BlcmlvZG8iICYmIGtleSAhPT0gImZlY2hhX3BlcmlvZG9fc2VyaWUiICYmIGtleSAhPT0gIm5vbWJyZV9wZXJpb2RvIiAmJiBrZXkgIT09ICJwZXJpb2RvIiAmJiBrZXkgIT09ICJldGlxdWV0YXBlcmlvZG8iKTsgfSkpOw0KICAgICAgICBjYWxjdWxvX21heG1pbiA9IGNvbG9yLmRvbWFpbigpLm1hcChmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLA0KICAgICAgICAgICAgICAgIHZhbHVlczogZGF0YS5tYXAoZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYW5pb19wZXJpb2RvOiBkLmFuaW9fcGVyaW9kbywgZmVjaGE6IGQuZmVjaGFfcGVyaW9kb19zZXJpZSwgbm9tYnJlX3BlcmlvZG86IGQubm9tYnJlX3BlcmlvZG8sIHZhbG9yX3NlcmllOiArZFtuYW1lXSB9Ow0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9Ow0KICAgICAgICB9KTsNCiAgICAgICAgdmFsb3JNYXhpbW9EYXRvcyA9IENhbGN1bGFyTWF4aW1vRGF0b3MoY2FsY3Vsb19tYXhtaW4sIGZhbHNlKQ0KICAgICAgICB2YWxvck1pbmltb0RhdG9zID0gQ2FsY3VsYXJNaW5pbW9EYXRvcyhjYWxjdWxvX21heG1pbiwgZmFsc2UsIHRydWUpOw0KICAgICAgICBtYXJnZW5JenF1aWVyZG8gPSBDYWxjdWxhckFuY2hvTWFyZ2VuSXpxdWllcmRvX0dyYWZpY29MaW5lYXMoZm9ybWF0KCIjLiMjMCwwIix2YWxvck1heGltb0RhdG9zKSwgZm9ybWF0KCIjLiMjMCwwIix2YWxvck1pbmltb0RhdG9zKSwgOTY5KTsNCiAgICAgICAgbWFyZ2VuRGVyZWNobyA9IENhbGN1bGFyQW5jaG9NYXJnZW5EZXJlY2hvX0dyYWZpY29MaW5lYXMoY2F0ZWdvcnksIDk2OSk7DQogICAgICAgIGlmIChjYXRlZ29yeS5sZW5ndGggPiAxICYmIDk2OSA+IDIyMikgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNDA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDIwOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGNhdGVnb3J5Lmxlbmd0aCA9PSAxICYmIDk2OSA+IDIyMikgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlbkRlcmVjaG8gPSAzMCANCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNDA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDIwOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlbkRlcmVjaG8gPSAzMCANCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNTA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDUwOw0KICAgICAgICB9DQogICAgICAgIGZlY2hhTWF4aW1vID0gZDMubWF4KGNhbGN1bG9fbWF4bWluLCBmdW5jdGlvbiAoc2VyaWUpIHsNCiAgICAgICAgICAgIHJldHVybiBkMy5tYXgoc2VyaWUudmFsdWVzLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBkLmZlY2hhOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgICBmZWNoYU1pbmltbyA9IGQzLm1pbihjYWxjdWxvX21heG1pbiwgZnVuY3Rpb24gKHNlcmllKSB7DQogICAgICAgICAgICByZXR1cm4gZDMubWluKHNlcmllLnZhbHVlcywgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC5mZWNoYTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgICAgbWFyZ2luID0geyB0b3A6IG1hcmdlblN1cGVyaW9yLCByaWdodDogbWFyZ2VuRGVyZWNobywgYm90dG9tOiBtYXJnZW5JbmZlcmlvciwgbGVmdDogbWFyZ2VuSXpxdWllcmRvIH07DQogICAgICAgIHdpZHRoID0gOTY5IC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQ7DQogICAgICAgIGhlaWdodCA9IDIyMiAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tOw0KICAgICAgICBlamVYID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSk7DQogICAgICAgIGVqZVkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKTsNCiAgICAgICAgbGluZWFfZ3JhZmljbyA9IGQzLmxpbmUoKQ0KICAgICAgICAgICAgLngoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVgoZC5mZWNoYSk7IH0pDQogICAgICAgICAgICAueShmdW5jdGlvbiAoZCkgeyByZXR1cm4gZWplWShkLnZhbG9yX3NlcmllKTsgfSkNCiAgICAgICAgICAgIC5kZWZpbmVkKGZ1bmN0aW9uIChkKSB7IHJldHVybiAhaXNOYU4oZC52YWxvcl9zZXJpZSk7IH0pDQogICAgICAgICAgICA7DQogICAgICAgICAgICAgICAgLy8gMS5BZGQgdGhlIFNWRyBUbyB0aGUgcGFnZSBBbmQgZW1wbG95ICMyDQogICAgICAgIHN2ZyA9IGQzLnNlbGVjdCgiI2NhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNTg2NSIpLmFwcGVuZCgic3ZnIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdjZWxkYTU4NjUnKQ0KICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgOTY5KQ0KICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIDIyMikNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIG1hcmdpbi5sZWZ0ICsgIiwgIiArIG1hcmdpbi50b3AgKyAiKSIpOw0KICAgICAgICBzZXJpZXNMaW5lYXMgPSBjb2xvci5kb21haW4oKS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgbmFtZTogbmFtZSwNCiAgICAgICAgICAgICAgICB2YWx1ZXM6IGRhdGEubWFwKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGFuaW9fcGVyaW9kbzogZC5hbmlvX3BlcmlvZG8sIGV0aXF1ZXRhcGVyaW9kbzogZC5ldGlxdWV0YXBlcmlvZG8sIGZlY2hhOiBkLmZlY2hhX3BlcmlvZG9fc2VyaWUsIG5vbWJyZV9wZXJpb2RvOiBkLm5vbWJyZV9wZXJpb2RvLCB2YWxvcl9zZXJpZTogK2RbbmFtZV0gfTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSk7DQogICAgICAgIG5FbGVtZW50b3NQb3JTZXJpZSA9IHNlcmllc0xpbmVhc1swXS52YWx1ZXMubGVuZ3RoIC0gMTsNCiAgICAgICAgZWplWC5kb21haW4oW2ZlY2hhTWluaW1vLCBmZWNoYU1heGltb10pOw0KICAgICAgICBlamVZLmRvbWFpbihbdmFsb3JNaW5pbW9EYXRvcywgdmFsb3JNYXhpbW9EYXRvc10pOw0KICAgICAgICAgICAgICAgIC8vIExleWVuZGEsIGVqZSBkZSBsYXMgWCwgcHVudG9zIHkgbGV5ZW5kYSBkZSBlc3RvcyBwdW50b3M6DQogICAgICAgIHN2Zy5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImZ1ZW50ZV9nZW5lcmljYSIpDQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCIgKyBoZWlnaHQgKyAiKSIpDQogICAgICAgICAgICAuY2FsbChkMy5heGlzQm90dG9tKCkuc2NhbGUoZWplWCkudGlja1NpemUoLWhlaWdodCkudGlja3MobkNvcnRlcykpDQogICAgICAgICAgICAuY2FsbCgNCiAgICAgICAgICAgICAgICBnID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoInkiLCAiNSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoImxpbmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAwLjcpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuMykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3QoIi5kb21haW4iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAxLjUpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuNSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICApDQogICAgICAgIDsNCiAgICAgICAgc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiZnVlbnRlX2dlbmVyaWNhIikNCiAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNMZWZ0KGVqZVkpLnRpY2tzKDQpLnRpY2tTaXplKC13aWR0aCkpDQogICAgICAgICAgICAuY2FsbCgNCiAgICAgICAgICAgICAgICBnID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoIngiLCAtMykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdEFsbCgibGluZSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDAuNykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC4zKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdCgiLmRvbWFpbiIpLnJlbW92ZSgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKQ0KICAgICAgICA7DQogICAgICAgIHN2Zy5zZWxlY3RBbGwoInRleHQiKS5hdHRyKCdmaWxsJywgJyNBOUE5QTknKTsNCiAgICAgICAgaWYgKGNhdGVnb3J5Lmxlbmd0aCA+IDEgKSANCiAgICAgICAgew0KICAgICAgICAgICAgc3ZnTGVnZW5kID0gc3ZnLmFwcGVuZCgnZycpDQogICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2dMZWdlbmQnKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyAod2lkdGggKyAyMCkgKyAiLCIgKyAwICsgIikiKTsNCiAgICAgICAgICAgIGxlZ2VuZCA9IHN2Z0xlZ2VuZC5zZWxlY3RBbGwoJy5sZWdlbmQnKQ0KICAgICAgICAgICAgICAgIC5kYXRhKGNhdGVnb3J5KQ0KICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZycpDQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxlZ2VuZCIpDQogICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiAidHJhbnNsYXRlKDAsIiArIGkgKiAyMCArICIpIiB9KTsNCiAgICAgICAgICAgIGxlZ2VuZC5hcHBlbmQoJ3JlY3QnKQ0KICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGQgPT4gY29sb3IoZCkpDQogICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAwKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgMCkNCiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCAxMCkNCiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTApOw0KICAgICAgICAgICAgbGVnZW5kLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxlZ2VuZC10ZXh0IikNCiAgICAgICAgICAgICAgICAuYXR0cigieCIsIDE1KQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgMTApDQogICAgICAgICAgICAgICAgLnRleHQoZCA9PiBkKQ0KICAgICAgICB9DQogICAgICAgIGlmICh2YWxvck1heGltb0RhdG9zID4gMCAmJiB2YWxvck1pbmltb0RhdG9zIDwgMCApIA0KICAgICAgICB7DQogICAgICAgICAgICBsaW5lYUNlcm8gPSBzdmcuYXBwZW5kKCJsaW5lIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdsaW5lYUNlcm8nKQ0KICAgICAgICAgICAgLmF0dHIoIngxIiwgMCkNCiAgICAgICAgICAgIC5hdHRyKCJ5MSIsIGVqZVkoMCkpDQogICAgICAgICAgICAuYXR0cigieDIiLCB3aWR0aCkNCiAgICAgICAgICAgIC5hdHRyKCJ5MiIsIGVqZVkoMCkpDQogICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuYXR0cigic3Ryb2tlIiwgIiNBOUE5QTkiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UtZGFzaGFycmF5IiwgKCI1LCAzIikpDQogICAgICAgICAgICA7DQogICAgICAgIH0NCiAgICAgICAgbGluZWFzX3NlcmllcyA9IHN2Zy5zZWxlY3RBbGwoIi5saW5lYXNfc2VyaWVzIikNCiAgICAgICAgICAgIC5kYXRhKHNlcmllc0xpbmVhcykNCiAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgiZyIpDQogICAgICAgICAgICA7DQogICAgICAgIGxpbmVhc19zZXJpZXMuYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsaW5lIGxpbmVjZWxkYTU4NjUiKQ0KICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gbGluZWFfZ3JhZmljbyhkLnZhbHVlcyk7IH0pDQogICAgICAgICAgICAuYXR0cigiZGF0YS1sZWdlbmQiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lIH0pDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBjb2xvcihkLm5hbWUpOyB9KTsNCiAgICAgICAgcHVudG9zQWlzbGFkb3MgPSBzdmcuc2VsZWN0QWxsKCIuZG90IikNCiAgICAgICAgICAgIC5kYXRhKHNlcmllc0xpbmVhcykuZW50ZXIoKQ0KICAgICAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY2lyY2xlLWdyb3VwJykNCiAgICAgICAgICAgIC5zdHlsZSgiZmlsbCIsIGZ1bmN0aW9uIChkLCBpMSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcihkLm5hbWUpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgcHVudG9zQWlzbGFkb3Muc2VsZWN0QWxsKCIuZG90IikNCiAgICAgICAgICAgIC5kYXRhKGQgPT4gZC52YWx1ZXMpLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImNpcmNsZSIpIC8vIFVzZXMgdGhlIGVudGVyKCkuYXBwZW5kKCkgbWV0aG9kDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiZG90IikgLy8gQXNzaWduIGEgY2xhc3MgZm9yIHN0eWxpbmcNCiAgICAgICAgICAgIC5hdHRyKCJjeCIsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiBlamVYKGQuZmVjaGEpIH0pDQogICAgICAgICAgICAuYXR0cigiY3kiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZWplWShkLnZhbG9yX3NlcmllKSB9KQ0KICAgICAgICAgICAgLmF0dHIoInIiLCAzKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgZnVuY3Rpb24gKGQsIGkpIHsNCiAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNEaW1lbnNpb25FeHQrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGQudmFsb3Jfc2VyaWUgPT0gIidudWxsJyIgfHwgaXNOYU4oZC52YWxvcl9zZXJpZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCAmJiBpIDwgbkVsZW1lbnRvc1BvclNlcmllKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSkpICYmIChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IG5FbGVtZW50b3NQb3JTZXJpZSAmJiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIxIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgdHJhbnNpdGlvbihkMy5zZWxlY3RBbGwoIi5saW5lY2VsZGE1ODY1IikpOw0KICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24gPSBzdmcuYXBwZW5kKCJnIik7IA0KICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24uYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJtb3VzZS1saW5lY2VsZGE1ODY1IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgIiMwMDAwMDAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiMXB4IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgNSIpKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtbGluZS1ob3Jpem9udGFsY2VsZGE1ODY1IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgIiMwMDAwMDAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiMXB4IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgNSIpKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgcmF0b25Qb3JMaW5lYSA9IGxpbmVhc1ZlcnRIb3JSYXRvbi5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNTg2NSIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpDQogICAgICAgICAgICAuZW50ZXIoKQ0KICAgICAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtcGVyLWxpbmVjZWxkYTU4NjUiKTsNCiAgICAgICAgICAgIC8vVGFidWxhY2nDs24gZGVzY3VhZHJhZGE6DQogICAgICAgICAgICAgICAgcmF0b25Qb3JMaW5lYS5hcHBlbmQoImNpcmNsZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJyIiwgNCkNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yKGQubmFtZSk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgiZmlsbCIsICIjRkZGRkZGIikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiM3B4IikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICByYXRvblBvckxpbmVhLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImZvbnQtc2l6ZSIsICIxNnB4IikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJ0ZXh0LWRlY29yYXRpb24iLCAidW5kZXJsaW5lIikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMTAsMykiKTsNCiAgICAgICAgICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24uYXBwZW5kKCJyZWN0IikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3JlY3RjZWxkYTU4NjUnKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigid2lkdGgiLCB3aWR0aCkNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIGhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAibm9uZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJwb2ludGVyLWV2ZW50cyIsICJhbGwiKQ0KICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZWNlbGRhNTg2NSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNTg2NSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODY1IGNpcmNsZSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODY1IHRleHQiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXMiKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXNfTGV5ZW5kYVkiKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZWNlbGRhNTg2NSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAuNjUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNTg2NSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAuNjUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODY1IGNpcmNsZSIpLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODY1IHRleHQiKS5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXMiKS5zdHlsZSgnZGlzcGxheScsICdibG9jaycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzX0xleWVuZGFZIikuc3R5bGUoJ2Rpc3BsYXknLCAnYmxvY2snKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJMaW5lYXNQdW50b3MoJ2NlbGRhNTg2NScsIGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgaGVpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckNvbnRlbmlkb0dsb2JvKGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBtYXJnaW4sIGNvbG9yLCAnIy4jIzAsMCcpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2Vtb3ZlIiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckxpbmVhc1B1bnRvcygnY2VsZGE1ODY1JywgZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBoZWlnaHQpDQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyQ29udGVuaWRvR2xvYm8oZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIG1hcmdpbiwgY29sb3IsICcjLiMjMCwwJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICk7DQo8L3NjcmlwdD4NCjwvZGl2PjxkaXYgQ2xhc3M9InpvbmFfbWFzX2luZm8iPjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGlkPSJhYWFhIiBjbGFzcz0iaWNvbm9fZGVzY2FyZ2EiIHNyYz0iaW1hZ2VuZXMvaWNvbm9fZGVzY2FyZ2EucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfZGVzY2FyZ2FzIiBjbGFzcz0ib3ZlcmxheSBtZW51X29wY2lvbmVzIHJlcHJlc2VudGFjaW9uX3Zpc3VhbGl6YWNpb24gc29tYnJhX3BlcmltZXRyYWwiID48aDQ+RGVzY2FyZ2FzOiA8L2g0Pjx1bCBpZD0ibWVudTEiID48bGkgaWQ9Im9wdF8xLjMiIG9uY2xpY2s9InNhdmVTdmdBc1BuZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2VsZGE1ODY1JyksICdQb3JjZW50YWplIGRlIHBvYmxhY2nDs24gZGUgbWVub3MgZGUgMTYgYcOxb3MgKCUpLnBuZycsIHtsZWZ0OiAtMjAsIHdpZHRoOiAxMDA0LCBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZGRkZGJ30pOyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fcG5nLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+SW1hZ2VuIFBORzwvbGk+PGEgaHJlZj0iIyIgaWQ9ImRlc2NhcmdhNTg2NSI+PGxpID48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19zdmcucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5JbWFnZW4gU1ZHPC9saT48L2E+PHNjcmlwdD5kMy5zZWxlY3QoIiNkZXNjYXJnYTU4NjUiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpe2QzLnNlbGVjdCh0aGlzKS5hdHRyKCJocmVmIiwgJ2RhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCwnICsgYnRvYSgnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iSVNPLTg4NTktMSIgPz5cclxuPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczphdHRyaWI9Imh0dHA6Ly93d3cuY2FydG8ubmV0L2F0dHJpYiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM6YTM9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iIGEzOnNjcmlwdEltcGxlbWVudGF0aW9uPSJBZG9iZSIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb247IHRleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTsgaW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eTsgZmlsbC1ydWxlOmV2ZW5vZGQ7IGNsaXAtcnVsZTpldmVub2RkOyIgd2lkdGg9Ijk2OSIgaGVpZ2h0PSI0NDQiPjxzdHlsZT4gdGV4dHtmb250LXNpemU6IDEycHg7Y29sb3I6ICNBOUE5QTk7Zm9udC1mYW1pbHk6IEFyaWFsO2ZpbGw6ICNBOUE5QTk7fSAubGluZSB7ZmlsbDogbm9uZTt9PC9zdHlsZT4nICsgZDMuc2VsZWN0KCIjY2VsZGE1ODY1IikuaHRtbCgpICsgJzwvc3ZnPicgICkpLmF0dHIoImRvd25sb2FkIiwgIlBvcmNlbnRhamUgZGUgcG9ibGFjacOzbiBkZSBtZW5vcyBkZSAxNiBhw7FvcyAoJSkuc3ZnIil9KTwvc2NyaXB0PjxhIGhyZWY9InByb2Nlc29fZGVzY2FyZ2FfZXhjZWxfY3N2LmFzcHg/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmaWRwPTEwMDAxJklkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTU4NjUmSWRfVGVycml0b3Jpbz0wMCZJZF9UZXJyaXRvcmlvX1BhZHJlPUNDQTAyJmlkaW9tYT0xJlRpcG9fRmljaGVyb19HZW5lcmFkbz1leGNlbCI+PGxpIGlkPSJvcHRfMS43Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19leGNlbC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkRhdG9zIEV4Y2VsPC9saT48L2E+PGEgaHJlZj0icHJvY2Vzb19kZXNjYXJnYV9leGNlbF9jc3YuYXNweD9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NTg2NSZJZF9UZXJyaXRvcmlvPTAwJklkX1RlcnJpdG9yaW9fUGFkcmU9Q0NBMDImaWRpb21hPTEmVGlwb19GaWNoZXJvX0dlbmVyYWRvPWNzdiI+PGxpIGlkPSJvcHRfMS44Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19jc3YucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5EYXRvcyBDU1Y8L2xpPjwvYT48L3VsPjwvZGl2PjwvZGl2PjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGNsYXNzPSJpY29ub19kZXNjYXJnYSIgc3JjPSJpbWFnZW5lcy9pY29ub19tYXMucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfbWFzb3BjaW9uZXMiIGNsYXNzPSJvdmVybGF5IG1lbnVfb3BjaW9uZXMgcmVwcmVzZW50YWNpb25fdmlzdWFsaXphY2lvbiBzb21icmFfcGVyaW1ldHJhbCIgPjxoND5Nw6FzIG9wY2lvbmVzOjwvaDQ+PHVsIGlkPSJtZW51MSIgPjxhIGhyZWY9IiNleDEiIGlkPSJEQVRPUyYwMCY1ODY1JkNDQTAyIiByZWw9Im1vZGFsOm9wZW4iPjxsaSBpZD0ib3B0XzEuMyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fZ3JpZC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPlZlciBkYXRvczwvbGk+PC9hPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBDbGFzcz0idGl0dWxvX2NlbGRhIj5Qb3JjZW50YWplIGRlIHBvYmxhY2nDs24gZGUgbWVub3MgZGUgMTYgYcOxb3MgKCUpPC9kaXY+PC90ZD48L3RyPjx0cj48dGQgQ2xhc3M9InNlcGFyYWRvciI+PGJyPjwvdGQ+PC90cj48dHIgY2xhc3M9ImFuY2xhIj48dGQ+PGEgaWQ9IkluZGljZV9OaXZlbF8xXzI3MjgiIGNsYXNzPSJhbmNob3IiPjwvYT48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY2VsZGFfc2luX2VzdGlsb3MiIGNvbHNwYW49IjIiPjxkaXYgY2xhc3M9ImNsYXNlX2NhcGFfdW5pZGFkX3Zpc3VhbGl6YWNpb24iIHN0eWxlPSJtaW4taGVpZ2h0OiAxNDBweDsiPjx0YWJsZSBjbGFzcz0iVGFibGFzX2RhdG9zIj48dHIgY2xhc3M9IlRhYmxhc19kYXRvc19jYWJlY2VyYSI+PHRkIGNsYXNzPSJjb2x1bW5hX2l6cXVpZXJkYSI+PGg0IGNsYXNzPSJoNF9ncmFuZGUiPkVkYWQgbWVkaWE8L2g0PjwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2RlcmVjaGEiPjxoNCBjbGFzcz0iaDRfbXV5X2dyYW5kZSBuZWdhdGl2b3NfaWUiPjQyLDkgQcOxb3M8L2g0PjwvdGQ+PC90cj48dHI+PHRkIGNvbHNwYW49IjIiPjx0YWJsZSBjbGFzcz0iU3VidGl0dWxvX2luZGljYWRvciI+PHRyPjx0ZCBjbGFzcz0iY29sdW1uYV9lc3RyZWNoYSI+UGVyaW9kbzo8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9hbmNoYSBuZWdyaXRhIj5BbnVhbCZuYnNwOzIwMTc8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9penF1aWVyZGEgY29sdW1uYV9lc3RyZWNoYSI+Q3JlY2ltaWVudG8gaW50ZXJhbnVhbDo8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9jZW50cm8gdGV4dG9fbXV5X2dyYW5kZSBuZWdhdGl2b3NfaWUiPjAsNiU8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9kZXJlY2hhIj48aW1nIGNsYXNzPSJpbWFnZW5fdGVuZGVuY2lhIiBzcmM9Imh0dHA6Ly93d3cucG9ydGFsZXN0YWRpc3RpY28uY29tL2ltYWdlbmVzL3BhbGV0YXMvMTAwMDEvY3JlY2ltaWVudG9fYXJyaWJhLnBuZyIgYWx0PSJFc3RhYmlsaWRhZCI+PC90ZD48L3RyPjx0cj48dGQgY2xhc3M9ImNvbHVtbmFfZXN0cmVjaGEiPkZ1ZW50ZTo8L3RkPjx0ZCBjb2xzcGFuPSI0IiBjbGFzcz0ibmVncml0YSI+SU5FLCBJbmRpY2Fkb3JlcyBEZW1vZ3LDoWZpY29zIELDoXNpY29zLjwvdGQ+PC90cj48L3RhYmxlPjwvdGQ+PC90cj48dHI+PHRkIGNvbHNwYW49IjIiPjxwIGNsYXNzPSJ0ZXh0b19jb250ZW5pZG8iPlByb21lZGlvIGRlIGVkYWRlcyBkZSBsYSBwb2JsYWNpw7NuIGVuIHVuIHRlcnJpdG9yaW8uPC9wPjwvdGQ+PC90cj48L3RhYmxlPjwvZGl2PjwvdGQ+PC90cj48dHI+PHRkIENsYXNzPSJzZXBhcmFkb3IiPjxicj48L3RkPjwvdHI+PHRyIGNsYXNzPSJhbmNsYSI+PHRkPjxhIGlkPSJJbmRpY2VfTml2ZWxfMV81ODY2IiBjbGFzcz0iYW5jaG9yIj48L2E+PC90ZD48L3RyPjx0cj48dGQgY2xhc3M9ImNlbGRhX3RpcG9fZmlsYV8xIiBjb2xzcGFuPSIyIj48ZGl2IGNsYXNzPSJjbGFzZV9jYXBhX3VuaWRhZF92aXN1YWxpemFjaW9uIiBzdHlsZT0ibWluLWhlaWdodDogMjIycHg7Ij48ZGl2IGlkPSJjYXBhX0dyYWZpY29fRXZvbHVjaW9uX0xpbmVhc19Bc2luY3Jvbm9jZWxkYTU4NjYiPg0KPGRpdiBpZD0iY2FwYV9Fc3BlcmFuZG9jZWxkYTU4NjYiIGNsYXNzPSJsb2FkLWNvbnRhaW5lciBsb2FkZXJjZWxkYTU4NjYiPjwvZGl2Pg0KPC9kaXY+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KICAgICAgICAubGluZWNlbGRhNTg2NiB7DQogICAgICAgICAgICBmaWxsOiBub25lOw0KICAgICAgICAgICAgc3Ryb2tlOiAjRkY2RTJCOw0KICAgICAgICAgICAgc3Ryb2tlLXdpZHRoOiAyOw0KICAgICAgICB9DQogICAgICAgIC5sb2FkZXJjZWxkYTU4NjYsDQogICAgICAgIC5sb2FkZXJjZWxkYTU4NjY6YWZ0ZXIgew0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgd2lkdGg6IDEzMHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMzBweDsNCiAgICAgICAgfQ0KICAgICAgICAubG9hZGVyY2VsZGE1ODY2IHsNCiAgICAgICAgICAgIG1hcmdpbjogNDZweCA0MjBweDsNCiAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogICAgICAgICAgICBmb250LXNpemU6IDEwcHg7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICB0ZXh0LWluZGVudDogLTk5OTllbTsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDEuMWVtIHNvbGlkICNGRjZFMkI7DQogICAgICAgICAgICBib3JkZXItcmlnaHQ6IDEuMWVtIHNvbGlkICNGRjZFMkI7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxLjFlbSBzb2xpZCAjRkY2RTJCOw0KICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDEuMWVtIHNvbGlkICNGRkU5REY7DQogICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7DQogICAgICAgICAgICAtd2Via2l0LWFuaW1hdGlvbjogbG9hZDggMS4xcyBpbmZpbml0ZSBsaW5lYXI7DQogICAgICAgICAgICBhbmltYXRpb246IGxvYWQ4IDEuMXMgaW5maW5pdGUgbGluZWFyOw0KICAgICAgICB9DQo8L3N0eWxlPg0KPHNjcmlwdD4NCmQzLmNzdigiaHR0cDovL3d3dy5wb3J0YWxlc3RhZGlzdGljby5jb20vc2VydmljaW9fb2J0ZW5jaW9uX2RhdG9zX3Zpc3VhbGl6YWNpb25lcy5hc214L09idGVuZXJfRGF0b3M/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmcElkX1BhZ2luYV9BY3RpdmE9MTAwMDEmcElkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTU4NjYmcElkX1RlcnJpdG9yaW89MDA7JnBJZF9UZXJyaXRvcmlvX1BhZHJlPSZwSWRpb21hPTEmcElkX3JlZ2lvbj1lcy1lcyIpLnRoZW4oDQogICAgZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgdmFyIGxpbmVhX2dyYWZpY287DQogICAgICAgIHZhciBzdmc7DQogICAgICAgIHZhciBzZXJpZXNMaW5lYXM7DQogICAgICAgIHZhciBsaW5lYUNlcm87DQogICAgICAgIHZhciBsaW5lYXNfc2VyaWVzOw0KICAgICAgICB2YXIgbkVsZW1lbnRvc1BvclNlcmllOw0KICAgICAgICB2YXIgcHVudG9zQWlzbGFkb3M7DQogICAgICAgIHZhciBsaW5lYXNWZXJ0SG9yUmF0b247DQogICAgICAgIHZhciByYXRvblBvckxpbmVhOw0KICAgICAgICB2YXIgZWplWDsNCiAgICAgICAgdmFyIGVqZVk7DQogICAgICAgIHZhciBjRGltZW5zaW9uRXh0ID0gMA0KICAgICAgICB2YXIgdmFsb3JNaW5pbW9EYXRvcyA9IDA7DQogICAgICAgIHZhciB2YWxvck1heGltb0RhdG9zID0gMDsNCiAgICAgICAgdmFyIGZlY2hhTWF4aW1vOw0KICAgICAgICB2YXIgZmVjaGFNaW5pbW87DQogICAgICAgIHZhciBjYWxjdWxvX21heG1pbjsNCiAgICAgICAgdmFyIG1hcmdlbkl6cXVpZXJkbyA9IDA7DQogICAgICAgIHZhciBtYXJnZW5EZXJlY2hvID0gMDsNCiAgICAgICAgdmFyIG1hcmdlblN1cGVyaW9yID0gMDsNCiAgICAgICAgdmFyIG1hcmdlbkluZmVyaW9yID0gMDsNCiAgICAgICAgdmFyIG5Db3J0ZXMgPSAwOw0KICAgICAgICB2YXIgblB1bnRvc0VqZVggPSAwOw0KICAgICAgICB2YXIgcGFyc2VEYXRlID0gZDMudGltZVBhcnNlKCIlWS8lbS8lZCIpOw0KICAgICAgICB2YXIgbWFyZ2luOw0KICAgICAgICB2YXIgd2lkdGg7DQogICAgICAgIHZhciBoZWlnaHQ7DQogICAgICAgIHZhciBjb2xvcjsNCiAgICAgICAgdmFyIGNhdGVnb3J5Ow0KICAgICAgICB2YXIgZWxlbWVudF9jYXBhX2VzcGVyYW5kbzsNCiAgICAgICB2YXIgYW5jaG9Ob2RvczsNCiAgICAgICB2YXIgc3ZnTGV5ZW5kYUhvcml6b250YWw7DQogICAgICAgdmFyIHN2Z0xlZ2VuZDsNCiAgICAgICB2YXIgbGVnZW5kOw0KICAgICAgICBlbGVtZW50X2NhcGFfZXNwZXJhbmRvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhcGFfRXNwZXJhbmRvY2VsZGE1ODY2Iik7DQogICAgICAgIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG8uY2xhc3NMaXN0LnJlbW92ZSgibG9hZGVyY2VsZGE1ODY2Iik7DQogICAgICAgIGNhdGVnb3J5ID0gZDMua2V5cyhkYXRhWzBdKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKGtleSAhPT0gImFuaW9fcGVyaW9kbyIgJiYga2V5ICE9PSAiZmVjaGFfcGVyaW9kb19zZXJpZSIgJiYga2V5ICE9PSAibm9tYnJlX3BlcmlvZG8iICYmIGtleSAhPT0gInBlcmlvZG8iICYmIGtleSAhPT0gImV0aXF1ZXRhcGVyaW9kbyIpOyB9KTsNCiAgICAgICAgY29sb3IgPSAgZDMuc2NhbGVPcmRpbmFsKENhbGN1bGFyR3JhZGllbnRlQ29sb3Jlc19HcmFmaWNvRXZvbHVjaW9uTGluZWFzMignI0ZGRTlERicsICcjRkY2RTJCJywgY2F0ZWdvcnkubGVuZ3RoKSk7DQogICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgZC5mZWNoYV9wZXJpb2RvX3NlcmllID0gcGFyc2VEYXRlKGQuZmVjaGFfcGVyaW9kb19zZXJpZSk7DQogICAgICAgICAgICBuQ29ydGVzKys7DQogICAgICAgICAgICBuUHVudG9zRWplWCsrOw0KICAgICAgICB9KTsNCiAgICAgICAgaWYgKG5Db3J0ZXMgPiA3KXsNCiAgICAgICAgICAgIG5Db3J0ZXMgPSA3Ow0KICAgICAgICB9DQogICAgICAgIC8vKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgIGNvbG9yLmRvbWFpbihkMy5rZXlzKGRhdGFbMF0pLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoa2V5ICE9PSAiYW5pb19wZXJpb2RvIiAmJiBrZXkgIT09ICJmZWNoYV9wZXJpb2RvX3NlcmllIiAmJiBrZXkgIT09ICJub21icmVfcGVyaW9kbyIgJiYga2V5ICE9PSAicGVyaW9kbyIgJiYga2V5ICE9PSAiZXRpcXVldGFwZXJpb2RvIik7IH0pKTsNCiAgICAgICAgY2FsY3Vsb19tYXhtaW4gPSBjb2xvci5kb21haW4oKS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgbmFtZTogbmFtZSwNCiAgICAgICAgICAgICAgICB2YWx1ZXM6IGRhdGEubWFwKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGFuaW9fcGVyaW9kbzogZC5hbmlvX3BlcmlvZG8sIGZlY2hhOiBkLmZlY2hhX3BlcmlvZG9fc2VyaWUsIG5vbWJyZV9wZXJpb2RvOiBkLm5vbWJyZV9wZXJpb2RvLCB2YWxvcl9zZXJpZTogK2RbbmFtZV0gfTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSk7DQogICAgICAgIHZhbG9yTWF4aW1vRGF0b3MgPSBDYWxjdWxhck1heGltb0RhdG9zKGNhbGN1bG9fbWF4bWluLCBmYWxzZSkNCiAgICAgICAgdmFsb3JNaW5pbW9EYXRvcyA9IENhbGN1bGFyTWluaW1vRGF0b3MoY2FsY3Vsb19tYXhtaW4sIGZhbHNlLCB0cnVlKTsNCiAgICAgICAgbWFyZ2VuSXpxdWllcmRvID0gQ2FsY3VsYXJBbmNob01hcmdlbkl6cXVpZXJkb19HcmFmaWNvTGluZWFzKGZvcm1hdCgiIy4jIzAsMCIsdmFsb3JNYXhpbW9EYXRvcyksIGZvcm1hdCgiIy4jIzAsMCIsdmFsb3JNaW5pbW9EYXRvcyksIDk2OSk7DQogICAgICAgIG1hcmdlbkRlcmVjaG8gPSBDYWxjdWxhckFuY2hvTWFyZ2VuRGVyZWNob19HcmFmaWNvTGluZWFzKGNhdGVnb3J5LCA5NjkpOw0KICAgICAgICBpZiAoY2F0ZWdvcnkubGVuZ3RoID4gMSAmJiA5NjkgPiAyMjIpIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDQwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSAyMDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChjYXRlZ29yeS5sZW5ndGggPT0gMSAmJiA5NjkgPiAyMjIpIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5EZXJlY2hvID0gMzAgDQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDQwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSAyMDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5EZXJlY2hvID0gMzAgDQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDUwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSA1MDsNCiAgICAgICAgfQ0KICAgICAgICBmZWNoYU1heGltbyA9IGQzLm1heChjYWxjdWxvX21heG1pbiwgZnVuY3Rpb24gKHNlcmllKSB7DQogICAgICAgICAgICByZXR1cm4gZDMubWF4KHNlcmllLnZhbHVlcywgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC5mZWNoYTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgICAgZmVjaGFNaW5pbW8gPSBkMy5taW4oY2FsY3Vsb19tYXhtaW4sIGZ1bmN0aW9uIChzZXJpZSkgew0KICAgICAgICAgICAgcmV0dXJuIGQzLm1pbihzZXJpZS52YWx1ZXMsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGQuZmVjaGE7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICAgIG1hcmdpbiA9IHsgdG9wOiBtYXJnZW5TdXBlcmlvciwgcmlnaHQ6IG1hcmdlbkRlcmVjaG8sIGJvdHRvbTogbWFyZ2VuSW5mZXJpb3IsIGxlZnQ6IG1hcmdlbkl6cXVpZXJkbyB9Ow0KICAgICAgICB3aWR0aCA9IDk2OSAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0Ow0KICAgICAgICBoZWlnaHQgPSAyMjIgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTsNCiAgICAgICAgZWplWCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pOw0KICAgICAgICBlamVZID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSk7DQogICAgICAgIGxpbmVhX2dyYWZpY28gPSBkMy5saW5lKCkNCiAgICAgICAgICAgIC54KGZ1bmN0aW9uIChkKSB7IHJldHVybiBlamVYKGQuZmVjaGEpOyB9KQ0KICAgICAgICAgICAgLnkoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVkoZC52YWxvcl9zZXJpZSk7IH0pDQogICAgICAgICAgICAuZGVmaW5lZChmdW5jdGlvbiAoZCkgeyByZXR1cm4gIWlzTmFOKGQudmFsb3Jfc2VyaWUpOyB9KQ0KICAgICAgICAgICAgOw0KICAgICAgICAgICAgICAgIC8vIDEuQWRkIHRoZSBTVkcgVG8gdGhlIHBhZ2UgQW5kIGVtcGxveSAjMg0KICAgICAgICBzdmcgPSBkMy5zZWxlY3QoIiNjYXBhX0dyYWZpY29fRXZvbHVjaW9uX0xpbmVhc19Bc2luY3Jvbm9jZWxkYTU4NjYiKS5hcHBlbmQoInN2ZyIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnY2VsZGE1ODY2JykNCiAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIDk2OSkNCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCAyMjIpDQogICAgICAgICAgICAuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBtYXJnaW4ubGVmdCArICIsICIgKyBtYXJnaW4udG9wICsgIikiKTsNCiAgICAgICAgc2VyaWVzTGluZWFzID0gY29sb3IuZG9tYWluKCkubWFwKGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsDQogICAgICAgICAgICAgICAgdmFsdWVzOiBkYXRhLm1hcChmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBhbmlvX3BlcmlvZG86IGQuYW5pb19wZXJpb2RvLCBldGlxdWV0YXBlcmlvZG86IGQuZXRpcXVldGFwZXJpb2RvLCBmZWNoYTogZC5mZWNoYV9wZXJpb2RvX3NlcmllLCBub21icmVfcGVyaW9kbzogZC5ub21icmVfcGVyaW9kbywgdmFsb3Jfc2VyaWU6ICtkW25hbWVdIH07DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH07DQogICAgICAgIH0pOw0KICAgICAgICBuRWxlbWVudG9zUG9yU2VyaWUgPSBzZXJpZXNMaW5lYXNbMF0udmFsdWVzLmxlbmd0aCAtIDE7DQogICAgICAgIGVqZVguZG9tYWluKFtmZWNoYU1pbmltbywgZmVjaGFNYXhpbW9dKTsNCiAgICAgICAgZWplWS5kb21haW4oW3ZhbG9yTWluaW1vRGF0b3MsIHZhbG9yTWF4aW1vRGF0b3NdKTsNCiAgICAgICAgICAgICAgICAvLyBMZXllbmRhLCBlamUgZGUgbGFzIFgsIHB1bnRvcyB5IGxleWVuZGEgZGUgZXN0b3MgcHVudG9zOg0KICAgICAgICBzdmcuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJmdWVudGVfZ2VuZXJpY2EiKQ0KICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMCwiICsgaGVpZ2h0ICsgIikiKQ0KICAgICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSgpLnNjYWxlKGVqZVgpLnRpY2tTaXplKC1oZWlnaHQpLnRpY2tzKG5Db3J0ZXMpKQ0KICAgICAgICAgICAgLmNhbGwoDQogICAgICAgICAgICAgICAgZyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJ0ZXh0IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCAibWlkZGxlIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgIjUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJsaW5lIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMC43KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjMpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0KCIuZG9tYWluIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMS41KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjUpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKQ0KICAgICAgICA7DQogICAgICAgIHN2Zy5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImZ1ZW50ZV9nZW5lcmljYSIpDQogICAgICAgICAgICAuY2FsbChkMy5heGlzTGVmdChlamVZKS50aWNrcyg0KS50aWNrU2l6ZSgtd2lkdGgpKQ0KICAgICAgICAgICAgLmNhbGwoDQogICAgICAgICAgICAgICAgZyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJ0ZXh0IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ4IiwgLTMpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoImxpbmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAwLjcpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuMykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3QoIi5kb21haW4iKS5yZW1vdmUoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICkNCiAgICAgICAgOw0KICAgICAgICBzdmcuc2VsZWN0QWxsKCJ0ZXh0IikuYXR0cignZmlsbCcsICcjQTlBOUE5Jyk7DQogICAgICAgIGlmIChjYXRlZ29yeS5sZW5ndGggPiAxICkgDQogICAgICAgIHsNCiAgICAgICAgICAgIHN2Z0xlZ2VuZCA9IHN2Zy5hcHBlbmQoJ2cnKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdnTGVnZW5kJykNCiAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgKHdpZHRoICsgMjApICsgIiwiICsgMCArICIpIik7DQogICAgICAgICAgICBsZWdlbmQgPSBzdmdMZWdlbmQuc2VsZWN0QWxsKCcubGVnZW5kJykNCiAgICAgICAgICAgICAgICAuZGF0YShjYXRlZ29yeSkNCiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsZWdlbmQiKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCwgaSkgeyByZXR1cm4gInRyYW5zbGF0ZSgwLCIgKyBpICogMjAgKyAiKSIgfSk7DQogICAgICAgICAgICBsZWdlbmQuYXBwZW5kKCdyZWN0JykNCiAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGNvbG9yKGQpKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgMCkNCiAgICAgICAgICAgICAgICAuYXR0cigneScsIDApDQogICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgMTApDQogICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDEwKTsNCiAgICAgICAgICAgIGxlZ2VuZC5hcHBlbmQoInRleHQiKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsZWdlbmQtdGV4dCIpDQogICAgICAgICAgICAgICAgLmF0dHIoIngiLCAxNSkNCiAgICAgICAgICAgICAgICAuYXR0cigieSIsIDEwKQ0KICAgICAgICAgICAgICAgIC50ZXh0KGQgPT4gZCkNCiAgICAgICAgfQ0KICAgICAgICBpZiAodmFsb3JNYXhpbW9EYXRvcyA+IDAgJiYgdmFsb3JNaW5pbW9EYXRvcyA8IDAgKSANCiAgICAgICAgew0KICAgICAgICAgICAgbGluZWFDZXJvID0gc3ZnLmFwcGVuZCgibGluZSIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnbGluZWFDZXJvJykNCiAgICAgICAgICAgIC5hdHRyKCJ4MSIsIDApDQogICAgICAgICAgICAuYXR0cigieTEiLCBlamVZKDApKQ0KICAgICAgICAgICAgLmF0dHIoIngyIiwgd2lkdGgpDQogICAgICAgICAgICAuYXR0cigieTIiLCBlamVZKDApKQ0KICAgICAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsICIxcHgiKQ0KICAgICAgICAgICAgLmF0dHIoInN0cm9rZSIsICIjQTlBOUE5IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgMyIpKQ0KICAgICAgICAgICAgOw0KICAgICAgICB9DQogICAgICAgIGxpbmVhc19zZXJpZXMgPSBzdmcuc2VsZWN0QWxsKCIubGluZWFzX3NlcmllcyIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpDQogICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoImciKQ0KICAgICAgICAgICAgOw0KICAgICAgICBsaW5lYXNfc2VyaWVzLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibGluZSBsaW5lY2VsZGE1ODY2IikNCiAgICAgICAgICAgIC5hdHRyKCJkIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGxpbmVhX2dyYWZpY28oZC52YWx1ZXMpOyB9KQ0KICAgICAgICAgICAgLmF0dHIoImRhdGEtbGVnZW5kIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQubmFtZSB9KQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gY29sb3IoZC5uYW1lKTsgfSk7DQogICAgICAgIHB1bnRvc0Fpc2xhZG9zID0gc3ZnLnNlbGVjdEFsbCgiLmRvdCIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2NpcmNsZS1ncm91cCcpDQogICAgICAgICAgICAuc3R5bGUoImZpbGwiLCBmdW5jdGlvbiAoZCwgaTEpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IoZC5uYW1lKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICA7DQogICAgICAgIHB1bnRvc0Fpc2xhZG9zLnNlbGVjdEFsbCgiLmRvdCIpDQogICAgICAgICAgICAuZGF0YShkID0+IGQudmFsdWVzKS5lbnRlcigpDQogICAgICAgICAgICAuYXBwZW5kKCJjaXJjbGUiKSAvLyBVc2VzIHRoZSBlbnRlcigpLmFwcGVuZCgpIG1ldGhvZA0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImRvdCIpIC8vIEFzc2lnbiBhIGNsYXNzIGZvciBzdHlsaW5nDQogICAgICAgICAgICAuYXR0cigiY3giLCBmdW5jdGlvbiAoZCwgaSkgeyByZXR1cm4gZWplWChkLmZlY2hhKSB9KQ0KICAgICAgICAgICAgLmF0dHIoImN5IiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVkoZC52YWxvcl9zZXJpZSkgfSkNCiAgICAgICAgICAgIC5hdHRyKCJyIiwgMykNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsIGZ1bmN0aW9uIChkLCBpKSB7DQogICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBjRGltZW5zaW9uRXh0Kys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChkLnZhbG9yX3NlcmllID09ICInbnVsbCciIHx8IGlzTmFOKGQudmFsb3Jfc2VyaWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDAgJiYgaSA8IG5FbGVtZW50b3NQb3JTZXJpZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUpKSAmJiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjEiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjEiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBuRWxlbWVudG9zUG9yU2VyaWUgJiYgKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICA7DQogICAgICAgIHRyYW5zaXRpb24oZDMuc2VsZWN0QWxsKCIubGluZWNlbGRhNTg2NiIpKTsNCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uID0gc3ZnLmFwcGVuZCgiZyIpOyANCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtbGluZWNlbGRhNTg2NiIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsICIjMDAwMDAwIikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS1kYXNoYXJyYXkiLCAoIjUsIDUiKSkNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgIGxpbmVhc1ZlcnRIb3JSYXRvbi5hcHBlbmQoInBhdGgiKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNTg2NiIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsICIjMDAwMDAwIikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS1kYXNoYXJyYXkiLCAoIjUsIDUiKSkNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgIHJhdG9uUG9yTGluZWEgPSBsaW5lYXNWZXJ0SG9yUmF0b24uc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTU4NjYiKQ0KICAgICAgICAgICAgLmRhdGEoc2VyaWVzTGluZWFzKQ0KICAgICAgICAgICAgLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIm1vdXNlLXBlci1saW5lY2VsZGE1ODY2Iik7DQogICAgICAgICAgICAvL1RhYnVsYWNpw7NuIGRlc2N1YWRyYWRhOg0KICAgICAgICAgICAgICAgIHJhdG9uUG9yTGluZWEuYXBwZW5kKCJjaXJjbGUiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigiciIsIDQpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcihkLm5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImZpbGwiLCAiI0ZGRkZGRiIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjNweCIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgcmF0b25Qb3JMaW5lYS5hcHBlbmQoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAibWlkZGxlIikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJmb250LXNpemUiLCAiMTZweCIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgidGV4dC1kZWNvcmF0aW9uIiwgInVuZGVybGluZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDEwLDMpIik7DQogICAgICAgICAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicmVjdCIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsICdyZWN0Y2VsZGE1ODY2JykNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgd2lkdGgpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJmaWxsIiwgIm5vbmUiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigicG9pbnRlci1ldmVudHMiLCAiYWxsIikNCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmVjZWxkYTU4NjYiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lLWhvcml6b250YWxjZWxkYTU4NjYiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNTg2NiBjaXJjbGUiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNTg2NiB0ZXh0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzIikuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzX0xleWVuZGFZIikuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmVjZWxkYTU4NjYiKS5zdHlsZSgib3BhY2l0eSIsICIwLjY1Iik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lLWhvcml6b250YWxjZWxkYTU4NjYiKS5zdHlsZSgib3BhY2l0eSIsICIwLjY1Iik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNTg2NiBjaXJjbGUiKS5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNTg2NiB0ZXh0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzIikuc3R5bGUoJ2Rpc3BsYXknLCAnYmxvY2snKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiI2dsb2JvX0dyYWZpY29fTUxpbmVhc19MZXllbmRhWSIpLnN0eWxlKCdkaXNwbGF5JywgJ2Jsb2NrJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyTGluZWFzUHVudG9zKCdjZWxkYTU4NjYnLCBkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIGhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJDb250ZW5pZG9HbG9ibyhkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgbWFyZ2luLCBjb2xvciwgJyMuIyMwLDAnKQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJMaW5lYXNQdW50b3MoJ2NlbGRhNTg2NicsIGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgaGVpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckNvbnRlbmlkb0dsb2JvKGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBtYXJnaW4sIGNvbG9yLCAnIy4jIzAsMCcpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICApOw0KPC9zY3JpcHQ+DQo8L2Rpdj48ZGl2IENsYXNzPSJ6b25hX21hc19pbmZvIj48ZGl2IGlkPSJjY2MiIGNsYXNzPSJib3hfbGltcGlvIGJveCI+PGltZyBpZD0iYWFhYSIgY2xhc3M9Imljb25vX2Rlc2NhcmdhIiBzcmM9ImltYWdlbmVzL2ljb25vX2Rlc2NhcmdhLnBuZyIgYWx0PSIiIHRpdGxlPSIiID48ZGl2IGlkPSJjYXBhX29wY2lvbmVzX2Rlc2NhcmdhcyIgY2xhc3M9Im92ZXJsYXkgbWVudV9vcGNpb25lcyByZXByZXNlbnRhY2lvbl92aXN1YWxpemFjaW9uIHNvbWJyYV9wZXJpbWV0cmFsIiA+PGg0PkRlc2NhcmdhczogPC9oND48dWwgaWQ9Im1lbnUxIiA+PGxpIGlkPSJvcHRfMS4zIiBvbmNsaWNrPSJzYXZlU3ZnQXNQbmcoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NlbGRhNTg2NicpLCAnRWRhZCBtZWRpYSAoYcOxb3MpLnBuZycsIHtsZWZ0OiAtMjAsIHdpZHRoOiAxMDA0LCBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZGRkZGJ30pOyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fcG5nLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+SW1hZ2VuIFBORzwvbGk+PGEgaHJlZj0iIyIgaWQ9ImRlc2NhcmdhNTg2NiI+PGxpID48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19zdmcucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5JbWFnZW4gU1ZHPC9saT48L2E+PHNjcmlwdD5kMy5zZWxlY3QoIiNkZXNjYXJnYTU4NjYiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpe2QzLnNlbGVjdCh0aGlzKS5hdHRyKCJocmVmIiwgJ2RhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCwnICsgYnRvYSgnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iSVNPLTg4NTktMSIgPz5cclxuPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczphdHRyaWI9Imh0dHA6Ly93d3cuY2FydG8ubmV0L2F0dHJpYiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM6YTM9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iIGEzOnNjcmlwdEltcGxlbWVudGF0aW9uPSJBZG9iZSIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb247IHRleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTsgaW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eTsgZmlsbC1ydWxlOmV2ZW5vZGQ7IGNsaXAtcnVsZTpldmVub2RkOyIgd2lkdGg9Ijk2OSIgaGVpZ2h0PSI0NDQiPjxzdHlsZT4gdGV4dHtmb250LXNpemU6IDEycHg7Y29sb3I6ICNBOUE5QTk7Zm9udC1mYW1pbHk6IEFyaWFsO2ZpbGw6ICNBOUE5QTk7fSAubGluZSB7ZmlsbDogbm9uZTt9PC9zdHlsZT4nICsgZDMuc2VsZWN0KCIjY2VsZGE1ODY2IikuaHRtbCgpICsgJzwvc3ZnPicgICkpLmF0dHIoImRvd25sb2FkIiwgIkVkYWQgbWVkaWEgKGHDsW9zKS5zdmciKX0pPC9zY3JpcHQ+PGEgaHJlZj0icHJvY2Vzb19kZXNjYXJnYV9leGNlbF9jc3YuYXNweD9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NTg2NiZJZF9UZXJyaXRvcmlvPTAwJklkX1RlcnJpdG9yaW9fUGFkcmU9Q0NBMDImaWRpb21hPTEmVGlwb19GaWNoZXJvX0dlbmVyYWRvPWV4Y2VsIj48bGkgaWQ9Im9wdF8xLjciPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX2V4Y2VsLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+RGF0b3MgRXhjZWw8L2xpPjwvYT48YSBocmVmPSJwcm9jZXNvX2Rlc2NhcmdhX2V4Y2VsX2Nzdi5hc3B4P3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJmlkcD0xMDAwMSZJZF9DZWxkYV9GaWxhX1BsYW50aWxsYT01ODY2JklkX1RlcnJpdG9yaW89MDAmSWRfVGVycml0b3Jpb19QYWRyZT1DQ0EwMiZpZGlvbWE9MSZUaXBvX0ZpY2hlcm9fR2VuZXJhZG89Y3N2Ij48bGkgaWQ9Im9wdF8xLjgiPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX2Nzdi5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkRhdG9zIENTVjwvbGk+PC9hPjwvdWw+PC9kaXY+PC9kaXY+PGRpdiBpZD0iY2NjIiBjbGFzcz0iYm94X2xpbXBpbyBib3giPjxpbWcgY2xhc3M9Imljb25vX2Rlc2NhcmdhIiBzcmM9ImltYWdlbmVzL2ljb25vX21hcy5wbmciIGFsdD0iIiB0aXRsZT0iIiA+PGRpdiBpZD0iY2FwYV9vcGNpb25lc19tYXNvcGNpb25lcyIgY2xhc3M9Im92ZXJsYXkgbWVudV9vcGNpb25lcyByZXByZXNlbnRhY2lvbl92aXN1YWxpemFjaW9uIHNvbWJyYV9wZXJpbWV0cmFsIiA+PGg0Pk3DoXMgb3BjaW9uZXM6PC9oND48dWwgaWQ9Im1lbnUxIiA+PGEgaHJlZj0iI2V4MSIgaWQ9IkRBVE9TJjAwJjU4NjYmQ0NBMDIiIHJlbD0ibW9kYWw6b3BlbiI+PGxpIGlkPSJvcHRfMS4zIj48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19ncmlkLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+VmVyIGRhdG9zPC9saT48L2E+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IENsYXNzPSJ0aXR1bG9fY2VsZGEiPkVkYWQgbWVkaWEgKGHDsW9zKTwvZGl2PjwvdGQ+PC90cj48dHI+PHRkIENsYXNzPSJzZXBhcmFkb3IiPjxicj48L3RkPjwvdHI+PHRyIGNsYXNzPSJhbmNsYSI+PHRkPjxhIGlkPSJJbmRpY2VfTml2ZWxfMV8yNzMwIiBjbGFzcz0iYW5jaG9yIj48L2E+PC90ZD48L3RyPjx0cj48dGQgY2xhc3M9ImNlbGRhX3Npbl9lc3RpbG9zIiBjb2xzcGFuPSIyIj48ZGl2IGNsYXNzPSJjbGFzZV9jYXBhX3VuaWRhZF92aXN1YWxpemFjaW9uIiBzdHlsZT0ibWluLWhlaWdodDogMTQwcHg7Ij48dGFibGUgY2xhc3M9IlRhYmxhc19kYXRvcyI+PHRyIGNsYXNzPSJUYWJsYXNfZGF0b3NfY2FiZWNlcmEiPjx0ZCBjbGFzcz0iY29sdW1uYV9penF1aWVyZGEiPjxoNCBjbGFzcz0iaDRfZ3JhbmRlIj5UYXNhIGRlIG5hdGFsaWRhZCAocG9yIG1pbCBoYWJpdGFudGVzKTwvaDQ+PC90ZD48dGQgY2xhc3M9ImNvbHVtbmFfZGVyZWNoYSI+PGg0IGNsYXNzPSJoNF9tdXlfZ3JhbmRlIG5lZ2F0aXZvc19pZSI+OCwwIOKAsDwvaDQ+PC90ZD48L3RyPjx0cj48dGQgY29sc3Bhbj0iMiI+PHRhYmxlIGNsYXNzPSJTdWJ0aXR1bG9faW5kaWNhZG9yIj48dHI+PHRkIGNsYXNzPSJjb2x1bW5hX2VzdHJlY2hhIj5QZXJpb2RvOjwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2FuY2hhIG5lZ3JpdGEiPkFudWFsJm5ic3A7MjAxODwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2l6cXVpZXJkYSBjb2x1bW5hX2VzdHJlY2hhIj5DcmVjaW1pZW50byBpbnRlcmFudWFsOjwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2NlbnRybyB0ZXh0b19tdXlfZ3JhbmRlIG5lZ2F0aXZvc19pZSI+LTUsNyU8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9kZXJlY2hhIj48aW1nIGNsYXNzPSJpbWFnZW5fdGVuZGVuY2lhIiBzcmM9Imh0dHA6Ly93d3cucG9ydGFsZXN0YWRpc3RpY28uY29tL2ltYWdlbmVzL3BhbGV0YXMvMTAwMDEvY3JlY2ltaWVudG9fYWJham8ucG5nIiBhbHQ9IkVzdGFiaWxpZGFkIj48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY29sdW1uYV9lc3RyZWNoYSI+RnVlbnRlOjwvdGQ+PHRkIGNvbHNwYW49IjQiIGNsYXNzPSJuZWdyaXRhIj5JTkUsIEluZGljYWRvcmVzIERlbW9ncsOhZmljb3MgQsOhc2ljb3MuPC90ZD48L3RyPjwvdGFibGU+PC90ZD48L3RyPjx0cj48dGQgY29sc3Bhbj0iMiI+PHAgY2xhc3M9InRleHRvX2NvbnRlbmlkbyI+UmVsYWNpw7NuIGVudHJlIGxvcyBuYWNpbWllbnRvcyB5IGxhIHBvYmxhY2nDs24gbWVkaWEgcG9yIGNhZGEgbWlsIGhhYml0YW50ZXMuPC9wPjwvdGQ+PC90cj48L3RhYmxlPjwvZGl2PjwvdGQ+PC90cj48dHI+PHRkIENsYXNzPSJzZXBhcmFkb3IiPjxicj48L3RkPjwvdHI+PHRyIGNsYXNzPSJhbmNsYSI+PHRkPjxhIGlkPSJJbmRpY2VfTml2ZWxfMV81ODY3IiBjbGFzcz0iYW5jaG9yIj48L2E+PC90ZD48L3RyPjx0cj48dGQgY2xhc3M9ImNlbGRhX3RpcG9fZmlsYV8xIiBjb2xzcGFuPSIyIj48ZGl2IGNsYXNzPSJjbGFzZV9jYXBhX3VuaWRhZF92aXN1YWxpemFjaW9uIiBzdHlsZT0ibWluLWhlaWdodDogMjIycHg7Ij48ZGl2IGlkPSJjYXBhX0dyYWZpY29fRXZvbHVjaW9uX0xpbmVhc19Bc2luY3Jvbm9jZWxkYTU4NjciPg0KPGRpdiBpZD0iY2FwYV9Fc3BlcmFuZG9jZWxkYTU4NjciIGNsYXNzPSJsb2FkLWNvbnRhaW5lciBsb2FkZXJjZWxkYTU4NjciPjwvZGl2Pg0KPC9kaXY+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KICAgICAgICAubGluZWNlbGRhNTg2NyB7DQogICAgICAgICAgICBmaWxsOiBub25lOw0KICAgICAgICAgICAgc3Ryb2tlOiAjRkY2RTJCOw0KICAgICAgICAgICAgc3Ryb2tlLXdpZHRoOiAyOw0KICAgICAgICB9DQogICAgICAgIC5sb2FkZXJjZWxkYTU4NjcsDQogICAgICAgIC5sb2FkZXJjZWxkYTU4Njc6YWZ0ZXIgew0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgd2lkdGg6IDEzMHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMzBweDsNCiAgICAgICAgfQ0KICAgICAgICAubG9hZGVyY2VsZGE1ODY3IHsNCiAgICAgICAgICAgIG1hcmdpbjogNDZweCA0MjBweDsNCiAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogICAgICAgICAgICBmb250LXNpemU6IDEwcHg7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICB0ZXh0LWluZGVudDogLTk5OTllbTsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDEuMWVtIHNvbGlkICNGRjZFMkI7DQogICAgICAgICAgICBib3JkZXItcmlnaHQ6IDEuMWVtIHNvbGlkICNGRjZFMkI7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxLjFlbSBzb2xpZCAjRkY2RTJCOw0KICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDEuMWVtIHNvbGlkICNGRkU5REY7DQogICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7DQogICAgICAgICAgICAtd2Via2l0LWFuaW1hdGlvbjogbG9hZDggMS4xcyBpbmZpbml0ZSBsaW5lYXI7DQogICAgICAgICAgICBhbmltYXRpb246IGxvYWQ4IDEuMXMgaW5maW5pdGUgbGluZWFyOw0KICAgICAgICB9DQo8L3N0eWxlPg0KPHNjcmlwdD4NCmQzLmNzdigiaHR0cDovL3d3dy5wb3J0YWxlc3RhZGlzdGljby5jb20vc2VydmljaW9fb2J0ZW5jaW9uX2RhdG9zX3Zpc3VhbGl6YWNpb25lcy5hc214L09idGVuZXJfRGF0b3M/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmcElkX1BhZ2luYV9BY3RpdmE9MTAwMDEmcElkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTU4NjcmcElkX1RlcnJpdG9yaW89MDA7JnBJZF9UZXJyaXRvcmlvX1BhZHJlPSZwSWRpb21hPTEmcElkX3JlZ2lvbj1lcy1lcyIpLnRoZW4oDQogICAgZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgdmFyIGxpbmVhX2dyYWZpY287DQogICAgICAgIHZhciBzdmc7DQogICAgICAgIHZhciBzZXJpZXNMaW5lYXM7DQogICAgICAgIHZhciBsaW5lYUNlcm87DQogICAgICAgIHZhciBsaW5lYXNfc2VyaWVzOw0KICAgICAgICB2YXIgbkVsZW1lbnRvc1BvclNlcmllOw0KICAgICAgICB2YXIgcHVudG9zQWlzbGFkb3M7DQogICAgICAgIHZhciBsaW5lYXNWZXJ0SG9yUmF0b247DQogICAgICAgIHZhciByYXRvblBvckxpbmVhOw0KICAgICAgICB2YXIgZWplWDsNCiAgICAgICAgdmFyIGVqZVk7DQogICAgICAgIHZhciBjRGltZW5zaW9uRXh0ID0gMA0KICAgICAgICB2YXIgdmFsb3JNaW5pbW9EYXRvcyA9IDA7DQogICAgICAgIHZhciB2YWxvck1heGltb0RhdG9zID0gMDsNCiAgICAgICAgdmFyIGZlY2hhTWF4aW1vOw0KICAgICAgICB2YXIgZmVjaGFNaW5pbW87DQogICAgICAgIHZhciBjYWxjdWxvX21heG1pbjsNCiAgICAgICAgdmFyIG1hcmdlbkl6cXVpZXJkbyA9IDA7DQogICAgICAgIHZhciBtYXJnZW5EZXJlY2hvID0gMDsNCiAgICAgICAgdmFyIG1hcmdlblN1cGVyaW9yID0gMDsNCiAgICAgICAgdmFyIG1hcmdlbkluZmVyaW9yID0gMDsNCiAgICAgICAgdmFyIG5Db3J0ZXMgPSAwOw0KICAgICAgICB2YXIgblB1bnRvc0VqZVggPSAwOw0KICAgICAgICB2YXIgcGFyc2VEYXRlID0gZDMudGltZVBhcnNlKCIlWS8lbS8lZCIpOw0KICAgICAgICB2YXIgbWFyZ2luOw0KICAgICAgICB2YXIgd2lkdGg7DQogICAgICAgIHZhciBoZWlnaHQ7DQogICAgICAgIHZhciBjb2xvcjsNCiAgICAgICAgdmFyIGNhdGVnb3J5Ow0KICAgICAgICB2YXIgZWxlbWVudF9jYXBhX2VzcGVyYW5kbzsNCiAgICAgICB2YXIgYW5jaG9Ob2RvczsNCiAgICAgICB2YXIgc3ZnTGV5ZW5kYUhvcml6b250YWw7DQogICAgICAgdmFyIHN2Z0xlZ2VuZDsNCiAgICAgICB2YXIgbGVnZW5kOw0KICAgICAgICBlbGVtZW50X2NhcGFfZXNwZXJhbmRvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhcGFfRXNwZXJhbmRvY2VsZGE1ODY3Iik7DQogICAgICAgIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG8uY2xhc3NMaXN0LnJlbW92ZSgibG9hZGVyY2VsZGE1ODY3Iik7DQogICAgICAgIGNhdGVnb3J5ID0gZDMua2V5cyhkYXRhWzBdKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKGtleSAhPT0gImFuaW9fcGVyaW9kbyIgJiYga2V5ICE9PSAiZmVjaGFfcGVyaW9kb19zZXJpZSIgJiYga2V5ICE9PSAibm9tYnJlX3BlcmlvZG8iICYmIGtleSAhPT0gInBlcmlvZG8iICYmIGtleSAhPT0gImV0aXF1ZXRhcGVyaW9kbyIpOyB9KTsNCiAgICAgICAgY29sb3IgPSAgZDMuc2NhbGVPcmRpbmFsKENhbGN1bGFyR3JhZGllbnRlQ29sb3Jlc19HcmFmaWNvRXZvbHVjaW9uTGluZWFzMignI0ZGRTlERicsICcjRkY2RTJCJywgY2F0ZWdvcnkubGVuZ3RoKSk7DQogICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgZC5mZWNoYV9wZXJpb2RvX3NlcmllID0gcGFyc2VEYXRlKGQuZmVjaGFfcGVyaW9kb19zZXJpZSk7DQogICAgICAgICAgICBuQ29ydGVzKys7DQogICAgICAgICAgICBuUHVudG9zRWplWCsrOw0KICAgICAgICB9KTsNCiAgICAgICAgaWYgKG5Db3J0ZXMgPiA3KXsNCiAgICAgICAgICAgIG5Db3J0ZXMgPSA3Ow0KICAgICAgICB9DQogICAgICAgIC8vKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgIGNvbG9yLmRvbWFpbihkMy5rZXlzKGRhdGFbMF0pLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoa2V5ICE9PSAiYW5pb19wZXJpb2RvIiAmJiBrZXkgIT09ICJmZWNoYV9wZXJpb2RvX3NlcmllIiAmJiBrZXkgIT09ICJub21icmVfcGVyaW9kbyIgJiYga2V5ICE9PSAicGVyaW9kbyIgJiYga2V5ICE9PSAiZXRpcXVldGFwZXJpb2RvIik7IH0pKTsNCiAgICAgICAgY2FsY3Vsb19tYXhtaW4gPSBjb2xvci5kb21haW4oKS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgbmFtZTogbmFtZSwNCiAgICAgICAgICAgICAgICB2YWx1ZXM6IGRhdGEubWFwKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGFuaW9fcGVyaW9kbzogZC5hbmlvX3BlcmlvZG8sIGZlY2hhOiBkLmZlY2hhX3BlcmlvZG9fc2VyaWUsIG5vbWJyZV9wZXJpb2RvOiBkLm5vbWJyZV9wZXJpb2RvLCB2YWxvcl9zZXJpZTogK2RbbmFtZV0gfTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSk7DQogICAgICAgIHZhbG9yTWF4aW1vRGF0b3MgPSBDYWxjdWxhck1heGltb0RhdG9zKGNhbGN1bG9fbWF4bWluLCBmYWxzZSkNCiAgICAgICAgdmFsb3JNaW5pbW9EYXRvcyA9IENhbGN1bGFyTWluaW1vRGF0b3MoY2FsY3Vsb19tYXhtaW4sIGZhbHNlLCB0cnVlKTsNCiAgICAgICAgbWFyZ2VuSXpxdWllcmRvID0gQ2FsY3VsYXJBbmNob01hcmdlbkl6cXVpZXJkb19HcmFmaWNvTGluZWFzKGZvcm1hdCgiIy4jIzAsMCIsdmFsb3JNYXhpbW9EYXRvcyksIGZvcm1hdCgiIy4jIzAsMCIsdmFsb3JNaW5pbW9EYXRvcyksIDk2OSk7DQogICAgICAgIG1hcmdlbkRlcmVjaG8gPSBDYWxjdWxhckFuY2hvTWFyZ2VuRGVyZWNob19HcmFmaWNvTGluZWFzKGNhdGVnb3J5LCA5NjkpOw0KICAgICAgICBpZiAoY2F0ZWdvcnkubGVuZ3RoID4gMSAmJiA5NjkgPiAyMjIpIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDQwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSAyMDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChjYXRlZ29yeS5sZW5ndGggPT0gMSAmJiA5NjkgPiAyMjIpIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5EZXJlY2hvID0gMzAgDQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDQwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSAyMDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5EZXJlY2hvID0gMzAgDQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDUwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSA1MDsNCiAgICAgICAgfQ0KICAgICAgICBmZWNoYU1heGltbyA9IGQzLm1heChjYWxjdWxvX21heG1pbiwgZnVuY3Rpb24gKHNlcmllKSB7DQogICAgICAgICAgICByZXR1cm4gZDMubWF4KHNlcmllLnZhbHVlcywgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC5mZWNoYTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgICAgZmVjaGFNaW5pbW8gPSBkMy5taW4oY2FsY3Vsb19tYXhtaW4sIGZ1bmN0aW9uIChzZXJpZSkgew0KICAgICAgICAgICAgcmV0dXJuIGQzLm1pbihzZXJpZS52YWx1ZXMsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGQuZmVjaGE7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICAgIG1hcmdpbiA9IHsgdG9wOiBtYXJnZW5TdXBlcmlvciwgcmlnaHQ6IG1hcmdlbkRlcmVjaG8sIGJvdHRvbTogbWFyZ2VuSW5mZXJpb3IsIGxlZnQ6IG1hcmdlbkl6cXVpZXJkbyB9Ow0KICAgICAgICB3aWR0aCA9IDk2OSAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0Ow0KICAgICAgICBoZWlnaHQgPSAyMjIgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTsNCiAgICAgICAgZWplWCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pOw0KICAgICAgICBlamVZID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSk7DQogICAgICAgIGxpbmVhX2dyYWZpY28gPSBkMy5saW5lKCkNCiAgICAgICAgICAgIC54KGZ1bmN0aW9uIChkKSB7IHJldHVybiBlamVYKGQuZmVjaGEpOyB9KQ0KICAgICAgICAgICAgLnkoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVkoZC52YWxvcl9zZXJpZSk7IH0pDQogICAgICAgICAgICAuZGVmaW5lZChmdW5jdGlvbiAoZCkgeyByZXR1cm4gIWlzTmFOKGQudmFsb3Jfc2VyaWUpOyB9KQ0KICAgICAgICAgICAgOw0KICAgICAgICAgICAgICAgIC8vIDEuQWRkIHRoZSBTVkcgVG8gdGhlIHBhZ2UgQW5kIGVtcGxveSAjMg0KICAgICAgICBzdmcgPSBkMy5zZWxlY3QoIiNjYXBhX0dyYWZpY29fRXZvbHVjaW9uX0xpbmVhc19Bc2luY3Jvbm9jZWxkYTU4NjciKS5hcHBlbmQoInN2ZyIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnY2VsZGE1ODY3JykNCiAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIDk2OSkNCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCAyMjIpDQogICAgICAgICAgICAuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBtYXJnaW4ubGVmdCArICIsICIgKyBtYXJnaW4udG9wICsgIikiKTsNCiAgICAgICAgc2VyaWVzTGluZWFzID0gY29sb3IuZG9tYWluKCkubWFwKGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsDQogICAgICAgICAgICAgICAgdmFsdWVzOiBkYXRhLm1hcChmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBhbmlvX3BlcmlvZG86IGQuYW5pb19wZXJpb2RvLCBldGlxdWV0YXBlcmlvZG86IGQuZXRpcXVldGFwZXJpb2RvLCBmZWNoYTogZC5mZWNoYV9wZXJpb2RvX3NlcmllLCBub21icmVfcGVyaW9kbzogZC5ub21icmVfcGVyaW9kbywgdmFsb3Jfc2VyaWU6ICtkW25hbWVdIH07DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH07DQogICAgICAgIH0pOw0KICAgICAgICBuRWxlbWVudG9zUG9yU2VyaWUgPSBzZXJpZXNMaW5lYXNbMF0udmFsdWVzLmxlbmd0aCAtIDE7DQogICAgICAgIGVqZVguZG9tYWluKFtmZWNoYU1pbmltbywgZmVjaGFNYXhpbW9dKTsNCiAgICAgICAgZWplWS5kb21haW4oW3ZhbG9yTWluaW1vRGF0b3MsIHZhbG9yTWF4aW1vRGF0b3NdKTsNCiAgICAgICAgICAgICAgICAvLyBMZXllbmRhLCBlamUgZGUgbGFzIFgsIHB1bnRvcyB5IGxleWVuZGEgZGUgZXN0b3MgcHVudG9zOg0KICAgICAgICBzdmcuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJmdWVudGVfZ2VuZXJpY2EiKQ0KICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMCwiICsgaGVpZ2h0ICsgIikiKQ0KICAgICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSgpLnNjYWxlKGVqZVgpLnRpY2tTaXplKC1oZWlnaHQpLnRpY2tzKG5Db3J0ZXMpKQ0KICAgICAgICAgICAgLmNhbGwoDQogICAgICAgICAgICAgICAgZyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJ0ZXh0IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCAibWlkZGxlIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgIjUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJsaW5lIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMC43KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjMpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0KCIuZG9tYWluIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMS41KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjUpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKQ0KICAgICAgICA7DQogICAgICAgIHN2Zy5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImZ1ZW50ZV9nZW5lcmljYSIpDQogICAgICAgICAgICAuY2FsbChkMy5heGlzTGVmdChlamVZKS50aWNrcyg0KS50aWNrU2l6ZSgtd2lkdGgpKQ0KICAgICAgICAgICAgLmNhbGwoDQogICAgICAgICAgICAgICAgZyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJ0ZXh0IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ4IiwgLTMpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoImxpbmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAwLjcpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuMykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3QoIi5kb21haW4iKS5yZW1vdmUoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICkNCiAgICAgICAgOw0KICAgICAgICBzdmcuc2VsZWN0QWxsKCJ0ZXh0IikuYXR0cignZmlsbCcsICcjQTlBOUE5Jyk7DQogICAgICAgIGlmIChjYXRlZ29yeS5sZW5ndGggPiAxICkgDQogICAgICAgIHsNCiAgICAgICAgICAgIHN2Z0xlZ2VuZCA9IHN2Zy5hcHBlbmQoJ2cnKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdnTGVnZW5kJykNCiAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgKHdpZHRoICsgMjApICsgIiwiICsgMCArICIpIik7DQogICAgICAgICAgICBsZWdlbmQgPSBzdmdMZWdlbmQuc2VsZWN0QWxsKCcubGVnZW5kJykNCiAgICAgICAgICAgICAgICAuZGF0YShjYXRlZ29yeSkNCiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsZWdlbmQiKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCwgaSkgeyByZXR1cm4gInRyYW5zbGF0ZSgwLCIgKyBpICogMjAgKyAiKSIgfSk7DQogICAgICAgICAgICBsZWdlbmQuYXBwZW5kKCdyZWN0JykNCiAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGNvbG9yKGQpKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgMCkNCiAgICAgICAgICAgICAgICAuYXR0cigneScsIDApDQogICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgMTApDQogICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDEwKTsNCiAgICAgICAgICAgIGxlZ2VuZC5hcHBlbmQoInRleHQiKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsZWdlbmQtdGV4dCIpDQogICAgICAgICAgICAgICAgLmF0dHIoIngiLCAxNSkNCiAgICAgICAgICAgICAgICAuYXR0cigieSIsIDEwKQ0KICAgICAgICAgICAgICAgIC50ZXh0KGQgPT4gZCkNCiAgICAgICAgfQ0KICAgICAgICBpZiAodmFsb3JNYXhpbW9EYXRvcyA+IDAgJiYgdmFsb3JNaW5pbW9EYXRvcyA8IDAgKSANCiAgICAgICAgew0KICAgICAgICAgICAgbGluZWFDZXJvID0gc3ZnLmFwcGVuZCgibGluZSIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnbGluZWFDZXJvJykNCiAgICAgICAgICAgIC5hdHRyKCJ4MSIsIDApDQogICAgICAgICAgICAuYXR0cigieTEiLCBlamVZKDApKQ0KICAgICAgICAgICAgLmF0dHIoIngyIiwgd2lkdGgpDQogICAgICAgICAgICAuYXR0cigieTIiLCBlamVZKDApKQ0KICAgICAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsICIxcHgiKQ0KICAgICAgICAgICAgLmF0dHIoInN0cm9rZSIsICIjQTlBOUE5IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgMyIpKQ0KICAgICAgICAgICAgOw0KICAgICAgICB9DQogICAgICAgIGxpbmVhc19zZXJpZXMgPSBzdmcuc2VsZWN0QWxsKCIubGluZWFzX3NlcmllcyIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpDQogICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoImciKQ0KICAgICAgICAgICAgOw0KICAgICAgICBsaW5lYXNfc2VyaWVzLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibGluZSBsaW5lY2VsZGE1ODY3IikNCiAgICAgICAgICAgIC5hdHRyKCJkIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGxpbmVhX2dyYWZpY28oZC52YWx1ZXMpOyB9KQ0KICAgICAgICAgICAgLmF0dHIoImRhdGEtbGVnZW5kIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQubmFtZSB9KQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gY29sb3IoZC5uYW1lKTsgfSk7DQogICAgICAgIHB1bnRvc0Fpc2xhZG9zID0gc3ZnLnNlbGVjdEFsbCgiLmRvdCIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2NpcmNsZS1ncm91cCcpDQogICAgICAgICAgICAuc3R5bGUoImZpbGwiLCBmdW5jdGlvbiAoZCwgaTEpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IoZC5uYW1lKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICA7DQogICAgICAgIHB1bnRvc0Fpc2xhZG9zLnNlbGVjdEFsbCgiLmRvdCIpDQogICAgICAgICAgICAuZGF0YShkID0+IGQudmFsdWVzKS5lbnRlcigpDQogICAgICAgICAgICAuYXBwZW5kKCJjaXJjbGUiKSAvLyBVc2VzIHRoZSBlbnRlcigpLmFwcGVuZCgpIG1ldGhvZA0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImRvdCIpIC8vIEFzc2lnbiBhIGNsYXNzIGZvciBzdHlsaW5nDQogICAgICAgICAgICAuYXR0cigiY3giLCBmdW5jdGlvbiAoZCwgaSkgeyByZXR1cm4gZWplWChkLmZlY2hhKSB9KQ0KICAgICAgICAgICAgLmF0dHIoImN5IiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVkoZC52YWxvcl9zZXJpZSkgfSkNCiAgICAgICAgICAgIC5hdHRyKCJyIiwgMykNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsIGZ1bmN0aW9uIChkLCBpKSB7DQogICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBjRGltZW5zaW9uRXh0Kys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChkLnZhbG9yX3NlcmllID09ICInbnVsbCciIHx8IGlzTmFOKGQudmFsb3Jfc2VyaWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDAgJiYgaSA8IG5FbGVtZW50b3NQb3JTZXJpZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUpKSAmJiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjEiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjEiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBuRWxlbWVudG9zUG9yU2VyaWUgJiYgKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICA7DQogICAgICAgIHRyYW5zaXRpb24oZDMuc2VsZWN0QWxsKCIubGluZWNlbGRhNTg2NyIpKTsNCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uID0gc3ZnLmFwcGVuZCgiZyIpOyANCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtbGluZWNlbGRhNTg2NyIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsICIjMDAwMDAwIikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS1kYXNoYXJyYXkiLCAoIjUsIDUiKSkNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgIGxpbmVhc1ZlcnRIb3JSYXRvbi5hcHBlbmQoInBhdGgiKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNTg2NyIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsICIjMDAwMDAwIikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS1kYXNoYXJyYXkiLCAoIjUsIDUiKSkNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgIHJhdG9uUG9yTGluZWEgPSBsaW5lYXNWZXJ0SG9yUmF0b24uc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTU4NjciKQ0KICAgICAgICAgICAgLmRhdGEoc2VyaWVzTGluZWFzKQ0KICAgICAgICAgICAgLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIm1vdXNlLXBlci1saW5lY2VsZGE1ODY3Iik7DQogICAgICAgICAgICAvL1RhYnVsYWNpw7NuIGRlc2N1YWRyYWRhOg0KICAgICAgICAgICAgICAgIHJhdG9uUG9yTGluZWEuYXBwZW5kKCJjaXJjbGUiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigiciIsIDQpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcihkLm5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImZpbGwiLCAiI0ZGRkZGRiIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjNweCIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgcmF0b25Qb3JMaW5lYS5hcHBlbmQoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAibWlkZGxlIikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJmb250LXNpemUiLCAiMTZweCIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgidGV4dC1kZWNvcmF0aW9uIiwgInVuZGVybGluZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDEwLDMpIik7DQogICAgICAgICAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicmVjdCIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsICdyZWN0Y2VsZGE1ODY3JykNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgd2lkdGgpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJmaWxsIiwgIm5vbmUiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigicG9pbnRlci1ldmVudHMiLCAiYWxsIikNCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmVjZWxkYTU4NjciKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lLWhvcml6b250YWxjZWxkYTU4NjciKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNTg2NyBjaXJjbGUiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNTg2NyB0ZXh0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzIikuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzX0xleWVuZGFZIikuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmVjZWxkYTU4NjciKS5zdHlsZSgib3BhY2l0eSIsICIwLjY1Iik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lLWhvcml6b250YWxjZWxkYTU4NjciKS5zdHlsZSgib3BhY2l0eSIsICIwLjY1Iik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNTg2NyBjaXJjbGUiKS5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNTg2NyB0ZXh0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzIikuc3R5bGUoJ2Rpc3BsYXknLCAnYmxvY2snKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiI2dsb2JvX0dyYWZpY29fTUxpbmVhc19MZXllbmRhWSIpLnN0eWxlKCdkaXNwbGF5JywgJ2Jsb2NrJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyTGluZWFzUHVudG9zKCdjZWxkYTU4NjcnLCBkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIGhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJDb250ZW5pZG9HbG9ibyhkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgbWFyZ2luLCBjb2xvciwgJyMuIyMwLDAnKQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJMaW5lYXNQdW50b3MoJ2NlbGRhNTg2NycsIGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgaGVpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckNvbnRlbmlkb0dsb2JvKGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBtYXJnaW4sIGNvbG9yLCAnIy4jIzAsMCcpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICApOw0KPC9zY3JpcHQ+DQo8L2Rpdj48ZGl2IENsYXNzPSJ6b25hX21hc19pbmZvIj48ZGl2IGlkPSJjY2MiIGNsYXNzPSJib3hfbGltcGlvIGJveCI+PGltZyBpZD0iYWFhYSIgY2xhc3M9Imljb25vX2Rlc2NhcmdhIiBzcmM9ImltYWdlbmVzL2ljb25vX2Rlc2NhcmdhLnBuZyIgYWx0PSIiIHRpdGxlPSIiID48ZGl2IGlkPSJjYXBhX29wY2lvbmVzX2Rlc2NhcmdhcyIgY2xhc3M9Im92ZXJsYXkgbWVudV9vcGNpb25lcyByZXByZXNlbnRhY2lvbl92aXN1YWxpemFjaW9uIHNvbWJyYV9wZXJpbWV0cmFsIiA+PGg0PkRlc2NhcmdhczogPC9oND48dWwgaWQ9Im1lbnUxIiA+PGxpIGlkPSJvcHRfMS4zIiBvbmNsaWNrPSJzYXZlU3ZnQXNQbmcoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NlbGRhNTg2NycpLCAnVGFzYSBkZSBuYXRhbGlkYWQgKHBvciBtaWwgaGFiaXRhbnRlcykucG5nJywge2xlZnQ6IC0yMCwgd2lkdGg6IDEwMDQsIGJhY2tncm91bmRDb2xvcjogJyNGRkZGRkYnfSk7Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19wbmcucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5JbWFnZW4gUE5HPC9saT48YSBocmVmPSIjIiBpZD0iZGVzY2FyZ2E1ODY3Ij48bGkgPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX3N2Zy5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkltYWdlbiBTVkc8L2xpPjwvYT48c2NyaXB0PmQzLnNlbGVjdCgiI2Rlc2NhcmdhNTg2NyIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCl7ZDMuc2VsZWN0KHRoaXMpLmF0dHIoImhyZWYiLCAnZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LCcgKyBidG9hKCc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJJU08tODg1OS0xIiA/PlxyXG48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmF0dHJpYj0iaHR0cDovL3d3dy5jYXJ0by5uZXQvYXR0cmliIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxuczphMz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZVNWR1ZpZXdlckV4dGVuc2lvbnMvMy4wLyIgYTM6c2NyaXB0SW1wbGVtZW50YXRpb249IkFkb2JlIiBzdHlsZT0ic2hhcGUtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbjsgdGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5OyBpbWFnZS1yZW5kZXJpbmc6b3B0aW1pemVRdWFsaXR5OyBmaWxsLXJ1bGU6ZXZlbm9kZDsgY2xpcC1ydWxlOmV2ZW5vZGQ7IiB3aWR0aD0iOTY5IiBoZWlnaHQ9IjQ0NCI+PHN0eWxlPiB0ZXh0e2ZvbnQtc2l6ZTogMTJweDtjb2xvcjogI0E5QTlBOTtmb250LWZhbWlseTogQXJpYWw7ZmlsbDogI0E5QTlBOTt9IC5saW5lIHtmaWxsOiBub25lO308L3N0eWxlPicgKyBkMy5zZWxlY3QoIiNjZWxkYTU4NjciKS5odG1sKCkgKyAnPC9zdmc+JyAgKSkuYXR0cigiZG93bmxvYWQiLCAiVGFzYSBkZSBuYXRhbGlkYWQgKHBvciBtaWwgaGFiaXRhbnRlcykuc3ZnIil9KTwvc2NyaXB0PjxhIGhyZWY9InByb2Nlc29fZGVzY2FyZ2FfZXhjZWxfY3N2LmFzcHg/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmaWRwPTEwMDAxJklkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTU4NjcmSWRfVGVycml0b3Jpbz0wMCZJZF9UZXJyaXRvcmlvX1BhZHJlPUNDQTAyJmlkaW9tYT0xJlRpcG9fRmljaGVyb19HZW5lcmFkbz1leGNlbCI+PGxpIGlkPSJvcHRfMS43Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19leGNlbC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkRhdG9zIEV4Y2VsPC9saT48L2E+PGEgaHJlZj0icHJvY2Vzb19kZXNjYXJnYV9leGNlbF9jc3YuYXNweD9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NTg2NyZJZF9UZXJyaXRvcmlvPTAwJklkX1RlcnJpdG9yaW9fUGFkcmU9Q0NBMDImaWRpb21hPTEmVGlwb19GaWNoZXJvX0dlbmVyYWRvPWNzdiI+PGxpIGlkPSJvcHRfMS44Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19jc3YucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5EYXRvcyBDU1Y8L2xpPjwvYT48L3VsPjwvZGl2PjwvZGl2PjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGNsYXNzPSJpY29ub19kZXNjYXJnYSIgc3JjPSJpbWFnZW5lcy9pY29ub19tYXMucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfbWFzb3BjaW9uZXMiIGNsYXNzPSJvdmVybGF5IG1lbnVfb3BjaW9uZXMgcmVwcmVzZW50YWNpb25fdmlzdWFsaXphY2lvbiBzb21icmFfcGVyaW1ldHJhbCIgPjxoND5Nw6FzIG9wY2lvbmVzOjwvaDQ+PHVsIGlkPSJtZW51MSIgPjxhIGhyZWY9IiNleDEiIGlkPSJEQVRPUyYwMCY1ODY3JkNDQTAyIiByZWw9Im1vZGFsOm9wZW4iPjxsaSBpZD0ib3B0XzEuMyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fZ3JpZC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPlZlciBkYXRvczwvbGk+PC9hPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBDbGFzcz0idGl0dWxvX2NlbGRhIj5UYXNhIGRlIG5hdGFsaWRhZCAocG9yIG1pbCBoYWJpdGFudGVzKTwvZGl2PjwvdGQ+PC90cj48dHI+PHRkIENsYXNzPSJzZXBhcmFkb3IiPjxicj48L3RkPjwvdHI+PHRyIGNsYXNzPSJhbmNsYSI+PHRkPjxhIGlkPSJJbmRpY2VfTml2ZWxfMV8yNzMyIiBjbGFzcz0iYW5jaG9yIj48L2E+PC90ZD48L3RyPjx0cj48dGQgY2xhc3M9ImNlbGRhX3Npbl9lc3RpbG9zIiBjb2xzcGFuPSIyIj48ZGl2IGNsYXNzPSJjbGFzZV9jYXBhX3VuaWRhZF92aXN1YWxpemFjaW9uIiBzdHlsZT0ibWluLWhlaWdodDogMTQwcHg7Ij48dGFibGUgY2xhc3M9IlRhYmxhc19kYXRvcyI+PHRyIGNsYXNzPSJUYWJsYXNfZGF0b3NfY2FiZWNlcmEiPjx0ZCBjbGFzcz0iY29sdW1uYV9penF1aWVyZGEiPjxoNCBjbGFzcz0iaDRfZ3JhbmRlIj5DcmVjaW1pZW50byBuYXR1cmFsIGRlIGxhIHBvYmxhY2nDs248L2g0PjwvdGQ+PHRkIGNsYXNzPSJjb2x1bW5hX2RlcmVjaGEiPjxoNCBjbGFzcz0iaDRfbXV5X2dyYW5kZSBuZWdhdGl2b3NfaWUiPi01NC45NDQgcGVyc29uYXM8L2g0PjwvdGQ+PC90cj48dHI+PHRkIGNvbHNwYW49IjIiPjx0YWJsZSBjbGFzcz0iU3VidGl0dWxvX2luZGljYWRvciI+PHRyPjx0ZCBjbGFzcz0iY29sdW1uYV9lc3RyZWNoYSI+UGVyaW9kbzo8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9hbmNoYSBuZWdyaXRhIj5BbnVhbCZuYnNwOzIwMTg8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9penF1aWVyZGEgY29sdW1uYV9lc3RyZWNoYSI+Q3JlY2ltaWVudG8gaW50ZXJhbnVhbDo8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9jZW50cm8gdGV4dG9fbXV5X2dyYW5kZSBuZWdhdGl2b3NfaWUiPjc1LDMlPC90ZD48dGQgY2xhc3M9ImNvbHVtbmFfZGVyZWNoYSI+PGltZyBjbGFzcz0iaW1hZ2VuX3RlbmRlbmNpYSIgc3JjPSJodHRwOi8vd3d3LnBvcnRhbGVzdGFkaXN0aWNvLmNvbS9pbWFnZW5lcy9wYWxldGFzLzEwMDAxL2NyZWNpbWllbnRvX2FycmliYS5wbmciIGFsdD0iRXN0YWJpbGlkYWQiPjwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPSJjb2x1bW5hX2VzdHJlY2hhIj5GdWVudGU6PC90ZD48dGQgY29sc3Bhbj0iNCIgY2xhc3M9Im5lZ3JpdGEiPklORSwgTW92aW1pZW50byBOYXR1cmFsIGRlIGxhIFBvYmxhY2nDs24uPC90ZD48L3RyPjwvdGFibGU+PC90ZD48L3RyPjx0cj48dGQgY29sc3Bhbj0iMiI+PHAgY2xhc3M9InRleHRvX2NvbnRlbmlkbyI+RGlmZXJlbmNpYSBlbnRyZSBuYWNpbWllbnRvcyB5IGRlZnVuY2lvbmVzLjwvcD48L3RkPjwvdHI+PC90YWJsZT48L2Rpdj48L3RkPjwvdHI+PHRyPjx0ZCBDbGFzcz0ic2VwYXJhZG9yIj48YnI+PC90ZD48L3RyPjx0ciBjbGFzcz0iYW5jbGEiPjx0ZD48YSBpZD0iSW5kaWNlX05pdmVsXzFfNjExMCIgY2xhc3M9ImFuY2hvciI+PC9hPjwvdGQ+PC90cj48dHIgY2xhc3M9ImFuY2xhIj48dGQ+PGEgaWQ9IkluZGljZV9OaXZlbF8xXzYxMTEiIGNsYXNzPSJhbmNob3IiPjwvYT48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY2VsZGFfdGlwb19maWxhXzIiPjxkaXYgY2xhc3M9ImNsYXNlX2NhcGFfdW5pZGFkX3Zpc3VhbGl6YWNpb24iIHN0eWxlPSJtaW4taGVpZ2h0OiA0NTBweDsiPjxkaXYgaWQ9ImNhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNjExMCI+DQo8ZGl2IGlkPSJjYXBhX0VzcGVyYW5kb2NlbGRhNjExMCIgY2xhc3M9ImxvYWQtY29udGFpbmVyIGxvYWRlcmNlbGRhNjExMCI+PC9kaXY+DQo8L2Rpdj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQogICAgICAgIC5saW5lY2VsZGE2MTEwIHsNCiAgICAgICAgICAgIGZpbGw6IG5vbmU7DQogICAgICAgICAgICBzdHJva2U6ICNGRjZFMkI7DQogICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI7DQogICAgICAgIH0NCiAgICAgICAgLmxvYWRlcmNlbGRhNjExMCwNCiAgICAgICAgLmxvYWRlcmNlbGRhNjExMDphZnRlciB7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICB3aWR0aDogMTMwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDEzMHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2FkZXJjZWxkYTYxMTAgew0KICAgICAgICAgICAgbWFyZ2luOiAxNjBweCAxNjBweDsNCiAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogICAgICAgICAgICBmb250LXNpemU6IDEwcHg7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICB0ZXh0LWluZGVudDogLTk5OTllbTsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDEuMWVtIHNvbGlkICNGRjZFMkI7DQogICAgICAgICAgICBib3JkZXItcmlnaHQ6IDEuMWVtIHNvbGlkICNGRjZFMkI7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxLjFlbSBzb2xpZCAjRkY2RTJCOw0KICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDEuMWVtIHNvbGlkICNGRkU5REY7DQogICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7DQogICAgICAgICAgICAtd2Via2l0LWFuaW1hdGlvbjogbG9hZDggMS4xcyBpbmZpbml0ZSBsaW5lYXI7DQogICAgICAgICAgICBhbmltYXRpb246IGxvYWQ4IDEuMXMgaW5maW5pdGUgbGluZWFyOw0KICAgICAgICB9DQo8L3N0eWxlPg0KPHNjcmlwdD4NCmQzLmNzdigiaHR0cDovL3d3dy5wb3J0YWxlc3RhZGlzdGljby5jb20vc2VydmljaW9fb2J0ZW5jaW9uX2RhdG9zX3Zpc3VhbGl6YWNpb25lcy5hc214L09idGVuZXJfRGF0b3M/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmcElkX1BhZ2luYV9BY3RpdmE9MTAwMDEmcElkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTYxMTAmcElkX1RlcnJpdG9yaW89MDA7JnBJZF9UZXJyaXRvcmlvX1BhZHJlPSZwSWRpb21hPTEmcElkX3JlZ2lvbj1lcy1lcyIpLnRoZW4oDQogICAgZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgdmFyIGxpbmVhX2dyYWZpY287DQogICAgICAgIHZhciBzdmc7DQogICAgICAgIHZhciBzZXJpZXNMaW5lYXM7DQogICAgICAgIHZhciBsaW5lYUNlcm87DQogICAgICAgIHZhciBsaW5lYXNfc2VyaWVzOw0KICAgICAgICB2YXIgbkVsZW1lbnRvc1BvclNlcmllOw0KICAgICAgICB2YXIgcHVudG9zQWlzbGFkb3M7DQogICAgICAgIHZhciBsaW5lYXNWZXJ0SG9yUmF0b247DQogICAgICAgIHZhciByYXRvblBvckxpbmVhOw0KICAgICAgICB2YXIgZWplWDsNCiAgICAgICAgdmFyIGVqZVk7DQogICAgICAgIHZhciBjRGltZW5zaW9uRXh0ID0gMA0KICAgICAgICB2YXIgdmFsb3JNaW5pbW9EYXRvcyA9IDA7DQogICAgICAgIHZhciB2YWxvck1heGltb0RhdG9zID0gMDsNCiAgICAgICAgdmFyIGZlY2hhTWF4aW1vOw0KICAgICAgICB2YXIgZmVjaGFNaW5pbW87DQogICAgICAgIHZhciBjYWxjdWxvX21heG1pbjsNCiAgICAgICAgdmFyIG1hcmdlbkl6cXVpZXJkbyA9IDA7DQogICAgICAgIHZhciBtYXJnZW5EZXJlY2hvID0gMDsNCiAgICAgICAgdmFyIG1hcmdlblN1cGVyaW9yID0gMDsNCiAgICAgICAgdmFyIG1hcmdlbkluZmVyaW9yID0gMDsNCiAgICAgICAgdmFyIG5Db3J0ZXMgPSAwOw0KICAgICAgICB2YXIgblB1bnRvc0VqZVggPSAwOw0KICAgICAgICB2YXIgcGFyc2VEYXRlID0gZDMudGltZVBhcnNlKCIlWS8lbS8lZCIpOw0KICAgICAgICB2YXIgbWFyZ2luOw0KICAgICAgICB2YXIgd2lkdGg7DQogICAgICAgIHZhciBoZWlnaHQ7DQogICAgICAgIHZhciBjb2xvcjsNCiAgICAgICAgdmFyIGNhdGVnb3J5Ow0KICAgICAgICB2YXIgZWxlbWVudF9jYXBhX2VzcGVyYW5kbzsNCiAgICAgICB2YXIgYW5jaG9Ob2RvczsNCiAgICAgICB2YXIgc3ZnTGV5ZW5kYUhvcml6b250YWw7DQogICAgICAgdmFyIHN2Z0xlZ2VuZDsNCiAgICAgICB2YXIgbGVnZW5kOw0KICAgICAgICBlbGVtZW50X2NhcGFfZXNwZXJhbmRvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhcGFfRXNwZXJhbmRvY2VsZGE2MTEwIik7DQogICAgICAgIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG8uY2xhc3NMaXN0LnJlbW92ZSgibG9hZGVyY2VsZGE2MTEwIik7DQogICAgICAgIGNhdGVnb3J5ID0gZDMua2V5cyhkYXRhWzBdKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKGtleSAhPT0gImFuaW9fcGVyaW9kbyIgJiYga2V5ICE9PSAiZmVjaGFfcGVyaW9kb19zZXJpZSIgJiYga2V5ICE9PSAibm9tYnJlX3BlcmlvZG8iICYmIGtleSAhPT0gInBlcmlvZG8iICYmIGtleSAhPT0gImV0aXF1ZXRhcGVyaW9kbyIpOyB9KTsNCiAgICAgICAgY29sb3IgPSAgZDMuc2NhbGVPcmRpbmFsKENhbGN1bGFyR3JhZGllbnRlQ29sb3Jlc19HcmFmaWNvRXZvbHVjaW9uTGluZWFzMignI0ZGRTlERicsICcjRkY2RTJCJywgY2F0ZWdvcnkubGVuZ3RoKSk7DQogICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgZC5mZWNoYV9wZXJpb2RvX3NlcmllID0gcGFyc2VEYXRlKGQuZmVjaGFfcGVyaW9kb19zZXJpZSk7DQogICAgICAgICAgICBuQ29ydGVzKys7DQogICAgICAgICAgICBuUHVudG9zRWplWCsrOw0KICAgICAgICB9KTsNCiAgICAgICAgaWYgKG5Db3J0ZXMgPiA3KXsNCiAgICAgICAgICAgIG5Db3J0ZXMgPSA3Ow0KICAgICAgICB9DQogICAgICAgIC8vKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgIGNvbG9yLmRvbWFpbihkMy5rZXlzKGRhdGFbMF0pLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoa2V5ICE9PSAiYW5pb19wZXJpb2RvIiAmJiBrZXkgIT09ICJmZWNoYV9wZXJpb2RvX3NlcmllIiAmJiBrZXkgIT09ICJub21icmVfcGVyaW9kbyIgJiYga2V5ICE9PSAicGVyaW9kbyIgJiYga2V5ICE9PSAiZXRpcXVldGFwZXJpb2RvIik7IH0pKTsNCiAgICAgICAgY2FsY3Vsb19tYXhtaW4gPSBjb2xvci5kb21haW4oKS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgbmFtZTogbmFtZSwNCiAgICAgICAgICAgICAgICB2YWx1ZXM6IGRhdGEubWFwKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGFuaW9fcGVyaW9kbzogZC5hbmlvX3BlcmlvZG8sIGZlY2hhOiBkLmZlY2hhX3BlcmlvZG9fc2VyaWUsIG5vbWJyZV9wZXJpb2RvOiBkLm5vbWJyZV9wZXJpb2RvLCB2YWxvcl9zZXJpZTogK2RbbmFtZV0gfTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSk7DQogICAgICAgIHZhbG9yTWF4aW1vRGF0b3MgPSBDYWxjdWxhck1heGltb0RhdG9zKGNhbGN1bG9fbWF4bWluLCBmYWxzZSkNCiAgICAgICAgdmFsb3JNaW5pbW9EYXRvcyA9IENhbGN1bGFyTWluaW1vRGF0b3MoY2FsY3Vsb19tYXhtaW4sIGZhbHNlLCB0cnVlKTsNCiAgICAgICAgbWFyZ2VuSXpxdWllcmRvID0gQ2FsY3VsYXJBbmNob01hcmdlbkl6cXVpZXJkb19HcmFmaWNvTGluZWFzKGZvcm1hdCgiIy4jIzAsIix2YWxvck1heGltb0RhdG9zKSwgZm9ybWF0KCIjLiMjMCwiLHZhbG9yTWluaW1vRGF0b3MpLCA0NTApOw0KICAgICAgICBtYXJnZW5EZXJlY2hvID0gQ2FsY3VsYXJBbmNob01hcmdlbkRlcmVjaG9fR3JhZmljb0xpbmVhcyhjYXRlZ29yeSwgNDUwKTsNCiAgICAgICAgaWYgKGNhdGVnb3J5Lmxlbmd0aCA+IDEgJiYgNDUwID4gNDUwKSANCiAgICAgICAgew0KICAgICAgICAgICAgbWFyZ2VuU3VwZXJpb3IgPSA0MDsNCiAgICAgICAgICAgIG1hcmdlbkluZmVyaW9yID0gMjA7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoY2F0ZWdvcnkubGVuZ3RoID09IDEgJiYgNDUwID4gNDUwKSANCiAgICAgICAgew0KICAgICAgICAgICAgbWFyZ2VuRGVyZWNobyA9IDMwIA0KICAgICAgICAgICAgbWFyZ2VuU3VwZXJpb3IgPSA0MDsNCiAgICAgICAgICAgIG1hcmdlbkluZmVyaW9yID0gMjA7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSANCiAgICAgICAgew0KICAgICAgICAgICAgbWFyZ2VuRGVyZWNobyA9IDMwIA0KICAgICAgICAgICAgbWFyZ2VuU3VwZXJpb3IgPSA1MDsNCiAgICAgICAgICAgIG1hcmdlbkluZmVyaW9yID0gNTA7DQogICAgICAgIH0NCiAgICAgICAgZmVjaGFNYXhpbW8gPSBkMy5tYXgoY2FsY3Vsb19tYXhtaW4sIGZ1bmN0aW9uIChzZXJpZSkgew0KICAgICAgICAgICAgcmV0dXJuIGQzLm1heChzZXJpZS52YWx1ZXMsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGQuZmVjaGE7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICAgIGZlY2hhTWluaW1vID0gZDMubWluKGNhbGN1bG9fbWF4bWluLCBmdW5jdGlvbiAoc2VyaWUpIHsNCiAgICAgICAgICAgIHJldHVybiBkMy5taW4oc2VyaWUudmFsdWVzLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBkLmZlY2hhOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgICBtYXJnaW4gPSB7IHRvcDogbWFyZ2VuU3VwZXJpb3IsIHJpZ2h0OiBtYXJnZW5EZXJlY2hvLCBib3R0b206IG1hcmdlbkluZmVyaW9yLCBsZWZ0OiBtYXJnZW5JenF1aWVyZG8gfTsNCiAgICAgICAgd2lkdGggPSA0NTAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodDsNCiAgICAgICAgaGVpZ2h0ID0gNDUwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207DQogICAgICAgIGVqZVggPSBkMy5zY2FsZVRpbWUoKS5yYW5nZShbMCwgd2lkdGhdKTsNCiAgICAgICAgZWplWSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pOw0KICAgICAgICBsaW5lYV9ncmFmaWNvID0gZDMubGluZSgpDQogICAgICAgICAgICAueChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZWplWChkLmZlY2hhKTsgfSkNCiAgICAgICAgICAgIC55KGZ1bmN0aW9uIChkKSB7IHJldHVybiBlamVZKGQudmFsb3Jfc2VyaWUpOyB9KQ0KICAgICAgICAgICAgLmRlZmluZWQoZnVuY3Rpb24gKGQpIHsgcmV0dXJuICFpc05hTihkLnZhbG9yX3NlcmllKTsgfSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgICAgICAgICAvLyAxLkFkZCB0aGUgU1ZHIFRvIHRoZSBwYWdlIEFuZCBlbXBsb3kgIzINCiAgICAgICAgc3ZnID0gZDMuc2VsZWN0KCIjY2FwYV9HcmFmaWNvX0V2b2x1Y2lvbl9MaW5lYXNfQXNpbmNyb25vY2VsZGE2MTEwIikuYXBwZW5kKCJzdmciKQ0KICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2NlbGRhNjExMCcpDQogICAgICAgICAgICAuYXR0cigid2lkdGgiLCA0NTApDQogICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgNDUwKQ0KICAgICAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgbWFyZ2luLmxlZnQgKyAiLCAiICsgbWFyZ2luLnRvcCArICIpIik7DQogICAgICAgIHNlcmllc0xpbmVhcyA9IGNvbG9yLmRvbWFpbigpLm1hcChmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLA0KICAgICAgICAgICAgICAgIHZhbHVlczogZGF0YS5tYXAoZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYW5pb19wZXJpb2RvOiBkLmFuaW9fcGVyaW9kbywgZXRpcXVldGFwZXJpb2RvOiBkLmV0aXF1ZXRhcGVyaW9kbywgZmVjaGE6IGQuZmVjaGFfcGVyaW9kb19zZXJpZSwgbm9tYnJlX3BlcmlvZG86IGQubm9tYnJlX3BlcmlvZG8sIHZhbG9yX3NlcmllOiArZFtuYW1lXSB9Ow0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9Ow0KICAgICAgICB9KTsNCiAgICAgICAgbkVsZW1lbnRvc1BvclNlcmllID0gc2VyaWVzTGluZWFzWzBdLnZhbHVlcy5sZW5ndGggLSAxOw0KICAgICAgICBlamVYLmRvbWFpbihbZmVjaGFNaW5pbW8sIGZlY2hhTWF4aW1vXSk7DQogICAgICAgIGVqZVkuZG9tYWluKFt2YWxvck1pbmltb0RhdG9zLCB2YWxvck1heGltb0RhdG9zXSk7DQogICAgICAgICAgICAgICAgLy8gTGV5ZW5kYSwgZWplIGRlIGxhcyBYLCBwdW50b3MgeSBsZXllbmRhIGRlIGVzdG9zIHB1bnRvczoNCiAgICAgICAgc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiZnVlbnRlX2dlbmVyaWNhIikNCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDAsIiArIGhlaWdodCArICIpIikNCiAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oKS5zY2FsZShlamVYKS50aWNrU2l6ZSgtaGVpZ2h0KS50aWNrcyhuQ29ydGVzKSkNCiAgICAgICAgICAgIC5jYWxsKA0KICAgICAgICAgICAgICAgIGcgPT4gew0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdEFsbCgidGV4dCIpDQogICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoInRleHQtYW5jaG9yIiwgIm1pZGRsZSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigieSIsICI1IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdEFsbCgibGluZSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDAuNykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC4zKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdCgiLmRvbWFpbiIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDEuNSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC41KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICkNCiAgICAgICAgOw0KICAgICAgICBzdmcuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJmdWVudGVfZ2VuZXJpY2EiKQ0KICAgICAgICAgICAgLmNhbGwoZDMuYXhpc0xlZnQoZWplWSkudGlja3MoNCkudGlja1NpemUoLXdpZHRoKSkNCiAgICAgICAgICAgIC5jYWxsKA0KICAgICAgICAgICAgICAgIGcgPT4gew0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdEFsbCgidGV4dCIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigieCIsIC0zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJsaW5lIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMC43KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjMpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0KCIuZG9tYWluIikucmVtb3ZlKCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICApDQogICAgICAgIDsNCiAgICAgICAgc3ZnLnNlbGVjdEFsbCgidGV4dCIpLmF0dHIoJ2ZpbGwnLCAnI0E5QTlBOScpOw0KICAgICAgICBpZiAoY2F0ZWdvcnkubGVuZ3RoID4gMSApIA0KICAgICAgICB7DQogICAgICAgICAgICBhbmNob05vZG9zID0gKGQpID0+IGQuZ2V0QkJveCgpLndpZHRoOyANCiAgICAgICAgICAgIHN2Z0xleWVuZGFIb3Jpem9udGFsID0gc3ZnLmFwcGVuZCgnZycpDQogICAgICAgICAgICAgICAgLmFwcGVuZCgnZycpDQogICAgICAgICAgICBjb25zdCBsZ2NlbGRhNjExMCA9IHN2Z0xleWVuZGFIb3Jpem9udGFsLnNlbGVjdEFsbCgnZycpDQogICAgICAgICAgICAgICAgLmRhdGEoY2F0ZWdvcnkpDQogICAgICAgICAgICAgICAgLmVudGVyKCkNCiAgICAgICAgICAgICAgICAuYXBwZW5kKCdnJykNCiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQsIGkpID0+IGB0cmFuc2xhdGUoJHtpICogMTAwfSwke2hlaWdodCArIDE1fSlgKTsgICAgICAgICAgICANCiAgICAgICAgICAgIGxnY2VsZGE2MTEwLmFwcGVuZCgncmVjdCcpICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZD0+Y29sb3IoZCkpDQogICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAwKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgMCkNCiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCAxMCkNCiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTApOw0KICAgICAgICAgICAgbGdjZWxkYTYxMTAuYXBwZW5kKCd0ZXh0JykNCiAgICAgICAgICAgICAgICAuYXR0cigneCcsIDE3LjUpDQogICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAxMCkNCiAgICAgICAgICAgICAgICAudGV4dChkID0+IGQpOw0KICAgICAgICAgICAgbGV0IG9mZnNldGNlbGRhNjExMCA9IDA7DQogICAgICAgICAgICBsZ2NlbGRhNjExMC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoZCwgaSkgew0KICAgICAgICAgICAgICAgIGxldCB4ID0gb2Zmc2V0Y2VsZGE2MTEwOw0KICAgICAgICAgICAgICAgIG9mZnNldGNlbGRhNjExMCArPSBhbmNob05vZG9zKHRoaXMpICsgMTA7DQogICAgICAgICAgICAgICAgcmV0dXJuIGB0cmFuc2xhdGUoJHt4fSwke2hlaWdodCArIDEwfSlgOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBzdmdMZXllbmRhSG9yaXpvbnRhbC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwyMCknDQogICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHZhbG9yTWF4aW1vRGF0b3MgPiAwICYmIHZhbG9yTWluaW1vRGF0b3MgPCAwICkgDQogICAgICAgIHsNCiAgICAgICAgICAgIGxpbmVhQ2VybyA9IHN2Zy5hcHBlbmQoImxpbmUiKQ0KICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2xpbmVhQ2VybycpDQogICAgICAgICAgICAuYXR0cigieDEiLCAwKQ0KICAgICAgICAgICAgLmF0dHIoInkxIiwgZWplWSgwKSkNCiAgICAgICAgICAgIC5hdHRyKCJ4MiIsIHdpZHRoKQ0KICAgICAgICAgICAgLmF0dHIoInkyIiwgZWplWSgwKSkNCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2Utd2lkdGgiLCAiMXB4IikNCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2UiLCAiI0E5QTlBOSIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS1kYXNoYXJyYXkiLCAoIjUsIDMiKSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgfQ0KICAgICAgICBsaW5lYXNfc2VyaWVzID0gc3ZnLnNlbGVjdEFsbCgiLmxpbmVhc19zZXJpZXMiKQ0KICAgICAgICAgICAgLmRhdGEoc2VyaWVzTGluZWFzKQ0KICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIDsNCiAgICAgICAgbGluZWFzX3Nlcmllcy5hcHBlbmQoInBhdGgiKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxpbmUgbGluZWNlbGRhNjExMCIpDQogICAgICAgICAgICAuYXR0cigiZCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBsaW5lYV9ncmFmaWNvKGQudmFsdWVzKTsgfSkNCiAgICAgICAgICAgIC5hdHRyKCJkYXRhLWxlZ2VuZCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLm5hbWUgfSkNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGNvbG9yKGQubmFtZSk7IH0pOw0KICAgICAgICBwdW50b3NBaXNsYWRvcyA9IHN2Zy5zZWxlY3RBbGwoIi5kb3QiKQ0KICAgICAgICAgICAgLmRhdGEoc2VyaWVzTGluZWFzKS5lbnRlcigpDQogICAgICAgICAgICAuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdjaXJjbGUtZ3JvdXAnKQ0KICAgICAgICAgICAgLnN0eWxlKCJmaWxsIiwgZnVuY3Rpb24gKGQsIGkxKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yKGQubmFtZSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgOw0KICAgICAgICBwdW50b3NBaXNsYWRvcy5zZWxlY3RBbGwoIi5kb3QiKQ0KICAgICAgICAgICAgLmRhdGEoZCA9PiBkLnZhbHVlcykuZW50ZXIoKQ0KICAgICAgICAgICAgLmFwcGVuZCgiY2lyY2xlIikgLy8gVXNlcyB0aGUgZW50ZXIoKS5hcHBlbmQoKSBtZXRob2QNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJkb3QiKSAvLyBBc3NpZ24gYSBjbGFzcyBmb3Igc3R5bGluZw0KICAgICAgICAgICAgLmF0dHIoImN4IiwgZnVuY3Rpb24gKGQsIGkpIHsgcmV0dXJuIGVqZVgoZC5mZWNoYSkgfSkNCiAgICAgICAgICAgIC5hdHRyKCJjeSIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBlamVZKGQudmFsb3Jfc2VyaWUpIH0pDQogICAgICAgICAgICAuYXR0cigiciIsIDMpDQogICAgICAgICAgICAuc3R5bGUoIm9wYWNpdHkiLCBmdW5jdGlvbiAoZCwgaSkgew0KICAgICAgICAgICAgICAgIGlmIChpID09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY0RpbWVuc2lvbkV4dCsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoZC52YWxvcl9zZXJpZSA9PSAiJ251bGwnIiB8fCBpc05hTihkLnZhbG9yX3NlcmllKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwICYmIGkgPCBuRWxlbWVudG9zUG9yU2VyaWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllKSkgJiYgKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgKyAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgKyAxXS52YWxvcl9zZXJpZSkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIxIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgKyAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgKyAxXS52YWxvcl9zZXJpZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIxIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gbkVsZW1lbnRvc1BvclNlcmllICYmIChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjEiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgOw0KICAgICAgICB0cmFuc2l0aW9uKGQzLnNlbGVjdEFsbCgiLmxpbmVjZWxkYTYxMTAiKSk7DQogICAgICAgIGxpbmVhc1ZlcnRIb3JSYXRvbiA9IHN2Zy5hcHBlbmQoImciKTsgDQogICAgICAgIGxpbmVhc1ZlcnRIb3JSYXRvbi5hcHBlbmQoInBhdGgiKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIm1vdXNlLWxpbmVjZWxkYTYxMTAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCAiIzAwMDAwMCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsICIxcHgiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UtZGFzaGFycmF5IiwgKCI1LCA1IikpDQogICAgICAgICAgICAuc3R5bGUoIm9wYWNpdHkiLCAiMSIpOw0KICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24uYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJtb3VzZS1saW5lLWhvcml6b250YWxjZWxkYTYxMTAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCAiIzAwMDAwMCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsICIxcHgiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UtZGFzaGFycmF5IiwgKCI1LCA1IikpDQogICAgICAgICAgICAuc3R5bGUoIm9wYWNpdHkiLCAiMSIpOw0KICAgICAgICByYXRvblBvckxpbmVhID0gbGluZWFzVmVydEhvclJhdG9uLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE2MTEwIikNCiAgICAgICAgICAgIC5kYXRhKHNlcmllc0xpbmVhcykNCiAgICAgICAgICAgIC5lbnRlcigpDQogICAgICAgICAgICAuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJtb3VzZS1wZXItbGluZWNlbGRhNjExMCIpOw0KICAgICAgICAgICAgLy9UYWJ1bGFjacOzbiBkZXNjdWFkcmFkYToNCiAgICAgICAgICAgICAgICByYXRvblBvckxpbmVhLmFwcGVuZCgiY2lyY2xlIikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInIiLCA0KQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IoZC5uYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJmaWxsIiwgIiNGRkZGRkYiKQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsICIzcHgiKQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgIHJhdG9uUG9yTGluZWEuYXBwZW5kKCJ0ZXh0IikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInRleHQtYW5jaG9yIiwgIm1pZGRsZSIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgiZm9udC1zaXplIiwgIjE2cHgiKQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoInRleHQtZGVjb3JhdGlvbiIsICJ1bmRlcmxpbmUiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgxMCwzKSIpOw0KICAgICAgICAgICAgICAgIGxpbmVhc1ZlcnRIb3JSYXRvbi5hcHBlbmQoInJlY3QiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAncmVjdGNlbGRhNjExMCcpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHdpZHRoKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigiZmlsbCIsICJub25lIikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInBvaW50ZXItZXZlbnRzIiwgImFsbCIpDQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2VvdXQiLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lY2VsZGE2MTEwIikuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZS1ob3Jpem9udGFsY2VsZGE2MTEwIikuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTYxMTAgY2lyY2xlIikuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTYxMTAgdGV4dCIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiI2dsb2JvX0dyYWZpY29fTUxpbmVhcyIpLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiI2dsb2JvX0dyYWZpY29fTUxpbmVhc19MZXllbmRhWSIpLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lY2VsZGE2MTEwIikuc3R5bGUoIm9wYWNpdHkiLCAiMC42NSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZS1ob3Jpem9udGFsY2VsZGE2MTEwIikuc3R5bGUoIm9wYWNpdHkiLCAiMC42NSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTYxMTAgY2lyY2xlIikuc3R5bGUoIm9wYWNpdHkiLCAiMSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTYxMTAgdGV4dCIpLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiI2dsb2JvX0dyYWZpY29fTUxpbmVhcyIpLnN0eWxlKCdkaXNwbGF5JywgJ2Jsb2NrJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXNfTGV5ZW5kYVkiKS5zdHlsZSgnZGlzcGxheScsICdibG9jaycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckxpbmVhc1B1bnRvcygnY2VsZGE2MTEwJywgZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBoZWlnaHQpDQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyQ29udGVuaWRvR2xvYm8oZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIG1hcmdpbiwgY29sb3IsICcjLiMjMCwnKQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJMaW5lYXNQdW50b3MoJ2NlbGRhNjExMCcsIGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgaGVpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckNvbnRlbmlkb0dsb2JvKGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBtYXJnaW4sIGNvbG9yLCAnIy4jIzAsJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICk7DQo8L3NjcmlwdD4NCjwvZGl2PjxkaXYgQ2xhc3M9InpvbmFfbWFzX2luZm8iPjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGlkPSJhYWFhIiBjbGFzcz0iaWNvbm9fZGVzY2FyZ2EiIHNyYz0iaW1hZ2VuZXMvaWNvbm9fZGVzY2FyZ2EucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfZGVzY2FyZ2FzIiBjbGFzcz0ib3ZlcmxheSBtZW51X29wY2lvbmVzIHJlcHJlc2VudGFjaW9uX3Zpc3VhbGl6YWNpb24gc29tYnJhX3BlcmltZXRyYWwiID48aDQ+RGVzY2FyZ2FzOiA8L2g0Pjx1bCBpZD0ibWVudTEiID48bGkgaWQ9Im9wdF8xLjMiIG9uY2xpY2s9InNhdmVTdmdBc1BuZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2VsZGE2MTEwJyksICdDcmVjaW1pZW50byBuYXR1cmFsIGRlIGxhIHBvYmxhY2nDs24ucG5nJywge2xlZnQ6IC0yMCwgd2lkdGg6IDQ4NSwgYmFja2dyb3VuZENvbG9yOiAnI0ZGRkZGRid9KTsiPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX3BuZy5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkltYWdlbiBQTkc8L2xpPjxhIGhyZWY9IiMiIGlkPSJkZXNjYXJnYTYxMTAiPjxsaSA+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fc3ZnLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+SW1hZ2VuIFNWRzwvbGk+PC9hPjxzY3JpcHQ+ZDMuc2VsZWN0KCIjZGVzY2FyZ2E2MTEwIikub24oImNsaWNrIiwgZnVuY3Rpb24oKXtkMy5zZWxlY3QodGhpcykuYXR0cigiaHJlZiIsICdkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsJyArIGJ0b2EoJzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IklTTy04ODU5LTEiID8+XHJcbjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6YXR0cmliPSJodHRwOi8vd3d3LmNhcnRvLm5ldC9hdHRyaWIiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zOmEzPSJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlU1ZHVmlld2VyRXh0ZW5zaW9ucy8zLjAvIiBhMzpzY3JpcHRJbXBsZW1lbnRhdGlvbj0iQWRvYmUiIHN0eWxlPSJzaGFwZS1yZW5kZXJpbmc6Z2VvbWV0cmljUHJlY2lzaW9uOyB0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7IGltYWdlLXJlbmRlcmluZzpvcHRpbWl6ZVF1YWxpdHk7IGZpbGwtcnVsZTpldmVub2RkOyBjbGlwLXJ1bGU6ZXZlbm9kZDsiIHdpZHRoPSI0NTAiIGhlaWdodD0iOTAwIj48c3R5bGU+IHRleHR7Zm9udC1zaXplOiAxMnB4O2NvbG9yOiAjQTlBOUE5O2ZvbnQtZmFtaWx5OiBBcmlhbDtmaWxsOiAjQTlBOUE5O30gLmxpbmUge2ZpbGw6IG5vbmU7fTwvc3R5bGU+JyArIGQzLnNlbGVjdCgiI2NlbGRhNjExMCIpLmh0bWwoKSArICc8L3N2Zz4nICApKS5hdHRyKCJkb3dubG9hZCIsICJDcmVjaW1pZW50byBuYXR1cmFsIGRlIGxhIHBvYmxhY2nDs24uc3ZnIil9KTwvc2NyaXB0PjxhIGhyZWY9InByb2Nlc29fZGVzY2FyZ2FfZXhjZWxfY3N2LmFzcHg/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmaWRwPTEwMDAxJklkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTYxMTAmSWRfVGVycml0b3Jpbz0wMCZJZF9UZXJyaXRvcmlvX1BhZHJlPUNDQTAyJmlkaW9tYT0xJlRpcG9fRmljaGVyb19HZW5lcmFkbz1leGNlbCI+PGxpIGlkPSJvcHRfMS43Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19leGNlbC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkRhdG9zIEV4Y2VsPC9saT48L2E+PGEgaHJlZj0icHJvY2Vzb19kZXNjYXJnYV9leGNlbF9jc3YuYXNweD9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NjExMCZJZF9UZXJyaXRvcmlvPTAwJklkX1RlcnJpdG9yaW9fUGFkcmU9Q0NBMDImaWRpb21hPTEmVGlwb19GaWNoZXJvX0dlbmVyYWRvPWNzdiI+PGxpIGlkPSJvcHRfMS44Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19jc3YucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5EYXRvcyBDU1Y8L2xpPjwvYT48L3VsPjwvZGl2PjwvZGl2PjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGNsYXNzPSJpY29ub19kZXNjYXJnYSIgc3JjPSJpbWFnZW5lcy9pY29ub19tYXMucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfbWFzb3BjaW9uZXMiIGNsYXNzPSJvdmVybGF5IG1lbnVfb3BjaW9uZXMgcmVwcmVzZW50YWNpb25fdmlzdWFsaXphY2lvbiBzb21icmFfcGVyaW1ldHJhbCIgPjxoND5Nw6FzIG9wY2lvbmVzOjwvaDQ+PHVsIGlkPSJtZW51MSIgPjxhIGhyZWY9IiNleDEiIGlkPSJEQVRPUyYwMCY2MTEwJkNDQTAyIiByZWw9Im1vZGFsOm9wZW4iPjxsaSBpZD0ib3B0XzEuMyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fZ3JpZC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPlZlciBkYXRvczwvbGk+PC9hPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBDbGFzcz0idGl0dWxvX2NlbGRhIj5DcmVjaW1pZW50byBuYXR1cmFsIGRlIGxhIHBvYmxhY2nDs248L2Rpdj48L3RkPg0KPHRkIGNsYXNzPSJjZWxkYV90aXBvX2ZpbGFfMiI+PGRpdiBjbGFzcz0iY2xhc2VfY2FwYV91bmlkYWRfdmlzdWFsaXphY2lvbiIgc3R5bGU9Im1pbi1oZWlnaHQ6IDQ1MHB4OyI+PGRpdiBpZD0iY2FwYV9HcmFmaWNvX0V2b2x1Y2lvbl9MaW5lYXNfQXNpbmNyb25vY2VsZGE2MTExIj4NCjxkaXYgaWQ9ImNhcGFfRXNwZXJhbmRvY2VsZGE2MTExIiBjbGFzcz0ibG9hZC1jb250YWluZXIgbG9hZGVyY2VsZGE2MTExIj48L2Rpdj4NCjwvZGl2Pg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCiAgICAgICAgLmxpbmVjZWxkYTYxMTEgew0KICAgICAgICAgICAgZmlsbDogbm9uZTsNCiAgICAgICAgICAgIHN0cm9rZTogI0ZGNkUyQjsNCiAgICAgICAgICAgIHN0cm9rZS13aWR0aDogMjsNCiAgICAgICAgfQ0KICAgICAgICAudG9vbFRpcCB7DQogICAgICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgICAgICAgd2lkdGg6IGF1dG87DQogICAgICAgICAgICBoZWlnaHQ6IGF1dG87DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiBub25lIHJlcGVhdCBzY3JvbGwgMCAwIHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiAwIG5vbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHggOHB4IDhweCA4cHg7DQogICAgICAgICAgICBib3gtc2hhZG93OiAtM3B4IDNweCAxNXB4ICM4ODg4ODg7DQogICAgICAgICAgICBjb2xvcjogYmxhY2s7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBwYWRkaW5nOiA1cHg7DQogICAgICAgICAgICB6LWluZGV4OiAxOw0KICAgICAgICB9DQogICAgICAgIC50b29sdGlwX1lMZWdlbmQgew0KICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgICAgIHBhZGRpbmctdG9wOiA1cHg7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4IDNweCAzcHggM3B4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzhBODk4NTsNCiAgICAgICAgICAgIGNvbG9yOiAjRkZGRkZGOw0KICAgICAgICAgICAgYm9yZGVyOiAwIG5vbmU7DQogICAgICAgIH0NCiAgICAgICAgICAgIC50b29sdGlwX1lMZWdlbmQ6YWZ0ZXIgew0KICAgICAgICAgICAgICAgIGxlZnQ6IDEwMCU7DQogICAgICAgICAgICAgICAgdG9wOiA1MCU7DQogICAgICAgICAgICAgICAgYm9yZGVyOiBzb2xpZCB0cmFuc3BhcmVudDsNCiAgICAgICAgICAgICAgICBjb250ZW50OiAiICI7IA0KICAgICAgICAgICAgICAgIGhlaWdodDogMDsNCiAgICAgICAgICAgICAgICB3aWR0aDogMDsNCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQogICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiByZ2JhKDIxNywgMjE3LCAyMTcsIDApOw0KICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0LWNvbG9yOiAjOEE4OTg1Ow0KICAgICAgICAgICAgICAgIGJvcmRlci13aWR0aDogNXB4Ow0KICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IC01cHg7DQogICAgICAgICAgICB9DQogICAgICAgIHRleHQgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICAgICAgY29sb3I6ICNBOUE5QTk7DQogICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7DQogICAgICAgICAgICBmaWxsOiAjQTlBOUE5Ow0KICAgICAgICB9DQogICAgICAgIEAtd2Via2l0LWtleWZyYW1lcyBsb2FkOCB7DQogICAgICAgICAgICAwJSB7DQogICAgICAgICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIDEwMCUgew0KICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsNCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIEBrZXlmcmFtZXMgbG9hZDggew0KICAgICAgICAgICAgMCUgew0KICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAxMDAlIHsNCiAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAubG9hZC1jb250YWluZXIgew0KICAgICAgICAgICAgcG9zaXRpb246IG9ic29sdXRlOw0KICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgICAgICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQp9DQogICAgICAgIC5sb2FkZXJjZWxkYTYxMTEsDQogICAgICAgIC5sb2FkZXJjZWxkYTYxMTE6YWZ0ZXIgew0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgd2lkdGg6IDEzMHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMzBweDsNCiAgICAgICAgfQ0KICAgICAgICAubG9hZGVyY2VsZGE2MTExIHsNCiAgICAgICAgICAgIG1hcmdpbjogMTYwcHggMTYwcHg7DQogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4Ow0KICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgICAgdGV4dC1pbmRlbnQ6IC05OTk5ZW07DQogICAgICAgICAgICBib3JkZXItdG9wOiAxLjFlbSBzb2xpZCAjRkY2RTJCOw0KICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxLjFlbSBzb2xpZCAjRkY2RTJCOw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiAxLjFlbSBzb2xpZCAjRkZFOURGOw0KICAgICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7DQogICAgICAgICAgICAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOw0KICAgICAgICAgICAgLXdlYmtpdC1hbmltYXRpb246IGxvYWQ4IDEuMXMgaW5maW5pdGUgbGluZWFyOw0KICAgICAgICAgICAgYW5pbWF0aW9uOiBsb2FkOCAxLjFzIGluZmluaXRlIGxpbmVhcjsNCiAgICAgICAgfQ0KPC9zdHlsZT4NCjxzY3JpcHQgc3JjPSJqcy9sb2NhbGl6YWNpb24vZDMubG9jYWxlLmVzLUVzLmpzIj48L3NjcmlwdD4NCjxzY3JpcHQ+DQogICAgdmFyIGdsb2JvX0dyYWZpY29fTUxpbmVhczsNCiAgICB2YXIgZ2xvYm9fR3JhZmljb19NTGluZWFzX0xleWVuZGFZOw0KICAgIGZ1bmN0aW9uIHR3ZWVuRGFzaCgpIHsNCiAgICAgICAgdmFyIGwsIGk7DQogICAgICAgIGwgPSB0aGlzLmdldFRvdGFsTGVuZ3RoKCk7DQogICAgICAgIGkgPSBkMy5pbnRlcnBvbGF0ZVN0cmluZygiMCwgIiArIGwsIGwgKyAiLCAiICsgbCk7DQogICAgICAgIHJldHVybiBmdW5jdGlvbiAodCkgeyByZXR1cm4gaSh0KTsgfTsNCiAgICB9DQogICAgZnVuY3Rpb24gdHJhbnNpdGlvbihzZWxlY3Rpb24pIHsNCiAgICAgICAgc2VsZWN0aW9uLmVhY2goZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnRyYW5zaXRpb24oKQ0KICAgICAgICAgICAgICAgIC5kdXJhdGlvbigxMDAwKQ0KICAgICAgICAgICAgICAgIC5hdHRyVHdlZW4oInN0cm9rZS1kYXNoYXJyYXkiLCB0d2VlbkRhc2gpOw0KICAgICAgICB9KQ0KICAgIH0NCiAgICBmdW5jdGlvbiBDYWxjdWxhck1pbmltb0RhdG9zKHBBcnJheURhdG9zLCBwQ29tZW56YXJFamVZRW5DZXJvLCBwRGVjYWxhamVzVmVydGljYWxlcykgew0KICAgICAgICB2YXIgbWluaW1vRGF0b3MgPSAwOw0KICAgICAgICB2YXIgbWF4aW1vRGF0b3MgPSAwOw0KICAgICAgICB2YXIgdG90YWxEYXRvcyA9IDA7DQogICAgICAgIHZhciBkZWNhamFsZVZlcnRpY2FsID0gMDsNCiAgICAgICAgbWluaW1vRGF0b3MgPSBkMy5taW4ocEFycmF5RGF0b3MsIGZ1bmN0aW9uIChzZXJpZSkgew0KICAgICAgICAgICAgcmV0dXJuIGQzLm1pbihzZXJpZS52YWx1ZXMsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGQudmFsb3Jfc2VyaWU7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICAgIG1heGltb0RhdG9zID0gZDMubWF4KHBBcnJheURhdG9zLCBmdW5jdGlvbiAoc2VyaWUpIHsNCiAgICAgICAgICAgIHJldHVybiBkMy5tYXgoc2VyaWUudmFsdWVzLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBkLnZhbG9yX3NlcmllOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgICB0b3RhbERhdG9zID0gbWF4aW1vRGF0b3MgLSBtaW5pbW9EYXRvcw0KICAgICAgICAvLyBBcGxpY2Ftb3MgZWwgdmFsb3IgMCBzaSBlcyBzZWxlY2Npb25hZG86DQogICAgICAgIGlmIChwQ29tZW56YXJFamVZRW5DZXJvID09IHRydWUpIHsNCiAgICAgICAgICAgIGlmIChtaW5pbW9EYXRvcyA+IDApIHsNCiAgICAgICAgICAgICAgICBtaW5pbW9EYXRvcyA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKHBEZWNhbGFqZXNWZXJ0aWNhbGVzID09IHRydWUpIHsNCiAgICAgICAgICAgIGRlY2FqYWxlVmVydGljYWwgPSAodG90YWxEYXRvcyAqIDEwKSAvIDEwMDsNCiAgICAgICAgICAgIGlmIChtaW5pbW9EYXRvcyA+PSAwICYmIChtaW5pbW9EYXRvcyAtIGRlY2FqYWxlVmVydGljYWwpIDwgMCkgew0KICAgICAgICAgICAgICAgIG1pbmltb0RhdG9zID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIG1pbmltb0RhdG9zID0gbWluaW1vRGF0b3MgLSBkZWNhamFsZVZlcnRpY2FsDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG1pbmltb0RhdG9zOw0KICAgIH0NCiAgICBmdW5jdGlvbiBDYWxjdWxhckFuY2hvTWFyZ2VuSXpxdWllcmRvX0dyYWZpY29MaW5lYXMocHZhbG9yTWF4aW1vRGF0b3MsIHB2YWxvck1pbmltb0RhdG9zLCBwQW5jaG9HcmFmaWNvKSB7DQogICAgICAgIHZhciBjYWRlbmFNYXlvciA9ICc7Jw0KICAgICAgICB2YXIgbWFyZ2VuUGl4ZWxlcyA9IDA7DQogICAgICAgIHZhciBjOw0KICAgICAgICB2YXIgY3R4Ow0KICAgICAgICB2YXIgdHh0Ow0KICAgICAgICB2YXIgY2FudmFzTWVkaWNpb25JenF1aWVyZG87DQogICAgICAgIGlmIChwdmFsb3JNYXhpbW9EYXRvcy50b1N0cmluZygpLmxlbmd0aCA+IHB2YWxvck1pbmltb0RhdG9zLnRvU3RyaW5nKCkubGVuZ3RoKSB7DQogICAgICAgICAgICBjYWRlbmFNYXlvciA9IHB2YWxvck1heGltb0RhdG9zLnRvU3RyaW5nKCkNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGNhZGVuYU1heW9yID0gcHZhbG9yTWluaW1vRGF0b3MudG9TdHJpbmcoKQ0KICAgICAgICB9DQogICAgICAgIGNhbnZhc01lZGljaW9uSXpxdWllcmRvID0gZDMuc2VsZWN0KCIjY2FwYV9HcmFmaWNvX0V2b2x1Y2lvbl9MaW5lYXNfQXNpbmNyb25vY2VsZGE2MTExIikuYXBwZW5kKCJjYW52YXMiKQ0KICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2NhbnZhc01lZGljaW9uSXpxdWllcmRvY2VsZGE2MTExJykNCiAgICAgICAgICAgIC5hdHRyKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpDQogICAgICAgICAgICAuYXR0cigid2hpdGUtc3BhY2UiLCAibm93cmFwIik7DQogICAgICAgICAgICBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhc01lZGljaW9uSXpxdWllcmRvY2VsZGE2MTExIik7DQogICAgICAgICAgICBjdHggPSBjLmdldENvbnRleHQoIjJkIik7DQogICAgICAgICAgICBjdHguZm9udCA9ICIxMnB4IEFyaWFsIjsNCiAgICAgICAgICAgIHR4dCA9IGNhZGVuYU1heW9yICsgJyAtICcNCiAgICAgICAgICAgIG1hcmdlblBpeGVsZXMgPSBjdHgubWVhc3VyZVRleHQodHh0KS53aWR0aDsNCiAgICAgICAgICAgIGNhbnZhc01lZGljaW9uSXpxdWllcmRvLnJlbW92ZSgpOw0KICAgICAgICByZXR1cm4gbWFyZ2VuUGl4ZWxlczsNCiAgICB9DQogICAgZnVuY3Rpb24gQ2FsY3VsYXJBbmNob01hcmdlbkRlcmVjaG9fR3JhZmljb0xpbmVhcyhwQXJyYXlEYXRvcywgcEFuY2hvR3JhZmljbykgew0KICAgICAgICB2YXIgY2FkZW5hTWF5b3IgPSAiIjsNCiAgICAgICAgdmFyIGNhbnZhc01lZGljaW9uRGVyZWNobzsNCiAgICAgICAgdmFyIGM7DQogICAgICAgIHZhciBjdHg7DQogICAgICAgIHZhciB0eHQ7DQogICAgICAgIHBBcnJheURhdG9zLmZvckVhY2goZnVuY3Rpb24gKG5vbWJyZVNlcmllKSB7DQogICAgICAgICAgICBpZiAobm9tYnJlU2VyaWUubGVuZ3RoID4gY2FkZW5hTWF5b3IubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgY2FkZW5hTWF5b3IgPSBub21icmVTZXJpZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICAgIGNhbnZhc01lZGljaW9uRGVyZWNobyA9IGQzLnNlbGVjdCgiI2NhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNjExMSIpLmFwcGVuZCgiY2FudmFzIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdjYW52YXNNZWRpY2lvbkRlcmVjaG9jZWxkYTYxMTEnKQ0KICAgICAgICAgICAgLmF0dHIoInZpc2liaWxpdHkiLCAiaGlkZGVuIikNCiAgICAgICAgICAgIC5hdHRyKCJ3aGl0ZS1zcGFjZSIsICJub3dyYXAiKQ0KICAgICAgICBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhc01lZGljaW9uRGVyZWNob2NlbGRhNjExMSIpOw0KICAgICAgICBjdHggPSBjLmdldENvbnRleHQoIjJkIik7DQogICAgICAgIGN0eC5mb250ID0gIjEycHggQXJpYWwiOw0KICAgICAgICB0eHQgPSBjYWRlbmFNYXlvcg0KICAgICAgICBtYXJnZW5QaXhlbGVzID0gY3R4Lm1lYXN1cmVUZXh0KHR4dCkud2lkdGggKyA0NTsNCiAgICAgICAgY2FudmFzTWVkaWNpb25EZXJlY2hvLnJlbW92ZSgpOw0KICAgICAgICBpZiAobWFyZ2VuUGl4ZWxlcyA+IChwQW5jaG9HcmFmaWNvIC8gMikpIHsNCiAgICAgICAgICAgIG1hcmdlblBpeGVsZXMgPSBwQW5jaG9HcmFmaWNvIC8gMjsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbWFyZ2VuUGl4ZWxlczsNCiAgICB9DQogICAgZnVuY3Rpb24gQ2FsY3VsYXJNYXhpbW9EYXRvcyhwQXJyYXlEYXRvcywgcENvbWVuemFyRWplWUVuQ2Vybykgew0KICAgICAgICB2YXIgbWF4aW1vRGF0b3MgPSAwOw0KICAgICAgICBtYXhpbW9EYXRvcyA9IGQzLm1heChwQXJyYXlEYXRvcywgZnVuY3Rpb24gKHNlcmllKSB7DQogICAgICAgICAgICByZXR1cm4gZDMubWF4KHNlcmllLnZhbHVlcywgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC52YWxvcl9zZXJpZTsgICAvLyBlbCByZXR1cm4gZXMgbG9jYWwgYSBlc3RhIGZ1bmNpw7NuIGludGVybmENCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgICAgIGlmIChwQ29tZW56YXJFamVZRW5DZXJvID09IHRydWUpIHsNCiAgICAgICAgICAgIGlmIChtYXhpbW9EYXRvcyA8IDApIHsNCiAgICAgICAgICAgICAgICBtYXhpbW9EYXRvcyA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG1heGltb0RhdG9zOw0KICAgIH0NCiAgICBmdW5jdGlvbiBoZXggKGMpIHsNCgkgICAgdmFyIHMgPSAiMDEyMzQ1Njc4OWFiY2RlZiI7DQoJICAgIHZhciBpID0gcGFyc2VJbnQgKGMpOw0KCSAgICBpZiAoaSA9PSAwIHx8IGlzTmFOIChjKSkNCgkgICAgICAgIHJldHVybiAiMDAiOw0KCSAgICBpID0gTWF0aC5yb3VuZCAoTWF0aC5taW4gKE1hdGgubWF4ICgwLCBpKSwgMjU1KSk7DQoJICAgIHJldHVybiBzLmNoYXJBdCAoKGkgLSBpICUgMTYpIC8gMTYpICsgcy5jaGFyQXQgKGkgJSAxNik7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGNvbnZlcnRUb0hleCAocmdiKSB7DQoJICAgIHJldHVybiBoZXgocmdiWzBdKSArIGhleChyZ2JbMV0pICsgaGV4KHJnYlsyXSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHRyaW0gKHMpIHsgcmV0dXJuIChzLmNoYXJBdCgwKSA9PSAnIycpID8gcy5zdWJzdHJpbmcoMSwgNykgOiBzIH0NCiAgICBmdW5jdGlvbiBjb252ZXJ0VG9SR0IgKGhleCkgew0KCSAgICB2YXIgY29sb3IgPSBbXTsNCgkgICAgY29sb3JbMF0gPSBwYXJzZUludCAoKHRyaW0oaGV4KSkuc3Vic3RyaW5nICgwLCAyKSwgMTYpOw0KCSAgICBjb2xvclsxXSA9IHBhcnNlSW50ICgodHJpbShoZXgpKS5zdWJzdHJpbmcgKDIsIDQpLCAxNik7DQoJICAgIGNvbG9yWzJdID0gcGFyc2VJbnQgKCh0cmltKGhleCkpLnN1YnN0cmluZyAoNCwgNiksIDE2KTsNCgkgICAgcmV0dXJuIGNvbG9yOw0KICAgIH0NCiAgICBmdW5jdGlvbiBDYWxjdWxhckdyYWRpZW50ZUNvbG9yZXNfR3JhZmljb0V2b2x1Y2lvbkxpbmVhczIoY29sb3JJbmljaW8sY29sb3JGaW4sbnVtZXJvTGluZWFzKXsNCiAgICAgICAgdmFyIGNvbG9ySW5pY2lvUkdCID0gJyc7DQogICAgICAgIHZhciBjb2xvckZpblJHQiA9ICcnOw0KICAgICAgICB2YXIgY29sb3JSTWVkaWE7DQogICAgICAgIHZhciBjb2xvckdNZWRpYTsNCiAgICAgICAgdmFyIGNvbG9yQk1lZGlhOw0KICAgICAgICB2YXIgY29sb3JSR0JNZWRpYSA9IG5ldyBBcnJheSgpOw0KICAgICAgICB2YXIgY29sb3JIZXhNZWRpYTsNCiAgICAgICAgdmFyIG51bWVyb0xpbmVhc0FEaXN0cmlidWlyID0gMDsNCiAgICAgICAgdmFyIGNvbG9yZXNQb3NpdGl2b3NOZWdhdGl2b3MgPSAwDQogICAgICAgIHZhciBjYW50aWRhZENvbG9yVHJhbW8gPSAwOw0KICAgICAgICB2YXIgY29sb3JlcyA9IG5ldyBBcnJheSgpOw0KICAgICAgICBjb2xvckluaWNpb1JHQiA9IGNvbnZlcnRUb1JHQihjb2xvckluaWNpbyk7DQogICAgICAgIGNvbG9yRmluUkdCID0gY29udmVydFRvUkdCKGNvbG9yRmluKTsNCiAgICAgICAgY29sb3JSTWVkaWEgPSAoY29sb3JJbmljaW9SR0JbMF0gKyBjb2xvckZpblJHQlswXSkgLyAyOw0KICAgICAgICBjb2xvckdNZWRpYSA9IChjb2xvckluaWNpb1JHQlsxXSArIGNvbG9yRmluUkdCWzFdKSAvIDI7DQogICAgICAgIGNvbG9yQk1lZGlhID0gKGNvbG9ySW5pY2lvUkdCWzJdICsgY29sb3JGaW5SR0JbMl0pIC8gMjsNCiAgICAgICAgY29sb3JSR0JNZWRpYSA9IFtjb2xvclJNZWRpYSwgY29sb3JHTWVkaWEsIGNvbG9yQk1lZGlhXTsNCiAgICAgICAgY29sb3JIZXhNZWRpYSA9IGNvbnZlcnRUb0hleChjb2xvclJHQk1lZGlhKTsNCiAgICAgICAgbnVtZXJvTGluZWFzQURpc3RyaWJ1aXIgPSBudW1lcm9MaW5lYXM7DQogICAgICAgIGlmKG51bWVyb0xpbmVhcyAlIDIgIT0gMCkgew0KICAgICAgICAgICAgbnVtZXJvTGluZWFzQURpc3RyaWJ1aXIgPSBudW1lcm9MaW5lYXNBRGlzdHJpYnVpciAtIDE7DQogICAgICAgIH0NCiAgICAgICAgY29sb3Jlc1Bvc2l0aXZvc05lZ2F0aXZvcyA9IG51bWVyb0xpbmVhc0FEaXN0cmlidWlyIC8gMjsNCiAgICAgICAgY2FudGlkYWRDb2xvclRyYW1vID0gMTEwIC8gKGNvbG9yZXNQb3NpdGl2b3NOZWdhdGl2b3MgKyAxKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IGNvbG9yZXNQb3NpdGl2b3NOZWdhdGl2b3M7IGkgPj0gMTsgaS0tKSB7DQogICAgICAgICAgICBjb2xvcmVzLnB1c2goJyMnICsgTGlnaHRlbkRhcmtlbkNvbG9yKGNvbG9ySGV4TWVkaWEsIGNhbnRpZGFkQ29sb3JUcmFtbyAqIGkgKiAtMSkpDQogICAgICAgIH0NCiAgICAgICAgaWYgKG51bWVyb0xpbmVhcyAlIDIgIT0gMCkgew0KICAgICAgICAgICAgY29sb3Jlcy5wdXNoKCcjJyArIGNvbG9ySGV4TWVkaWEpOw0KICAgICAgICB9DQogICAgICAgIGNhbnRpZGFkQ29sb3JUcmFtbyA9IDc1IC8gKGNvbG9yZXNQb3NpdGl2b3NOZWdhdGl2b3MgKyAxKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gY29sb3Jlc1Bvc2l0aXZvc05lZ2F0aXZvczsgaSsrKSB7DQogICAgICAgICAgICBjb2xvcmVzLnB1c2goJyMnICsgTGlnaHRlbkRhcmtlbkNvbG9yKGNvbG9ySGV4TWVkaWEsIGNhbnRpZGFkQ29sb3JUcmFtbyAqIGkpKQ0KICAgICAgICB9DQogICAgcmV0dXJuIGNvbG9yZXM7DQogICAgfQ0KICAgIGZ1bmN0aW9uIExpZ2h0ZW5EYXJrZW5Db2xvcihjb2xvckNvZGUsIGFtb3VudCkgew0KICAgICAgICB2YXIgdXNlUG91bmQgPSBmYWxzZTsNCiAgICAgICAgaWYgKGNvbG9yQ29kZVswXSA9PSAiIyIpIHsNCiAgICAgICAgICAgIGNvbG9yQ29kZSA9IGNvbG9yQ29kZS5zbGljZSgxKTsNCiAgICAgICAgICAgIHVzZVBvdW5kID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgbnVtID0gcGFyc2VJbnQoY29sb3JDb2RlLCAxNik7DQogICAgICAgIHZhciByID0gKG51bSA+PiAxNikgKyBhbW91bnQ7DQogICAgICAgIGlmIChyID4gMjU1KSB7DQogICAgICAgICAgICByID0gMjU1Ow0KICAgICAgICB9IGVsc2UgaWYgKHIgPCAwKSB7DQogICAgICAgICAgICByID0gMDsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgYiA9ICgobnVtID4+IDgpICYgMHgwMEZGKSArIGFtb3VudDsNCiAgICAgICAgaWYgKGIgPiAyNTUpIHsNCiAgICAgICAgICAgIGIgPSAyNTU7DQogICAgICAgIH0gZWxzZSBpZiAoYiA8IDApIHsNCiAgICAgICAgICAgIGIgPSAwOw0KICAgICAgICB9DQogICAgICAgIHZhciBnID0gKG51bSAmIDB4MDAwMEZGKSArIGFtb3VudDsNCiAgICAgICAgaWYgKGcgPiAyNTUpIHsNCiAgICAgICAgICAgIGcgPSAyNTU7DQogICAgICAgIH0gZWxzZSBpZiAoZyA8IDApIHsNCiAgICAgICAgICAgIGcgPSAwOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiAodXNlUG91bmQgPyAiIyIgOiAiIikgKyAoZyB8IChiIDw8IDgpIHwgKHIgPDwgMTYpKS50b1N0cmluZygxNik7DQogICAgfQ0KICAgIGZ1bmN0aW9uIEFjdHVhbGl6YXJMaW5lYXNQdW50b3MocElkZW50aWZpY2Fkb3IsIHBNb3VzZSwgcFNlcmllX2RhdG9zX2FuaWRhZG9zLCBwWCwgcFksIHBOUHVudG9zRWplWCwgcFdpZHRoLCBwSGVpZ2h0KQ0KICAgIHsNCiAgICAgICAgdmFyIHhEYXRlOw0KICAgICAgICB2YXIgYmlzZWN0Ow0KICAgICAgICB2YXIgaWR4Ow0KICAgICAgICB2YXIgZGF0YTsNCiAgICAgICAgcFNlcmllX2RhdG9zX2FuaWRhZG9zLm1hcChkID0+IHsNCiAgICAgICAgICAgIHhEYXRlID0gcFguaW52ZXJ0KHBNb3VzZVswXSAtIChwV2lkdGggLyBwTlB1bnRvc0VqZVgpIC8gMik7DQogICAgICAgICAgICBiaXNlY3QgPSBkMy5iaXNlY3RvcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5mZWNoYTsgfSkubGVmdA0KICAgICAgICAgICAgaWR4ID0gYmlzZWN0KGQudmFsdWVzLCB4RGF0ZSkNCiAgICAgICAgfSkNCiAgICAgICAgZDMuc2VsZWN0QWxsKCcubW91c2UtcGVyLWxpbmUnKyBwSWRlbnRpZmljYWRvcikNCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCwgaSkgew0KICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLm1vdXNlLWxpbmUnICsgcElkZW50aWZpY2Fkb3IpDQogICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSAiTSIgKyBwWChkLnZhbHVlc1tpZHhdLmZlY2hhKSArICIsIiArIHBIZWlnaHQ7DQogICAgICAgICAgICAgICAgICAgICAgIGRhdGEgKz0gIiAiICsgcFgoZC52YWx1ZXNbaWR4XS5mZWNoYSkgKyAiLCIgKyAwOw0KICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcubW91c2UtbGluZS1ob3Jpem9udGFsJyArIHBJZGVudGlmaWNhZG9yKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigiZCIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSAiTSIgKyAocFdpZHRoKSArICIsIiArIHBNb3VzZVsxXQ0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSArPSAiIDAsIiArIHBNb3VzZVsxXQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGlmIChpc05hTihwWShkLnZhbHVlc1tpZHhdLnZhbG9yX3NlcmllKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJ0cmFuc2xhdGUoMCwwKSI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gInRyYW5zbGF0ZSgiICsgcFgoZC52YWx1ZXNbaWR4XS5mZWNoYSkgKyAiLCIgKyBwWShkLnZhbHVlc1tpZHhdLnZhbG9yX3NlcmllKSArICIpIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAuc3R5bGUoIm9wYWNpdHkiLCBmdW5jdGlvbiAoZCwgaSkgew0KICAgICAgICAgICAgICAgaWYgKGlzTmFOKHBZKGQudmFsdWVzW2lkeF0udmFsb3Jfc2VyaWUpKSkgew0KICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICByZXR1cm4gIjEiOw0KICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICB9KQ0KICAgICAgIDsNCiAgICB9DQogICAgZnVuY3Rpb24gQWN0dWFsaXphckNvbnRlbmlkb0dsb2JvKHBNb3VzZSwgcFNlcmllX2RhdG9zX2FuaWRhZG9zLCBwU2VyaWVfZGF0b3NfZm9ybWF0ZWFkb3NfYW5pZGFkb3MsIHBYLCBwWSwgcE5QdW50b3NFamVYLCBwV2lkdGgsIHBNYXJnaW4sIHBDb2xvciwgcE1hc2NhcmFTYWxpZGFEYXRvcykNCiAgICB7DQogICAgICAgIHZhciB4RGF0ZTsNCiAgICAgICAgdmFyIGJpc2VjdDsNCiAgICAgICAgdmFyIGlkeDsNCiAgICAgICAgdmFyIHZhbG9yWUxlZ2VuZDsNCiAgICAgICAgdmFyIHNvcnRpbmdBcnI7DQogICAgICAgIHZhciByZXNfbmVzdGVkMTsNCiAgICAgICAgc29ydGluZ09iaiA9IFtdDQogICAgICAgIHBTZXJpZV9kYXRvc19hbmlkYWRvcy5tYXAoZCA9PiB7DQogICAgICAgICAgICB4RGF0ZSA9IHBYLmludmVydChwTW91c2VbMF0gLSAocFdpZHRoIC8gcE5QdW50b3NFamVYKSAvIDIpOw0KICAgICAgICAgICAgYmlzZWN0ID0gZDMuYmlzZWN0b3IoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuZmVjaGE7IH0pLmxlZnQNCiAgICAgICAgICAgIGlkeCA9IGJpc2VjdChkLnZhbHVlcywgeERhdGUpDQogICAgICAgICAgICBzb3J0aW5nT2JqLnB1c2goeyBuYW1lOiBkLm5hbWUsIGZlY2hhX3BlcmlvZG9fc2VyaWU6IGQudmFsdWVzW2lkeF0uZmVjaGEsIG5vbWJyZV9wZXJpb2RvOiBkLnZhbHVlc1tpZHhdLm5vbWJyZV9wZXJpb2RvICsgJyAnICsgZC52YWx1ZXNbaWR4XS5hbmlvX3BlcmlvZG8sIGV0aXF1ZXRhcGVyaW9kbzogZC52YWx1ZXNbaWR4XS5ldGlxdWV0YXBlcmlvZG8sIHZhbG9yX3NlcmllOiBkLnZhbHVlc1tpZHhdLnZhbG9yX3NlcmllIH0pDQogICAgICAgIH0pDQogICAgICAgIHNvcnRpbmdPYmouc29ydChmdW5jdGlvbiAocFgsIHBZKSB7DQogICAgICAgICAgICByZXR1cm4gZDMuZGVzY2VuZGluZyhwWC52YWxvcl9zZXJpZSwgcFkudmFsb3Jfc2VyaWUpOw0KICAgICAgICB9KQ0KICAgICAgICBzb3J0aW5nQXJyID0gc29ydGluZ09iai5tYXAoZCA9PiBkLm5hbWUpDQogICAgICAgIHJlc19uZXN0ZWQxID0gcFNlcmllX2RhdG9zX2Zvcm1hdGVhZG9zX2FuaWRhZG9zLnNsaWNlKCkuc29ydChmdW5jdGlvbiAoYSwgYikgew0KICAgICAgICAgICAgcmV0dXJuIHNvcnRpbmdBcnIuaW5kZXhPZihhLm5hbWUpIC0gc29ydGluZ0Fyci5pbmRleE9mKGIubmFtZSkgLy8gcmFuayB2ZWhpY2xlIEhvbWJyZXNhc2VkIG9uIHByaWNlIG9mIHZhbG9yX2luZGljYWRvcg0KICAgICAgICB9KQ0KICAgICAgICBnbG9ib19HcmFmaWNvX01MaW5lYXMuaHRtbChzb3J0aW5nT2JqWzBdLmV0aXF1ZXRhcGVyaW9kbyArICc6ICcgKyBzb3J0aW5nT2JqWzBdLm5vbWJyZV9wZXJpb2RvKQ0KICAgICAgICAgICAgLnN0eWxlKCdkaXNwbGF5JywgJ2Jsb2NrJykNCiAgICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIGQzLmV2ZW50LnBhZ2VYICsgMjUgKyAncHgnKQ0KICAgICAgICAgICAgLnN0eWxlKCd0b3AnLCBkMy5ldmVudC5wYWdlWSAtIDgwICsgJ3B4JykNCiAgICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgMTIuNSkNCiAgICAgICAgICAgIC5zZWxlY3RBbGwoKQ0KICAgICAgICAgICAgLmRhdGEocmVzX25lc3RlZDEpLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoJ2RpdicpDQogICAgICAgICAgICAuc3R5bGUoJ2NvbG9yJywgZCA9PiB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHBDb2xvcihkLm5hbWUpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAxNSkNCiAgICAgICAgICAgIC5odG1sKGQgPT4gew0KICAgICAgICAgICAgICAgIGlmIChpc05hTihkLnZhbHVlc1tpZHhdLnZhbG9yX3NlcmllKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5uYW1lICsgIiA6IDxiPiAtIDwvYj4iDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5uYW1lICsgIiA6IDxiPiIgKyBmb3JtYXQocE1hc2NhcmFTYWxpZGFEYXRvcywgZC52YWx1ZXNbaWR4XS52YWxvcl9zZXJpZSkgKyAiPC9iPiINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB2YWxvcllMZWdlbmQgPSBwWS5pbnZlcnQocE1vdXNlWzFdIC0gMSkNCiAgICAgICAgdmFsb3JZTGVnZW5kID0gZm9ybWF0KHBNYXNjYXJhU2FsaWRhRGF0b3MsIHZhbG9yWUxlZ2VuZCk7DQogICAgICAgIGdsb2JvX0dyYWZpY29fTUxpbmVhc19MZXllbmRhWS5odG1sKHZhbG9yWUxlZ2VuZCkNCiAgICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdibG9jaycpDQogICAgICAgICAgICAuc3R5bGUoJ3dpZHRoJywgcE1hcmdpbi5sZWZ0IC0gNSArICdweCcpDQogICAgICAgICAgICAuc3R5bGUoJ2xlZnQnLCBkMy5ldmVudC5wYWdlWCAtIHBNb3VzZVswXSAtIHBNYXJnaW4ubGVmdCArICdweCcpDQogICAgICAgICAgICAuc3R5bGUoJ3RvcCcsIGQzLmV2ZW50LnBhZ2VZIC0gMTIgKyAncHgnKQ0KICAgIH0NCmQzLmNzdigiaHR0cDovL3d3dy5wb3J0YWxlc3RhZGlzdGljby5jb20vc2VydmljaW9fb2J0ZW5jaW9uX2RhdG9zX3Zpc3VhbGl6YWNpb25lcy5hc214L09idGVuZXJfRGF0b3M/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmcElkX1BhZ2luYV9BY3RpdmE9MTAwMDEmcElkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTYxMTEmcElkX1RlcnJpdG9yaW89MDAmcElkX1RlcnJpdG9yaW9fUGFkcmU9JnBJZGlvbWE9MSZwSWRfcmVnaW9uPWVzLWVzIikudGhlbigNCiAgICBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICB2YXIgbGluZWFfZ3JhZmljbzsNCiAgICAgICAgdmFyIHN2ZzsNCiAgICAgICAgdmFyIHNlcmllc0xpbmVhczsNCiAgICAgICAgdmFyIGxpbmVhQ2VybzsNCiAgICAgICAgdmFyIGxpbmVhc19zZXJpZXM7DQogICAgICAgIHZhciBuRWxlbWVudG9zUG9yU2VyaWU7DQogICAgICAgIHZhciBwdW50b3NBaXNsYWRvczsNCiAgICAgICAgdmFyIGxpbmVhc1ZlcnRIb3JSYXRvbjsNCiAgICAgICAgdmFyIHJhdG9uUG9yTGluZWE7DQogICAgICAgIHZhciBlamVYOw0KICAgICAgICB2YXIgZWplWTsNCiAgICAgICAgdmFyIGNEaW1lbnNpb25FeHQgPSAwDQogICAgICAgIHZhciB2YWxvck1pbmltb0RhdG9zID0gMDsNCiAgICAgICAgdmFyIHZhbG9yTWF4aW1vRGF0b3MgPSAwOw0KICAgICAgICB2YXIgZmVjaGFNYXhpbW87DQogICAgICAgIHZhciBmZWNoYU1pbmltbzsNCiAgICAgICAgdmFyIGNhbGN1bG9fbWF4bWluOw0KICAgICAgICB2YXIgbWFyZ2VuSXpxdWllcmRvID0gMDsNCiAgICAgICAgdmFyIG1hcmdlbkRlcmVjaG8gPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuU3VwZXJpb3IgPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuSW5mZXJpb3IgPSAwOw0KICAgICAgICB2YXIgbkNvcnRlcyA9IDA7DQogICAgICAgIHZhciBuUHVudG9zRWplWCA9IDA7DQogICAgICAgIHZhciBwYXJzZURhdGUgPSBkMy50aW1lUGFyc2UoIiVZLyVtLyVkIik7DQogICAgICAgIHZhciBtYXJnaW47DQogICAgICAgIHZhciB3aWR0aDsNCiAgICAgICAgdmFyIGhlaWdodDsNCiAgICAgICAgdmFyIGNvbG9yOw0KICAgICAgICB2YXIgY2F0ZWdvcnk7DQogICAgICAgIHZhciBlbGVtZW50X2NhcGFfZXNwZXJhbmRvOw0KICAgICAgIHZhciBhbmNob05vZG9zOw0KICAgICAgIHZhciBzdmdMZXllbmRhSG9yaXpvbnRhbDsNCiAgICAgICB2YXIgc3ZnTGVnZW5kOw0KICAgICAgIHZhciBsZWdlbmQ7DQogICAgICAgIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FwYV9Fc3BlcmFuZG9jZWxkYTYxMTEiKTsNCiAgICAgICAgZWxlbWVudF9jYXBhX2VzcGVyYW5kby5jbGFzc0xpc3QucmVtb3ZlKCJsb2FkZXJjZWxkYTYxMTEiKTsNCiAgICAgICAgY2F0ZWdvcnkgPSBkMy5rZXlzKGRhdGFbMF0pLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoa2V5ICE9PSAiYW5pb19wZXJpb2RvIiAmJiBrZXkgIT09ICJmZWNoYV9wZXJpb2RvX3NlcmllIiAmJiBrZXkgIT09ICJub21icmVfcGVyaW9kbyIgJiYga2V5ICE9PSAicGVyaW9kbyIgJiYga2V5ICE9PSAiZXRpcXVldGFwZXJpb2RvIik7IH0pOw0KICAgICAgICBjb2xvciA9ICBkMy5zY2FsZU9yZGluYWwoQ2FsY3VsYXJHcmFkaWVudGVDb2xvcmVzX0dyYWZpY29Fdm9sdWNpb25MaW5lYXMyKCcjRkZFOURGJywgJyNGRjZFMkInLCBjYXRlZ29yeS5sZW5ndGgpKTsNCiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICBkLmZlY2hhX3BlcmlvZG9fc2VyaWUgPSBwYXJzZURhdGUoZC5mZWNoYV9wZXJpb2RvX3NlcmllKTsNCiAgICAgICAgICAgIG5Db3J0ZXMrKzsNCiAgICAgICAgICAgIG5QdW50b3NFamVYKys7DQogICAgICAgIH0pOw0KICAgICAgICBpZiAobkNvcnRlcyA+IDcpew0KICAgICAgICAgICAgbkNvcnRlcyA9IDc7DQogICAgICAgIH0NCiAgICAgICAgLy8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgY29sb3IuZG9tYWluKGQzLmtleXMoZGF0YVswXSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIChrZXkgIT09ICJhbmlvX3BlcmlvZG8iICYmIGtleSAhPT0gImZlY2hhX3BlcmlvZG9fc2VyaWUiICYmIGtleSAhPT0gIm5vbWJyZV9wZXJpb2RvIiAmJiBrZXkgIT09ICJwZXJpb2RvIiAmJiBrZXkgIT09ICJldGlxdWV0YXBlcmlvZG8iKTsgfSkpOw0KICAgICAgICBjYWxjdWxvX21heG1pbiA9IGNvbG9yLmRvbWFpbigpLm1hcChmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLA0KICAgICAgICAgICAgICAgIHZhbHVlczogZGF0YS5tYXAoZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYW5pb19wZXJpb2RvOiBkLmFuaW9fcGVyaW9kbywgZmVjaGE6IGQuZmVjaGFfcGVyaW9kb19zZXJpZSwgbm9tYnJlX3BlcmlvZG86IGQubm9tYnJlX3BlcmlvZG8sIHZhbG9yX3NlcmllOiArZFtuYW1lXSB9Ow0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9Ow0KICAgICAgICB9KTsNCiAgICAgICAgdmFsb3JNYXhpbW9EYXRvcyA9IENhbGN1bGFyTWF4aW1vRGF0b3MoY2FsY3Vsb19tYXhtaW4sIGZhbHNlKQ0KICAgICAgICB2YWxvck1pbmltb0RhdG9zID0gQ2FsY3VsYXJNaW5pbW9EYXRvcyhjYWxjdWxvX21heG1pbiwgZmFsc2UsIHRydWUpOw0KICAgICAgICBtYXJnZW5JenF1aWVyZG8gPSBDYWxjdWxhckFuY2hvTWFyZ2VuSXpxdWllcmRvX0dyYWZpY29MaW5lYXMoZm9ybWF0KCIjLiMjMCwiLHZhbG9yTWF4aW1vRGF0b3MpLCBmb3JtYXQoIiMuIyMwLCIsdmFsb3JNaW5pbW9EYXRvcyksIDQ1MCk7DQogICAgICAgIG1hcmdlbkRlcmVjaG8gPSBDYWxjdWxhckFuY2hvTWFyZ2VuRGVyZWNob19HcmFmaWNvTGluZWFzKGNhdGVnb3J5LCA0NTApOw0KICAgICAgICBpZiAoY2F0ZWdvcnkubGVuZ3RoID4gMSAmJiA0NTAgPiA0NTApIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDQwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSAyMDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChjYXRlZ29yeS5sZW5ndGggPT0gMSAmJiA0NTAgPiA0NTApIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5EZXJlY2hvID0gMzAgDQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDQwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSAyMDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5EZXJlY2hvID0gMzAgDQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDUwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSA1MDsNCiAgICAgICAgfQ0KICAgICAgICBmZWNoYU1heGltbyA9IGQzLm1heChjYWxjdWxvX21heG1pbiwgZnVuY3Rpb24gKHNlcmllKSB7DQogICAgICAgICAgICByZXR1cm4gZDMubWF4KHNlcmllLnZhbHVlcywgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC5mZWNoYTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgICAgZmVjaGFNaW5pbW8gPSBkMy5taW4oY2FsY3Vsb19tYXhtaW4sIGZ1bmN0aW9uIChzZXJpZSkgew0KICAgICAgICAgICAgcmV0dXJuIGQzLm1pbihzZXJpZS52YWx1ZXMsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGQuZmVjaGE7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICAgIG1hcmdpbiA9IHsgdG9wOiBtYXJnZW5TdXBlcmlvciwgcmlnaHQ6IG1hcmdlbkRlcmVjaG8sIGJvdHRvbTogbWFyZ2VuSW5mZXJpb3IsIGxlZnQ6IG1hcmdlbkl6cXVpZXJkbyB9Ow0KICAgICAgICB3aWR0aCA9IDQ1MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0Ow0KICAgICAgICBoZWlnaHQgPSA0NTAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTsNCiAgICAgICAgZWplWCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pOw0KICAgICAgICBlamVZID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSk7DQogICAgICAgIGxpbmVhX2dyYWZpY28gPSBkMy5saW5lKCkNCiAgICAgICAgICAgIC54KGZ1bmN0aW9uIChkKSB7IHJldHVybiBlamVYKGQuZmVjaGEpOyB9KQ0KICAgICAgICAgICAgLnkoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVkoZC52YWxvcl9zZXJpZSk7IH0pDQogICAgICAgICAgICAuZGVmaW5lZChmdW5jdGlvbiAoZCkgeyByZXR1cm4gIWlzTmFOKGQudmFsb3Jfc2VyaWUpOyB9KQ0KICAgICAgICAgICAgOw0KICAgICAgICAgICAgICAgIC8vIDEuQWRkIHRoZSBTVkcgVG8gdGhlIHBhZ2UgQW5kIGVtcGxveSAjMg0KICAgICAgICBzdmcgPSBkMy5zZWxlY3QoIiNjYXBhX0dyYWZpY29fRXZvbHVjaW9uX0xpbmVhc19Bc2luY3Jvbm9jZWxkYTYxMTEiKS5hcHBlbmQoInN2ZyIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnY2VsZGE2MTExJykNCiAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIDQ1MCkNCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCA0NTApDQogICAgICAgICAgICAuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBtYXJnaW4ubGVmdCArICIsICIgKyBtYXJnaW4udG9wICsgIikiKTsNCiAgICAgICAgZ2xvYm9fR3JhZmljb19NTGluZWFzID0gZDMuc2VsZWN0KCJib2R5IikuYXBwZW5kKCJkaXYiKQ0KICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2dsb2JvX0dyYWZpY29fTUxpbmVhcycpDQogICAgICAgICAgICAuc3R5bGUoJ3Bvc2l0aW9uJywgJ2Fic29sdXRlJykNCiAgICAgICAgICAgIC5zdHlsZSgncGFkZGluZycsIDYpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAidG9vbFRpcCIpDQogICAgICAgICAgICAuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOw0KICAgICAgICBnbG9ib19HcmFmaWNvX01MaW5lYXNfTGV5ZW5kYVkgPSBkMy5zZWxlY3QoImJvZHkiKS5hcHBlbmQoImRpdiIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnZ2xvYm9fR3JhZmljb19NTGluZWFzX0xleWVuZGFZJykNCiAgICAgICAgICAgIC5zdHlsZSgncG9zaXRpb24nLCAnYWJzb2x1dGUnKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgInRvb2x0aXBfWUxlZ2VuZCIpDQogICAgICAgIDsNCiAgICAgICAgc2VyaWVzTGluZWFzID0gY29sb3IuZG9tYWluKCkubWFwKGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsDQogICAgICAgICAgICAgICAgdmFsdWVzOiBkYXRhLm1hcChmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBhbmlvX3BlcmlvZG86IGQuYW5pb19wZXJpb2RvLCBldGlxdWV0YXBlcmlvZG86IGQuZXRpcXVldGFwZXJpb2RvLCBmZWNoYTogZC5mZWNoYV9wZXJpb2RvX3NlcmllLCBub21icmVfcGVyaW9kbzogZC5ub21icmVfcGVyaW9kbywgdmFsb3Jfc2VyaWU6ICtkW25hbWVdIH07DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH07DQogICAgICAgIH0pOw0KICAgICAgICBuRWxlbWVudG9zUG9yU2VyaWUgPSBzZXJpZXNMaW5lYXNbMF0udmFsdWVzLmxlbmd0aCAtIDE7DQogICAgICAgIGVqZVguZG9tYWluKFtmZWNoYU1pbmltbywgZmVjaGFNYXhpbW9dKTsNCiAgICAgICAgZWplWS5kb21haW4oW3ZhbG9yTWluaW1vRGF0b3MsIHZhbG9yTWF4aW1vRGF0b3NdKTsNCiAgICAgICAgICAgICAgICAvLyBMZXllbmRhLCBlamUgZGUgbGFzIFgsIHB1bnRvcyB5IGxleWVuZGEgZGUgZXN0b3MgcHVudG9zOg0KICAgICAgICBzdmcuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJmdWVudGVfZ2VuZXJpY2EiKQ0KICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMCwiICsgaGVpZ2h0ICsgIikiKQ0KICAgICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSgpLnNjYWxlKGVqZVgpLnRpY2tTaXplKC1oZWlnaHQpLnRpY2tzKG5Db3J0ZXMpKQ0KICAgICAgICAgICAgLmNhbGwoDQogICAgICAgICAgICAgICAgZyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJ0ZXh0IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCAibWlkZGxlIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgIjUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJsaW5lIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMC43KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjMpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0KCIuZG9tYWluIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMS41KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjUpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKQ0KICAgICAgICA7DQogICAgICAgIHN2Zy5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImZ1ZW50ZV9nZW5lcmljYSIpDQogICAgICAgICAgICAuY2FsbChkMy5heGlzTGVmdChlamVZKS50aWNrcyg0KS50aWNrU2l6ZSgtd2lkdGgpKQ0KICAgICAgICAgICAgLmNhbGwoDQogICAgICAgICAgICAgICAgZyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJ0ZXh0IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ4IiwgLTMpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoImxpbmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAwLjcpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuMykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3QoIi5kb21haW4iKS5yZW1vdmUoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICkNCiAgICAgICAgOw0KICAgICAgICBzdmcuc2VsZWN0QWxsKCJ0ZXh0IikuYXR0cignZmlsbCcsICcjQTlBOUE5Jyk7DQogICAgICAgIGlmIChjYXRlZ29yeS5sZW5ndGggPiAxICkgDQogICAgICAgIHsNCiAgICAgICAgICAgIGFuY2hvTm9kb3MgPSAoZCkgPT4gZC5nZXRCQm94KCkud2lkdGg7IA0KICAgICAgICAgICAgc3ZnTGV5ZW5kYUhvcml6b250YWwgPSBzdmcuYXBwZW5kKCdnJykNCiAgICAgICAgICAgICAgICAuYXBwZW5kKCdnJykNCiAgICAgICAgICAgIGNvbnN0IGxnY2VsZGE2MTExID0gc3ZnTGV5ZW5kYUhvcml6b250YWwuc2VsZWN0QWxsKCdnJykNCiAgICAgICAgICAgICAgICAuZGF0YShjYXRlZ29yeSkNCiAgICAgICAgICAgICAgICAuZW50ZXIoKQ0KICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCwgaSkgPT4gYHRyYW5zbGF0ZSgke2kgKiAxMDB9LCR7aGVpZ2h0ICsgMTV9KWApOyAgICAgICAgICAgIA0KICAgICAgICAgICAgbGdjZWxkYTYxMTEuYXBwZW5kKCdyZWN0JykgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBkPT5jb2xvcihkKSkNCiAgICAgICAgICAgICAgICAuYXR0cigneCcsIDApDQogICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAwKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIDEwKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAxMCk7DQogICAgICAgICAgICBsZ2NlbGRhNjExMS5hcHBlbmQoJ3RleHQnKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgMTcuNSkNCiAgICAgICAgICAgICAgICAuYXR0cigneScsIDEwKQ0KICAgICAgICAgICAgICAgIC50ZXh0KGQgPT4gZCk7DQogICAgICAgICAgICBsZXQgb2Zmc2V0Y2VsZGE2MTExID0gMDsNCiAgICAgICAgICAgIGxnY2VsZGE2MTExLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uIChkLCBpKSB7DQogICAgICAgICAgICAgICAgbGV0IHggPSBvZmZzZXRjZWxkYTYxMTE7DQogICAgICAgICAgICAgICAgb2Zmc2V0Y2VsZGE2MTExICs9IGFuY2hvTm9kb3ModGhpcykgKyAxMDsNCiAgICAgICAgICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke3h9LCR7aGVpZ2h0ICsgMTB9KWA7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHN2Z0xleWVuZGFIb3Jpem9udGFsLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLDIwKScNCiAgICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodmFsb3JNYXhpbW9EYXRvcyA+IDAgJiYgdmFsb3JNaW5pbW9EYXRvcyA8IDAgKSANCiAgICAgICAgew0KICAgICAgICAgICAgbGluZWFDZXJvID0gc3ZnLmFwcGVuZCgibGluZSIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnbGluZWFDZXJvJykNCiAgICAgICAgICAgIC5hdHRyKCJ4MSIsIDApDQogICAgICAgICAgICAuYXR0cigieTEiLCBlamVZKDApKQ0KICAgICAgICAgICAgLmF0dHIoIngyIiwgd2lkdGgpDQogICAgICAgICAgICAuYXR0cigieTIiLCBlamVZKDApKQ0KICAgICAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsICIxcHgiKQ0KICAgICAgICAgICAgLmF0dHIoInN0cm9rZSIsICIjQTlBOUE5IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgMyIpKQ0KICAgICAgICAgICAgOw0KICAgICAgICB9DQogICAgICAgIGxpbmVhc19zZXJpZXMgPSBzdmcuc2VsZWN0QWxsKCIubGluZWFzX3NlcmllcyIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpDQogICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoImciKQ0KICAgICAgICAgICAgOw0KICAgICAgICBsaW5lYXNfc2VyaWVzLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibGluZSBsaW5lY2VsZGE2MTExIikNCiAgICAgICAgICAgIC5hdHRyKCJkIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGxpbmVhX2dyYWZpY28oZC52YWx1ZXMpOyB9KQ0KICAgICAgICAgICAgLmF0dHIoImRhdGEtbGVnZW5kIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQubmFtZSB9KQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gY29sb3IoZC5uYW1lKTsgfSk7DQogICAgICAgIHB1bnRvc0Fpc2xhZG9zID0gc3ZnLnNlbGVjdEFsbCgiLmRvdCIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2NpcmNsZS1ncm91cCcpDQogICAgICAgICAgICAuc3R5bGUoImZpbGwiLCBmdW5jdGlvbiAoZCwgaTEpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IoZC5uYW1lKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICA7DQogICAgICAgIHB1bnRvc0Fpc2xhZG9zLnNlbGVjdEFsbCgiLmRvdCIpDQogICAgICAgICAgICAuZGF0YShkID0+IGQudmFsdWVzKS5lbnRlcigpDQogICAgICAgICAgICAuYXBwZW5kKCJjaXJjbGUiKSAvLyBVc2VzIHRoZSBlbnRlcigpLmFwcGVuZCgpIG1ldGhvZA0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImRvdCIpIC8vIEFzc2lnbiBhIGNsYXNzIGZvciBzdHlsaW5nDQogICAgICAgICAgICAuYXR0cigiY3giLCBmdW5jdGlvbiAoZCwgaSkgeyByZXR1cm4gZWplWChkLmZlY2hhKSB9KQ0KICAgICAgICAgICAgLmF0dHIoImN5IiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVkoZC52YWxvcl9zZXJpZSkgfSkNCiAgICAgICAgICAgIC5hdHRyKCJyIiwgMykNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsIGZ1bmN0aW9uIChkLCBpKSB7DQogICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBjRGltZW5zaW9uRXh0Kys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChkLnZhbG9yX3NlcmllID09ICInbnVsbCciIHx8IGlzTmFOKGQudmFsb3Jfc2VyaWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDAgJiYgaSA8IG5FbGVtZW50b3NQb3JTZXJpZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUpKSAmJiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjEiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjEiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBuRWxlbWVudG9zUG9yU2VyaWUgJiYgKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICA7DQogICAgICAgIHRyYW5zaXRpb24oZDMuc2VsZWN0QWxsKCIubGluZWNlbGRhNjExMSIpKTsNCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uID0gc3ZnLmFwcGVuZCgiZyIpOyANCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtbGluZWNlbGRhNjExMSIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsICIjMDAwMDAwIikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS1kYXNoYXJyYXkiLCAoIjUsIDUiKSkNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgIGxpbmVhc1ZlcnRIb3JSYXRvbi5hcHBlbmQoInBhdGgiKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNjExMSIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsICIjMDAwMDAwIikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS1kYXNoYXJyYXkiLCAoIjUsIDUiKSkNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgIHJhdG9uUG9yTGluZWEgPSBsaW5lYXNWZXJ0SG9yUmF0b24uc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTYxMTEiKQ0KICAgICAgICAgICAgLmRhdGEoc2VyaWVzTGluZWFzKQ0KICAgICAgICAgICAgLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIm1vdXNlLXBlci1saW5lY2VsZGE2MTExIik7DQogICAgICAgICAgICAvL1RhYnVsYWNpw7NuIGRlc2N1YWRyYWRhOg0KICAgICAgICAgICAgICAgIHJhdG9uUG9yTGluZWEuYXBwZW5kKCJjaXJjbGUiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigiciIsIDQpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcihkLm5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImZpbGwiLCAiI0ZGRkZGRiIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjNweCIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgcmF0b25Qb3JMaW5lYS5hcHBlbmQoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAibWlkZGxlIikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJmb250LXNpemUiLCAiMTZweCIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgidGV4dC1kZWNvcmF0aW9uIiwgInVuZGVybGluZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDEwLDMpIik7DQogICAgICAgICAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicmVjdCIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsICdyZWN0Y2VsZGE2MTExJykNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgd2lkdGgpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJmaWxsIiwgIm5vbmUiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigicG9pbnRlci1ldmVudHMiLCAiYWxsIikNCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmVjZWxkYTYxMTEiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lLWhvcml6b250YWxjZWxkYTYxMTEiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNjExMSBjaXJjbGUiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNjExMSB0ZXh0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzIikuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzX0xleWVuZGFZIikuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmVjZWxkYTYxMTEiKS5zdHlsZSgib3BhY2l0eSIsICIwLjY1Iik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lLWhvcml6b250YWxjZWxkYTYxMTEiKS5zdHlsZSgib3BhY2l0eSIsICIwLjY1Iik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNjExMSBjaXJjbGUiKS5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNjExMSB0ZXh0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzIikuc3R5bGUoJ2Rpc3BsYXknLCAnYmxvY2snKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiI2dsb2JvX0dyYWZpY29fTUxpbmVhc19MZXllbmRhWSIpLnN0eWxlKCdkaXNwbGF5JywgJ2Jsb2NrJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyTGluZWFzUHVudG9zKCdjZWxkYTYxMTEnLCBkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIGhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJDb250ZW5pZG9HbG9ibyhkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgbWFyZ2luLCBjb2xvciwgJyMuIyMwLCcpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2Vtb3ZlIiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckxpbmVhc1B1bnRvcygnY2VsZGE2MTExJywgZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBoZWlnaHQpDQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyQ29udGVuaWRvR2xvYm8oZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIG1hcmdpbiwgY29sb3IsICcjLiMjMCwnKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgKTsNCjwvc2NyaXB0Pg0KPC9kaXY+PGRpdiBDbGFzcz0iem9uYV9tYXNfaW5mbyI+PGRpdiBpZD0iY2NjIiBjbGFzcz0iYm94X2xpbXBpbyBib3giPjxpbWcgaWQ9ImFhYWEiIGNsYXNzPSJpY29ub19kZXNjYXJnYSIgc3JjPSJpbWFnZW5lcy9pY29ub19kZXNjYXJnYS5wbmciIGFsdD0iIiB0aXRsZT0iIiA+PGRpdiBpZD0iY2FwYV9vcGNpb25lc19kZXNjYXJnYXMiIGNsYXNzPSJvdmVybGF5IG1lbnVfb3BjaW9uZXMgcmVwcmVzZW50YWNpb25fdmlzdWFsaXphY2lvbiBzb21icmFfcGVyaW1ldHJhbCIgPjxoND5EZXNjYXJnYXM6IDwvaDQ+PHVsIGlkPSJtZW51MSIgPjxsaSBpZD0ib3B0XzEuMyIgb25jbGljaz0ic2F2ZVN2Z0FzUG5nKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZWxkYTYxMTEnKSwgJ0V2b2x1Y2nDs24gZGUgbG9zIG5hY2ltaWVudG9zIHkgbGFzIGRlZnVuY2lvbmVzLnBuZycsIHtsZWZ0OiAtMjAsIHdpZHRoOiA0ODUsIGJhY2tncm91bmRDb2xvcjogJyNGRkZGRkYnfSk7Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19wbmcucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5JbWFnZW4gUE5HPC9saT48YSBocmVmPSIjIiBpZD0iZGVzY2FyZ2E2MTExIj48bGkgPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX3N2Zy5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkltYWdlbiBTVkc8L2xpPjwvYT48c2NyaXB0PmQzLnNlbGVjdCgiI2Rlc2NhcmdhNjExMSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCl7ZDMuc2VsZWN0KHRoaXMpLmF0dHIoImhyZWYiLCAnZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LCcgKyBidG9hKCc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJJU08tODg1OS0xIiA/PlxyXG48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmF0dHJpYj0iaHR0cDovL3d3dy5jYXJ0by5uZXQvYXR0cmliIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxuczphMz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZVNWR1ZpZXdlckV4dGVuc2lvbnMvMy4wLyIgYTM6c2NyaXB0SW1wbGVtZW50YXRpb249IkFkb2JlIiBzdHlsZT0ic2hhcGUtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbjsgdGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5OyBpbWFnZS1yZW5kZXJpbmc6b3B0aW1pemVRdWFsaXR5OyBmaWxsLXJ1bGU6ZXZlbm9kZDsgY2xpcC1ydWxlOmV2ZW5vZGQ7IiB3aWR0aD0iNDUwIiBoZWlnaHQ9IjkwMCI+PHN0eWxlPiB0ZXh0e2ZvbnQtc2l6ZTogMTJweDtjb2xvcjogI0E5QTlBOTtmb250LWZhbWlseTogQXJpYWw7ZmlsbDogI0E5QTlBOTt9IC5saW5lIHtmaWxsOiBub25lO308L3N0eWxlPicgKyBkMy5zZWxlY3QoIiNjZWxkYTYxMTEiKS5odG1sKCkgKyAnPC9zdmc+JyAgKSkuYXR0cigiZG93bmxvYWQiLCAiRXZvbHVjacOzbiBkZSBsb3MgbmFjaW1pZW50b3MgeSBsYXMgZGVmdW5jaW9uZXMuc3ZnIil9KTwvc2NyaXB0PjxhIGhyZWY9InByb2Nlc29fZGVzY2FyZ2FfZXhjZWxfY3N2LmFzcHg/cG49cG9ydGFsZXN0YWRpc3RpY28mcGM9QUFBMDAmaWRwPTEwMDAxJklkX0NlbGRhX0ZpbGFfUGxhbnRpbGxhPTYxMTEmSWRfVGVycml0b3Jpbz0wMCZJZF9UZXJyaXRvcmlvX1BhZHJlPUNDQTAyJmlkaW9tYT0xJlRpcG9fRmljaGVyb19HZW5lcmFkbz1leGNlbCI+PGxpIGlkPSJvcHRfMS43Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19leGNlbC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkRhdG9zIEV4Y2VsPC9saT48L2E+PGEgaHJlZj0icHJvY2Vzb19kZXNjYXJnYV9leGNlbF9jc3YuYXNweD9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NjExMSZJZF9UZXJyaXRvcmlvPTAwJklkX1RlcnJpdG9yaW9fUGFkcmU9Q0NBMDImaWRpb21hPTEmVGlwb19GaWNoZXJvX0dlbmVyYWRvPWNzdiI+PGxpIGlkPSJvcHRfMS44Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19jc3YucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5EYXRvcyBDU1Y8L2xpPjwvYT48L3VsPjwvZGl2PjwvZGl2PjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGNsYXNzPSJpY29ub19kZXNjYXJnYSIgc3JjPSJpbWFnZW5lcy9pY29ub19tYXMucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfbWFzb3BjaW9uZXMiIGNsYXNzPSJvdmVybGF5IG1lbnVfb3BjaW9uZXMgcmVwcmVzZW50YWNpb25fdmlzdWFsaXphY2lvbiBzb21icmFfcGVyaW1ldHJhbCIgPjxoND5Nw6FzIG9wY2lvbmVzOjwvaDQ+PHVsIGlkPSJtZW51MSIgPjxhIGhyZWY9IiNleDEiIGlkPSJEQVRPUyYwMCY2MTExJkNDQTAyIiByZWw9Im1vZGFsOm9wZW4iPjxsaSBpZD0ib3B0XzEuMyI+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fZ3JpZC5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPlZlciBkYXRvczwvbGk+PC9hPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBDbGFzcz0idGl0dWxvX2NlbGRhIj5Fdm9sdWNpw7NuIGRlIGxvcyBuYWNpbWllbnRvcyB5IGxhcyBkZWZ1bmNpb25lczwvZGl2PjwvdGQ+PC90cj48dHI+PHRkIENsYXNzPSJzZXBhcmFkb3IiPjxicj48L3RkPjwvdHI+PHRyIGNsYXNzPSJhbmNsYSI+PHRkPjxhIGlkPSJJbmRpY2VfTml2ZWxfMV82Mzc2IiBjbGFzcz0iYW5jaG9yIj48L2E+PC90ZD48L3RyPjx0cj48dGQgY2xhc3M9ImNlbGRhX3Npbl9lc3RpbG9zIiBjb2xzcGFuPSIyIj48ZGl2IGNsYXNzPSJjbGFzZV9jYXBhX3VuaWRhZF92aXN1YWxpemFjaW9uIiBzdHlsZT0ibWluLWhlaWdodDogMTQwcHg7Ij48dGFibGUgY2xhc3M9IlRhYmxhc19kYXRvcyI+PHRyIGNsYXNzPSJUYWJsYXNfZGF0b3NfY2FiZWNlcmEiPjx0ZCBjbGFzcz0iY29sdW1uYV9penF1aWVyZGEiPjxoNCBjbGFzcz0iaDRfZ3JhbmRlIj5Ow7ptZXJvIGRlIGRlZnVuY2lvbmVzPC9oND48L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9kZXJlY2hhIj48aDQgY2xhc3M9Img0X211eV9ncmFuZGUgbmVnYXRpdm9zX2llIj4zNy4wMzMgcGVyc29uYXM8L2g0PjwvdGQ+PC90cj48dHI+PHRkIGNvbHNwYW49IjIiPjx0YWJsZSBjbGFzcz0iU3VidGl0dWxvX2luZGljYWRvciI+PHRyPjx0ZCBjbGFzcz0iY29sdW1uYV9lc3RyZWNoYSI+UGVyaW9kbzo8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9hbmNoYSBuZWdyaXRhIj5EaWNpZW1icmUmbmJzcDsyMDE4PC90ZD48dGQgY2xhc3M9ImNvbHVtbmFfaXpxdWllcmRhIGNvbHVtbmFfZXN0cmVjaGEiPkNyZWNpbWllbnRvIGludGVyYW51YWw6PC90ZD48dGQgY2xhc3M9ImNvbHVtbmFfY2VudHJvIHRleHRvX211eV9ncmFuZGUgbmVnYXRpdm9zX2llIj4tMTEsMSU8L3RkPjx0ZCBjbGFzcz0iY29sdW1uYV9kZXJlY2hhIj48aW1nIGNsYXNzPSJpbWFnZW5fdGVuZGVuY2lhIiBzcmM9Imh0dHA6Ly93d3cucG9ydGFsZXN0YWRpc3RpY28uY29tL2ltYWdlbmVzL3BhbGV0YXMvMTAwMDEvY3JlY2ltaWVudG9fYWJham8ucG5nIiBhbHQ9IkVzdGFiaWxpZGFkIj48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY29sdW1uYV9lc3RyZWNoYSI+RnVlbnRlOjwvdGQ+PHRkIGNvbHNwYW49IjQiIGNsYXNzPSJuZWdyaXRhIj5JTkUsIE1vdmltaWVudG8gTmF0dXJhbCBkZSBsYSBQb2JsYWNpw7NuLjwvdGQ+PC90cj48L3RhYmxlPjwvdGQ+PC90cj48dHI+PHRkIGNvbHNwYW49IjIiPjxwIGNsYXNzPSJ0ZXh0b19jb250ZW5pZG8iPk7Dum1lcm8gZGUgZGVmdW5jaW9uZXMgcG9yIHRlcnJpdG9yaW8gZGUgcmVzaWRlbmNpYS48L3A+PC90ZD48L3RyPjwvdGFibGU+PC9kaXY+PC90ZD48L3RyPjx0cj48dGQgQ2xhc3M9InNlcGFyYWRvciI+PGJyPjwvdGQ+PC90cj48dHIgY2xhc3M9ImFuY2xhIj48dGQ+PGEgaWQ9IkluZGljZV9OaXZlbF8xXzYzNzciIGNsYXNzPSJhbmNob3IiPjwvYT48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY2VsZGFfdGlwb19maWxhXzEiIGNvbHNwYW49IjIiPjxkaXYgY2xhc3M9ImNsYXNlX2NhcGFfdW5pZGFkX3Zpc3VhbGl6YWNpb24iIHN0eWxlPSJtaW4taGVpZ2h0OiAyMjJweDsiPjxkaXYgaWQ9ImNhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNjM3NyI+DQo8ZGl2IGlkPSJjYXBhX0VzcGVyYW5kb2NlbGRhNjM3NyIgY2xhc3M9ImxvYWQtY29udGFpbmVyIGxvYWRlcmNlbGRhNjM3NyI+PC9kaXY+DQo8L2Rpdj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQogICAgICAgIC5saW5lY2VsZGE2Mzc3IHsNCiAgICAgICAgICAgIGZpbGw6IG5vbmU7DQogICAgICAgICAgICBzdHJva2U6ICNGRjZFMkI7DQogICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI7DQogICAgICAgIH0NCiAgICAgICAgLmxvYWRlcmNlbGRhNjM3NywNCiAgICAgICAgLmxvYWRlcmNlbGRhNjM3NzphZnRlciB7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICB3aWR0aDogMTMwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDEzMHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2FkZXJjZWxkYTYzNzcgew0KICAgICAgICAgICAgbWFyZ2luOiA0NnB4IDQyMHB4Ow0KICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRleHQtaW5kZW50OiAtOTk5OWVtOw0KICAgICAgICAgICAgYm9yZGVyLXRvcDogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1yaWdodDogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDEuMWVtIHNvbGlkICNGRjZFMkI7DQogICAgICAgICAgICBib3JkZXItbGVmdDogMS4xZW0gc29saWQgI0ZGRTlERjsNCiAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOw0KICAgICAgICAgICAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiBsb2FkOCAxLjFzIGluZmluaXRlIGxpbmVhcjsNCiAgICAgICAgICAgIGFuaW1hdGlvbjogbG9hZDggMS4xcyBpbmZpbml0ZSBsaW5lYXI7DQogICAgICAgIH0NCjwvc3R5bGU+DQo8c2NyaXB0Pg0KZDMuY3N2KCJodHRwOi8vd3d3LnBvcnRhbGVzdGFkaXN0aWNvLmNvbS9zZXJ2aWNpb19vYnRlbmNpb25fZGF0b3NfdmlzdWFsaXphY2lvbmVzLmFzbXgvT2J0ZW5lcl9EYXRvcz9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZwSWRfUGFnaW5hX0FjdGl2YT0xMDAwMSZwSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NjM3NyZwSWRfVGVycml0b3Jpbz0wMDsmcElkX1RlcnJpdG9yaW9fUGFkcmU9JnBJZGlvbWE9MSZwSWRfcmVnaW9uPWVzLWVzIikudGhlbigNCiAgICBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICB2YXIgbGluZWFfZ3JhZmljbzsNCiAgICAgICAgdmFyIHN2ZzsNCiAgICAgICAgdmFyIHNlcmllc0xpbmVhczsNCiAgICAgICAgdmFyIGxpbmVhQ2VybzsNCiAgICAgICAgdmFyIGxpbmVhc19zZXJpZXM7DQogICAgICAgIHZhciBuRWxlbWVudG9zUG9yU2VyaWU7DQogICAgICAgIHZhciBwdW50b3NBaXNsYWRvczsNCiAgICAgICAgdmFyIGxpbmVhc1ZlcnRIb3JSYXRvbjsNCiAgICAgICAgdmFyIHJhdG9uUG9yTGluZWE7DQogICAgICAgIHZhciBlamVYOw0KICAgICAgICB2YXIgZWplWTsNCiAgICAgICAgdmFyIGNEaW1lbnNpb25FeHQgPSAwDQogICAgICAgIHZhciB2YWxvck1pbmltb0RhdG9zID0gMDsNCiAgICAgICAgdmFyIHZhbG9yTWF4aW1vRGF0b3MgPSAwOw0KICAgICAgICB2YXIgZmVjaGFNYXhpbW87DQogICAgICAgIHZhciBmZWNoYU1pbmltbzsNCiAgICAgICAgdmFyIGNhbGN1bG9fbWF4bWluOw0KICAgICAgICB2YXIgbWFyZ2VuSXpxdWllcmRvID0gMDsNCiAgICAgICAgdmFyIG1hcmdlbkRlcmVjaG8gPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuU3VwZXJpb3IgPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuSW5mZXJpb3IgPSAwOw0KICAgICAgICB2YXIgbkNvcnRlcyA9IDA7DQogICAgICAgIHZhciBuUHVudG9zRWplWCA9IDA7DQogICAgICAgIHZhciBwYXJzZURhdGUgPSBkMy50aW1lUGFyc2UoIiVZLyVtLyVkIik7DQogICAgICAgIHZhciBtYXJnaW47DQogICAgICAgIHZhciB3aWR0aDsNCiAgICAgICAgdmFyIGhlaWdodDsNCiAgICAgICAgdmFyIGNvbG9yOw0KICAgICAgICB2YXIgY2F0ZWdvcnk7DQogICAgICAgIHZhciBlbGVtZW50X2NhcGFfZXNwZXJhbmRvOw0KICAgICAgIHZhciBhbmNob05vZG9zOw0KICAgICAgIHZhciBzdmdMZXllbmRhSG9yaXpvbnRhbDsNCiAgICAgICB2YXIgc3ZnTGVnZW5kOw0KICAgICAgIHZhciBsZWdlbmQ7DQogICAgICAgIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FwYV9Fc3BlcmFuZG9jZWxkYTYzNzciKTsNCiAgICAgICAgZWxlbWVudF9jYXBhX2VzcGVyYW5kby5jbGFzc0xpc3QucmVtb3ZlKCJsb2FkZXJjZWxkYTYzNzciKTsNCiAgICAgICAgY2F0ZWdvcnkgPSBkMy5rZXlzKGRhdGFbMF0pLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoa2V5ICE9PSAiYW5pb19wZXJpb2RvIiAmJiBrZXkgIT09ICJmZWNoYV9wZXJpb2RvX3NlcmllIiAmJiBrZXkgIT09ICJub21icmVfcGVyaW9kbyIgJiYga2V5ICE9PSAicGVyaW9kbyIgJiYga2V5ICE9PSAiZXRpcXVldGFwZXJpb2RvIik7IH0pOw0KICAgICAgICBjb2xvciA9ICBkMy5zY2FsZU9yZGluYWwoQ2FsY3VsYXJHcmFkaWVudGVDb2xvcmVzX0dyYWZpY29Fdm9sdWNpb25MaW5lYXMyKCcjRkZFOURGJywgJyNGRjZFMkInLCBjYXRlZ29yeS5sZW5ndGgpKTsNCiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICBkLmZlY2hhX3BlcmlvZG9fc2VyaWUgPSBwYXJzZURhdGUoZC5mZWNoYV9wZXJpb2RvX3NlcmllKTsNCiAgICAgICAgICAgIG5Db3J0ZXMrKzsNCiAgICAgICAgICAgIG5QdW50b3NFamVYKys7DQogICAgICAgIH0pOw0KICAgICAgICBpZiAobkNvcnRlcyA+IDcpew0KICAgICAgICAgICAgbkNvcnRlcyA9IDc7DQogICAgICAgIH0NCiAgICAgICAgLy8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgY29sb3IuZG9tYWluKGQzLmtleXMoZGF0YVswXSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIChrZXkgIT09ICJhbmlvX3BlcmlvZG8iICYmIGtleSAhPT0gImZlY2hhX3BlcmlvZG9fc2VyaWUiICYmIGtleSAhPT0gIm5vbWJyZV9wZXJpb2RvIiAmJiBrZXkgIT09ICJwZXJpb2RvIiAmJiBrZXkgIT09ICJldGlxdWV0YXBlcmlvZG8iKTsgfSkpOw0KICAgICAgICBjYWxjdWxvX21heG1pbiA9IGNvbG9yLmRvbWFpbigpLm1hcChmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLA0KICAgICAgICAgICAgICAgIHZhbHVlczogZGF0YS5tYXAoZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYW5pb19wZXJpb2RvOiBkLmFuaW9fcGVyaW9kbywgZmVjaGE6IGQuZmVjaGFfcGVyaW9kb19zZXJpZSwgbm9tYnJlX3BlcmlvZG86IGQubm9tYnJlX3BlcmlvZG8sIHZhbG9yX3NlcmllOiArZFtuYW1lXSB9Ow0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9Ow0KICAgICAgICB9KTsNCiAgICAgICAgdmFsb3JNYXhpbW9EYXRvcyA9IENhbGN1bGFyTWF4aW1vRGF0b3MoY2FsY3Vsb19tYXhtaW4sIGZhbHNlKQ0KICAgICAgICB2YWxvck1pbmltb0RhdG9zID0gQ2FsY3VsYXJNaW5pbW9EYXRvcyhjYWxjdWxvX21heG1pbiwgZmFsc2UsIHRydWUpOw0KICAgICAgICBtYXJnZW5JenF1aWVyZG8gPSBDYWxjdWxhckFuY2hvTWFyZ2VuSXpxdWllcmRvX0dyYWZpY29MaW5lYXMoZm9ybWF0KCIjLiMjMCwiLHZhbG9yTWF4aW1vRGF0b3MpLCBmb3JtYXQoIiMuIyMwLCIsdmFsb3JNaW5pbW9EYXRvcyksIDk2OSk7DQogICAgICAgIG1hcmdlbkRlcmVjaG8gPSBDYWxjdWxhckFuY2hvTWFyZ2VuRGVyZWNob19HcmFmaWNvTGluZWFzKGNhdGVnb3J5LCA5NjkpOw0KICAgICAgICBpZiAoY2F0ZWdvcnkubGVuZ3RoID4gMSAmJiA5NjkgPiAyMjIpIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDQwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSAyMDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChjYXRlZ29yeS5sZW5ndGggPT0gMSAmJiA5NjkgPiAyMjIpIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5EZXJlY2hvID0gMzAgDQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDQwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSAyMDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIA0KICAgICAgICB7DQogICAgICAgICAgICBtYXJnZW5EZXJlY2hvID0gMzAgDQogICAgICAgICAgICBtYXJnZW5TdXBlcmlvciA9IDUwOw0KICAgICAgICAgICAgbWFyZ2VuSW5mZXJpb3IgPSA1MDsNCiAgICAgICAgfQ0KICAgICAgICBmZWNoYU1heGltbyA9IGQzLm1heChjYWxjdWxvX21heG1pbiwgZnVuY3Rpb24gKHNlcmllKSB7DQogICAgICAgICAgICByZXR1cm4gZDMubWF4KHNlcmllLnZhbHVlcywgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC5mZWNoYTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgICAgZmVjaGFNaW5pbW8gPSBkMy5taW4oY2FsY3Vsb19tYXhtaW4sIGZ1bmN0aW9uIChzZXJpZSkgew0KICAgICAgICAgICAgcmV0dXJuIGQzLm1pbihzZXJpZS52YWx1ZXMsIGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGQuZmVjaGE7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICAgIG1hcmdpbiA9IHsgdG9wOiBtYXJnZW5TdXBlcmlvciwgcmlnaHQ6IG1hcmdlbkRlcmVjaG8sIGJvdHRvbTogbWFyZ2VuSW5mZXJpb3IsIGxlZnQ6IG1hcmdlbkl6cXVpZXJkbyB9Ow0KICAgICAgICB3aWR0aCA9IDk2OSAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0Ow0KICAgICAgICBoZWlnaHQgPSAyMjIgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTsNCiAgICAgICAgZWplWCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pOw0KICAgICAgICBlamVZID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSk7DQogICAgICAgIGxpbmVhX2dyYWZpY28gPSBkMy5saW5lKCkNCiAgICAgICAgICAgIC54KGZ1bmN0aW9uIChkKSB7IHJldHVybiBlamVYKGQuZmVjaGEpOyB9KQ0KICAgICAgICAgICAgLnkoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVkoZC52YWxvcl9zZXJpZSk7IH0pDQogICAgICAgICAgICAuZGVmaW5lZChmdW5jdGlvbiAoZCkgeyByZXR1cm4gIWlzTmFOKGQudmFsb3Jfc2VyaWUpOyB9KQ0KICAgICAgICAgICAgOw0KICAgICAgICAgICAgICAgIC8vIDEuQWRkIHRoZSBTVkcgVG8gdGhlIHBhZ2UgQW5kIGVtcGxveSAjMg0KICAgICAgICBzdmcgPSBkMy5zZWxlY3QoIiNjYXBhX0dyYWZpY29fRXZvbHVjaW9uX0xpbmVhc19Bc2luY3Jvbm9jZWxkYTYzNzciKS5hcHBlbmQoInN2ZyIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnY2VsZGE2Mzc3JykNCiAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIDk2OSkNCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCAyMjIpDQogICAgICAgICAgICAuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBtYXJnaW4ubGVmdCArICIsICIgKyBtYXJnaW4udG9wICsgIikiKTsNCiAgICAgICAgc2VyaWVzTGluZWFzID0gY29sb3IuZG9tYWluKCkubWFwKGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsDQogICAgICAgICAgICAgICAgdmFsdWVzOiBkYXRhLm1hcChmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBhbmlvX3BlcmlvZG86IGQuYW5pb19wZXJpb2RvLCBldGlxdWV0YXBlcmlvZG86IGQuZXRpcXVldGFwZXJpb2RvLCBmZWNoYTogZC5mZWNoYV9wZXJpb2RvX3NlcmllLCBub21icmVfcGVyaW9kbzogZC5ub21icmVfcGVyaW9kbywgdmFsb3Jfc2VyaWU6ICtkW25hbWVdIH07DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH07DQogICAgICAgIH0pOw0KICAgICAgICBuRWxlbWVudG9zUG9yU2VyaWUgPSBzZXJpZXNMaW5lYXNbMF0udmFsdWVzLmxlbmd0aCAtIDE7DQogICAgICAgIGVqZVguZG9tYWluKFtmZWNoYU1pbmltbywgZmVjaGFNYXhpbW9dKTsNCiAgICAgICAgZWplWS5kb21haW4oW3ZhbG9yTWluaW1vRGF0b3MsIHZhbG9yTWF4aW1vRGF0b3NdKTsNCiAgICAgICAgICAgICAgICAvLyBMZXllbmRhLCBlamUgZGUgbGFzIFgsIHB1bnRvcyB5IGxleWVuZGEgZGUgZXN0b3MgcHVudG9zOg0KICAgICAgICBzdmcuYXBwZW5kKCJnIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJmdWVudGVfZ2VuZXJpY2EiKQ0KICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMCwiICsgaGVpZ2h0ICsgIikiKQ0KICAgICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSgpLnNjYWxlKGVqZVgpLnRpY2tTaXplKC1oZWlnaHQpLnRpY2tzKG5Db3J0ZXMpKQ0KICAgICAgICAgICAgLmNhbGwoDQogICAgICAgICAgICAgICAgZyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJ0ZXh0IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCAibWlkZGxlIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgIjUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJsaW5lIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMC43KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjMpDQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0KCIuZG9tYWluIikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnI0E5QTlBOScpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgMS41KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAwLjUpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKQ0KICAgICAgICA7DQogICAgICAgIHN2Zy5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImZ1ZW50ZV9nZW5lcmljYSIpDQogICAgICAgICAgICAuY2FsbChkMy5heGlzTGVmdChlamVZKS50aWNrcyg0KS50aWNrU2l6ZSgtd2lkdGgpKQ0KICAgICAgICAgICAgLmNhbGwoDQogICAgICAgICAgICAgICAgZyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGcuc2VsZWN0QWxsKCJ0ZXh0IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ4IiwgLTMpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoImxpbmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAwLjcpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuMykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3QoIi5kb21haW4iKS5yZW1vdmUoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICkNCiAgICAgICAgOw0KICAgICAgICBzdmcuc2VsZWN0QWxsKCJ0ZXh0IikuYXR0cignZmlsbCcsICcjQTlBOUE5Jyk7DQogICAgICAgIGlmIChjYXRlZ29yeS5sZW5ndGggPiAxICkgDQogICAgICAgIHsNCiAgICAgICAgICAgIHN2Z0xlZ2VuZCA9IHN2Zy5hcHBlbmQoJ2cnKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdnTGVnZW5kJykNCiAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgKHdpZHRoICsgMjApICsgIiwiICsgMCArICIpIik7DQogICAgICAgICAgICBsZWdlbmQgPSBzdmdMZWdlbmQuc2VsZWN0QWxsKCcubGVnZW5kJykNCiAgICAgICAgICAgICAgICAuZGF0YShjYXRlZ29yeSkNCiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsZWdlbmQiKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCwgaSkgeyByZXR1cm4gInRyYW5zbGF0ZSgwLCIgKyBpICogMjAgKyAiKSIgfSk7DQogICAgICAgICAgICBsZWdlbmQuYXBwZW5kKCdyZWN0JykNCiAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGNvbG9yKGQpKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgMCkNCiAgICAgICAgICAgICAgICAuYXR0cigneScsIDApDQogICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgMTApDQogICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDEwKTsNCiAgICAgICAgICAgIGxlZ2VuZC5hcHBlbmQoInRleHQiKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsZWdlbmQtdGV4dCIpDQogICAgICAgICAgICAgICAgLmF0dHIoIngiLCAxNSkNCiAgICAgICAgICAgICAgICAuYXR0cigieSIsIDEwKQ0KICAgICAgICAgICAgICAgIC50ZXh0KGQgPT4gZCkNCiAgICAgICAgfQ0KICAgICAgICBpZiAodmFsb3JNYXhpbW9EYXRvcyA+IDAgJiYgdmFsb3JNaW5pbW9EYXRvcyA8IDAgKSANCiAgICAgICAgew0KICAgICAgICAgICAgbGluZWFDZXJvID0gc3ZnLmFwcGVuZCgibGluZSIpDQogICAgICAgICAgICAuYXR0cignaWQnLCAnbGluZWFDZXJvJykNCiAgICAgICAgICAgIC5hdHRyKCJ4MSIsIDApDQogICAgICAgICAgICAuYXR0cigieTEiLCBlamVZKDApKQ0KICAgICAgICAgICAgLmF0dHIoIngyIiwgd2lkdGgpDQogICAgICAgICAgICAuYXR0cigieTIiLCBlamVZKDApKQ0KICAgICAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsICIxcHgiKQ0KICAgICAgICAgICAgLmF0dHIoInN0cm9rZSIsICIjQTlBOUE5IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgMyIpKQ0KICAgICAgICAgICAgOw0KICAgICAgICB9DQogICAgICAgIGxpbmVhc19zZXJpZXMgPSBzdmcuc2VsZWN0QWxsKCIubGluZWFzX3NlcmllcyIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpDQogICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoImciKQ0KICAgICAgICAgICAgOw0KICAgICAgICBsaW5lYXNfc2VyaWVzLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibGluZSBsaW5lY2VsZGE2Mzc3IikNCiAgICAgICAgICAgIC5hdHRyKCJkIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGxpbmVhX2dyYWZpY28oZC52YWx1ZXMpOyB9KQ0KICAgICAgICAgICAgLmF0dHIoImRhdGEtbGVnZW5kIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQubmFtZSB9KQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gY29sb3IoZC5uYW1lKTsgfSk7DQogICAgICAgIHB1bnRvc0Fpc2xhZG9zID0gc3ZnLnNlbGVjdEFsbCgiLmRvdCIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2NpcmNsZS1ncm91cCcpDQogICAgICAgICAgICAuc3R5bGUoImZpbGwiLCBmdW5jdGlvbiAoZCwgaTEpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IoZC5uYW1lKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICA7DQogICAgICAgIHB1bnRvc0Fpc2xhZG9zLnNlbGVjdEFsbCgiLmRvdCIpDQogICAgICAgICAgICAuZGF0YShkID0+IGQudmFsdWVzKS5lbnRlcigpDQogICAgICAgICAgICAuYXBwZW5kKCJjaXJjbGUiKSAvLyBVc2VzIHRoZSBlbnRlcigpLmFwcGVuZCgpIG1ldGhvZA0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImRvdCIpIC8vIEFzc2lnbiBhIGNsYXNzIGZvciBzdHlsaW5nDQogICAgICAgICAgICAuYXR0cigiY3giLCBmdW5jdGlvbiAoZCwgaSkgeyByZXR1cm4gZWplWChkLmZlY2hhKSB9KQ0KICAgICAgICAgICAgLmF0dHIoImN5IiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVkoZC52YWxvcl9zZXJpZSkgfSkNCiAgICAgICAgICAgIC5hdHRyKCJyIiwgMykNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsIGZ1bmN0aW9uIChkLCBpKSB7DQogICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBjRGltZW5zaW9uRXh0Kys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChkLnZhbG9yX3NlcmllID09ICInbnVsbCciIHx8IGlzTmFOKGQudmFsb3Jfc2VyaWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDAgJiYgaSA8IG5FbGVtZW50b3NQb3JTZXJpZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpIC0gMV0udmFsb3Jfc2VyaWUpKSAmJiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjEiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSArIDFdLnZhbG9yX3NlcmllKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjEiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBuRWxlbWVudG9zUG9yU2VyaWUgJiYgKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICA7DQogICAgICAgIHRyYW5zaXRpb24oZDMuc2VsZWN0QWxsKCIubGluZWNlbGRhNjM3NyIpKTsNCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uID0gc3ZnLmFwcGVuZCgiZyIpOyANCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtbGluZWNlbGRhNjM3NyIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsICIjMDAwMDAwIikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS1kYXNoYXJyYXkiLCAoIjUsIDUiKSkNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgIGxpbmVhc1ZlcnRIb3JSYXRvbi5hcHBlbmQoInBhdGgiKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNjM3NyIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsICIjMDAwMDAwIikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZS1kYXNoYXJyYXkiLCAoIjUsIDUiKSkNCiAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgIHJhdG9uUG9yTGluZWEgPSBsaW5lYXNWZXJ0SG9yUmF0b24uc2VsZWN0QWxsKCIubW91c2UtcGVyLWxpbmVjZWxkYTYzNzciKQ0KICAgICAgICAgICAgLmRhdGEoc2VyaWVzTGluZWFzKQ0KICAgICAgICAgICAgLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIm1vdXNlLXBlci1saW5lY2VsZGE2Mzc3Iik7DQogICAgICAgICAgICAvL1RhYnVsYWNpw7NuIGRlc2N1YWRyYWRhOg0KICAgICAgICAgICAgICAgIHJhdG9uUG9yTGluZWEuYXBwZW5kKCJjaXJjbGUiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigiciIsIDQpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcihkLm5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImZpbGwiLCAiI0ZGRkZGRiIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjNweCIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgcmF0b25Qb3JMaW5lYS5hcHBlbmQoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAibWlkZGxlIikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJmb250LXNpemUiLCAiMTZweCIpDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgidGV4dC1kZWNvcmF0aW9uIiwgInVuZGVybGluZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDEwLDMpIik7DQogICAgICAgICAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicmVjdCIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsICdyZWN0Y2VsZGE2Mzc3JykNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgd2lkdGgpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJmaWxsIiwgIm5vbmUiKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigicG9pbnRlci1ldmVudHMiLCAiYWxsIikNCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmVjZWxkYTYzNzciKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lLWhvcml6b250YWxjZWxkYTYzNzciKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNjM3NyBjaXJjbGUiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNjM3NyB0ZXh0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzIikuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzX0xleWVuZGFZIikuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmVjZWxkYTYzNzciKS5zdHlsZSgib3BhY2l0eSIsICIwLjY1Iik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoIi5tb3VzZS1saW5lLWhvcml6b250YWxjZWxkYTYzNzciKS5zdHlsZSgib3BhY2l0eSIsICIwLjY1Iik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNjM3NyBjaXJjbGUiKS5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNjM3NyB0ZXh0Iikuc3R5bGUoIm9wYWNpdHkiLCAiMSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzIikuc3R5bGUoJ2Rpc3BsYXknLCAnYmxvY2snKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiI2dsb2JvX0dyYWZpY29fTUxpbmVhc19MZXllbmRhWSIpLnN0eWxlKCdkaXNwbGF5JywgJ2Jsb2NrJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyTGluZWFzUHVudG9zKCdjZWxkYTYzNzcnLCBkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIGhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJDb250ZW5pZG9HbG9ibyhkMy5tb3VzZSh0aGlzKSwgc2VyaWVzTGluZWFzLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgbWFyZ2luLCBjb2xvciwgJyMuIyMwLCcpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2Vtb3ZlIiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckxpbmVhc1B1bnRvcygnY2VsZGE2Mzc3JywgZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBoZWlnaHQpDQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyQ29udGVuaWRvR2xvYm8oZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIG1hcmdpbiwgY29sb3IsICcjLiMjMCwnKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgKTsNCjwvc2NyaXB0Pg0KPC9kaXY+PGRpdiBDbGFzcz0iem9uYV9tYXNfaW5mbyI+PGRpdiBpZD0iY2NjIiBjbGFzcz0iYm94X2xpbXBpbyBib3giPjxpbWcgaWQ9ImFhYWEiIGNsYXNzPSJpY29ub19kZXNjYXJnYSIgc3JjPSJpbWFnZW5lcy9pY29ub19kZXNjYXJnYS5wbmciIGFsdD0iIiB0aXRsZT0iIiA+PGRpdiBpZD0iY2FwYV9vcGNpb25lc19kZXNjYXJnYXMiIGNsYXNzPSJvdmVybGF5IG1lbnVfb3BjaW9uZXMgcmVwcmVzZW50YWNpb25fdmlzdWFsaXphY2lvbiBzb21icmFfcGVyaW1ldHJhbCIgPjxoND5EZXNjYXJnYXM6IDwvaDQ+PHVsIGlkPSJtZW51MSIgPjxsaSBpZD0ib3B0XzEuMyIgb25jbGljaz0ic2F2ZVN2Z0FzUG5nKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZWxkYTYzNzcnKSwgJ07Dum1lcm8gZGUgZGVmdW5jaW9uZXMucG5nJywge2xlZnQ6IC0yMCwgd2lkdGg6IDEwMDQsIGJhY2tncm91bmRDb2xvcjogJyNGRkZGRkYnfSk7Ij48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19wbmcucG5nIiBjbGFzcz0iaWNvbm9zX21lbnVfb3BjaW9uZXMiID5JbWFnZW4gUE5HPC9saT48YSBocmVmPSIjIiBpZD0iZGVzY2FyZ2E2Mzc3Ij48bGkgPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX3N2Zy5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkltYWdlbiBTVkc8L2xpPjwvYT48c2NyaXB0PmQzLnNlbGVjdCgiI2Rlc2NhcmdhNjM3NyIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCl7ZDMuc2VsZWN0KHRoaXMpLmF0dHIoImhyZWYiLCAnZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LCcgKyBidG9hKCc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJJU08tODg1OS0xIiA/PlxyXG48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmF0dHJpYj0iaHR0cDovL3d3dy5jYXJ0by5uZXQvYXR0cmliIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxuczphMz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZVNWR1ZpZXdlckV4dGVuc2lvbnMvMy4wLyIgYTM6c2NyaXB0SW1wbGVtZW50YXRpb249IkFkb2JlIiBzdHlsZT0ic2hhcGUtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbjsgdGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5OyBpbWFnZS1yZW5kZXJpbmc6b3B0aW1pemVRdWFsaXR5OyBmaWxsLXJ1bGU6ZXZlbm9kZDsgY2xpcC1ydWxlOmV2ZW5vZGQ7IiB3aWR0aD0iOTY5IiBoZWlnaHQ9IjQ0NCI+PHN0eWxlPiB0ZXh0e2ZvbnQtc2l6ZTogMTJweDtjb2xvcjogI0E5QTlBOTtmb250LWZhbWlseTogQXJpYWw7ZmlsbDogI0E5QTlBOTt9IC5saW5lIHtmaWxsOiBub25lO308L3N0eWxlPicgKyBkMy5zZWxlY3QoIiNjZWxkYTYzNzciKS5odG1sKCkgKyAnPC9zdmc+JyAgKSkuYXR0cigiZG93bmxvYWQiLCAiTsO6bWVybyBkZSBkZWZ1bmNpb25lcy5zdmciKX0pPC9zY3JpcHQ+PGEgaHJlZj0icHJvY2Vzb19kZXNjYXJnYV9leGNlbF9jc3YuYXNweD9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NjM3NyZJZF9UZXJyaXRvcmlvPTAwJklkX1RlcnJpdG9yaW9fUGFkcmU9Q0NBMDImaWRpb21hPTEmVGlwb19GaWNoZXJvX0dlbmVyYWRvPWV4Y2VsIj48bGkgaWQ9Im9wdF8xLjciPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX2V4Y2VsLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+RGF0b3MgRXhjZWw8L2xpPjwvYT48YSBocmVmPSJwcm9jZXNvX2Rlc2NhcmdhX2V4Y2VsX2Nzdi5hc3B4P3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJmlkcD0xMDAwMSZJZF9DZWxkYV9GaWxhX1BsYW50aWxsYT02Mzc3JklkX1RlcnJpdG9yaW89MDAmSWRfVGVycml0b3Jpb19QYWRyZT1DQ0EwMiZpZGlvbWE9MSZUaXBvX0ZpY2hlcm9fR2VuZXJhZG89Y3N2Ij48bGkgaWQ9Im9wdF8xLjgiPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX2Nzdi5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkRhdG9zIENTVjwvbGk+PC9hPjwvdWw+PC9kaXY+PC9kaXY+PGRpdiBpZD0iY2NjIiBjbGFzcz0iYm94X2xpbXBpbyBib3giPjxpbWcgY2xhc3M9Imljb25vX2Rlc2NhcmdhIiBzcmM9ImltYWdlbmVzL2ljb25vX21hcy5wbmciIGFsdD0iIiB0aXRsZT0iIiA+PGRpdiBpZD0iY2FwYV9vcGNpb25lc19tYXNvcGNpb25lcyIgY2xhc3M9Im92ZXJsYXkgbWVudV9vcGNpb25lcyByZXByZXNlbnRhY2lvbl92aXN1YWxpemFjaW9uIHNvbWJyYV9wZXJpbWV0cmFsIiA+PGg0Pk3DoXMgb3BjaW9uZXM6PC9oND48dWwgaWQ9Im1lbnUxIiA+PGEgaHJlZj0iI2V4MSIgaWQ9IkRBVE9TJjAwJjYzNzcmQ0NBMDIiIHJlbD0ibW9kYWw6b3BlbiI+PGxpIGlkPSJvcHRfMS4zIj48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19ncmlkLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+VmVyIGRhdG9zPC9saT48L2E+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IENsYXNzPSJ0aXR1bG9fY2VsZGEiPk7Dum1lcm8gZGUgZGVmdW5jaW9uZXM8L2Rpdj48L3RkPjwvdHI+PHRyPjx0ZCBDbGFzcz0ic2VwYXJhZG9yIj48YnI+PC90ZD48L3RyPjx0ciBjbGFzcz0iYW5jbGEiPjx0ZD48YSBpZD0iSW5kaWNlX05pdmVsXzFfMzk2MiIgY2xhc3M9ImFuY2hvciI+PC9hPjwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPSJjZWxkYV9zaW5fZXN0aWxvcyIgY29sc3Bhbj0iMiI+PGRpdiBjbGFzcz0iY2xhc2VfY2FwYV91bmlkYWRfdmlzdWFsaXphY2lvbiIgc3R5bGU9Im1pbi1oZWlnaHQ6IDE0MHB4OyI+PHRhYmxlIGNsYXNzPSJUYWJsYXNfZGF0b3MiPjx0ciBjbGFzcz0iVGFibGFzX2RhdG9zX2NhYmVjZXJhIj48dGQgY2xhc3M9ImNvbHVtbmFfaXpxdWllcmRhIj48aDQgY2xhc3M9Img0X2dyYW5kZSI+VmFyaWFjacOzbiBkZSBsYSBwb2JsYWNpw7NuIHJlc3BlY3RvIGFsIGHDsW8gMjAwMDwvaDQ+PC90ZD48dGQgY2xhc3M9ImNvbHVtbmFfZGVyZWNoYSI+PGg0IGNsYXNzPSJoNF9tdXlfZ3JhbmRlIG5lZ2F0aXZvc19pZSI+MTYsMSAlPC9oND48L3RkPjwvdHI+PHRyPjx0ZCBjb2xzcGFuPSIyIj48dGFibGUgY2xhc3M9IlN1YnRpdHVsb19pbmRpY2Fkb3IiPjx0cj48dGQgY2xhc3M9ImNvbHVtbmFfZXN0cmVjaGEiPlBlcmlvZG86PC90ZD48dGQgY2xhc3M9ImNvbHVtbmFfYW5jaGEgbmVncml0YSI+QW51YWwmbmJzcDsyMDE5PC90ZD48dGQgY2xhc3M9ImNvbHVtbmFfaXpxdWllcmRhIGNvbHVtbmFfZXN0cmVjaGEiPkNyZWNpbWllbnRvIGludGVyYW51YWw6PC90ZD48dGQgY2xhc3M9ImNvbHVtbmFfY2VudHJvIHRleHRvX211eV9ncmFuZGUgbmVnYXRpdm9zX2llIj40LDclPC90ZD48dGQgY2xhc3M9ImNvbHVtbmFfZGVyZWNoYSI+PGltZyBjbGFzcz0iaW1hZ2VuX3RlbmRlbmNpYSIgc3JjPSJodHRwOi8vd3d3LnBvcnRhbGVzdGFkaXN0aWNvLmNvbS9pbWFnZW5lcy9wYWxldGFzLzEwMDAxL2NyZWNpbWllbnRvX2FycmliYS5wbmciIGFsdD0iRXN0YWJpbGlkYWQiPjwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPSJjb2x1bW5hX2VzdHJlY2hhIj5GdWVudGU6PC90ZD48dGQgY29sc3Bhbj0iNCIgY2xhc3M9Im5lZ3JpdGEiPkVsYWJvcmFjacOzbiBwcm9waWEgY29uIGRhdG9zIGRlbCBJTkU8L3RkPjwvdHI+PC90YWJsZT48L3RkPjwvdHI+PHRyPjx0ZCBjb2xzcGFuPSIyIj48cCBjbGFzcz0idGV4dG9fY29udGVuaWRvIj5DcmVjaW1pZW50byBkZSBsYSBwb2JsYWNpw7NuIGRlc2RlIGVsIGHDsW8gMjAwMCwgZW4gdMOpcm1pbm9zIHBvcmNlbnR1YWxlcy48L3A+PC90ZD48L3RyPjwvdGFibGU+PC9kaXY+PC90ZD48L3RyPjx0cj48dGQgQ2xhc3M9InNlcGFyYWRvciI+PGJyPjwvdGQ+PC90cj48dHIgY2xhc3M9ImFuY2xhIj48dGQ+PGEgaWQ9IkluZGljZV9OaXZlbF8xXzU4NjkiIGNsYXNzPSJhbmNob3IiPjwvYT48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0iY2VsZGFfdGlwb19maWxhXzEiIGNvbHNwYW49IjIiPjxkaXYgY2xhc3M9ImNsYXNlX2NhcGFfdW5pZGFkX3Zpc3VhbGl6YWNpb24iIHN0eWxlPSJtaW4taGVpZ2h0OiAyMjJweDsiPjxkaXYgaWQ9ImNhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNTg2OSI+DQo8ZGl2IGlkPSJjYXBhX0VzcGVyYW5kb2NlbGRhNTg2OSIgY2xhc3M9ImxvYWQtY29udGFpbmVyIGxvYWRlcmNlbGRhNTg2OSI+PC9kaXY+DQo8L2Rpdj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQogICAgICAgIC5saW5lY2VsZGE1ODY5IHsNCiAgICAgICAgICAgIGZpbGw6IG5vbmU7DQogICAgICAgICAgICBzdHJva2U6ICNGRjZFMkI7DQogICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI7DQogICAgICAgIH0NCiAgICAgICAgLmxvYWRlcmNlbGRhNTg2OSwNCiAgICAgICAgLmxvYWRlcmNlbGRhNTg2OTphZnRlciB7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICB3aWR0aDogMTMwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDEzMHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2FkZXJjZWxkYTU4Njkgew0KICAgICAgICAgICAgbWFyZ2luOiA0NnB4IDQyMHB4Ow0KICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRleHQtaW5kZW50OiAtOTk5OWVtOw0KICAgICAgICAgICAgYm9yZGVyLXRvcDogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1yaWdodDogMS4xZW0gc29saWQgI0ZGNkUyQjsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDEuMWVtIHNvbGlkICNGRjZFMkI7DQogICAgICAgICAgICBib3JkZXItbGVmdDogMS4xZW0gc29saWQgI0ZGRTlERjsNCiAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOw0KICAgICAgICAgICAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsNCiAgICAgICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiBsb2FkOCAxLjFzIGluZmluaXRlIGxpbmVhcjsNCiAgICAgICAgICAgIGFuaW1hdGlvbjogbG9hZDggMS4xcyBpbmZpbml0ZSBsaW5lYXI7DQogICAgICAgIH0NCjwvc3R5bGU+DQo8c2NyaXB0Pg0KZDMuY3N2KCJodHRwOi8vd3d3LnBvcnRhbGVzdGFkaXN0aWNvLmNvbS9zZXJ2aWNpb19vYnRlbmNpb25fZGF0b3NfdmlzdWFsaXphY2lvbmVzLmFzbXgvT2J0ZW5lcl9EYXRvcz9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZwSWRfUGFnaW5hX0FjdGl2YT0xMDAwMSZwSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NTg2OSZwSWRfVGVycml0b3Jpbz0wMDsmcElkX1RlcnJpdG9yaW9fUGFkcmU9JnBJZGlvbWE9MSZwSWRfcmVnaW9uPWVzLWVzIikudGhlbigNCiAgICBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICB2YXIgbGluZWFfZ3JhZmljbzsNCiAgICAgICAgdmFyIHN2ZzsNCiAgICAgICAgdmFyIHNlcmllc0xpbmVhczsNCiAgICAgICAgdmFyIGxpbmVhQ2VybzsNCiAgICAgICAgdmFyIGxpbmVhc19zZXJpZXM7DQogICAgICAgIHZhciBuRWxlbWVudG9zUG9yU2VyaWU7DQogICAgICAgIHZhciBwdW50b3NBaXNsYWRvczsNCiAgICAgICAgdmFyIGxpbmVhc1ZlcnRIb3JSYXRvbjsNCiAgICAgICAgdmFyIHJhdG9uUG9yTGluZWE7DQogICAgICAgIHZhciBlamVYOw0KICAgICAgICB2YXIgZWplWTsNCiAgICAgICAgdmFyIGNEaW1lbnNpb25FeHQgPSAwDQogICAgICAgIHZhciB2YWxvck1pbmltb0RhdG9zID0gMDsNCiAgICAgICAgdmFyIHZhbG9yTWF4aW1vRGF0b3MgPSAwOw0KICAgICAgICB2YXIgZmVjaGFNYXhpbW87DQogICAgICAgIHZhciBmZWNoYU1pbmltbzsNCiAgICAgICAgdmFyIGNhbGN1bG9fbWF4bWluOw0KICAgICAgICB2YXIgbWFyZ2VuSXpxdWllcmRvID0gMDsNCiAgICAgICAgdmFyIG1hcmdlbkRlcmVjaG8gPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuU3VwZXJpb3IgPSAwOw0KICAgICAgICB2YXIgbWFyZ2VuSW5mZXJpb3IgPSAwOw0KICAgICAgICB2YXIgbkNvcnRlcyA9IDA7DQogICAgICAgIHZhciBuUHVudG9zRWplWCA9IDA7DQogICAgICAgIHZhciBwYXJzZURhdGUgPSBkMy50aW1lUGFyc2UoIiVZLyVtLyVkIik7DQogICAgICAgIHZhciBtYXJnaW47DQogICAgICAgIHZhciB3aWR0aDsNCiAgICAgICAgdmFyIGhlaWdodDsNCiAgICAgICAgdmFyIGNvbG9yOw0KICAgICAgICB2YXIgY2F0ZWdvcnk7DQogICAgICAgIHZhciBlbGVtZW50X2NhcGFfZXNwZXJhbmRvOw0KICAgICAgIHZhciBhbmNob05vZG9zOw0KICAgICAgIHZhciBzdmdMZXllbmRhSG9yaXpvbnRhbDsNCiAgICAgICB2YXIgc3ZnTGVnZW5kOw0KICAgICAgIHZhciBsZWdlbmQ7DQogICAgICAgIGVsZW1lbnRfY2FwYV9lc3BlcmFuZG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FwYV9Fc3BlcmFuZG9jZWxkYTU4NjkiKTsNCiAgICAgICAgZWxlbWVudF9jYXBhX2VzcGVyYW5kby5jbGFzc0xpc3QucmVtb3ZlKCJsb2FkZXJjZWxkYTU4NjkiKTsNCiAgICAgICAgY2F0ZWdvcnkgPSBkMy5rZXlzKGRhdGFbMF0pLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoa2V5ICE9PSAiYW5pb19wZXJpb2RvIiAmJiBrZXkgIT09ICJmZWNoYV9wZXJpb2RvX3NlcmllIiAmJiBrZXkgIT09ICJub21icmVfcGVyaW9kbyIgJiYga2V5ICE9PSAicGVyaW9kbyIgJiYga2V5ICE9PSAiZXRpcXVldGFwZXJpb2RvIik7IH0pOw0KICAgICAgICBjb2xvciA9ICBkMy5zY2FsZU9yZGluYWwoQ2FsY3VsYXJHcmFkaWVudGVDb2xvcmVzX0dyYWZpY29Fdm9sdWNpb25MaW5lYXMyKCcjRkZFOURGJywgJyNGRjZFMkInLCBjYXRlZ29yeS5sZW5ndGgpKTsNCiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICBkLmZlY2hhX3BlcmlvZG9fc2VyaWUgPSBwYXJzZURhdGUoZC5mZWNoYV9wZXJpb2RvX3NlcmllKTsNCiAgICAgICAgICAgIG5Db3J0ZXMrKzsNCiAgICAgICAgICAgIG5QdW50b3NFamVYKys7DQogICAgICAgIH0pOw0KICAgICAgICBpZiAobkNvcnRlcyA+IDcpew0KICAgICAgICAgICAgbkNvcnRlcyA9IDc7DQogICAgICAgIH0NCiAgICAgICAgLy8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgY29sb3IuZG9tYWluKGQzLmtleXMoZGF0YVswXSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIChrZXkgIT09ICJhbmlvX3BlcmlvZG8iICYmIGtleSAhPT0gImZlY2hhX3BlcmlvZG9fc2VyaWUiICYmIGtleSAhPT0gIm5vbWJyZV9wZXJpb2RvIiAmJiBrZXkgIT09ICJwZXJpb2RvIiAmJiBrZXkgIT09ICJldGlxdWV0YXBlcmlvZG8iKTsgfSkpOw0KICAgICAgICBjYWxjdWxvX21heG1pbiA9IGNvbG9yLmRvbWFpbigpLm1hcChmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLA0KICAgICAgICAgICAgICAgIHZhbHVlczogZGF0YS5tYXAoZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYW5pb19wZXJpb2RvOiBkLmFuaW9fcGVyaW9kbywgZmVjaGE6IGQuZmVjaGFfcGVyaW9kb19zZXJpZSwgbm9tYnJlX3BlcmlvZG86IGQubm9tYnJlX3BlcmlvZG8sIHZhbG9yX3NlcmllOiArZFtuYW1lXSB9Ow0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9Ow0KICAgICAgICB9KTsNCiAgICAgICAgdmFsb3JNYXhpbW9EYXRvcyA9IENhbGN1bGFyTWF4aW1vRGF0b3MoY2FsY3Vsb19tYXhtaW4sIGZhbHNlKQ0KICAgICAgICB2YWxvck1pbmltb0RhdG9zID0gQ2FsY3VsYXJNaW5pbW9EYXRvcyhjYWxjdWxvX21heG1pbiwgZmFsc2UsIHRydWUpOw0KICAgICAgICBtYXJnZW5JenF1aWVyZG8gPSBDYWxjdWxhckFuY2hvTWFyZ2VuSXpxdWllcmRvX0dyYWZpY29MaW5lYXMoZm9ybWF0KCIjLiMjMCwwIix2YWxvck1heGltb0RhdG9zKSwgZm9ybWF0KCIjLiMjMCwwIix2YWxvck1pbmltb0RhdG9zKSwgOTY5KTsNCiAgICAgICAgbWFyZ2VuRGVyZWNobyA9IENhbGN1bGFyQW5jaG9NYXJnZW5EZXJlY2hvX0dyYWZpY29MaW5lYXMoY2F0ZWdvcnksIDk2OSk7DQogICAgICAgIGlmIChjYXRlZ29yeS5sZW5ndGggPiAxICYmIDk2OSA+IDIyMikgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNDA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDIwOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGNhdGVnb3J5Lmxlbmd0aCA9PSAxICYmIDk2OSA+IDIyMikgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlbkRlcmVjaG8gPSAzMCANCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNDA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDIwOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgDQogICAgICAgIHsNCiAgICAgICAgICAgIG1hcmdlbkRlcmVjaG8gPSAzMCANCiAgICAgICAgICAgIG1hcmdlblN1cGVyaW9yID0gNTA7DQogICAgICAgICAgICBtYXJnZW5JbmZlcmlvciA9IDUwOw0KICAgICAgICB9DQogICAgICAgIGZlY2hhTWF4aW1vID0gZDMubWF4KGNhbGN1bG9fbWF4bWluLCBmdW5jdGlvbiAoc2VyaWUpIHsNCiAgICAgICAgICAgIHJldHVybiBkMy5tYXgoc2VyaWUudmFsdWVzLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBkLmZlY2hhOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgICBmZWNoYU1pbmltbyA9IGQzLm1pbihjYWxjdWxvX21heG1pbiwgZnVuY3Rpb24gKHNlcmllKSB7DQogICAgICAgICAgICByZXR1cm4gZDMubWluKHNlcmllLnZhbHVlcywgZnVuY3Rpb24gKGQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZC5mZWNoYTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgICAgbWFyZ2luID0geyB0b3A6IG1hcmdlblN1cGVyaW9yLCByaWdodDogbWFyZ2VuRGVyZWNobywgYm90dG9tOiBtYXJnZW5JbmZlcmlvciwgbGVmdDogbWFyZ2VuSXpxdWllcmRvIH07DQogICAgICAgIHdpZHRoID0gOTY5IC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQ7DQogICAgICAgIGhlaWdodCA9IDIyMiAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tOw0KICAgICAgICBlamVYID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSk7DQogICAgICAgIGVqZVkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKTsNCiAgICAgICAgbGluZWFfZ3JhZmljbyA9IGQzLmxpbmUoKQ0KICAgICAgICAgICAgLngoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGVqZVgoZC5mZWNoYSk7IH0pDQogICAgICAgICAgICAueShmdW5jdGlvbiAoZCkgeyByZXR1cm4gZWplWShkLnZhbG9yX3NlcmllKTsgfSkNCiAgICAgICAgICAgIC5kZWZpbmVkKGZ1bmN0aW9uIChkKSB7IHJldHVybiAhaXNOYU4oZC52YWxvcl9zZXJpZSk7IH0pDQogICAgICAgICAgICA7DQogICAgICAgICAgICAgICAgLy8gMS5BZGQgdGhlIFNWRyBUbyB0aGUgcGFnZSBBbmQgZW1wbG95ICMyDQogICAgICAgIHN2ZyA9IGQzLnNlbGVjdCgiI2NhcGFfR3JhZmljb19Fdm9sdWNpb25fTGluZWFzX0FzaW5jcm9ub2NlbGRhNTg2OSIpLmFwcGVuZCgic3ZnIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdjZWxkYTU4NjknKQ0KICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgOTY5KQ0KICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIDIyMikNCiAgICAgICAgICAgIC5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIG1hcmdpbi5sZWZ0ICsgIiwgIiArIG1hcmdpbi50b3AgKyAiKSIpOw0KICAgICAgICBzZXJpZXNMaW5lYXMgPSBjb2xvci5kb21haW4oKS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgbmFtZTogbmFtZSwNCiAgICAgICAgICAgICAgICB2YWx1ZXM6IGRhdGEubWFwKGZ1bmN0aW9uIChkKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGFuaW9fcGVyaW9kbzogZC5hbmlvX3BlcmlvZG8sIGV0aXF1ZXRhcGVyaW9kbzogZC5ldGlxdWV0YXBlcmlvZG8sIGZlY2hhOiBkLmZlY2hhX3BlcmlvZG9fc2VyaWUsIG5vbWJyZV9wZXJpb2RvOiBkLm5vbWJyZV9wZXJpb2RvLCB2YWxvcl9zZXJpZTogK2RbbmFtZV0gfTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSk7DQogICAgICAgIG5FbGVtZW50b3NQb3JTZXJpZSA9IHNlcmllc0xpbmVhc1swXS52YWx1ZXMubGVuZ3RoIC0gMTsNCiAgICAgICAgZWplWC5kb21haW4oW2ZlY2hhTWluaW1vLCBmZWNoYU1heGltb10pOw0KICAgICAgICBlamVZLmRvbWFpbihbdmFsb3JNaW5pbW9EYXRvcywgdmFsb3JNYXhpbW9EYXRvc10pOw0KICAgICAgICAgICAgICAgIC8vIExleWVuZGEsIGVqZSBkZSBsYXMgWCwgcHVudG9zIHkgbGV5ZW5kYSBkZSBlc3RvcyBwdW50b3M6DQogICAgICAgIHN2Zy5hcHBlbmQoImciKQ0KICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImZ1ZW50ZV9nZW5lcmljYSIpDQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCIgKyBoZWlnaHQgKyAiKSIpDQogICAgICAgICAgICAuY2FsbChkMy5heGlzQm90dG9tKCkuc2NhbGUoZWplWCkudGlja1NpemUoLWhlaWdodCkudGlja3MobkNvcnRlcykpDQogICAgICAgICAgICAuY2FsbCgNCiAgICAgICAgICAgICAgICBnID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoInkiLCAiNSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoImxpbmUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAwLjcpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuMykNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3QoIi5kb21haW4iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjQTlBOUE5JykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCAxLjUpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignb3BhY2l0eScsIDAuNSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICApDQogICAgICAgIDsNCiAgICAgICAgc3ZnLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiZnVlbnRlX2dlbmVyaWNhIikNCiAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNMZWZ0KGVqZVkpLnRpY2tzKDQpLnRpY2tTaXplKC13aWR0aCkpDQogICAgICAgICAgICAuY2FsbCgNCiAgICAgICAgICAgICAgICBnID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoInRleHQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoIngiLCAtMykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdEFsbCgibGluZSIpDQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJyNBOUE5QTknKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIDAuNykNCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC4zKQ0KICAgICAgICAgICAgICAgICAgICBnLnNlbGVjdCgiLmRvbWFpbiIpLnJlbW92ZSgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKQ0KICAgICAgICA7DQogICAgICAgIHN2Zy5zZWxlY3RBbGwoInRleHQiKS5hdHRyKCdmaWxsJywgJyNBOUE5QTknKTsNCiAgICAgICAgaWYgKGNhdGVnb3J5Lmxlbmd0aCA+IDEgKSANCiAgICAgICAgew0KICAgICAgICAgICAgc3ZnTGVnZW5kID0gc3ZnLmFwcGVuZCgnZycpDQogICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2dMZWdlbmQnKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyAod2lkdGggKyAyMCkgKyAiLCIgKyAwICsgIikiKTsNCiAgICAgICAgICAgIGxlZ2VuZCA9IHN2Z0xlZ2VuZC5zZWxlY3RBbGwoJy5sZWdlbmQnKQ0KICAgICAgICAgICAgICAgIC5kYXRhKGNhdGVnb3J5KQ0KICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZycpDQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxlZ2VuZCIpDQogICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiAidHJhbnNsYXRlKDAsIiArIGkgKiAyMCArICIpIiB9KTsNCiAgICAgICAgICAgIGxlZ2VuZC5hcHBlbmQoJ3JlY3QnKQ0KICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGQgPT4gY29sb3IoZCkpDQogICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAwKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgMCkNCiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCAxMCkNCiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTApOw0KICAgICAgICAgICAgbGVnZW5kLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxlZ2VuZC10ZXh0IikNCiAgICAgICAgICAgICAgICAuYXR0cigieCIsIDE1KQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgMTApDQogICAgICAgICAgICAgICAgLnRleHQoZCA9PiBkKQ0KICAgICAgICB9DQogICAgICAgIGlmICh2YWxvck1heGltb0RhdG9zID4gMCAmJiB2YWxvck1pbmltb0RhdG9zIDwgMCApIA0KICAgICAgICB7DQogICAgICAgICAgICBsaW5lYUNlcm8gPSBzdmcuYXBwZW5kKCJsaW5lIikNCiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdsaW5lYUNlcm8nKQ0KICAgICAgICAgICAgLmF0dHIoIngxIiwgMCkNCiAgICAgICAgICAgIC5hdHRyKCJ5MSIsIGVqZVkoMCkpDQogICAgICAgICAgICAuYXR0cigieDIiLCB3aWR0aCkNCiAgICAgICAgICAgIC5hdHRyKCJ5MiIsIGVqZVkoMCkpDQogICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgICAgICAuYXR0cigic3Ryb2tlIiwgIiNBOUE5QTkiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UtZGFzaGFycmF5IiwgKCI1LCAzIikpDQogICAgICAgICAgICA7DQogICAgICAgIH0NCiAgICAgICAgbGluZWFzX3NlcmllcyA9IHN2Zy5zZWxlY3RBbGwoIi5saW5lYXNfc2VyaWVzIikNCiAgICAgICAgICAgIC5kYXRhKHNlcmllc0xpbmVhcykNCiAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgiZyIpDQogICAgICAgICAgICA7DQogICAgICAgIGxpbmVhc19zZXJpZXMuYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJsaW5lIGxpbmVjZWxkYTU4NjkiKQ0KICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gbGluZWFfZ3JhZmljbyhkLnZhbHVlcyk7IH0pDQogICAgICAgICAgICAuYXR0cigiZGF0YS1sZWdlbmQiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lIH0pDQogICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBjb2xvcihkLm5hbWUpOyB9KTsNCiAgICAgICAgcHVudG9zQWlzbGFkb3MgPSBzdmcuc2VsZWN0QWxsKCIuZG90IikNCiAgICAgICAgICAgIC5kYXRhKHNlcmllc0xpbmVhcykuZW50ZXIoKQ0KICAgICAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY2lyY2xlLWdyb3VwJykNCiAgICAgICAgICAgIC5zdHlsZSgiZmlsbCIsIGZ1bmN0aW9uIChkLCBpMSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcihkLm5hbWUpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgcHVudG9zQWlzbGFkb3Muc2VsZWN0QWxsKCIuZG90IikNCiAgICAgICAgICAgIC5kYXRhKGQgPT4gZC52YWx1ZXMpLmVudGVyKCkNCiAgICAgICAgICAgIC5hcHBlbmQoImNpcmNsZSIpIC8vIFVzZXMgdGhlIGVudGVyKCkuYXBwZW5kKCkgbWV0aG9kDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiZG90IikgLy8gQXNzaWduIGEgY2xhc3MgZm9yIHN0eWxpbmcNCiAgICAgICAgICAgIC5hdHRyKCJjeCIsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiBlamVYKGQuZmVjaGEpIH0pDQogICAgICAgICAgICAuYXR0cigiY3kiLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZWplWShkLnZhbG9yX3NlcmllKSB9KQ0KICAgICAgICAgICAgLmF0dHIoInIiLCAzKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgZnVuY3Rpb24gKGQsIGkpIHsNCiAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNEaW1lbnNpb25FeHQrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGQudmFsb3Jfc2VyaWUgPT0gIidudWxsJyIgfHwgaXNOYU4oZC52YWxvcl9zZXJpZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIwIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCAmJiBpIDwgbkVsZW1lbnRvc1BvclNlcmllKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSA9PT0gJ251bGwnIHx8IGlzTmFOKHNlcmllc0xpbmVhc1tjRGltZW5zaW9uRXh0IC0gMV0udmFsdWVzW2kgLSAxXS52YWxvcl9zZXJpZSkpICYmIChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUgPT09ICdudWxsJyB8fCBpc05hTihzZXJpZXNMaW5lYXNbY0RpbWVuc2lvbkV4dCAtIDFdLnZhbHVlc1tpICsgMV0udmFsb3Jfc2VyaWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMSI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIjAiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IG5FbGVtZW50b3NQb3JTZXJpZSAmJiAoc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllID09PSAnbnVsbCcgfHwgaXNOYU4oc2VyaWVzTGluZWFzW2NEaW1lbnNpb25FeHQgLSAxXS52YWx1ZXNbaSAtIDFdLnZhbG9yX3NlcmllKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIxIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiMCI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIDsNCiAgICAgICAgdHJhbnNpdGlvbihkMy5zZWxlY3RBbGwoIi5saW5lY2VsZGE1ODY5IikpOw0KICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24gPSBzdmcuYXBwZW5kKCJnIik7IA0KICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24uYXBwZW5kKCJwYXRoIikNCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJtb3VzZS1saW5lY2VsZGE1ODY5IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgIiMwMDAwMDAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiMXB4IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgNSIpKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgbGluZWFzVmVydEhvclJhdG9uLmFwcGVuZCgicGF0aCIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtbGluZS1ob3Jpem9udGFsY2VsZGE1ODY5IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgIiMwMDAwMDAiKQ0KICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiMXB4IikNCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLWRhc2hhcnJheSIsICgiNSwgNSIpKQ0KICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgcmF0b25Qb3JMaW5lYSA9IGxpbmVhc1ZlcnRIb3JSYXRvbi5zZWxlY3RBbGwoIi5tb3VzZS1wZXItbGluZWNlbGRhNTg2OSIpDQogICAgICAgICAgICAuZGF0YShzZXJpZXNMaW5lYXMpDQogICAgICAgICAgICAuZW50ZXIoKQ0KICAgICAgICAgICAgLmFwcGVuZCgiZyIpDQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibW91c2UtcGVyLWxpbmVjZWxkYTU4NjkiKTsNCiAgICAgICAgICAgIC8vVGFidWxhY2nDs24gZGVzY3VhZHJhZGE6DQogICAgICAgICAgICAgICAgcmF0b25Qb3JMaW5lYS5hcHBlbmQoImNpcmNsZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJyIiwgNCkNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCBmdW5jdGlvbiAoZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yKGQubmFtZSk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgiZmlsbCIsICIjRkZGRkZGIikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiM3B4IikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICByYXRvblBvckxpbmVhLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKQ0KICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImZvbnQtc2l6ZSIsICIxNnB4IikNCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJ0ZXh0LWRlY29yYXRpb24iLCAidW5kZXJsaW5lIikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMTAsMykiKTsNCiAgICAgICAgICAgICAgICBsaW5lYXNWZXJ0SG9yUmF0b24uYXBwZW5kKCJyZWN0IikNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3JlY3RjZWxkYTU4NjknKQ0KICAgICAgICAgICAgICAgICAgICAuYXR0cigid2lkdGgiLCB3aWR0aCkNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIGhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAibm9uZSIpDQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJwb2ludGVyLWV2ZW50cyIsICJhbGwiKQ0KICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZWNlbGRhNTg2OSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNTg2OSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODY5IGNpcmNsZSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODY5IHRleHQiKS5zdHlsZSgib3BhY2l0eSIsICIwIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXMiKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXNfTGV5ZW5kYVkiKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIubW91c2UtbGluZWNlbGRhNTg2OSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAuNjUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgiLm1vdXNlLWxpbmUtaG9yaXpvbnRhbGNlbGRhNTg2OSIpLnN0eWxlKCJvcGFjaXR5IiwgIjAuNjUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODY5IGNpcmNsZSIpLnN0eWxlKCJvcGFjaXR5IiwgIjEiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgiLm1vdXNlLXBlci1saW5lY2VsZGE1ODY5IHRleHQiKS5zdHlsZSgib3BhY2l0eSIsICIxIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoIiNnbG9ib19HcmFmaWNvX01MaW5lYXMiKS5zdHlsZSgnZGlzcGxheScsICdibG9jaycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ2xvYm9fR3JhZmljb19NTGluZWFzX0xleWVuZGFZIikuc3R5bGUoJ2Rpc3BsYXknLCAnYmxvY2snKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIEFjdHVhbGl6YXJMaW5lYXNQdW50b3MoJ2NlbGRhNTg2OScsIGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIGVqZVgsIGVqZVksIG5QdW50b3NFamVYLCB3aWR0aCwgaGVpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckNvbnRlbmlkb0dsb2JvKGQzLm1vdXNlKHRoaXMpLCBzZXJpZXNMaW5lYXMsIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBtYXJnaW4sIGNvbG9yLCAnIy4jIzAsMCcpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2Vtb3ZlIiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsaXphckxpbmVhc1B1bnRvcygnY2VsZGE1ODY5JywgZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgZWplWCwgZWplWSwgblB1bnRvc0VqZVgsIHdpZHRoLCBoZWlnaHQpDQogICAgICAgICAgICAgICAgICAgICAgICBBY3R1YWxpemFyQ29udGVuaWRvR2xvYm8oZDMubW91c2UodGhpcyksIHNlcmllc0xpbmVhcywgc2VyaWVzTGluZWFzLCBlamVYLCBlamVZLCBuUHVudG9zRWplWCwgd2lkdGgsIG1hcmdpbiwgY29sb3IsICcjLiMjMCwwJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICk7DQo8L3NjcmlwdD4NCjwvZGl2PjxkaXYgQ2xhc3M9InpvbmFfbWFzX2luZm8iPjxkaXYgaWQ9ImNjYyIgY2xhc3M9ImJveF9saW1waW8gYm94Ij48aW1nIGlkPSJhYWFhIiBjbGFzcz0iaWNvbm9fZGVzY2FyZ2EiIHNyYz0iaW1hZ2VuZXMvaWNvbm9fZGVzY2FyZ2EucG5nIiBhbHQ9IiIgdGl0bGU9IiIgPjxkaXYgaWQ9ImNhcGFfb3BjaW9uZXNfZGVzY2FyZ2FzIiBjbGFzcz0ib3ZlcmxheSBtZW51X29wY2lvbmVzIHJlcHJlc2VudGFjaW9uX3Zpc3VhbGl6YWNpb24gc29tYnJhX3BlcmltZXRyYWwiID48aDQ+RGVzY2FyZ2FzOiA8L2g0Pjx1bCBpZD0ibWVudTEiID48bGkgaWQ9Im9wdF8xLjMiIG9uY2xpY2s9InNhdmVTdmdBc1BuZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2VsZGE1ODY5JyksICdWYXJpYWNpw7NuIGRlIGxhIHBvYmxhY2nDs24gcmVzcGVjdG8gYWwgYcOxbyAyMDAwICglKS5wbmcnLCB7bGVmdDogLTIwLCB3aWR0aDogMTAwNCwgYmFja2dyb3VuZENvbG9yOiAnI0ZGRkZGRid9KTsiPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX3BuZy5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkltYWdlbiBQTkc8L2xpPjxhIGhyZWY9IiMiIGlkPSJkZXNjYXJnYTU4NjkiPjxsaSA+PGltZyBzcmM9ImltYWdlbmVzL3BhbGV0YXMvMTAwMDEvaWNvbm9fc3ZnLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+SW1hZ2VuIFNWRzwvbGk+PC9hPjxzY3JpcHQ+ZDMuc2VsZWN0KCIjZGVzY2FyZ2E1ODY5Iikub24oImNsaWNrIiwgZnVuY3Rpb24oKXtkMy5zZWxlY3QodGhpcykuYXR0cigiaHJlZiIsICdkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsJyArIGJ0b2EoJzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IklTTy04ODU5LTEiID8+XHJcbjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6YXR0cmliPSJodHRwOi8vd3d3LmNhcnRvLm5ldC9hdHRyaWIiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zOmEzPSJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlU1ZHVmlld2VyRXh0ZW5zaW9ucy8zLjAvIiBhMzpzY3JpcHRJbXBsZW1lbnRhdGlvbj0iQWRvYmUiIHN0eWxlPSJzaGFwZS1yZW5kZXJpbmc6Z2VvbWV0cmljUHJlY2lzaW9uOyB0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7IGltYWdlLXJlbmRlcmluZzpvcHRpbWl6ZVF1YWxpdHk7IGZpbGwtcnVsZTpldmVub2RkOyBjbGlwLXJ1bGU6ZXZlbm9kZDsiIHdpZHRoPSI5NjkiIGhlaWdodD0iNDQ0Ij48c3R5bGU+IHRleHR7Zm9udC1zaXplOiAxMnB4O2NvbG9yOiAjQTlBOUE5O2ZvbnQtZmFtaWx5OiBBcmlhbDtmaWxsOiAjQTlBOUE5O30gLmxpbmUge2ZpbGw6IG5vbmU7fTwvc3R5bGU+JyArIGQzLnNlbGVjdCgiI2NlbGRhNTg2OSIpLmh0bWwoKSArICc8L3N2Zz4nICApKS5hdHRyKCJkb3dubG9hZCIsICJWYXJpYWNpw7NuIGRlIGxhIHBvYmxhY2nDs24gcmVzcGVjdG8gYWwgYcOxbyAyMDAwICglKS5zdmciKX0pPC9zY3JpcHQ+PGEgaHJlZj0icHJvY2Vzb19kZXNjYXJnYV9leGNlbF9jc3YuYXNweD9wbj1wb3J0YWxlc3RhZGlzdGljbyZwYz1BQUEwMCZpZHA9MTAwMDEmSWRfQ2VsZGFfRmlsYV9QbGFudGlsbGE9NTg2OSZJZF9UZXJyaXRvcmlvPTAwJklkX1RlcnJpdG9yaW9fUGFkcmU9Q0NBMDImaWRpb21hPTEmVGlwb19GaWNoZXJvX0dlbmVyYWRvPWV4Y2VsIj48bGkgaWQ9Im9wdF8xLjciPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX2V4Y2VsLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+RGF0b3MgRXhjZWw8L2xpPjwvYT48YSBocmVmPSJwcm9jZXNvX2Rlc2NhcmdhX2V4Y2VsX2Nzdi5hc3B4P3BuPXBvcnRhbGVzdGFkaXN0aWNvJnBjPUFBQTAwJmlkcD0xMDAwMSZJZF9DZWxkYV9GaWxhX1BsYW50aWxsYT01ODY5JklkX1RlcnJpdG9yaW89MDAmSWRfVGVycml0b3Jpb19QYWRyZT1DQ0EwMiZpZGlvbWE9MSZUaXBvX0ZpY2hlcm9fR2VuZXJhZG89Y3N2Ij48bGkgaWQ9Im9wdF8xLjgiPjxpbWcgc3JjPSJpbWFnZW5lcy9wYWxldGFzLzEwMDAxL2ljb25vX2Nzdi5wbmciIGNsYXNzPSJpY29ub3NfbWVudV9vcGNpb25lcyIgPkRhdG9zIENTVjwvbGk+PC9hPjwvdWw+PC9kaXY+PC9kaXY+PGRpdiBpZD0iY2NjIiBjbGFzcz0iYm94X2xpbXBpbyBib3giPjxpbWcgY2xhc3M9Imljb25vX2Rlc2NhcmdhIiBzcmM9ImltYWdlbmVzL2ljb25vX21hcy5wbmciIGFsdD0iIiB0aXRsZT0iIiA+PGRpdiBpZD0iY2FwYV9vcGNpb25lc19tYXNvcGNpb25lcyIgY2xhc3M9Im92ZXJsYXkgbWVudV9vcGNpb25lcyByZXByZXNlbnRhY2lvbl92aXN1YWxpemFjaW9uIHNvbWJyYV9wZXJpbWV0cmFsIiA+PGg0Pk3DoXMgb3BjaW9uZXM6PC9oND48dWwgaWQ9Im1lbnUxIiA+PGEgaHJlZj0iI2V4MSIgaWQ9IkRBVE9TJjAwJjU4NjkmQ0NBMDIiIHJlbD0ibW9kYWw6b3BlbiI+PGxpIGlkPSJvcHRfMS4zIj48aW1nIHNyYz0iaW1hZ2VuZXMvcGFsZXRhcy8xMDAwMS9pY29ub19ncmlkLnBuZyIgY2xhc3M9Imljb25vc19tZW51X29wY2lvbmVzIiA+VmVyIGRhdG9zPC9saT48L2E+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IENsYXNzPSJ0aXR1bG9fY2VsZGEiPlZhcmlhY2nDs24gZGUgbGEgcG9ibGFjacOzbiByZXNwZWN0byBhbCBhw7FvIDIwMDAgKCUpPC9kaXY+PC90ZD48L3RyPjx0cj48dGQgQ2xhc3M9InNlcGFyYWRvciI+PGJyPjwvdGQ+PC90cj48L3RhYmxlPmQCGQ8WAh8ABdYMPGZvb3Rlcj4NCiAgICA8ZGl2IGlkPSJwaWUiPg0KICAgIA0KICAgICAgICA8ZGl2IGlkPSJjb250ZW5pZG9fcGllIiBjbGFzcz0iIj4NCiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpdGVtTGlzdGFkb19ub3JtYWwiPiszNCA5ODMgMzQgMDkgOTM8L3NwYW4+DQogICAgICAgICAgICA8c3BhbiBjbGFzcz0iaXRlbUxpc3RhZG9fbm9ybWFsIj48YSBocmVmPSJtYWlsdG86aW5mb0Bwb3J0YWxlc3RhZGlzdGljby5jb20iPmluZm9AcG9ydGFsZXN0YWRpc3RpY28uY29tPC9hPjwvc3Bhbj4NCiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpdGVtTGlzdGFkb19ub3JtYWwiPjxhIGhyZWY9IiNleDEiIGlkPSJlbmxhY2VfYXZpc29fbGVnYWwiIHJlbD0ibW9kYWw6b3BlbiI+QXZpc28gTGVnYWw8L2E+PC9zcGFuPg0KICAgICAgICAgICAgPHNwYW4gY2xhc3M9Iml0ZW1MaXN0YWRvX25vcm1hbCI+PGEgaHJlZj0iI2V4MSIgaWQ9ImVubGFjZV9wb2xpdGljYV9jb29raWVzIiByZWw9Im1vZGFsOm9wZW4iPlBvbMOtdGljYSBkZSBDb29raWVzPC9hPjwvc3Bhbj4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPHVsIGlkPSJsaXN0YV9pZGVudGlmX2NvbnRhY3RfY29uZGljIiBjbGFzcz0iaXRlbUxpc3RhZG9fbm9ybWFsIiBzdHlsZT0id2lkdGg6IDIwMHB4OyI+DQogICAgICAgICAgICAgICAgPGxpPjxhIGNsYXNzPSJzaS1saW5rZWRpbiIgdGl0bGU9InBvcnRhbGVzdGFkw61zdGljbyBlbiBMaW5rZWRJbiIgaHJlZj0iaHR0cDovL3d3dy5saW5rZWRpbi5jb20vY29tcGFueS9wb3J0YWxlc3RhZGlzdGljbz90cms9dG9wX25hdl9ob21lIiB0YXJnZXQ9Il9ibGFuayIgPkxpbmtlZEluPC9hPjwvbGk+DQogICAgICAgICAgICAgICAgPGxpPjxhIGNsYXNzPSJzaS1mYWNlYm9vayIgdGl0bGU9InBvcnRhbGVzdGFkw61zdGljbyBlbiBGYWNlYm9vayIgaHJlZj0iaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3BhZ2VzL1BvcnRhbGVzdGFkaXN0aWNvLzIxOTUwODgzNDgzOTcxNiIgdGFyZ2V0PSJfYmxhbmsiID5GYWNlYm9vazwvYT48L2xpPg0KICAgICAgICAgICAgICAgIDxsaT48YSBjbGFzcz0ic2ktdHdpdHRlciIgdGl0bGU9InBvcnRhbGVzdGFkw61zdGljbyBlbiBUd2l0dGVyIiBocmVmPSJodHRwczovL3R3aXR0ZXIuY29tL3BvcnRlc3RhZGlzdGljbyIgdGFyZ2V0PSJfYmxhbmsiID5Ud2l0dGVyPC9hPjwvbGk+DQogICAgICAgICAgICAgICAgPGxpPjxhIGNsYXNzPSJzaS15b3V0dWJlIiB0aXRsZT0icG9ydGFsZXN0YWTDrXN0aWNvIGVuIFlvdXR1YmUiIGhyZWY9Imh0dHA6Ly93d3cueW91dHViZS5jb20vdXNlci9Qb3J0YWxlc3RhZGlzdGljbyIgdGFyZ2V0PSJfYmxhbmsiID5Zb3V0dWJlPC9hPjwvbGk+DQogICAgICAgICAgICA8L3VsPg0KICAgICAgICAgICAgDQogICAgICAgICAgICA8c3BhbiBjbGFzcz0iaXRlbUxpc3RhZG9fdWx0aW1vIj48YSB0aXRsZT0iRGVzYXJyb2xsYWRvIHBvciBDeWxzdGF0IiBocmVmPSJodHRwOi8vd3d3LmN5bHN0YXQuZXMiIHRhcmdldD0iX2JsYW5rIj7CqSBDeWxzdGF0IDIwMTg8L2E+PC9zcGFuPg0KICAgICAgICAgICAgDQogICAgICAgIDwvZGl2Pg0KICAgICAgICANCiAgICA8L2Rpdj4NCiAgICAgICAgDQo8L2Zvb3Rlcj5kZDi58gLhjl3TjtJqH7Q1bVlL9N7I">
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['form1'];
if (!theForm) {
    theForm = document.form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>


<script src="./www.portalestadistico.com_files/WebResource.axd" type="text/javascript"></script>


<script src="./www.portalestadistico.com_files/ScriptResource.axd" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
if (typeof(Sys) === 'undefined') throw new Error('ASP.NET Ajax client-side framework failed to load.');
//]]>
</script>

<script src="./www.portalestadistico.com_files/ScriptResource(1).axd" type="text/javascript"></script>
<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="CA0B0334">
</div>
    <header class="smaller">
            
            <script type="text/javascript">
//<![CDATA[
Sys.WebForms.PageRequestManager._initialize('ToolkitScriptManager1', document.getElementById('form1'));
Sys.WebForms.PageRequestManager.getInstance()._updateControls(['tUpdatePanel1','tUpdatePanel2'], [], [], 90);
//]]>
</script>

            
            
            
            
            <div class="container clearfix">
                
                <div id="cabecera" class="capas_centradas_ancho_folio">
                    <div id="contenido_cabecera">
                        <div id="logotipo">
                            <h1>
                                <img id="logotipo_grande" alt="logotipo" src="./www.portalestadistico.com_files/logo_portalestadistico.png" border="0">
                                <img id="logotipo_pequeno" alt="logotipo" src="./www.portalestadistico.com_files/logo_pequeno_portalestadistico.png" border="0">
                            </h1>
                        </div>
                        <div id="eslogan">
                            <p id="texto_eslogan" class="eslogan">
                                El Mundo en Cifras
                            </p>
                        </div>
                    </div>
                </div>
                <div id="menu_prinicpal">
                    <div id="nav">
                        <ul class="Listado_menu">
<li class="itemListado activePage">
<p class="navegacion">
<a class="enlace_pestanas_menu_cabecera" href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=55&amp;idpl=100030&amp;idioma=">Covid-19</a></p>
</li>
<li class="itemListado activePage">
<p class="navegacion">
<a class="enlace_pestanas_menu_cabecera" href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=57&amp;idpl=1348&amp;idioma=">Covid-19 CCAA</a></p>
</li>
<li class="itemListado activePage">
<p class="navegacionActiva">
España</p>
</li>
<li class="itemListado activePage">
<p class="navegacion">
<a class="enlace_pestanas_menu_cabecera" href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10002&amp;idpl=100002&amp;idioma=">CCAA</a></p>
</li>
<li class="itemListado activePage">
<p class="navegacion">
<a class="enlace_pestanas_menu_cabecera" href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10003&amp;idpl=100004&amp;idioma=">Provincias</a></p>
</li>
<li class="itemListado activePage">
<p class="navegacion">
<a class="enlace_pestanas_menu_cabecera" href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=30&amp;idpl=100006&amp;idioma=">Municipios</a></p>
</li>
<li class="itemListado activePage">
<p class="navegacion">
<a class="enlace_pestanas_menu_cabecera" href="http://www.portalestadistico.com/navegador.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=900002&amp;idpl=9000002&amp;idioma=">Informes</a></p>
</li>
<li class="itemListado activePage">
<p class="navegacion">
<a class="enlace_pestanas_menu_cabecera" href="http://www.portalestadistico.com/otraspaginas.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=900004&amp;idpl=9000004&amp;idioma=">Red MuCi</a></p>
</li>
</ul>

                    </div>
                </div>
                <div id="capa_maquetacion_controles_cabcera" class="capas_centradas_ancho_folio">
                    <div id="controlesCabecera">
                        <div id="capa_indice">
                            <div id="caja_interior_indice_categorias" class="box box_rodeado"><p class="texto_importante_sinmargen bloque_activo"><img id="icono_indice_categorias" class="alineado_vertical" src="./www.portalestadistico.com_files/icono_indice_categorias.png" alt="" title=""><span id="texto_indice" class="alineado_vertical">Demografía</span></p><div id="capa_listado_indice" class="overlay menu_listado_indice representacion_visualizacion sombra_perimetral"><h4>Seleccione un indicador o una nueva categoría:</h4><ul id="indice_listado_principal"><li id="elemento_100000" class="listado_indice_principal">Demografía</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#Indice_Nivel_1_2706"><li id="elemento_2706" class="listado_indice_multiple_nivel1">&nbsp;&nbsp;&nbsp;&nbsp;Población total</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#Indice_Nivel_1_2722"><li id="elemento_2722" class="listado_indice_multiple_nivel1">&nbsp;&nbsp;&nbsp;&nbsp;Porcentaje de población extranjera</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#Indice_Nivel_1_2724"><li id="elemento_2724" class="listado_indice_multiple_nivel1">&nbsp;&nbsp;&nbsp;&nbsp;Porcentaje de población de 65 y más años</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#Indice_Nivel_1_2726"><li id="elemento_2726" class="listado_indice_multiple_nivel1">&nbsp;&nbsp;&nbsp;&nbsp;Porcentaje de población de menos de 16 años</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#Indice_Nivel_1_2728"><li id="elemento_2728" class="listado_indice_multiple_nivel1">&nbsp;&nbsp;&nbsp;&nbsp;Edad media</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#Indice_Nivel_1_2730"><li id="elemento_2730" class="listado_indice_multiple_nivel1">&nbsp;&nbsp;&nbsp;&nbsp;Tasa de natalidad (por mil habitantes)</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#Indice_Nivel_1_2732"><li id="elemento_2732" class="listado_indice_multiple_nivel1">&nbsp;&nbsp;&nbsp;&nbsp;Crecimiento natural de la población</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#Indice_Nivel_1_6376"><li id="elemento_6376" class="listado_indice_multiple_nivel1">&nbsp;&nbsp;&nbsp;&nbsp;Número de defunciones</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#Indice_Nivel_1_3962"><li id="elemento_3962" class="listado_indice_multiple_nivel1">&nbsp;&nbsp;&nbsp;&nbsp;Variación de la población respecto al año 2000</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idioma=&amp;idpl=100001&amp;Id_Territorio=00"><li id="elemento_100001" class="listado_indice_principal_categorias">Mercado de Trabajo</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idioma=&amp;idpl=100017&amp;Id_Territorio=00"><li id="elemento_100017" class="listado_indice_principal_categorias">Condciones de vida</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idioma=&amp;idpl=100018&amp;Id_Territorio=00"><li id="elemento_100018" class="listado_indice_principal_categorias">Actividad productiva</li></a><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idioma=&amp;idpl=100019&amp;Id_Territorio=00"><li id="elemento_100019" class="listado_indice_principal_categorias">Recaudación tributaria</li></a></ul></div></div>
                        </div>
                        <div id="capa_seleccion_territorios">
                        
                            
                            
                            
                            
                            
                            <div id="UpdatePanel1">
	
                                    
                                
</div>
                            
                            
                            
                        

                        
                            
                            
                            
                            
                            
                            
                            
                        </div>
                        <div id="capa_mas_informacion">
                            <div id="caja_interior_mas_informacion" class="box box_rodeado"><p class="texto_importante_sinmargen bloque_activo"><img id="icono_mas_informacion" class="alineado_vertical" src="./www.portalestadistico.com_files/icono_mas_info.png" alt="" title=""></p><div id="capa_contenido_mas_informacion" class="overlay mas_informacion_grande representacion_visualizacion sombra_perimetral"><h4>Más Información:</h4><p id="texto_contenido_mas_informacion">Esta solución integra diferentes datos estadísticos actualizados para <b>conocer las cifras básicas de los  territorios españoles, con difusión visual e interactiva</b>. Están disponibles tanto tablas y números, como gráficos, mapas y pirámides de población, para una comprensión inmediata del territorio.<br><br>Toda <b>la información es reutilizable</b> y los gráficos y mapas pueden descargarse a formatos gráficos y vectoriales; los datos que conforman los mapas y gráficos se pueden visualizar en modo tabla y descargar a formato xls y csv.<br><br>Todos <b>los datos provienen de fuentes oficiales y se actualizan contínuamente</b>.</p></div></div>
                        </div>
                        
                    </div>
                </div>
            </div>
            
            
        
        <script type="text/javascript">

            $("#TextBox_Nombre_Territorio").focusin(function() {

                $(this).attr("isfocusedin", 1);

                $(this).stop(true, false).animate({
                    width: "275px"
                }, 350);

                $("#capa_Literal_Territorio_Seleccionado").animate({
                    width: "toggle",
                    opacity: 0,
                    height: "toggle"
                }, 350);

            });

            $("#TextBox_Nombre_Territorio").focusout(function() {

                $(this).attr("isfocusedin", 1);
                $(this).stop(true, false).animate({
                    width: "30px"
                }, 350);

                $("#capa_Literal_Territorio_Seleccionado").animate({
                    width: "toggle",
                    height: "toggle"
                }, 350);

                $("#capa_Literal_Territorio_Seleccionado").animate({
                    opacity: 1
                }, 375);
                
            });
           
    </script>
        
        
    </header><!-- /header -->
    <section>
        <div id="capa_visualizacion">
            <table class="Tabla_Contenedora_Pagina sombra_lateral" border="0"><tbody><tr class="ancla"><td><a id="Indice_Nivel_0_2703" class="anchor"></a></td></tr><tr><th colspan="2" class="Titulo_Fila"><h2>1. Demografía</h2></th></tr><tr class="ancla"><td><a id="Indice_Nivel_1_2706" class="anchor"></a></td></tr><tr><td class="celda_sin_estilos" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 140px;"><table class="Tablas_datos"><tbody><tr class="Tablas_datos_cabecera"><td class="columna_izquierda"><h4 class="h4_grande">Población total</h4></td><td class="columna_derecha"><h4 class="h4_muy_grande negativos_ie">47.026.208 personas</h4></td></tr><tr><td colspan="2"><table class="Subtitulo_indicador"><tbody><tr><td class="columna_estrecha">Periodo:</td><td class="columna_ancha negrita">Anual&nbsp;2019</td><td class="columna_izquierda columna_estrecha">Crecimiento interanual:</td><td class="columna_centro texto_muy_grande negativos_ie">0,6%</td><td class="columna_derecha"><img class="imagen_tendencia" src="./www.portalestadistico.com_files/crecimiento_arriba.png" alt="Estabilidad"></td></tr><tr><td class="columna_estrecha">Fuente:</td><td colspan="4" class="negrita">INE, Revisión del Padrón Municipal.</td></tr></tbody></table></td></tr><tr><td colspan="2"><p class="texto_contenido">Personas empadronadas a 1 de enero de cada año.</p></td></tr></tbody></table></div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_6107" class="anchor"></a></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_6108" class="anchor"></a></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_6109" class="anchor"></a></td></tr><tr><td rowspan="3" class="celda_tipo_fila_2"><div class="clase_capa_unidad_visualizacion" style="min-height: 450px;"><div id="capa_Grafico_Evolucion_Lineas_Asincronocelda6107">
<div id="capa_Esperandocelda6107" class="load-container"></div>
<svg id="celda6107" width="450" height="450"><g transform="translate(68.94140625, 50)"><g class="fuente_generica" transform="translate(0,350)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#A9A9A9" d="M0.5,-350V0.5H351.55859375V-350" stroke-width="1.5" opacity="0.5"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1998</text></g><g class="tick" opacity="1" transform="translate(33.9123563803781,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2000</text></g><g class="tick" opacity="1" transform="translate(67.37048311196219,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2002</text></g><g class="tick" opacity="1" transform="translate(100.78283949234027,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2004</text></g><g class="tick" opacity="1" transform="translate(134.24096622392437,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2006</text></g><g class="tick" opacity="1" transform="translate(167.65332260430247,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2008</text></g><g class="tick" opacity="1" transform="translate(201.1114493358866,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2010</text></g><g class="tick" opacity="1" transform="translate(234.52380571626466,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2012</text></g><g class="tick" opacity="1" transform="translate(267.98193244784875,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2014</text></g><g class="tick" opacity="1" transform="translate(301.3942888282268,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2016</text></g><g class="tick" opacity="1" transform="translate(334.85241555981094,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2018</text></g></g><g class="fuente_generica" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,312.35700232905896)"><line stroke="#A9A9A9" x2="351.05859375" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">40.000.000</text></g><g class="tick" opacity="1" transform="translate(0,226.5089022027028)"><line stroke="#A9A9A9" x2="351.05859375" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">42.000.000</text></g><g class="tick" opacity="1" transform="translate(0,140.6608020763467)"><line stroke="#A9A9A9" x2="351.05859375" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">44.000.000</text></g><g class="tick" opacity="1" transform="translate(0,54.812701949990526)"><line stroke="#A9A9A9" x2="351.05859375" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">46.000.000</text></g></g><g><path class="line linecelda6107" d="M0,318.1818181818182L16.70617819018905,303.1794763682869L33.4123563803781,290.4039484239331L50.164304921773144,263.91762040839905L66.87048311196219,232.96714826224434L83.57666130215124,195.22961116820008L100.28283949234027,174.59945422683546L117.03478803373532,135.50225492298998L133.74096622392437,109.7291958473557L150.4471444141134,88.62030697563642L167.15332260430247,47.53834252091963L183.90527114569753,22.2996449445219L200.6114493358866,10.48591618993379L217.31762752607563,3.21192081812751L234.02380571626466,0L250.7757542576597,5.817839897463045L267.48193244784875,21.203622250208696L284.1881106380378,27.54530725464275L300.8942888282268,30.403662672399832L317.64623736962193,30.016616512980193L334.35241555981094,23.279472235314074L351.05859375,10.263698382756672" data-legend="España" style="stroke: rgb(255, 171, 133);" stroke-dasharray="539.5274047851562, 539.5274047851562"></path></g><g class="circle-group" style="fill: rgb(255, 171, 133);"><circle class="dot" cx="0" cy="318.1818181818182" r="3" style="opacity: 0;"></circle><circle class="dot" cx="16.70617819018905" cy="303.1794763682869" r="3" style="opacity: 0;"></circle><circle class="dot" cx="33.4123563803781" cy="290.4039484239331" r="3" style="opacity: 0;"></circle><circle class="dot" cx="50.164304921773144" cy="263.91762040839905" r="3" style="opacity: 0;"></circle><circle class="dot" cx="66.87048311196219" cy="232.96714826224434" r="3" style="opacity: 0;"></circle><circle class="dot" cx="83.57666130215124" cy="195.22961116820008" r="3" style="opacity: 0;"></circle><circle class="dot" cx="100.28283949234027" cy="174.59945422683546" r="3" style="opacity: 0;"></circle><circle class="dot" cx="117.03478803373532" cy="135.50225492298998" r="3" style="opacity: 0;"></circle><circle class="dot" cx="133.74096622392437" cy="109.7291958473557" r="3" style="opacity: 0;"></circle><circle class="dot" cx="150.4471444141134" cy="88.62030697563642" r="3" style="opacity: 0;"></circle><circle class="dot" cx="167.15332260430247" cy="47.53834252091963" r="3" style="opacity: 0;"></circle><circle class="dot" cx="183.90527114569753" cy="22.2996449445219" r="3" style="opacity: 0;"></circle><circle class="dot" cx="200.6114493358866" cy="10.48591618993379" r="3" style="opacity: 0;"></circle><circle class="dot" cx="217.31762752607563" cy="3.21192081812751" r="3" style="opacity: 0;"></circle><circle class="dot" cx="234.02380571626466" cy="0" r="3" style="opacity: 0;"></circle><circle class="dot" cx="250.7757542576597" cy="5.817839897463045" r="3" style="opacity: 0;"></circle><circle class="dot" cx="267.48193244784875" cy="21.203622250208696" r="3" style="opacity: 0;"></circle><circle class="dot" cx="284.1881106380378" cy="27.54530725464275" r="3" style="opacity: 0;"></circle><circle class="dot" cx="300.8942888282268" cy="30.403662672399832" r="3" style="opacity: 0;"></circle><circle class="dot" cx="317.64623736962193" cy="30.016616512980193" r="3" style="opacity: 0;"></circle><circle class="dot" cx="334.35241555981094" cy="23.279472235314074" r="3" style="opacity: 0;"></circle><circle class="dot" cx="351.05859375" cy="10.263698382756672" r="3" style="opacity: 0;"></circle></g><g><path class="mouse-linecelda6107" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M334.35241555981094,350 334.35241555981094,0"></path><path class="mouse-line-horizontalcelda6107" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M351.05859375,59 0,59"></path><g class="mouse-per-linecelda6107" transform="translate(334.35241555981094,23.279472235314074)" style="opacity: 1;"><circle r="4" style="stroke: rgb(255, 171, 133); fill: rgb(255, 255, 255); stroke-width: 3px; opacity: 0;"></circle><text text-anchor="middle" transform="translate(10,3)" style="font-size: 16px; text-decoration: underline; opacity: 0;"></text></g><rect id="rectcelda6107" width="351.05859375" height="350" fill="none" pointer-events="all"></rect></g></g></svg></div>
<style type="text/css">
        .linecelda6107 {
            fill: none;
            stroke: #FF6E2B;
            stroke-width: 2;
        }
        .toolTip {
            display: none;
            width: auto;
            height: auto;
            background: none repeat scroll 0 0 white;
            border: 0 none;
            border-radius: 8px 8px 8px 8px;
            box-shadow: -3px 3px 15px #888888;
            color: black;
            text-align: center;
            padding: 5px;
            z-index: 1;
        }
        .tooltip_YLegend {
            position: absolute;
            text-align: center;
            display: none;
            padding-top: 5px;
            padding-bottom: 5px;
            border-radius: 3px 3px 3px 3px;
            background-color: #8A8985;
            color: #FFFFFF;
            border: 0 none;
        }
            .tooltip_YLegend:after {
                left: 100%;
                top: 50%;
                border: solid transparent;
                content: " "; 
                height: 0;
                width: 0;
                position: absolute;
                pointer-events: none;
                border-color: rgba(217, 217, 217, 0);
                border-left-color: #8A8985;
                border-width: 5px;
                margin-top: -5px;
            }
        text {
            font-size: 12px;
            color: #A9A9A9;
            font-family: Arial, sans-serif;
            fill: #A9A9A9;
        }
        @-webkit-keyframes load8 {
            0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }
        @keyframes load8 {
            0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }
        .load-container {
            position: obsolute;
            overflow: hidden;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
}
        .loadercelda6107,
        .loadercelda6107:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda6107 {
            margin: 160px 160px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF6E2B;
            border-right: 1.1em solid #FF6E2B;
            border-bottom: 1.1em solid #FF6E2B;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script src="./www.portalestadistico.com_files/d3.locale.es-Es.js"></script>
<script>
    var globo_Grafico_MLineas;
    var globo_Grafico_MLineas_LeyendaY;
    function tweenDash() {
        var l, i;
        l = this.getTotalLength();
        i = d3.interpolateString("0, " + l, l + ", " + l);
        return function (t) { return i(t); };
    }
    function transition(selection) {
        selection.each(function () {
            d3.select(this).transition()
                .duration(1000)
                .attrTween("stroke-dasharray", tweenDash);
        })
    }
    function CalcularMinimoDatos(pArrayDatos, pComenzarEjeYEnCero, pDecalajesVerticales) {
        var minimoDatos = 0;
        var maximoDatos = 0;
        var totalDatos = 0;
        var decajaleVertical = 0;
        minimoDatos = d3.min(pArrayDatos, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.valor_serie;
            });
        });
        maximoDatos = d3.max(pArrayDatos, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.valor_serie;
            });
        });
        totalDatos = maximoDatos - minimoDatos
        // Aplicamos el valor 0 si es seleccionado:
        if (pComenzarEjeYEnCero == true) {
            if (minimoDatos > 0) {
                minimoDatos = 0;
            }
        }
        if (pDecalajesVerticales == true) {
            decajaleVertical = (totalDatos * 10) / 100;
            if (minimoDatos >= 0 && (minimoDatos - decajaleVertical) < 0) {
                minimoDatos = 0;
            }
            else {
                minimoDatos = minimoDatos - decajaleVertical
            }
        }
        return minimoDatos;
    }
    function CalcularAnchoMargenIzquierdo_GraficoLineas(pvalorMaximoDatos, pvalorMinimoDatos, pAnchoGrafico) {
        var cadenaMayor = ';'
        var margenPixeles = 0;
        var c;
        var ctx;
        var txt;
        var canvasMedicionIzquierdo;
        if (pvalorMaximoDatos.toString().length > pvalorMinimoDatos.toString().length) {
            cadenaMayor = pvalorMaximoDatos.toString()
        }
        else {
            cadenaMayor = pvalorMinimoDatos.toString()
        }
        canvasMedicionIzquierdo = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda6107").append("canvas")
            .attr('id', 'canvasMedicionIzquierdocelda6107')
            .attr("visibility", "hidden")
            .attr("white-space", "nowrap");
            c = document.getElementById("canvasMedicionIzquierdocelda6107");
            ctx = c.getContext("2d");
            ctx.font = "12px Arial";
            txt = cadenaMayor + ' - '
            margenPixeles = ctx.measureText(txt).width;
            canvasMedicionIzquierdo.remove();
        return margenPixeles;
    }
    function CalcularAnchoMargenDerecho_GraficoLineas(pArrayDatos, pAnchoGrafico) {
        var cadenaMayor = "";
        var canvasMedicionDerecho;
        var c;
        var ctx;
        var txt;
        pArrayDatos.forEach(function (nombreSerie) {
            if (nombreSerie.length > cadenaMayor.length) {
                cadenaMayor = nombreSerie;
            }
        });
        canvasMedicionDerecho = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda6107").append("canvas")
            .attr('id', 'canvasMedicionDerechocelda6107')
            .attr("visibility", "hidden")
            .attr("white-space", "nowrap")
        c = document.getElementById("canvasMedicionDerechocelda6107");
        ctx = c.getContext("2d");
        ctx.font = "12px Arial";
        txt = cadenaMayor
        margenPixeles = ctx.measureText(txt).width + 45;
        canvasMedicionDerecho.remove();
        if (margenPixeles > (pAnchoGrafico / 2)) {
            margenPixeles = pAnchoGrafico / 2;
        }
        return margenPixeles;
    }
    function CalcularMaximoDatos(pArrayDatos, pComenzarEjeYEnCero) {
        var maximoDatos = 0;
        maximoDatos = d3.max(pArrayDatos, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.valor_serie;   // el return es local a esta función interna
            });
        });
         if (pComenzarEjeYEnCero == true) {
            if (maximoDatos < 0) {
                maximoDatos = 0;
            }
        }
        return maximoDatos;
    }
    function hex (c) {
	    var s = "0123456789abcdef";
	    var i = parseInt (c);
	    if (i == 0 || isNaN (c))
	        return "00";
	    i = Math.round (Math.min (Math.max (0, i), 255));
	    return s.charAt ((i - i % 16) / 16) + s.charAt (i % 16);
    }
    function convertToHex (rgb) {
	    return hex(rgb[0]) + hex(rgb[1]) + hex(rgb[2]);
    }
    function trim (s) { return (s.charAt(0) == '#') ? s.substring(1, 7) : s }
    function convertToRGB (hex) {
	    var color = [];
	    color[0] = parseInt ((trim(hex)).substring (0, 2), 16);
	    color[1] = parseInt ((trim(hex)).substring (2, 4), 16);
	    color[2] = parseInt ((trim(hex)).substring (4, 6), 16);
	    return color;
    }
    function CalcularGradienteColores_GraficoEvolucionLineas2(colorInicio,colorFin,numeroLineas){
        var colorInicioRGB = '';
        var colorFinRGB = '';
        var colorRMedia;
        var colorGMedia;
        var colorBMedia;
        var colorRGBMedia = new Array();
        var colorHexMedia;
        var numeroLineasADistribuir = 0;
        var coloresPositivosNegativos = 0
        var cantidadColorTramo = 0;
        var colores = new Array();
        colorInicioRGB = convertToRGB(colorInicio);
        colorFinRGB = convertToRGB(colorFin);
        colorRMedia = (colorInicioRGB[0] + colorFinRGB[0]) / 2;
        colorGMedia = (colorInicioRGB[1] + colorFinRGB[1]) / 2;
        colorBMedia = (colorInicioRGB[2] + colorFinRGB[2]) / 2;
        colorRGBMedia = [colorRMedia, colorGMedia, colorBMedia];
        colorHexMedia = convertToHex(colorRGBMedia);
        numeroLineasADistribuir = numeroLineas;
        if(numeroLineas % 2 != 0) {
            numeroLineasADistribuir = numeroLineasADistribuir - 1;
        }
        coloresPositivosNegativos = numeroLineasADistribuir / 2;
        cantidadColorTramo = 110 / (coloresPositivosNegativos + 1);
        for (var i = coloresPositivosNegativos; i >= 1; i--) {
            colores.push('#' + LightenDarkenColor(colorHexMedia, cantidadColorTramo * i * -1))
        }
        if (numeroLineas % 2 != 0) {
            colores.push('#' + colorHexMedia);
        }
        cantidadColorTramo = 75 / (coloresPositivosNegativos + 1);
        for (var i = 1; i <= coloresPositivosNegativos; i++) {
            colores.push('#' + LightenDarkenColor(colorHexMedia, cantidadColorTramo * i))
        }
    return colores;
    }
    function LightenDarkenColor(colorCode, amount) {
        var usePound = false;
        if (colorCode[0] == "#") {
            colorCode = colorCode.slice(1);
            usePound = true;
        }
        var num = parseInt(colorCode, 16);
        var r = (num >> 16) + amount;
        if (r > 255) {
            r = 255;
        } else if (r < 0) {
            r = 0;
        }
        var b = ((num >> 8) & 0x00FF) + amount;
        if (b > 255) {
            b = 255;
        } else if (b < 0) {
            b = 0;
        }
        var g = (num & 0x0000FF) + amount;
        if (g > 255) {
            g = 255;
        } else if (g < 0) {
            g = 0;
        }
        return (usePound ? "#" : "") + (g | (b << 8) | (r << 16)).toString(16);
    }
    function ActualizarLineasPuntos(pIdentificador, pMouse, pSerie_datos_anidados, pX, pY, pNPuntosEjeX, pWidth, pHeight)
    {
        var xDate;
        var bisect;
        var idx;
        var data;
        pSerie_datos_anidados.map(d => {
            xDate = pX.invert(pMouse[0] - (pWidth / pNPuntosEjeX) / 2);
            bisect = d3.bisector(function (d) { return d.fecha; }).left
            idx = bisect(d.values, xDate)
        })
        d3.selectAll('.mouse-per-line'+ pIdentificador)
            .attr("transform", function (d, i) {
                d3.select('.mouse-line' + pIdentificador)
                   .attr("d", function () {
                       data = "M" + pX(d.values[idx].fecha) + "," + pHeight;
                       data += " " + pX(d.values[idx].fecha) + "," + 0;
                       return data;
                    });
                d3.select('.mouse-line-horizontal' + pIdentificador)
                    .attr("d", function () {
                        data = "M" + (pWidth) + "," + pMouse[1]
                        data += " 0," + pMouse[1]
                        return data;
                    });
                if (isNaN(pY(d.values[idx].valor_serie))) {
                    return "translate(0,0)";
                }
                else {
                    return "translate(" + pX(d.values[idx].fecha) + "," + pY(d.values[idx].valor_serie) + ")";
                }
            })
           .style("opacity", function (d, i) {
               if (isNaN(pY(d.values[idx].valor_serie))) {
                   return "0";
               }
               else {
                   return "1";
               }
           })
       ;
    }
    function ActualizarContenidoGlobo(pMouse, pSerie_datos_anidados, pSerie_datos_formateados_anidados, pX, pY, pNPuntosEjeX, pWidth, pMargin, pColor, pMascaraSalidaDatos)
    {
        var xDate;
        var bisect;
        var idx;
        var valorYLegend;
        var sortingArr;
        var res_nested1;
        sortingObj = []
        pSerie_datos_anidados.map(d => {
            xDate = pX.invert(pMouse[0] - (pWidth / pNPuntosEjeX) / 2);
            bisect = d3.bisector(function (d) { return d.fecha; }).left
            idx = bisect(d.values, xDate)
            sortingObj.push({ name: d.name, fecha_periodo_serie: d.values[idx].fecha, nombre_periodo: d.values[idx].nombre_periodo + ' ' + d.values[idx].anio_periodo, etiquetaperiodo: d.values[idx].etiquetaperiodo, valor_serie: d.values[idx].valor_serie })
        })
        sortingObj.sort(function (pX, pY) {
            return d3.descending(pX.valor_serie, pY.valor_serie);
        })
        sortingArr = sortingObj.map(d => d.name)
        res_nested1 = pSerie_datos_formateados_anidados.slice().sort(function (a, b) {
            return sortingArr.indexOf(a.name) - sortingArr.indexOf(b.name) // rank vehicle Hombresased on price of valor_indicador
        })
        globo_Grafico_MLineas.html(sortingObj[0].etiquetaperiodo + ': ' + sortingObj[0].nombre_periodo)
            .style('display', 'block')
            .style('left', d3.event.pageX + 25 + 'px')
            .style('top', d3.event.pageY - 80 + 'px')
            .style('font-size', 12.5)
            .selectAll()
            .data(res_nested1).enter()
            .append('div')
            .style('color', d => {
                return pColor(d.name)
            })
            .style('font-size', 15)
            .html(d => {
                if (isNaN(d.values[idx].valor_serie)) {
                    return d.name + " : <b> - </b>"
                }
                else {
                    return d.name + " : <b>" + format(pMascaraSalidaDatos, d.values[idx].valor_serie) + "</b>"
                }
            })
        valorYLegend = pY.invert(pMouse[1] - 1)
        valorYLegend = format(pMascaraSalidaDatos, valorYLegend);
        globo_Grafico_MLineas_LeyendaY.html(valorYLegend)
            .style('display', 'block')
            .style('width', pMargin.left - 5 + 'px')
            .style('left', d3.event.pageX - pMouse[0] - pMargin.left + 'px')
            .style('top', d3.event.pageY - 12 + 'px')
    }
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=6107&pId_Territorio=00;&pId_Territorio_Padre=&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var linea_grafico;
        var svg;
        var seriesLineas;
        var lineaCero;
        var lineas_series;
        var nElementosPorSerie;
        var puntosAislados;
        var lineasVertHorRaton;
        var ratonPorLinea;
        var ejeX;
        var ejeY;
        var cDimensionExt = 0
        var valorMinimoDatos = 0;
        var valorMaximoDatos = 0;
        var fechaMaximo;
        var fechaMinimo;
        var calculo_maxmin;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var nCortes = 0;
        var nPuntosEjeX = 0;
        var parseDate = d3.timeParse("%Y/%m/%d");
        var margin;
        var width;
        var height;
        var color;
        var category;
        var element_capa_esperando;
       var anchoNodos;
       var svgLeyendaHorizontal;
       var svgLegend;
       var legend;
        element_capa_esperando = document.getElementById("capa_Esperandocelda6107");
        element_capa_esperando.classList.remove("loadercelda6107");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_GraficoEvolucionLineas2('#FFE9DF', '#FF6E2B', category.length));
        data.forEach(function (d) {
            d.fecha_periodo_serie = parseDate(d.fecha_periodo_serie);
            nCortes++;
            nPuntosEjeX++;
        });
        if (nCortes > 7){
            nCortes = 7;
        }
        //* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        color.domain(d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); }));
        calculo_maxmin = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        valorMaximoDatos = CalcularMaximoDatos(calculo_maxmin, false)
        valorMinimoDatos = CalcularMinimoDatos(calculo_maxmin, false, true);
        margenIzquierdo = CalcularAnchoMargenIzquierdo_GraficoLineas(format("#.##0,",valorMaximoDatos), format("#.##0,",valorMinimoDatos), 450);
        margenDerecho = CalcularAnchoMargenDerecho_GraficoLineas(category, 450);
        if (category.length > 1 && 450 > 450) 
        {
            margenSuperior = 40;
            margenInferior = 20;
        }
        else if (category.length == 1 && 450 > 450) 
        {
            margenDerecho = 30 
            margenSuperior = 40;
            margenInferior = 20;
        }
        else 
        {
            margenDerecho = 30 
            margenSuperior = 50;
            margenInferior = 50;
        }
        fechaMaximo = d3.max(calculo_maxmin, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.fecha;
            });
        });
        fechaMinimo = d3.min(calculo_maxmin, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.fecha;
            });
        });
        margin = { top: margenSuperior, right: margenDerecho, bottom: margenInferior, left: margenIzquierdo };
        width = 450 - margin.left - margin.right;
        height = 450 - margin.top - margin.bottom;
        ejeX = d3.scaleTime().range([0, width]);
        ejeY = d3.scaleLinear().range([height, 0]);
        linea_grafico = d3.line()
            .x(function (d) { return ejeX(d.fecha); })
            .y(function (d) { return ejeY(d.valor_serie); })
            .defined(function (d) { return !isNaN(d.valor_serie); })
            ;
                // 1.Add the SVG To the page And employ #2
        svg = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda6107").append("svg")
            .attr('id', 'celda6107')
            .attr("width", 450)
            .attr("height", 450)
            .append("g")
            .attr("transform", "translate(" + margin.left + ", " + margin.top + ")");
        globo_Grafico_MLineas = d3.select("body").append("div")
            .attr('id', 'globo_Grafico_MLineas')
            .style('position', 'absolute')
            .style('padding', 6)
            .attr("class", "toolTip")
            .style('display', 'none');
        globo_Grafico_MLineas_LeyendaY = d3.select("body").append("div")
            .attr('id', 'globo_Grafico_MLineas_LeyendaY')
            .style('position', 'absolute')
            .attr("class", "tooltip_YLegend")
        ;
        seriesLineas = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, etiquetaperiodo: d.etiquetaperiodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        nElementosPorSerie = seriesLineas[0].values.length - 1;
        ejeX.domain([fechaMinimo, fechaMaximo]);
        ejeY.domain([valorMinimoDatos, valorMaximoDatos]);
                // Leyenda, eje de las X, puntos y leyenda de estos puntos:
        svg.append("g")
            .attr("class", "fuente_generica")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom().scale(ejeX).tickSize(-height).ticks(nCortes))
            .call(
                g => {
                    g.selectAll("text")
                        .style("text-anchor", "middle")
                        .attr("y", "5")
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 1.5)
                        .attr('opacity', 0.5)
                }
            )
        ;
        svg.append("g")
            .attr("class", "fuente_generica")
            .call(d3.axisLeft(ejeY).ticks(4).tickSize(-width))
            .call(
                g => {
                    g.selectAll("text")
                        .attr("x", -3)
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain").remove()
                }
            )
        ;
        svg.selectAll("text").attr('fill', '#A9A9A9');
        if (category.length > 1 ) 
        {
            anchoNodos = (d) => d.getBBox().width; 
            svgLeyendaHorizontal = svg.append('g')
                .append('g')
            const lgcelda6107 = svgLeyendaHorizontal.selectAll('g')
                .data(category)
                .enter()
                .append('g')
                .attr('transform', (d, i) => `translate(${i * 100},${height + 15})`);            
            lgcelda6107.append('rect')            
                .style('fill', d=>color(d))
                .attr('x', 0)
                .attr('y', 0)
                .attr('width', 10)
                .attr('height', 10);
            lgcelda6107.append('text')
                .attr('x', 17.5)
                .attr('y', 10)
                .text(d => d);
            let offsetcelda6107 = 0;
            lgcelda6107.attr('transform', function (d, i) {
                let x = offsetcelda6107;
                offsetcelda6107 += anchoNodos(this) + 10;
                return `translate(${x},${height + 10})`;
            });
            svgLeyendaHorizontal.attr('transform', function () {
                return 'translate(0,20)'
             });
        }
        if (valorMaximoDatos > 0 && valorMinimoDatos < 0 ) 
        {
            lineaCero = svg.append("line")
            .attr('id', 'lineaCero')
            .attr("x1", 0)
            .attr("y1", ejeY(0))
            .attr("x2", width)
            .attr("y2", ejeY(0))
            .attr("stroke-width", "1px")
            .attr("stroke", "#A9A9A9")
            .style("stroke-dasharray", ("5, 3"))
            ;
        }
        lineas_series = svg.selectAll(".lineas_series")
            .data(seriesLineas)
            .enter().append("g")
            ;
        lineas_series.append("path")
            .attr("class", "line linecelda6107")
            .attr("d", function (d) { return linea_grafico(d.values); })
            .attr("data-legend", function (d) { return d.name })
            .style("stroke", function (d) { return color(d.name); });
        puntosAislados = svg.selectAll(".dot")
            .data(seriesLineas).enter()
            .append("g")
            .attr('class', 'circle-group')
            .style("fill", function (d, i1) {
                return color(d.name);
            })
            ;
        puntosAislados.selectAll(".dot")
            .data(d => d.values).enter()
            .append("circle") // Uses the enter().append() method
            .attr("class", "dot") // Assign a class for styling
            .attr("cx", function (d, i) { return ejeX(d.fecha) })
            .attr("cy", function (d) { return ejeY(d.valor_serie) })
            .attr("r", 3)
            .style("opacity", function (d, i) {
                if (i == 0) {
                    cDimensionExt++;
                }
                if (d.valor_serie == "'null'" || isNaN(d.valor_serie)) {
                    return "0";
                }
                else {
                    if (i > 0 && i < nElementosPorSerie) {
                        if ((seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie)) && (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie))) {
                            return "1";
                        }
                        else {
                            return "0";
                        }
                    }
                    else {
                        if (i == 0) {
                            if (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie)) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                        else {
                            if (i == nElementosPorSerie && (seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie))) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                    }
                }
            })
            ;
        transition(d3.selectAll(".linecelda6107"));
        lineasVertHorRaton = svg.append("g"); 
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-linecelda6107")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-line-horizontalcelda6107")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        ratonPorLinea = lineasVertHorRaton.selectAll(".mouse-per-linecelda6107")
            .data(seriesLineas)
            .enter()
            .append("g")
            .attr("class", "mouse-per-linecelda6107");
            //Tabulación descuadrada:
                ratonPorLinea.append("circle")
                    .attr("r", 4)
                    .style("stroke", function (d) {
                        return color(d.name);
                    })
                    .style("fill", "#FFFFFF")
                    .style("stroke-width", "3px")
                    .style("opacity", "0");
                ratonPorLinea.append("text")
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("text-decoration", "underline")
                    .attr("transform", "translate(10,3)");
                lineasVertHorRaton.append("rect")
                    .attr('id', 'rectcelda6107')
                    .attr("width", width)
                    .attr("height", height)
                    .attr("fill", "none")
                    .attr("pointer-events", "all")
                    .on("mouseout", function () {
                        d3.select(".mouse-linecelda6107").style("opacity", "0");
                        d3.select(".mouse-line-horizontalcelda6107").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda6107 circle").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda6107 text").style("opacity", "0");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'none');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'none');
                    })
                    .on("mouseover", function () {
                        d3.select(".mouse-linecelda6107").style("opacity", "0.65");
                        d3.select(".mouse-line-horizontalcelda6107").style("opacity", "0.65");
                        d3.selectAll(".mouse-per-linecelda6107 circle").style("opacity", "1");
                        d3.selectAll(".mouse-per-linecelda6107 text").style("opacity", "1");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'block');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'block');
                        ActualizarLineasPuntos('celda6107', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,')
                    })
                    .on("mousemove", function () {
                        ActualizarLineasPuntos('celda6107', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,')
                    });
            }
        );
</script>
</div><div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda6107&#39;), &#39;Población.png&#39;, {left: -20, width: 485, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga6107"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga6107").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="450" height="900"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda6107").html() + '</svg>'  )).attr("download", "Población.svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6107&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6107&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;6107&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Población</div></td>
<td class="celda_tipo_fila_2"><div class="clase_capa_unidad_visualizacion" style="min-height: 179px;"><div id="capa_diagramacelda6108">
<div id="capa_Esperandocelda6108" class="load-container"></div>
<svg id="celda6108" width="450" height="179"><g transform="translate(225,143.2)"><g class="slices"><path style="fill: rgb(255, 128, 84);" d="M-86.15062092530526,-0.9172785578950173A2,2,0,0,1,-88.14947523911745,-2.984964835340377A88.2,88.2,0,0,1,-0.247522040734054,-88.19965267981134A2,2,0,0,1,1.7571270994333992,-86.13758407411284L-0.07746623244155071,-27.05854550324631A2,2,0,0,1,-1.9238186111622406,-25.126458603459138A25.2,25.2,0,0,0,-25.054640673758517,-2.7027727815792124A2,2,0,0,1,-27.043104219294907,-0.9172785578950209Z"></path><path style="fill: rgb(255, 233, 223);" d="M3.5908003214585973,-86.08064264873859A2,2,0,0,1,5.719531304338154,-88.01435656561205A88.2,88.2,0,0,1,88.14947523911746,-2.9849648353403793A2,2,0,0,1,86.15062092530526,-0.9172785578950191L27.043104219294907,-0.9172785578950191A2,2,0,0,1,25.054640673758517,-2.7027727815792084A25.2,25.2,0,0,0,3.479122547926227,-24.958679979047595A2,2,0,0,1,1.7562069895836316,-27.001604077872067Z"></path></g><g class="labelName"><text dy=".35em" style="opacity: 1; text-anchor: end;" transform="translate(-88.2,-56.99457025992695)">Mujeres</text><text dy=".35em" style="opacity: 1; text-anchor: start;" transform="translate(88.2,-55.25217969353111)">Hombres</text></g><g class="labelValue"></g><g class="lines"><polyline class="line" style="stroke: rgb(138, 137, 133);" points="-39.46584263823651,-40.710407328519246,-55.25217969353111,-56.99457025992695,-83.78999999999999,-56.99457025992695"></polyline><polyline class="line" style="stroke: rgb(138, 137, 133);" points="40.710407328519246,-39.46584263823651,56.99457025992695,-55.25217969353111,83.78999999999999,-55.25217969353111"></polyline></g></g></svg></div>
<style type="text/css">
path.slice {
    stroke-width: 2px;
}
polyline {
    stroke: #8A8985;
    stroke-width: 2px;
    fill: none;
}
.labelValue {
    font-size: 60%;
    opacity: .5;
}
.toolTip {
    position: absolute;
    display: none;
    width: auto;
    height: auto;
    background: none repeat scroll 0 0 white;
    border: 0 none;
    border-radius: 8px 8px 8px 8px;
    box-shadow: -3px 3px 15px #888888;
    color: black;
    font: 12px;
    padding: 5px;
    text-align: center;
}
text {
    font: 12px;
    color: #A9A9A9;
    font-family: Arial, sans-serif;
    fill: #A9A9A9;
}
        @-webkit-keyframes load8 {
            0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }
        @keyframes load8 {
            0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }
        .load-container {
            position: obsolute;
            overflow: hidden;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
}
        .loadercelda6108,
        .loadercelda6108:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda6108 {
            margin: 24px 160px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF8054;
            border-right: 1.1em solid #FF8054;
            border-bottom: 1.1em solid #FF8054;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script>
var globo_Grafico_sectores;
var text;
    function CalcularAnchoMargenesHorizontales(pSerieDatos, pAnchoGrafico) {
        var cadenaMayor = ';'
        var margenPixeles = 0;
        for (i = 0; i < pSerieDatos.length; i++)
        {
            if (pSerieDatos[i].nombreIndicadorContexto.length > cadenaMayor.length)
            {
                cadenaMayor = pSerieDatos[i].nombreIndicadorContexto;
            }
        }
        canvasMedicionAnchosH = d3.select("#capa_diagramacelda6108").append("canvas")
            .attr('id', 'canvasMedicionAnchosHcelda6108')
            .attr("visibility", "hidden")
            .attr("white-space", "nowrap")
        c = document.getElementById("canvasMedicionAnchosHcelda6108");
        ctx = c.getContext("2d");
        ctx.font = "12px Arial";
        txt = cadenaMayor + ' - '
        margenPixeles = ctx.measureText(txt).width;
        canvasMedicionAnchosH.remove();
        return margenPixeles;
    }
    function midAngle(d){
        return d.startAngle + (d.endAngle - d.startAngle)/2;
    }
    function hex (c) {
	    var s = "0123456789abcdef";
	    var i = parseInt (c);
	    if (i == 0 || isNaN (c))
	        return "00";
	    i = Math.round (Math.min (Math.max (0, i), 255));
	    return s.charAt ((i - i % 16) / 16) + s.charAt (i % 16);
    }
    function convertToHex (rgb) {
	    return hex(rgb[0]) + hex(rgb[1]) + hex(rgb[2]);
    }
    function trim (s) { return (s.charAt(0) == '#') ? s.substring(1, 7) : s }
    function convertToRGB (hex) {
	    var color = [];
	    color[0] = parseInt ((trim(hex)).substring (0, 2), 16);
	    color[1] = parseInt ((trim(hex)).substring (2, 4), 16);
	    color[2] = parseInt ((trim(hex)).substring (4, 6), 16);
	    return color;
    }
    function CalcularGradienteColores_DiagramaSectores2(colorStart,colorEnd,colorCount){
	    var start = convertToRGB (colorStart);    
	    var end   = convertToRGB (colorEnd);    
	    var len = colorCount;
	    var alpha = 0.0;
	    var gradiente = [];
	    for (i = 0; i <= len; i++) {
		    var c = [];
            if (i == 0)
            {
		        c[0] = end[0];
		        c[1] = end[1];
		        c[2] = end[2];
            }
            else if (i == len)
            {
		        c[0] = start[0];
		        c[1] = start[1];
		        c[2] = start[2];
            }
            else
            {
		        alpha += (1.0/len);
		        c[0] = start[0] * alpha + (1 - alpha) * end[0];
		        c[1] = start[1] * alpha + (1 - alpha) * end[1];
		        c[2] = start[2] * alpha + (1 - alpha) * end[2];
            }
		    gradiente.push( '#' + convertToHex (c));
	    }
	    return gradiente;
    }
    function CalcularPorcentajeValor(pArrayDatos, pValorCalculo)
    {
        var totalValor = 0;
        var porcentaje = 0;
        for (cElemento = 0; cElemento < pArrayDatos.length; cElemento++)
        {
            totalValor = totalValor + parseInt(pArrayDatos[cElemento].valor);
        }
        porcentaje = (100 * pValorCalculo) / totalValor;
        return  ((Math.round(porcentaje * 10) / 10) + '').replace('.',',');
    }
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=6108&pId_Territorio=00&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var svg;
        var arc;
        var outerArc;
        var pie;
        var slice;
        var polyline;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var width;
        var height;
        var radius;
        var color;
        var category;
        var element_capa_esperando;
        margenIzquierdo = CalcularAnchoMargenesHorizontales(data, 450);
        margenDerecho = margenIzquierdo;
        margenSuperior = 16;
        margenInferior = 16;
        width = 450 - margenIzquierdo - margenDerecho;
        height = 179 - margenSuperior - margenInferior;
        radius = (Math.min(width, height) * 0.6);
        element_capa_esperando = document.getElementById("capa_Esperandocelda6108");
        element_capa_esperando.classList.remove("loadercelda6108");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_DiagramaSectores2('#FFE9DF', '#FF8054', data.length - 1));
        arc = d3.arc()
            .outerRadius(radius)
            .innerRadius(radius / 3.5)
            .cornerRadius(2);
        pie = d3.pie()
            .sort(null)
            .value(function (d) { return d.valor; })
            .padAngle(0.02)
        .startAngle(-0.5 * Math.PI)
        .endAngle(0.5 * Math.PI)
        ;
        svg = d3.select('#capa_diagramacelda6108').append("svg")
            .attr('id', 'celda6108')
            .attr("width", 450)
            .attr("height", 179)
            .append("g")
        .attr("transform", "translate(225,143.2)")
        svg.append("g")
            .attr("class", "slices");
        svg.append("g")
            .attr("class", "labelName");
        svg.append("g")
            .attr("class", "labelValue");
        svg.append("g")
            .attr("class", "lines");
        outerArc = d3.arc()
            .innerRadius(radius * 0.9)
            .outerRadius(radius * 0.9);
        globo_Grafico_sectores = d3.select("body").append("div")
            .attr('id', 'globo_Grafico_sectores')
            .style('position', 'absolute')
            .style('padding', 6)
            .attr("class", "toolTip")
            .style('display', 'none');
    svg.select(".slices").selectAll("path.slice")
        .data(pie(data), function(d){
            return d.data.nombreIndicadorContexto
        })
    ;
    slice = svg.select(".slices").selectAll("path.slice")
        .data(pie(data), function(d){ return d.data.nombreIndicadorContexto });
    slice.enter()
        .append("path")
        .style("fill", function (d) { return color(d.data.nombreIndicadorContexto); })
        .on("mouseover", function(d){
            d3.select(this)
            .style("cursor", "default")
            .transition()
            .duration("150")
        .style("opacity", "0.5")
        })
        .on("mousemove", function(d){
            globo_Grafico_sectores.style("left", d3.event.pageX+10+"px");
            globo_Grafico_sectores.style("top", d3.event.pageY-25+"px");
            globo_Grafico_sectores.style("display", "inline-block");
            globo_Grafico_sectores.html(
                    (d.data.etiquetaperiodo) + ":&nbsp;" + (d.data.nombreperiodo) + "&nbsp;" + (d.data.anio) + "<br>" +                     (d.data.nombreIndicadorRecortado) + "<br><span style='display:block; margin-top:5px;'><b>" + (d.data.valorFormateado) + "</b>&nbsp;" + d.data.magnitudValor + "&nbsp;(" + CalcularPorcentajeValor(data, d.data.valor) +"%)</span>"                 );        })
        .on("mouseout", function(d){
            globo_Grafico_sectores.style("display", "none");
            d3.select(this)
                .style("cursor", "default")
                .transition()
                .duration("300")
                .style("opacity", "1")
            })
        .transition().delay(function(d, i) { return 0; }).duration(500)
        .attrTween('d', function(d) {
            var i = d3.interpolate(d.startAngle+0.1, d.endAngle);
            return function(t) {
                d.endAngle = i(t);
                return arc(d);
            }
        });
    ;
    text = svg.select(".labelName").selectAll("text")
        .data(pie(data), function(d){ return d.data.nombreIndicadorContexto });
    text.enter()
        .append("text")
        .attr("dy", ".35em")
        .text(function(d) {
            return (d.data.nombreIndicadorContexto);
        })
    .style("opacity", "0")
    .transition().duration(100)
    .attrTween("transform", function(d) {
        this._current = this._current || d;
        var interpolate = d3.interpolate(this._current, d);
        this._current = interpolate(0);
        return function(t) {
            var d2 = interpolate(t);
            var pos = outerArc.centroid(d2);
        pos[0] = radius * (midAngle(d2) > 0 ? 1 : -1);
            return "translate("+ pos +")";
        };
    })
    .styleTween("text-anchor", function(d){
        this._current = this._current || d;
        var interpolate = d3.interpolate(this._current, d);
        this._current = interpolate(0);
        return function(t) {
            var d2 = interpolate(t);
        return midAngle(d2) > 0 ? "start":"end";
        };
    })
    .transition()
    .duration(500)
    .style("opacity", "1")
    text
        .text(function(d) {
            return (d.data.nombreIndicadorContexto);
        });
    polyline = svg.select(".lines").selectAll("polyline")
        .data(pie(data), function(d){ return d.data.nombreIndicadorContexto });
    polyline.enter()
        .append("polyline")
        .style("stroke", "#8A8985")
        .attr("class", "line")
        .transition().duration(1000)
        .attrTween("points", function(d){
            this._current = this._current || d;
            var interpolate = d3.interpolate(this._current, d);
            this._current = interpolate(0);
            return function(t) {
                var d2 = interpolate(t);
                var pos = outerArc.centroid(d2);
            pos[0] = radius * 0.95 * (midAngle(d2) > 0 ? 1 : -1);
                return [arc.centroid(d2), outerArc.centroid(d2), pos];
            };
        });
});
</script>
</div>
<div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda6108&#39;), &#39;Población por sexo.png&#39;, {left: -20, width: 485, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga6108"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga6108").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="450" height="358"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda6108").html() + '</svg>'  )).attr("download", "Población por sexo.svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6108&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6108&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;6108&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Población por sexo</div>
</td>
</tr>
<tr>
<td class="separador"><br></td>
</tr>
<tr>
<td class="celda_tipo_fila_2"><div class="clase_capa_unidad_visualizacion" style="min-height: 179px;"><div id="capa_diagramacelda6109">
<div id="capa_Esperandocelda6109" class="load-container"></div>
<svg id="celda6109" width="450" height="179"><g transform="translate(225,143.2)"><g class="slices"><path style="fill: rgb(255, 128, 84);" d="M-86.15062092530526,-0.9172785578950173A2,2,0,0,1,-88.14947523911745,-2.984964835340377A88.2,88.2,0,0,1,36.03590390726039,-80.50250697702958A2,2,0,0,1,37.015516598182714,-77.7986016374207L11.053968316907987,-24.697786747342644A2,2,0,0,1,8.576537378124101,-23.695632648267484A25.2,25.2,0,0,0,-25.054640673758517,-2.7027727815792124A2,2,0,0,1,-27.043104219294907,-0.9172785578950209Z"></path><path style="fill: rgb(255, 180, 153);" d="M38.66363993747599,-76.99281675944601A2,2,0,0,1,41.39914953177787,-77.88035964250227A88.2,88.2,0,0,1,75.81072388865874,-45.07742387800734A2,2,0,0,1,75.05505959961472,-42.302587559943696L23.25699972851914,-13.830504307366393A2,2,0,0,1,20.65436469087977,-14.437354993770116A25.2,25.2,0,0,0,13.432753479315345,-21.32137739368499A2,2,0,0,1,12.702091656201253,-23.892001869367967Z"></path><path style="fill: rgb(255, 233, 223);" d="M75.93876552812091,-40.6948986463106A2,2,0,0,1,78.68643824900114,-39.845758063890905A88.2,88.2,0,0,1,88.14947523911746,-2.9849648353403793A2,2,0,0,1,86.15062092530526,-0.9172785578950191L27.043104219294907,-0.9172785578950191A2,2,0,0,1,25.054640673758517,-2.7027727815792084A25.2,25.2,0,0,0,23.25821529866882,-9.70027943518988A2,2,0,0,1,24.140705657025364,-12.222815393733285Z"></path></g><g class="labelName"><text dy=".35em" style="opacity: 1; text-anchor: end;" transform="translate(-88.2,-67.33805524759795)">16 - 64</text><text dy=".35em" style="opacity: 1; text-anchor: start;" transform="translate(88.2,-57.45704071777557)">65 y más</text><text dy=".35em" style="opacity: 1; text-anchor: start;" transform="translate(88.2,-19.738643022312264)">Menos de 16</text></g><g class="labelValue"></g><g class="lines"><polyline class="line" style="stroke: rgb(138, 137, 133);" points="-30.023551261344394,-48.09861089114139,-42.03297176588215,-67.33805524759795,-83.78999999999999,-67.33805524759795"></polyline><polyline class="line" style="stroke: rgb(138, 137, 133);" points="39.122210873760196,-41.04074336983969,54.771095223264275,-57.45704071777557,83.78999999999999,-57.45704071777557"></polyline><polyline class="line" style="stroke: rgb(138, 137, 133);" points="54.91909806677661,-14.099030730223046,76.88673729348726,-19.738643022312264,83.78999999999999,-19.738643022312264"></polyline></g></g></svg></div>
<style type="text/css">
path.slice {
    stroke-width: 2px;
}
polyline {
    stroke: #8A8985;
    stroke-width: 2px;
    fill: none;
}
.labelValue {
    font-size: 60%;
    opacity: .5;
}
.toolTip {
    position: absolute;
    display: none;
    width: auto;
    height: auto;
    background: none repeat scroll 0 0 white;
    border: 0 none;
    border-radius: 8px 8px 8px 8px;
    box-shadow: -3px 3px 15px #888888;
    color: black;
    font: 12px;
    padding: 5px;
    text-align: center;
}
text {
    font: 12px;
    color: #A9A9A9;
    font-family: Arial, sans-serif;
    fill: #A9A9A9;
}
        @-webkit-keyframes load8 {
            0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }
        @keyframes load8 {
            0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }
        .load-container {
            position: obsolute;
            overflow: hidden;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
}
        .loadercelda6109,
        .loadercelda6109:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda6109 {
            margin: 24px 160px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF8054;
            border-right: 1.1em solid #FF8054;
            border-bottom: 1.1em solid #FF8054;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script>
var globo_Grafico_sectores;
var text;
    function CalcularAnchoMargenesHorizontales(pSerieDatos, pAnchoGrafico) {
        var cadenaMayor = ';'
        var margenPixeles = 0;
        for (i = 0; i < pSerieDatos.length; i++)
        {
            if (pSerieDatos[i].nombreIndicadorContexto.length > cadenaMayor.length)
            {
                cadenaMayor = pSerieDatos[i].nombreIndicadorContexto;
            }
        }
        canvasMedicionAnchosH = d3.select("#capa_diagramacelda6109").append("canvas")
            .attr('id', 'canvasMedicionAnchosHcelda6109')
            .attr("visibility", "hidden")
            .attr("white-space", "nowrap")
        c = document.getElementById("canvasMedicionAnchosHcelda6109");
        ctx = c.getContext("2d");
        ctx.font = "12px Arial";
        txt = cadenaMayor + ' - '
        margenPixeles = ctx.measureText(txt).width;
        canvasMedicionAnchosH.remove();
        return margenPixeles;
    }
    function midAngle(d){
        return d.startAngle + (d.endAngle - d.startAngle)/2;
    }
    function hex (c) {
	    var s = "0123456789abcdef";
	    var i = parseInt (c);
	    if (i == 0 || isNaN (c))
	        return "00";
	    i = Math.round (Math.min (Math.max (0, i), 255));
	    return s.charAt ((i - i % 16) / 16) + s.charAt (i % 16);
    }
    function convertToHex (rgb) {
	    return hex(rgb[0]) + hex(rgb[1]) + hex(rgb[2]);
    }
    function trim (s) { return (s.charAt(0) == '#') ? s.substring(1, 7) : s }
    function convertToRGB (hex) {
	    var color = [];
	    color[0] = parseInt ((trim(hex)).substring (0, 2), 16);
	    color[1] = parseInt ((trim(hex)).substring (2, 4), 16);
	    color[2] = parseInt ((trim(hex)).substring (4, 6), 16);
	    return color;
    }
    function CalcularGradienteColores_DiagramaSectores2(colorStart,colorEnd,colorCount){
	    var start = convertToRGB (colorStart);    
	    var end   = convertToRGB (colorEnd);    
	    var len = colorCount;
	    var alpha = 0.0;
	    var gradiente = [];
	    for (i = 0; i <= len; i++) {
		    var c = [];
            if (i == 0)
            {
		        c[0] = end[0];
		        c[1] = end[1];
		        c[2] = end[2];
            }
            else if (i == len)
            {
		        c[0] = start[0];
		        c[1] = start[1];
		        c[2] = start[2];
            }
            else
            {
		        alpha += (1.0/len);
		        c[0] = start[0] * alpha + (1 - alpha) * end[0];
		        c[1] = start[1] * alpha + (1 - alpha) * end[1];
		        c[2] = start[2] * alpha + (1 - alpha) * end[2];
            }
		    gradiente.push( '#' + convertToHex (c));
	    }
	    return gradiente;
    }
    function CalcularPorcentajeValor(pArrayDatos, pValorCalculo)
    {
        var totalValor = 0;
        var porcentaje = 0;
        for (cElemento = 0; cElemento < pArrayDatos.length; cElemento++)
        {
            totalValor = totalValor + parseInt(pArrayDatos[cElemento].valor);
        }
        porcentaje = (100 * pValorCalculo) / totalValor;
        return  ((Math.round(porcentaje * 10) / 10) + '').replace('.',',');
    }
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=6109&pId_Territorio=00&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var svg;
        var arc;
        var outerArc;
        var pie;
        var slice;
        var polyline;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var width;
        var height;
        var radius;
        var color;
        var category;
        var element_capa_esperando;
        margenIzquierdo = CalcularAnchoMargenesHorizontales(data, 450);
        margenDerecho = margenIzquierdo;
        margenSuperior = 16;
        margenInferior = 16;
        width = 450 - margenIzquierdo - margenDerecho;
        height = 179 - margenSuperior - margenInferior;
        radius = (Math.min(width, height) * 0.6);
        element_capa_esperando = document.getElementById("capa_Esperandocelda6109");
        element_capa_esperando.classList.remove("loadercelda6109");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_DiagramaSectores2('#FFE9DF', '#FF8054', data.length - 1));
        arc = d3.arc()
            .outerRadius(radius)
            .innerRadius(radius / 3.5)
            .cornerRadius(2);
        pie = d3.pie()
            .sort(null)
            .value(function (d) { return d.valor; })
            .padAngle(0.02)
        .startAngle(-0.5 * Math.PI)
        .endAngle(0.5 * Math.PI)
        ;
        svg = d3.select('#capa_diagramacelda6109').append("svg")
            .attr('id', 'celda6109')
            .attr("width", 450)
            .attr("height", 179)
            .append("g")
        .attr("transform", "translate(225,143.2)")
        svg.append("g")
            .attr("class", "slices");
        svg.append("g")
            .attr("class", "labelName");
        svg.append("g")
            .attr("class", "labelValue");
        svg.append("g")
            .attr("class", "lines");
        outerArc = d3.arc()
            .innerRadius(radius * 0.9)
            .outerRadius(radius * 0.9);
        globo_Grafico_sectores = d3.select("body").append("div")
            .attr('id', 'globo_Grafico_sectores')
            .style('position', 'absolute')
            .style('padding', 6)
            .attr("class", "toolTip")
            .style('display', 'none');
    svg.select(".slices").selectAll("path.slice")
        .data(pie(data), function(d){
            return d.data.nombreIndicadorContexto
        })
    ;
    slice = svg.select(".slices").selectAll("path.slice")
        .data(pie(data), function(d){ return d.data.nombreIndicadorContexto });
    slice.enter()
        .append("path")
        .style("fill", function (d) { return color(d.data.nombreIndicadorContexto); })
        .on("mouseover", function(d){
            d3.select(this)
            .style("cursor", "default")
            .transition()
            .duration("150")
        .style("opacity", "0.5")
        })
        .on("mousemove", function(d){
            globo_Grafico_sectores.style("left", d3.event.pageX+10+"px");
            globo_Grafico_sectores.style("top", d3.event.pageY-25+"px");
            globo_Grafico_sectores.style("display", "inline-block");
            globo_Grafico_sectores.html(
                    (d.data.etiquetaperiodo) + ":&nbsp;" + (d.data.nombreperiodo) + "&nbsp;" + (d.data.anio) + "<br>" +                     (d.data.nombreIndicadorRecortado) + "<br><span style='display:block; margin-top:5px;'><b>" + (d.data.valorFormateado) + "</b>&nbsp;" + d.data.magnitudValor + "&nbsp;(" + CalcularPorcentajeValor(data, d.data.valor) +"%)</span>"                 );        })
        .on("mouseout", function(d){
            globo_Grafico_sectores.style("display", "none");
            d3.select(this)
                .style("cursor", "default")
                .transition()
                .duration("300")
                .style("opacity", "1")
            })
        .transition().delay(function(d, i) { return 0; }).duration(500)
        .attrTween('d', function(d) {
            var i = d3.interpolate(d.startAngle+0.1, d.endAngle);
            return function(t) {
                d.endAngle = i(t);
                return arc(d);
            }
        });
    ;
    text = svg.select(".labelName").selectAll("text")
        .data(pie(data), function(d){ return d.data.nombreIndicadorContexto });
    text.enter()
        .append("text")
        .attr("dy", ".35em")
        .text(function(d) {
            return (d.data.nombreIndicadorContexto);
        })
    .style("opacity", "0")
    .transition().duration(100)
    .attrTween("transform", function(d) {
        this._current = this._current || d;
        var interpolate = d3.interpolate(this._current, d);
        this._current = interpolate(0);
        return function(t) {
            var d2 = interpolate(t);
            var pos = outerArc.centroid(d2);
        pos[0] = radius * (midAngle(d2) > 0 ? 1 : -1);
            return "translate("+ pos +")";
        };
    })
    .styleTween("text-anchor", function(d){
        this._current = this._current || d;
        var interpolate = d3.interpolate(this._current, d);
        this._current = interpolate(0);
        return function(t) {
            var d2 = interpolate(t);
        return midAngle(d2) > 0 ? "start":"end";
        };
    })
    .transition()
    .duration(500)
    .style("opacity", "1")
    text
        .text(function(d) {
            return (d.data.nombreIndicadorContexto);
        });
    polyline = svg.select(".lines").selectAll("polyline")
        .data(pie(data), function(d){ return d.data.nombreIndicadorContexto });
    polyline.enter()
        .append("polyline")
        .style("stroke", "#8A8985")
        .attr("class", "line")
        .transition().duration(1000)
        .attrTween("points", function(d){
            this._current = this._current || d;
            var interpolate = d3.interpolate(this._current, d);
            this._current = interpolate(0);
            return function(t) {
                var d2 = interpolate(t);
                var pos = outerArc.centroid(d2);
            pos[0] = radius * 0.95 * (midAngle(d2) > 0 ? 1 : -1);
                return [arc.centroid(d2), outerArc.centroid(d2), pos];
            };
        });
});
</script>
</div><div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda6109&#39;), &#39;Población por grandes grupos de edad.png&#39;, {left: -20, width: 485, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga6109"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga6109").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="450" height="358"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda6109").html() + '</svg>'  )).attr("download", "Población por grandes grupos de edad.svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6109&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6109&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;6109&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Población por grandes grupos de edad</div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_2722" class="anchor"></a></td></tr><tr><td class="celda_sin_estilos" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 140px;"><table class="Tablas_datos"><tbody><tr class="Tablas_datos_cabecera"><td class="columna_izquierda"><h4 class="h4_grande">Porcentaje de población extranjera</h4></td><td class="columna_derecha"><h4 class="h4_muy_grande negativos_ie">10,7 %</h4></td></tr><tr><td colspan="2"><table class="Subtitulo_indicador"><tbody><tr><td class="columna_estrecha">Periodo:</td><td class="columna_ancha negrita">Anual&nbsp;2019</td><td class="columna_izquierda columna_estrecha">Crecimiento interanual:</td><td class="columna_centro texto_muy_grande negativos_ie">5,7%</td><td class="columna_derecha"><img class="imagen_tendencia" src="./www.portalestadistico.com_files/crecimiento_arriba.png" alt="Estabilidad"></td></tr><tr><td class="columna_estrecha">Fuente:</td><td colspan="4" class="negrita">INE, Revisión del Padrón Municipal.</td></tr></tbody></table></td></tr><tr><td colspan="2"><p class="texto_contenido">Porcentaje de extranjeros sobre el total de la población.</p></td></tr></tbody></table></div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_5863" class="anchor"></a></td></tr><tr><td class="celda_tipo_fila_1" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 222px;"><div id="capa_Grafico_Evolucion_Lineas_Asincronocelda5863">
<div id="capa_Esperandocelda5863" class="load-container"></div>
<svg id="celda5863" width="969" height="222"><g transform="translate(34.01953125, 40)"><g class="fuente_generica" transform="translate(0,162)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#A9A9A9" d="M0.5,-162V0.5H905.48046875V-162" stroke-width="1.5" opacity="0.5"></path><g class="tick" opacity="1" transform="translate(57.022565211113964,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2004</text></g><g class="tick" opacity="1" transform="translate(170.22255197638606,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2006</text></g><g class="tick" opacity="1" transform="translate(283.267682398614,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2008</text></g><g class="tick" opacity="1" transform="translate(396.467669163886,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2010</text></g><g class="tick" opacity="1" transform="translate(509.51279958611394,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2012</text></g><g class="tick" opacity="1" transform="translate(622.7127863513861,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2014</text></g><g class="tick" opacity="1" transform="translate(735.7579167736139,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2016</text></g><g class="tick" opacity="1" transform="translate(848.9579035388861,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2018</text></g></g><g class="fuente_generica" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,153.68333840072972)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">6</text></g><g class="tick" opacity="1" transform="translate(0,104.42824566737612)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">8</text></g><g class="tick" opacity="1" transform="translate(0,55.173152934022525)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">10</text></g><g class="tick" opacity="1" transform="translate(0,5.9180602006689185)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">12</text></g></g><g><path class="line linecelda5863" d="M0,147.27272727272728L56.522565211113964,128.06324110671937L113.19998676527207,92.59957433870477L169.72255197638606,72.65126178169659L226.2451171875,54.673152934022525L282.767682398614,19.948312557008222L339.4451039527721,3.447856491334761L395.967669163886,0L452.490234375,0.7388263910003445L509.01279958611394,1.9702037093341573L565.690221140272,11.082395865004571L622.2127863513861,36.44876862268167L678.7353515625,51.225296442687736L735.2579167736139,56.643356643356654L791.935338327772,59.10611128002434L848.4579035388861,51.47157190635451L904.98046875,37.18759501368197" data-legend="España" style="stroke: rgb(255, 171, 133);" stroke-dasharray="947.4954223632812, 947.4954223632812"></path></g><g class="circle-group" style="fill: rgb(255, 171, 133);"><circle class="dot" cx="0" cy="147.27272727272728" r="3" style="opacity: 0;"></circle><circle class="dot" cx="56.522565211113964" cy="128.06324110671937" r="3" style="opacity: 0;"></circle><circle class="dot" cx="113.19998676527207" cy="92.59957433870477" r="3" style="opacity: 0;"></circle><circle class="dot" cx="169.72255197638606" cy="72.65126178169659" r="3" style="opacity: 0;"></circle><circle class="dot" cx="226.2451171875" cy="54.673152934022525" r="3" style="opacity: 0;"></circle><circle class="dot" cx="282.767682398614" cy="19.948312557008222" r="3" style="opacity: 0;"></circle><circle class="dot" cx="339.4451039527721" cy="3.447856491334761" r="3" style="opacity: 0;"></circle><circle class="dot" cx="395.967669163886" cy="0" r="3" style="opacity: 0;"></circle><circle class="dot" cx="452.490234375" cy="0.7388263910003445" r="3" style="opacity: 0;"></circle><circle class="dot" cx="509.01279958611394" cy="1.9702037093341573" r="3" style="opacity: 0;"></circle><circle class="dot" cx="565.690221140272" cy="11.082395865004571" r="3" style="opacity: 0;"></circle><circle class="dot" cx="622.2127863513861" cy="36.44876862268167" r="3" style="opacity: 0;"></circle><circle class="dot" cx="678.7353515625" cy="51.225296442687736" r="3" style="opacity: 0;"></circle><circle class="dot" cx="735.2579167736139" cy="56.643356643356654" r="3" style="opacity: 0;"></circle><circle class="dot" cx="791.935338327772" cy="59.10611128002434" r="3" style="opacity: 0;"></circle><circle class="dot" cx="848.4579035388861" cy="51.47157190635451" r="3" style="opacity: 0;"></circle><circle class="dot" cx="904.98046875" cy="37.18759501368197" r="3" style="opacity: 0;"></circle></g><g><path class="mouse-linecelda5863" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 1;"></path><path class="mouse-line-horizontalcelda5863" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 1;"></path><g class="mouse-per-linecelda5863"><circle r="4" style="stroke: rgb(255, 171, 133); fill: rgb(255, 255, 255); stroke-width: 3px; opacity: 0;"></circle><text text-anchor="middle" transform="translate(10,3)" style="font-size: 16px; text-decoration: underline;"></text></g><rect id="rectcelda5863" width="904.98046875" height="162" fill="none" pointer-events="all"></rect></g></g></svg></div>
<style type="text/css">
        .linecelda5863 {
            fill: none;
            stroke: #FF6E2B;
            stroke-width: 2;
        }
        .loadercelda5863,
        .loadercelda5863:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda5863 {
            margin: 46px 420px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF6E2B;
            border-right: 1.1em solid #FF6E2B;
            border-bottom: 1.1em solid #FF6E2B;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script>
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=5863&pId_Territorio=00;&pId_Territorio_Padre=&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var linea_grafico;
        var svg;
        var seriesLineas;
        var lineaCero;
        var lineas_series;
        var nElementosPorSerie;
        var puntosAislados;
        var lineasVertHorRaton;
        var ratonPorLinea;
        var ejeX;
        var ejeY;
        var cDimensionExt = 0
        var valorMinimoDatos = 0;
        var valorMaximoDatos = 0;
        var fechaMaximo;
        var fechaMinimo;
        var calculo_maxmin;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var nCortes = 0;
        var nPuntosEjeX = 0;
        var parseDate = d3.timeParse("%Y/%m/%d");
        var margin;
        var width;
        var height;
        var color;
        var category;
        var element_capa_esperando;
       var anchoNodos;
       var svgLeyendaHorizontal;
       var svgLegend;
       var legend;
        element_capa_esperando = document.getElementById("capa_Esperandocelda5863");
        element_capa_esperando.classList.remove("loadercelda5863");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_GraficoEvolucionLineas2('#FFE9DF', '#FF6E2B', category.length));
        data.forEach(function (d) {
            d.fecha_periodo_serie = parseDate(d.fecha_periodo_serie);
            nCortes++;
            nPuntosEjeX++;
        });
        if (nCortes > 7){
            nCortes = 7;
        }
        //* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        color.domain(d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); }));
        calculo_maxmin = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        valorMaximoDatos = CalcularMaximoDatos(calculo_maxmin, false)
        valorMinimoDatos = CalcularMinimoDatos(calculo_maxmin, false, true);
        margenIzquierdo = CalcularAnchoMargenIzquierdo_GraficoLineas(format("#.##0,0",valorMaximoDatos), format("#.##0,0",valorMinimoDatos), 969);
        margenDerecho = CalcularAnchoMargenDerecho_GraficoLineas(category, 969);
        if (category.length > 1 && 969 > 222) 
        {
            margenSuperior = 40;
            margenInferior = 20;
        }
        else if (category.length == 1 && 969 > 222) 
        {
            margenDerecho = 30 
            margenSuperior = 40;
            margenInferior = 20;
        }
        else 
        {
            margenDerecho = 30 
            margenSuperior = 50;
            margenInferior = 50;
        }
        fechaMaximo = d3.max(calculo_maxmin, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.fecha;
            });
        });
        fechaMinimo = d3.min(calculo_maxmin, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.fecha;
            });
        });
        margin = { top: margenSuperior, right: margenDerecho, bottom: margenInferior, left: margenIzquierdo };
        width = 969 - margin.left - margin.right;
        height = 222 - margin.top - margin.bottom;
        ejeX = d3.scaleTime().range([0, width]);
        ejeY = d3.scaleLinear().range([height, 0]);
        linea_grafico = d3.line()
            .x(function (d) { return ejeX(d.fecha); })
            .y(function (d) { return ejeY(d.valor_serie); })
            .defined(function (d) { return !isNaN(d.valor_serie); })
            ;
                // 1.Add the SVG To the page And employ #2
        svg = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda5863").append("svg")
            .attr('id', 'celda5863')
            .attr("width", 969)
            .attr("height", 222)
            .append("g")
            .attr("transform", "translate(" + margin.left + ", " + margin.top + ")");
        seriesLineas = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, etiquetaperiodo: d.etiquetaperiodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        nElementosPorSerie = seriesLineas[0].values.length - 1;
        ejeX.domain([fechaMinimo, fechaMaximo]);
        ejeY.domain([valorMinimoDatos, valorMaximoDatos]);
                // Leyenda, eje de las X, puntos y leyenda de estos puntos:
        svg.append("g")
            .attr("class", "fuente_generica")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom().scale(ejeX).tickSize(-height).ticks(nCortes))
            .call(
                g => {
                    g.selectAll("text")
                        .style("text-anchor", "middle")
                        .attr("y", "5")
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 1.5)
                        .attr('opacity', 0.5)
                }
            )
        ;
        svg.append("g")
            .attr("class", "fuente_generica")
            .call(d3.axisLeft(ejeY).ticks(4).tickSize(-width))
            .call(
                g => {
                    g.selectAll("text")
                        .attr("x", -3)
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain").remove()
                }
            )
        ;
        svg.selectAll("text").attr('fill', '#A9A9A9');
        if (category.length > 1 ) 
        {
            svgLegend = svg.append('g')
                .attr('class', 'gLegend')
                .attr("transform", "translate(" + (width + 20) + "," + 0 + ")");
            legend = svgLegend.selectAll('.legend')
                .data(category)
                .enter().append('g')
                .attr("class", "legend")
                .attr("transform", function (d, i) { return "translate(0," + i * 20 + ")" });
            legend.append('rect')
                .style('fill', d => color(d))
                .attr('x', 0)
                .attr('y', 0)
                .attr('width', 10)
                .attr('height', 10);
            legend.append("text")
                .attr("class", "legend-text")
                .attr("x", 15)
                .attr("y", 10)
                .text(d => d)
        }
        if (valorMaximoDatos > 0 && valorMinimoDatos < 0 ) 
        {
            lineaCero = svg.append("line")
            .attr('id', 'lineaCero')
            .attr("x1", 0)
            .attr("y1", ejeY(0))
            .attr("x2", width)
            .attr("y2", ejeY(0))
            .attr("stroke-width", "1px")
            .attr("stroke", "#A9A9A9")
            .style("stroke-dasharray", ("5, 3"))
            ;
        }
        lineas_series = svg.selectAll(".lineas_series")
            .data(seriesLineas)
            .enter().append("g")
            ;
        lineas_series.append("path")
            .attr("class", "line linecelda5863")
            .attr("d", function (d) { return linea_grafico(d.values); })
            .attr("data-legend", function (d) { return d.name })
            .style("stroke", function (d) { return color(d.name); });
        puntosAislados = svg.selectAll(".dot")
            .data(seriesLineas).enter()
            .append("g")
            .attr('class', 'circle-group')
            .style("fill", function (d, i1) {
                return color(d.name);
            })
            ;
        puntosAislados.selectAll(".dot")
            .data(d => d.values).enter()
            .append("circle") // Uses the enter().append() method
            .attr("class", "dot") // Assign a class for styling
            .attr("cx", function (d, i) { return ejeX(d.fecha) })
            .attr("cy", function (d) { return ejeY(d.valor_serie) })
            .attr("r", 3)
            .style("opacity", function (d, i) {
                if (i == 0) {
                    cDimensionExt++;
                }
                if (d.valor_serie == "'null'" || isNaN(d.valor_serie)) {
                    return "0";
                }
                else {
                    if (i > 0 && i < nElementosPorSerie) {
                        if ((seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie)) && (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie))) {
                            return "1";
                        }
                        else {
                            return "0";
                        }
                    }
                    else {
                        if (i == 0) {
                            if (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie)) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                        else {
                            if (i == nElementosPorSerie && (seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie))) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                    }
                }
            })
            ;
        transition(d3.selectAll(".linecelda5863"));
        lineasVertHorRaton = svg.append("g"); 
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-linecelda5863")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-line-horizontalcelda5863")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        ratonPorLinea = lineasVertHorRaton.selectAll(".mouse-per-linecelda5863")
            .data(seriesLineas)
            .enter()
            .append("g")
            .attr("class", "mouse-per-linecelda5863");
            //Tabulación descuadrada:
                ratonPorLinea.append("circle")
                    .attr("r", 4)
                    .style("stroke", function (d) {
                        return color(d.name);
                    })
                    .style("fill", "#FFFFFF")
                    .style("stroke-width", "3px")
                    .style("opacity", "0");
                ratonPorLinea.append("text")
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("text-decoration", "underline")
                    .attr("transform", "translate(10,3)");
                lineasVertHorRaton.append("rect")
                    .attr('id', 'rectcelda5863')
                    .attr("width", width)
                    .attr("height", height)
                    .attr("fill", "none")
                    .attr("pointer-events", "all")
                    .on("mouseout", function () {
                        d3.select(".mouse-linecelda5863").style("opacity", "0");
                        d3.select(".mouse-line-horizontalcelda5863").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5863 circle").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5863 text").style("opacity", "0");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'none');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'none');
                    })
                    .on("mouseover", function () {
                        d3.select(".mouse-linecelda5863").style("opacity", "0.65");
                        d3.select(".mouse-line-horizontalcelda5863").style("opacity", "0.65");
                        d3.selectAll(".mouse-per-linecelda5863 circle").style("opacity", "1");
                        d3.selectAll(".mouse-per-linecelda5863 text").style("opacity", "1");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'block');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'block');
                        ActualizarLineasPuntos('celda5863', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    })
                    .on("mousemove", function () {
                        ActualizarLineasPuntos('celda5863', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    });
            }
        );
</script>
</div><div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda5863&#39;), &#39;Porcentaje de población de nacionalidad extranjera (%).png&#39;, {left: -20, width: 1004, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga5863"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga5863").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="969" height="444"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda5863").html() + '</svg>'  )).attr("download", "Porcentaje de población de nacionalidad extranjera (%).svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5863&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5863&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;5863&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Porcentaje de población de nacionalidad extranjera (%)</div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_2724" class="anchor"></a></td></tr><tr><td class="celda_sin_estilos" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 140px;"><table class="Tablas_datos"><tbody><tr class="Tablas_datos_cabecera"><td class="columna_izquierda"><h4 class="h4_grande">Porcentaje de población de 65 y más años</h4></td><td class="columna_derecha"><h4 class="h4_muy_grande negativos_ie">19,3 %</h4></td></tr><tr><td colspan="2"><table class="Subtitulo_indicador"><tbody><tr><td class="columna_estrecha">Periodo:</td><td class="columna_ancha negrita">Anual&nbsp;2019</td><td class="columna_izquierda columna_estrecha">Crecimiento interanual:</td><td class="columna_centro texto_muy_grande negativos_ie">1,0%</td><td class="columna_derecha"><img class="imagen_tendencia" src="./www.portalestadistico.com_files/crecimiento_arriba.png" alt="Estabilidad"></td></tr><tr><td class="columna_estrecha">Fuente:</td><td colspan="4" class="negrita">Elaboración propia con datos del INE</td></tr></tbody></table></td></tr><tr><td colspan="2"><p class="texto_contenido">Porcentaje del grupo de edad sobre la población total.</p></td></tr></tbody></table></div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_5864" class="anchor"></a></td></tr><tr><td class="celda_tipo_fila_1" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 222px;"><div id="capa_Grafico_Evolucion_Lineas_Asincronocelda5864">
<div id="capa_Esperandocelda5864" class="load-container"></div>
<svg id="celda5864" width="969" height="222"><g transform="translate(34.01953125, 40)"><g class="fuente_generica" transform="translate(0,162)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#A9A9A9" d="M0.5,-162V0.5H905.48046875V-162" stroke-width="1.5" opacity="0.5"></path><g class="tick" opacity="1" transform="translate(65.10353434260708,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2006</text></g><g class="tick" opacity="1" transform="translate(194.31060302782123,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2008</text></g><g class="tick" opacity="1" transform="translate(323.6946676975357,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2010</text></g><g class="tick" opacity="1" transform="translate(452.90173638274985,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2012</text></g><g class="tick" opacity="1" transform="translate(582.2858010524643,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2014</text></g><g class="tick" opacity="1" transform="translate(711.4928697376785,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2016</text></g><g class="tick" opacity="1" transform="translate(840.8769344073929,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2018</text></g></g><g class="fuente_generica" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,122.86631016042786)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">17</text></g><g class="tick" opacity="1" transform="translate(0,68.7219251336899)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">18</text></g><g class="tick" opacity="1" transform="translate(0,14.577540106951943)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">19</text></g></g><g><path class="line linecelda5864" d="M0,142.94117647058823L64.60353434260708,136.44385026737982L129.20706868521415,140.77540106951875L193.81060302782123,147.27272727272737L258.5911333549286,141.3168449197862L323.1946676975357,129.40508021390374L387.79820204014277,114.24465240641723L452.40173638274985,100.70855614973274L517.1822667098572,85.0066844919786L581.7858010524643,65.51470588235296L646.3893353950714,47.105614973262064L710.9928697376785,35.73529411764706L775.7734000647858,23.823529411764753L840.3769344073929,10.82887700534775L904.98046875,0" data-legend="España" style="stroke: rgb(255, 171, 133);" stroke-dasharray="921.8956298828125, 921.8956298828125"></path></g><g class="circle-group" style="fill: rgb(255, 171, 133);"><circle class="dot" cx="0" cy="142.94117647058823" r="3" style="opacity: 0;"></circle><circle class="dot" cx="64.60353434260708" cy="136.44385026737982" r="3" style="opacity: 0;"></circle><circle class="dot" cx="129.20706868521415" cy="140.77540106951875" r="3" style="opacity: 0;"></circle><circle class="dot" cx="193.81060302782123" cy="147.27272727272737" r="3" style="opacity: 0;"></circle><circle class="dot" cx="258.5911333549286" cy="141.3168449197862" r="3" style="opacity: 0;"></circle><circle class="dot" cx="323.1946676975357" cy="129.40508021390374" r="3" style="opacity: 0;"></circle><circle class="dot" cx="387.79820204014277" cy="114.24465240641723" r="3" style="opacity: 0;"></circle><circle class="dot" cx="452.40173638274985" cy="100.70855614973274" r="3" style="opacity: 0;"></circle><circle class="dot" cx="517.1822667098572" cy="85.0066844919786" r="3" style="opacity: 0;"></circle><circle class="dot" cx="581.7858010524643" cy="65.51470588235296" r="3" style="opacity: 0;"></circle><circle class="dot" cx="646.3893353950714" cy="47.105614973262064" r="3" style="opacity: 0;"></circle><circle class="dot" cx="710.9928697376785" cy="35.73529411764706" r="3" style="opacity: 0;"></circle><circle class="dot" cx="775.7734000647858" cy="23.823529411764753" r="3" style="opacity: 0;"></circle><circle class="dot" cx="840.3769344073929" cy="10.82887700534775" r="3" style="opacity: 0;"></circle><circle class="dot" cx="904.98046875" cy="0" r="3" style="opacity: 0;"></circle></g><g><path class="mouse-linecelda5864" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M387.79820204014277,162 387.79820204014277,0"></path><path class="mouse-line-horizontalcelda5864" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M904.98046875,15 0,15"></path><g class="mouse-per-linecelda5864" transform="translate(387.79820204014277,114.24465240641723)" style="opacity: 1;"><circle r="4" style="stroke: rgb(255, 171, 133); fill: rgb(255, 255, 255); stroke-width: 3px; opacity: 0;"></circle><text text-anchor="middle" transform="translate(10,3)" style="font-size: 16px; text-decoration: underline; opacity: 0;"></text></g><rect id="rectcelda5864" width="904.98046875" height="162" fill="none" pointer-events="all"></rect></g></g></svg></div>
<style type="text/css">
        .linecelda5864 {
            fill: none;
            stroke: #FF6E2B;
            stroke-width: 2;
        }
        .loadercelda5864,
        .loadercelda5864:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda5864 {
            margin: 46px 420px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF6E2B;
            border-right: 1.1em solid #FF6E2B;
            border-bottom: 1.1em solid #FF6E2B;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script>
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=5864&pId_Territorio=00;&pId_Territorio_Padre=&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var linea_grafico;
        var svg;
        var seriesLineas;
        var lineaCero;
        var lineas_series;
        var nElementosPorSerie;
        var puntosAislados;
        var lineasVertHorRaton;
        var ratonPorLinea;
        var ejeX;
        var ejeY;
        var cDimensionExt = 0
        var valorMinimoDatos = 0;
        var valorMaximoDatos = 0;
        var fechaMaximo;
        var fechaMinimo;
        var calculo_maxmin;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var nCortes = 0;
        var nPuntosEjeX = 0;
        var parseDate = d3.timeParse("%Y/%m/%d");
        var margin;
        var width;
        var height;
        var color;
        var category;
        var element_capa_esperando;
       var anchoNodos;
       var svgLeyendaHorizontal;
       var svgLegend;
       var legend;
        element_capa_esperando = document.getElementById("capa_Esperandocelda5864");
        element_capa_esperando.classList.remove("loadercelda5864");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_GraficoEvolucionLineas2('#FFE9DF', '#FF6E2B', category.length));
        data.forEach(function (d) {
            d.fecha_periodo_serie = parseDate(d.fecha_periodo_serie);
            nCortes++;
            nPuntosEjeX++;
        });
        if (nCortes > 7){
            nCortes = 7;
        }
        //* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        color.domain(d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); }));
        calculo_maxmin = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        valorMaximoDatos = CalcularMaximoDatos(calculo_maxmin, false)
        valorMinimoDatos = CalcularMinimoDatos(calculo_maxmin, false, true);
        margenIzquierdo = CalcularAnchoMargenIzquierdo_GraficoLineas(format("#.##0,0",valorMaximoDatos), format("#.##0,0",valorMinimoDatos), 969);
        margenDerecho = CalcularAnchoMargenDerecho_GraficoLineas(category, 969);
        if (category.length > 1 && 969 > 222) 
        {
            margenSuperior = 40;
            margenInferior = 20;
        }
        else if (category.length == 1 && 969 > 222) 
        {
            margenDerecho = 30 
            margenSuperior = 40;
            margenInferior = 20;
        }
        else 
        {
            margenDerecho = 30 
            margenSuperior = 50;
            margenInferior = 50;
        }
        fechaMaximo = d3.max(calculo_maxmin, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.fecha;
            });
        });
        fechaMinimo = d3.min(calculo_maxmin, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.fecha;
            });
        });
        margin = { top: margenSuperior, right: margenDerecho, bottom: margenInferior, left: margenIzquierdo };
        width = 969 - margin.left - margin.right;
        height = 222 - margin.top - margin.bottom;
        ejeX = d3.scaleTime().range([0, width]);
        ejeY = d3.scaleLinear().range([height, 0]);
        linea_grafico = d3.line()
            .x(function (d) { return ejeX(d.fecha); })
            .y(function (d) { return ejeY(d.valor_serie); })
            .defined(function (d) { return !isNaN(d.valor_serie); })
            ;
                // 1.Add the SVG To the page And employ #2
        svg = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda5864").append("svg")
            .attr('id', 'celda5864')
            .attr("width", 969)
            .attr("height", 222)
            .append("g")
            .attr("transform", "translate(" + margin.left + ", " + margin.top + ")");
        seriesLineas = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, etiquetaperiodo: d.etiquetaperiodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        nElementosPorSerie = seriesLineas[0].values.length - 1;
        ejeX.domain([fechaMinimo, fechaMaximo]);
        ejeY.domain([valorMinimoDatos, valorMaximoDatos]);
                // Leyenda, eje de las X, puntos y leyenda de estos puntos:
        svg.append("g")
            .attr("class", "fuente_generica")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom().scale(ejeX).tickSize(-height).ticks(nCortes))
            .call(
                g => {
                    g.selectAll("text")
                        .style("text-anchor", "middle")
                        .attr("y", "5")
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 1.5)
                        .attr('opacity', 0.5)
                }
            )
        ;
        svg.append("g")
            .attr("class", "fuente_generica")
            .call(d3.axisLeft(ejeY).ticks(4).tickSize(-width))
            .call(
                g => {
                    g.selectAll("text")
                        .attr("x", -3)
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain").remove()
                }
            )
        ;
        svg.selectAll("text").attr('fill', '#A9A9A9');
        if (category.length > 1 ) 
        {
            svgLegend = svg.append('g')
                .attr('class', 'gLegend')
                .attr("transform", "translate(" + (width + 20) + "," + 0 + ")");
            legend = svgLegend.selectAll('.legend')
                .data(category)
                .enter().append('g')
                .attr("class", "legend")
                .attr("transform", function (d, i) { return "translate(0," + i * 20 + ")" });
            legend.append('rect')
                .style('fill', d => color(d))
                .attr('x', 0)
                .attr('y', 0)
                .attr('width', 10)
                .attr('height', 10);
            legend.append("text")
                .attr("class", "legend-text")
                .attr("x", 15)
                .attr("y", 10)
                .text(d => d)
        }
        if (valorMaximoDatos > 0 && valorMinimoDatos < 0 ) 
        {
            lineaCero = svg.append("line")
            .attr('id', 'lineaCero')
            .attr("x1", 0)
            .attr("y1", ejeY(0))
            .attr("x2", width)
            .attr("y2", ejeY(0))
            .attr("stroke-width", "1px")
            .attr("stroke", "#A9A9A9")
            .style("stroke-dasharray", ("5, 3"))
            ;
        }
        lineas_series = svg.selectAll(".lineas_series")
            .data(seriesLineas)
            .enter().append("g")
            ;
        lineas_series.append("path")
            .attr("class", "line linecelda5864")
            .attr("d", function (d) { return linea_grafico(d.values); })
            .attr("data-legend", function (d) { return d.name })
            .style("stroke", function (d) { return color(d.name); });
        puntosAislados = svg.selectAll(".dot")
            .data(seriesLineas).enter()
            .append("g")
            .attr('class', 'circle-group')
            .style("fill", function (d, i1) {
                return color(d.name);
            })
            ;
        puntosAislados.selectAll(".dot")
            .data(d => d.values).enter()
            .append("circle") // Uses the enter().append() method
            .attr("class", "dot") // Assign a class for styling
            .attr("cx", function (d, i) { return ejeX(d.fecha) })
            .attr("cy", function (d) { return ejeY(d.valor_serie) })
            .attr("r", 3)
            .style("opacity", function (d, i) {
                if (i == 0) {
                    cDimensionExt++;
                }
                if (d.valor_serie == "'null'" || isNaN(d.valor_serie)) {
                    return "0";
                }
                else {
                    if (i > 0 && i < nElementosPorSerie) {
                        if ((seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie)) && (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie))) {
                            return "1";
                        }
                        else {
                            return "0";
                        }
                    }
                    else {
                        if (i == 0) {
                            if (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie)) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                        else {
                            if (i == nElementosPorSerie && (seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie))) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                    }
                }
            })
            ;
        transition(d3.selectAll(".linecelda5864"));
        lineasVertHorRaton = svg.append("g"); 
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-linecelda5864")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-line-horizontalcelda5864")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        ratonPorLinea = lineasVertHorRaton.selectAll(".mouse-per-linecelda5864")
            .data(seriesLineas)
            .enter()
            .append("g")
            .attr("class", "mouse-per-linecelda5864");
            //Tabulación descuadrada:
                ratonPorLinea.append("circle")
                    .attr("r", 4)
                    .style("stroke", function (d) {
                        return color(d.name);
                    })
                    .style("fill", "#FFFFFF")
                    .style("stroke-width", "3px")
                    .style("opacity", "0");
                ratonPorLinea.append("text")
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("text-decoration", "underline")
                    .attr("transform", "translate(10,3)");
                lineasVertHorRaton.append("rect")
                    .attr('id', 'rectcelda5864')
                    .attr("width", width)
                    .attr("height", height)
                    .attr("fill", "none")
                    .attr("pointer-events", "all")
                    .on("mouseout", function () {
                        d3.select(".mouse-linecelda5864").style("opacity", "0");
                        d3.select(".mouse-line-horizontalcelda5864").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5864 circle").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5864 text").style("opacity", "0");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'none');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'none');
                    })
                    .on("mouseover", function () {
                        d3.select(".mouse-linecelda5864").style("opacity", "0.65");
                        d3.select(".mouse-line-horizontalcelda5864").style("opacity", "0.65");
                        d3.selectAll(".mouse-per-linecelda5864 circle").style("opacity", "1");
                        d3.selectAll(".mouse-per-linecelda5864 text").style("opacity", "1");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'block');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'block');
                        ActualizarLineasPuntos('celda5864', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    })
                    .on("mousemove", function () {
                        ActualizarLineasPuntos('celda5864', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    });
            }
        );
</script>
</div><div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda5864&#39;), &#39;Porcentaje de población de 65 y más años (%).png&#39;, {left: -20, width: 1004, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga5864"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga5864").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="969" height="444"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda5864").html() + '</svg>'  )).attr("download", "Porcentaje de población de 65 y más años (%).svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5864&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5864&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;5864&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Porcentaje de población de 65 y más años (%)</div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_2726" class="anchor"></a></td></tr><tr><td class="celda_sin_estilos" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 140px;"><table class="Tablas_datos"><tbody><tr class="Tablas_datos_cabecera"><td class="columna_izquierda"><h4 class="h4_grande">Porcentaje de población de menos de 16 años</h4></td><td class="columna_derecha"><h4 class="h4_muy_grande negativos_ie">15,7 %</h4></td></tr><tr><td colspan="2"><table class="Subtitulo_indicador"><tbody><tr><td class="columna_estrecha">Periodo:</td><td class="columna_ancha negrita">Anual&nbsp;2019</td><td class="columna_izquierda columna_estrecha">Crecimiento interanual:</td><td class="columna_centro texto_muy_grande negativos_ie">-1,0%</td><td class="columna_derecha"><img class="imagen_tendencia" src="./www.portalestadistico.com_files/crecimiento_abajo.png" alt="Estabilidad"></td></tr><tr><td class="columna_estrecha">Fuente:</td><td colspan="4" class="negrita">Elaboración propia con datos del INE</td></tr></tbody></table></td></tr><tr><td colspan="2"><p class="texto_contenido">Porcentaje del grupo de edad sobre la población total.</p></td></tr></tbody></table></div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_5865" class="anchor"></a></td></tr><tr><td class="celda_tipo_fila_1" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 222px;"><div id="capa_Grafico_Evolucion_Lineas_Asincronocelda5865">
<div id="capa_Esperandocelda5865" class="load-container"></div>
<svg id="celda5865" width="969" height="222"><g transform="translate(34.01953125, 40)"><g class="fuente_generica" transform="translate(0,162)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#A9A9A9" d="M0.5,-162V0.5H905.48046875V-162" stroke-width="1.5" opacity="0.5"></path><g class="tick" opacity="1" transform="translate(65.10353434260708,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2006</text></g><g class="tick" opacity="1" transform="translate(194.31060302782123,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2008</text></g><g class="tick" opacity="1" transform="translate(323.6946676975357,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2010</text></g><g class="tick" opacity="1" transform="translate(452.90173638274985,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2012</text></g><g class="tick" opacity="1" transform="translate(582.2858010524643,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2014</text></g><g class="tick" opacity="1" transform="translate(711.4928697376785,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2016</text></g><g class="tick" opacity="1" transform="translate(840.8769344073929,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2018</text></g></g><g class="fuente_generica" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,153.5106257378987)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">15,2</text></g><g class="tick" opacity="1" transform="translate(0,115.25796930342383)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">15,4</text></g><g class="tick" opacity="1" transform="translate(0,77.00531286894933)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">15,6</text></g><g class="tick" opacity="1" transform="translate(0,38.7526564344745)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">15,8</text></g><g class="tick" opacity="1" transform="translate(0,0.5)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">16,0</text></g></g><g><path class="line linecelda5865" d="M0,147.27272727272728L64.60353434260708,139.62219598583252L129.20706868521415,128.14639905549L193.81060302782123,112.84533648170014L258.5911333549286,87.98110979929183L323.1946676975357,61.20425029515947L387.79820204014277,42.077922077922224L452.40173638274985,26.776859504132347L517.1822667098572,11.475796930342483L581.7858010524643,3.8252656434473806L646.3893353950714,0L710.9928697376785,1.9126328217236903L775.7734000647858,15.301062573789864L840.3769344073929,34.42739079102712L904.98046875,65.02951593860685" data-legend="España" style="stroke: rgb(255, 171, 133);" stroke-dasharray="936.12451171875, 936.12451171875"></path></g><g class="circle-group" style="fill: rgb(255, 171, 133);"><circle class="dot" cx="0" cy="147.27272727272728" r="3" style="opacity: 0;"></circle><circle class="dot" cx="64.60353434260708" cy="139.62219598583252" r="3" style="opacity: 0;"></circle><circle class="dot" cx="129.20706868521415" cy="128.14639905549" r="3" style="opacity: 0;"></circle><circle class="dot" cx="193.81060302782123" cy="112.84533648170014" r="3" style="opacity: 0;"></circle><circle class="dot" cx="258.5911333549286" cy="87.98110979929183" r="3" style="opacity: 0;"></circle><circle class="dot" cx="323.1946676975357" cy="61.20425029515947" r="3" style="opacity: 0;"></circle><circle class="dot" cx="387.79820204014277" cy="42.077922077922224" r="3" style="opacity: 0;"></circle><circle class="dot" cx="452.40173638274985" cy="26.776859504132347" r="3" style="opacity: 0;"></circle><circle class="dot" cx="517.1822667098572" cy="11.475796930342483" r="3" style="opacity: 0;"></circle><circle class="dot" cx="581.7858010524643" cy="3.8252656434473806" r="3" style="opacity: 0;"></circle><circle class="dot" cx="646.3893353950714" cy="0" r="3" style="opacity: 0;"></circle><circle class="dot" cx="710.9928697376785" cy="1.9126328217236903" r="3" style="opacity: 0;"></circle><circle class="dot" cx="775.7734000647858" cy="15.301062573789864" r="3" style="opacity: 0;"></circle><circle class="dot" cx="840.3769344073929" cy="34.42739079102712" r="3" style="opacity: 0;"></circle><circle class="dot" cx="904.98046875" cy="65.02951593860685" r="3" style="opacity: 0;"></circle></g><g><path class="mouse-linecelda5865" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M387.79820204014277,162 387.79820204014277,0"></path><path class="mouse-line-horizontalcelda5865" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M904.98046875,25 0,25"></path><g class="mouse-per-linecelda5865" transform="translate(387.79820204014277,42.077922077922224)" style="opacity: 1;"><circle r="4" style="stroke: rgb(255, 171, 133); fill: rgb(255, 255, 255); stroke-width: 3px; opacity: 0;"></circle><text text-anchor="middle" transform="translate(10,3)" style="font-size: 16px; text-decoration: underline; opacity: 0;"></text></g><rect id="rectcelda5865" width="904.98046875" height="162" fill="none" pointer-events="all"></rect></g></g></svg></div>
<style type="text/css">
        .linecelda5865 {
            fill: none;
            stroke: #FF6E2B;
            stroke-width: 2;
        }
        .loadercelda5865,
        .loadercelda5865:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda5865 {
            margin: 46px 420px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF6E2B;
            border-right: 1.1em solid #FF6E2B;
            border-bottom: 1.1em solid #FF6E2B;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script>
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=5865&pId_Territorio=00;&pId_Territorio_Padre=&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var linea_grafico;
        var svg;
        var seriesLineas;
        var lineaCero;
        var lineas_series;
        var nElementosPorSerie;
        var puntosAislados;
        var lineasVertHorRaton;
        var ratonPorLinea;
        var ejeX;
        var ejeY;
        var cDimensionExt = 0
        var valorMinimoDatos = 0;
        var valorMaximoDatos = 0;
        var fechaMaximo;
        var fechaMinimo;
        var calculo_maxmin;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var nCortes = 0;
        var nPuntosEjeX = 0;
        var parseDate = d3.timeParse("%Y/%m/%d");
        var margin;
        var width;
        var height;
        var color;
        var category;
        var element_capa_esperando;
       var anchoNodos;
       var svgLeyendaHorizontal;
       var svgLegend;
       var legend;
        element_capa_esperando = document.getElementById("capa_Esperandocelda5865");
        element_capa_esperando.classList.remove("loadercelda5865");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_GraficoEvolucionLineas2('#FFE9DF', '#FF6E2B', category.length));
        data.forEach(function (d) {
            d.fecha_periodo_serie = parseDate(d.fecha_periodo_serie);
            nCortes++;
            nPuntosEjeX++;
        });
        if (nCortes > 7){
            nCortes = 7;
        }
        //* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        color.domain(d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); }));
        calculo_maxmin = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        valorMaximoDatos = CalcularMaximoDatos(calculo_maxmin, false)
        valorMinimoDatos = CalcularMinimoDatos(calculo_maxmin, false, true);
        margenIzquierdo = CalcularAnchoMargenIzquierdo_GraficoLineas(format("#.##0,0",valorMaximoDatos), format("#.##0,0",valorMinimoDatos), 969);
        margenDerecho = CalcularAnchoMargenDerecho_GraficoLineas(category, 969);
        if (category.length > 1 && 969 > 222) 
        {
            margenSuperior = 40;
            margenInferior = 20;
        }
        else if (category.length == 1 && 969 > 222) 
        {
            margenDerecho = 30 
            margenSuperior = 40;
            margenInferior = 20;
        }
        else 
        {
            margenDerecho = 30 
            margenSuperior = 50;
            margenInferior = 50;
        }
        fechaMaximo = d3.max(calculo_maxmin, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.fecha;
            });
        });
        fechaMinimo = d3.min(calculo_maxmin, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.fecha;
            });
        });
        margin = { top: margenSuperior, right: margenDerecho, bottom: margenInferior, left: margenIzquierdo };
        width = 969 - margin.left - margin.right;
        height = 222 - margin.top - margin.bottom;
        ejeX = d3.scaleTime().range([0, width]);
        ejeY = d3.scaleLinear().range([height, 0]);
        linea_grafico = d3.line()
            .x(function (d) { return ejeX(d.fecha); })
            .y(function (d) { return ejeY(d.valor_serie); })
            .defined(function (d) { return !isNaN(d.valor_serie); })
            ;
                // 1.Add the SVG To the page And employ #2
        svg = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda5865").append("svg")
            .attr('id', 'celda5865')
            .attr("width", 969)
            .attr("height", 222)
            .append("g")
            .attr("transform", "translate(" + margin.left + ", " + margin.top + ")");
        seriesLineas = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, etiquetaperiodo: d.etiquetaperiodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        nElementosPorSerie = seriesLineas[0].values.length - 1;
        ejeX.domain([fechaMinimo, fechaMaximo]);
        ejeY.domain([valorMinimoDatos, valorMaximoDatos]);
                // Leyenda, eje de las X, puntos y leyenda de estos puntos:
        svg.append("g")
            .attr("class", "fuente_generica")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom().scale(ejeX).tickSize(-height).ticks(nCortes))
            .call(
                g => {
                    g.selectAll("text")
                        .style("text-anchor", "middle")
                        .attr("y", "5")
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 1.5)
                        .attr('opacity', 0.5)
                }
            )
        ;
        svg.append("g")
            .attr("class", "fuente_generica")
            .call(d3.axisLeft(ejeY).ticks(4).tickSize(-width))
            .call(
                g => {
                    g.selectAll("text")
                        .attr("x", -3)
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain").remove()
                }
            )
        ;
        svg.selectAll("text").attr('fill', '#A9A9A9');
        if (category.length > 1 ) 
        {
            svgLegend = svg.append('g')
                .attr('class', 'gLegend')
                .attr("transform", "translate(" + (width + 20) + "," + 0 + ")");
            legend = svgLegend.selectAll('.legend')
                .data(category)
                .enter().append('g')
                .attr("class", "legend")
                .attr("transform", function (d, i) { return "translate(0," + i * 20 + ")" });
            legend.append('rect')
                .style('fill', d => color(d))
                .attr('x', 0)
                .attr('y', 0)
                .attr('width', 10)
                .attr('height', 10);
            legend.append("text")
                .attr("class", "legend-text")
                .attr("x", 15)
                .attr("y", 10)
                .text(d => d)
        }
        if (valorMaximoDatos > 0 && valorMinimoDatos < 0 ) 
        {
            lineaCero = svg.append("line")
            .attr('id', 'lineaCero')
            .attr("x1", 0)
            .attr("y1", ejeY(0))
            .attr("x2", width)
            .attr("y2", ejeY(0))
            .attr("stroke-width", "1px")
            .attr("stroke", "#A9A9A9")
            .style("stroke-dasharray", ("5, 3"))
            ;
        }
        lineas_series = svg.selectAll(".lineas_series")
            .data(seriesLineas)
            .enter().append("g")
            ;
        lineas_series.append("path")
            .attr("class", "line linecelda5865")
            .attr("d", function (d) { return linea_grafico(d.values); })
            .attr("data-legend", function (d) { return d.name })
            .style("stroke", function (d) { return color(d.name); });
        puntosAislados = svg.selectAll(".dot")
            .data(seriesLineas).enter()
            .append("g")
            .attr('class', 'circle-group')
            .style("fill", function (d, i1) {
                return color(d.name);
            })
            ;
        puntosAislados.selectAll(".dot")
            .data(d => d.values).enter()
            .append("circle") // Uses the enter().append() method
            .attr("class", "dot") // Assign a class for styling
            .attr("cx", function (d, i) { return ejeX(d.fecha) })
            .attr("cy", function (d) { return ejeY(d.valor_serie) })
            .attr("r", 3)
            .style("opacity", function (d, i) {
                if (i == 0) {
                    cDimensionExt++;
                }
                if (d.valor_serie == "'null'" || isNaN(d.valor_serie)) {
                    return "0";
                }
                else {
                    if (i > 0 && i < nElementosPorSerie) {
                        if ((seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie)) && (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie))) {
                            return "1";
                        }
                        else {
                            return "0";
                        }
                    }
                    else {
                        if (i == 0) {
                            if (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie)) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                        else {
                            if (i == nElementosPorSerie && (seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie))) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                    }
                }
            })
            ;
        transition(d3.selectAll(".linecelda5865"));
        lineasVertHorRaton = svg.append("g"); 
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-linecelda5865")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-line-horizontalcelda5865")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        ratonPorLinea = lineasVertHorRaton.selectAll(".mouse-per-linecelda5865")
            .data(seriesLineas)
            .enter()
            .append("g")
            .attr("class", "mouse-per-linecelda5865");
            //Tabulación descuadrada:
                ratonPorLinea.append("circle")
                    .attr("r", 4)
                    .style("stroke", function (d) {
                        return color(d.name);
                    })
                    .style("fill", "#FFFFFF")
                    .style("stroke-width", "3px")
                    .style("opacity", "0");
                ratonPorLinea.append("text")
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("text-decoration", "underline")
                    .attr("transform", "translate(10,3)");
                lineasVertHorRaton.append("rect")
                    .attr('id', 'rectcelda5865')
                    .attr("width", width)
                    .attr("height", height)
                    .attr("fill", "none")
                    .attr("pointer-events", "all")
                    .on("mouseout", function () {
                        d3.select(".mouse-linecelda5865").style("opacity", "0");
                        d3.select(".mouse-line-horizontalcelda5865").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5865 circle").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5865 text").style("opacity", "0");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'none');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'none');
                    })
                    .on("mouseover", function () {
                        d3.select(".mouse-linecelda5865").style("opacity", "0.65");
                        d3.select(".mouse-line-horizontalcelda5865").style("opacity", "0.65");
                        d3.selectAll(".mouse-per-linecelda5865 circle").style("opacity", "1");
                        d3.selectAll(".mouse-per-linecelda5865 text").style("opacity", "1");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'block');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'block');
                        ActualizarLineasPuntos('celda5865', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    })
                    .on("mousemove", function () {
                        ActualizarLineasPuntos('celda5865', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    });
            }
        );
</script>
</div><div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda5865&#39;), &#39;Porcentaje de población de menos de 16 años (%).png&#39;, {left: -20, width: 1004, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga5865"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga5865").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="969" height="444"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda5865").html() + '</svg>'  )).attr("download", "Porcentaje de población de menos de 16 años (%).svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5865&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5865&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;5865&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Porcentaje de población de menos de 16 años (%)</div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_2728" class="anchor"></a></td></tr><tr><td class="celda_sin_estilos" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 140px;"><table class="Tablas_datos"><tbody><tr class="Tablas_datos_cabecera"><td class="columna_izquierda"><h4 class="h4_grande">Edad media</h4></td><td class="columna_derecha"><h4 class="h4_muy_grande negativos_ie">42,9 Años</h4></td></tr><tr><td colspan="2"><table class="Subtitulo_indicador"><tbody><tr><td class="columna_estrecha">Periodo:</td><td class="columna_ancha negrita">Anual&nbsp;2017</td><td class="columna_izquierda columna_estrecha">Crecimiento interanual:</td><td class="columna_centro texto_muy_grande negativos_ie">0,6%</td><td class="columna_derecha"><img class="imagen_tendencia" src="./www.portalestadistico.com_files/crecimiento_arriba.png" alt="Estabilidad"></td></tr><tr><td class="columna_estrecha">Fuente:</td><td colspan="4" class="negrita">INE, Indicadores Demográficos Básicos.</td></tr></tbody></table></td></tr><tr><td colspan="2"><p class="texto_contenido">Promedio de edades de la población en un territorio.</p></td></tr></tbody></table></div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_5866" class="anchor"></a></td></tr><tr><td class="celda_tipo_fila_1" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 222px;"><div id="capa_Grafico_Evolucion_Lineas_Asincronocelda5866">
<div id="capa_Esperandocelda5866" class="load-container"></div>
<svg id="celda5866" width="969" height="222"><g transform="translate(34.01953125, 40)"><g class="fuente_generica" transform="translate(0,162)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#A9A9A9" d="M0.5,-162V0.5H905.48046875V-162" stroke-width="1.5" opacity="0.5"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2008</text></g><g class="tick" opacity="1" transform="translate(101.23687699589416,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2009</text></g><g class="tick" opacity="1" transform="translate(201.69851662294707,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2010</text></g><g class="tick" opacity="1" transform="translate(302.16015625,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2011</text></g><g class="tick" opacity="1" transform="translate(402.62179587705293,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2012</text></g><g class="tick" opacity="1" transform="translate(503.3586728729471,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2013</text></g><g class="tick" opacity="1" transform="translate(603.8203125,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2014</text></g><g class="tick" opacity="1" transform="translate(704.2819521270529,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2015</text></g><g class="tick" opacity="1" transform="translate(804.7435917541059,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2016</text></g><g class="tick" opacity="1" transform="translate(905.48046875,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2017</text></g></g><g class="fuente_generica" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,134.44805194805198)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">41,0</text></g><g class="tick" opacity="1" transform="translate(0,99.38311688311686)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">41,5</text></g><g class="tick" opacity="1" transform="translate(0,64.31818181818171)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">42,0</text></g><g class="tick" opacity="1" transform="translate(0,29.25324675324657)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">42,5</text></g></g><g><path class="line linecelda5866" d="M0,147.2727272727272L100.73687699589416,139.5584415584415L201.19851662294707,125.53246753246773L301.66015625,105.89610389610398L402.12179587705293,91.87012987012973L502.8586728729471,70.83116883116884L603.3203125,56.80519480519459L703.7819521270529,35.76623376623371L804.2435917541059,16.831168831168526L904.98046875,0" data-legend="España" style="stroke: rgb(255, 171, 133);" stroke-dasharray="917.617919921875, 917.617919921875"></path></g><g class="circle-group" style="fill: rgb(255, 171, 133);"><circle class="dot" cx="0" cy="147.2727272727272" r="3" style="opacity: 0;"></circle><circle class="dot" cx="100.73687699589416" cy="139.5584415584415" r="3" style="opacity: 0;"></circle><circle class="dot" cx="201.19851662294707" cy="125.53246753246773" r="3" style="opacity: 0;"></circle><circle class="dot" cx="301.66015625" cy="105.89610389610398" r="3" style="opacity: 0;"></circle><circle class="dot" cx="402.12179587705293" cy="91.87012987012973" r="3" style="opacity: 0;"></circle><circle class="dot" cx="502.8586728729471" cy="70.83116883116884" r="3" style="opacity: 0;"></circle><circle class="dot" cx="603.3203125" cy="56.80519480519459" r="3" style="opacity: 0;"></circle><circle class="dot" cx="703.7819521270529" cy="35.76623376623371" r="3" style="opacity: 0;"></circle><circle class="dot" cx="804.2435917541059" cy="16.831168831168526" r="3" style="opacity: 0;"></circle><circle class="dot" cx="904.98046875" cy="0" r="3" style="opacity: 0;"></circle></g><g><path class="mouse-linecelda5866" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 1;"></path><path class="mouse-line-horizontalcelda5866" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 1;"></path><g class="mouse-per-linecelda5866"><circle r="4" style="stroke: rgb(255, 171, 133); fill: rgb(255, 255, 255); stroke-width: 3px; opacity: 0;"></circle><text text-anchor="middle" transform="translate(10,3)" style="font-size: 16px; text-decoration: underline;"></text></g><rect id="rectcelda5866" width="904.98046875" height="162" fill="none" pointer-events="all"></rect></g></g></svg></div>
<style type="text/css">
        .linecelda5866 {
            fill: none;
            stroke: #FF6E2B;
            stroke-width: 2;
        }
        .loadercelda5866,
        .loadercelda5866:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda5866 {
            margin: 46px 420px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF6E2B;
            border-right: 1.1em solid #FF6E2B;
            border-bottom: 1.1em solid #FF6E2B;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script>
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=5866&pId_Territorio=00;&pId_Territorio_Padre=&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var linea_grafico;
        var svg;
        var seriesLineas;
        var lineaCero;
        var lineas_series;
        var nElementosPorSerie;
        var puntosAislados;
        var lineasVertHorRaton;
        var ratonPorLinea;
        var ejeX;
        var ejeY;
        var cDimensionExt = 0
        var valorMinimoDatos = 0;
        var valorMaximoDatos = 0;
        var fechaMaximo;
        var fechaMinimo;
        var calculo_maxmin;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var nCortes = 0;
        var nPuntosEjeX = 0;
        var parseDate = d3.timeParse("%Y/%m/%d");
        var margin;
        var width;
        var height;
        var color;
        var category;
        var element_capa_esperando;
       var anchoNodos;
       var svgLeyendaHorizontal;
       var svgLegend;
       var legend;
        element_capa_esperando = document.getElementById("capa_Esperandocelda5866");
        element_capa_esperando.classList.remove("loadercelda5866");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_GraficoEvolucionLineas2('#FFE9DF', '#FF6E2B', category.length));
        data.forEach(function (d) {
            d.fecha_periodo_serie = parseDate(d.fecha_periodo_serie);
            nCortes++;
            nPuntosEjeX++;
        });
        if (nCortes > 7){
            nCortes = 7;
        }
        //* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        color.domain(d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); }));
        calculo_maxmin = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        valorMaximoDatos = CalcularMaximoDatos(calculo_maxmin, false)
        valorMinimoDatos = CalcularMinimoDatos(calculo_maxmin, false, true);
        margenIzquierdo = CalcularAnchoMargenIzquierdo_GraficoLineas(format("#.##0,0",valorMaximoDatos), format("#.##0,0",valorMinimoDatos), 969);
        margenDerecho = CalcularAnchoMargenDerecho_GraficoLineas(category, 969);
        if (category.length > 1 && 969 > 222) 
        {
            margenSuperior = 40;
            margenInferior = 20;
        }
        else if (category.length == 1 && 969 > 222) 
        {
            margenDerecho = 30 
            margenSuperior = 40;
            margenInferior = 20;
        }
        else 
        {
            margenDerecho = 30 
            margenSuperior = 50;
            margenInferior = 50;
        }
        fechaMaximo = d3.max(calculo_maxmin, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.fecha;
            });
        });
        fechaMinimo = d3.min(calculo_maxmin, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.fecha;
            });
        });
        margin = { top: margenSuperior, right: margenDerecho, bottom: margenInferior, left: margenIzquierdo };
        width = 969 - margin.left - margin.right;
        height = 222 - margin.top - margin.bottom;
        ejeX = d3.scaleTime().range([0, width]);
        ejeY = d3.scaleLinear().range([height, 0]);
        linea_grafico = d3.line()
            .x(function (d) { return ejeX(d.fecha); })
            .y(function (d) { return ejeY(d.valor_serie); })
            .defined(function (d) { return !isNaN(d.valor_serie); })
            ;
                // 1.Add the SVG To the page And employ #2
        svg = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda5866").append("svg")
            .attr('id', 'celda5866')
            .attr("width", 969)
            .attr("height", 222)
            .append("g")
            .attr("transform", "translate(" + margin.left + ", " + margin.top + ")");
        seriesLineas = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, etiquetaperiodo: d.etiquetaperiodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        nElementosPorSerie = seriesLineas[0].values.length - 1;
        ejeX.domain([fechaMinimo, fechaMaximo]);
        ejeY.domain([valorMinimoDatos, valorMaximoDatos]);
                // Leyenda, eje de las X, puntos y leyenda de estos puntos:
        svg.append("g")
            .attr("class", "fuente_generica")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom().scale(ejeX).tickSize(-height).ticks(nCortes))
            .call(
                g => {
                    g.selectAll("text")
                        .style("text-anchor", "middle")
                        .attr("y", "5")
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 1.5)
                        .attr('opacity', 0.5)
                }
            )
        ;
        svg.append("g")
            .attr("class", "fuente_generica")
            .call(d3.axisLeft(ejeY).ticks(4).tickSize(-width))
            .call(
                g => {
                    g.selectAll("text")
                        .attr("x", -3)
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain").remove()
                }
            )
        ;
        svg.selectAll("text").attr('fill', '#A9A9A9');
        if (category.length > 1 ) 
        {
            svgLegend = svg.append('g')
                .attr('class', 'gLegend')
                .attr("transform", "translate(" + (width + 20) + "," + 0 + ")");
            legend = svgLegend.selectAll('.legend')
                .data(category)
                .enter().append('g')
                .attr("class", "legend")
                .attr("transform", function (d, i) { return "translate(0," + i * 20 + ")" });
            legend.append('rect')
                .style('fill', d => color(d))
                .attr('x', 0)
                .attr('y', 0)
                .attr('width', 10)
                .attr('height', 10);
            legend.append("text")
                .attr("class", "legend-text")
                .attr("x", 15)
                .attr("y", 10)
                .text(d => d)
        }
        if (valorMaximoDatos > 0 && valorMinimoDatos < 0 ) 
        {
            lineaCero = svg.append("line")
            .attr('id', 'lineaCero')
            .attr("x1", 0)
            .attr("y1", ejeY(0))
            .attr("x2", width)
            .attr("y2", ejeY(0))
            .attr("stroke-width", "1px")
            .attr("stroke", "#A9A9A9")
            .style("stroke-dasharray", ("5, 3"))
            ;
        }
        lineas_series = svg.selectAll(".lineas_series")
            .data(seriesLineas)
            .enter().append("g")
            ;
        lineas_series.append("path")
            .attr("class", "line linecelda5866")
            .attr("d", function (d) { return linea_grafico(d.values); })
            .attr("data-legend", function (d) { return d.name })
            .style("stroke", function (d) { return color(d.name); });
        puntosAislados = svg.selectAll(".dot")
            .data(seriesLineas).enter()
            .append("g")
            .attr('class', 'circle-group')
            .style("fill", function (d, i1) {
                return color(d.name);
            })
            ;
        puntosAislados.selectAll(".dot")
            .data(d => d.values).enter()
            .append("circle") // Uses the enter().append() method
            .attr("class", "dot") // Assign a class for styling
            .attr("cx", function (d, i) { return ejeX(d.fecha) })
            .attr("cy", function (d) { return ejeY(d.valor_serie) })
            .attr("r", 3)
            .style("opacity", function (d, i) {
                if (i == 0) {
                    cDimensionExt++;
                }
                if (d.valor_serie == "'null'" || isNaN(d.valor_serie)) {
                    return "0";
                }
                else {
                    if (i > 0 && i < nElementosPorSerie) {
                        if ((seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie)) && (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie))) {
                            return "1";
                        }
                        else {
                            return "0";
                        }
                    }
                    else {
                        if (i == 0) {
                            if (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie)) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                        else {
                            if (i == nElementosPorSerie && (seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie))) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                    }
                }
            })
            ;
        transition(d3.selectAll(".linecelda5866"));
        lineasVertHorRaton = svg.append("g"); 
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-linecelda5866")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-line-horizontalcelda5866")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        ratonPorLinea = lineasVertHorRaton.selectAll(".mouse-per-linecelda5866")
            .data(seriesLineas)
            .enter()
            .append("g")
            .attr("class", "mouse-per-linecelda5866");
            //Tabulación descuadrada:
                ratonPorLinea.append("circle")
                    .attr("r", 4)
                    .style("stroke", function (d) {
                        return color(d.name);
                    })
                    .style("fill", "#FFFFFF")
                    .style("stroke-width", "3px")
                    .style("opacity", "0");
                ratonPorLinea.append("text")
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("text-decoration", "underline")
                    .attr("transform", "translate(10,3)");
                lineasVertHorRaton.append("rect")
                    .attr('id', 'rectcelda5866')
                    .attr("width", width)
                    .attr("height", height)
                    .attr("fill", "none")
                    .attr("pointer-events", "all")
                    .on("mouseout", function () {
                        d3.select(".mouse-linecelda5866").style("opacity", "0");
                        d3.select(".mouse-line-horizontalcelda5866").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5866 circle").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5866 text").style("opacity", "0");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'none');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'none');
                    })
                    .on("mouseover", function () {
                        d3.select(".mouse-linecelda5866").style("opacity", "0.65");
                        d3.select(".mouse-line-horizontalcelda5866").style("opacity", "0.65");
                        d3.selectAll(".mouse-per-linecelda5866 circle").style("opacity", "1");
                        d3.selectAll(".mouse-per-linecelda5866 text").style("opacity", "1");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'block');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'block');
                        ActualizarLineasPuntos('celda5866', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    })
                    .on("mousemove", function () {
                        ActualizarLineasPuntos('celda5866', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    });
            }
        );
</script>
</div><div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda5866&#39;), &#39;Edad media (años).png&#39;, {left: -20, width: 1004, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga5866"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga5866").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="969" height="444"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda5866").html() + '</svg>'  )).attr("download", "Edad media (años).svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5866&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5866&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;5866&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Edad media (años)</div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_2730" class="anchor"></a></td></tr><tr><td class="celda_sin_estilos" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 140px;"><table class="Tablas_datos"><tbody><tr class="Tablas_datos_cabecera"><td class="columna_izquierda"><h4 class="h4_grande">Tasa de natalidad (por mil habitantes)</h4></td><td class="columna_derecha"><h4 class="h4_muy_grande negativos_ie">8,0 ‰</h4></td></tr><tr><td colspan="2"><table class="Subtitulo_indicador"><tbody><tr><td class="columna_estrecha">Periodo:</td><td class="columna_ancha negrita">Anual&nbsp;2018</td><td class="columna_izquierda columna_estrecha">Crecimiento interanual:</td><td class="columna_centro texto_muy_grande negativos_ie">-5,7%</td><td class="columna_derecha"><img class="imagen_tendencia" src="./www.portalestadistico.com_files/crecimiento_abajo.png" alt="Estabilidad"></td></tr><tr><td class="columna_estrecha">Fuente:</td><td colspan="4" class="negrita">INE, Indicadores Demográficos Básicos.</td></tr></tbody></table></td></tr><tr><td colspan="2"><p class="texto_contenido">Relación entre los nacimientos y la población media por cada mil habitantes.</p></td></tr></tbody></table></div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_5867" class="anchor"></a></td></tr><tr><td class="celda_tipo_fila_1" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 222px;"><div id="capa_Grafico_Evolucion_Lineas_Asincronocelda5867">
<div id="capa_Esperandocelda5867" class="load-container"></div>
<svg id="celda5867" width="969" height="222"><g transform="translate(34.01953125, 40)"><g class="fuente_generica" transform="translate(0,162)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#A9A9A9" d="M0.5,-162V0.5H905.48046875V-162" stroke-width="1.5" opacity="0.5"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1975</text></g><g class="tick" opacity="1" transform="translate(105.71632875610169,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1980</text></g><g class="tick" opacity="1" transform="translate(210.98787657806508,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1985</text></g><g class="tick" opacity="1" transform="translate(316.2018045052163,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1990</text></g><g class="tick" opacity="1" transform="translate(421.41333160341696,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1995</text></g><g class="tick" opacity="1" transform="translate(526.6296603595187,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2000</text></g><g class="tick" opacity="1" transform="translate(631.901208181482,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2005</text></g><g class="tick" opacity="1" transform="translate(737.1151361086332,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2010</text></g><g class="tick" opacity="1" transform="translate(842.3290640357843,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2015</text></g></g><g class="fuente_generica" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,147.09027719268684)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">8</text></g><g class="tick" opacity="1" transform="translate(0,119.79227399106917)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">10</text></g><g class="tick" opacity="1" transform="translate(0,92.4942707894515)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">12</text></g><g class="tick" opacity="1" transform="translate(0,65.19626758783383)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">14</text></g><g class="tick" opacity="1" transform="translate(0,37.89826438621617)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">16</text></g><g class="tick" opacity="1" transform="translate(0,10.600261184598509)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">18</text></g></g><g><path class="line linecelda5867" d="M0,0.13649001600805377L21.031261606467787,0L42.12254393669833,11.05569129665514L63.15380554316611,21.019462465245596L84.1850671496339,35.623894178111044L105.21632875610169,48.180975650855146L126.30521025738172,63.19487741174488L147.33647186384948,70.42884826017355L168.3677334703173,82.16698963686913L189.39899507678507,87.21712022916842L210.48787657806508,93.76864099755666L231.5191381845329,100.59314179796108L252.5503997910007,105.09731232622799L273.58166139746845,108.23658269441401L294.67054289874847,112.19479315864858L315.7018045052163,114.92459347881034L336.7330661116841,117.10843373493975L357.76432771815183,117.24492375094783L378.85080839048135,121.47611424719858L399.88206999694916,127.48167495155447L420.91333160341696,129.80200522369196L441.9445932098847,130.6209453197405L463.0358755401152,128.71008509562725L484.06713714658304,130.6209453197405L505.09839875305084,126.11677479147359L526.1296603595187,121.3396242311905L547.2185418607987,119.97472407110962L568.2498034672665,118.20035386300447L589.2810650737342,113.2867132867133L610.312326680202,111.51234307860813L631.401208181482,110.42042295054343L652.4324697879498,107.69062263038167L673.4637313944176,107.55413261437359L694.4949930008854,101.82155194203388L715.5838745021655,110.42042295054343L736.6151361086332,113.55969331872946L757.646397715101,119.42876400707726L778.6776593215689,123.52346448731991L799.7665408228489,131.43988541578904L820.7978024293166,130.7574353357486L841.8290640357843,132.66829555986183L862.8603256422522,135.3980958800236L883.9492071435322,140.72120650433905L904.98046875,147.27272727272728" data-legend="España" style="stroke: rgb(255, 171, 133);" stroke-dasharray="941.8911743164062, 941.8911743164062"></path></g><g class="circle-group" style="fill: rgb(255, 171, 133);"><circle class="dot" cx="0" cy="0.13649001600805377" r="3" style="opacity: 0;"></circle><circle class="dot" cx="21.031261606467787" cy="0" r="3" style="opacity: 0;"></circle><circle class="dot" cx="42.12254393669833" cy="11.05569129665514" r="3" style="opacity: 0;"></circle><circle class="dot" cx="63.15380554316611" cy="21.019462465245596" r="3" style="opacity: 0;"></circle><circle class="dot" cx="84.1850671496339" cy="35.623894178111044" r="3" style="opacity: 0;"></circle><circle class="dot" cx="105.21632875610169" cy="48.180975650855146" r="3" style="opacity: 0;"></circle><circle class="dot" cx="126.30521025738172" cy="63.19487741174488" r="3" style="opacity: 0;"></circle><circle class="dot" cx="147.33647186384948" cy="70.42884826017355" r="3" style="opacity: 0;"></circle><circle class="dot" cx="168.3677334703173" cy="82.16698963686913" r="3" style="opacity: 0;"></circle><circle class="dot" cx="189.39899507678507" cy="87.21712022916842" r="3" style="opacity: 0;"></circle><circle class="dot" cx="210.48787657806508" cy="93.76864099755666" r="3" style="opacity: 0;"></circle><circle class="dot" cx="231.5191381845329" cy="100.59314179796108" r="3" style="opacity: 0;"></circle><circle class="dot" cx="252.5503997910007" cy="105.09731232622799" r="3" style="opacity: 0;"></circle><circle class="dot" cx="273.58166139746845" cy="108.23658269441401" r="3" style="opacity: 0;"></circle><circle class="dot" cx="294.67054289874847" cy="112.19479315864858" r="3" style="opacity: 0;"></circle><circle class="dot" cx="315.7018045052163" cy="114.92459347881034" r="3" style="opacity: 0;"></circle><circle class="dot" cx="336.7330661116841" cy="117.10843373493975" r="3" style="opacity: 0;"></circle><circle class="dot" cx="357.76432771815183" cy="117.24492375094783" r="3" style="opacity: 0;"></circle><circle class="dot" cx="378.85080839048135" cy="121.47611424719858" r="3" style="opacity: 0;"></circle><circle class="dot" cx="399.88206999694916" cy="127.48167495155447" r="3" style="opacity: 0;"></circle><circle class="dot" cx="420.91333160341696" cy="129.80200522369196" r="3" style="opacity: 0;"></circle><circle class="dot" cx="441.9445932098847" cy="130.6209453197405" r="3" style="opacity: 0;"></circle><circle class="dot" cx="463.0358755401152" cy="128.71008509562725" r="3" style="opacity: 0;"></circle><circle class="dot" cx="484.06713714658304" cy="130.6209453197405" r="3" style="opacity: 0;"></circle><circle class="dot" cx="505.09839875305084" cy="126.11677479147359" r="3" style="opacity: 0;"></circle><circle class="dot" cx="526.1296603595187" cy="121.3396242311905" r="3" style="opacity: 0;"></circle><circle class="dot" cx="547.2185418607987" cy="119.97472407110962" r="3" style="opacity: 0;"></circle><circle class="dot" cx="568.2498034672665" cy="118.20035386300447" r="3" style="opacity: 0;"></circle><circle class="dot" cx="589.2810650737342" cy="113.2867132867133" r="3" style="opacity: 0;"></circle><circle class="dot" cx="610.312326680202" cy="111.51234307860813" r="3" style="opacity: 0;"></circle><circle class="dot" cx="631.401208181482" cy="110.42042295054343" r="3" style="opacity: 0;"></circle><circle class="dot" cx="652.4324697879498" cy="107.69062263038167" r="3" style="opacity: 0;"></circle><circle class="dot" cx="673.4637313944176" cy="107.55413261437359" r="3" style="opacity: 0;"></circle><circle class="dot" cx="694.4949930008854" cy="101.82155194203388" r="3" style="opacity: 0;"></circle><circle class="dot" cx="715.5838745021655" cy="110.42042295054343" r="3" style="opacity: 0;"></circle><circle class="dot" cx="736.6151361086332" cy="113.55969331872946" r="3" style="opacity: 0;"></circle><circle class="dot" cx="757.646397715101" cy="119.42876400707726" r="3" style="opacity: 0;"></circle><circle class="dot" cx="778.6776593215689" cy="123.52346448731991" r="3" style="opacity: 0;"></circle><circle class="dot" cx="799.7665408228489" cy="131.43988541578904" r="3" style="opacity: 0;"></circle><circle class="dot" cx="820.7978024293166" cy="130.7574353357486" r="3" style="opacity: 0;"></circle><circle class="dot" cx="841.8290640357843" cy="132.66829555986183" r="3" style="opacity: 0;"></circle><circle class="dot" cx="862.8603256422522" cy="135.3980958800236" r="3" style="opacity: 0;"></circle><circle class="dot" cx="883.9492071435322" cy="140.72120650433905" r="3" style="opacity: 0;"></circle><circle class="dot" cx="904.98046875" cy="147.27272727272728" r="3" style="opacity: 0;"></circle></g><g><path class="mouse-linecelda5867" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 1;"></path><path class="mouse-line-horizontalcelda5867" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 1;"></path><g class="mouse-per-linecelda5867"><circle r="4" style="stroke: rgb(255, 171, 133); fill: rgb(255, 255, 255); stroke-width: 3px; opacity: 0;"></circle><text text-anchor="middle" transform="translate(10,3)" style="font-size: 16px; text-decoration: underline;"></text></g><rect id="rectcelda5867" width="904.98046875" height="162" fill="none" pointer-events="all"></rect></g></g></svg></div>
<style type="text/css">
        .linecelda5867 {
            fill: none;
            stroke: #FF6E2B;
            stroke-width: 2;
        }
        .loadercelda5867,
        .loadercelda5867:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda5867 {
            margin: 46px 420px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF6E2B;
            border-right: 1.1em solid #FF6E2B;
            border-bottom: 1.1em solid #FF6E2B;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script>
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=5867&pId_Territorio=00;&pId_Territorio_Padre=&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var linea_grafico;
        var svg;
        var seriesLineas;
        var lineaCero;
        var lineas_series;
        var nElementosPorSerie;
        var puntosAislados;
        var lineasVertHorRaton;
        var ratonPorLinea;
        var ejeX;
        var ejeY;
        var cDimensionExt = 0
        var valorMinimoDatos = 0;
        var valorMaximoDatos = 0;
        var fechaMaximo;
        var fechaMinimo;
        var calculo_maxmin;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var nCortes = 0;
        var nPuntosEjeX = 0;
        var parseDate = d3.timeParse("%Y/%m/%d");
        var margin;
        var width;
        var height;
        var color;
        var category;
        var element_capa_esperando;
       var anchoNodos;
       var svgLeyendaHorizontal;
       var svgLegend;
       var legend;
        element_capa_esperando = document.getElementById("capa_Esperandocelda5867");
        element_capa_esperando.classList.remove("loadercelda5867");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_GraficoEvolucionLineas2('#FFE9DF', '#FF6E2B', category.length));
        data.forEach(function (d) {
            d.fecha_periodo_serie = parseDate(d.fecha_periodo_serie);
            nCortes++;
            nPuntosEjeX++;
        });
        if (nCortes > 7){
            nCortes = 7;
        }
        //* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        color.domain(d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); }));
        calculo_maxmin = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        valorMaximoDatos = CalcularMaximoDatos(calculo_maxmin, false)
        valorMinimoDatos = CalcularMinimoDatos(calculo_maxmin, false, true);
        margenIzquierdo = CalcularAnchoMargenIzquierdo_GraficoLineas(format("#.##0,0",valorMaximoDatos), format("#.##0,0",valorMinimoDatos), 969);
        margenDerecho = CalcularAnchoMargenDerecho_GraficoLineas(category, 969);
        if (category.length > 1 && 969 > 222) 
        {
            margenSuperior = 40;
            margenInferior = 20;
        }
        else if (category.length == 1 && 969 > 222) 
        {
            margenDerecho = 30 
            margenSuperior = 40;
            margenInferior = 20;
        }
        else 
        {
            margenDerecho = 30 
            margenSuperior = 50;
            margenInferior = 50;
        }
        fechaMaximo = d3.max(calculo_maxmin, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.fecha;
            });
        });
        fechaMinimo = d3.min(calculo_maxmin, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.fecha;
            });
        });
        margin = { top: margenSuperior, right: margenDerecho, bottom: margenInferior, left: margenIzquierdo };
        width = 969 - margin.left - margin.right;
        height = 222 - margin.top - margin.bottom;
        ejeX = d3.scaleTime().range([0, width]);
        ejeY = d3.scaleLinear().range([height, 0]);
        linea_grafico = d3.line()
            .x(function (d) { return ejeX(d.fecha); })
            .y(function (d) { return ejeY(d.valor_serie); })
            .defined(function (d) { return !isNaN(d.valor_serie); })
            ;
                // 1.Add the SVG To the page And employ #2
        svg = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda5867").append("svg")
            .attr('id', 'celda5867')
            .attr("width", 969)
            .attr("height", 222)
            .append("g")
            .attr("transform", "translate(" + margin.left + ", " + margin.top + ")");
        seriesLineas = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, etiquetaperiodo: d.etiquetaperiodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        nElementosPorSerie = seriesLineas[0].values.length - 1;
        ejeX.domain([fechaMinimo, fechaMaximo]);
        ejeY.domain([valorMinimoDatos, valorMaximoDatos]);
                // Leyenda, eje de las X, puntos y leyenda de estos puntos:
        svg.append("g")
            .attr("class", "fuente_generica")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom().scale(ejeX).tickSize(-height).ticks(nCortes))
            .call(
                g => {
                    g.selectAll("text")
                        .style("text-anchor", "middle")
                        .attr("y", "5")
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 1.5)
                        .attr('opacity', 0.5)
                }
            )
        ;
        svg.append("g")
            .attr("class", "fuente_generica")
            .call(d3.axisLeft(ejeY).ticks(4).tickSize(-width))
            .call(
                g => {
                    g.selectAll("text")
                        .attr("x", -3)
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain").remove()
                }
            )
        ;
        svg.selectAll("text").attr('fill', '#A9A9A9');
        if (category.length > 1 ) 
        {
            svgLegend = svg.append('g')
                .attr('class', 'gLegend')
                .attr("transform", "translate(" + (width + 20) + "," + 0 + ")");
            legend = svgLegend.selectAll('.legend')
                .data(category)
                .enter().append('g')
                .attr("class", "legend")
                .attr("transform", function (d, i) { return "translate(0," + i * 20 + ")" });
            legend.append('rect')
                .style('fill', d => color(d))
                .attr('x', 0)
                .attr('y', 0)
                .attr('width', 10)
                .attr('height', 10);
            legend.append("text")
                .attr("class", "legend-text")
                .attr("x", 15)
                .attr("y", 10)
                .text(d => d)
        }
        if (valorMaximoDatos > 0 && valorMinimoDatos < 0 ) 
        {
            lineaCero = svg.append("line")
            .attr('id', 'lineaCero')
            .attr("x1", 0)
            .attr("y1", ejeY(0))
            .attr("x2", width)
            .attr("y2", ejeY(0))
            .attr("stroke-width", "1px")
            .attr("stroke", "#A9A9A9")
            .style("stroke-dasharray", ("5, 3"))
            ;
        }
        lineas_series = svg.selectAll(".lineas_series")
            .data(seriesLineas)
            .enter().append("g")
            ;
        lineas_series.append("path")
            .attr("class", "line linecelda5867")
            .attr("d", function (d) { return linea_grafico(d.values); })
            .attr("data-legend", function (d) { return d.name })
            .style("stroke", function (d) { return color(d.name); });
        puntosAislados = svg.selectAll(".dot")
            .data(seriesLineas).enter()
            .append("g")
            .attr('class', 'circle-group')
            .style("fill", function (d, i1) {
                return color(d.name);
            })
            ;
        puntosAislados.selectAll(".dot")
            .data(d => d.values).enter()
            .append("circle") // Uses the enter().append() method
            .attr("class", "dot") // Assign a class for styling
            .attr("cx", function (d, i) { return ejeX(d.fecha) })
            .attr("cy", function (d) { return ejeY(d.valor_serie) })
            .attr("r", 3)
            .style("opacity", function (d, i) {
                if (i == 0) {
                    cDimensionExt++;
                }
                if (d.valor_serie == "'null'" || isNaN(d.valor_serie)) {
                    return "0";
                }
                else {
                    if (i > 0 && i < nElementosPorSerie) {
                        if ((seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie)) && (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie))) {
                            return "1";
                        }
                        else {
                            return "0";
                        }
                    }
                    else {
                        if (i == 0) {
                            if (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie)) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                        else {
                            if (i == nElementosPorSerie && (seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie))) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                    }
                }
            })
            ;
        transition(d3.selectAll(".linecelda5867"));
        lineasVertHorRaton = svg.append("g"); 
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-linecelda5867")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-line-horizontalcelda5867")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        ratonPorLinea = lineasVertHorRaton.selectAll(".mouse-per-linecelda5867")
            .data(seriesLineas)
            .enter()
            .append("g")
            .attr("class", "mouse-per-linecelda5867");
            //Tabulación descuadrada:
                ratonPorLinea.append("circle")
                    .attr("r", 4)
                    .style("stroke", function (d) {
                        return color(d.name);
                    })
                    .style("fill", "#FFFFFF")
                    .style("stroke-width", "3px")
                    .style("opacity", "0");
                ratonPorLinea.append("text")
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("text-decoration", "underline")
                    .attr("transform", "translate(10,3)");
                lineasVertHorRaton.append("rect")
                    .attr('id', 'rectcelda5867')
                    .attr("width", width)
                    .attr("height", height)
                    .attr("fill", "none")
                    .attr("pointer-events", "all")
                    .on("mouseout", function () {
                        d3.select(".mouse-linecelda5867").style("opacity", "0");
                        d3.select(".mouse-line-horizontalcelda5867").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5867 circle").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5867 text").style("opacity", "0");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'none');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'none');
                    })
                    .on("mouseover", function () {
                        d3.select(".mouse-linecelda5867").style("opacity", "0.65");
                        d3.select(".mouse-line-horizontalcelda5867").style("opacity", "0.65");
                        d3.selectAll(".mouse-per-linecelda5867 circle").style("opacity", "1");
                        d3.selectAll(".mouse-per-linecelda5867 text").style("opacity", "1");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'block');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'block');
                        ActualizarLineasPuntos('celda5867', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    })
                    .on("mousemove", function () {
                        ActualizarLineasPuntos('celda5867', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    });
            }
        );
</script>
</div><div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda5867&#39;), &#39;Tasa de natalidad (por mil habitantes).png&#39;, {left: -20, width: 1004, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga5867"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga5867").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="969" height="444"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda5867").html() + '</svg>'  )).attr("download", "Tasa de natalidad (por mil habitantes).svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5867&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5867&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;5867&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Tasa de natalidad (por mil habitantes)</div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_2732" class="anchor"></a></td></tr><tr><td class="celda_sin_estilos" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 140px;"><table class="Tablas_datos"><tbody><tr class="Tablas_datos_cabecera"><td class="columna_izquierda"><h4 class="h4_grande">Crecimiento natural de la población</h4></td><td class="columna_derecha"><h4 class="h4_muy_grande negativos_ie">-54.944 personas</h4></td></tr><tr><td colspan="2"><table class="Subtitulo_indicador"><tbody><tr><td class="columna_estrecha">Periodo:</td><td class="columna_ancha negrita">Anual&nbsp;2018</td><td class="columna_izquierda columna_estrecha">Crecimiento interanual:</td><td class="columna_centro texto_muy_grande negativos_ie">75,3%</td><td class="columna_derecha"><img class="imagen_tendencia" src="./www.portalestadistico.com_files/crecimiento_arriba.png" alt="Estabilidad"></td></tr><tr><td class="columna_estrecha">Fuente:</td><td colspan="4" class="negrita">INE, Movimiento Natural de la Población.</td></tr></tbody></table></td></tr><tr><td colspan="2"><p class="texto_contenido">Diferencia entre nacimientos y defunciones.</p></td></tr></tbody></table></div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_6110" class="anchor"></a></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_6111" class="anchor"></a></td></tr><tr><td class="celda_tipo_fila_2"><div class="clase_capa_unidad_visualizacion" style="min-height: 450px;"><div id="capa_Grafico_Evolucion_Lineas_Asincronocelda6110">
<div id="capa_Esperandocelda6110" class="load-container"></div>
<svg id="celda6110" width="450" height="450"><g transform="translate(51.36328125, 50)"><g class="fuente_generica" transform="translate(0,350)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#A9A9A9" d="M0.5,-350V0.5H369.13671875V-350" stroke-width="1.5" opacity="0.5"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1998</text></g><g class="tick" opacity="1" transform="translate(37.33844006673511,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2000</text></g><g class="tick" opacity="1" transform="translate(74.22734375,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2002</text></g><g class="tick" opacity="1" transform="translate(111.06578381673512,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2004</text></g><g class="tick" opacity="1" transform="translate(147.9546875,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2006</text></g><g class="tick" opacity="1" transform="translate(184.7931275667351,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2008</text></g><g class="tick" opacity="1" transform="translate(221.68203125,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2010</text></g><g class="tick" opacity="1" transform="translate(258.5204713167351,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2012</text></g><g class="tick" opacity="1" transform="translate(295.409375,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2014</text></g><g class="tick" opacity="1" transform="translate(332.24781506673514,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2016</text></g><g class="tick" opacity="1" transform="translate(369.13671875,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2018</text></g></g><g class="fuente_generica" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,310.33203442982955)"><line stroke="#A9A9A9" x2="368.63671875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">-50.000</text></g><g class="tick" opacity="1" transform="translate(0,225.88842852379548)"><line stroke="#A9A9A9" x2="368.63671875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">0</text></g><g class="tick" opacity="1" transform="translate(0,141.44482261776145)"><line stroke="#A9A9A9" x2="368.63671875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">50.000</text></g><g class="tick" opacity="1" transform="translate(0,57.00121671172741)"><line stroke="#A9A9A9" x2="368.63671875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">100.000</text></g></g><line id="lineaCero" x1="0" y1="225.38842852379548" x2="368.63671875" y2="225.38842852379548" stroke-width="1px" stroke="#A9A9A9" style="stroke-dasharray: 5, 3;"></line><g><path class="line linecelda6110" d="M0,217.48112926675446L18.419220033367555,210.17000186741004L36.83844006673511,162.4931419728632L55.308123716632444,147.27640418859588L73.72734375,140.55975977482993L92.14656378336755,129.03320756865628L110.56578381673512,85.79132585629435L129.03546746663244,91.94219811048987L147.4546875,37.11465366782011L165.87390753336757,44.39875911327459L184.2931275667351,0L202.76281121663246,39.50440771496085L221.18203125,48.854003760876935L239.60125128336756,83.37454985526364L258.0204713167351,138.0771177611925L276.4901549666324,165.77799824260794L294.909375,171.74140569169205L313.32859503336755,229.2356792088744L331.74781506673514,225.43571694310288L350.21749871663246,278.32105844993384L368.63671875,318.1818181818182" data-legend="España" style="stroke: rgb(255, 171, 133);" stroke-dasharray="721.2504272460938, 721.2504272460938"></path></g><g class="circle-group" style="fill: rgb(255, 171, 133);"><circle class="dot" cx="0" cy="217.48112926675446" r="3" style="opacity: 0;"></circle><circle class="dot" cx="18.419220033367555" cy="210.17000186741004" r="3" style="opacity: 0;"></circle><circle class="dot" cx="36.83844006673511" cy="162.4931419728632" r="3" style="opacity: 0;"></circle><circle class="dot" cx="55.308123716632444" cy="147.27640418859588" r="3" style="opacity: 0;"></circle><circle class="dot" cx="73.72734375" cy="140.55975977482993" r="3" style="opacity: 0;"></circle><circle class="dot" cx="92.14656378336755" cy="129.03320756865628" r="3" style="opacity: 0;"></circle><circle class="dot" cx="110.56578381673512" cy="85.79132585629435" r="3" style="opacity: 0;"></circle><circle class="dot" cx="129.03546746663244" cy="91.94219811048987" r="3" style="opacity: 0;"></circle><circle class="dot" cx="147.4546875" cy="37.11465366782011" r="3" style="opacity: 0;"></circle><circle class="dot" cx="165.87390753336757" cy="44.39875911327459" r="3" style="opacity: 0;"></circle><circle class="dot" cx="184.2931275667351" cy="0" r="3" style="opacity: 0;"></circle><circle class="dot" cx="202.76281121663246" cy="39.50440771496085" r="3" style="opacity: 0;"></circle><circle class="dot" cx="221.18203125" cy="48.854003760876935" r="3" style="opacity: 0;"></circle><circle class="dot" cx="239.60125128336756" cy="83.37454985526364" r="3" style="opacity: 0;"></circle><circle class="dot" cx="258.0204713167351" cy="138.0771177611925" r="3" style="opacity: 0;"></circle><circle class="dot" cx="276.4901549666324" cy="165.77799824260794" r="3" style="opacity: 0;"></circle><circle class="dot" cx="294.909375" cy="171.74140569169205" r="3" style="opacity: 0;"></circle><circle class="dot" cx="313.32859503336755" cy="229.2356792088744" r="3" style="opacity: 0;"></circle><circle class="dot" cx="331.74781506673514" cy="225.43571694310288" r="3" style="opacity: 0;"></circle><circle class="dot" cx="350.21749871663246" cy="278.32105844993384" r="3" style="opacity: 0;"></circle><circle class="dot" cx="368.63671875" cy="318.1818181818182" r="3" style="opacity: 0;"></circle></g><g><path class="mouse-linecelda6110" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M350.21749871663246,350 350.21749871663246,0"></path><path class="mouse-line-horizontalcelda6110" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M368.63671875,51 0,51"></path><g class="mouse-per-linecelda6110" transform="translate(350.21749871663246,278.32105844993384)" style="opacity: 1;"><circle r="4" style="stroke: rgb(255, 171, 133); fill: rgb(255, 255, 255); stroke-width: 3px; opacity: 0;"></circle><text text-anchor="middle" transform="translate(10,3)" style="font-size: 16px; text-decoration: underline; opacity: 0;"></text></g><rect id="rectcelda6110" width="368.63671875" height="350" fill="none" pointer-events="all"></rect></g></g></svg></div>
<style type="text/css">
        .linecelda6110 {
            fill: none;
            stroke: #FF6E2B;
            stroke-width: 2;
        }
        .loadercelda6110,
        .loadercelda6110:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda6110 {
            margin: 160px 160px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF6E2B;
            border-right: 1.1em solid #FF6E2B;
            border-bottom: 1.1em solid #FF6E2B;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script>
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=6110&pId_Territorio=00;&pId_Territorio_Padre=&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var linea_grafico;
        var svg;
        var seriesLineas;
        var lineaCero;
        var lineas_series;
        var nElementosPorSerie;
        var puntosAislados;
        var lineasVertHorRaton;
        var ratonPorLinea;
        var ejeX;
        var ejeY;
        var cDimensionExt = 0
        var valorMinimoDatos = 0;
        var valorMaximoDatos = 0;
        var fechaMaximo;
        var fechaMinimo;
        var calculo_maxmin;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var nCortes = 0;
        var nPuntosEjeX = 0;
        var parseDate = d3.timeParse("%Y/%m/%d");
        var margin;
        var width;
        var height;
        var color;
        var category;
        var element_capa_esperando;
       var anchoNodos;
       var svgLeyendaHorizontal;
       var svgLegend;
       var legend;
        element_capa_esperando = document.getElementById("capa_Esperandocelda6110");
        element_capa_esperando.classList.remove("loadercelda6110");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_GraficoEvolucionLineas2('#FFE9DF', '#FF6E2B', category.length));
        data.forEach(function (d) {
            d.fecha_periodo_serie = parseDate(d.fecha_periodo_serie);
            nCortes++;
            nPuntosEjeX++;
        });
        if (nCortes > 7){
            nCortes = 7;
        }
        //* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        color.domain(d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); }));
        calculo_maxmin = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        valorMaximoDatos = CalcularMaximoDatos(calculo_maxmin, false)
        valorMinimoDatos = CalcularMinimoDatos(calculo_maxmin, false, true);
        margenIzquierdo = CalcularAnchoMargenIzquierdo_GraficoLineas(format("#.##0,",valorMaximoDatos), format("#.##0,",valorMinimoDatos), 450);
        margenDerecho = CalcularAnchoMargenDerecho_GraficoLineas(category, 450);
        if (category.length > 1 && 450 > 450) 
        {
            margenSuperior = 40;
            margenInferior = 20;
        }
        else if (category.length == 1 && 450 > 450) 
        {
            margenDerecho = 30 
            margenSuperior = 40;
            margenInferior = 20;
        }
        else 
        {
            margenDerecho = 30 
            margenSuperior = 50;
            margenInferior = 50;
        }
        fechaMaximo = d3.max(calculo_maxmin, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.fecha;
            });
        });
        fechaMinimo = d3.min(calculo_maxmin, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.fecha;
            });
        });
        margin = { top: margenSuperior, right: margenDerecho, bottom: margenInferior, left: margenIzquierdo };
        width = 450 - margin.left - margin.right;
        height = 450 - margin.top - margin.bottom;
        ejeX = d3.scaleTime().range([0, width]);
        ejeY = d3.scaleLinear().range([height, 0]);
        linea_grafico = d3.line()
            .x(function (d) { return ejeX(d.fecha); })
            .y(function (d) { return ejeY(d.valor_serie); })
            .defined(function (d) { return !isNaN(d.valor_serie); })
            ;
                // 1.Add the SVG To the page And employ #2
        svg = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda6110").append("svg")
            .attr('id', 'celda6110')
            .attr("width", 450)
            .attr("height", 450)
            .append("g")
            .attr("transform", "translate(" + margin.left + ", " + margin.top + ")");
        seriesLineas = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, etiquetaperiodo: d.etiquetaperiodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        nElementosPorSerie = seriesLineas[0].values.length - 1;
        ejeX.domain([fechaMinimo, fechaMaximo]);
        ejeY.domain([valorMinimoDatos, valorMaximoDatos]);
                // Leyenda, eje de las X, puntos y leyenda de estos puntos:
        svg.append("g")
            .attr("class", "fuente_generica")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom().scale(ejeX).tickSize(-height).ticks(nCortes))
            .call(
                g => {
                    g.selectAll("text")
                        .style("text-anchor", "middle")
                        .attr("y", "5")
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 1.5)
                        .attr('opacity', 0.5)
                }
            )
        ;
        svg.append("g")
            .attr("class", "fuente_generica")
            .call(d3.axisLeft(ejeY).ticks(4).tickSize(-width))
            .call(
                g => {
                    g.selectAll("text")
                        .attr("x", -3)
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain").remove()
                }
            )
        ;
        svg.selectAll("text").attr('fill', '#A9A9A9');
        if (category.length > 1 ) 
        {
            anchoNodos = (d) => d.getBBox().width; 
            svgLeyendaHorizontal = svg.append('g')
                .append('g')
            const lgcelda6110 = svgLeyendaHorizontal.selectAll('g')
                .data(category)
                .enter()
                .append('g')
                .attr('transform', (d, i) => `translate(${i * 100},${height + 15})`);            
            lgcelda6110.append('rect')            
                .style('fill', d=>color(d))
                .attr('x', 0)
                .attr('y', 0)
                .attr('width', 10)
                .attr('height', 10);
            lgcelda6110.append('text')
                .attr('x', 17.5)
                .attr('y', 10)
                .text(d => d);
            let offsetcelda6110 = 0;
            lgcelda6110.attr('transform', function (d, i) {
                let x = offsetcelda6110;
                offsetcelda6110 += anchoNodos(this) + 10;
                return `translate(${x},${height + 10})`;
            });
            svgLeyendaHorizontal.attr('transform', function () {
                return 'translate(0,20)'
             });
        }
        if (valorMaximoDatos > 0 && valorMinimoDatos < 0 ) 
        {
            lineaCero = svg.append("line")
            .attr('id', 'lineaCero')
            .attr("x1", 0)
            .attr("y1", ejeY(0))
            .attr("x2", width)
            .attr("y2", ejeY(0))
            .attr("stroke-width", "1px")
            .attr("stroke", "#A9A9A9")
            .style("stroke-dasharray", ("5, 3"))
            ;
        }
        lineas_series = svg.selectAll(".lineas_series")
            .data(seriesLineas)
            .enter().append("g")
            ;
        lineas_series.append("path")
            .attr("class", "line linecelda6110")
            .attr("d", function (d) { return linea_grafico(d.values); })
            .attr("data-legend", function (d) { return d.name })
            .style("stroke", function (d) { return color(d.name); });
        puntosAislados = svg.selectAll(".dot")
            .data(seriesLineas).enter()
            .append("g")
            .attr('class', 'circle-group')
            .style("fill", function (d, i1) {
                return color(d.name);
            })
            ;
        puntosAislados.selectAll(".dot")
            .data(d => d.values).enter()
            .append("circle") // Uses the enter().append() method
            .attr("class", "dot") // Assign a class for styling
            .attr("cx", function (d, i) { return ejeX(d.fecha) })
            .attr("cy", function (d) { return ejeY(d.valor_serie) })
            .attr("r", 3)
            .style("opacity", function (d, i) {
                if (i == 0) {
                    cDimensionExt++;
                }
                if (d.valor_serie == "'null'" || isNaN(d.valor_serie)) {
                    return "0";
                }
                else {
                    if (i > 0 && i < nElementosPorSerie) {
                        if ((seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie)) && (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie))) {
                            return "1";
                        }
                        else {
                            return "0";
                        }
                    }
                    else {
                        if (i == 0) {
                            if (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie)) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                        else {
                            if (i == nElementosPorSerie && (seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie))) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                    }
                }
            })
            ;
        transition(d3.selectAll(".linecelda6110"));
        lineasVertHorRaton = svg.append("g"); 
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-linecelda6110")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-line-horizontalcelda6110")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        ratonPorLinea = lineasVertHorRaton.selectAll(".mouse-per-linecelda6110")
            .data(seriesLineas)
            .enter()
            .append("g")
            .attr("class", "mouse-per-linecelda6110");
            //Tabulación descuadrada:
                ratonPorLinea.append("circle")
                    .attr("r", 4)
                    .style("stroke", function (d) {
                        return color(d.name);
                    })
                    .style("fill", "#FFFFFF")
                    .style("stroke-width", "3px")
                    .style("opacity", "0");
                ratonPorLinea.append("text")
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("text-decoration", "underline")
                    .attr("transform", "translate(10,3)");
                lineasVertHorRaton.append("rect")
                    .attr('id', 'rectcelda6110')
                    .attr("width", width)
                    .attr("height", height)
                    .attr("fill", "none")
                    .attr("pointer-events", "all")
                    .on("mouseout", function () {
                        d3.select(".mouse-linecelda6110").style("opacity", "0");
                        d3.select(".mouse-line-horizontalcelda6110").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda6110 circle").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda6110 text").style("opacity", "0");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'none');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'none');
                    })
                    .on("mouseover", function () {
                        d3.select(".mouse-linecelda6110").style("opacity", "0.65");
                        d3.select(".mouse-line-horizontalcelda6110").style("opacity", "0.65");
                        d3.selectAll(".mouse-per-linecelda6110 circle").style("opacity", "1");
                        d3.selectAll(".mouse-per-linecelda6110 text").style("opacity", "1");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'block');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'block');
                        ActualizarLineasPuntos('celda6110', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,')
                    })
                    .on("mousemove", function () {
                        ActualizarLineasPuntos('celda6110', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,')
                    });
            }
        );
</script>
</div><div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda6110&#39;), &#39;Crecimiento natural de la población.png&#39;, {left: -20, width: 485, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga6110"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga6110").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="450" height="900"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda6110").html() + '</svg>'  )).attr("download", "Crecimiento natural de la población.svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6110&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6110&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;6110&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Crecimiento natural de la población</div></td>
<td class="celda_tipo_fila_2"><div class="clase_capa_unidad_visualizacion" style="min-height: 450px;"><div id="capa_Grafico_Evolucion_Lineas_Asincronocelda6111">
<div id="capa_Esperandocelda6111" class="load-container"></div>
<svg id="celda6111" width="450" height="450"><g transform="translate(54.041015625, 50)"><g class="fuente_generica" transform="translate(0,350)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#A9A9A9" d="M0.5,-350V0.5H366.458984375V-350" stroke-width="1.5" opacity="0.5"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1998</text></g><g class="tick" opacity="1" transform="translate(37.07084991016427,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2000</text></g><g class="tick" opacity="1" transform="translate(73.69179687500001,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2002</text></g><g class="tick" opacity="1" transform="translate(110.26264678516428,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2004</text></g><g class="tick" opacity="1" transform="translate(146.88359375000002,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2006</text></g><g class="tick" opacity="1" transform="translate(183.4544436601643,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2008</text></g><g class="tick" opacity="1" transform="translate(220.07539062499998,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2010</text></g><g class="tick" opacity="1" transform="translate(256.6462405351643,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2012</text></g><g class="tick" opacity="1" transform="translate(293.26718750000003,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2014</text></g><g class="tick" opacity="1" transform="translate(329.8380374101643,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2016</text></g><g class="tick" opacity="1" transform="translate(366.458984375,0)"><line stroke="#A9A9A9" y2="-350" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2018</text></g></g><g class="fuente_generica" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,338.8688750960909)"><line stroke="#A9A9A9" x2="365.958984375" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">350.000</text></g><g class="tick" opacity="1" transform="translate(0,239.21907297212653)"><line stroke="#A9A9A9" x2="365.958984375" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">400.000</text></g><g class="tick" opacity="1" transform="translate(0,139.56927084816218)"><line stroke="#A9A9A9" x2="365.958984375" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">450.000</text></g><g class="tick" opacity="1" transform="translate(0,39.91946872419783)"><line stroke="#A9A9A9" x2="365.958984375" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">500.000</text></g></g><g><g transform="translate(0,20)"><g transform="translate(0,360)"><rect x="0" y="0" width="10" height="10" style="fill: rgb(200, 116, 78);"></rect><text x="17.5" y="10">Nacimientos</text></g><g transform="translate(93.53125,360)"><rect x="0" y="0" width="10" height="10" style="fill: rgb(255, 208, 170);"></rect><text x="17.5" y="10">Defunciones</text></g></g></g><g><path class="line linecelda6111" d="M0,308.0892862227031L18.285424955082135,278.40361016997406L36.57084991016427,243.43848760071748L54.906371919917866,226.00375822110868L73.19179687500001,201.15906955556187L91.47722183008214,155.2504057170515L109.76264678516428,129.91942601713978L128.09816879491788,106.44193263673378L146.38359375000002,73.38610027617233L164.66901870508215,54.313128149645536L182.9544436601643,0L201.28996566991788,49.39042792472168L219.57539062499998,66.17544059448227L237.86081558008215,95.22535090966034L256.1462405351643,129.80582524271847L274.48176254491784,187.46917973977165L292.76718750000003,183.7223471799106L311.0526124550821,198.2811832702218L329.3380374101643,217.62719585456824L347.67355941991786,252.3093129857928L365.958984375,292.9744042365402" data-legend="Nacimientos" style="stroke: rgb(200, 116, 78);" stroke-dasharray="726.359375, 726.359375"></path></g><g><path class="line linecelda6111" d="M0,317.4204936935911L18.285424955082135,296.3624975087549L36.57084991016427,317.6596532186886L54.906371919917866,318.1818181818182L73.19179687500001,301.2632747772115L91.47722183008214,268.9568089286223L109.76264678516428,294.6544999003502L128.09816879491788,263.9205079292771L146.38359375000002,295.56330609572075L164.66901870508215,267.89454203798084L182.9544436601643,265.97528684907326L201.28996566991788,268.74754434416195L219.57539062499998,274.49933092275717L237.86081558008215,262.8124021296586L256.1462405351643,232.83973464681264L274.48176254491784,257.8139680551206L292.76718750000003,247.02986646926516L311.0526124550821,193.74113828545399L329.3380374101643,217.5713919653788L347.67355941991786,189.84483102240696L365.958984375,183.47122967855822" data-legend="Defunciones" style="stroke: rgb(255, 208, 170);" stroke-dasharray="577.4761962890625, 577.4761962890625"></path></g><g class="circle-group" style="fill: rgb(200, 116, 78);"><circle class="dot" cx="0" cy="308.0892862227031" r="3" style="opacity: 0;"></circle><circle class="dot" cx="18.285424955082135" cy="278.40361016997406" r="3" style="opacity: 0;"></circle><circle class="dot" cx="36.57084991016427" cy="243.43848760071748" r="3" style="opacity: 0;"></circle><circle class="dot" cx="54.906371919917866" cy="226.00375822110868" r="3" style="opacity: 0;"></circle><circle class="dot" cx="73.19179687500001" cy="201.15906955556187" r="3" style="opacity: 0;"></circle><circle class="dot" cx="91.47722183008214" cy="155.2504057170515" r="3" style="opacity: 0;"></circle><circle class="dot" cx="109.76264678516428" cy="129.91942601713978" r="3" style="opacity: 0;"></circle><circle class="dot" cx="128.09816879491788" cy="106.44193263673378" r="3" style="opacity: 0;"></circle><circle class="dot" cx="146.38359375000002" cy="73.38610027617233" r="3" style="opacity: 0;"></circle><circle class="dot" cx="164.66901870508215" cy="54.313128149645536" r="3" style="opacity: 0;"></circle><circle class="dot" cx="182.9544436601643" cy="0" r="3" style="opacity: 0;"></circle><circle class="dot" cx="201.28996566991788" cy="49.39042792472168" r="3" style="opacity: 0;"></circle><circle class="dot" cx="219.57539062499998" cy="66.17544059448227" r="3" style="opacity: 0;"></circle><circle class="dot" cx="237.86081558008215" cy="95.22535090966034" r="3" style="opacity: 0;"></circle><circle class="dot" cx="256.1462405351643" cy="129.80582524271847" r="3" style="opacity: 0;"></circle><circle class="dot" cx="274.48176254491784" cy="187.46917973977165" r="3" style="opacity: 0;"></circle><circle class="dot" cx="292.76718750000003" cy="183.7223471799106" r="3" style="opacity: 0;"></circle><circle class="dot" cx="311.0526124550821" cy="198.2811832702218" r="3" style="opacity: 0;"></circle><circle class="dot" cx="329.3380374101643" cy="217.62719585456824" r="3" style="opacity: 0;"></circle><circle class="dot" cx="347.67355941991786" cy="252.3093129857928" r="3" style="opacity: 0;"></circle><circle class="dot" cx="365.958984375" cy="292.9744042365402" r="3" style="opacity: 0;"></circle></g><g class="circle-group" style="fill: rgb(255, 208, 170);"><circle class="dot" cx="0" cy="317.4204936935911" r="3" style="opacity: 0;"></circle><circle class="dot" cx="18.285424955082135" cy="296.3624975087549" r="3" style="opacity: 0;"></circle><circle class="dot" cx="36.57084991016427" cy="317.6596532186886" r="3" style="opacity: 0;"></circle><circle class="dot" cx="54.906371919917866" cy="318.1818181818182" r="3" style="opacity: 0;"></circle><circle class="dot" cx="73.19179687500001" cy="301.2632747772115" r="3" style="opacity: 0;"></circle><circle class="dot" cx="91.47722183008214" cy="268.9568089286223" r="3" style="opacity: 0;"></circle><circle class="dot" cx="109.76264678516428" cy="294.6544999003502" r="3" style="opacity: 0;"></circle><circle class="dot" cx="128.09816879491788" cy="263.9205079292771" r="3" style="opacity: 0;"></circle><circle class="dot" cx="146.38359375000002" cy="295.56330609572075" r="3" style="opacity: 0;"></circle><circle class="dot" cx="164.66901870508215" cy="267.89454203798084" r="3" style="opacity: 0;"></circle><circle class="dot" cx="182.9544436601643" cy="265.97528684907326" r="3" style="opacity: 0;"></circle><circle class="dot" cx="201.28996566991788" cy="268.74754434416195" r="3" style="opacity: 0;"></circle><circle class="dot" cx="219.57539062499998" cy="274.49933092275717" r="3" style="opacity: 0;"></circle><circle class="dot" cx="237.86081558008215" cy="262.8124021296586" r="3" style="opacity: 0;"></circle><circle class="dot" cx="256.1462405351643" cy="232.83973464681264" r="3" style="opacity: 0;"></circle><circle class="dot" cx="274.48176254491784" cy="257.8139680551206" r="3" style="opacity: 0;"></circle><circle class="dot" cx="292.76718750000003" cy="247.02986646926516" r="3" style="opacity: 0;"></circle><circle class="dot" cx="311.0526124550821" cy="193.74113828545399" r="3" style="opacity: 0;"></circle><circle class="dot" cx="329.3380374101643" cy="217.5713919653788" r="3" style="opacity: 0;"></circle><circle class="dot" cx="347.67355941991786" cy="189.84483102240696" r="3" style="opacity: 0;"></circle><circle class="dot" cx="365.958984375" cy="183.47122967855822" r="3" style="opacity: 0;"></circle></g><g><path class="mouse-linecelda6111" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 1;"></path><path class="mouse-line-horizontalcelda6111" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 1;"></path><g class="mouse-per-linecelda6111"><circle r="4" style="stroke: rgb(200, 116, 78); fill: rgb(255, 255, 255); stroke-width: 3px; opacity: 0;"></circle><text text-anchor="middle" transform="translate(10,3)" style="font-size: 16px; text-decoration: underline;"></text></g><g class="mouse-per-linecelda6111"><circle r="4" style="stroke: rgb(255, 208, 170); fill: rgb(255, 255, 255); stroke-width: 3px; opacity: 0;"></circle><text text-anchor="middle" transform="translate(10,3)" style="font-size: 16px; text-decoration: underline;"></text></g><rect id="rectcelda6111" width="365.958984375" height="350" fill="none" pointer-events="all"></rect></g></g></svg></div>
<style type="text/css">
        .linecelda6111 {
            fill: none;
            stroke: #FF6E2B;
            stroke-width: 2;
        }
        .toolTip {
            display: none;
            width: auto;
            height: auto;
            background: none repeat scroll 0 0 white;
            border: 0 none;
            border-radius: 8px 8px 8px 8px;
            box-shadow: -3px 3px 15px #888888;
            color: black;
            text-align: center;
            padding: 5px;
            z-index: 1;
        }
        .tooltip_YLegend {
            position: absolute;
            text-align: center;
            display: none;
            padding-top: 5px;
            padding-bottom: 5px;
            border-radius: 3px 3px 3px 3px;
            background-color: #8A8985;
            color: #FFFFFF;
            border: 0 none;
        }
            .tooltip_YLegend:after {
                left: 100%;
                top: 50%;
                border: solid transparent;
                content: " "; 
                height: 0;
                width: 0;
                position: absolute;
                pointer-events: none;
                border-color: rgba(217, 217, 217, 0);
                border-left-color: #8A8985;
                border-width: 5px;
                margin-top: -5px;
            }
        text {
            font-size: 12px;
            color: #A9A9A9;
            font-family: Arial, sans-serif;
            fill: #A9A9A9;
        }
        @-webkit-keyframes load8 {
            0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }
        @keyframes load8 {
            0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }
        .load-container {
            position: obsolute;
            overflow: hidden;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
}
        .loadercelda6111,
        .loadercelda6111:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda6111 {
            margin: 160px 160px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF6E2B;
            border-right: 1.1em solid #FF6E2B;
            border-bottom: 1.1em solid #FF6E2B;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script src="./www.portalestadistico.com_files/d3.locale.es-Es.js"></script>
<script>
    var globo_Grafico_MLineas;
    var globo_Grafico_MLineas_LeyendaY;
    function tweenDash() {
        var l, i;
        l = this.getTotalLength();
        i = d3.interpolateString("0, " + l, l + ", " + l);
        return function (t) { return i(t); };
    }
    function transition(selection) {
        selection.each(function () {
            d3.select(this).transition()
                .duration(1000)
                .attrTween("stroke-dasharray", tweenDash);
        })
    }
    function CalcularMinimoDatos(pArrayDatos, pComenzarEjeYEnCero, pDecalajesVerticales) {
        var minimoDatos = 0;
        var maximoDatos = 0;
        var totalDatos = 0;
        var decajaleVertical = 0;
        minimoDatos = d3.min(pArrayDatos, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.valor_serie;
            });
        });
        maximoDatos = d3.max(pArrayDatos, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.valor_serie;
            });
        });
        totalDatos = maximoDatos - minimoDatos
        // Aplicamos el valor 0 si es seleccionado:
        if (pComenzarEjeYEnCero == true) {
            if (minimoDatos > 0) {
                minimoDatos = 0;
            }
        }
        if (pDecalajesVerticales == true) {
            decajaleVertical = (totalDatos * 10) / 100;
            if (minimoDatos >= 0 && (minimoDatos - decajaleVertical) < 0) {
                minimoDatos = 0;
            }
            else {
                minimoDatos = minimoDatos - decajaleVertical
            }
        }
        return minimoDatos;
    }
    function CalcularAnchoMargenIzquierdo_GraficoLineas(pvalorMaximoDatos, pvalorMinimoDatos, pAnchoGrafico) {
        var cadenaMayor = ';'
        var margenPixeles = 0;
        var c;
        var ctx;
        var txt;
        var canvasMedicionIzquierdo;
        if (pvalorMaximoDatos.toString().length > pvalorMinimoDatos.toString().length) {
            cadenaMayor = pvalorMaximoDatos.toString()
        }
        else {
            cadenaMayor = pvalorMinimoDatos.toString()
        }
        canvasMedicionIzquierdo = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda6111").append("canvas")
            .attr('id', 'canvasMedicionIzquierdocelda6111')
            .attr("visibility", "hidden")
            .attr("white-space", "nowrap");
            c = document.getElementById("canvasMedicionIzquierdocelda6111");
            ctx = c.getContext("2d");
            ctx.font = "12px Arial";
            txt = cadenaMayor + ' - '
            margenPixeles = ctx.measureText(txt).width;
            canvasMedicionIzquierdo.remove();
        return margenPixeles;
    }
    function CalcularAnchoMargenDerecho_GraficoLineas(pArrayDatos, pAnchoGrafico) {
        var cadenaMayor = "";
        var canvasMedicionDerecho;
        var c;
        var ctx;
        var txt;
        pArrayDatos.forEach(function (nombreSerie) {
            if (nombreSerie.length > cadenaMayor.length) {
                cadenaMayor = nombreSerie;
            }
        });
        canvasMedicionDerecho = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda6111").append("canvas")
            .attr('id', 'canvasMedicionDerechocelda6111')
            .attr("visibility", "hidden")
            .attr("white-space", "nowrap")
        c = document.getElementById("canvasMedicionDerechocelda6111");
        ctx = c.getContext("2d");
        ctx.font = "12px Arial";
        txt = cadenaMayor
        margenPixeles = ctx.measureText(txt).width + 45;
        canvasMedicionDerecho.remove();
        if (margenPixeles > (pAnchoGrafico / 2)) {
            margenPixeles = pAnchoGrafico / 2;
        }
        return margenPixeles;
    }
    function CalcularMaximoDatos(pArrayDatos, pComenzarEjeYEnCero) {
        var maximoDatos = 0;
        maximoDatos = d3.max(pArrayDatos, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.valor_serie;   // el return es local a esta función interna
            });
        });
         if (pComenzarEjeYEnCero == true) {
            if (maximoDatos < 0) {
                maximoDatos = 0;
            }
        }
        return maximoDatos;
    }
    function hex (c) {
	    var s = "0123456789abcdef";
	    var i = parseInt (c);
	    if (i == 0 || isNaN (c))
	        return "00";
	    i = Math.round (Math.min (Math.max (0, i), 255));
	    return s.charAt ((i - i % 16) / 16) + s.charAt (i % 16);
    }
    function convertToHex (rgb) {
	    return hex(rgb[0]) + hex(rgb[1]) + hex(rgb[2]);
    }
    function trim (s) { return (s.charAt(0) == '#') ? s.substring(1, 7) : s }
    function convertToRGB (hex) {
	    var color = [];
	    color[0] = parseInt ((trim(hex)).substring (0, 2), 16);
	    color[1] = parseInt ((trim(hex)).substring (2, 4), 16);
	    color[2] = parseInt ((trim(hex)).substring (4, 6), 16);
	    return color;
    }
    function CalcularGradienteColores_GraficoEvolucionLineas2(colorInicio,colorFin,numeroLineas){
        var colorInicioRGB = '';
        var colorFinRGB = '';
        var colorRMedia;
        var colorGMedia;
        var colorBMedia;
        var colorRGBMedia = new Array();
        var colorHexMedia;
        var numeroLineasADistribuir = 0;
        var coloresPositivosNegativos = 0
        var cantidadColorTramo = 0;
        var colores = new Array();
        colorInicioRGB = convertToRGB(colorInicio);
        colorFinRGB = convertToRGB(colorFin);
        colorRMedia = (colorInicioRGB[0] + colorFinRGB[0]) / 2;
        colorGMedia = (colorInicioRGB[1] + colorFinRGB[1]) / 2;
        colorBMedia = (colorInicioRGB[2] + colorFinRGB[2]) / 2;
        colorRGBMedia = [colorRMedia, colorGMedia, colorBMedia];
        colorHexMedia = convertToHex(colorRGBMedia);
        numeroLineasADistribuir = numeroLineas;
        if(numeroLineas % 2 != 0) {
            numeroLineasADistribuir = numeroLineasADistribuir - 1;
        }
        coloresPositivosNegativos = numeroLineasADistribuir / 2;
        cantidadColorTramo = 110 / (coloresPositivosNegativos + 1);
        for (var i = coloresPositivosNegativos; i >= 1; i--) {
            colores.push('#' + LightenDarkenColor(colorHexMedia, cantidadColorTramo * i * -1))
        }
        if (numeroLineas % 2 != 0) {
            colores.push('#' + colorHexMedia);
        }
        cantidadColorTramo = 75 / (coloresPositivosNegativos + 1);
        for (var i = 1; i <= coloresPositivosNegativos; i++) {
            colores.push('#' + LightenDarkenColor(colorHexMedia, cantidadColorTramo * i))
        }
    return colores;
    }
    function LightenDarkenColor(colorCode, amount) {
        var usePound = false;
        if (colorCode[0] == "#") {
            colorCode = colorCode.slice(1);
            usePound = true;
        }
        var num = parseInt(colorCode, 16);
        var r = (num >> 16) + amount;
        if (r > 255) {
            r = 255;
        } else if (r < 0) {
            r = 0;
        }
        var b = ((num >> 8) & 0x00FF) + amount;
        if (b > 255) {
            b = 255;
        } else if (b < 0) {
            b = 0;
        }
        var g = (num & 0x0000FF) + amount;
        if (g > 255) {
            g = 255;
        } else if (g < 0) {
            g = 0;
        }
        return (usePound ? "#" : "") + (g | (b << 8) | (r << 16)).toString(16);
    }
    function ActualizarLineasPuntos(pIdentificador, pMouse, pSerie_datos_anidados, pX, pY, pNPuntosEjeX, pWidth, pHeight)
    {
        var xDate;
        var bisect;
        var idx;
        var data;
        pSerie_datos_anidados.map(d => {
            xDate = pX.invert(pMouse[0] - (pWidth / pNPuntosEjeX) / 2);
            bisect = d3.bisector(function (d) { return d.fecha; }).left
            idx = bisect(d.values, xDate)
        })
        d3.selectAll('.mouse-per-line'+ pIdentificador)
            .attr("transform", function (d, i) {
                d3.select('.mouse-line' + pIdentificador)
                   .attr("d", function () {
                       data = "M" + pX(d.values[idx].fecha) + "," + pHeight;
                       data += " " + pX(d.values[idx].fecha) + "," + 0;
                       return data;
                    });
                d3.select('.mouse-line-horizontal' + pIdentificador)
                    .attr("d", function () {
                        data = "M" + (pWidth) + "," + pMouse[1]
                        data += " 0," + pMouse[1]
                        return data;
                    });
                if (isNaN(pY(d.values[idx].valor_serie))) {
                    return "translate(0,0)";
                }
                else {
                    return "translate(" + pX(d.values[idx].fecha) + "," + pY(d.values[idx].valor_serie) + ")";
                }
            })
           .style("opacity", function (d, i) {
               if (isNaN(pY(d.values[idx].valor_serie))) {
                   return "0";
               }
               else {
                   return "1";
               }
           })
       ;
    }
    function ActualizarContenidoGlobo(pMouse, pSerie_datos_anidados, pSerie_datos_formateados_anidados, pX, pY, pNPuntosEjeX, pWidth, pMargin, pColor, pMascaraSalidaDatos)
    {
        var xDate;
        var bisect;
        var idx;
        var valorYLegend;
        var sortingArr;
        var res_nested1;
        sortingObj = []
        pSerie_datos_anidados.map(d => {
            xDate = pX.invert(pMouse[0] - (pWidth / pNPuntosEjeX) / 2);
            bisect = d3.bisector(function (d) { return d.fecha; }).left
            idx = bisect(d.values, xDate)
            sortingObj.push({ name: d.name, fecha_periodo_serie: d.values[idx].fecha, nombre_periodo: d.values[idx].nombre_periodo + ' ' + d.values[idx].anio_periodo, etiquetaperiodo: d.values[idx].etiquetaperiodo, valor_serie: d.values[idx].valor_serie })
        })
        sortingObj.sort(function (pX, pY) {
            return d3.descending(pX.valor_serie, pY.valor_serie);
        })
        sortingArr = sortingObj.map(d => d.name)
        res_nested1 = pSerie_datos_formateados_anidados.slice().sort(function (a, b) {
            return sortingArr.indexOf(a.name) - sortingArr.indexOf(b.name) // rank vehicle Hombresased on price of valor_indicador
        })
        globo_Grafico_MLineas.html(sortingObj[0].etiquetaperiodo + ': ' + sortingObj[0].nombre_periodo)
            .style('display', 'block')
            .style('left', d3.event.pageX + 25 + 'px')
            .style('top', d3.event.pageY - 80 + 'px')
            .style('font-size', 12.5)
            .selectAll()
            .data(res_nested1).enter()
            .append('div')
            .style('color', d => {
                return pColor(d.name)
            })
            .style('font-size', 15)
            .html(d => {
                if (isNaN(d.values[idx].valor_serie)) {
                    return d.name + " : <b> - </b>"
                }
                else {
                    return d.name + " : <b>" + format(pMascaraSalidaDatos, d.values[idx].valor_serie) + "</b>"
                }
            })
        valorYLegend = pY.invert(pMouse[1] - 1)
        valorYLegend = format(pMascaraSalidaDatos, valorYLegend);
        globo_Grafico_MLineas_LeyendaY.html(valorYLegend)
            .style('display', 'block')
            .style('width', pMargin.left - 5 + 'px')
            .style('left', d3.event.pageX - pMouse[0] - pMargin.left + 'px')
            .style('top', d3.event.pageY - 12 + 'px')
    }
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=6111&pId_Territorio=00&pId_Territorio_Padre=&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var linea_grafico;
        var svg;
        var seriesLineas;
        var lineaCero;
        var lineas_series;
        var nElementosPorSerie;
        var puntosAislados;
        var lineasVertHorRaton;
        var ratonPorLinea;
        var ejeX;
        var ejeY;
        var cDimensionExt = 0
        var valorMinimoDatos = 0;
        var valorMaximoDatos = 0;
        var fechaMaximo;
        var fechaMinimo;
        var calculo_maxmin;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var nCortes = 0;
        var nPuntosEjeX = 0;
        var parseDate = d3.timeParse("%Y/%m/%d");
        var margin;
        var width;
        var height;
        var color;
        var category;
        var element_capa_esperando;
       var anchoNodos;
       var svgLeyendaHorizontal;
       var svgLegend;
       var legend;
        element_capa_esperando = document.getElementById("capa_Esperandocelda6111");
        element_capa_esperando.classList.remove("loadercelda6111");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_GraficoEvolucionLineas2('#FFE9DF', '#FF6E2B', category.length));
        data.forEach(function (d) {
            d.fecha_periodo_serie = parseDate(d.fecha_periodo_serie);
            nCortes++;
            nPuntosEjeX++;
        });
        if (nCortes > 7){
            nCortes = 7;
        }
        //* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        color.domain(d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); }));
        calculo_maxmin = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        valorMaximoDatos = CalcularMaximoDatos(calculo_maxmin, false)
        valorMinimoDatos = CalcularMinimoDatos(calculo_maxmin, false, true);
        margenIzquierdo = CalcularAnchoMargenIzquierdo_GraficoLineas(format("#.##0,",valorMaximoDatos), format("#.##0,",valorMinimoDatos), 450);
        margenDerecho = CalcularAnchoMargenDerecho_GraficoLineas(category, 450);
        if (category.length > 1 && 450 > 450) 
        {
            margenSuperior = 40;
            margenInferior = 20;
        }
        else if (category.length == 1 && 450 > 450) 
        {
            margenDerecho = 30 
            margenSuperior = 40;
            margenInferior = 20;
        }
        else 
        {
            margenDerecho = 30 
            margenSuperior = 50;
            margenInferior = 50;
        }
        fechaMaximo = d3.max(calculo_maxmin, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.fecha;
            });
        });
        fechaMinimo = d3.min(calculo_maxmin, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.fecha;
            });
        });
        margin = { top: margenSuperior, right: margenDerecho, bottom: margenInferior, left: margenIzquierdo };
        width = 450 - margin.left - margin.right;
        height = 450 - margin.top - margin.bottom;
        ejeX = d3.scaleTime().range([0, width]);
        ejeY = d3.scaleLinear().range([height, 0]);
        linea_grafico = d3.line()
            .x(function (d) { return ejeX(d.fecha); })
            .y(function (d) { return ejeY(d.valor_serie); })
            .defined(function (d) { return !isNaN(d.valor_serie); })
            ;
                // 1.Add the SVG To the page And employ #2
        svg = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda6111").append("svg")
            .attr('id', 'celda6111')
            .attr("width", 450)
            .attr("height", 450)
            .append("g")
            .attr("transform", "translate(" + margin.left + ", " + margin.top + ")");
        globo_Grafico_MLineas = d3.select("body").append("div")
            .attr('id', 'globo_Grafico_MLineas')
            .style('position', 'absolute')
            .style('padding', 6)
            .attr("class", "toolTip")
            .style('display', 'none');
        globo_Grafico_MLineas_LeyendaY = d3.select("body").append("div")
            .attr('id', 'globo_Grafico_MLineas_LeyendaY')
            .style('position', 'absolute')
            .attr("class", "tooltip_YLegend")
        ;
        seriesLineas = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, etiquetaperiodo: d.etiquetaperiodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        nElementosPorSerie = seriesLineas[0].values.length - 1;
        ejeX.domain([fechaMinimo, fechaMaximo]);
        ejeY.domain([valorMinimoDatos, valorMaximoDatos]);
                // Leyenda, eje de las X, puntos y leyenda de estos puntos:
        svg.append("g")
            .attr("class", "fuente_generica")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom().scale(ejeX).tickSize(-height).ticks(nCortes))
            .call(
                g => {
                    g.selectAll("text")
                        .style("text-anchor", "middle")
                        .attr("y", "5")
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 1.5)
                        .attr('opacity', 0.5)
                }
            )
        ;
        svg.append("g")
            .attr("class", "fuente_generica")
            .call(d3.axisLeft(ejeY).ticks(4).tickSize(-width))
            .call(
                g => {
                    g.selectAll("text")
                        .attr("x", -3)
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain").remove()
                }
            )
        ;
        svg.selectAll("text").attr('fill', '#A9A9A9');
        if (category.length > 1 ) 
        {
            anchoNodos = (d) => d.getBBox().width; 
            svgLeyendaHorizontal = svg.append('g')
                .append('g')
            const lgcelda6111 = svgLeyendaHorizontal.selectAll('g')
                .data(category)
                .enter()
                .append('g')
                .attr('transform', (d, i) => `translate(${i * 100},${height + 15})`);            
            lgcelda6111.append('rect')            
                .style('fill', d=>color(d))
                .attr('x', 0)
                .attr('y', 0)
                .attr('width', 10)
                .attr('height', 10);
            lgcelda6111.append('text')
                .attr('x', 17.5)
                .attr('y', 10)
                .text(d => d);
            let offsetcelda6111 = 0;
            lgcelda6111.attr('transform', function (d, i) {
                let x = offsetcelda6111;
                offsetcelda6111 += anchoNodos(this) + 10;
                return `translate(${x},${height + 10})`;
            });
            svgLeyendaHorizontal.attr('transform', function () {
                return 'translate(0,20)'
             });
        }
        if (valorMaximoDatos > 0 && valorMinimoDatos < 0 ) 
        {
            lineaCero = svg.append("line")
            .attr('id', 'lineaCero')
            .attr("x1", 0)
            .attr("y1", ejeY(0))
            .attr("x2", width)
            .attr("y2", ejeY(0))
            .attr("stroke-width", "1px")
            .attr("stroke", "#A9A9A9")
            .style("stroke-dasharray", ("5, 3"))
            ;
        }
        lineas_series = svg.selectAll(".lineas_series")
            .data(seriesLineas)
            .enter().append("g")
            ;
        lineas_series.append("path")
            .attr("class", "line linecelda6111")
            .attr("d", function (d) { return linea_grafico(d.values); })
            .attr("data-legend", function (d) { return d.name })
            .style("stroke", function (d) { return color(d.name); });
        puntosAislados = svg.selectAll(".dot")
            .data(seriesLineas).enter()
            .append("g")
            .attr('class', 'circle-group')
            .style("fill", function (d, i1) {
                return color(d.name);
            })
            ;
        puntosAislados.selectAll(".dot")
            .data(d => d.values).enter()
            .append("circle") // Uses the enter().append() method
            .attr("class", "dot") // Assign a class for styling
            .attr("cx", function (d, i) { return ejeX(d.fecha) })
            .attr("cy", function (d) { return ejeY(d.valor_serie) })
            .attr("r", 3)
            .style("opacity", function (d, i) {
                if (i == 0) {
                    cDimensionExt++;
                }
                if (d.valor_serie == "'null'" || isNaN(d.valor_serie)) {
                    return "0";
                }
                else {
                    if (i > 0 && i < nElementosPorSerie) {
                        if ((seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie)) && (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie))) {
                            return "1";
                        }
                        else {
                            return "0";
                        }
                    }
                    else {
                        if (i == 0) {
                            if (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie)) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                        else {
                            if (i == nElementosPorSerie && (seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie))) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                    }
                }
            })
            ;
        transition(d3.selectAll(".linecelda6111"));
        lineasVertHorRaton = svg.append("g"); 
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-linecelda6111")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-line-horizontalcelda6111")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        ratonPorLinea = lineasVertHorRaton.selectAll(".mouse-per-linecelda6111")
            .data(seriesLineas)
            .enter()
            .append("g")
            .attr("class", "mouse-per-linecelda6111");
            //Tabulación descuadrada:
                ratonPorLinea.append("circle")
                    .attr("r", 4)
                    .style("stroke", function (d) {
                        return color(d.name);
                    })
                    .style("fill", "#FFFFFF")
                    .style("stroke-width", "3px")
                    .style("opacity", "0");
                ratonPorLinea.append("text")
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("text-decoration", "underline")
                    .attr("transform", "translate(10,3)");
                lineasVertHorRaton.append("rect")
                    .attr('id', 'rectcelda6111')
                    .attr("width", width)
                    .attr("height", height)
                    .attr("fill", "none")
                    .attr("pointer-events", "all")
                    .on("mouseout", function () {
                        d3.select(".mouse-linecelda6111").style("opacity", "0");
                        d3.select(".mouse-line-horizontalcelda6111").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda6111 circle").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda6111 text").style("opacity", "0");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'none');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'none');
                    })
                    .on("mouseover", function () {
                        d3.select(".mouse-linecelda6111").style("opacity", "0.65");
                        d3.select(".mouse-line-horizontalcelda6111").style("opacity", "0.65");
                        d3.selectAll(".mouse-per-linecelda6111 circle").style("opacity", "1");
                        d3.selectAll(".mouse-per-linecelda6111 text").style("opacity", "1");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'block');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'block');
                        ActualizarLineasPuntos('celda6111', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,')
                    })
                    .on("mousemove", function () {
                        ActualizarLineasPuntos('celda6111', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,')
                    });
            }
        );
</script>
</div><div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda6111&#39;), &#39;Evolución de los nacimientos y las defunciones.png&#39;, {left: -20, width: 485, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga6111"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga6111").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="450" height="900"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda6111").html() + '</svg>'  )).attr("download", "Evolución de los nacimientos y las defunciones.svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6111&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6111&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;6111&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Evolución de los nacimientos y las defunciones</div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_6376" class="anchor"></a></td></tr><tr><td class="celda_sin_estilos" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 140px;"><table class="Tablas_datos"><tbody><tr class="Tablas_datos_cabecera"><td class="columna_izquierda"><h4 class="h4_grande">Número de defunciones</h4></td><td class="columna_derecha"><h4 class="h4_muy_grande negativos_ie">37.033 personas</h4></td></tr><tr><td colspan="2"><table class="Subtitulo_indicador"><tbody><tr><td class="columna_estrecha">Periodo:</td><td class="columna_ancha negrita">Diciembre&nbsp;2018</td><td class="columna_izquierda columna_estrecha">Crecimiento interanual:</td><td class="columna_centro texto_muy_grande negativos_ie">-11,1%</td><td class="columna_derecha"><img class="imagen_tendencia" src="./www.portalestadistico.com_files/crecimiento_abajo.png" alt="Estabilidad"></td></tr><tr><td class="columna_estrecha">Fuente:</td><td colspan="4" class="negrita">INE, Movimiento Natural de la Población.</td></tr></tbody></table></td></tr><tr><td colspan="2"><p class="texto_contenido">Número de defunciones por territorio de residencia.</p></td></tr></tbody></table></div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_6377" class="anchor"></a></td></tr><tr><td class="celda_tipo_fila_1" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 222px;"><div id="capa_Grafico_Evolucion_Lineas_Asincronocelda6377">
<div id="capa_Esperandocelda6377" class="load-container"></div>
<svg id="celda6377" width="969" height="222"><g transform="translate(47.3671875, 40)"><g class="fuente_generica" transform="translate(0,162)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#A9A9A9" d="M0.5,-162V0.5H892.1328125V-162" stroke-width="1.5" opacity="0.5"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1975</text></g><g class="tick" opacity="1" transform="translate(102.00588762968846,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1980</text></g><g class="tick" opacity="1" transform="translate(203.56504703154997,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1985</text></g><g class="tick" opacity="1" transform="translate(305.0686184972309,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1990</text></g><g class="tick" opacity="1" transform="translate(406.5698737989043,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">1995</text></g><g class="tick" opacity="1" transform="translate(508.0757614285928,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2000</text></g><g class="tick" opacity="1" transform="translate(609.6349208304542,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2005</text></g><g class="tick" opacity="1" transform="translate(711.1384922961352,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2010</text></g><g class="tick" opacity="1" transform="translate(812.6420637618161,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2015</text></g></g><g class="fuente_generica" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,146.8855421686747)"><line stroke="#A9A9A9" x2="891.6328125" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">20.000</text></g><g class="tick" opacity="1" transform="translate(0,97.04368239044021)"><line stroke="#A9A9A9" x2="891.6328125" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">30.000</text></g><g class="tick" opacity="1" transform="translate(0,47.20182261220572)"><line stroke="#A9A9A9" x2="891.6328125" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">40.000</text></g></g><g><path class="line linecelda6377" d="M0,66.56380373383216L1.723226021596993,123.64768573784413L3.2796882346523417,115.5433993379032L5.002914256249334,124.54483921385236L6.670552341665779,129.92776006990167L8.393778363262772,136.70625299974157L10.061416448679218,129.00568566400432L11.78464247027621,134.293906986475L13.507868491873204,141.99945850819006L15.175506577289646,133.02792374810787L16.898732598886642,127.7048131237924L18.566370684303084,103.6212264789495L20.28959670590008,89.88979411004591L22.01282272749707,106.6815166693331L23.62487287673297,105.3208338973873L25.34809889832996,118.04047651279275L27.015736983746407,123.707495969578L28.7389630053434,136.75111067354197L30.406601090759846,136.82088927723152L32.129827112356836,135.87887812742287L33.85305313395383,143.6841133686944L35.523007383377795,134.72753116654565L37.24623340497479,120.48272764192623L38.91387149039124,110.53927661616845L40.63709751198823,100.9845920966809L42.36032353358522,124.39032944853983L43.91678574664057,107.87772130401073L45.63769560423004,100.44131582509814L47.30533368964648,125.24760943672545L49.028559711243474,137.66321670748366L50.69619779665992,138.87935808607259L52.41942381825692,138.3261134425342L54.1426498398539,140.46432922702044L55.81260408927787,135.58979534070912L57.53583011087487,128.18827916364128L59.203468196291304,107.81292688629904L60.926694217888304,101.92161906051172L62.649920239485304,110.3997194087894L64.20638245254065,112.68247658663253L65.92960847413764,124.62957037547534L67.59493039554657,127.97395916659488L69.31815641714356,137.20965578350172L70.98579450256,124.14112014964866L72.70902052415698,132.8684297968175L74.43224654575398,141.88980641667794L76.09988463117043,131.14888563446843L77.82542681677495,126.3192094219575L79.49306490219139,102.43499021622753L81.21629092378839,106.35754458077459L82.93951694538538,122.17236668840837L84.49597915844072,112.79711286412248L86.21920518003772,125.01833688174557L87.88452710144664,127.82443358726019L89.60775312304364,138.01709391190914L91.27539120846008,129.79318704850044L92.99861723005708,129.45924658798626L94.72184325165406,141.99945850819006L96.39179750107803,132.11083352818835L98.11502352267502,124.6196020035197L99.78266160809147,111.20217335121897L101.50588762968846,103.11782369518934L103.22911365128546,126.91731173929631L104.84116380052134,120.093961135656L106.56207365811082,133.92507722411608L108.22971174352726,132.5245209643477L109.95293776512426,138.93418413182866L111.62057585054072,135.83402045362246L113.3438018721377,132.75379351932756L115.06702789373469,141.30167247129478L116.73698214315866,132.17064375992223L118.46020816475566,127.35093591936695L120.1278462501721,85.76288812040809L121.85107227176908,69.10573858252212L123.57429829336607,112.76222356227771L125.13076050642142,114.48176772462679L126.8516703640109,132.1457228300331L128.51930844942734,130.56573587506307L130.24253447102433,129.42435728614151L131.91017255644078,134.887025117836L133.63339857803777,139.67682784252435L135.35662459963476,146.6247830956102L137.02657884905872,134.75245209643478L138.7498048706557,131.56257307062776L140.4174429560722,114.55154632831633L142.14066897766918,115.99696026188514L143.86389499926617,125.46192943377187L145.4203572123215,122.39167087143261L147.14126706991098,131.32333214369223L148.80890515532744,129.9327442558795L150.53213117692442,136.25269207575963L152.19976926234085,128.2281526514639L153.92299528393787,135.5250009229974L155.64622130553485,147.27272727272728L157.31617555495882,129.5938196093875L159.0394015765558,125.05322618359034L160.70703966197223,97.05705354615603L162.43026568356925,69.47456834488106L164.15349170516623,90.68227968051984L165.70995391822157,115.03501236816521L167.43086377581105,128.60695078577845L169.0985018612275,128.39263078873205L170.8217278828245,134.2291125687633L172.48936596824095,129.23495821898422L174.21259198983793,137.25451345730215L175.93581801143495,139.83133760783687L177.60577226085888,136.34240742336044L179.32899828245587,126.08993686697761L180.99663636787233,109.59726546635983L182.71986238946934,105.63982179996802L184.44308841106633,117.51713698512128L186.05513856030223,99.71860885831376L187.77604841789167,120.40796485225889L189.44368650330813,126.41889314151396L191.16691252490511,128.56707729795588L192.83455061032157,125.11303641532422L194.55777663191856,134.5032427975436L196.28100265351557,139.3279348240767L197.95095690293954,126.33416197989096L199.67418292453652,124.98344757990081L201.34182100995295,111.98967473571508L203.06504703154997,79.93637471233248L204.78827305314695,118.78810440946627L206.3447352662023,104.56323762875815L208.06564512379177,117.77133046999029L209.7332832092082,120.85155740428516L211.4565092308052,131.9264186470089L213.12414731622164,121.90322064560593L214.84737333781862,129.22997403300639L216.5705993594156,136.42215439900562L218.2405536088396,129.66858239905486L219.9637796304366,114.59141981613891L221.63141771585305,89.4611541159531L223.35464373745003,72.44514318766385L225.07786975904702,99.27003212030965L226.63433197210236,110.26016220141034L228.3552418296918,117.99561883899233L230.0228799151083,122.17236668840837L231.74610593670528,132.98306607430746L233.41374402212173,126.77277034593942L235.13697004371872,130.68037215255302L236.8601960653157,135.98354603295718L238.5301503147397,130.1022065791255L240.2533763363367,119.52077974820631L241.92101442175309,107.4889547977405L243.64424044335013,85.5734890532508L245.3674664649471,115.35898445672373L246.92392867800243,115.2044746914112L248.6448385355919,121.25029228251105L250.31247662100836,125.09309967141293L252.03570264260534,128.93092287433697L253.7033407280218,124.23581968322729L255.4265667496188,120.01919834598866L257.1497927712158,130.8249135459099L258.8197470206398,119.39617509876072L260.5429730422368,117.63177326261123L262.2106111276532,103.85049903392938L263.93383714925017,101.51291581033018L265.6570631708472,113.21080030028182L267.2691133200831,93.72263312699214L268.9900231776725,118.54886348253075L270.657661263089,121.67394809062604L272.380887284686,127.79951265737105L274.0485253701024,117.86603000356894L275.7717513916994,117.35265884785312L277.4949774132964,127.58020847434682L279.1649316627204,121.73874250833775L280.8881576843174,117.21310164047406L282.55579576973383,82.47830956102244L284.2790217913308,78.05733659869303L286.0022478129278,105.30089715347601L287.55871002598315,107.22479294091586L289.27961988357265,116.3309007223993L290.94725796898905,115.65803561539315L292.67048399058604,120.24847090096853L294.3381220760025,108.43096594754914L296.0613480975995,114.33722633126992L297.78457411919646,128.94587543227044L299.45452836862046,119.31642812311554L301.17775439021744,116.09165979546378L302.8453924756339,104.0448822870645L304.5686184972309,66.67345582534429L306.2918445188279,98.89123398599506L307.8483067318832,105.02178273871789L309.5692165894727,113.45502541319517L311.2368546748891,117.83612488770198L312.9600806964861,124.85884293045522L314.62771878190256,107.71822735272039L316.35094480349954,116.988813271472L318.07417082509653,127.83440195921582L319.7441250745205,117.77133046999029L321.4673510961175,112.94165425747936L323.13498918153397,82.39856258537726L324.85821520313095,84.92554487613374L326.58144122472794,92.11772524213299L328.1379034377833,91.58441734250587L329.8588132953728,109.89631662502924L331.52645138078924,108.6552543165512L333.2496774023862,120.81666810244042L334.9173154878027,107.92756316378897L336.64054150939967,113.76404494382022L338.36376753099665,127.73970242563718L340.03372178042065,111.43144590619886L341.75694780201763,108.10200967301279L343.4245858874341,92.75570104729438L345.1478119090311,70.00787624450817L346.87103793062806,94.79423311222418L348.48308807986393,100.65563582214455L350.2039979374534,110.88318544863827L351.8716360228699,115.41381050247979L353.5948620444669,124.75915921089876L355.2625001298833,112.35850449807401L356.9857261514803,114.66618260580627L358.7089521730773,128.88108101455876L360.3765902584937,110.59410266192451L362.0998162800907,114.97520213643134L363.76745436550715,102.50975300589488L365.49068038710413,83.53994117429883L367.2139064087011,98.5423409675474L368.7703686217565,79.15385751381419L370.49127847934597,107.30952410253886L372.1589165647624,113.7590607578424L373.8821425863594,119.76002067514185L375.5497806717758,115.79260863679437L377.2730066933728,114.16776400802392L378.99623271496984,125.23265687879199L380.6661869643938,107.55873340143003L382.38941298599076,108.6552543165512L384.0570510714072,86.4257848554586L385.7802770930042,70.00787624450817L387.5035031146012,98.45760980592442L389.0599653276566,103.57138461917128L390.78087518524603,111.54109799771098L392.44851327066243,112.76222356227771L394.1717392922595,119.72014718731924L395.83937737767593,99.19526933064228L397.5626033992729,109.46269244495859L399.2858294208699,122.80535830759197L400.9557836702939,110.02590546045263L402.6790096918909,112.71238170249947L404.34664777730734,96.70816052770839L406.0698737989043,77.66857009242281L407.7930998205013,100.77525628561233L409.34956203355665,87.30798577353336L411.0704718911461,104.0897399608649L412.73810997656255,109.09884686857748L414.4613359981596,118.76318347957715L416.128974083576,100.71046186790062L417.852200105173,111.55106636966661L419.57542612676997,120.67212670908353L421.24538037619396,111.5460821836888L422.96860639779095,109.92123755491835L424.6362444832074,75.06682501199897L426.3594705048044,77.6885068363341L428.0826965264014,93.97682661186114L429.69474667563725,84.03337558610336L431.41797269723423,106.05350923612735L433.08561078265075,105.27099203760908L434.8088368042477,112.34853612611838L436.4764748896642,105.81426830919183L438.1997009112612,114.07306447444529L439.92292693285816,117.11840210689542L441.59056501827456,107.13009340733723L443.31610720387914,101.55777348413059L444.98374528929554,76.07861476549712L446.7069713108925,52.000012306632044L448.4301973324895,94.9487428775367L449.98665954554485,91.23054013808041L451.70756940313436,104.03989810108668L453.3752074885508,107.7032747947869L455.0984335101478,117.14332303678452L456.7660715955642,111.10248963166251L458.4892976171612,107.69330642283127L460.21252363875817,119.96935648621042L461.8801617241747,112.58279286707608L463.60570390977915,104.02992972913103L465.27334199519566,88.30980715507587L466.99656801679265,71.1442706474519L468.71979403838964,72.95353015740183L470.2762562514449,78.6255338001649L471.9971661090344,101.74218836531007L473.6648041944508,105.13641901620784L475.3880302160478,112.53793519327566L477.0556683014643,102.5994683534957L478.7788943230613,105.46039110476636L480.5021203446583,118.70835743382108L482.1697584300747,105.03673529665137L483.8953006156793,107.28958735862756L485.5629387010957,74.74285292344044L487.28616472269266,43.25775010152971L489.00939074428965,47.210209581943715L490.56585295734504,74.18462409392421L492.28676281493443,102.13593905755812L493.95440090035095,106.45722830033105L495.67762692194793,116.78944583235906L497.3452650073644,105.71458458963536L499.0684910289614,106.53697527597623L500.79171705055836,117.72647279618988L502.4593551359749,106.317671092952L504.1848973215793,99.82327676384804L505.85253540699574,77.03557847323923L507.5757614285928,33.902433021155105L509.29898745018977,85.5734890532508L510.91103759942564,95.48703496314164L512.6319474570151,99.7485139741807L514.2995855424316,104.05485065902015L516.0228115640285,109.15367291433354L517.690449649445,106.71142178520005L519.4136756710419,107.13507759331503L521.1369016926391,118.04546069877057L522.8045397780554,102.55959486567312L524.5300819636599,100.9646553527696L526.1977200490765,93.23916708714327L527.9209460706734,83.48013094256495L529.6441720922704,101.26370651143901L531.2006343053258,90.45799131151777L532.9215441629152,102.52968974980617L534.5891822483316,94.1612414930406L536.3124082699287,103.52652694537088L537.980046355345,101.24875395350554L539.7032723769421,97.10689540593425L541.426498398539,114.91539190469744L543.0941364839555,102.67423114316304L544.8196786695601,95.49201914911947L546.4873167549765,71.01468181202851L548.2105427765734,46.45759749929236L549.9337687981705,80.3849514503366L551.4902310112258,80.94816446583064L553.2111408688153,94.65467590484512L554.8787789542317,101.30856418523942L556.6020049758288,102.27051207895936L558.2696430612451,102.55959486567312L559.9928690828422,110.15051010989822L561.7160951044391,114.05811191651182L563.3837331898557,100.96963953874743L565.1092753754601,100.1572172243622L566.7769134608766,81.65093468870374L568.5001394824736,67.56562511537467L570.2233655040706,87.25814391375512L571.7798277171258,84.42712627835141L573.5007375747153,93.57310754765743L575.1683756601318,94.88893264580283L576.8916016817287,87.49240065471282L578.5592397671453,90.12405085100362L580.2824657887422,72.97346690131312L582.0056918103393,108.66023850252901L583.6733298957556,97.24645261331331L585.3988720813602,84.73116162299863L587.0665101667767,65.83611258106994L588.7897361883736,64.22622051023296L590.5129622099706,90.3981810797839L592.1250123592065,78.32648264149552L593.845922216796,93.97682661186114L595.5135603022125,95.4571298472747L597.2367863238095,105.6996320317019L598.9044244092258,99.73356141624721L600.6276504308229,102.05120789593512L602.3508764524198,112.34355194014054L604.0185145378363,97.06203773213385L605.7440567234408,91.85356338530835L607.4116948088572,67.91451813382233L609.1349208304542,6.424615725414441L610.8581468520512,59.32676569403252L612.4146090651066,59.022730349385284L614.1355189226961,94.99360055133711L615.8031570081125,97.35610470482543L617.5263830297095,103.72589438448381L619.1940211151259,103.28728601843534L620.917247136723,108.07210455714585L622.64047315832,114.20763749584651L624.3081112437363,100.81014558745709L626.0336534293408,98.25325818083365L627.7012915147574,76.70163801272506L629.4245175363543,69.75866694561701L631.1477435579513,89.24683411890668L632.7042057710067,77.13027800681789L634.4251156285961,97.95919120814207L636.0927537140126,96.7131447136862L637.8159797356096,103.43182741179223L639.4836178210261,88.55403226798921L641.206843842623,101.69733069150966L642.9300698642201,106.48214923022016L644.5977079496364,98.79653445241641L646.323250135241,97.48569354024885L647.9908882206574,74.06001944447863L649.7141142422544,53.430473682267376L651.4373402638514,75.48051244815831L652.9938024769067,76.36271336623307L654.7147123344962,86.97404531301919L656.3823504199127,92.27223500744552L658.1055764415097,101.12414930405996L659.773214526926,96.7729549454201L661.4964405485231,99.81829257787021L663.21966657012,107.67336967891997L664.8873046555366,92.89027406869562L666.612846841141,82.97174397282696L668.2804849265575,66.34948373678576L670.0037109481545,54.512042039455054L671.7269369697515,75.08177756993243L673.3389871189873,73.70614224005317L675.0598969765769,86.6600415964163L676.7275350619933,96.05024797863568L678.4507610835902,97.95919120814207L680.1183991690068,94.67461264875641L681.8416251906037,97.8395707446743L683.5648512122008,110.61902359181363L685.2324892976171,91.15577734841305L686.9580314832217,87.94097739271693L688.6256695686382,61.12107264604896L690.3488955902351,36.71849809862536L692.0721216118321,83.51502024440971L693.6285838248875,79.37316169683842L695.3494936824769,90.8666945616993L697.0171317678934,90.0791931772032L698.7403577894904,99.62889351071293L700.4079958749068,97.18165819560161L702.1312218965038,95.42722473140776L703.8544479181007,107.92756316378897L705.5220860035172,92.73576430338309L707.2476281891218,91.85854757128617L708.9152662745381,68.94126044525395L710.6384922961352,62.22257774714794L712.3617183177321,83.76422954330089L713.9181805307875,78.48099240680803L715.639090388377,89.80506294842291L717.3067284737934,90.06424061926973L719.0299544953904,100.54099954465462L720.6975925808068,88.6985736613461L722.4208186024039,97.86449167456342L724.1440446240009,107.56371758740785L725.8116827094174,90.9514257233223L727.5372248950218,87.36779600526724L729.2048629804383,71.3137329706979L730.9280890020353,55.608562954576215L732.6513150236323,76.71659057065854L734.2077772366877,73.33731247769423L735.928687094277,91.45482850708247L737.5963251796936,90.96637828125577L739.3195512012906,97.61029818969443L740.987189286707,94.80420148417983L742.7104153083039,93.42856615430055L744.433641329901,103.7906888021955L746.1012794153173,88.54406389603358L747.8268216009219,87.0388397307309L749.4944596863384,66.11024280985022L751.2176857079353,46.6769016823166L752.9409117295323,28.07093542710166L754.5529618787682,50.23062628450472L756.2738717363577,81.89017561563928L757.9415098217742,85.09500719937975L759.6647358433712,99.72359304429158L761.3323739287875,98.5423409675474L763.0555999503846,93.13948336758679L764.7788259719815,105.93388877265959L766.4464640573981,94.93379031960323L768.1720062430026,87.55221088644672L769.8396443284189,72.66444737068807L771.562870350016,61.39021868885142L773.286096371613,76.6268752230577L774.8425585846683,64.98381677886213L776.5634684422578,89.07238760968286L778.2311065276742,89.95458852775761L779.9543325492712,95.10325264284923L781.6219706346877,86.34603787981344L783.3451966562847,96.88759122291003L785.0684226778817,105.27099203760908L786.736060763298,93.66282289525826L788.4616029489026,86.11676532483355L790.1292410343191,61.49488659438572L791.852467055916,44.89754728823364L793.575693077513,72.45012737364165L795.1321552905684,70.73058321129257L796.8530651481578,87.1036341484426L798.5207032335743,88.8680359845921L800.2439292551713,93.27904057496585L801.9115673405878,91.56448059859459L803.6347933621847,94.87398008786936L805.3580193837818,101.09424418819302L807.0256574691982,86.52048438903726L808.7511996548027,84.25267976912758L810.4188377402191,64.30596748587814L812.1420637618161,10.471774739407067L813.8652897834131,34.42078836284874L815.4217519964684,51.750803007740885L817.1426618540579,78.17197287618296L818.8102999394744,83.05647513444995L820.5335259610714,91.17072990634654L822.2011640464879,68.49268370724984L823.9243900680849,90.4629754974956L825.6476160896818,102.21070184722547L827.3152541750983,87.0836974045313L829.0407963607029,84.8507820864664L830.7084344461192,64.5302558548802L832.4316604677163,55.0054764512596L834.1548864893132,68.89141858547572L835.7669366385492,55.683325744243575L837.4878464961386,78.06730497064868L839.155484581555,81.58614027099203L840.878710603152,89.00759319197115L842.5463486885685,81.78550771010498L844.2695747101654,85.33923231229309L845.9928007317625,96.07018472254698L847.6604388171788,86.27625927612391L849.3859810027834,77.80812729980187L851.0536190881999,50.74898162619836L852.7768451097968,0L854.5000711313938,59.49124383130068L856.0565333444492,67.7400716245985L857.7774432020387,80.5544137735826L859.4450812874551,78.23676729389467L861.1683073090521,85.39904254402698L862.8359453944685,86.95410856910789L864.5591714160655,84.80094022668817L866.2823974376624,96.29945727752686L867.950035523079,83.18606396987336L869.6755777086835,75.86429476845072L871.3432157940999,38.40315295912967L873.066441815697,7.271927341644414L874.7896678372939,47.91796399079465L876.3461300503492,47.83821701514947L878.0670399079387,71.8420566843472L879.7346779933551,79.49278216030619L881.4579040149521,86.72483601412802L883.1255421003686,85.50371044956127L884.8487681219656,80.7089235388951L886.5719941435626,95.08331589893794L888.2396322289791,82.1942109602865L889.9651744145835,74.92228361864208L891.6328125,61.489902408407886" data-legend="España" style="stroke: rgb(255, 171, 133);" stroke-dasharray="6322.98828125, 6322.98828125"></path></g><g class="circle-group" style="fill: rgb(255, 171, 133);"><circle class="dot" cx="0" cy="66.56380373383216" r="3" style="opacity: 0;"></circle><circle class="dot" cx="1.723226021596993" cy="123.64768573784413" r="3" style="opacity: 0;"></circle><circle class="dot" cx="3.2796882346523417" cy="115.5433993379032" r="3" style="opacity: 0;"></circle><circle class="dot" cx="5.002914256249334" cy="124.54483921385236" r="3" style="opacity: 0;"></circle><circle class="dot" cx="6.670552341665779" cy="129.92776006990167" r="3" style="opacity: 0;"></circle><circle class="dot" cx="8.393778363262772" cy="136.70625299974157" r="3" style="opacity: 0;"></circle><circle class="dot" cx="10.061416448679218" cy="129.00568566400432" r="3" style="opacity: 0;"></circle><circle class="dot" cx="11.78464247027621" cy="134.293906986475" r="3" style="opacity: 0;"></circle><circle class="dot" cx="13.507868491873204" cy="141.99945850819006" r="3" style="opacity: 0;"></circle><circle class="dot" cx="15.175506577289646" cy="133.02792374810787" r="3" style="opacity: 0;"></circle><circle class="dot" cx="16.898732598886642" cy="127.7048131237924" r="3" style="opacity: 0;"></circle><circle class="dot" cx="18.566370684303084" cy="103.6212264789495" r="3" style="opacity: 0;"></circle><circle class="dot" cx="20.28959670590008" cy="89.88979411004591" r="3" style="opacity: 0;"></circle><circle class="dot" cx="22.01282272749707" cy="106.6815166693331" r="3" style="opacity: 0;"></circle><circle class="dot" cx="23.62487287673297" cy="105.3208338973873" r="3" style="opacity: 0;"></circle><circle class="dot" cx="25.34809889832996" cy="118.04047651279275" r="3" style="opacity: 0;"></circle><circle class="dot" cx="27.015736983746407" cy="123.707495969578" r="3" style="opacity: 0;"></circle><circle class="dot" cx="28.7389630053434" cy="136.75111067354197" r="3" style="opacity: 0;"></circle><circle class="dot" cx="30.406601090759846" cy="136.82088927723152" r="3" style="opacity: 0;"></circle><circle class="dot" cx="32.129827112356836" cy="135.87887812742287" r="3" style="opacity: 0;"></circle><circle class="dot" cx="33.85305313395383" cy="143.6841133686944" r="3" style="opacity: 0;"></circle><circle class="dot" cx="35.523007383377795" cy="134.72753116654565" r="3" style="opacity: 0;"></circle><circle class="dot" cx="37.24623340497479" cy="120.48272764192623" r="3" style="opacity: 0;"></circle><circle class="dot" cx="38.91387149039124" cy="110.53927661616845" r="3" style="opacity: 0;"></circle><circle class="dot" cx="40.63709751198823" cy="100.9845920966809" r="3" style="opacity: 0;"></circle><circle class="dot" cx="42.36032353358522" cy="124.39032944853983" r="3" style="opacity: 0;"></circle><circle class="dot" cx="43.91678574664057" cy="107.87772130401073" r="3" style="opacity: 0;"></circle><circle class="dot" cx="45.63769560423004" cy="100.44131582509814" r="3" style="opacity: 0;"></circle><circle class="dot" cx="47.30533368964648" cy="125.24760943672545" r="3" style="opacity: 0;"></circle><circle class="dot" cx="49.028559711243474" cy="137.66321670748366" r="3" style="opacity: 0;"></circle><circle class="dot" cx="50.69619779665992" cy="138.87935808607259" r="3" style="opacity: 0;"></circle><circle class="dot" cx="52.41942381825692" cy="138.3261134425342" r="3" style="opacity: 0;"></circle><circle class="dot" cx="54.1426498398539" cy="140.46432922702044" r="3" style="opacity: 0;"></circle><circle class="dot" cx="55.81260408927787" cy="135.58979534070912" r="3" style="opacity: 0;"></circle><circle class="dot" cx="57.53583011087487" cy="128.18827916364128" r="3" style="opacity: 0;"></circle><circle class="dot" cx="59.203468196291304" cy="107.81292688629904" r="3" style="opacity: 0;"></circle><circle class="dot" cx="60.926694217888304" cy="101.92161906051172" r="3" style="opacity: 0;"></circle><circle class="dot" cx="62.649920239485304" cy="110.3997194087894" r="3" style="opacity: 0;"></circle><circle class="dot" cx="64.20638245254065" cy="112.68247658663253" r="3" style="opacity: 0;"></circle><circle class="dot" cx="65.92960847413764" cy="124.62957037547534" r="3" style="opacity: 0;"></circle><circle class="dot" cx="67.59493039554657" cy="127.97395916659488" r="3" style="opacity: 0;"></circle><circle class="dot" cx="69.31815641714356" cy="137.20965578350172" r="3" style="opacity: 0;"></circle><circle class="dot" cx="70.98579450256" cy="124.14112014964866" r="3" style="opacity: 0;"></circle><circle class="dot" cx="72.70902052415698" cy="132.8684297968175" r="3" style="opacity: 0;"></circle><circle class="dot" cx="74.43224654575398" cy="141.88980641667794" r="3" style="opacity: 0;"></circle><circle class="dot" cx="76.09988463117043" cy="131.14888563446843" r="3" style="opacity: 0;"></circle><circle class="dot" cx="77.82542681677495" cy="126.3192094219575" r="3" style="opacity: 0;"></circle><circle class="dot" cx="79.49306490219139" cy="102.43499021622753" r="3" style="opacity: 0;"></circle><circle class="dot" cx="81.21629092378839" cy="106.35754458077459" r="3" style="opacity: 0;"></circle><circle class="dot" cx="82.93951694538538" cy="122.17236668840837" r="3" style="opacity: 0;"></circle><circle class="dot" cx="84.49597915844072" cy="112.79711286412248" r="3" style="opacity: 0;"></circle><circle class="dot" cx="86.21920518003772" cy="125.01833688174557" r="3" style="opacity: 0;"></circle><circle class="dot" cx="87.88452710144664" cy="127.82443358726019" r="3" style="opacity: 0;"></circle><circle class="dot" cx="89.60775312304364" cy="138.01709391190914" r="3" style="opacity: 0;"></circle><circle class="dot" cx="91.27539120846008" cy="129.79318704850044" r="3" style="opacity: 0;"></circle><circle class="dot" cx="92.99861723005708" cy="129.45924658798626" r="3" style="opacity: 0;"></circle><circle class="dot" cx="94.72184325165406" cy="141.99945850819006" r="3" style="opacity: 0;"></circle><circle class="dot" cx="96.39179750107803" cy="132.11083352818835" r="3" style="opacity: 0;"></circle><circle class="dot" cx="98.11502352267502" cy="124.6196020035197" r="3" style="opacity: 0;"></circle><circle class="dot" cx="99.78266160809147" cy="111.20217335121897" r="3" style="opacity: 0;"></circle><circle class="dot" cx="101.50588762968846" cy="103.11782369518934" r="3" style="opacity: 0;"></circle><circle class="dot" cx="103.22911365128546" cy="126.91731173929631" r="3" style="opacity: 0;"></circle><circle class="dot" cx="104.84116380052134" cy="120.093961135656" r="3" style="opacity: 0;"></circle><circle class="dot" cx="106.56207365811082" cy="133.92507722411608" r="3" style="opacity: 0;"></circle><circle class="dot" cx="108.22971174352726" cy="132.5245209643477" r="3" style="opacity: 0;"></circle><circle class="dot" cx="109.95293776512426" cy="138.93418413182866" r="3" style="opacity: 0;"></circle><circle class="dot" cx="111.62057585054072" cy="135.83402045362246" r="3" style="opacity: 0;"></circle><circle class="dot" cx="113.3438018721377" cy="132.75379351932756" r="3" style="opacity: 0;"></circle><circle class="dot" cx="115.06702789373469" cy="141.30167247129478" r="3" style="opacity: 0;"></circle><circle class="dot" cx="116.73698214315866" cy="132.17064375992223" r="3" style="opacity: 0;"></circle><circle class="dot" cx="118.46020816475566" cy="127.35093591936695" r="3" style="opacity: 0;"></circle><circle class="dot" cx="120.1278462501721" cy="85.76288812040809" r="3" style="opacity: 0;"></circle><circle class="dot" cx="121.85107227176908" cy="69.10573858252212" r="3" style="opacity: 0;"></circle><circle class="dot" cx="123.57429829336607" cy="112.76222356227771" r="3" style="opacity: 0;"></circle><circle class="dot" cx="125.13076050642142" cy="114.48176772462679" r="3" style="opacity: 0;"></circle><circle class="dot" cx="126.8516703640109" cy="132.1457228300331" r="3" style="opacity: 0;"></circle><circle class="dot" cx="128.51930844942734" cy="130.56573587506307" r="3" style="opacity: 0;"></circle><circle class="dot" cx="130.24253447102433" cy="129.42435728614151" r="3" style="opacity: 0;"></circle><circle class="dot" cx="131.91017255644078" cy="134.887025117836" r="3" style="opacity: 0;"></circle><circle class="dot" cx="133.63339857803777" cy="139.67682784252435" r="3" style="opacity: 0;"></circle><circle class="dot" cx="135.35662459963476" cy="146.6247830956102" r="3" style="opacity: 0;"></circle><circle class="dot" cx="137.02657884905872" cy="134.75245209643478" r="3" style="opacity: 0;"></circle><circle class="dot" cx="138.7498048706557" cy="131.56257307062776" r="3" style="opacity: 0;"></circle><circle class="dot" cx="140.4174429560722" cy="114.55154632831633" r="3" style="opacity: 0;"></circle><circle class="dot" cx="142.14066897766918" cy="115.99696026188514" r="3" style="opacity: 0;"></circle><circle class="dot" cx="143.86389499926617" cy="125.46192943377187" r="3" style="opacity: 0;"></circle><circle class="dot" cx="145.4203572123215" cy="122.39167087143261" r="3" style="opacity: 0;"></circle><circle class="dot" cx="147.14126706991098" cy="131.32333214369223" r="3" style="opacity: 0;"></circle><circle class="dot" cx="148.80890515532744" cy="129.9327442558795" r="3" style="opacity: 0;"></circle><circle class="dot" cx="150.53213117692442" cy="136.25269207575963" r="3" style="opacity: 0;"></circle><circle class="dot" cx="152.19976926234085" cy="128.2281526514639" r="3" style="opacity: 0;"></circle><circle class="dot" cx="153.92299528393787" cy="135.5250009229974" r="3" style="opacity: 0;"></circle><circle class="dot" cx="155.64622130553485" cy="147.27272727272728" r="3" style="opacity: 0;"></circle><circle class="dot" cx="157.31617555495882" cy="129.5938196093875" r="3" style="opacity: 0;"></circle><circle class="dot" cx="159.0394015765558" cy="125.05322618359034" r="3" style="opacity: 0;"></circle><circle class="dot" cx="160.70703966197223" cy="97.05705354615603" r="3" style="opacity: 0;"></circle><circle class="dot" cx="162.43026568356925" cy="69.47456834488106" r="3" style="opacity: 0;"></circle><circle class="dot" cx="164.15349170516623" cy="90.68227968051984" r="3" style="opacity: 0;"></circle><circle class="dot" cx="165.70995391822157" cy="115.03501236816521" r="3" style="opacity: 0;"></circle><circle class="dot" cx="167.43086377581105" cy="128.60695078577845" r="3" style="opacity: 0;"></circle><circle class="dot" cx="169.0985018612275" cy="128.39263078873205" r="3" style="opacity: 0;"></circle><circle class="dot" cx="170.8217278828245" cy="134.2291125687633" r="3" style="opacity: 0;"></circle><circle class="dot" cx="172.48936596824095" cy="129.23495821898422" r="3" style="opacity: 0;"></circle><circle class="dot" cx="174.21259198983793" cy="137.25451345730215" r="3" style="opacity: 0;"></circle><circle class="dot" cx="175.93581801143495" cy="139.83133760783687" r="3" style="opacity: 0;"></circle><circle class="dot" cx="177.60577226085888" cy="136.34240742336044" r="3" style="opacity: 0;"></circle><circle class="dot" cx="179.32899828245587" cy="126.08993686697761" r="3" style="opacity: 0;"></circle><circle class="dot" cx="180.99663636787233" cy="109.59726546635983" r="3" style="opacity: 0;"></circle><circle class="dot" cx="182.71986238946934" cy="105.63982179996802" r="3" style="opacity: 0;"></circle><circle class="dot" cx="184.44308841106633" cy="117.51713698512128" r="3" style="opacity: 0;"></circle><circle class="dot" cx="186.05513856030223" cy="99.71860885831376" r="3" style="opacity: 0;"></circle><circle class="dot" cx="187.77604841789167" cy="120.40796485225889" r="3" style="opacity: 0;"></circle><circle class="dot" cx="189.44368650330813" cy="126.41889314151396" r="3" style="opacity: 0;"></circle><circle class="dot" cx="191.16691252490511" cy="128.56707729795588" r="3" style="opacity: 0;"></circle><circle class="dot" cx="192.83455061032157" cy="125.11303641532422" r="3" style="opacity: 0;"></circle><circle class="dot" cx="194.55777663191856" cy="134.5032427975436" r="3" style="opacity: 0;"></circle><circle class="dot" cx="196.28100265351557" cy="139.3279348240767" r="3" style="opacity: 0;"></circle><circle class="dot" cx="197.95095690293954" cy="126.33416197989096" r="3" style="opacity: 0;"></circle><circle class="dot" cx="199.67418292453652" cy="124.98344757990081" r="3" style="opacity: 0;"></circle><circle class="dot" cx="201.34182100995295" cy="111.98967473571508" r="3" style="opacity: 0;"></circle><circle class="dot" cx="203.06504703154997" cy="79.93637471233248" r="3" style="opacity: 0;"></circle><circle class="dot" cx="204.78827305314695" cy="118.78810440946627" r="3" style="opacity: 0;"></circle><circle class="dot" cx="206.3447352662023" cy="104.56323762875815" r="3" style="opacity: 0;"></circle><circle class="dot" cx="208.06564512379177" cy="117.77133046999029" r="3" style="opacity: 0;"></circle><circle class="dot" cx="209.7332832092082" cy="120.85155740428516" r="3" style="opacity: 0;"></circle><circle class="dot" cx="211.4565092308052" cy="131.9264186470089" r="3" style="opacity: 0;"></circle><circle class="dot" cx="213.12414731622164" cy="121.90322064560593" r="3" style="opacity: 0;"></circle><circle class="dot" cx="214.84737333781862" cy="129.22997403300639" r="3" style="opacity: 0;"></circle><circle class="dot" cx="216.5705993594156" cy="136.42215439900562" r="3" style="opacity: 0;"></circle><circle class="dot" cx="218.2405536088396" cy="129.66858239905486" r="3" style="opacity: 0;"></circle><circle class="dot" cx="219.9637796304366" cy="114.59141981613891" r="3" style="opacity: 0;"></circle><circle class="dot" cx="221.63141771585305" cy="89.4611541159531" r="3" style="opacity: 0;"></circle><circle class="dot" cx="223.35464373745003" cy="72.44514318766385" r="3" style="opacity: 0;"></circle><circle class="dot" cx="225.07786975904702" cy="99.27003212030965" r="3" style="opacity: 0;"></circle><circle class="dot" cx="226.63433197210236" cy="110.26016220141034" r="3" style="opacity: 0;"></circle><circle class="dot" cx="228.3552418296918" cy="117.99561883899233" r="3" style="opacity: 0;"></circle><circle class="dot" cx="230.0228799151083" cy="122.17236668840837" r="3" style="opacity: 0;"></circle><circle class="dot" cx="231.74610593670528" cy="132.98306607430746" r="3" style="opacity: 0;"></circle><circle class="dot" cx="233.41374402212173" cy="126.77277034593942" r="3" style="opacity: 0;"></circle><circle class="dot" cx="235.13697004371872" cy="130.68037215255302" r="3" style="opacity: 0;"></circle><circle class="dot" cx="236.8601960653157" cy="135.98354603295718" r="3" style="opacity: 0;"></circle><circle class="dot" cx="238.5301503147397" cy="130.1022065791255" r="3" style="opacity: 0;"></circle><circle class="dot" cx="240.2533763363367" cy="119.52077974820631" r="3" style="opacity: 0;"></circle><circle class="dot" cx="241.92101442175309" cy="107.4889547977405" r="3" style="opacity: 0;"></circle><circle class="dot" cx="243.64424044335013" cy="85.5734890532508" r="3" style="opacity: 0;"></circle><circle class="dot" cx="245.3674664649471" cy="115.35898445672373" r="3" style="opacity: 0;"></circle><circle class="dot" cx="246.92392867800243" cy="115.2044746914112" r="3" style="opacity: 0;"></circle><circle class="dot" cx="248.6448385355919" cy="121.25029228251105" r="3" style="opacity: 0;"></circle><circle class="dot" cx="250.31247662100836" cy="125.09309967141293" r="3" style="opacity: 0;"></circle><circle class="dot" cx="252.03570264260534" cy="128.93092287433697" r="3" style="opacity: 0;"></circle><circle class="dot" cx="253.7033407280218" cy="124.23581968322729" r="3" style="opacity: 0;"></circle><circle class="dot" cx="255.4265667496188" cy="120.01919834598866" r="3" style="opacity: 0;"></circle><circle class="dot" cx="257.1497927712158" cy="130.8249135459099" r="3" style="opacity: 0;"></circle><circle class="dot" cx="258.8197470206398" cy="119.39617509876072" r="3" style="opacity: 0;"></circle><circle class="dot" cx="260.5429730422368" cy="117.63177326261123" r="3" style="opacity: 0;"></circle><circle class="dot" cx="262.2106111276532" cy="103.85049903392938" r="3" style="opacity: 0;"></circle><circle class="dot" cx="263.93383714925017" cy="101.51291581033018" r="3" style="opacity: 0;"></circle><circle class="dot" cx="265.6570631708472" cy="113.21080030028182" r="3" style="opacity: 0;"></circle><circle class="dot" cx="267.2691133200831" cy="93.72263312699214" r="3" style="opacity: 0;"></circle><circle class="dot" cx="268.9900231776725" cy="118.54886348253075" r="3" style="opacity: 0;"></circle><circle class="dot" cx="270.657661263089" cy="121.67394809062604" r="3" style="opacity: 0;"></circle><circle class="dot" cx="272.380887284686" cy="127.79951265737105" r="3" style="opacity: 0;"></circle><circle class="dot" cx="274.0485253701024" cy="117.86603000356894" r="3" style="opacity: 0;"></circle><circle class="dot" cx="275.7717513916994" cy="117.35265884785312" r="3" style="opacity: 0;"></circle><circle class="dot" cx="277.4949774132964" cy="127.58020847434682" r="3" style="opacity: 0;"></circle><circle class="dot" cx="279.1649316627204" cy="121.73874250833775" r="3" style="opacity: 0;"></circle><circle class="dot" cx="280.8881576843174" cy="117.21310164047406" r="3" style="opacity: 0;"></circle><circle class="dot" cx="282.55579576973383" cy="82.47830956102244" r="3" style="opacity: 0;"></circle><circle class="dot" cx="284.2790217913308" cy="78.05733659869303" r="3" style="opacity: 0;"></circle><circle class="dot" cx="286.0022478129278" cy="105.30089715347601" r="3" style="opacity: 0;"></circle><circle class="dot" cx="287.55871002598315" cy="107.22479294091586" r="3" style="opacity: 0;"></circle><circle class="dot" cx="289.27961988357265" cy="116.3309007223993" r="3" style="opacity: 0;"></circle><circle class="dot" cx="290.94725796898905" cy="115.65803561539315" r="3" style="opacity: 0;"></circle><circle class="dot" cx="292.67048399058604" cy="120.24847090096853" r="3" style="opacity: 0;"></circle><circle class="dot" cx="294.3381220760025" cy="108.43096594754914" r="3" style="opacity: 0;"></circle><circle class="dot" cx="296.0613480975995" cy="114.33722633126992" r="3" style="opacity: 0;"></circle><circle class="dot" cx="297.78457411919646" cy="128.94587543227044" r="3" style="opacity: 0;"></circle><circle class="dot" cx="299.45452836862046" cy="119.31642812311554" r="3" style="opacity: 0;"></circle><circle class="dot" cx="301.17775439021744" cy="116.09165979546378" r="3" style="opacity: 0;"></circle><circle class="dot" cx="302.8453924756339" cy="104.0448822870645" r="3" style="opacity: 0;"></circle><circle class="dot" cx="304.5686184972309" cy="66.67345582534429" r="3" style="opacity: 0;"></circle><circle class="dot" cx="306.2918445188279" cy="98.89123398599506" r="3" style="opacity: 0;"></circle><circle class="dot" cx="307.8483067318832" cy="105.02178273871789" r="3" style="opacity: 0;"></circle><circle class="dot" cx="309.5692165894727" cy="113.45502541319517" r="3" style="opacity: 0;"></circle><circle class="dot" cx="311.2368546748891" cy="117.83612488770198" r="3" style="opacity: 0;"></circle><circle class="dot" cx="312.9600806964861" cy="124.85884293045522" r="3" style="opacity: 0;"></circle><circle class="dot" cx="314.62771878190256" cy="107.71822735272039" r="3" style="opacity: 0;"></circle><circle class="dot" cx="316.35094480349954" cy="116.988813271472" r="3" style="opacity: 0;"></circle><circle class="dot" cx="318.07417082509653" cy="127.83440195921582" r="3" style="opacity: 0;"></circle><circle class="dot" cx="319.7441250745205" cy="117.77133046999029" r="3" style="opacity: 0;"></circle><circle class="dot" cx="321.4673510961175" cy="112.94165425747936" r="3" style="opacity: 0;"></circle><circle class="dot" cx="323.13498918153397" cy="82.39856258537726" r="3" style="opacity: 0;"></circle><circle class="dot" cx="324.85821520313095" cy="84.92554487613374" r="3" style="opacity: 0;"></circle><circle class="dot" cx="326.58144122472794" cy="92.11772524213299" r="3" style="opacity: 0;"></circle><circle class="dot" cx="328.1379034377833" cy="91.58441734250587" r="3" style="opacity: 0;"></circle><circle class="dot" cx="329.8588132953728" cy="109.89631662502924" r="3" style="opacity: 0;"></circle><circle class="dot" cx="331.52645138078924" cy="108.6552543165512" r="3" style="opacity: 0;"></circle><circle class="dot" cx="333.2496774023862" cy="120.81666810244042" r="3" style="opacity: 0;"></circle><circle class="dot" cx="334.9173154878027" cy="107.92756316378897" r="3" style="opacity: 0;"></circle><circle class="dot" cx="336.64054150939967" cy="113.76404494382022" r="3" style="opacity: 0;"></circle><circle class="dot" cx="338.36376753099665" cy="127.73970242563718" r="3" style="opacity: 0;"></circle><circle class="dot" cx="340.03372178042065" cy="111.43144590619886" r="3" style="opacity: 0;"></circle><circle class="dot" cx="341.75694780201763" cy="108.10200967301279" r="3" style="opacity: 0;"></circle><circle class="dot" cx="343.4245858874341" cy="92.75570104729438" r="3" style="opacity: 0;"></circle><circle class="dot" cx="345.1478119090311" cy="70.00787624450817" r="3" style="opacity: 0;"></circle><circle class="dot" cx="346.87103793062806" cy="94.79423311222418" r="3" style="opacity: 0;"></circle><circle class="dot" cx="348.48308807986393" cy="100.65563582214455" r="3" style="opacity: 0;"></circle><circle class="dot" cx="350.2039979374534" cy="110.88318544863827" r="3" style="opacity: 0;"></circle><circle class="dot" cx="351.8716360228699" cy="115.41381050247979" r="3" style="opacity: 0;"></circle><circle class="dot" cx="353.5948620444669" cy="124.75915921089876" r="3" style="opacity: 0;"></circle><circle class="dot" cx="355.2625001298833" cy="112.35850449807401" r="3" style="opacity: 0;"></circle><circle class="dot" cx="356.9857261514803" cy="114.66618260580627" r="3" style="opacity: 0;"></circle><circle class="dot" cx="358.7089521730773" cy="128.88108101455876" r="3" style="opacity: 0;"></circle><circle class="dot" cx="360.3765902584937" cy="110.59410266192451" r="3" style="opacity: 0;"></circle><circle class="dot" cx="362.0998162800907" cy="114.97520213643134" r="3" style="opacity: 0;"></circle><circle class="dot" cx="363.76745436550715" cy="102.50975300589488" r="3" style="opacity: 0;"></circle><circle class="dot" cx="365.49068038710413" cy="83.53994117429883" r="3" style="opacity: 0;"></circle><circle class="dot" cx="367.2139064087011" cy="98.5423409675474" r="3" style="opacity: 0;"></circle><circle class="dot" cx="368.7703686217565" cy="79.15385751381419" r="3" style="opacity: 0;"></circle><circle class="dot" cx="370.49127847934597" cy="107.30952410253886" r="3" style="opacity: 0;"></circle><circle class="dot" cx="372.1589165647624" cy="113.7590607578424" r="3" style="opacity: 0;"></circle><circle class="dot" cx="373.8821425863594" cy="119.76002067514185" r="3" style="opacity: 0;"></circle><circle class="dot" cx="375.5497806717758" cy="115.79260863679437" r="3" style="opacity: 0;"></circle><circle class="dot" cx="377.2730066933728" cy="114.16776400802392" r="3" style="opacity: 0;"></circle><circle class="dot" cx="378.99623271496984" cy="125.23265687879199" r="3" style="opacity: 0;"></circle><circle class="dot" cx="380.6661869643938" cy="107.55873340143003" r="3" style="opacity: 0;"></circle><circle class="dot" cx="382.38941298599076" cy="108.6552543165512" r="3" style="opacity: 0;"></circle><circle class="dot" cx="384.0570510714072" cy="86.4257848554586" r="3" style="opacity: 0;"></circle><circle class="dot" cx="385.7802770930042" cy="70.00787624450817" r="3" style="opacity: 0;"></circle><circle class="dot" cx="387.5035031146012" cy="98.45760980592442" r="3" style="opacity: 0;"></circle><circle class="dot" cx="389.0599653276566" cy="103.57138461917128" r="3" style="opacity: 0;"></circle><circle class="dot" cx="390.78087518524603" cy="111.54109799771098" r="3" style="opacity: 0;"></circle><circle class="dot" cx="392.44851327066243" cy="112.76222356227771" r="3" style="opacity: 0;"></circle><circle class="dot" cx="394.1717392922595" cy="119.72014718731924" r="3" style="opacity: 0;"></circle><circle class="dot" cx="395.83937737767593" cy="99.19526933064228" r="3" style="opacity: 0;"></circle><circle class="dot" cx="397.5626033992729" cy="109.46269244495859" r="3" style="opacity: 0;"></circle><circle class="dot" cx="399.2858294208699" cy="122.80535830759197" r="3" style="opacity: 0;"></circle><circle class="dot" cx="400.9557836702939" cy="110.02590546045263" r="3" style="opacity: 0;"></circle><circle class="dot" cx="402.6790096918909" cy="112.71238170249947" r="3" style="opacity: 0;"></circle><circle class="dot" cx="404.34664777730734" cy="96.70816052770839" r="3" style="opacity: 0;"></circle><circle class="dot" cx="406.0698737989043" cy="77.66857009242281" r="3" style="opacity: 0;"></circle><circle class="dot" cx="407.7930998205013" cy="100.77525628561233" r="3" style="opacity: 0;"></circle><circle class="dot" cx="409.34956203355665" cy="87.30798577353336" r="3" style="opacity: 0;"></circle><circle class="dot" cx="411.0704718911461" cy="104.0897399608649" r="3" style="opacity: 0;"></circle><circle class="dot" cx="412.73810997656255" cy="109.09884686857748" r="3" style="opacity: 0;"></circle><circle class="dot" cx="414.4613359981596" cy="118.76318347957715" r="3" style="opacity: 0;"></circle><circle class="dot" cx="416.128974083576" cy="100.71046186790062" r="3" style="opacity: 0;"></circle><circle class="dot" cx="417.852200105173" cy="111.55106636966661" r="3" style="opacity: 0;"></circle><circle class="dot" cx="419.57542612676997" cy="120.67212670908353" r="3" style="opacity: 0;"></circle><circle class="dot" cx="421.24538037619396" cy="111.5460821836888" r="3" style="opacity: 0;"></circle><circle class="dot" cx="422.96860639779095" cy="109.92123755491835" r="3" style="opacity: 0;"></circle><circle class="dot" cx="424.6362444832074" cy="75.06682501199897" r="3" style="opacity: 0;"></circle><circle class="dot" cx="426.3594705048044" cy="77.6885068363341" r="3" style="opacity: 0;"></circle><circle class="dot" cx="428.0826965264014" cy="93.97682661186114" r="3" style="opacity: 0;"></circle><circle class="dot" cx="429.69474667563725" cy="84.03337558610336" r="3" style="opacity: 0;"></circle><circle class="dot" cx="431.41797269723423" cy="106.05350923612735" r="3" style="opacity: 0;"></circle><circle class="dot" cx="433.08561078265075" cy="105.27099203760908" r="3" style="opacity: 0;"></circle><circle class="dot" cx="434.8088368042477" cy="112.34853612611838" r="3" style="opacity: 0;"></circle><circle class="dot" cx="436.4764748896642" cy="105.81426830919183" r="3" style="opacity: 0;"></circle><circle class="dot" cx="438.1997009112612" cy="114.07306447444529" r="3" style="opacity: 0;"></circle><circle class="dot" cx="439.92292693285816" cy="117.11840210689542" r="3" style="opacity: 0;"></circle><circle class="dot" cx="441.59056501827456" cy="107.13009340733723" r="3" style="opacity: 0;"></circle><circle class="dot" cx="443.31610720387914" cy="101.55777348413059" r="3" style="opacity: 0;"></circle><circle class="dot" cx="444.98374528929554" cy="76.07861476549712" r="3" style="opacity: 0;"></circle><circle class="dot" cx="446.7069713108925" cy="52.000012306632044" r="3" style="opacity: 0;"></circle><circle class="dot" cx="448.4301973324895" cy="94.9487428775367" r="3" style="opacity: 0;"></circle><circle class="dot" cx="449.98665954554485" cy="91.23054013808041" r="3" style="opacity: 0;"></circle><circle class="dot" cx="451.70756940313436" cy="104.03989810108668" r="3" style="opacity: 0;"></circle><circle class="dot" cx="453.3752074885508" cy="107.7032747947869" r="3" style="opacity: 0;"></circle><circle class="dot" cx="455.0984335101478" cy="117.14332303678452" r="3" style="opacity: 0;"></circle><circle class="dot" cx="456.7660715955642" cy="111.10248963166251" r="3" style="opacity: 0;"></circle><circle class="dot" cx="458.4892976171612" cy="107.69330642283127" r="3" style="opacity: 0;"></circle><circle class="dot" cx="460.21252363875817" cy="119.96935648621042" r="3" style="opacity: 0;"></circle><circle class="dot" cx="461.8801617241747" cy="112.58279286707608" r="3" style="opacity: 0;"></circle><circle class="dot" cx="463.60570390977915" cy="104.02992972913103" r="3" style="opacity: 0;"></circle><circle class="dot" cx="465.27334199519566" cy="88.30980715507587" r="3" style="opacity: 0;"></circle><circle class="dot" cx="466.99656801679265" cy="71.1442706474519" r="3" style="opacity: 0;"></circle><circle class="dot" cx="468.71979403838964" cy="72.95353015740183" r="3" style="opacity: 0;"></circle><circle class="dot" cx="470.2762562514449" cy="78.6255338001649" r="3" style="opacity: 0;"></circle><circle class="dot" cx="471.9971661090344" cy="101.74218836531007" r="3" style="opacity: 0;"></circle><circle class="dot" cx="473.6648041944508" cy="105.13641901620784" r="3" style="opacity: 0;"></circle><circle class="dot" cx="475.3880302160478" cy="112.53793519327566" r="3" style="opacity: 0;"></circle><circle class="dot" cx="477.0556683014643" cy="102.5994683534957" r="3" style="opacity: 0;"></circle><circle class="dot" cx="478.7788943230613" cy="105.46039110476636" r="3" style="opacity: 0;"></circle><circle class="dot" cx="480.5021203446583" cy="118.70835743382108" r="3" style="opacity: 0;"></circle><circle class="dot" cx="482.1697584300747" cy="105.03673529665137" r="3" style="opacity: 0;"></circle><circle class="dot" cx="483.8953006156793" cy="107.28958735862756" r="3" style="opacity: 0;"></circle><circle class="dot" cx="485.5629387010957" cy="74.74285292344044" r="3" style="opacity: 0;"></circle><circle class="dot" cx="487.28616472269266" cy="43.25775010152971" r="3" style="opacity: 0;"></circle><circle class="dot" cx="489.00939074428965" cy="47.210209581943715" r="3" style="opacity: 0;"></circle><circle class="dot" cx="490.56585295734504" cy="74.18462409392421" r="3" style="opacity: 0;"></circle><circle class="dot" cx="492.28676281493443" cy="102.13593905755812" r="3" style="opacity: 0;"></circle><circle class="dot" cx="493.95440090035095" cy="106.45722830033105" r="3" style="opacity: 0;"></circle><circle class="dot" cx="495.67762692194793" cy="116.78944583235906" r="3" style="opacity: 0;"></circle><circle class="dot" cx="497.3452650073644" cy="105.71458458963536" r="3" style="opacity: 0;"></circle><circle class="dot" cx="499.0684910289614" cy="106.53697527597623" r="3" style="opacity: 0;"></circle><circle class="dot" cx="500.79171705055836" cy="117.72647279618988" r="3" style="opacity: 0;"></circle><circle class="dot" cx="502.4593551359749" cy="106.317671092952" r="3" style="opacity: 0;"></circle><circle class="dot" cx="504.1848973215793" cy="99.82327676384804" r="3" style="opacity: 0;"></circle><circle class="dot" cx="505.85253540699574" cy="77.03557847323923" r="3" style="opacity: 0;"></circle><circle class="dot" cx="507.5757614285928" cy="33.902433021155105" r="3" style="opacity: 0;"></circle><circle class="dot" cx="509.29898745018977" cy="85.5734890532508" r="3" style="opacity: 0;"></circle><circle class="dot" cx="510.91103759942564" cy="95.48703496314164" r="3" style="opacity: 0;"></circle><circle class="dot" cx="512.6319474570151" cy="99.7485139741807" r="3" style="opacity: 0;"></circle><circle class="dot" cx="514.2995855424316" cy="104.05485065902015" r="3" style="opacity: 0;"></circle><circle class="dot" cx="516.0228115640285" cy="109.15367291433354" r="3" style="opacity: 0;"></circle><circle class="dot" cx="517.690449649445" cy="106.71142178520005" r="3" style="opacity: 0;"></circle><circle class="dot" cx="519.4136756710419" cy="107.13507759331503" r="3" style="opacity: 0;"></circle><circle class="dot" cx="521.1369016926391" cy="118.04546069877057" r="3" style="opacity: 0;"></circle><circle class="dot" cx="522.8045397780554" cy="102.55959486567312" r="3" style="opacity: 0;"></circle><circle class="dot" cx="524.5300819636599" cy="100.9646553527696" r="3" style="opacity: 0;"></circle><circle class="dot" cx="526.1977200490765" cy="93.23916708714327" r="3" style="opacity: 0;"></circle><circle class="dot" cx="527.9209460706734" cy="83.48013094256495" r="3" style="opacity: 0;"></circle><circle class="dot" cx="529.6441720922704" cy="101.26370651143901" r="3" style="opacity: 0;"></circle><circle class="dot" cx="531.2006343053258" cy="90.45799131151777" r="3" style="opacity: 0;"></circle><circle class="dot" cx="532.9215441629152" cy="102.52968974980617" r="3" style="opacity: 0;"></circle><circle class="dot" cx="534.5891822483316" cy="94.1612414930406" r="3" style="opacity: 0;"></circle><circle class="dot" cx="536.3124082699287" cy="103.52652694537088" r="3" style="opacity: 0;"></circle><circle class="dot" cx="537.980046355345" cy="101.24875395350554" r="3" style="opacity: 0;"></circle><circle class="dot" cx="539.7032723769421" cy="97.10689540593425" r="3" style="opacity: 0;"></circle><circle class="dot" cx="541.426498398539" cy="114.91539190469744" r="3" style="opacity: 0;"></circle><circle class="dot" cx="543.0941364839555" cy="102.67423114316304" r="3" style="opacity: 0;"></circle><circle class="dot" cx="544.8196786695601" cy="95.49201914911947" r="3" style="opacity: 0;"></circle><circle class="dot" cx="546.4873167549765" cy="71.01468181202851" r="3" style="opacity: 0;"></circle><circle class="dot" cx="548.2105427765734" cy="46.45759749929236" r="3" style="opacity: 0;"></circle><circle class="dot" cx="549.9337687981705" cy="80.3849514503366" r="3" style="opacity: 0;"></circle><circle class="dot" cx="551.4902310112258" cy="80.94816446583064" r="3" style="opacity: 0;"></circle><circle class="dot" cx="553.2111408688153" cy="94.65467590484512" r="3" style="opacity: 0;"></circle><circle class="dot" cx="554.8787789542317" cy="101.30856418523942" r="3" style="opacity: 0;"></circle><circle class="dot" cx="556.6020049758288" cy="102.27051207895936" r="3" style="opacity: 0;"></circle><circle class="dot" cx="558.2696430612451" cy="102.55959486567312" r="3" style="opacity: 0;"></circle><circle class="dot" cx="559.9928690828422" cy="110.15051010989822" r="3" style="opacity: 0;"></circle><circle class="dot" cx="561.7160951044391" cy="114.05811191651182" r="3" style="opacity: 0;"></circle><circle class="dot" cx="563.3837331898557" cy="100.96963953874743" r="3" style="opacity: 0;"></circle><circle class="dot" cx="565.1092753754601" cy="100.1572172243622" r="3" style="opacity: 0;"></circle><circle class="dot" cx="566.7769134608766" cy="81.65093468870374" r="3" style="opacity: 0;"></circle><circle class="dot" cx="568.5001394824736" cy="67.56562511537467" r="3" style="opacity: 0;"></circle><circle class="dot" cx="570.2233655040706" cy="87.25814391375512" r="3" style="opacity: 0;"></circle><circle class="dot" cx="571.7798277171258" cy="84.42712627835141" r="3" style="opacity: 0;"></circle><circle class="dot" cx="573.5007375747153" cy="93.57310754765743" r="3" style="opacity: 0;"></circle><circle class="dot" cx="575.1683756601318" cy="94.88893264580283" r="3" style="opacity: 0;"></circle><circle class="dot" cx="576.8916016817287" cy="87.49240065471282" r="3" style="opacity: 0;"></circle><circle class="dot" cx="578.5592397671453" cy="90.12405085100362" r="3" style="opacity: 0;"></circle><circle class="dot" cx="580.2824657887422" cy="72.97346690131312" r="3" style="opacity: 0;"></circle><circle class="dot" cx="582.0056918103393" cy="108.66023850252901" r="3" style="opacity: 0;"></circle><circle class="dot" cx="583.6733298957556" cy="97.24645261331331" r="3" style="opacity: 0;"></circle><circle class="dot" cx="585.3988720813602" cy="84.73116162299863" r="3" style="opacity: 0;"></circle><circle class="dot" cx="587.0665101667767" cy="65.83611258106994" r="3" style="opacity: 0;"></circle><circle class="dot" cx="588.7897361883736" cy="64.22622051023296" r="3" style="opacity: 0;"></circle><circle class="dot" cx="590.5129622099706" cy="90.3981810797839" r="3" style="opacity: 0;"></circle><circle class="dot" cx="592.1250123592065" cy="78.32648264149552" r="3" style="opacity: 0;"></circle><circle class="dot" cx="593.845922216796" cy="93.97682661186114" r="3" style="opacity: 0;"></circle><circle class="dot" cx="595.5135603022125" cy="95.4571298472747" r="3" style="opacity: 0;"></circle><circle class="dot" cx="597.2367863238095" cy="105.6996320317019" r="3" style="opacity: 0;"></circle><circle class="dot" cx="598.9044244092258" cy="99.73356141624721" r="3" style="opacity: 0;"></circle><circle class="dot" cx="600.6276504308229" cy="102.05120789593512" r="3" style="opacity: 0;"></circle><circle class="dot" cx="602.3508764524198" cy="112.34355194014054" r="3" style="opacity: 0;"></circle><circle class="dot" cx="604.0185145378363" cy="97.06203773213385" r="3" style="opacity: 0;"></circle><circle class="dot" cx="605.7440567234408" cy="91.85356338530835" r="3" style="opacity: 0;"></circle><circle class="dot" cx="607.4116948088572" cy="67.91451813382233" r="3" style="opacity: 0;"></circle><circle class="dot" cx="609.1349208304542" cy="6.424615725414441" r="3" style="opacity: 0;"></circle><circle class="dot" cx="610.8581468520512" cy="59.32676569403252" r="3" style="opacity: 0;"></circle><circle class="dot" cx="612.4146090651066" cy="59.022730349385284" r="3" style="opacity: 0;"></circle><circle class="dot" cx="614.1355189226961" cy="94.99360055133711" r="3" style="opacity: 0;"></circle><circle class="dot" cx="615.8031570081125" cy="97.35610470482543" r="3" style="opacity: 0;"></circle><circle class="dot" cx="617.5263830297095" cy="103.72589438448381" r="3" style="opacity: 0;"></circle><circle class="dot" cx="619.1940211151259" cy="103.28728601843534" r="3" style="opacity: 0;"></circle><circle class="dot" cx="620.917247136723" cy="108.07210455714585" r="3" style="opacity: 0;"></circle><circle class="dot" cx="622.64047315832" cy="114.20763749584651" r="3" style="opacity: 0;"></circle><circle class="dot" cx="624.3081112437363" cy="100.81014558745709" r="3" style="opacity: 0;"></circle><circle class="dot" cx="626.0336534293408" cy="98.25325818083365" r="3" style="opacity: 0;"></circle><circle class="dot" cx="627.7012915147574" cy="76.70163801272506" r="3" style="opacity: 0;"></circle><circle class="dot" cx="629.4245175363543" cy="69.75866694561701" r="3" style="opacity: 0;"></circle><circle class="dot" cx="631.1477435579513" cy="89.24683411890668" r="3" style="opacity: 0;"></circle><circle class="dot" cx="632.7042057710067" cy="77.13027800681789" r="3" style="opacity: 0;"></circle><circle class="dot" cx="634.4251156285961" cy="97.95919120814207" r="3" style="opacity: 0;"></circle><circle class="dot" cx="636.0927537140126" cy="96.7131447136862" r="3" style="opacity: 0;"></circle><circle class="dot" cx="637.8159797356096" cy="103.43182741179223" r="3" style="opacity: 0;"></circle><circle class="dot" cx="639.4836178210261" cy="88.55403226798921" r="3" style="opacity: 0;"></circle><circle class="dot" cx="641.206843842623" cy="101.69733069150966" r="3" style="opacity: 0;"></circle><circle class="dot" cx="642.9300698642201" cy="106.48214923022016" r="3" style="opacity: 0;"></circle><circle class="dot" cx="644.5977079496364" cy="98.79653445241641" r="3" style="opacity: 0;"></circle><circle class="dot" cx="646.323250135241" cy="97.48569354024885" r="3" style="opacity: 0;"></circle><circle class="dot" cx="647.9908882206574" cy="74.06001944447863" r="3" style="opacity: 0;"></circle><circle class="dot" cx="649.7141142422544" cy="53.430473682267376" r="3" style="opacity: 0;"></circle><circle class="dot" cx="651.4373402638514" cy="75.48051244815831" r="3" style="opacity: 0;"></circle><circle class="dot" cx="652.9938024769067" cy="76.36271336623307" r="3" style="opacity: 0;"></circle><circle class="dot" cx="654.7147123344962" cy="86.97404531301919" r="3" style="opacity: 0;"></circle><circle class="dot" cx="656.3823504199127" cy="92.27223500744552" r="3" style="opacity: 0;"></circle><circle class="dot" cx="658.1055764415097" cy="101.12414930405996" r="3" style="opacity: 0;"></circle><circle class="dot" cx="659.773214526926" cy="96.7729549454201" r="3" style="opacity: 0;"></circle><circle class="dot" cx="661.4964405485231" cy="99.81829257787021" r="3" style="opacity: 0;"></circle><circle class="dot" cx="663.21966657012" cy="107.67336967891997" r="3" style="opacity: 0;"></circle><circle class="dot" cx="664.8873046555366" cy="92.89027406869562" r="3" style="opacity: 0;"></circle><circle class="dot" cx="666.612846841141" cy="82.97174397282696" r="3" style="opacity: 0;"></circle><circle class="dot" cx="668.2804849265575" cy="66.34948373678576" r="3" style="opacity: 0;"></circle><circle class="dot" cx="670.0037109481545" cy="54.512042039455054" r="3" style="opacity: 0;"></circle><circle class="dot" cx="671.7269369697515" cy="75.08177756993243" r="3" style="opacity: 0;"></circle><circle class="dot" cx="673.3389871189873" cy="73.70614224005317" r="3" style="opacity: 0;"></circle><circle class="dot" cx="675.0598969765769" cy="86.6600415964163" r="3" style="opacity: 0;"></circle><circle class="dot" cx="676.7275350619933" cy="96.05024797863568" r="3" style="opacity: 0;"></circle><circle class="dot" cx="678.4507610835902" cy="97.95919120814207" r="3" style="opacity: 0;"></circle><circle class="dot" cx="680.1183991690068" cy="94.67461264875641" r="3" style="opacity: 0;"></circle><circle class="dot" cx="681.8416251906037" cy="97.8395707446743" r="3" style="opacity: 0;"></circle><circle class="dot" cx="683.5648512122008" cy="110.61902359181363" r="3" style="opacity: 0;"></circle><circle class="dot" cx="685.2324892976171" cy="91.15577734841305" r="3" style="opacity: 0;"></circle><circle class="dot" cx="686.9580314832217" cy="87.94097739271693" r="3" style="opacity: 0;"></circle><circle class="dot" cx="688.6256695686382" cy="61.12107264604896" r="3" style="opacity: 0;"></circle><circle class="dot" cx="690.3488955902351" cy="36.71849809862536" r="3" style="opacity: 0;"></circle><circle class="dot" cx="692.0721216118321" cy="83.51502024440971" r="3" style="opacity: 0;"></circle><circle class="dot" cx="693.6285838248875" cy="79.37316169683842" r="3" style="opacity: 0;"></circle><circle class="dot" cx="695.3494936824769" cy="90.8666945616993" r="3" style="opacity: 0;"></circle><circle class="dot" cx="697.0171317678934" cy="90.0791931772032" r="3" style="opacity: 0;"></circle><circle class="dot" cx="698.7403577894904" cy="99.62889351071293" r="3" style="opacity: 0;"></circle><circle class="dot" cx="700.4079958749068" cy="97.18165819560161" r="3" style="opacity: 0;"></circle><circle class="dot" cx="702.1312218965038" cy="95.42722473140776" r="3" style="opacity: 0;"></circle><circle class="dot" cx="703.8544479181007" cy="107.92756316378897" r="3" style="opacity: 0;"></circle><circle class="dot" cx="705.5220860035172" cy="92.73576430338309" r="3" style="opacity: 0;"></circle><circle class="dot" cx="707.2476281891218" cy="91.85854757128617" r="3" style="opacity: 0;"></circle><circle class="dot" cx="708.9152662745381" cy="68.94126044525395" r="3" style="opacity: 0;"></circle><circle class="dot" cx="710.6384922961352" cy="62.22257774714794" r="3" style="opacity: 0;"></circle><circle class="dot" cx="712.3617183177321" cy="83.76422954330089" r="3" style="opacity: 0;"></circle><circle class="dot" cx="713.9181805307875" cy="78.48099240680803" r="3" style="opacity: 0;"></circle><circle class="dot" cx="715.639090388377" cy="89.80506294842291" r="3" style="opacity: 0;"></circle><circle class="dot" cx="717.3067284737934" cy="90.06424061926973" r="3" style="opacity: 0;"></circle><circle class="dot" cx="719.0299544953904" cy="100.54099954465462" r="3" style="opacity: 0;"></circle><circle class="dot" cx="720.6975925808068" cy="88.6985736613461" r="3" style="opacity: 0;"></circle><circle class="dot" cx="722.4208186024039" cy="97.86449167456342" r="3" style="opacity: 0;"></circle><circle class="dot" cx="724.1440446240009" cy="107.56371758740785" r="3" style="opacity: 0;"></circle><circle class="dot" cx="725.8116827094174" cy="90.9514257233223" r="3" style="opacity: 0;"></circle><circle class="dot" cx="727.5372248950218" cy="87.36779600526724" r="3" style="opacity: 0;"></circle><circle class="dot" cx="729.2048629804383" cy="71.3137329706979" r="3" style="opacity: 0;"></circle><circle class="dot" cx="730.9280890020353" cy="55.608562954576215" r="3" style="opacity: 0;"></circle><circle class="dot" cx="732.6513150236323" cy="76.71659057065854" r="3" style="opacity: 0;"></circle><circle class="dot" cx="734.2077772366877" cy="73.33731247769423" r="3" style="opacity: 0;"></circle><circle class="dot" cx="735.928687094277" cy="91.45482850708247" r="3" style="opacity: 0;"></circle><circle class="dot" cx="737.5963251796936" cy="90.96637828125577" r="3" style="opacity: 0;"></circle><circle class="dot" cx="739.3195512012906" cy="97.61029818969443" r="3" style="opacity: 0;"></circle><circle class="dot" cx="740.987189286707" cy="94.80420148417983" r="3" style="opacity: 0;"></circle><circle class="dot" cx="742.7104153083039" cy="93.42856615430055" r="3" style="opacity: 0;"></circle><circle class="dot" cx="744.433641329901" cy="103.7906888021955" r="3" style="opacity: 0;"></circle><circle class="dot" cx="746.1012794153173" cy="88.54406389603358" r="3" style="opacity: 0;"></circle><circle class="dot" cx="747.8268216009219" cy="87.0388397307309" r="3" style="opacity: 0;"></circle><circle class="dot" cx="749.4944596863384" cy="66.11024280985022" r="3" style="opacity: 0;"></circle><circle class="dot" cx="751.2176857079353" cy="46.6769016823166" r="3" style="opacity: 0;"></circle><circle class="dot" cx="752.9409117295323" cy="28.07093542710166" r="3" style="opacity: 0;"></circle><circle class="dot" cx="754.5529618787682" cy="50.23062628450472" r="3" style="opacity: 0;"></circle><circle class="dot" cx="756.2738717363577" cy="81.89017561563928" r="3" style="opacity: 0;"></circle><circle class="dot" cx="757.9415098217742" cy="85.09500719937975" r="3" style="opacity: 0;"></circle><circle class="dot" cx="759.6647358433712" cy="99.72359304429158" r="3" style="opacity: 0;"></circle><circle class="dot" cx="761.3323739287875" cy="98.5423409675474" r="3" style="opacity: 0;"></circle><circle class="dot" cx="763.0555999503846" cy="93.13948336758679" r="3" style="opacity: 0;"></circle><circle class="dot" cx="764.7788259719815" cy="105.93388877265959" r="3" style="opacity: 0;"></circle><circle class="dot" cx="766.4464640573981" cy="94.93379031960323" r="3" style="opacity: 0;"></circle><circle class="dot" cx="768.1720062430026" cy="87.55221088644672" r="3" style="opacity: 0;"></circle><circle class="dot" cx="769.8396443284189" cy="72.66444737068807" r="3" style="opacity: 0;"></circle><circle class="dot" cx="771.562870350016" cy="61.39021868885142" r="3" style="opacity: 0;"></circle><circle class="dot" cx="773.286096371613" cy="76.6268752230577" r="3" style="opacity: 0;"></circle><circle class="dot" cx="774.8425585846683" cy="64.98381677886213" r="3" style="opacity: 0;"></circle><circle class="dot" cx="776.5634684422578" cy="89.07238760968286" r="3" style="opacity: 0;"></circle><circle class="dot" cx="778.2311065276742" cy="89.95458852775761" r="3" style="opacity: 0;"></circle><circle class="dot" cx="779.9543325492712" cy="95.10325264284923" r="3" style="opacity: 0;"></circle><circle class="dot" cx="781.6219706346877" cy="86.34603787981344" r="3" style="opacity: 0;"></circle><circle class="dot" cx="783.3451966562847" cy="96.88759122291003" r="3" style="opacity: 0;"></circle><circle class="dot" cx="785.0684226778817" cy="105.27099203760908" r="3" style="opacity: 0;"></circle><circle class="dot" cx="786.736060763298" cy="93.66282289525826" r="3" style="opacity: 0;"></circle><circle class="dot" cx="788.4616029489026" cy="86.11676532483355" r="3" style="opacity: 0;"></circle><circle class="dot" cx="790.1292410343191" cy="61.49488659438572" r="3" style="opacity: 0;"></circle><circle class="dot" cx="791.852467055916" cy="44.89754728823364" r="3" style="opacity: 0;"></circle><circle class="dot" cx="793.575693077513" cy="72.45012737364165" r="3" style="opacity: 0;"></circle><circle class="dot" cx="795.1321552905684" cy="70.73058321129257" r="3" style="opacity: 0;"></circle><circle class="dot" cx="796.8530651481578" cy="87.1036341484426" r="3" style="opacity: 0;"></circle><circle class="dot" cx="798.5207032335743" cy="88.8680359845921" r="3" style="opacity: 0;"></circle><circle class="dot" cx="800.2439292551713" cy="93.27904057496585" r="3" style="opacity: 0;"></circle><circle class="dot" cx="801.9115673405878" cy="91.56448059859459" r="3" style="opacity: 0;"></circle><circle class="dot" cx="803.6347933621847" cy="94.87398008786936" r="3" style="opacity: 0;"></circle><circle class="dot" cx="805.3580193837818" cy="101.09424418819302" r="3" style="opacity: 0;"></circle><circle class="dot" cx="807.0256574691982" cy="86.52048438903726" r="3" style="opacity: 0;"></circle><circle class="dot" cx="808.7511996548027" cy="84.25267976912758" r="3" style="opacity: 0;"></circle><circle class="dot" cx="810.4188377402191" cy="64.30596748587814" r="3" style="opacity: 0;"></circle><circle class="dot" cx="812.1420637618161" cy="10.471774739407067" r="3" style="opacity: 0;"></circle><circle class="dot" cx="813.8652897834131" cy="34.42078836284874" r="3" style="opacity: 0;"></circle><circle class="dot" cx="815.4217519964684" cy="51.750803007740885" r="3" style="opacity: 0;"></circle><circle class="dot" cx="817.1426618540579" cy="78.17197287618296" r="3" style="opacity: 0;"></circle><circle class="dot" cx="818.8102999394744" cy="83.05647513444995" r="3" style="opacity: 0;"></circle><circle class="dot" cx="820.5335259610714" cy="91.17072990634654" r="3" style="opacity: 0;"></circle><circle class="dot" cx="822.2011640464879" cy="68.49268370724984" r="3" style="opacity: 0;"></circle><circle class="dot" cx="823.9243900680849" cy="90.4629754974956" r="3" style="opacity: 0;"></circle><circle class="dot" cx="825.6476160896818" cy="102.21070184722547" r="3" style="opacity: 0;"></circle><circle class="dot" cx="827.3152541750983" cy="87.0836974045313" r="3" style="opacity: 0;"></circle><circle class="dot" cx="829.0407963607029" cy="84.8507820864664" r="3" style="opacity: 0;"></circle><circle class="dot" cx="830.7084344461192" cy="64.5302558548802" r="3" style="opacity: 0;"></circle><circle class="dot" cx="832.4316604677163" cy="55.0054764512596" r="3" style="opacity: 0;"></circle><circle class="dot" cx="834.1548864893132" cy="68.89141858547572" r="3" style="opacity: 0;"></circle><circle class="dot" cx="835.7669366385492" cy="55.683325744243575" r="3" style="opacity: 0;"></circle><circle class="dot" cx="837.4878464961386" cy="78.06730497064868" r="3" style="opacity: 0;"></circle><circle class="dot" cx="839.155484581555" cy="81.58614027099203" r="3" style="opacity: 0;"></circle><circle class="dot" cx="840.878710603152" cy="89.00759319197115" r="3" style="opacity: 0;"></circle><circle class="dot" cx="842.5463486885685" cy="81.78550771010498" r="3" style="opacity: 0;"></circle><circle class="dot" cx="844.2695747101654" cy="85.33923231229309" r="3" style="opacity: 0;"></circle><circle class="dot" cx="845.9928007317625" cy="96.07018472254698" r="3" style="opacity: 0;"></circle><circle class="dot" cx="847.6604388171788" cy="86.27625927612391" r="3" style="opacity: 0;"></circle><circle class="dot" cx="849.3859810027834" cy="77.80812729980187" r="3" style="opacity: 0;"></circle><circle class="dot" cx="851.0536190881999" cy="50.74898162619836" r="3" style="opacity: 0;"></circle><circle class="dot" cx="852.7768451097968" cy="0" r="3" style="opacity: 0;"></circle><circle class="dot" cx="854.5000711313938" cy="59.49124383130068" r="3" style="opacity: 0;"></circle><circle class="dot" cx="856.0565333444492" cy="67.7400716245985" r="3" style="opacity: 0;"></circle><circle class="dot" cx="857.7774432020387" cy="80.5544137735826" r="3" style="opacity: 0;"></circle><circle class="dot" cx="859.4450812874551" cy="78.23676729389467" r="3" style="opacity: 0;"></circle><circle class="dot" cx="861.1683073090521" cy="85.39904254402698" r="3" style="opacity: 0;"></circle><circle class="dot" cx="862.8359453944685" cy="86.95410856910789" r="3" style="opacity: 0;"></circle><circle class="dot" cx="864.5591714160655" cy="84.80094022668817" r="3" style="opacity: 0;"></circle><circle class="dot" cx="866.2823974376624" cy="96.29945727752686" r="3" style="opacity: 0;"></circle><circle class="dot" cx="867.950035523079" cy="83.18606396987336" r="3" style="opacity: 0;"></circle><circle class="dot" cx="869.6755777086835" cy="75.86429476845072" r="3" style="opacity: 0;"></circle><circle class="dot" cx="871.3432157940999" cy="38.40315295912967" r="3" style="opacity: 0;"></circle><circle class="dot" cx="873.066441815697" cy="7.271927341644414" r="3" style="opacity: 0;"></circle><circle class="dot" cx="874.7896678372939" cy="47.91796399079465" r="3" style="opacity: 0;"></circle><circle class="dot" cx="876.3461300503492" cy="47.83821701514947" r="3" style="opacity: 0;"></circle><circle class="dot" cx="878.0670399079387" cy="71.8420566843472" r="3" style="opacity: 0;"></circle><circle class="dot" cx="879.7346779933551" cy="79.49278216030619" r="3" style="opacity: 0;"></circle><circle class="dot" cx="881.4579040149521" cy="86.72483601412802" r="3" style="opacity: 0;"></circle><circle class="dot" cx="883.1255421003686" cy="85.50371044956127" r="3" style="opacity: 0;"></circle><circle class="dot" cx="884.8487681219656" cy="80.7089235388951" r="3" style="opacity: 0;"></circle><circle class="dot" cx="886.5719941435626" cy="95.08331589893794" r="3" style="opacity: 0;"></circle><circle class="dot" cx="888.2396322289791" cy="82.1942109602865" r="3" style="opacity: 0;"></circle><circle class="dot" cx="889.9651744145835" cy="74.92228361864208" r="3" style="opacity: 0;"></circle><circle class="dot" cx="891.6328125" cy="61.489902408407886" r="3" style="opacity: 0;"></circle></g><g><path class="mouse-linecelda6377" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M367.2139064087011,162 367.2139064087011,0"></path><path class="mouse-line-horizontalcelda6377" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M891.6328125,78 0,78"></path><g class="mouse-per-linecelda6377" transform="translate(367.2139064087011,98.5423409675474)" style="opacity: 1;"><circle r="4" style="stroke: rgb(255, 171, 133); fill: rgb(255, 255, 255); stroke-width: 3px; opacity: 0;"></circle><text text-anchor="middle" transform="translate(10,3)" style="font-size: 16px; text-decoration: underline; opacity: 0;"></text></g><rect id="rectcelda6377" width="891.6328125" height="162" fill="none" pointer-events="all"></rect></g></g></svg></div>
<style type="text/css">
        .linecelda6377 {
            fill: none;
            stroke: #FF6E2B;
            stroke-width: 2;
        }
        .loadercelda6377,
        .loadercelda6377:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda6377 {
            margin: 46px 420px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF6E2B;
            border-right: 1.1em solid #FF6E2B;
            border-bottom: 1.1em solid #FF6E2B;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script>
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=6377&pId_Territorio=00;&pId_Territorio_Padre=&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var linea_grafico;
        var svg;
        var seriesLineas;
        var lineaCero;
        var lineas_series;
        var nElementosPorSerie;
        var puntosAislados;
        var lineasVertHorRaton;
        var ratonPorLinea;
        var ejeX;
        var ejeY;
        var cDimensionExt = 0
        var valorMinimoDatos = 0;
        var valorMaximoDatos = 0;
        var fechaMaximo;
        var fechaMinimo;
        var calculo_maxmin;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var nCortes = 0;
        var nPuntosEjeX = 0;
        var parseDate = d3.timeParse("%Y/%m/%d");
        var margin;
        var width;
        var height;
        var color;
        var category;
        var element_capa_esperando;
       var anchoNodos;
       var svgLeyendaHorizontal;
       var svgLegend;
       var legend;
        element_capa_esperando = document.getElementById("capa_Esperandocelda6377");
        element_capa_esperando.classList.remove("loadercelda6377");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_GraficoEvolucionLineas2('#FFE9DF', '#FF6E2B', category.length));
        data.forEach(function (d) {
            d.fecha_periodo_serie = parseDate(d.fecha_periodo_serie);
            nCortes++;
            nPuntosEjeX++;
        });
        if (nCortes > 7){
            nCortes = 7;
        }
        //* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        color.domain(d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); }));
        calculo_maxmin = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        valorMaximoDatos = CalcularMaximoDatos(calculo_maxmin, false)
        valorMinimoDatos = CalcularMinimoDatos(calculo_maxmin, false, true);
        margenIzquierdo = CalcularAnchoMargenIzquierdo_GraficoLineas(format("#.##0,",valorMaximoDatos), format("#.##0,",valorMinimoDatos), 969);
        margenDerecho = CalcularAnchoMargenDerecho_GraficoLineas(category, 969);
        if (category.length > 1 && 969 > 222) 
        {
            margenSuperior = 40;
            margenInferior = 20;
        }
        else if (category.length == 1 && 969 > 222) 
        {
            margenDerecho = 30 
            margenSuperior = 40;
            margenInferior = 20;
        }
        else 
        {
            margenDerecho = 30 
            margenSuperior = 50;
            margenInferior = 50;
        }
        fechaMaximo = d3.max(calculo_maxmin, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.fecha;
            });
        });
        fechaMinimo = d3.min(calculo_maxmin, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.fecha;
            });
        });
        margin = { top: margenSuperior, right: margenDerecho, bottom: margenInferior, left: margenIzquierdo };
        width = 969 - margin.left - margin.right;
        height = 222 - margin.top - margin.bottom;
        ejeX = d3.scaleTime().range([0, width]);
        ejeY = d3.scaleLinear().range([height, 0]);
        linea_grafico = d3.line()
            .x(function (d) { return ejeX(d.fecha); })
            .y(function (d) { return ejeY(d.valor_serie); })
            .defined(function (d) { return !isNaN(d.valor_serie); })
            ;
                // 1.Add the SVG To the page And employ #2
        svg = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda6377").append("svg")
            .attr('id', 'celda6377')
            .attr("width", 969)
            .attr("height", 222)
            .append("g")
            .attr("transform", "translate(" + margin.left + ", " + margin.top + ")");
        seriesLineas = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, etiquetaperiodo: d.etiquetaperiodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        nElementosPorSerie = seriesLineas[0].values.length - 1;
        ejeX.domain([fechaMinimo, fechaMaximo]);
        ejeY.domain([valorMinimoDatos, valorMaximoDatos]);
                // Leyenda, eje de las X, puntos y leyenda de estos puntos:
        svg.append("g")
            .attr("class", "fuente_generica")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom().scale(ejeX).tickSize(-height).ticks(nCortes))
            .call(
                g => {
                    g.selectAll("text")
                        .style("text-anchor", "middle")
                        .attr("y", "5")
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 1.5)
                        .attr('opacity', 0.5)
                }
            )
        ;
        svg.append("g")
            .attr("class", "fuente_generica")
            .call(d3.axisLeft(ejeY).ticks(4).tickSize(-width))
            .call(
                g => {
                    g.selectAll("text")
                        .attr("x", -3)
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain").remove()
                }
            )
        ;
        svg.selectAll("text").attr('fill', '#A9A9A9');
        if (category.length > 1 ) 
        {
            svgLegend = svg.append('g')
                .attr('class', 'gLegend')
                .attr("transform", "translate(" + (width + 20) + "," + 0 + ")");
            legend = svgLegend.selectAll('.legend')
                .data(category)
                .enter().append('g')
                .attr("class", "legend")
                .attr("transform", function (d, i) { return "translate(0," + i * 20 + ")" });
            legend.append('rect')
                .style('fill', d => color(d))
                .attr('x', 0)
                .attr('y', 0)
                .attr('width', 10)
                .attr('height', 10);
            legend.append("text")
                .attr("class", "legend-text")
                .attr("x", 15)
                .attr("y", 10)
                .text(d => d)
        }
        if (valorMaximoDatos > 0 && valorMinimoDatos < 0 ) 
        {
            lineaCero = svg.append("line")
            .attr('id', 'lineaCero')
            .attr("x1", 0)
            .attr("y1", ejeY(0))
            .attr("x2", width)
            .attr("y2", ejeY(0))
            .attr("stroke-width", "1px")
            .attr("stroke", "#A9A9A9")
            .style("stroke-dasharray", ("5, 3"))
            ;
        }
        lineas_series = svg.selectAll(".lineas_series")
            .data(seriesLineas)
            .enter().append("g")
            ;
        lineas_series.append("path")
            .attr("class", "line linecelda6377")
            .attr("d", function (d) { return linea_grafico(d.values); })
            .attr("data-legend", function (d) { return d.name })
            .style("stroke", function (d) { return color(d.name); });
        puntosAislados = svg.selectAll(".dot")
            .data(seriesLineas).enter()
            .append("g")
            .attr('class', 'circle-group')
            .style("fill", function (d, i1) {
                return color(d.name);
            })
            ;
        puntosAislados.selectAll(".dot")
            .data(d => d.values).enter()
            .append("circle") // Uses the enter().append() method
            .attr("class", "dot") // Assign a class for styling
            .attr("cx", function (d, i) { return ejeX(d.fecha) })
            .attr("cy", function (d) { return ejeY(d.valor_serie) })
            .attr("r", 3)
            .style("opacity", function (d, i) {
                if (i == 0) {
                    cDimensionExt++;
                }
                if (d.valor_serie == "'null'" || isNaN(d.valor_serie)) {
                    return "0";
                }
                else {
                    if (i > 0 && i < nElementosPorSerie) {
                        if ((seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie)) && (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie))) {
                            return "1";
                        }
                        else {
                            return "0";
                        }
                    }
                    else {
                        if (i == 0) {
                            if (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie)) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                        else {
                            if (i == nElementosPorSerie && (seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie))) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                    }
                }
            })
            ;
        transition(d3.selectAll(".linecelda6377"));
        lineasVertHorRaton = svg.append("g"); 
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-linecelda6377")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-line-horizontalcelda6377")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        ratonPorLinea = lineasVertHorRaton.selectAll(".mouse-per-linecelda6377")
            .data(seriesLineas)
            .enter()
            .append("g")
            .attr("class", "mouse-per-linecelda6377");
            //Tabulación descuadrada:
                ratonPorLinea.append("circle")
                    .attr("r", 4)
                    .style("stroke", function (d) {
                        return color(d.name);
                    })
                    .style("fill", "#FFFFFF")
                    .style("stroke-width", "3px")
                    .style("opacity", "0");
                ratonPorLinea.append("text")
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("text-decoration", "underline")
                    .attr("transform", "translate(10,3)");
                lineasVertHorRaton.append("rect")
                    .attr('id', 'rectcelda6377')
                    .attr("width", width)
                    .attr("height", height)
                    .attr("fill", "none")
                    .attr("pointer-events", "all")
                    .on("mouseout", function () {
                        d3.select(".mouse-linecelda6377").style("opacity", "0");
                        d3.select(".mouse-line-horizontalcelda6377").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda6377 circle").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda6377 text").style("opacity", "0");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'none');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'none');
                    })
                    .on("mouseover", function () {
                        d3.select(".mouse-linecelda6377").style("opacity", "0.65");
                        d3.select(".mouse-line-horizontalcelda6377").style("opacity", "0.65");
                        d3.selectAll(".mouse-per-linecelda6377 circle").style("opacity", "1");
                        d3.selectAll(".mouse-per-linecelda6377 text").style("opacity", "1");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'block');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'block');
                        ActualizarLineasPuntos('celda6377', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,')
                    })
                    .on("mousemove", function () {
                        ActualizarLineasPuntos('celda6377', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,')
                    });
            }
        );
</script>
</div><div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda6377&#39;), &#39;Número de defunciones.png&#39;, {left: -20, width: 1004, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga6377"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga6377").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="969" height="444"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda6377").html() + '</svg>'  )).attr("download", "Número de defunciones.svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6377&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=6377&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;6377&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Número de defunciones</div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_3962" class="anchor"></a></td></tr><tr><td class="celda_sin_estilos" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 140px;"><table class="Tablas_datos"><tbody><tr class="Tablas_datos_cabecera"><td class="columna_izquierda"><h4 class="h4_grande">Variación de la población respecto al año 2000</h4></td><td class="columna_derecha"><h4 class="h4_muy_grande negativos_ie">16,1 %</h4></td></tr><tr><td colspan="2"><table class="Subtitulo_indicador"><tbody><tr><td class="columna_estrecha">Periodo:</td><td class="columna_ancha negrita">Anual&nbsp;2019</td><td class="columna_izquierda columna_estrecha">Crecimiento interanual:</td><td class="columna_centro texto_muy_grande negativos_ie">4,7%</td><td class="columna_derecha"><img class="imagen_tendencia" src="./www.portalestadistico.com_files/crecimiento_arriba.png" alt="Estabilidad"></td></tr><tr><td class="columna_estrecha">Fuente:</td><td colspan="4" class="negrita">Elaboración propia con datos del INE</td></tr></tbody></table></td></tr><tr><td colspan="2"><p class="texto_contenido">Crecimiento de la población desde el año 2000, en términos porcentuales.</p></td></tr></tbody></table></div></td></tr><tr><td class="separador"><br></td></tr><tr class="ancla"><td><a id="Indice_Nivel_1_5869" class="anchor"></a></td></tr><tr><td class="celda_tipo_fila_1" colspan="2"><div class="clase_capa_unidad_visualizacion" style="min-height: 222px;"><div id="capa_Grafico_Evolucion_Lineas_Asincronocelda5869">
<div id="capa_Esperandocelda5869" class="load-container"></div>
<svg id="celda5869" width="969" height="222"><g transform="translate(34.01953125, 40)"><g class="fuente_generica" transform="translate(0,162)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#A9A9A9" d="M0.5,-162V0.5H905.48046875V-162" stroke-width="1.5" opacity="0.5"></path><g class="tick" opacity="1" transform="translate(50.74610147455887,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2002</text></g><g class="tick" opacity="1" transform="translate(151.2383044236766,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2004</text></g><g class="tick" opacity="1" transform="translate(251.8681679247794,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2006</text></g><g class="tick" opacity="1" transform="translate(352.3603708738971,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2008</text></g><g class="tick" opacity="1" transform="translate(452.990234375,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2010</text></g><g class="tick" opacity="1" transform="translate(553.4824373241178,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2012</text></g><g class="tick" opacity="1" transform="translate(654.1123008252206,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2014</text></g><g class="tick" opacity="1" transform="translate(754.6045037743384,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2016</text></g><g class="tick" opacity="1" transform="translate(855.2343672754412,0)"><line stroke="#A9A9A9" y2="-162" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" y="5" dy="0.71em" style="text-anchor: middle;">2018</text></g></g><g class="fuente_generica" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><g class="tick" opacity="1" transform="translate(0,114.03282662038421)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">5</text></g><g class="tick" opacity="1" transform="translate(0,65.55595786701777)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">10</text></g><g class="tick" opacity="1" transform="translate(0,17.07908911365132)"><line stroke="#A9A9A9" x2="904.98046875" stroke-width="0.7" opacity="0.3"></line><text fill="#A9A9A9" x="-3" dy="0.32em">15</text></g></g><g><path class="line linecelda5869" d="M0,147.27272727272728L50.24610147455887,130.01496199652883L100.49220294911774,108.97600095756778L150.7383044236766,97.43850619426657L201.12206645022056,75.62391525525166L251.3681679247794,61.274762104255174L301.6142693993383,49.44640612843378L351.8603708738971,26.565324076844803L402.2441329004411,12.507032138368544L452.490234375,5.914177987910705L502.7363358495588,1.8421210126279561L552.9824373241178,0L603.3661993506616,3.2964270752289337L653.6123008252206,11.82835597582141L703.8584022997794,15.415644263570528L754.1045037743384,16.966904063678243L804.4882658008822,16.772996588664768L854.7343672754412,13.185708300915678L904.98046875,6.205039200430917" data-legend="España" style="stroke: rgb(255, 171, 133);" stroke-dasharray="930.4059448242188, 930.4059448242188"></path></g><g class="circle-group" style="fill: rgb(255, 171, 133);"><circle class="dot" cx="0" cy="147.27272727272728" r="3" style="opacity: 0;"></circle><circle class="dot" cx="50.24610147455887" cy="130.01496199652883" r="3" style="opacity: 0;"></circle><circle class="dot" cx="100.49220294911774" cy="108.97600095756778" r="3" style="opacity: 0;"></circle><circle class="dot" cx="150.7383044236766" cy="97.43850619426657" r="3" style="opacity: 0;"></circle><circle class="dot" cx="201.12206645022056" cy="75.62391525525166" r="3" style="opacity: 0;"></circle><circle class="dot" cx="251.3681679247794" cy="61.274762104255174" r="3" style="opacity: 0;"></circle><circle class="dot" cx="301.6142693993383" cy="49.44640612843378" r="3" style="opacity: 0;"></circle><circle class="dot" cx="351.8603708738971" cy="26.565324076844803" r="3" style="opacity: 0;"></circle><circle class="dot" cx="402.2441329004411" cy="12.507032138368544" r="3" style="opacity: 0;"></circle><circle class="dot" cx="452.490234375" cy="5.914177987910705" r="3" style="opacity: 0;"></circle><circle class="dot" cx="502.7363358495588" cy="1.8421210126279561" r="3" style="opacity: 0;"></circle><circle class="dot" cx="552.9824373241178" cy="0" r="3" style="opacity: 0;"></circle><circle class="dot" cx="603.3661993506616" cy="3.2964270752289337" r="3" style="opacity: 0;"></circle><circle class="dot" cx="653.6123008252206" cy="11.82835597582141" r="3" style="opacity: 0;"></circle><circle class="dot" cx="703.8584022997794" cy="15.415644263570528" r="3" style="opacity: 0;"></circle><circle class="dot" cx="754.1045037743384" cy="16.966904063678243" r="3" style="opacity: 0;"></circle><circle class="dot" cx="804.4882658008822" cy="16.772996588664768" r="3" style="opacity: 0;"></circle><circle class="dot" cx="854.7343672754412" cy="13.185708300915678" r="3" style="opacity: 0;"></circle><circle class="dot" cx="904.98046875" cy="6.205039200430917" r="3" style="opacity: 0;"></circle></g><g><path class="mouse-linecelda5869" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M402.2441329004411,162 402.2441329004411,0"></path><path class="mouse-line-horizontalcelda5869" style="stroke: rgb(0, 0, 0); stroke-width: 1px; stroke-dasharray: 5, 5; opacity: 0;" d="M904.98046875,7 0,7"></path><g class="mouse-per-linecelda5869" transform="translate(402.2441329004411,12.507032138368544)" style="opacity: 1;"><circle r="4" style="stroke: rgb(255, 171, 133); fill: rgb(255, 255, 255); stroke-width: 3px; opacity: 0;"></circle><text text-anchor="middle" transform="translate(10,3)" style="font-size: 16px; text-decoration: underline; opacity: 0;"></text></g><rect id="rectcelda5869" width="904.98046875" height="162" fill="none" pointer-events="all"></rect></g></g></svg></div>
<style type="text/css">
        .linecelda5869 {
            fill: none;
            stroke: #FF6E2B;
            stroke-width: 2;
        }
        .loadercelda5869,
        .loadercelda5869:after {
            border-radius: 50%;
            width: 130px;
            height: 130px;
        }
        .loadercelda5869 {
            margin: 46px 420px;
            vertical-align: middle;
            font-size: 10px;
            position: absolute;
            text-indent: -9999em;
            border-top: 1.1em solid #FF6E2B;
            border-right: 1.1em solid #FF6E2B;
            border-bottom: 1.1em solid #FF6E2B;
            border-left: 1.1em solid #FFE9DF;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation: load8 1.1s infinite linear;
            animation: load8 1.1s infinite linear;
        }
</style>
<script>
d3.csv("http://www.portalestadistico.com/servicio_obtencion_datos_visualizaciones.asmx/Obtener_Datos?pn=portalestadistico&pc=AAA00&pId_Pagina_Activa=10001&pId_Celda_Fila_Plantilla=5869&pId_Territorio=00;&pId_Territorio_Padre=&pIdioma=1&pId_region=es-es").then(
    function (data) {
        var linea_grafico;
        var svg;
        var seriesLineas;
        var lineaCero;
        var lineas_series;
        var nElementosPorSerie;
        var puntosAislados;
        var lineasVertHorRaton;
        var ratonPorLinea;
        var ejeX;
        var ejeY;
        var cDimensionExt = 0
        var valorMinimoDatos = 0;
        var valorMaximoDatos = 0;
        var fechaMaximo;
        var fechaMinimo;
        var calculo_maxmin;
        var margenIzquierdo = 0;
        var margenDerecho = 0;
        var margenSuperior = 0;
        var margenInferior = 0;
        var nCortes = 0;
        var nPuntosEjeX = 0;
        var parseDate = d3.timeParse("%Y/%m/%d");
        var margin;
        var width;
        var height;
        var color;
        var category;
        var element_capa_esperando;
       var anchoNodos;
       var svgLeyendaHorizontal;
       var svgLegend;
       var legend;
        element_capa_esperando = document.getElementById("capa_Esperandocelda5869");
        element_capa_esperando.classList.remove("loadercelda5869");
        category = d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); });
        color =  d3.scaleOrdinal(CalcularGradienteColores_GraficoEvolucionLineas2('#FFE9DF', '#FF6E2B', category.length));
        data.forEach(function (d) {
            d.fecha_periodo_serie = parseDate(d.fecha_periodo_serie);
            nCortes++;
            nPuntosEjeX++;
        });
        if (nCortes > 7){
            nCortes = 7;
        }
        //* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
        color.domain(d3.keys(data[0]).filter(function (key) { return (key !== "anio_periodo" && key !== "fecha_periodo_serie" && key !== "nombre_periodo" && key !== "periodo" && key !== "etiquetaperiodo"); }));
        calculo_maxmin = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        valorMaximoDatos = CalcularMaximoDatos(calculo_maxmin, false)
        valorMinimoDatos = CalcularMinimoDatos(calculo_maxmin, false, true);
        margenIzquierdo = CalcularAnchoMargenIzquierdo_GraficoLineas(format("#.##0,0",valorMaximoDatos), format("#.##0,0",valorMinimoDatos), 969);
        margenDerecho = CalcularAnchoMargenDerecho_GraficoLineas(category, 969);
        if (category.length > 1 && 969 > 222) 
        {
            margenSuperior = 40;
            margenInferior = 20;
        }
        else if (category.length == 1 && 969 > 222) 
        {
            margenDerecho = 30 
            margenSuperior = 40;
            margenInferior = 20;
        }
        else 
        {
            margenDerecho = 30 
            margenSuperior = 50;
            margenInferior = 50;
        }
        fechaMaximo = d3.max(calculo_maxmin, function (serie) {
            return d3.max(serie.values, function (d) {
                return d.fecha;
            });
        });
        fechaMinimo = d3.min(calculo_maxmin, function (serie) {
            return d3.min(serie.values, function (d) {
                return d.fecha;
            });
        });
        margin = { top: margenSuperior, right: margenDerecho, bottom: margenInferior, left: margenIzquierdo };
        width = 969 - margin.left - margin.right;
        height = 222 - margin.top - margin.bottom;
        ejeX = d3.scaleTime().range([0, width]);
        ejeY = d3.scaleLinear().range([height, 0]);
        linea_grafico = d3.line()
            .x(function (d) { return ejeX(d.fecha); })
            .y(function (d) { return ejeY(d.valor_serie); })
            .defined(function (d) { return !isNaN(d.valor_serie); })
            ;
                // 1.Add the SVG To the page And employ #2
        svg = d3.select("#capa_Grafico_Evolucion_Lineas_Asincronocelda5869").append("svg")
            .attr('id', 'celda5869')
            .attr("width", 969)
            .attr("height", 222)
            .append("g")
            .attr("transform", "translate(" + margin.left + ", " + margin.top + ")");
        seriesLineas = color.domain().map(function (name) {
            return {
                name: name,
                values: data.map(function (d) {
                    return { anio_periodo: d.anio_periodo, etiquetaperiodo: d.etiquetaperiodo, fecha: d.fecha_periodo_serie, nombre_periodo: d.nombre_periodo, valor_serie: +d[name] };
                })
            };
        });
        nElementosPorSerie = seriesLineas[0].values.length - 1;
        ejeX.domain([fechaMinimo, fechaMaximo]);
        ejeY.domain([valorMinimoDatos, valorMaximoDatos]);
                // Leyenda, eje de las X, puntos y leyenda de estos puntos:
        svg.append("g")
            .attr("class", "fuente_generica")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom().scale(ejeX).tickSize(-height).ticks(nCortes))
            .call(
                g => {
                    g.selectAll("text")
                        .style("text-anchor", "middle")
                        .attr("y", "5")
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 1.5)
                        .attr('opacity', 0.5)
                }
            )
        ;
        svg.append("g")
            .attr("class", "fuente_generica")
            .call(d3.axisLeft(ejeY).ticks(4).tickSize(-width))
            .call(
                g => {
                    g.selectAll("text")
                        .attr("x", -3)
                        .attr('fill', '#A9A9A9')
                    g.selectAll("line")
                        .attr('stroke', '#A9A9A9')
                        .attr('stroke-width', 0.7)
                        .attr('opacity', 0.3)
                    g.select(".domain").remove()
                }
            )
        ;
        svg.selectAll("text").attr('fill', '#A9A9A9');
        if (category.length > 1 ) 
        {
            svgLegend = svg.append('g')
                .attr('class', 'gLegend')
                .attr("transform", "translate(" + (width + 20) + "," + 0 + ")");
            legend = svgLegend.selectAll('.legend')
                .data(category)
                .enter().append('g')
                .attr("class", "legend")
                .attr("transform", function (d, i) { return "translate(0," + i * 20 + ")" });
            legend.append('rect')
                .style('fill', d => color(d))
                .attr('x', 0)
                .attr('y', 0)
                .attr('width', 10)
                .attr('height', 10);
            legend.append("text")
                .attr("class", "legend-text")
                .attr("x", 15)
                .attr("y", 10)
                .text(d => d)
        }
        if (valorMaximoDatos > 0 && valorMinimoDatos < 0 ) 
        {
            lineaCero = svg.append("line")
            .attr('id', 'lineaCero')
            .attr("x1", 0)
            .attr("y1", ejeY(0))
            .attr("x2", width)
            .attr("y2", ejeY(0))
            .attr("stroke-width", "1px")
            .attr("stroke", "#A9A9A9")
            .style("stroke-dasharray", ("5, 3"))
            ;
        }
        lineas_series = svg.selectAll(".lineas_series")
            .data(seriesLineas)
            .enter().append("g")
            ;
        lineas_series.append("path")
            .attr("class", "line linecelda5869")
            .attr("d", function (d) { return linea_grafico(d.values); })
            .attr("data-legend", function (d) { return d.name })
            .style("stroke", function (d) { return color(d.name); });
        puntosAislados = svg.selectAll(".dot")
            .data(seriesLineas).enter()
            .append("g")
            .attr('class', 'circle-group')
            .style("fill", function (d, i1) {
                return color(d.name);
            })
            ;
        puntosAislados.selectAll(".dot")
            .data(d => d.values).enter()
            .append("circle") // Uses the enter().append() method
            .attr("class", "dot") // Assign a class for styling
            .attr("cx", function (d, i) { return ejeX(d.fecha) })
            .attr("cy", function (d) { return ejeY(d.valor_serie) })
            .attr("r", 3)
            .style("opacity", function (d, i) {
                if (i == 0) {
                    cDimensionExt++;
                }
                if (d.valor_serie == "'null'" || isNaN(d.valor_serie)) {
                    return "0";
                }
                else {
                    if (i > 0 && i < nElementosPorSerie) {
                        if ((seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie)) && (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie))) {
                            return "1";
                        }
                        else {
                            return "0";
                        }
                    }
                    else {
                        if (i == 0) {
                            if (seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i + 1].valor_serie)) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                        else {
                            if (i == nElementosPorSerie && (seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie === 'null' || isNaN(seriesLineas[cDimensionExt - 1].values[i - 1].valor_serie))) {
                                return "1";
                            }
                            else {
                                return "0";
                            }
                        }
                    }
                }
            })
            ;
        transition(d3.selectAll(".linecelda5869"));
        lineasVertHorRaton = svg.append("g"); 
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-linecelda5869")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        lineasVertHorRaton.append("path")
            .attr("class", "mouse-line-horizontalcelda5869")
            .style("stroke", "#000000")
            .style("stroke-width", "1px")
            .style("stroke-dasharray", ("5, 5"))
            .style("opacity", "1");
        ratonPorLinea = lineasVertHorRaton.selectAll(".mouse-per-linecelda5869")
            .data(seriesLineas)
            .enter()
            .append("g")
            .attr("class", "mouse-per-linecelda5869");
            //Tabulación descuadrada:
                ratonPorLinea.append("circle")
                    .attr("r", 4)
                    .style("stroke", function (d) {
                        return color(d.name);
                    })
                    .style("fill", "#FFFFFF")
                    .style("stroke-width", "3px")
                    .style("opacity", "0");
                ratonPorLinea.append("text")
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("text-decoration", "underline")
                    .attr("transform", "translate(10,3)");
                lineasVertHorRaton.append("rect")
                    .attr('id', 'rectcelda5869')
                    .attr("width", width)
                    .attr("height", height)
                    .attr("fill", "none")
                    .attr("pointer-events", "all")
                    .on("mouseout", function () {
                        d3.select(".mouse-linecelda5869").style("opacity", "0");
                        d3.select(".mouse-line-horizontalcelda5869").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5869 circle").style("opacity", "0");
                        d3.selectAll(".mouse-per-linecelda5869 text").style("opacity", "0");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'none');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'none');
                    })
                    .on("mouseover", function () {
                        d3.select(".mouse-linecelda5869").style("opacity", "0.65");
                        d3.select(".mouse-line-horizontalcelda5869").style("opacity", "0.65");
                        d3.selectAll(".mouse-per-linecelda5869 circle").style("opacity", "1");
                        d3.selectAll(".mouse-per-linecelda5869 text").style("opacity", "1");
                        d3.selectAll("#globo_Grafico_MLineas").style('display', 'block');
                        d3.selectAll("#globo_Grafico_MLineas_LeyendaY").style('display', 'block');
                        ActualizarLineasPuntos('celda5869', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    })
                    .on("mousemove", function () {
                        ActualizarLineasPuntos('celda5869', d3.mouse(this), seriesLineas, ejeX, ejeY, nPuntosEjeX, width, height)
                        ActualizarContenidoGlobo(d3.mouse(this), seriesLineas, seriesLineas, ejeX, ejeY, nPuntosEjeX, width, margin, color, '#.##0,0')
                    });
            }
        );
</script>
</div><div class="zona_mas_info"><div id="ccc" class="box_limpio box"><img id="aaaa" class="icono_descarga" src="./www.portalestadistico.com_files/icono_descarga.png" alt="" title=""><div id="capa_opciones_descargas" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Descargas: </h4><ul id="menu1"><li id="opt_1.3" onclick="saveSvgAsPng(document.getElementById(&#39;celda5869&#39;), &#39;Variación de la población respecto al año 2000 (%).png&#39;, {left: -20, width: 1004, backgroundColor: &#39;#FFFFFF&#39;});"><img src="./www.portalestadistico.com_files/icono_png.png" class="iconos_menu_opciones">Imagen PNG</li><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#" id="descarga5869"><li><img src="./www.portalestadistico.com_files/icono_svg.png" class="iconos_menu_opciones">Imagen SVG</li></a><script>d3.select("#descarga5869").on("click", function(){d3.select(this).attr("href", 'data:application/octet-stream;base64,' + btoa('<?xml version="1.0" encoding="ISO-8859-1" ?>\r\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:attrib="http://www.carto.net/attrib" xml:space="preserve" xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" a3:scriptImplementation="Adobe" style="shape-rendering:geometricPrecision; text-rendering:optimizeLegibility; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd;" width="969" height="444"><style> text{font-size: 12px;color: #A9A9A9;font-family: Arial;fill: #A9A9A9;} .line {fill: none;}</style>' + d3.select("#celda5869").html() + '</svg>'  )).attr("download", "Variación de la población respecto al año 2000 (%).svg")})</script><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5869&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=excel"><li id="opt_1.7"><img src="./www.portalestadistico.com_files/icono_excel.png" class="iconos_menu_opciones">Datos Excel</li></a><a href="http://www.portalestadistico.com/proceso_descarga_excel_csv.aspx?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;Id_Celda_Fila_Plantilla=5869&amp;Id_Territorio=00&amp;Id_Territorio_Padre=CCA02&amp;idioma=1&amp;Tipo_Fichero_Generado=csv"><li id="opt_1.8"><img src="./www.portalestadistico.com_files/icono_csv.png" class="iconos_menu_opciones">Datos CSV</li></a></ul></div></div><div id="ccc" class="box_limpio box"><img class="icono_descarga" src="./www.portalestadistico.com_files/icono_mas.png" alt="" title=""><div id="capa_opciones_masopciones" class="overlay menu_opciones representacion_visualizacion sombra_perimetral"><h4>Más opciones:</h4><ul id="menu1"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="DATOS&amp;00&amp;5869&amp;CCA02" rel="modal:open"><li id="opt_1.3"><img src="./www.portalestadistico.com_files/icono_grid.png" class="iconos_menu_opciones">Ver datos</li></a></ul></div></div></div><div class="titulo_celda">Variación de la población respecto al año 2000 (%)</div></td></tr><tr><td class="separador"><br></td></tr></tbody></table>
        </div>
        
        <div id="UpdatePanel2">
	
        
            <!-- Modal HTML embedded directly into document -->
            <div id="ex1" style="display:none;">
                <iframe id="iframe_datos" src="./www.portalestadistico.com_files/saved_resource.html" width="630" height="515" frameborder="0"></iframe>
            </div>
        
        
</div>
        
    </section>
    
    <footer>
    <div id="pie">
    
        <div id="contenido_pie" class="">
            <span class="itemListado_normal">+34 983 34 09 93</span>
            <span class="itemListado_normal"><a href="mailto:info@portalestadistico.com">info@portalestadistico.com</a></span>
            <span class="itemListado_normal"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="enlace_aviso_legal" rel="modal:open">Aviso Legal</a></span>
            <span class="itemListado_normal"><a href="http://www.portalestadistico.com/?pn=portalestadistico&amp;pc=AAA00&amp;idp=10001&amp;idpl=100000&amp;idioma=#ex1" id="enlace_politica_cookies" rel="modal:open">Política de Cookies</a></span>
            
            <ul id="lista_identif_contact_condic" class="itemListado_normal" style="width: 200px;">
                <li><a class="si-linkedin" title="portalestadístico en LinkedIn" href="http://www.linkedin.com/company/portalestadistico?trk=top_nav_home" target="_blank">LinkedIn</a></li>
                <li><a class="si-facebook" title="portalestadístico en Facebook" href="https://www.facebook.com/pages/Portalestadistico/219508834839716" target="_blank">Facebook</a></li>
                <li><a class="si-twitter" title="portalestadístico en Twitter" href="https://twitter.com/portestadistico" target="_blank">Twitter</a></li>
                <li><a class="si-youtube" title="portalestadístico en Youtube" href="http://www.youtube.com/user/Portalestadistico" target="_blank">Youtube</a></li>
            </ul>
            
            <span class="itemListado_ultimo"><a title="Desarrollado por Cylstat" href="http://www.cylstat.es/" target="_blank">© Cylstat 2018</a></span>
            
        </div>
        
    </div>
        
</footer>
    
    

<script type="text/javascript">
//<![CDATA[
(function() {var fn = function() {$get("ToolkitScriptManager1_HiddenField").value = '';Sys.Application.remove_init(fn);};Sys.Application.add_init(fn);})();Sys.Application.initialize();
//]]>
</script>
</form>
    


<div id="globo_Grafico_sectores" class="toolTip" style="position: absolute; display: none;"></div><div id="globo_Grafico_sectores" class="toolTip" style="position: absolute; display: none;"></div><img id="floatBarImgId" style="display: none; opacity: 0; position: absolute; z-index: 2147483647;" src="chrome-extension://dbkmjjclgbiooljcegcddagnddjedmed/pics/save2-32.png"><div id="globo_Grafico_MLineas" class="toolTip" style="position: absolute; display: none;"></div><div id="globo_Grafico_MLineas_LeyendaY" class="tooltip_YLegend" style="position: absolute; display: none;"></div><div id="fatkun-drop-panel">
        <a id="fatkun-drop-panel-close-btn">×</a>
            <div id="fatkun-drop-panel-inner">
                <div class="fatkun-content">
                    <svg class="fatkun-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5892"><path d="M494.933333 782.933333c2.133333 2.133333 4.266667 4.266667 8.533334 6.4h8.533333c6.4 0 10.666667-2.133333 14.933333-6.4l2.133334-2.133333 275.2-275.2c8.533333-8.533333 8.533333-21.333333 0-29.866667-8.533333-8.533333-21.333333-8.533333-29.866667 0L533.333333 716.8V128c0-12.8-8.533333-21.333333-21.333333-21.333333s-21.333333 8.533333-21.333333 21.333333v588.8L249.6 475.733333c-8.533333-8.533333-21.333333-8.533333-29.866667 0-8.533333 8.533333-8.533333 21.333333 0 29.866667l275.2 277.333333zM853.333333 874.666667H172.8c-12.8 0-21.333333 8.533333-21.333333 21.333333s8.533333 21.333333 21.333333 21.333333H853.333333c12.8 0 21.333333-8.533333 21.333334-21.333333s-10.666667-21.333333-21.333334-21.333333z" p-id="5893"></path></svg>
                    <div class="fatkun-title">Drag and Drop</div>
                    <div class="fatkun-desc">The image will be downloaded</div>
                </div>
            </div>
    </div><div id="globo_Grafico_MLineas" class="toolTip" style="position: absolute; display: none; left: 677px; top: 4733px;">periodo: Anual 2009<div style="color: rgb(255, 171, 133);">España : <b>15,4</b></div></div><div id="globo_Grafico_MLineas_LeyendaY" class="tooltip_YLegend" style="position: absolute; display: none; width: 29.0195px; left: 228px; top: 4801px;">16,1</div></body></html>