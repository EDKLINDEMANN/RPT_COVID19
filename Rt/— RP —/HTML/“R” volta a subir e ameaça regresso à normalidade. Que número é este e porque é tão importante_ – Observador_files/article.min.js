function PostCount(){"use strict";var l=[],r={},t='<span class="global-spinner"><span class="spinner"></span></span>',e=t+'<a class="comment-small-icon clickable" data-ga-pageview="true" data-ga-event="true" data-ga-category="comments" data-ga-action="click" data-ga-label="comment_small_icon"><svg class="obs-icon obs-icon-comments"><use xlink:href="#obs-icon-comments"></use></svg>{{count}}</a>',n=t+' <div class="comment-info-slider clickable" data-ga-pageview="true" data-ga-event="true" data-ga-category="comments" data-ga-action="click" data-ga-label="comment_info_slider"><i class="comment-icon" data-ga-pageview="true" data-ga-event="true" data-ga-category="comments" data-ga-action="click" data-ga-label="comment_icon">{{count}}</i></div>';function o(t){window.CommentsManager.openComments(contextualData.title,contextualData.id,contextualData.post.authorId,function(){t.removeClass("comments-loading")})}this.add=function(t){var a=$(t),e=a.closest(a.closest(".news-item")),n=a.closest(a.closest(".recirculation"));if((0===e.length||0<n.length)&&0===a.children().length){var o=a.data("authorid");if(!o||!o.length)return;var i={contentType:"post",objectId:a.data("id").toString(),initialProps:{authorId:o,title:a.data("title"),dontPreFetch:!0}};if(adamastor.isLoggedIn()){var s=adamastor.getSessionProfile();i.initialProps.userId=s.sub,i.initialProps.userName=s.name,i.initialProps.isCommenter=0<=s.tags.indexOf("commenter")}l.push(i);var c=a.data("id");r[c]={link:a.data("link"),dom:t}}},this.countPost=function(){if("post"==window.contextualData.type){var t="https://barbeiro.observador.pt/comments/count?content_type=post&id="+contextualData.id;$(".article-meta .commentSmallIcon").html(e.replace("{{count}}","")).addClass("clickable").toggleClass("no-comments"),$("#viewComentsButtonContainer").html(n.replace("{{count}}","+")).addClass("clickable").toggleClass("no-comments"),$("#viewComentsButtonContainer").on("click",function(){var t=$(this);t.addClass("comments-loading",!0),o(t)}),$("article .commentSmallIcon").on("click",function(t){t.preventDefault();var a=$(this);a.addClass("comments-loading",!0),o(a)}),$.ajax({url:t,dataType:"json",success:function(t){var a=0;a=null==t?0:t[0].count,$(".article-meta .commentSmallIcon").html(e.replace("{{count}}",0<a?a:"")).addClass("clickable").toggleClass("no-comments",0==a),$("#viewComentsButtonContainer").html(n.replace("{{count}}",0<a?a:"+")).toggleClass("no-comments",0==a).addClass("clickable")},error:function(){}}).done(function(){})}}}obsEventListener("obsLoad",function(){for(var t=document.querySelectorAll(".article-body-wrapper a"),a=t.length-1;0<=a;a--)t[a].hostname.indexOf("observador.pt")<0&&!t[a].hasAttribute("target")&&t[a].setAttribute("target","_blank");"post"==contextualData.type&&((new PostCount).countPost(),window.articleIsPremium=contextualData.post.premium||!1,window.isPremiumArticle=contextualData.post.premium||!1,contextualData.post.authors.forEach(function(t){ga("send","event","Author stat","Open article",t,{nonInteraction:1})}),contextualData.post.categories.forEach(function(t){ga("send","event","Topic stat","Open article",t,{nonInteraction:1})}),1<=contextualData.post.mainCategories.length&&ga("set","dimension2",contextualData.post.mainCategories[0]),2<=contextualData.post.mainCategories.length&&ga("set","dimension3",contextualData.post.mainCategories[1]),ga("set","dimension13",contextualData.post.premium))}),document.addEventListener("obsBeforeNavigate",function(){window.articleIsPremium=!1,window.isPremiumArticle=!1,"google"in window&&google.maps&&delete google.maps}),obsEventListener("obsLoad",function(){jQuery(".article-block.block-image:not(.small)").each(function(){var t=jQuery(this).find(".legenda");if(t){var a=t.outerHeight(!0),e=jQuery(this).find(".creditos");e.length&&(a+=e.outerHeight(!0)),jQuery(this).next(".article-body").find(".right-column").css("padding-top",a)}});var a=$("article").data("autoindex")||!1,t="https://"+window.location.hostname+"/wp-content/themes/observador-child/assets/build/html/asides-cta/asides-cta.templates.html",i=0,s=$(".article-body"),e=!0;(-1<contextualData.bodyClasses.indexOf("liveblog")||-1<contextualData.bodyClasses.indexOf("obs_tutor"))&&(e=!1),$.get(t,function(t){var o=$.parseHTML(t);o=(o=o.filter(function(t){if("#text"!=t.nodeName&&"SCRIPT"!=t.nodeName&&!t.querySelector("script"))return t})).sort(function(){return parseInt(3*Math.random())-1}),e&&!1===a&&0<o.length&&s.each(function(t){for(var a=$(s[t]),e=Math.floor(a.height()/500),n=0;n!=e;n++)$(".left-column",a).append(o[i]),i++,0==(i%=o.length)&&(o=o.sort(function(){return parseInt(3*Math.random())-1}))})},"html")});
//# sourceMappingURL=article.min.js.map
